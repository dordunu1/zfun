import{e as Pr,a as tf,d as V9,s as F9}from"./vendor-e-D_NVhuKL.js";import{_ as Mv,e as B9}from"./vendor-t-DHHewP6q.js";import{o as TR,c as j9,g as hA,s as q9,d as H9,k as W9,a as z9,Y as G9,_ as K9}from"./vendor-i-C9LyY8Pr.js";import{cv as Bc,cw as Lv,cx as ct,cy as Kr,cz as H0,cA as Q9,cB as Ut,cC as at,cD as Wr,cE as Rt}from"./react-CrwUxJqE.js";import{a as yc}from"./vendor-m-BWy77fVR.js";import{_ as RR}from"./rainbow-core-DFjNTqhC.js";import{f as zr,t as xr,b as h_,d as J9}from"./vendor-u-DeJ6A3so.js";import{O as Y9,P as CR,Q as Z9}from"./vendor-d-MD9PtDQc.js";import{y as X9,z as eU,A as tU,B as jc}from"./vendor-s-BqG1wrSf.js";import{f as nU}from"./vendor-f-CRLubUDi.js";import{D as W0,h as dA,y as rU}from"./vendor-p-RCdGx5qR.js";import{G as iU,A as Ct,B as mn,C as ve,D as Ao,E as Sr}from"./vendor-l-C7EPx06i.js";import{b as z0}from"./vendor-b-Cbqllzkj.js";import{j as sU}from"./vendor-k-Bwi4WJlf.js";import{o as fA,h as oU}from"./vendor-c-DcYcGEe8.js";import{q as xR,b as PR}from"./vendor-q-CjSG2LVz.js";function wme({storage:n,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:t=1e3,serialize:r=JSON.stringify,deserialize:i=JSON.parse,retry:s}){if(n){const o=c=>{try{n.setItem(e,r(c));return}catch(l){return l}};return{persistClient:aU(c=>{let l=c,h=o(l),f=0;for(;h&&l;)f++,l=s?.({persistedClient:l,error:h,errorCount:f}),l&&(h=o(l))},t),restoreClient:()=>{const c=n.getItem(e);if(c)return i(c)},removeClient:()=>{n.removeItem(e)}}}return{persistClient:pA,restoreClient:()=>{},removeClient:pA}}function aU(n,e=100){let t=null,r;return function(...i){r=i,t===null&&(t=setTimeout(()=>{n(...r),t=null},e))}}function pA(){}class Lu{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Td=typeof window>"u"||"Deno"in window;function ki(){}function cU(n,e){return typeof n=="function"?n(e):n}function d_(n){return typeof n=="number"&&n>=0&&n!==1/0}function OR(n,e){return Math.max(n+(e||0)-Date.now(),0)}function Kp(n,e,t){return nf(n)?typeof e=="function"?{...t,queryKey:n,queryFn:e}:{...e,queryKey:n}:n}function _me(n,e,t){return nf(n)?typeof e=="function"?{...t,mutationKey:n,mutationFn:e}:{...e,mutationKey:n}:typeof n=="function"?{...e,mutationFn:n}:{...n}}function Jo(n,e,t){return nf(n)?[{...e,queryKey:n},t]:[n||{},e]}function gA(n,e){const{type:t="all",exact:r,fetchStatus:i,predicate:s,queryKey:o,stale:c}=n;if(nf(o)){if(r){if(e.queryHash!==Uv(o,e.options))return!1}else if(!Jg(e.queryKey,o))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof c=="boolean"&&e.isStale()!==c||typeof i<"u"&&i!==e.state.fetchStatus||s&&!s(e))}function mA(n,e){const{exact:t,fetching:r,predicate:i,mutationKey:s}=n;if(nf(s)){if(!e.options.mutationKey)return!1;if(t){if(wc(e.options.mutationKey)!==wc(s))return!1}else if(!Jg(e.options.mutationKey,s))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||i&&!i(e))}function Uv(n,e){return(e?.queryKeyHashFn||wc)(n)}function wc(n){return JSON.stringify(n,(e,t)=>f_(t)?Object.keys(t).sort().reduce((r,i)=>(r[i]=t[i],r),{}):t)}function Jg(n,e){return kR(n,e)}function kR(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!kR(n[t],e[t])):!1}function NR(n,e){if(n===e)return n;const t=yA(n)&&yA(e);if(t||f_(n)&&f_(e)){const r=t?n.length:Object.keys(n).length,i=t?e:Object.keys(e),s=i.length,o=t?[]:{};let c=0;for(let l=0;l<s;l++){const h=t?l:i[l];o[h]=NR(n[h],e[h]),o[h]===n[h]&&c++}return r===s&&c===r?n:o}return e}function Yg(n,e){if(n&&!e||e&&!n)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function yA(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function f_(n){if(!wA(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!wA(t)||!t.hasOwnProperty("isPrototypeOf"))}function wA(n){return Object.prototype.toString.call(n)==="[object Object]"}function nf(n){return Array.isArray(n)}function DR(n){return new Promise(e=>{setTimeout(e,n)})}function _A(n){DR(0).then(n)}function lU(){if(typeof AbortController=="function")return new AbortController}function p_(n,e,t){return t.isDataEqual!=null&&t.isDataEqual(n,e)?n:typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?NR(n,e):e}class uU extends Lu{constructor(){super(),this.setup=e=>{if(!Td&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Zg=new uU,vA=["online","offline"];class hU extends Lu{constructor(){super(),this.setup=e=>{if(!Td&&window.addEventListener){const t=()=>e();return vA.forEach(r=>{window.addEventListener(r,t,!1)}),()=>{vA.forEach(r=>{window.removeEventListener(r,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Xg=new hU;function dU(n){return Math.min(1e3*2**n,3e4)}function G0(n){return(n??"online")==="online"?Xg.isOnline():!0}class MR{constructor(e){this.revert=e?.revert,this.silent=e?.silent}}function Dg(n){return n instanceof MR}function LR(n){let e=!1,t=0,r=!1,i,s,o;const c=new Promise((A,L)=>{s=A,o=L}),l=A=>{r||(w(new MR(A)),n.abort==null||n.abort())},h=()=>{e=!0},f=()=>{e=!1},m=()=>!Zg.isFocused()||n.networkMode!=="always"&&!Xg.isOnline(),y=A=>{r||(r=!0,n.onSuccess==null||n.onSuccess(A),i?.(),s(A))},w=A=>{r||(r=!0,n.onError==null||n.onError(A),i?.(),o(A))},I=()=>new Promise(A=>{i=L=>{const D=r||!m();return D&&A(L),D},n.onPause==null||n.onPause()}).then(()=>{i=void 0,r||n.onContinue==null||n.onContinue()}),T=()=>{if(r)return;let A;try{A=n.fn()}catch(L){A=Promise.reject(L)}Promise.resolve(A).then(y).catch(L=>{var D,C;if(r)return;const k=(D=n.retry)!=null?D:3,P=(C=n.retryDelay)!=null?C:dU,O=typeof P=="function"?P(t,L):P,g=k===!0||typeof k=="number"&&t<k||typeof k=="function"&&k(t,L);if(e||!g){w(L);return}t++,n.onFail==null||n.onFail(t,L),DR(O).then(()=>{if(m())return I()}).then(()=>{e?w(L):T()})})};return G0(n.networkMode)?T():I().then(T),{promise:c,cancel:l,continue:()=>i?.()?c:Promise.resolve(),cancelRetry:h,continueRetry:f}}const $v=console;function fU(){let n=[],e=0,t=f=>{f()},r=f=>{f()};const i=f=>{let m;e++;try{m=f()}finally{e--,e||c()}return m},s=f=>{e?n.push(f):_A(()=>{t(f)})},o=f=>(...m)=>{s(()=>{f(...m)})},c=()=>{const f=n;n=[],f.length&&_A(()=>{r(()=>{f.forEach(m=>{t(m)})})})};return{batch:i,batchCalls:o,schedule:s,setNotifyFunction:f=>{t=f},setBatchNotifyFunction:f=>{r=f}}}const er=fU();class UR{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),d_(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(Td?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}let pU=class extends UR{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||$v,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||gU(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,t){const r=p_(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const r=this.promise;return(t=this.retryer)==null||t.cancel(e),r?r.then(ki).catch(ki):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!OR(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var r,i;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var s;return(s=this.retryer)==null||s.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const w=this.observers.find(I=>I.options.queryFn);w&&this.setOptions(w.options)}const o=lU(),c={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},l=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>{if(o)return this.abortSignalConsumed=!0,o.signal}})};l(c);const h=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(c)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),f={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:h};if(l(f),(r=this.options.behavior)==null||r.onFetch(f),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((i=f.fetchOptions)==null?void 0:i.meta)){var m;this.dispatch({type:"fetch",meta:(m=f.fetchOptions)==null?void 0:m.meta})}const y=w=>{if(Dg(w)&&w.silent||this.dispatch({type:"error",error:w}),!Dg(w)){var I,T,A,L;(I=(T=this.cache.config).onError)==null||I.call(T,w,this),(A=(L=this.cache.config).onSettled)==null||A.call(L,this.state.data,w,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=LR({fn:f.fetchFn,abort:o?.abort.bind(o),onSuccess:w=>{var I,T,A,L;if(typeof w>"u"){y(new Error(this.queryHash+" data is undefined"));return}this.setData(w),(I=(T=this.cache.config).onSuccess)==null||I.call(T,w,this),(A=(L=this.cache.config).onSettled)==null||A.call(L,w,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:y,onFail:(w,I)=>{this.dispatch({type:"failed",failureCount:w,error:I})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:f.options.retry,retryDelay:f.options.retryDelay,networkMode:f.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const t=r=>{var i,s;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(i=e.meta)!=null?i:null,fetchStatus:G0(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(s=e.dataUpdatedAt)!=null?s:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return Dg(o)&&o.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...r,error:o,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),er.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}};function gU(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=typeof e<"u",r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"loading",fetchStatus:"idle"}}class mU extends Lu{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,r){var i;const s=t.queryKey,o=(i=t.queryHash)!=null?i:Uv(s,t);let c=this.get(o);return c||(c=new pU({cache:this,logger:e.getLogger(),queryKey:s,queryHash:o,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(c)),c}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){er.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[r]=Jo(e,t);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(i=>gA(r,i))}findAll(e,t){const[r]=Jo(e,t);return Object.keys(r).length>0?this.queries.filter(i=>gA(r,i)):this.queries}notify(e){er.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){er.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){er.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}let yU=class extends UR{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||$v,this.observers=[],this.state=e.state||$R(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return(e=(t=this.retryer)==null?void 0:t.continue())!=null?e:this.execute()}async execute(){const e=()=>{var g;return this.retryer=LR({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(_,R)=>{this.dispatch({type:"failed",failureCount:_,error:R})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(g=this.options.retry)!=null?g:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t=this.state.status==="loading";try{var r,i,s,o,c,l,h,f;if(!t){var m,y,w,I;this.dispatch({type:"loading",variables:this.options.variables}),await((m=(y=this.mutationCache.config).onMutate)==null?void 0:m.call(y,this.state.variables,this));const _=await((w=(I=this.options).onMutate)==null?void 0:w.call(I,this.state.variables));_!==this.state.context&&this.dispatch({type:"loading",context:_,variables:this.state.variables})}const g=await e();return await((r=(i=this.mutationCache.config).onSuccess)==null?void 0:r.call(i,g,this.state.variables,this.state.context,this)),await((s=(o=this.options).onSuccess)==null?void 0:s.call(o,g,this.state.variables,this.state.context)),await((c=(l=this.mutationCache.config).onSettled)==null?void 0:c.call(l,g,null,this.state.variables,this.state.context,this)),await((h=(f=this.options).onSettled)==null?void 0:h.call(f,g,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:g}),g}catch(g){try{var T,A,L,D,C,k,P,O;throw await((T=(A=this.mutationCache.config).onError)==null?void 0:T.call(A,g,this.state.variables,this.state.context,this)),await((L=(D=this.options).onError)==null?void 0:L.call(D,g,this.state.variables,this.state.context)),await((C=(k=this.mutationCache.config).onSettled)==null?void 0:C.call(k,void 0,g,this.state.variables,this.state.context,this)),await((P=(O=this.options).onSettled)==null?void 0:P.call(O,void 0,g,this.state.variables,this.state.context)),g}finally{this.dispatch({type:"error",error:g})}}}dispatch(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!G0(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=t(this.state),er.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}};function $R(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class wU extends Lu{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,r){const i=new yU({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:r,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(i),i}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){er.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(t=>mA(e,t))}findAll(e){return this.mutations.filter(t=>mA(e,t))}notify(e){er.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const t=this.mutations.filter(r=>r.state.isPaused);return er.batch(()=>t.reduce((r,i)=>r.then(()=>i.continue().catch(ki)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function _U(){return{onFetch:n=>{n.fetchFn=()=>{var e,t,r,i,s,o;const c=(e=n.fetchOptions)==null||(t=e.meta)==null?void 0:t.refetchPage,l=(r=n.fetchOptions)==null||(i=r.meta)==null?void 0:i.fetchMore,h=l?.pageParam,f=l?.direction==="forward",m=l?.direction==="backward",y=((s=n.state.data)==null?void 0:s.pages)||[],w=((o=n.state.data)==null?void 0:o.pageParams)||[];let I=w,T=!1;const A=O=>{Object.defineProperty(O,"signal",{enumerable:!0,get:()=>{var g;if((g=n.signal)!=null&&g.aborted)T=!0;else{var _;(_=n.signal)==null||_.addEventListener("abort",()=>{T=!0})}return n.signal}})},L=n.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+n.options.queryHash+"'")),D=(O,g,_,R)=>(I=R?[g,...I]:[...I,g],R?[_,...O]:[...O,_]),C=(O,g,_,R)=>{if(T)return Promise.reject("Cancelled");if(typeof _>"u"&&!g&&O.length)return Promise.resolve(O);const N={queryKey:n.queryKey,pageParam:_,meta:n.options.meta};A(N);const M=L(N);return Promise.resolve(M).then($=>D(O,_,$,R))};let k;if(!y.length)k=C([]);else if(f){const O=typeof h<"u",g=O?h:bA(n.options,y);k=C(y,O,g)}else if(m){const O=typeof h<"u",g=O?h:vU(n.options,y);k=C(y,O,g,!0)}else{I=[];const O=typeof n.options.getNextPageParam>"u";k=(c&&y[0]?c(y[0],0,y):!0)?C([],O,w[0]):Promise.resolve(D([],w[0],y[0]));for(let _=1;_<y.length;_++)k=k.then(R=>{if(c&&y[_]?c(y[_],_,y):!0){const M=O?w[_]:bA(n.options,R);return C(R,O,M)}return Promise.resolve(D(R,w[_],y[_]))})}return k.then(O=>({pages:O,pageParams:I}))}}}}function bA(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function vU(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}class Eme{constructor(e={}){this.queryCache=e.queryCache||new mU,this.mutationCache=e.mutationCache||new wU,this.logger=e.logger||$v,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Zg.subscribe(()=>{Zg.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Xg.subscribe(()=>{Xg.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(t=this.unsubscribeOnline)==null||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[r]=Jo(e,t);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var r;return(r=this.queryCache.find(e,t))==null?void 0:r.state.data}ensureQueryData(e,t,r){const i=Kp(e,t,r),s=this.getQueryData(i.queryKey);return s?Promise.resolve(s):this.fetchQuery(i)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.queryCache.find(e),s=i?.state.data,o=cU(t,s);if(typeof o>"u")return;const c=Kp(e),l=this.defaultQueryOptions(c);return this.queryCache.build(this,l).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return er.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e,t){var r;return(r=this.queryCache.find(e,t))==null?void 0:r.state}removeQueries(e,t){const[r]=Jo(e,t),i=this.queryCache;er.batch(()=>{i.findAll(r).forEach(s=>{i.remove(s)})})}resetQueries(e,t,r){const[i,s]=Jo(e,t,r),o=this.queryCache,c={type:"active",...i};return er.batch(()=>(o.findAll(i).forEach(l=>{l.reset()}),this.refetchQueries(c,s)))}cancelQueries(e,t,r){const[i,s={}]=Jo(e,t,r);typeof s.revert>"u"&&(s.revert=!0);const o=er.batch(()=>this.queryCache.findAll(i).map(c=>c.cancel(s)));return Promise.all(o).then(ki).catch(ki)}invalidateQueries(e,t,r){const[i,s]=Jo(e,t,r);return er.batch(()=>{var o,c;if(this.queryCache.findAll(i).forEach(h=>{h.invalidate()}),i.refetchType==="none")return Promise.resolve();const l={...i,type:(o=(c=i.refetchType)!=null?c:i.type)!=null?o:"active"};return this.refetchQueries(l,s)})}refetchQueries(e,t,r){const[i,s]=Jo(e,t,r),o=er.batch(()=>this.queryCache.findAll(i).filter(l=>!l.isDisabled()).map(l=>{var h;return l.fetch(void 0,{...s,cancelRefetch:(h=s?.cancelRefetch)!=null?h:!0,meta:{refetchPage:i.refetchPage}})}));let c=Promise.all(o).then(ki);return s!=null&&s.throwOnError||(c=c.catch(ki)),c}fetchQuery(e,t,r){const i=Kp(e,t,r),s=this.defaultQueryOptions(i);typeof s.retry>"u"&&(s.retry=!1);const o=this.queryCache.build(this,s);return o.isStaleByTime(s.staleTime)?o.fetch(s):Promise.resolve(o.state.data)}prefetchQuery(e,t,r){return this.fetchQuery(e,t,r).then(ki).catch(ki)}fetchInfiniteQuery(e,t,r){const i=Kp(e,t,r);return i.behavior=_U(),this.fetchQuery(i)}prefetchInfiniteQuery(e,t,r){return this.fetchInfiniteQuery(e,t,r).then(ki).catch(ki)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const r=this.queryDefaults.find(i=>wc(e)===wc(i.queryKey));r?r.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(r=>Jg(e,r.queryKey));return t?.defaultOptions}setMutationDefaults(e,t){const r=this.mutationDefaults.find(i=>wc(e)===wc(i.mutationKey));r?r.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(r=>Jg(e,r.mutationKey));return t?.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(e?.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=Uv(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.useErrorBoundary>"u"&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e?.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class Ime extends Lu{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),EA(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return g_(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return g_(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const r=this.options,i=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),Yg(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const s=this.hasListeners();s&&IA(this.currentQuery,i,this.options,r)&&this.executeFetch(),this.updateResult(t),s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const o=this.computeRefetchInterval();s&&(this.currentQuery!==i||this.options.enabled!==r.enabled||o!==this.currentRefetchInterval)&&this.updateRefetchInterval(o)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),r=this.createResult(t,e);return EU(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(ki)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),Td||this.currentResult.isStale||!d_(this.options.staleTime))return;const t=OR(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Td||this.options.enabled===!1||!d_(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Zg.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const r=this.currentQuery,i=this.options,s=this.currentResult,o=this.currentResultState,c=this.currentResultOptions,l=e!==r,h=l?e.state:this.currentQueryInitialState,f=l?this.currentResult:this.previousQueryResult,{state:m}=e;let{dataUpdatedAt:y,error:w,errorUpdatedAt:I,fetchStatus:T,status:A}=m,L=!1,D=!1,C;if(t._optimisticResults){const _=this.hasListeners(),R=!_&&EA(e,t),N=_&&IA(e,r,t,i);(R||N)&&(T=G0(e.options.networkMode)?"fetching":"paused",y||(A="loading")),t._optimisticResults==="isRestoring"&&(T="idle")}if(t.keepPreviousData&&!m.dataUpdatedAt&&f!=null&&f.isSuccess&&A!=="error")C=f.data,y=f.dataUpdatedAt,A=f.status,L=!0;else if(t.select&&typeof m.data<"u")if(s&&m.data===o?.data&&t.select===this.selectFn)C=this.selectResult;else try{this.selectFn=t.select,C=t.select(m.data),C=p_(s?.data,C,t),this.selectResult=C,this.selectError=null}catch(_){this.selectError=_}else C=m.data;if(typeof t.placeholderData<"u"&&typeof C>"u"&&A==="loading"){let _;if(s!=null&&s.isPlaceholderData&&t.placeholderData===c?.placeholderData)_=s.data;else if(_=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof _<"u")try{_=t.select(_),this.selectError=null}catch(R){this.selectError=R}typeof _<"u"&&(A="success",C=p_(s?.data,_,t),D=!0)}this.selectError&&(w=this.selectError,C=this.selectResult,I=Date.now(),A="error");const k=T==="fetching",P=A==="loading",O=A==="error";return{status:A,fetchStatus:T,isLoading:P,isSuccess:A==="success",isError:O,isInitialLoading:P&&k,data:C,dataUpdatedAt:y,error:w,errorUpdatedAt:I,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>h.dataUpdateCount||m.errorUpdateCount>h.errorUpdateCount,isFetching:k,isRefetching:k&&!P,isLoadingError:O&&m.dataUpdatedAt===0,isPaused:T==="paused",isPlaceholderData:D,isPreviousData:L,isRefetchError:O&&m.dataUpdatedAt!==0,isStale:Vv(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,Yg(r,t))return;this.currentResult=r;const i={cache:!0},s=()=>{if(!t)return!0;const{notifyOnChangeProps:o}=this.options,c=typeof o=="function"?o():o;if(c==="all"||!c&&!this.trackedProps.size)return!0;const l=new Set(c??this.trackedProps);return this.options.useErrorBoundary&&l.add("error"),Object.keys(this.currentResult).some(h=>{const f=h;return this.currentResult[f]!==t[f]&&l.has(f)})};e?.listeners!==!1&&s()&&(i.listeners=!0),this.notify({...i,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!Dg(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){er.batch(()=>{if(e.onSuccess){var t,r,i,s;(t=(r=this.options).onSuccess)==null||t.call(r,this.currentResult.data),(i=(s=this.options).onSettled)==null||i.call(s,this.currentResult.data,null)}else if(e.onError){var o,c,l,h;(o=(c=this.options).onError)==null||o.call(c,this.currentResult.error),(l=(h=this.options).onSettled)==null||l.call(h,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:f})=>{f(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function bU(n,e){return e.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&e.retryOnMount===!1)}function EA(n,e){return bU(n,e)||n.state.dataUpdatedAt>0&&g_(n,e,e.refetchOnMount)}function g_(n,e,t){if(e.enabled!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Vv(n,e)}return!1}function IA(n,e,t,r){return t.enabled!==!1&&(n!==e||r.enabled===!1)&&(!t.suspense||n.state.status!=="error")&&Vv(n,t)}function Vv(n,e){return n.isStaleByTime(e.staleTime)}function EU(n,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:!Yg(n.getCurrentResult(),e)}class Ame extends Lu{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),Yg(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:$R(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){er.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,r,i,s;(t=(r=this.mutateOptions).onSuccess)==null||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(i=(s=this.mutateOptions).onSettled)==null||i.call(s,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var o,c,l,h;(o=(c=this.mutateOptions).onError)==null||o.call(c,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(l=(h=this.mutateOptions).onSettled)==null||l.call(h,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:f})=>{f(this.currentResult)})})}}function IU(n){return{mutationKey:n.options.mutationKey,state:n.state}}function AU(n){return{state:n.state,queryKey:n.queryKey,queryHash:n.queryHash}}function SU(n){return n.state.isPaused}function TU(n){return n.state.status==="success"}function RU(n,e={}){const t=[],r=[];if(e.dehydrateMutations!==!1){const i=e.shouldDehydrateMutation||SU;n.getMutationCache().getAll().forEach(s=>{i(s)&&t.push(IU(s))})}if(e.dehydrateQueries!==!1){const i=e.shouldDehydrateQuery||TU;n.getQueryCache().getAll().forEach(s=>{i(s)&&r.push(AU(s))})}return{mutations:t,queries:r}}function CU(n,e,t){if(typeof e!="object"||e===null)return;const r=n.getMutationCache(),i=n.getQueryCache(),s=e.mutations||[],o=e.queries||[];s.forEach(c=>{var l;r.build(n,{...t==null||(l=t.defaultOptions)==null?void 0:l.mutations,mutationKey:c.mutationKey},c.state)}),o.forEach(({queryKey:c,state:l,queryHash:h})=>{var f;const m=i.get(h);if(m){if(m.state.dataUpdatedAt<l.dataUpdatedAt){const{fetchStatus:y,...w}=l;m.setState(w)}return}i.build(n,{...t==null||(f=t.defaultOptions)==null?void 0:f.queries,queryKey:c,queryHash:h},{...l,fetchStatus:"idle"})})}const xU=["added","removed","updated"];function AA(n){return xU.includes(n)}async function PU({queryClient:n,persister:e,maxAge:t=1e3*60*60*24,buster:r="",hydrateOptions:i}){try{const s=await e.restoreClient();if(s)if(s.timestamp){const o=Date.now()-s.timestamp>t,c=s.buster!==r;o||c?e.removeClient():CU(n,s.clientState,i)}else e.removeClient()}catch{e.removeClient()}}async function SA({queryClient:n,persister:e,buster:t="",dehydrateOptions:r}){const i={buster:t,timestamp:Date.now(),clientState:RU(n,r)};await e.persistClient(i)}function OU(n){const e=n.queryClient.getQueryCache().subscribe(r=>{AA(r.type)&&SA(n)}),t=n.queryClient.getMutationCache().subscribe(r=>{AA(r.type)&&SA(n)});return()=>{e(),t()}}function Sme(n){let e=!1,t;const r=()=>{e=!0,t?.()},i=PU(n).then(()=>{e||(t=OU(n))});return[r,i]}function e0(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Fv(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function kU(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");e0(n.outputLen),e0(n.blockLen)}function lu(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function VR(n,e){Fv(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}const Qp=BigInt(2**32-1),m_=BigInt(32);function FR(n,e=!1){return e?{h:Number(n&Qp),l:Number(n>>m_&Qp)}:{h:Number(n>>m_&Qp)|0,l:Number(n&Qp)|0}}function BR(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let i=0;i<n.length;i++){const{h:s,l:o}=FR(n[i],e);[t[i],r[i]]=[s,o]}return[t,r]}const NU=(n,e)=>BigInt(n>>>0)<<m_|BigInt(e>>>0),DU=(n,e,t)=>n>>>t,MU=(n,e,t)=>n<<32-t|e>>>t,LU=(n,e,t)=>n>>>t|e<<32-t,UU=(n,e,t)=>n<<32-t|e>>>t,$U=(n,e,t)=>n<<64-t|e>>>t-32,VU=(n,e,t)=>n>>>t-32|e<<64-t,FU=(n,e)=>e,BU=(n,e)=>n,jR=(n,e,t)=>n<<t|e>>>32-t,qR=(n,e,t)=>e<<t|n>>>32-t,HR=(n,e,t)=>e<<t-32|n>>>64-t,WR=(n,e,t)=>n<<t-32|e>>>64-t;function jU(n,e,t,r){const i=(e>>>0)+(r>>>0);return{h:n+t+(i/2**32|0)|0,l:i|0}}const qU=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),HU=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,WU=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),zU=(n,e,t,r,i)=>e+t+r+i+(n/2**32|0)|0,GU=(n,e,t,r,i)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(i>>>0),KU=(n,e,t,r,i,s)=>e+t+r+i+s+(n/2**32|0)|0,ot={fromBig:FR,split:BR,toBig:NU,shrSH:DU,shrSL:MU,rotrSH:LU,rotrSL:UU,rotrBH:$U,rotrBL:VU,rotr32H:FU,rotr32L:BU,rotlSH:jR,rotlSL:qR,rotlBH:HR,rotlBL:WR,add:jU,add3L:qU,add3H:HU,add4L:WU,add4H:zU,add5H:KU,add5L:GU},Uy=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zR=n=>n instanceof Uint8Array,QU=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),$y=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),hs=(n,e)=>n<<32-e|n>>>e,JU=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!JU)throw new Error("Non little-endian hardware is not supported");function YU(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function K0(n){if(typeof n=="string"&&(n=YU(n)),!zR(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function ZU(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!zR(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}class Bv{clone(){return this._cloneInto()}}function jv(n){const e=r=>n().update(K0(r)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function XU(n=32){if(Uy&&typeof Uy.getRandomValues=="function")return Uy.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}const[GR,KR,QR]=[[],[],[]],e$=BigInt(0),$h=BigInt(1),t$=BigInt(2),n$=BigInt(7),r$=BigInt(256),i$=BigInt(113);for(let n=0,e=$h,t=1,r=0;n<24;n++){[t,r]=[r,(2*t+3*r)%5],GR.push(2*(5*r+t)),KR.push((n+1)*(n+2)/2%64);let i=e$;for(let s=0;s<7;s++)e=(e<<$h^(e>>n$)*i$)%r$,e&t$&&(i^=$h<<($h<<BigInt(s))-$h);QR.push(i)}const[s$,o$]=BR(QR,!0),TA=(n,e,t)=>t>32?HR(n,e,t):jR(n,e,t),RA=(n,e,t)=>t>32?WR(n,e,t):qR(n,e,t);function a$(n,e=24){const t=new Uint32Array(10);for(let r=24-e;r<24;r++){for(let o=0;o<10;o++)t[o]=n[o]^n[o+10]^n[o+20]^n[o+30]^n[o+40];for(let o=0;o<10;o+=2){const c=(o+8)%10,l=(o+2)%10,h=t[l],f=t[l+1],m=TA(h,f,1)^t[c],y=RA(h,f,1)^t[c+1];for(let w=0;w<50;w+=10)n[o+w]^=m,n[o+w+1]^=y}let i=n[2],s=n[3];for(let o=0;o<24;o++){const c=KR[o],l=TA(i,s,c),h=RA(i,s,c),f=GR[o];i=n[f],s=n[f+1],n[f]=l,n[f+1]=h}for(let o=0;o<50;o+=10){for(let c=0;c<10;c++)t[c]=n[o+c];for(let c=0;c<10;c++)n[o+c]^=~t[(c+2)%10]&t[(c+4)%10]}n[0]^=s$[r],n[1]^=o$[r]}t.fill(0)}class qv extends Bv{constructor(e,t,r,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,e0(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=QU(this.state)}keccak(){a$(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){lu(this);const{blockLen:t,state:r}=this;e=K0(e);const i=e.length;for(let s=0;s<i;){const o=Math.min(t-this.pos,i-s);for(let c=0;c<o;c++)r[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,t&128&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){lu(this,!1),Fv(e),this.finish();const t=this.state,{blockLen:r}=this;for(let i=0,s=e.length;i<s;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,s-i);e.set(t.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return e0(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(VR(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new qv(t,r,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=r,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}}const c$=(n,e,t)=>jv(()=>new qv(e,n,t)),Tme=c$(1,136,256/8);function l$(n,e,t,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,t,r);const i=BigInt(32),s=BigInt(4294967295),o=Number(t>>i&s),c=Number(t&s),l=r?4:0,h=r?0:4;n.setUint32(e+l,o,r),n.setUint32(e+h,c,r)}class JR extends Bv{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=$y(this.buffer)}update(e){lu(this);const{view:t,buffer:r,blockLen:i}=this;e=K0(e);const s=e.length;for(let o=0;o<s;){const c=Math.min(i-this.pos,s-o);if(c===i){const l=$y(e);for(;i<=s-o;o+=i)this.process(l,o);continue}r.set(e.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){lu(this),VR(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:i,isLE:s}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let m=o;m<i;m++)t[m]=0;l$(r,i-8,BigInt(this.length*8),s),this.process(r,0);const c=$y(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const h=l/4,f=this.get();if(h>f.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)c.setUint32(4*m,f[m],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:i,finished:s,destroyed:o,pos:c}=this;return e.length=i,e.pos=c,e.finished=s,e.destroyed=o,i%t&&e.buffer.set(r),e}}const u$=(n,e,t)=>n&e^~n&t,h$=(n,e,t)=>n&e^n&t^e&t,d$=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Fo=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Bo=new Uint32Array(64);class f$ extends JR{constructor(){super(64,32,8,!1),this.A=Fo[0]|0,this.B=Fo[1]|0,this.C=Fo[2]|0,this.D=Fo[3]|0,this.E=Fo[4]|0,this.F=Fo[5]|0,this.G=Fo[6]|0,this.H=Fo[7]|0}get(){const{A:e,B:t,C:r,D:i,E:s,F:o,G:c,H:l}=this;return[e,t,r,i,s,o,c,l]}set(e,t,r,i,s,o,c,l){this.A=e|0,this.B=t|0,this.C=r|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=c|0,this.H=l|0}process(e,t){for(let m=0;m<16;m++,t+=4)Bo[m]=e.getUint32(t,!1);for(let m=16;m<64;m++){const y=Bo[m-15],w=Bo[m-2],I=hs(y,7)^hs(y,18)^y>>>3,T=hs(w,17)^hs(w,19)^w>>>10;Bo[m]=T+Bo[m-7]+I+Bo[m-16]|0}let{A:r,B:i,C:s,D:o,E:c,F:l,G:h,H:f}=this;for(let m=0;m<64;m++){const y=hs(c,6)^hs(c,11)^hs(c,25),w=f+y+u$(c,l,h)+d$[m]+Bo[m]|0,T=(hs(r,2)^hs(r,13)^hs(r,22))+h$(r,i,s)|0;f=h,h=l,l=c,c=o+w|0,o=s,s=i,i=r,r=w+T|0}r=r+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,c=c+this.E|0,l=l+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,i,s,o,c,l,h,f)}roundClean(){Bo.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const p$=jv(()=>new f$);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const YR=BigInt(0),Q0=BigInt(1),g$=BigInt(2),J0=n=>n instanceof Uint8Array,m$=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function uu(n){if(!J0(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=m$[n[t]];return e}function ZR(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function Hv(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function hu(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let r=0;r<t.length;r++){const i=r*2,s=n.slice(i,i+2),o=Number.parseInt(s,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Tc(n){return Hv(uu(n))}function Wv(n){if(!J0(n))throw new Error("Uint8Array expected");return Hv(uu(Uint8Array.from(n).reverse()))}function du(n,e){return hu(n.toString(16).padStart(e*2,"0"))}function zv(n,e){return du(n,e).reverse()}function y$(n){return hu(ZR(n))}function Gi(n,e,t){let r;if(typeof e=="string")try{r=hu(e)}catch(s){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${s}`)}else if(J0(e))r=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const i=r.length;if(typeof t=="number"&&i!==t)throw new Error(`${n} expected ${t} bytes, got ${i}`);return r}function Rd(...n){const e=new Uint8Array(n.reduce((r,i)=>r+i.length,0));let t=0;return n.forEach(r=>{if(!J0(r))throw new Error("Uint8Array expected");e.set(r,t),t+=r.length}),e}function w$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function _$(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function v$(n){let e;for(e=0;n>YR;n>>=Q0,e+=1);return e}function b$(n,e){return n>>BigInt(e)&Q0}const E$=(n,e,t)=>n|(t?Q0:YR)<<BigInt(e),Gv=n=>(g$<<BigInt(n-1))-Q0,Vy=n=>new Uint8Array(n),CA=n=>Uint8Array.from(n);function XR(n,e,t){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let r=Vy(n),i=Vy(n),s=0;const o=()=>{r.fill(1),i.fill(0),s=0},c=(...m)=>t(i,r,...m),l=(m=Vy())=>{i=c(CA([0]),m),r=c(),m.length!==0&&(i=c(CA([1]),m),r=c())},h=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let m=0;const y=[];for(;m<e;){r=c();const w=r.slice();y.push(w),m+=r.length}return Rd(...y)};return(m,y)=>{o(),l(m);let w;for(;!(w=y(h()));)l();return o(),w}}const I$={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function rf(n,e,t={}){const r=(i,s,o)=>{const c=I$[s];if(typeof c!="function")throw new Error(`Invalid validator "${s}", expected function`);const l=n[i];if(!(o&&l===void 0)&&!c(l,n))throw new Error(`Invalid param ${String(i)}=${l} (${typeof l}), expected ${s}`)};for(const[i,s]of Object.entries(e))r(i,s,!1);for(const[i,s]of Object.entries(t))r(i,s,!0);return n}const A$=Object.freeze(Object.defineProperty({__proto__:null,bitGet:b$,bitLen:v$,bitMask:Gv,bitSet:E$,bytesToHex:uu,bytesToNumberBE:Tc,bytesToNumberLE:Wv,concatBytes:Rd,createHmacDrbg:XR,ensureBytes:Gi,equalBytes:w$,hexToBytes:hu,hexToNumber:Hv,numberToBytesBE:du,numberToBytesLE:zv,numberToHexUnpadded:ZR,numberToVarBytesBE:y$,utf8ToBytes:_$,validateObject:rf},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kn=BigInt(0),Sn=BigInt(1),pc=BigInt(2),S$=BigInt(3),y_=BigInt(4),xA=BigInt(5),PA=BigInt(8);BigInt(9);BigInt(16);function jr(n,e){const t=n%e;return t>=Kn?t:e+t}function T$(n,e,t){if(t<=Kn||e<Kn)throw new Error("Expected power/modulo > 0");if(t===Sn)return Kn;let r=Sn;for(;e>Kn;)e&Sn&&(r=r*n%t),n=n*n%t,e>>=Sn;return r}function Ci(n,e,t){let r=n;for(;e-- >Kn;)r*=r,r%=t;return r}function w_(n,e){if(n===Kn||e<=Kn)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=jr(n,e),r=e,i=Kn,s=Sn;for(;t!==Kn;){const c=r/t,l=r%t,h=i-s*c;r=t,t=l,i=s,s=h}if(r!==Sn)throw new Error("invert: does not exist");return jr(i,e)}function R$(n){const e=(n-Sn)/pc;let t,r,i;for(t=n-Sn,r=0;t%pc===Kn;t/=pc,r++);for(i=pc;i<n&&T$(i,e,n)!==n-Sn;i++);if(r===1){const o=(n+Sn)/y_;return function(l,h){const f=l.pow(h,o);if(!l.eql(l.sqr(f),h))throw new Error("Cannot find square root");return f}}const s=(t+Sn)/pc;return function(c,l){if(c.pow(l,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let h=r,f=c.pow(c.mul(c.ONE,i),t),m=c.pow(l,s),y=c.pow(l,t);for(;!c.eql(y,c.ONE);){if(c.eql(y,c.ZERO))return c.ZERO;let w=1;for(let T=c.sqr(y);w<h&&!c.eql(T,c.ONE);w++)T=c.sqr(T);const I=c.pow(f,Sn<<BigInt(h-w-1));f=c.sqr(I),m=c.mul(m,I),y=c.mul(y,f),h=w}return m}}function C$(n){if(n%y_===S$){const e=(n+Sn)/y_;return function(r,i){const s=r.pow(i,e);if(!r.eql(r.sqr(s),i))throw new Error("Cannot find square root");return s}}if(n%PA===xA){const e=(n-xA)/PA;return function(r,i){const s=r.mul(i,pc),o=r.pow(s,e),c=r.mul(i,o),l=r.mul(r.mul(c,pc),o),h=r.mul(c,r.sub(l,r.ONE));if(!r.eql(r.sqr(h),i))throw new Error("Cannot find square root");return h}}return R$(n)}const x$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function P$(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=x$.reduce((r,i)=>(r[i]="function",r),e);return rf(n,t)}function O$(n,e,t){if(t<Kn)throw new Error("Expected power > 0");if(t===Kn)return n.ONE;if(t===Sn)return e;let r=n.ONE,i=e;for(;t>Kn;)t&Sn&&(r=n.mul(r,i)),i=n.sqr(i),t>>=Sn;return r}function k$(n,e){const t=new Array(e.length),r=e.reduce((s,o,c)=>n.is0(o)?s:(t[c]=s,n.mul(s,o)),n.ONE),i=n.inv(r);return e.reduceRight((s,o,c)=>n.is0(o)?s:(t[c]=n.mul(s,t[c]),n.mul(s,o)),i),t}function eC(n,e){const t=e!==void 0?e:n.toString(2).length,r=Math.ceil(t/8);return{nBitLength:t,nByteLength:r}}function N$(n,e,t=!1,r={}){if(n<=Kn)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:i,nByteLength:s}=eC(n,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=C$(n),c=Object.freeze({ORDER:n,BITS:i,BYTES:s,MASK:Gv(i),ZERO:Kn,ONE:Sn,create:l=>jr(l,n),isValid:l=>{if(typeof l!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof l}`);return Kn<=l&&l<n},is0:l=>l===Kn,isOdd:l=>(l&Sn)===Sn,neg:l=>jr(-l,n),eql:(l,h)=>l===h,sqr:l=>jr(l*l,n),add:(l,h)=>jr(l+h,n),sub:(l,h)=>jr(l-h,n),mul:(l,h)=>jr(l*h,n),pow:(l,h)=>O$(c,l,h),div:(l,h)=>jr(l*w_(h,n),n),sqrN:l=>l*l,addN:(l,h)=>l+h,subN:(l,h)=>l-h,mulN:(l,h)=>l*h,inv:l=>w_(l,n),sqrt:r.sqrt||(l=>o(c,l)),invertBatch:l=>k$(c,l),cmov:(l,h,f)=>f?h:l,toBytes:l=>t?zv(l,s):du(l,s),fromBytes:l=>{if(l.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${l.length}`);return t?Wv(l):Tc(l)}});return Object.freeze(c)}function tC(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function nC(n){const e=tC(n);return e+Math.ceil(e/2)}function D$(n,e,t=!1){const r=n.length,i=tC(e),s=nC(e);if(r<16||r<s||r>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${r}`);const o=t?Tc(n):Wv(n),c=jr(o,e-Sn)+Sn;return t?zv(c,i):du(c,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const M$=BigInt(0),Fy=BigInt(1);function L$(n,e){const t=(i,s)=>{const o=s.negate();return i?o:s},r=i=>{const s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:t,unsafeLadder(i,s){let o=n.ZERO,c=i;for(;s>M$;)s&Fy&&(o=o.add(c)),c=c.double(),s>>=Fy;return o},precomputeWindow(i,s){const{windows:o,windowSize:c}=r(s),l=[];let h=i,f=h;for(let m=0;m<o;m++){f=h,l.push(f);for(let y=1;y<c;y++)f=f.add(h),l.push(f);h=f.double()}return l},wNAF(i,s,o){const{windows:c,windowSize:l}=r(i);let h=n.ZERO,f=n.BASE;const m=BigInt(2**i-1),y=2**i,w=BigInt(i);for(let I=0;I<c;I++){const T=I*l;let A=Number(o&m);o>>=w,A>l&&(A-=y,o+=Fy);const L=T,D=T+Math.abs(A)-1,C=I%2!==0,k=A<0;A===0?f=f.add(t(C,s[L])):h=h.add(t(k,s[D]))}return{p:h,f}},wNAFCached(i,s,o,c){const l=i._WINDOW_SIZE||1;let h=s.get(i);return h||(h=this.precomputeWindow(i,l),l!==1&&s.set(i,c(h))),this.wNAF(l,h,o)}}}function rC(n){return P$(n.Fp),rf(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...eC(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function U$(n){const e=rC(n);rf(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:i}=e;if(t){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:$$,hexToBytes:V$}=A$,_c={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=_c;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(r[0]&128)throw new e("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:$$(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=_c,t=typeof n=="string"?V$(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:i,l:s}=_c._parseInt(t.subarray(2)),{d:o,l:c}=_c._parseInt(s);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(n){const e=h=>Number.parseInt(h[0],16)&8?"00"+h:h,t=h=>{const f=h.toString(16);return f.length&1?`0${f}`:f},r=e(t(n.s)),i=e(t(n.r)),s=r.length/2,o=i.length/2,c=t(s),l=t(o);return`30${t(o+s+4)}02${l}${i}02${c}${r}`}},ho=BigInt(0),Ni=BigInt(1);BigInt(2);const OA=BigInt(3);BigInt(4);function F$(n){const e=U$(n),{Fp:t}=e,r=e.toBytes||((I,T,A)=>{const L=T.toAffine();return Rd(Uint8Array.from([4]),t.toBytes(L.x),t.toBytes(L.y))}),i=e.fromBytes||(I=>{const T=I.subarray(1),A=t.fromBytes(T.subarray(0,t.BYTES)),L=t.fromBytes(T.subarray(t.BYTES,2*t.BYTES));return{x:A,y:L}});function s(I){const{a:T,b:A}=e,L=t.sqr(I),D=t.mul(L,I);return t.add(t.add(D,t.mul(I,T)),A)}if(!t.eql(t.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(I){return typeof I=="bigint"&&ho<I&&I<e.n}function c(I){if(!o(I))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(I){const{allowedPrivateKeyLengths:T,nByteLength:A,wrapPrivateKey:L,n:D}=e;if(T&&typeof I!="bigint"){if(I instanceof Uint8Array&&(I=uu(I)),typeof I!="string"||!T.includes(I.length))throw new Error("Invalid key");I=I.padStart(A*2,"0")}let C;try{C=typeof I=="bigint"?I:Tc(Gi("private key",I,A))}catch{throw new Error(`private key must be ${A} bytes, hex or bigint, not ${typeof I}`)}return L&&(C=jr(C,D)),c(C),C}const h=new Map;function f(I){if(!(I instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(T,A,L){if(this.px=T,this.py=A,this.pz=L,T==null||!t.isValid(T))throw new Error("x required");if(A==null||!t.isValid(A))throw new Error("y required");if(L==null||!t.isValid(L))throw new Error("z required")}static fromAffine(T){const{x:A,y:L}=T||{};if(!T||!t.isValid(A)||!t.isValid(L))throw new Error("invalid affine point");if(T instanceof m)throw new Error("projective point not allowed");const D=C=>t.eql(C,t.ZERO);return D(A)&&D(L)?m.ZERO:new m(A,L,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(T){const A=t.invertBatch(T.map(L=>L.pz));return T.map((L,D)=>L.toAffine(A[D])).map(m.fromAffine)}static fromHex(T){const A=m.fromAffine(i(Gi("pointHex",T)));return A.assertValidity(),A}static fromPrivateKey(T){return m.BASE.multiply(l(T))}_setWindowSize(T){this._WINDOW_SIZE=T,h.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:T,y:A}=this.toAffine();if(!t.isValid(T)||!t.isValid(A))throw new Error("bad point: x or y not FE");const L=t.sqr(A),D=s(T);if(!t.eql(L,D))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:T}=this.toAffine();if(t.isOdd)return!t.isOdd(T);throw new Error("Field doesn't support isOdd")}equals(T){f(T);const{px:A,py:L,pz:D}=this,{px:C,py:k,pz:P}=T,O=t.eql(t.mul(A,P),t.mul(C,D)),g=t.eql(t.mul(L,P),t.mul(k,D));return O&&g}negate(){return new m(this.px,t.neg(this.py),this.pz)}double(){const{a:T,b:A}=e,L=t.mul(A,OA),{px:D,py:C,pz:k}=this;let P=t.ZERO,O=t.ZERO,g=t.ZERO,_=t.mul(D,D),R=t.mul(C,C),N=t.mul(k,k),M=t.mul(D,C);return M=t.add(M,M),g=t.mul(D,k),g=t.add(g,g),P=t.mul(T,g),O=t.mul(L,N),O=t.add(P,O),P=t.sub(R,O),O=t.add(R,O),O=t.mul(P,O),P=t.mul(M,P),g=t.mul(L,g),N=t.mul(T,N),M=t.sub(_,N),M=t.mul(T,M),M=t.add(M,g),g=t.add(_,_),_=t.add(g,_),_=t.add(_,N),_=t.mul(_,M),O=t.add(O,_),N=t.mul(C,k),N=t.add(N,N),_=t.mul(N,M),P=t.sub(P,_),g=t.mul(N,R),g=t.add(g,g),g=t.add(g,g),new m(P,O,g)}add(T){f(T);const{px:A,py:L,pz:D}=this,{px:C,py:k,pz:P}=T;let O=t.ZERO,g=t.ZERO,_=t.ZERO;const R=e.a,N=t.mul(e.b,OA);let M=t.mul(A,C),j=t.mul(L,k),$=t.mul(D,P),q=t.add(A,L),B=t.add(C,k);q=t.mul(q,B),B=t.add(M,j),q=t.sub(q,B),B=t.add(A,D);let Q=t.add(C,P);return B=t.mul(B,Q),Q=t.add(M,$),B=t.sub(B,Q),Q=t.add(L,D),O=t.add(k,P),Q=t.mul(Q,O),O=t.add(j,$),Q=t.sub(Q,O),_=t.mul(R,B),O=t.mul(N,$),_=t.add(O,_),O=t.sub(j,_),_=t.add(j,_),g=t.mul(O,_),j=t.add(M,M),j=t.add(j,M),$=t.mul(R,$),B=t.mul(N,B),j=t.add(j,$),$=t.sub(M,$),$=t.mul(R,$),B=t.add(B,$),M=t.mul(j,B),g=t.add(g,M),M=t.mul(Q,B),O=t.mul(q,O),O=t.sub(O,M),M=t.mul(q,j),_=t.mul(Q,_),_=t.add(_,M),new m(O,g,_)}subtract(T){return this.add(T.negate())}is0(){return this.equals(m.ZERO)}wNAF(T){return w.wNAFCached(this,h,T,A=>{const L=t.invertBatch(A.map(D=>D.pz));return A.map((D,C)=>D.toAffine(L[C])).map(m.fromAffine)})}multiplyUnsafe(T){const A=m.ZERO;if(T===ho)return A;if(c(T),T===Ni)return this;const{endo:L}=e;if(!L)return w.unsafeLadder(this,T);let{k1neg:D,k1:C,k2neg:k,k2:P}=L.splitScalar(T),O=A,g=A,_=this;for(;C>ho||P>ho;)C&Ni&&(O=O.add(_)),P&Ni&&(g=g.add(_)),_=_.double(),C>>=Ni,P>>=Ni;return D&&(O=O.negate()),k&&(g=g.negate()),g=new m(t.mul(g.px,L.beta),g.py,g.pz),O.add(g)}multiply(T){c(T);let A=T,L,D;const{endo:C}=e;if(C){const{k1neg:k,k1:P,k2neg:O,k2:g}=C.splitScalar(A);let{p:_,f:R}=this.wNAF(P),{p:N,f:M}=this.wNAF(g);_=w.constTimeNegate(k,_),N=w.constTimeNegate(O,N),N=new m(t.mul(N.px,C.beta),N.py,N.pz),L=_.add(N),D=R.add(M)}else{const{p:k,f:P}=this.wNAF(A);L=k,D=P}return m.normalizeZ([L,D])[0]}multiplyAndAddUnsafe(T,A,L){const D=m.BASE,C=(P,O)=>O===ho||O===Ni||!P.equals(D)?P.multiplyUnsafe(O):P.multiply(O),k=C(this,A).add(C(T,L));return k.is0()?void 0:k}toAffine(T){const{px:A,py:L,pz:D}=this,C=this.is0();T==null&&(T=C?t.ONE:t.inv(D));const k=t.mul(A,T),P=t.mul(L,T),O=t.mul(D,T);if(C)return{x:t.ZERO,y:t.ZERO};if(!t.eql(O,t.ONE))throw new Error("invZ was invalid");return{x:k,y:P}}isTorsionFree(){const{h:T,isTorsionFree:A}=e;if(T===Ni)return!0;if(A)return A(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:T,clearCofactor:A}=e;return T===Ni?this:A?A(m,this):this.multiplyUnsafe(e.h)}toRawBytes(T=!0){return this.assertValidity(),r(m,this,T)}toHex(T=!0){return uu(this.toRawBytes(T))}}m.BASE=new m(e.Gx,e.Gy,t.ONE),m.ZERO=new m(t.ZERO,t.ONE,t.ZERO);const y=e.nBitLength,w=L$(m,e.endo?Math.ceil(y/2):y);return{CURVE:e,ProjectivePoint:m,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:o}}function B$(n){const e=rC(n);return rf(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function j$(n){const e=B$(n),{Fp:t,n:r}=e,i=t.BYTES+1,s=2*t.BYTES+1;function o(B){return ho<B&&B<t.ORDER}function c(B){return jr(B,r)}function l(B){return w_(B,r)}const{ProjectivePoint:h,normPrivateKeyToScalar:f,weierstrassEquation:m,isWithinCurveOrder:y}=F$({...e,toBytes(B,Q,G){const K=Q.toAffine(),J=t.toBytes(K.x),ne=Rd;return G?ne(Uint8Array.from([Q.hasEvenY()?2:3]),J):ne(Uint8Array.from([4]),J,t.toBytes(K.y))},fromBytes(B){const Q=B.length,G=B[0],K=B.subarray(1);if(Q===i&&(G===2||G===3)){const J=Tc(K);if(!o(J))throw new Error("Point is not on curve");const ne=m(J);let se=t.sqrt(ne);const pe=(se&Ni)===Ni;return(G&1)===1!==pe&&(se=t.neg(se)),{x:J,y:se}}else if(Q===s&&G===4){const J=t.fromBytes(K.subarray(0,t.BYTES)),ne=t.fromBytes(K.subarray(t.BYTES,2*t.BYTES));return{x:J,y:ne}}else throw new Error(`Point of length ${Q} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),w=B=>uu(du(B,e.nByteLength));function I(B){const Q=r>>Ni;return B>Q}function T(B){return I(B)?c(-B):B}const A=(B,Q,G)=>Tc(B.slice(Q,G));class L{constructor(Q,G,K){this.r=Q,this.s=G,this.recovery=K,this.assertValidity()}static fromCompact(Q){const G=e.nByteLength;return Q=Gi("compactSignature",Q,G*2),new L(A(Q,0,G),A(Q,G,2*G))}static fromDER(Q){const{r:G,s:K}=_c.toSig(Gi("DER",Q));return new L(G,K)}assertValidity(){if(!y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(Q){return new L(this.r,this.s,Q)}recoverPublicKey(Q){const{r:G,s:K,recovery:J}=this,ne=g(Gi("msgHash",Q));if(J==null||![0,1,2,3].includes(J))throw new Error("recovery id invalid");const se=J===2||J===3?G+e.n:G;if(se>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const pe=J&1?"03":"02",ae=h.fromHex(pe+w(se)),Ae=l(se),we=c(-ne*Ae),De=c(K*Ae),ee=h.BASE.multiplyAndAddUnsafe(ae,we,De);if(!ee)throw new Error("point at infinify");return ee.assertValidity(),ee}hasHighS(){return I(this.s)}normalizeS(){return this.hasHighS()?new L(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return hu(this.toDERHex())}toDERHex(){return _c.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hu(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const D={isValidPrivateKey(B){try{return f(B),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const B=nC(e.n);return D$(e.randomBytes(B),e.n)},precompute(B=8,Q=h.BASE){return Q._setWindowSize(B),Q.multiply(BigInt(3)),Q}};function C(B,Q=!0){return h.fromPrivateKey(B).toRawBytes(Q)}function k(B){const Q=B instanceof Uint8Array,G=typeof B=="string",K=(Q||G)&&B.length;return Q?K===i||K===s:G?K===2*i||K===2*s:B instanceof h}function P(B,Q,G=!0){if(k(B))throw new Error("first arg must be private key");if(!k(Q))throw new Error("second arg must be public key");return h.fromHex(Q).multiply(f(B)).toRawBytes(G)}const O=e.bits2int||function(B){const Q=Tc(B),G=B.length*8-e.nBitLength;return G>0?Q>>BigInt(G):Q},g=e.bits2int_modN||function(B){return c(O(B))},_=Gv(e.nBitLength);function R(B){if(typeof B!="bigint")throw new Error("bigint expected");if(!(ho<=B&&B<_))throw new Error(`bigint expected < 2^${e.nBitLength}`);return du(B,e.nByteLength)}function N(B,Q,G=M){if(["recovered","canonical"].some(Y=>Y in G))throw new Error("sign() legacy options not supported");const{hash:K,randomBytes:J}=e;let{lowS:ne,prehash:se,extraEntropy:pe}=G;ne==null&&(ne=!0),B=Gi("msgHash",B),se&&(B=Gi("prehashed msgHash",K(B)));const ae=g(B),Ae=f(Q),we=[R(Ae),R(ae)];if(pe!=null){const Y=pe===!0?J(t.BYTES):pe;we.push(Gi("extraEntropy",Y))}const De=Rd(...we),ee=ae;function re(Y){const E=O(Y);if(!y(E))return;const W=l(E),ge=h.BASE.multiply(E).toAffine(),ye=c(ge.x);if(ye===ho)return;const Me=c(W*c(ee+ye*Ae));if(Me===ho)return;let We=(ge.x===ye?0:2)|Number(ge.y&Ni),tt=Me;return ne&&I(Me)&&(tt=T(Me),We^=1),new L(ye,tt,We)}return{seed:De,k2sig:re}}const M={lowS:e.lowS,prehash:!1},j={lowS:e.lowS,prehash:!1};function $(B,Q,G=M){const{seed:K,k2sig:J}=N(B,Q,G),ne=e;return XR(ne.hash.outputLen,ne.nByteLength,ne.hmac)(K,J)}h.BASE._setWindowSize(8);function q(B,Q,G,K=j){const J=B;if(Q=Gi("msgHash",Q),G=Gi("publicKey",G),"strict"in K)throw new Error("options.strict was renamed to lowS");const{lowS:ne,prehash:se}=K;let pe,ae;try{if(typeof J=="string"||J instanceof Uint8Array)try{pe=L.fromDER(J)}catch(ge){if(!(ge instanceof _c.Err))throw ge;pe=L.fromCompact(J)}else if(typeof J=="object"&&typeof J.r=="bigint"&&typeof J.s=="bigint"){const{r:ge,s:ye}=J;pe=new L(ge,ye)}else throw new Error("PARSE");ae=h.fromHex(G)}catch(ge){if(ge.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(ne&&pe.hasHighS())return!1;se&&(Q=e.hash(Q));const{r:Ae,s:we}=pe,De=g(Q),ee=l(we),re=c(De*ee),Y=c(Ae*ee),E=h.BASE.multiplyAndAddUnsafe(ae,re,Y)?.toAffine();return E?c(E.x)===Ae:!1}return{CURVE:e,getPublicKey:C,getSharedSecret:P,sign:$,verify:q,ProjectivePoint:h,Signature:L,utils:D}}let iC=class extends Bv{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,kU(e);const r=K0(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return lu(this),this.iHash.update(e),this}digestInto(e){lu(this),Fv(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:i,destroyed:s,blockLen:o,outputLen:c}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const sC=(n,e,t)=>new iC(n,e).update(t).digest();sC.create=(n,e)=>new iC(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function q$(n){return{hash:n,hmac:(e,...t)=>sC(n,e,ZU(...t)),randomBytes:XU}}function H$(n,e){const t=r=>j$({...n,...q$(r)});return Object.freeze({...t(e),create:t})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const oC=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),kA=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),W$=BigInt(1),__=BigInt(2),NA=(n,e)=>(n+e/__)/e;function z$(n){const e=oC,t=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),c=BigInt(44),l=BigInt(88),h=n*n*n%e,f=h*h*n%e,m=Ci(f,t,e)*f%e,y=Ci(m,t,e)*f%e,w=Ci(y,__,e)*h%e,I=Ci(w,i,e)*w%e,T=Ci(I,s,e)*I%e,A=Ci(T,c,e)*T%e,L=Ci(A,l,e)*A%e,D=Ci(L,c,e)*T%e,C=Ci(D,t,e)*f%e,k=Ci(C,o,e)*I%e,P=Ci(k,r,e)*h%e,O=Ci(P,__,e);if(!v_.eql(v_.sqr(O),n))throw new Error("Cannot find square root");return O}const v_=N$(oC,void 0,void 0,{sqrt:z$}),G$=H$({a:BigInt(0),b:BigInt(7),Fp:v_,n:kA,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=kA,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-W$*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=t,o=BigInt("0x100000000000000000000000000000000"),c=NA(s*n,e),l=NA(-r*n,e);let h=jr(n-c*t-l*i,e),f=jr(-c*r-l*s,e);const m=h>o,y=f>o;if(m&&(h=e-h),y&&(f=e-f),h>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:m,k1:h,k2neg:y,k2:f}}}},p$);BigInt(0);G$.ProjectivePoint;function K$(n,e){return Object.defineProperty(n,"__recipe__",{value:e,writable:!1}),n}var aC=K$;function Q$(n){var{conditions:e}=n;if(!e)throw new Error("Styles have no conditions");function t(r){if(typeof r=="string"||typeof r=="number"||typeof r=="boolean"){if(!e.defaultCondition)throw new Error("No default condition");return{[e.defaultCondition]:r}}if(Array.isArray(r)){if(!("responsiveArray"in e))throw new Error("Responsive arrays are not supported");var i={};for(var s in e.responsiveArray)r[s]!=null&&(i[e.responsiveArray[s]]=r[s]);return i}return r}return aC(t,{importPath:"@vanilla-extract/sprinkles/createUtils",importName:"createNormalizeValueFn",args:[{conditions:n.conditions}]})}function xme(n){var{conditions:e}=n;if(!e)throw new Error("Styles have no conditions");var t=Q$(n);function r(i,s){if(typeof i=="string"||typeof i=="number"||typeof i=="boolean"){if(!e.defaultCondition)throw new Error("No default condition");return s(i,e.defaultCondition)}var o=Array.isArray(i)?t(i):i,c={};for(var l in o)o[l]!=null&&(c[l]=s(o[l],l));return c}return aC(r,{importPath:"@vanilla-extract/sprinkles/createUtils",importName:"createMapValueFn",args:[{conditions:n.conditions}]})}function J$(n,e){if(typeof n!="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Y$(n){var e=J$(n,"string");return typeof e=="symbol"?e:String(e)}function Z$(n,e,t){return e=Y$(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function DA(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function By(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?DA(Object(t),!0).forEach(function(r){Z$(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):DA(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var X$=n=>function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=Object.assign({},...t.map(l=>l.styles)),s=Object.keys(i),o=s.filter(l=>"mappings"in i[l]),c=l=>{var h=[],f={},m=By({},l),y=!1;for(var w of o){var I=l[w];if(I!=null){var T=i[w];y=!0;for(var A of T.mappings)f[A]=I,m[A]==null&&delete m[A]}}var L=y?By(By({},f),m):l,D=function(){var O=L[C],g=i[C];try{if(g.mappings)return"continue";if(typeof O=="string"||typeof O=="number")h.push(g.values[O].defaultClass);else if(Array.isArray(O))for(var _=0;_<O.length;_++){var R=O[_];if(R!=null){var N=g.responsiveArray[_];h.push(g.values[R].conditions[N])}}else for(var M in O){var j=O[M];j!=null&&h.push(g.values[j].conditions[M])}}catch($){throw $}};for(var C in L)var k=D();return n(h.join(" "))};return Object.assign(c,{properties:new Set(s)})},eV=n=>n,Pme=function(){return X$(eV)(...arguments)};function MA(n){var e=n.match(/^var\((.*)\)$/);return e?e[1]:n}function tV(n,e){var t=n;for(var r of e){if(!(r in t))throw new Error("Path ".concat(e.join(" -> ")," does not exist in object"));t=t[r]}return t}function cC(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r={};for(var i in n){var s=n[i],o=[...t,i];typeof s=="string"||typeof s=="number"||s==null?r[i]=e(s,o):typeof s=="object"&&!Array.isArray(s)?r[i]=cC(s,e,o):console.warn('Skipping invalid key "'.concat(o.join("."),'". Should be a string, number, null or object. Received: "').concat(Array.isArray(s)?"Array":typeof s,'"'))}return r}function Ome(n,e){var t={};if(typeof e=="object"){var r=n;cC(e,(c,l)=>{if(c!=null){var h=tV(r,l);t[MA(h)]=String(c)}})}else{var i=n;for(var s in i){var o=i[s];o!=null&&(t[MA(s)]=o)}}return Object.defineProperty(t,"toString",{value:function(){return Object.keys(this).map(l=>"".concat(l,":").concat(this[l])).join(";")},writable:!1}),t}var Kv={},Y0={},et={},lC={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});function e(c,l){var h=c>>>16&65535,f=c&65535,m=l>>>16&65535,y=l&65535;return f*y+(h*y+f*m<<16>>>0)|0}n.mul=Math.imul||e;function t(c,l){return c+l|0}n.add=t;function r(c,l){return c-l|0}n.sub=r;function i(c,l){return c<<l|c>>>32-l}n.rotl=i;function s(c,l){return c<<32-l|c>>>l}n.rotr=s;function o(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c}n.isInteger=Number.isInteger||o,n.MAX_SAFE_INTEGER=9007199254740991,n.isSafeInteger=function(c){return n.isInteger(c)&&c>=-n.MAX_SAFE_INTEGER&&c<=n.MAX_SAFE_INTEGER}})(lC);Object.defineProperty(et,"__esModule",{value:!0});var uC=lC;function nV(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])<<16>>16}et.readInt16BE=nV;function rV(n,e){return e===void 0&&(e=0),(n[e+0]<<8|n[e+1])>>>0}et.readUint16BE=rV;function iV(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])<<16>>16}et.readInt16LE=iV;function sV(n,e){return e===void 0&&(e=0),(n[e+1]<<8|n[e])>>>0}et.readUint16LE=sV;function hC(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>8,e[t+1]=n>>>0,e}et.writeUint16BE=hC;et.writeInt16BE=hC;function dC(n,e,t){return e===void 0&&(e=new Uint8Array(2)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e}et.writeUint16LE=dC;et.writeInt16LE=dC;function b_(n,e){return e===void 0&&(e=0),n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}et.readInt32BE=b_;function E_(n,e){return e===void 0&&(e=0),(n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3])>>>0}et.readUint32BE=E_;function I_(n,e){return e===void 0&&(e=0),n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]}et.readInt32LE=I_;function A_(n,e){return e===void 0&&(e=0),(n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e])>>>0}et.readUint32LE=A_;function t0(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>24,e[t+1]=n>>>16,e[t+2]=n>>>8,e[t+3]=n>>>0,e}et.writeUint32BE=t0;et.writeInt32BE=t0;function n0(n,e,t){return e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0),e[t+0]=n>>>0,e[t+1]=n>>>8,e[t+2]=n>>>16,e[t+3]=n>>>24,e}et.writeUint32LE=n0;et.writeInt32LE=n0;function oV(n,e){e===void 0&&(e=0);var t=b_(n,e),r=b_(n,e+4);return t*4294967296+r-(r>>31)*4294967296}et.readInt64BE=oV;function aV(n,e){e===void 0&&(e=0);var t=E_(n,e),r=E_(n,e+4);return t*4294967296+r}et.readUint64BE=aV;function cV(n,e){e===void 0&&(e=0);var t=I_(n,e),r=I_(n,e+4);return r*4294967296+t-(t>>31)*4294967296}et.readInt64LE=cV;function lV(n,e){e===void 0&&(e=0);var t=A_(n,e),r=A_(n,e+4);return r*4294967296+t}et.readUint64LE=lV;function fC(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),t0(n/4294967296>>>0,e,t),t0(n>>>0,e,t+4),e}et.writeUint64BE=fC;et.writeInt64BE=fC;function pC(n,e,t){return e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0),n0(n>>>0,e,t),n0(n/4294967296>>>0,e,t+4),e}et.writeUint64LE=pC;et.writeInt64LE=pC;function uV(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintBE: array is too short for the given bitLength");for(var r=0,i=1,s=n/8+t-1;s>=t;s--)r+=e[s]*i,i*=256;return r}et.readUintBE=uV;function hV(n,e,t){if(t===void 0&&(t=0),n%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(n/8>e.length-t)throw new Error("readUintLE: array is too short for the given bitLength");for(var r=0,i=1,s=t;s<t+n/8;s++)r+=e[s]*i,i*=256;return r}et.readUintLE=hV;function dV(n,e,t,r){if(t===void 0&&(t=new Uint8Array(n/8)),r===void 0&&(r=0),n%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!uC.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,s=n/8+r-1;s>=r;s--)t[s]=e/i&255,i*=256;return t}et.writeUintBE=dV;function fV(n,e,t,r){if(t===void 0&&(t=new Uint8Array(n/8)),r===void 0&&(r=0),n%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!uC.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,s=r;s<r+n/8;s++)t[s]=e/i&255,i*=256;return t}et.writeUintLE=fV;function pV(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e)}et.readFloat32BE=pV;function gV(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat32(e,!0)}et.readFloat32LE=gV;function mV(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e)}et.readFloat64BE=mV;function yV(n,e){e===void 0&&(e=0);var t=new DataView(n.buffer,n.byteOffset,n.byteLength);return t.getFloat64(e,!0)}et.readFloat64LE=yV;function wV(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat32(t,n),e}et.writeFloat32BE=wV;function _V(n,e,t){e===void 0&&(e=new Uint8Array(4)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat32(t,n,!0),e}et.writeFloat32LE=_V;function vV(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat64(t,n),e}et.writeFloat64BE=vV;function bV(n,e,t){e===void 0&&(e=new Uint8Array(8)),t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.setFloat64(t,n,!0),e}et.writeFloat64LE=bV;var pi={};Object.defineProperty(pi,"__esModule",{value:!0});function EV(n){for(var e=0;e<n.length;e++)n[e]=0;return n}pi.wipe=EV;Object.defineProperty(Y0,"__esModule",{value:!0});var lr=et,S_=pi,IV=20;function AV(n,e,t){for(var r=1634760805,i=857760878,s=2036477234,o=1797285236,c=t[3]<<24|t[2]<<16|t[1]<<8|t[0],l=t[7]<<24|t[6]<<16|t[5]<<8|t[4],h=t[11]<<24|t[10]<<16|t[9]<<8|t[8],f=t[15]<<24|t[14]<<16|t[13]<<8|t[12],m=t[19]<<24|t[18]<<16|t[17]<<8|t[16],y=t[23]<<24|t[22]<<16|t[21]<<8|t[20],w=t[27]<<24|t[26]<<16|t[25]<<8|t[24],I=t[31]<<24|t[30]<<16|t[29]<<8|t[28],T=e[3]<<24|e[2]<<16|e[1]<<8|e[0],A=e[7]<<24|e[6]<<16|e[5]<<8|e[4],L=e[11]<<24|e[10]<<16|e[9]<<8|e[8],D=e[15]<<24|e[14]<<16|e[13]<<8|e[12],C=r,k=i,P=s,O=o,g=c,_=l,R=h,N=f,M=m,j=y,$=w,q=I,B=T,Q=A,G=L,K=D,J=0;J<IV;J+=2)C=C+g|0,B^=C,B=B>>>16|B<<16,M=M+B|0,g^=M,g=g>>>20|g<<12,k=k+_|0,Q^=k,Q=Q>>>16|Q<<16,j=j+Q|0,_^=j,_=_>>>20|_<<12,P=P+R|0,G^=P,G=G>>>16|G<<16,$=$+G|0,R^=$,R=R>>>20|R<<12,O=O+N|0,K^=O,K=K>>>16|K<<16,q=q+K|0,N^=q,N=N>>>20|N<<12,P=P+R|0,G^=P,G=G>>>24|G<<8,$=$+G|0,R^=$,R=R>>>25|R<<7,O=O+N|0,K^=O,K=K>>>24|K<<8,q=q+K|0,N^=q,N=N>>>25|N<<7,k=k+_|0,Q^=k,Q=Q>>>24|Q<<8,j=j+Q|0,_^=j,_=_>>>25|_<<7,C=C+g|0,B^=C,B=B>>>24|B<<8,M=M+B|0,g^=M,g=g>>>25|g<<7,C=C+_|0,K^=C,K=K>>>16|K<<16,$=$+K|0,_^=$,_=_>>>20|_<<12,k=k+R|0,B^=k,B=B>>>16|B<<16,q=q+B|0,R^=q,R=R>>>20|R<<12,P=P+N|0,Q^=P,Q=Q>>>16|Q<<16,M=M+Q|0,N^=M,N=N>>>20|N<<12,O=O+g|0,G^=O,G=G>>>16|G<<16,j=j+G|0,g^=j,g=g>>>20|g<<12,P=P+N|0,Q^=P,Q=Q>>>24|Q<<8,M=M+Q|0,N^=M,N=N>>>25|N<<7,O=O+g|0,G^=O,G=G>>>24|G<<8,j=j+G|0,g^=j,g=g>>>25|g<<7,k=k+R|0,B^=k,B=B>>>24|B<<8,q=q+B|0,R^=q,R=R>>>25|R<<7,C=C+_|0,K^=C,K=K>>>24|K<<8,$=$+K|0,_^=$,_=_>>>25|_<<7;lr.writeUint32LE(C+r|0,n,0),lr.writeUint32LE(k+i|0,n,4),lr.writeUint32LE(P+s|0,n,8),lr.writeUint32LE(O+o|0,n,12),lr.writeUint32LE(g+c|0,n,16),lr.writeUint32LE(_+l|0,n,20),lr.writeUint32LE(R+h|0,n,24),lr.writeUint32LE(N+f|0,n,28),lr.writeUint32LE(M+m|0,n,32),lr.writeUint32LE(j+y|0,n,36),lr.writeUint32LE($+w|0,n,40),lr.writeUint32LE(q+I|0,n,44),lr.writeUint32LE(B+T|0,n,48),lr.writeUint32LE(Q+A|0,n,52),lr.writeUint32LE(G+L|0,n,56),lr.writeUint32LE(K+D|0,n,60)}function gC(n,e,t,r,i){if(i===void 0&&(i=0),n.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(r.length<t.length)throw new Error("ChaCha: destination is shorter than source");var s,o;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");s=new Uint8Array(16),o=s.length-e.length,s.set(e,o)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");s=e,o=i}for(var c=new Uint8Array(64),l=0;l<t.length;l+=64){AV(c,s,n);for(var h=l;h<l+64&&h<t.length;h++)r[h]=t[h]^c[h-l];TV(s,0,o)}return S_.wipe(c),i===0&&S_.wipe(s),r}Y0.streamXOR=gC;function SV(n,e,t,r){return r===void 0&&(r=0),S_.wipe(t),gC(n,e,t,t,r)}Y0.stream=SV;function TV(n,e,t){for(var r=1;t--;)r=r+(n[e]&255)|0,n[e]=r&255,r>>>=8,e++;if(r>0)throw new Error("ChaCha: counter overflow")}var mC={},Ca={};Object.defineProperty(Ca,"__esModule",{value:!0});function RV(n,e,t){return~(n-1)&e|n-1&t}Ca.select=RV;function CV(n,e){return(n|0)-(e|0)-1>>>31&1}Ca.lessOrEqual=CV;function yC(n,e){if(n.length!==e.length)return 0;for(var t=0,r=0;r<n.length;r++)t|=n[r]^e[r];return 1&t-1>>>8}Ca.compare=yC;function xV(n,e){return n.length===0||e.length===0?!1:yC(n,e)!==0}Ca.equal=xV;(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Ca,t=pi;n.DIGEST_LENGTH=16;var r=function(){function o(c){this.digestLength=n.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var l=c[0]|c[1]<<8;this._r[0]=l&8191;var h=c[2]|c[3]<<8;this._r[1]=(l>>>13|h<<3)&8191;var f=c[4]|c[5]<<8;this._r[2]=(h>>>10|f<<6)&7939;var m=c[6]|c[7]<<8;this._r[3]=(f>>>7|m<<9)&8191;var y=c[8]|c[9]<<8;this._r[4]=(m>>>4|y<<12)&255,this._r[5]=y>>>1&8190;var w=c[10]|c[11]<<8;this._r[6]=(y>>>14|w<<2)&8191;var I=c[12]|c[13]<<8;this._r[7]=(w>>>11|I<<5)&8065;var T=c[14]|c[15]<<8;this._r[8]=(I>>>8|T<<8)&8191,this._r[9]=T>>>5&127,this._pad[0]=c[16]|c[17]<<8,this._pad[1]=c[18]|c[19]<<8,this._pad[2]=c[20]|c[21]<<8,this._pad[3]=c[22]|c[23]<<8,this._pad[4]=c[24]|c[25]<<8,this._pad[5]=c[26]|c[27]<<8,this._pad[6]=c[28]|c[29]<<8,this._pad[7]=c[30]|c[31]<<8}return o.prototype._blocks=function(c,l,h){for(var f=this._fin?0:2048,m=this._h[0],y=this._h[1],w=this._h[2],I=this._h[3],T=this._h[4],A=this._h[5],L=this._h[6],D=this._h[7],C=this._h[8],k=this._h[9],P=this._r[0],O=this._r[1],g=this._r[2],_=this._r[3],R=this._r[4],N=this._r[5],M=this._r[6],j=this._r[7],$=this._r[8],q=this._r[9];h>=16;){var B=c[l+0]|c[l+1]<<8;m+=B&8191;var Q=c[l+2]|c[l+3]<<8;y+=(B>>>13|Q<<3)&8191;var G=c[l+4]|c[l+5]<<8;w+=(Q>>>10|G<<6)&8191;var K=c[l+6]|c[l+7]<<8;I+=(G>>>7|K<<9)&8191;var J=c[l+8]|c[l+9]<<8;T+=(K>>>4|J<<12)&8191,A+=J>>>1&8191;var ne=c[l+10]|c[l+11]<<8;L+=(J>>>14|ne<<2)&8191;var se=c[l+12]|c[l+13]<<8;D+=(ne>>>11|se<<5)&8191;var pe=c[l+14]|c[l+15]<<8;C+=(se>>>8|pe<<8)&8191,k+=pe>>>5|f;var ae=0,Ae=ae;Ae+=m*P,Ae+=y*(5*q),Ae+=w*(5*$),Ae+=I*(5*j),Ae+=T*(5*M),ae=Ae>>>13,Ae&=8191,Ae+=A*(5*N),Ae+=L*(5*R),Ae+=D*(5*_),Ae+=C*(5*g),Ae+=k*(5*O),ae+=Ae>>>13,Ae&=8191;var we=ae;we+=m*O,we+=y*P,we+=w*(5*q),we+=I*(5*$),we+=T*(5*j),ae=we>>>13,we&=8191,we+=A*(5*M),we+=L*(5*N),we+=D*(5*R),we+=C*(5*_),we+=k*(5*g),ae+=we>>>13,we&=8191;var De=ae;De+=m*g,De+=y*O,De+=w*P,De+=I*(5*q),De+=T*(5*$),ae=De>>>13,De&=8191,De+=A*(5*j),De+=L*(5*M),De+=D*(5*N),De+=C*(5*R),De+=k*(5*_),ae+=De>>>13,De&=8191;var ee=ae;ee+=m*_,ee+=y*g,ee+=w*O,ee+=I*P,ee+=T*(5*q),ae=ee>>>13,ee&=8191,ee+=A*(5*$),ee+=L*(5*j),ee+=D*(5*M),ee+=C*(5*N),ee+=k*(5*R),ae+=ee>>>13,ee&=8191;var re=ae;re+=m*R,re+=y*_,re+=w*g,re+=I*O,re+=T*P,ae=re>>>13,re&=8191,re+=A*(5*q),re+=L*(5*$),re+=D*(5*j),re+=C*(5*M),re+=k*(5*N),ae+=re>>>13,re&=8191;var Y=ae;Y+=m*N,Y+=y*R,Y+=w*_,Y+=I*g,Y+=T*O,ae=Y>>>13,Y&=8191,Y+=A*P,Y+=L*(5*q),Y+=D*(5*$),Y+=C*(5*j),Y+=k*(5*M),ae+=Y>>>13,Y&=8191;var E=ae;E+=m*M,E+=y*N,E+=w*R,E+=I*_,E+=T*g,ae=E>>>13,E&=8191,E+=A*O,E+=L*P,E+=D*(5*q),E+=C*(5*$),E+=k*(5*j),ae+=E>>>13,E&=8191;var W=ae;W+=m*j,W+=y*M,W+=w*N,W+=I*R,W+=T*_,ae=W>>>13,W&=8191,W+=A*g,W+=L*O,W+=D*P,W+=C*(5*q),W+=k*(5*$),ae+=W>>>13,W&=8191;var ge=ae;ge+=m*$,ge+=y*j,ge+=w*M,ge+=I*N,ge+=T*R,ae=ge>>>13,ge&=8191,ge+=A*_,ge+=L*g,ge+=D*O,ge+=C*P,ge+=k*(5*q),ae+=ge>>>13,ge&=8191;var ye=ae;ye+=m*q,ye+=y*$,ye+=w*j,ye+=I*M,ye+=T*N,ae=ye>>>13,ye&=8191,ye+=A*R,ye+=L*_,ye+=D*g,ye+=C*O,ye+=k*P,ae+=ye>>>13,ye&=8191,ae=(ae<<2)+ae|0,ae=ae+Ae|0,Ae=ae&8191,ae=ae>>>13,we+=ae,m=Ae,y=we,w=De,I=ee,T=re,A=Y,L=E,D=W,C=ge,k=ye,l+=16,h-=16}this._h[0]=m,this._h[1]=y,this._h[2]=w,this._h[3]=I,this._h[4]=T,this._h[5]=A,this._h[6]=L,this._h[7]=D,this._h[8]=C,this._h[9]=k},o.prototype.finish=function(c,l){l===void 0&&(l=0);var h=new Uint16Array(10),f,m,y,w;if(this._leftover){for(w=this._leftover,this._buffer[w++]=1;w<16;w++)this._buffer[w]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(f=this._h[1]>>>13,this._h[1]&=8191,w=2;w<10;w++)this._h[w]+=f,f=this._h[w]>>>13,this._h[w]&=8191;for(this._h[0]+=f*5,f=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=f,f=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=f,h[0]=this._h[0]+5,f=h[0]>>>13,h[0]&=8191,w=1;w<10;w++)h[w]=this._h[w]+f,f=h[w]>>>13,h[w]&=8191;for(h[9]-=8192,m=(f^1)-1,w=0;w<10;w++)h[w]&=m;for(m=~m,w=0;w<10;w++)this._h[w]=this._h[w]&m|h[w];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,y=this._h[0]+this._pad[0],this._h[0]=y&65535,w=1;w<8;w++)y=(this._h[w]+this._pad[w]|0)+(y>>>16)|0,this._h[w]=y&65535;return c[l+0]=this._h[0]>>>0,c[l+1]=this._h[0]>>>8,c[l+2]=this._h[1]>>>0,c[l+3]=this._h[1]>>>8,c[l+4]=this._h[2]>>>0,c[l+5]=this._h[2]>>>8,c[l+6]=this._h[3]>>>0,c[l+7]=this._h[3]>>>8,c[l+8]=this._h[4]>>>0,c[l+9]=this._h[4]>>>8,c[l+10]=this._h[5]>>>0,c[l+11]=this._h[5]>>>8,c[l+12]=this._h[6]>>>0,c[l+13]=this._h[6]>>>8,c[l+14]=this._h[7]>>>0,c[l+15]=this._h[7]>>>8,this._finished=!0,this},o.prototype.update=function(c){var l=0,h=c.length,f;if(this._leftover){f=16-this._leftover,f>h&&(f=h);for(var m=0;m<f;m++)this._buffer[this._leftover+m]=c[l+m];if(h-=f,l+=f,this._leftover+=f,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(h>=16&&(f=h-h%16,this._blocks(c,l,f),l+=f,h-=f),h){for(var m=0;m<h;m++)this._buffer[this._leftover+m]=c[l+m];this._leftover+=h}return this},o.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var c=new Uint8Array(16);return this.finish(c),c},o.prototype.clean=function(){return t.wipe(this._buffer),t.wipe(this._r),t.wipe(this._h),t.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},o}();n.Poly1305=r;function i(o,c){var l=new r(o);l.update(c);var h=l.digest();return l.clean(),h}n.oneTimeAuth=i;function s(o,c){return o.length!==n.DIGEST_LENGTH||c.length!==n.DIGEST_LENGTH?!1:e.equal(o,c)}n.equal=s})(mC);(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=Y0,t=mC,r=pi,i=et,s=Ca;n.KEY_LENGTH=32,n.NONCE_LENGTH=12,n.TAG_LENGTH=16;var o=new Uint8Array(16),c=function(){function l(h){if(this.nonceLength=n.NONCE_LENGTH,this.tagLength=n.TAG_LENGTH,h.length!==n.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(h)}return l.prototype.seal=function(h,f,m,y){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var w=new Uint8Array(16);w.set(h,w.length-h.length);var I=new Uint8Array(32);e.stream(this._key,w,I,4);var T=f.length+this.tagLength,A;if(y){if(y.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");A=y}else A=new Uint8Array(T);return e.streamXOR(this._key,w,f,A,4),this._authenticate(A.subarray(A.length-this.tagLength,A.length),I,A.subarray(0,A.length-this.tagLength),m),r.wipe(w),A},l.prototype.open=function(h,f,m,y){if(h.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(f.length<this.tagLength)return null;var w=new Uint8Array(16);w.set(h,w.length-h.length);var I=new Uint8Array(32);e.stream(this._key,w,I,4);var T=new Uint8Array(this.tagLength);if(this._authenticate(T,I,f.subarray(0,f.length-this.tagLength),m),!s.equal(T,f.subarray(f.length-this.tagLength,f.length)))return null;var A=f.length-this.tagLength,L;if(y){if(y.length!==A)throw new Error("ChaCha20Poly1305: incorrect destination length");L=y}else L=new Uint8Array(A);return e.streamXOR(this._key,w,f.subarray(0,f.length-this.tagLength),L,4),r.wipe(w),L},l.prototype.clean=function(){return r.wipe(this._key),this},l.prototype._authenticate=function(h,f,m,y){var w=new t.Poly1305(f);y&&(w.update(y),y.length%16>0&&w.update(o.subarray(y.length%16))),w.update(m),m.length%16>0&&w.update(o.subarray(m.length%16));var I=new Uint8Array(8);y&&i.writeUint64LE(y.length,I),w.update(I),i.writeUint64LE(m.length,I),w.update(I);for(var T=w.digest(),A=0;A<T.length;A++)h[A]=T[A];w.clean(),r.wipe(T),r.wipe(I)},l}();n.ChaCha20Poly1305=c})(Kv);var wC={},sf={},Qv={};Object.defineProperty(Qv,"__esModule",{value:!0});function PV(n){return typeof n.saveState<"u"&&typeof n.restoreState<"u"&&typeof n.cleanSavedState<"u"}Qv.isSerializableHash=PV;Object.defineProperty(sf,"__esModule",{value:!0});var ds=Qv,OV=Ca,kV=pi,_C=function(){function n(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(var i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),ds.isSerializableHash(this._inner)&&ds.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),kV.wipe(r)}return n.prototype.reset=function(){if(!ds.isSerializableHash(this._inner)||!ds.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.clean=function(){ds.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),ds.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},n.prototype.update=function(e){return this._inner.update(e),this},n.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},n.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},n.prototype.saveState=function(){if(!ds.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},n.prototype.restoreState=function(e){if(!ds.isSerializableHash(this._inner)||!ds.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},n.prototype.cleanSavedState=function(e){if(!ds.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},n}();sf.HMAC=_C;function NV(n,e,t){var r=new _C(n,e);r.update(t);var i=r.digest();return r.clean(),i}sf.hmac=NV;sf.equal=OV.equal;Object.defineProperty(wC,"__esModule",{value:!0});var LA=sf,UA=pi,DV=function(){function n(e,t,r,i){r===void 0&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=LA.hmac(this._hash,r,t);this._hmac=new LA.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return n.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(e===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},n.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},n.prototype.clean=function(){this._hmac.clean(),UA.wipe(this._buffer),UA.wipe(this._counter),this._bufpos=0},n}(),MV=wC.HKDF=DV,Uu={},Z0={},X0={};Object.defineProperty(X0,"__esModule",{value:!0});X0.BrowserRandomSource=void 0;const $A=65536;class LV{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let r=0;r<t.length;r+=$A)this._crypto.getRandomValues(t.subarray(r,r+Math.min(t.length-r,$A)));return t}}X0.BrowserRandomSource=LV;function UV(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var em={};const $V={},VV=Object.freeze(Object.defineProperty({__proto__:null,default:$V},Symbol.toStringTag,{value:"Module"})),FV=Bc(VV);Object.defineProperty(em,"__esModule",{value:!0});em.NodeRandomSource=void 0;const BV=pi;class jV{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof UV<"u"){const e=FV;e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let i=0;i<r.length;i++)r[i]=t[i];return(0,BV.wipe)(t),r}}em.NodeRandomSource=jV;Object.defineProperty(Z0,"__esModule",{value:!0});Z0.SystemRandomSource=void 0;const qV=X0,HV=em;class WV{constructor(){if(this.isAvailable=!1,this.name="",this._source=new qV.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new HV.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}Z0.SystemRandomSource=WV;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.randomStringForEntropy=n.randomString=n.randomUint32=n.randomBytes=n.defaultRandomSource=void 0;const e=Z0,t=et,r=pi;n.defaultRandomSource=new e.SystemRandomSource;function i(h,f=n.defaultRandomSource){return f.randomBytes(h)}n.randomBytes=i;function s(h=n.defaultRandomSource){const f=i(4,h),m=(0,t.readUint32LE)(f);return(0,r.wipe)(f),m}n.randomUint32=s;const o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(h,f=o,m=n.defaultRandomSource){if(f.length<2)throw new Error("randomString charset is too short");if(f.length>256)throw new Error("randomString charset is too long");let y="";const w=f.length,I=256-256%w;for(;h>0;){const T=i(Math.ceil(h*256/I),m);for(let A=0;A<T.length&&h>0;A++){const L=T[A];L<I&&(y+=f.charAt(L%w),h--)}(0,r.wipe)(T)}return y}n.randomString=c;function l(h,f=o,m=n.defaultRandomSource){const y=Math.ceil(h/(Math.log(f.length)/Math.LN2));return c(y,f,m)}n.randomStringForEntropy=l})(Uu);var tm={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=et,t=pi;n.DIGEST_LENGTH=32,n.BLOCK_SIZE=64;var r=function(){function c(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return c.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},c.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},c.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._temp),this.reset()},c.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&h>0;)this._buffer[this._bufferLength++]=l[f++],h--;this._bufferLength===this.blockSize&&(s(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=s(this._temp,this._state,l,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[f++],h--;return this},c.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,m=h/536870912|0,y=h<<3,w=h%64<56?64:128;this._buffer[f]=128;for(var I=f+1;I<w-8;I++)this._buffer[I]=0;e.writeUint32BE(m,this._buffer,w-8),e.writeUint32BE(y,this._buffer,w-4),s(this._temp,this._state,this._buffer,0,w),this._finished=!0}for(var I=0;I<this.digestLength/4;I++)e.writeUint32BE(this._state[I],l,I*4);return this},c.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},c.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},c.prototype.restoreState=function(l){return this._state.set(l.state),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},c.prototype.cleanSavedState=function(l){t.wipe(l.state),l.buffer&&t.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},c}();n.SHA256=r;var i=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(c,l,h,f,m){for(;m>=64;){for(var y=l[0],w=l[1],I=l[2],T=l[3],A=l[4],L=l[5],D=l[6],C=l[7],k=0;k<16;k++){var P=f+k*4;c[k]=e.readUint32BE(h,P)}for(var k=16;k<64;k++){var O=c[k-2],g=(O>>>17|O<<15)^(O>>>19|O<<13)^O>>>10;O=c[k-15];var _=(O>>>7|O<<25)^(O>>>18|O<<14)^O>>>3;c[k]=(g+c[k-7]|0)+(_+c[k-16]|0)}for(var k=0;k<64;k++){var g=(((A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7))+(A&L^~A&D)|0)+(C+(i[k]+c[k]|0)|0)|0,_=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&w^y&I^w&I)|0;C=D,D=L,L=A,A=T+g|0,T=I,I=w,w=y,y=g+_|0}l[0]+=y,l[1]+=w,l[2]+=I,l[3]+=T,l[4]+=A,l[5]+=L,l[6]+=D,l[7]+=C,f+=64,m-=64}return f}function o(c){var l=new r;l.update(c);var h=l.digest();return l.clean(),h}n.hash=o})(tm);var Jv={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.sharedKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.scalarMultBase=n.scalarMult=n.SHARED_KEY_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=void 0;const e=Uu,t=pi;n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=32,n.SHARED_KEY_LENGTH=32;function r(k){const P=new Float64Array(16);if(k)for(let O=0;O<k.length;O++)P[O]=k[O];return P}const i=new Uint8Array(32);i[0]=9;const s=r([56129,1]);function o(k){let P=1;for(let O=0;O<16;O++){let g=k[O]+P+65535;P=Math.floor(g/65536),k[O]=g-P*65536}k[0]+=P-1+37*(P-1)}function c(k,P,O){const g=~(O-1);for(let _=0;_<16;_++){const R=g&(k[_]^P[_]);k[_]^=R,P[_]^=R}}function l(k,P){const O=r(),g=r();for(let _=0;_<16;_++)g[_]=P[_];o(g),o(g),o(g);for(let _=0;_<2;_++){O[0]=g[0]-65517;for(let N=1;N<15;N++)O[N]=g[N]-65535-(O[N-1]>>16&1),O[N-1]&=65535;O[15]=g[15]-32767-(O[14]>>16&1);const R=O[15]>>16&1;O[14]&=65535,c(g,O,1-R)}for(let _=0;_<16;_++)k[2*_]=g[_]&255,k[2*_+1]=g[_]>>8}function h(k,P){for(let O=0;O<16;O++)k[O]=P[2*O]+(P[2*O+1]<<8);k[15]&=32767}function f(k,P,O){for(let g=0;g<16;g++)k[g]=P[g]+O[g]}function m(k,P,O){for(let g=0;g<16;g++)k[g]=P[g]-O[g]}function y(k,P,O){let g,_,R=0,N=0,M=0,j=0,$=0,q=0,B=0,Q=0,G=0,K=0,J=0,ne=0,se=0,pe=0,ae=0,Ae=0,we=0,De=0,ee=0,re=0,Y=0,E=0,W=0,ge=0,ye=0,Me=0,We=0,tt=0,nt=0,Zt=0,Jt=0,Ye=O[0],Fe=O[1],Ze=O[2],ze=O[3],Xe=O[4],je=O[5],Oe=O[6],Ce=O[7],qe=O[8],lt=O[9],dt=O[10],pt=O[11],ut=O[12],wt=O[13],It=O[14],At=O[15];g=P[0],R+=g*Ye,N+=g*Fe,M+=g*Ze,j+=g*ze,$+=g*Xe,q+=g*je,B+=g*Oe,Q+=g*Ce,G+=g*qe,K+=g*lt,J+=g*dt,ne+=g*pt,se+=g*ut,pe+=g*wt,ae+=g*It,Ae+=g*At,g=P[1],N+=g*Ye,M+=g*Fe,j+=g*Ze,$+=g*ze,q+=g*Xe,B+=g*je,Q+=g*Oe,G+=g*Ce,K+=g*qe,J+=g*lt,ne+=g*dt,se+=g*pt,pe+=g*ut,ae+=g*wt,Ae+=g*It,we+=g*At,g=P[2],M+=g*Ye,j+=g*Fe,$+=g*Ze,q+=g*ze,B+=g*Xe,Q+=g*je,G+=g*Oe,K+=g*Ce,J+=g*qe,ne+=g*lt,se+=g*dt,pe+=g*pt,ae+=g*ut,Ae+=g*wt,we+=g*It,De+=g*At,g=P[3],j+=g*Ye,$+=g*Fe,q+=g*Ze,B+=g*ze,Q+=g*Xe,G+=g*je,K+=g*Oe,J+=g*Ce,ne+=g*qe,se+=g*lt,pe+=g*dt,ae+=g*pt,Ae+=g*ut,we+=g*wt,De+=g*It,ee+=g*At,g=P[4],$+=g*Ye,q+=g*Fe,B+=g*Ze,Q+=g*ze,G+=g*Xe,K+=g*je,J+=g*Oe,ne+=g*Ce,se+=g*qe,pe+=g*lt,ae+=g*dt,Ae+=g*pt,we+=g*ut,De+=g*wt,ee+=g*It,re+=g*At,g=P[5],q+=g*Ye,B+=g*Fe,Q+=g*Ze,G+=g*ze,K+=g*Xe,J+=g*je,ne+=g*Oe,se+=g*Ce,pe+=g*qe,ae+=g*lt,Ae+=g*dt,we+=g*pt,De+=g*ut,ee+=g*wt,re+=g*It,Y+=g*At,g=P[6],B+=g*Ye,Q+=g*Fe,G+=g*Ze,K+=g*ze,J+=g*Xe,ne+=g*je,se+=g*Oe,pe+=g*Ce,ae+=g*qe,Ae+=g*lt,we+=g*dt,De+=g*pt,ee+=g*ut,re+=g*wt,Y+=g*It,E+=g*At,g=P[7],Q+=g*Ye,G+=g*Fe,K+=g*Ze,J+=g*ze,ne+=g*Xe,se+=g*je,pe+=g*Oe,ae+=g*Ce,Ae+=g*qe,we+=g*lt,De+=g*dt,ee+=g*pt,re+=g*ut,Y+=g*wt,E+=g*It,W+=g*At,g=P[8],G+=g*Ye,K+=g*Fe,J+=g*Ze,ne+=g*ze,se+=g*Xe,pe+=g*je,ae+=g*Oe,Ae+=g*Ce,we+=g*qe,De+=g*lt,ee+=g*dt,re+=g*pt,Y+=g*ut,E+=g*wt,W+=g*It,ge+=g*At,g=P[9],K+=g*Ye,J+=g*Fe,ne+=g*Ze,se+=g*ze,pe+=g*Xe,ae+=g*je,Ae+=g*Oe,we+=g*Ce,De+=g*qe,ee+=g*lt,re+=g*dt,Y+=g*pt,E+=g*ut,W+=g*wt,ge+=g*It,ye+=g*At,g=P[10],J+=g*Ye,ne+=g*Fe,se+=g*Ze,pe+=g*ze,ae+=g*Xe,Ae+=g*je,we+=g*Oe,De+=g*Ce,ee+=g*qe,re+=g*lt,Y+=g*dt,E+=g*pt,W+=g*ut,ge+=g*wt,ye+=g*It,Me+=g*At,g=P[11],ne+=g*Ye,se+=g*Fe,pe+=g*Ze,ae+=g*ze,Ae+=g*Xe,we+=g*je,De+=g*Oe,ee+=g*Ce,re+=g*qe,Y+=g*lt,E+=g*dt,W+=g*pt,ge+=g*ut,ye+=g*wt,Me+=g*It,We+=g*At,g=P[12],se+=g*Ye,pe+=g*Fe,ae+=g*Ze,Ae+=g*ze,we+=g*Xe,De+=g*je,ee+=g*Oe,re+=g*Ce,Y+=g*qe,E+=g*lt,W+=g*dt,ge+=g*pt,ye+=g*ut,Me+=g*wt,We+=g*It,tt+=g*At,g=P[13],pe+=g*Ye,ae+=g*Fe,Ae+=g*Ze,we+=g*ze,De+=g*Xe,ee+=g*je,re+=g*Oe,Y+=g*Ce,E+=g*qe,W+=g*lt,ge+=g*dt,ye+=g*pt,Me+=g*ut,We+=g*wt,tt+=g*It,nt+=g*At,g=P[14],ae+=g*Ye,Ae+=g*Fe,we+=g*Ze,De+=g*ze,ee+=g*Xe,re+=g*je,Y+=g*Oe,E+=g*Ce,W+=g*qe,ge+=g*lt,ye+=g*dt,Me+=g*pt,We+=g*ut,tt+=g*wt,nt+=g*It,Zt+=g*At,g=P[15],Ae+=g*Ye,we+=g*Fe,De+=g*Ze,ee+=g*ze,re+=g*Xe,Y+=g*je,E+=g*Oe,W+=g*Ce,ge+=g*qe,ye+=g*lt,Me+=g*dt,We+=g*pt,tt+=g*ut,nt+=g*wt,Zt+=g*It,Jt+=g*At,R+=38*we,N+=38*De,M+=38*ee,j+=38*re,$+=38*Y,q+=38*E,B+=38*W,Q+=38*ge,G+=38*ye,K+=38*Me,J+=38*We,ne+=38*tt,se+=38*nt,pe+=38*Zt,ae+=38*Jt,_=1,g=R+_+65535,_=Math.floor(g/65536),R=g-_*65536,g=N+_+65535,_=Math.floor(g/65536),N=g-_*65536,g=M+_+65535,_=Math.floor(g/65536),M=g-_*65536,g=j+_+65535,_=Math.floor(g/65536),j=g-_*65536,g=$+_+65535,_=Math.floor(g/65536),$=g-_*65536,g=q+_+65535,_=Math.floor(g/65536),q=g-_*65536,g=B+_+65535,_=Math.floor(g/65536),B=g-_*65536,g=Q+_+65535,_=Math.floor(g/65536),Q=g-_*65536,g=G+_+65535,_=Math.floor(g/65536),G=g-_*65536,g=K+_+65535,_=Math.floor(g/65536),K=g-_*65536,g=J+_+65535,_=Math.floor(g/65536),J=g-_*65536,g=ne+_+65535,_=Math.floor(g/65536),ne=g-_*65536,g=se+_+65535,_=Math.floor(g/65536),se=g-_*65536,g=pe+_+65535,_=Math.floor(g/65536),pe=g-_*65536,g=ae+_+65535,_=Math.floor(g/65536),ae=g-_*65536,g=Ae+_+65535,_=Math.floor(g/65536),Ae=g-_*65536,R+=_-1+37*(_-1),_=1,g=R+_+65535,_=Math.floor(g/65536),R=g-_*65536,g=N+_+65535,_=Math.floor(g/65536),N=g-_*65536,g=M+_+65535,_=Math.floor(g/65536),M=g-_*65536,g=j+_+65535,_=Math.floor(g/65536),j=g-_*65536,g=$+_+65535,_=Math.floor(g/65536),$=g-_*65536,g=q+_+65535,_=Math.floor(g/65536),q=g-_*65536,g=B+_+65535,_=Math.floor(g/65536),B=g-_*65536,g=Q+_+65535,_=Math.floor(g/65536),Q=g-_*65536,g=G+_+65535,_=Math.floor(g/65536),G=g-_*65536,g=K+_+65535,_=Math.floor(g/65536),K=g-_*65536,g=J+_+65535,_=Math.floor(g/65536),J=g-_*65536,g=ne+_+65535,_=Math.floor(g/65536),ne=g-_*65536,g=se+_+65535,_=Math.floor(g/65536),se=g-_*65536,g=pe+_+65535,_=Math.floor(g/65536),pe=g-_*65536,g=ae+_+65535,_=Math.floor(g/65536),ae=g-_*65536,g=Ae+_+65535,_=Math.floor(g/65536),Ae=g-_*65536,R+=_-1+37*(_-1),k[0]=R,k[1]=N,k[2]=M,k[3]=j,k[4]=$,k[5]=q,k[6]=B,k[7]=Q,k[8]=G,k[9]=K,k[10]=J,k[11]=ne,k[12]=se,k[13]=pe,k[14]=ae,k[15]=Ae}function w(k,P){y(k,P,P)}function I(k,P){const O=r();for(let g=0;g<16;g++)O[g]=P[g];for(let g=253;g>=0;g--)w(O,O),g!==2&&g!==4&&y(O,O,P);for(let g=0;g<16;g++)k[g]=O[g]}function T(k,P){const O=new Uint8Array(32),g=new Float64Array(80),_=r(),R=r(),N=r(),M=r(),j=r(),$=r();for(let G=0;G<31;G++)O[G]=k[G];O[31]=k[31]&127|64,O[0]&=248,h(g,P);for(let G=0;G<16;G++)R[G]=g[G];_[0]=M[0]=1;for(let G=254;G>=0;--G){const K=O[G>>>3]>>>(G&7)&1;c(_,R,K),c(N,M,K),f(j,_,N),m(_,_,N),f(N,R,M),m(R,R,M),w(M,j),w($,_),y(_,N,_),y(N,R,j),f(j,_,N),m(_,_,N),w(R,_),m(N,M,$),y(_,N,s),f(_,_,M),y(N,N,_),y(_,M,$),y(M,R,g),w(R,j),c(_,R,K),c(N,M,K)}for(let G=0;G<16;G++)g[G+16]=_[G],g[G+32]=N[G],g[G+48]=R[G],g[G+64]=M[G];const q=g.subarray(32),B=g.subarray(16);I(q,q),y(B,B,q);const Q=new Uint8Array(32);return l(Q,B),Q}n.scalarMult=T;function A(k){return T(k,i)}n.scalarMultBase=A;function L(k){if(k.length!==n.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${n.SECRET_KEY_LENGTH} bytes`);const P=new Uint8Array(k);return{publicKey:A(P),secretKey:P}}n.generateKeyPairFromSeed=L;function D(k){const P=(0,e.randomBytes)(32,k),O=L(P);return(0,t.wipe)(P),O}n.generateKeyPair=D;function C(k,P,O=!1){if(k.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(P.length!==n.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const g=T(k,P);if(O){let _=0;for(let R=0;R<g.length;R++)_|=g[R];if(_===0)throw new Error("X25519: invalid shared key")}return g}n.sharedKey=C})(Jv);var Pe={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var T_=function(n,e){return T_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},T_(n,e)};function zV(n,e){T_(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var R_=function(){return R_=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},R_.apply(this,arguments)};function GV(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function KV(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function QV(n,e){return function(t,r){e(t,r,n)}}function JV(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function YV(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(f){try{h(r.next(f))}catch(m){o(m)}}function l(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(c,l)}h((r=r.apply(n,e||[])).next())})}function ZV(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(f){return l([h,f])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){t.label=h[1];break}if(h[0]===6&&t.label<s[1]){t.label=s[1],s=h;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(h);break}s[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(f){h=[6,f],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function XV(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function eF(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function C_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vC(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function tF(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(vC(arguments[e]));return n}function nF(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,i++)r[i]=s[o];return r}function Cd(n){return this instanceof Cd?(this.v=n,this):new Cd(n)}function rF(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){r[y]&&(i[y]=function(w){return new Promise(function(I,T){s.push([y,w,I,T])>1||c(y,w)})})}function c(y,w){try{l(r[y](w))}catch(I){m(s[0][3],I)}}function l(y){y.value instanceof Cd?Promise.resolve(y.value.v).then(h,f):m(s[0][2],y)}function h(y){c("next",y)}function f(y){c("throw",y)}function m(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function iF(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Cd(n[i](o)),done:i==="return"}:s?s(o):o}:s}}function sF(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof C_=="function"?C_(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,l){o=n[s](o),i(c,l,o.done,o.value)})}}function i(s,o,c,l){Promise.resolve(l).then(function(h){s({value:h,done:c})},o)}}function oF(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function aF(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function cF(n){return n&&n.__esModule?n:{default:n}}function lF(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function uF(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const hF=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return R_},__asyncDelegator:iF,__asyncGenerator:rF,__asyncValues:sF,__await:Cd,__awaiter:YV,__classPrivateFieldGet:lF,__classPrivateFieldSet:uF,__createBinding:XV,__decorate:KV,__exportStar:eF,__extends:zV,__generator:ZV,__importDefault:cF,__importStar:aF,__makeTemplateObject:oF,__metadata:JV,__param:QV,__read:vC,__rest:GV,__spread:tF,__spreadArrays:nF,__values:C_},Symbol.toStringTag,{value:"Module"})),nm=Bc(hF);var jy={},Vh={},VA;function dF(){if(VA)return Vh;VA=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.delay=void 0;function n(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return Vh.delay=n,Vh}var Xa={},qy={},ec={},FA;function fF(){return FA||(FA=1,Object.defineProperty(ec,"__esModule",{value:!0}),ec.ONE_THOUSAND=ec.ONE_HUNDRED=void 0,ec.ONE_HUNDRED=100,ec.ONE_THOUSAND=1e3),ec}var Hy={},BA;function pF(){return BA||(BA=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ONE_YEAR=n.FOUR_WEEKS=n.THREE_WEEKS=n.TWO_WEEKS=n.ONE_WEEK=n.THIRTY_DAYS=n.SEVEN_DAYS=n.FIVE_DAYS=n.THREE_DAYS=n.ONE_DAY=n.TWENTY_FOUR_HOURS=n.TWELVE_HOURS=n.SIX_HOURS=n.THREE_HOURS=n.ONE_HOUR=n.SIXTY_MINUTES=n.THIRTY_MINUTES=n.TEN_MINUTES=n.FIVE_MINUTES=n.ONE_MINUTE=n.SIXTY_SECONDS=n.THIRTY_SECONDS=n.TEN_SECONDS=n.FIVE_SECONDS=n.ONE_SECOND=void 0,n.ONE_SECOND=1,n.FIVE_SECONDS=5,n.TEN_SECONDS=10,n.THIRTY_SECONDS=30,n.SIXTY_SECONDS=60,n.ONE_MINUTE=n.SIXTY_SECONDS,n.FIVE_MINUTES=n.ONE_MINUTE*5,n.TEN_MINUTES=n.ONE_MINUTE*10,n.THIRTY_MINUTES=n.ONE_MINUTE*30,n.SIXTY_MINUTES=n.ONE_MINUTE*60,n.ONE_HOUR=n.SIXTY_MINUTES,n.THREE_HOURS=n.ONE_HOUR*3,n.SIX_HOURS=n.ONE_HOUR*6,n.TWELVE_HOURS=n.ONE_HOUR*12,n.TWENTY_FOUR_HOURS=n.ONE_HOUR*24,n.ONE_DAY=n.TWENTY_FOUR_HOURS,n.THREE_DAYS=n.ONE_DAY*3,n.FIVE_DAYS=n.ONE_DAY*5,n.SEVEN_DAYS=n.ONE_DAY*7,n.THIRTY_DAYS=n.ONE_DAY*30,n.ONE_WEEK=n.SEVEN_DAYS,n.TWO_WEEKS=n.ONE_WEEK*2,n.THREE_WEEKS=n.ONE_WEEK*3,n.FOUR_WEEKS=n.ONE_WEEK*4,n.ONE_YEAR=n.ONE_DAY*365}(Hy)),Hy}var jA;function bC(){return jA||(jA=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=nm;e.__exportStar(fF(),n),e.__exportStar(pF(),n)}(qy)),qy}var qA;function gF(){if(qA)return Xa;qA=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.fromMiliseconds=Xa.toMiliseconds=void 0;const n=bC();function e(r){return r*n.ONE_THOUSAND}Xa.toMiliseconds=e;function t(r){return Math.floor(r/n.ONE_THOUSAND)}return Xa.fromMiliseconds=t,Xa}var HA;function mF(){return HA||(HA=1,function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=nm;e.__exportStar(dF(),n),e.__exportStar(gF(),n)}(jy)),jy}var Il={},WA;function yF(){if(WA)return Il;WA=1,Object.defineProperty(Il,"__esModule",{value:!0}),Il.Watch=void 0;class n{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const r=this.get(t);if(typeof r.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const i=Date.now()-r.started;this.timestamps.set(t,{started:r.started,elapsed:i})}get(t){const r=this.timestamps.get(t);if(typeof r>"u")throw new Error(`No timestamp found for label: ${t}`);return r}elapsed(t){const r=this.get(t);return r.elapsed||Date.now()-r.started}}return Il.Watch=n,Il.default=n,Il}var Wy={},Fh={},zA;function wF(){if(zA)return Fh;zA=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.IWatch=void 0;class n{}return Fh.IWatch=n,Fh}var GA;function _F(){return GA||(GA=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),nm.__exportStar(wF(),n)}(Wy)),Wy}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=nm;e.__exportStar(mF(),n),e.__exportStar(yF(),n),e.__exportStar(_F(),n),e.__exportStar(bC(),n)})(Pe);var Kt={};Object.defineProperty(Kt,"__esModule",{value:!0});var EC=Kt.getLocalStorage=PC=Kt.getLocalStorageOrThrow=xC=Kt.getCrypto=CC=Kt.getCryptoOrThrow=Yv=Kt.getLocation=RC=Kt.getLocationOrThrow=im=Kt.getNavigator=TC=Kt.getNavigatorOrThrow=rm=Kt.getDocument=SC=Kt.getDocumentOrThrow=AC=Kt.getFromWindowOrThrow=IC=Kt.getFromWindow=void 0;function qc(n){let e;return typeof window<"u"&&typeof window[n]<"u"&&(e=window[n]),e}var IC=Kt.getFromWindow=qc;function $u(n){const e=qc(n);if(!e)throw new Error(`${n} is not defined in Window`);return e}var AC=Kt.getFromWindowOrThrow=$u;function vF(){return $u("document")}var SC=Kt.getDocumentOrThrow=vF;function bF(){return qc("document")}var rm=Kt.getDocument=bF;function EF(){return $u("navigator")}var TC=Kt.getNavigatorOrThrow=EF;function IF(){return qc("navigator")}var im=Kt.getNavigator=IF;function AF(){return $u("location")}var RC=Kt.getLocationOrThrow=AF;function SF(){return qc("location")}var Yv=Kt.getLocation=SF;function TF(){return $u("crypto")}var CC=Kt.getCryptoOrThrow=TF;function RF(){return qc("crypto")}var xC=Kt.getCrypto=RF;function CF(){return $u("localStorage")}var PC=Kt.getLocalStorageOrThrow=CF;function xF(){return qc("localStorage")}EC=Kt.getLocalStorage=xF;var Zv={};Object.defineProperty(Zv,"__esModule",{value:!0});var Xv=Zv.getWindowMetadata=void 0;const KA=Kt;function PF(){let n,e;try{n=KA.getDocumentOrThrow(),e=KA.getLocationOrThrow()}catch{return null}function t(){const m=n.getElementsByTagName("link"),y=[];for(let w=0;w<m.length;w++){const I=m[w],T=I.getAttribute("rel");if(T&&T.toLowerCase().indexOf("icon")>-1){const A=I.getAttribute("href");if(A)if(A.toLowerCase().indexOf("https:")===-1&&A.toLowerCase().indexOf("http:")===-1&&A.indexOf("//")!==0){let L=e.protocol+"//"+e.host;if(A.indexOf("/")===0)L+=A;else{const D=e.pathname.split("/");D.pop();const C=D.join("/");L+=C+"/"+A}y.push(L)}else if(A.indexOf("//")===0){const L=e.protocol+A;y.push(L)}else y.push(A)}}return y}function r(...m){const y=n.getElementsByTagName("meta");for(let w=0;w<y.length;w++){const I=y[w],T=["itemprop","property","name"].map(A=>I.getAttribute(A)).filter(A=>A?m.includes(A):!1);if(T.length&&T){const A=I.getAttribute("content");if(A)return A}}return""}function i(){let m=r("name","og:site_name","og:title","twitter:title");return m||(m=n.title),m}function s(){return r("description","og:description","twitter:description","keywords")}const o=i(),c=s(),l=e.origin,h=t();return{description:c,url:l,icons:h,name:o}}Xv=Zv.getWindowMetadata=PF;var xd={};(function(n){const e=eU,t=Y9,r=X9,i=nU,s=D=>D==null,o=Symbol("encodeFragmentIdentifier");function c(D){switch(D.arrayFormat){case"index":return C=>(k,P)=>{const O=k.length;return P===void 0||D.skipNull&&P===null||D.skipEmptyString&&P===""?k:P===null?[...k,[f(C,D),"[",O,"]"].join("")]:[...k,[f(C,D),"[",f(O,D),"]=",f(P,D)].join("")]};case"bracket":return C=>(k,P)=>P===void 0||D.skipNull&&P===null||D.skipEmptyString&&P===""?k:P===null?[...k,[f(C,D),"[]"].join("")]:[...k,[f(C,D),"[]=",f(P,D)].join("")];case"colon-list-separator":return C=>(k,P)=>P===void 0||D.skipNull&&P===null||D.skipEmptyString&&P===""?k:P===null?[...k,[f(C,D),":list="].join("")]:[...k,[f(C,D),":list=",f(P,D)].join("")];case"comma":case"separator":case"bracket-separator":{const C=D.arrayFormat==="bracket-separator"?"[]=":"=";return k=>(P,O)=>O===void 0||D.skipNull&&O===null||D.skipEmptyString&&O===""?P:(O=O===null?"":O,P.length===0?[[f(k,D),C,f(O,D)].join("")]:[[P,f(O,D)].join(D.arrayFormatSeparator)])}default:return C=>(k,P)=>P===void 0||D.skipNull&&P===null||D.skipEmptyString&&P===""?k:P===null?[...k,f(C,D)]:[...k,[f(C,D),"=",f(P,D)].join("")]}}function l(D){let C;switch(D.arrayFormat){case"index":return(k,P,O)=>{if(C=/\[(\d*)\]$/.exec(k),k=k.replace(/\[\d*\]$/,""),!C){O[k]=P;return}O[k]===void 0&&(O[k]={}),O[k][C[1]]=P};case"bracket":return(k,P,O)=>{if(C=/(\[\])$/.exec(k),k=k.replace(/\[\]$/,""),!C){O[k]=P;return}if(O[k]===void 0){O[k]=[P];return}O[k]=[].concat(O[k],P)};case"colon-list-separator":return(k,P,O)=>{if(C=/(:list)$/.exec(k),k=k.replace(/:list$/,""),!C){O[k]=P;return}if(O[k]===void 0){O[k]=[P];return}O[k]=[].concat(O[k],P)};case"comma":case"separator":return(k,P,O)=>{const g=typeof P=="string"&&P.includes(D.arrayFormatSeparator),_=typeof P=="string"&&!g&&m(P,D).includes(D.arrayFormatSeparator);P=_?m(P,D):P;const R=g||_?P.split(D.arrayFormatSeparator).map(N=>m(N,D)):P===null?P:m(P,D);O[k]=R};case"bracket-separator":return(k,P,O)=>{const g=/(\[\])$/.test(k);if(k=k.replace(/\[\]$/,""),!g){O[k]=P&&m(P,D);return}const _=P===null?[]:P.split(D.arrayFormatSeparator).map(R=>m(R,D));if(O[k]===void 0){O[k]=_;return}O[k]=[].concat(O[k],_)};default:return(k,P,O)=>{if(O[k]===void 0){O[k]=P;return}O[k]=[].concat(O[k],P)}}}function h(D){if(typeof D!="string"||D.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function f(D,C){return C.encode?C.strict?e(D):encodeURIComponent(D):D}function m(D,C){return C.decode?t(D):D}function y(D){return Array.isArray(D)?D.sort():typeof D=="object"?y(Object.keys(D)).sort((C,k)=>Number(C)-Number(k)).map(C=>D[C]):D}function w(D){const C=D.indexOf("#");return C!==-1&&(D=D.slice(0,C)),D}function I(D){let C="";const k=D.indexOf("#");return k!==-1&&(C=D.slice(k)),C}function T(D){D=w(D);const C=D.indexOf("?");return C===-1?"":D.slice(C+1)}function A(D,C){return C.parseNumbers&&!Number.isNaN(Number(D))&&typeof D=="string"&&D.trim()!==""?D=Number(D):C.parseBooleans&&D!==null&&(D.toLowerCase()==="true"||D.toLowerCase()==="false")&&(D=D.toLowerCase()==="true"),D}function L(D,C){C=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},C),h(C.arrayFormatSeparator);const k=l(C),P=Object.create(null);if(typeof D!="string"||(D=D.trim().replace(/^[?#&]/,""),!D))return P;for(const O of D.split("&")){if(O==="")continue;let[g,_]=r(C.decode?O.replace(/\+/g," "):O,"=");_=_===void 0?null:["comma","separator","bracket-separator"].includes(C.arrayFormat)?_:m(_,C),k(m(g,C),_,P)}for(const O of Object.keys(P)){const g=P[O];if(typeof g=="object"&&g!==null)for(const _ of Object.keys(g))g[_]=A(g[_],C);else P[O]=A(g,C)}return C.sort===!1?P:(C.sort===!0?Object.keys(P).sort():Object.keys(P).sort(C.sort)).reduce((O,g)=>{const _=P[g];return _&&typeof _=="object"&&!Array.isArray(_)?O[g]=y(_):O[g]=_,O},Object.create(null))}n.extract=T,n.parse=L,n.stringify=(D,C)=>{if(!D)return"";C=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},C),h(C.arrayFormatSeparator);const k=_=>C.skipNull&&s(D[_])||C.skipEmptyString&&D[_]==="",P=c(C),O={};for(const _ of Object.keys(D))k(_)||(O[_]=D[_]);const g=Object.keys(O);return C.sort!==!1&&g.sort(C.sort),g.map(_=>{const R=D[_];return R===void 0?"":R===null?f(_,C):Array.isArray(R)?R.length===0&&C.arrayFormat==="bracket-separator"?f(_,C)+"[]":R.reduce(P(_),[]).join("&"):f(_,C)+"="+f(R,C)}).filter(_=>_.length>0).join("&")},n.parseUrl=(D,C)=>{C=Object.assign({decode:!0},C);const[k,P]=r(D,"#");return Object.assign({url:k.split("?")[0]||"",query:L(T(D),C)},C&&C.parseFragmentIdentifier&&P?{fragmentIdentifier:m(P,C)}:{})},n.stringifyUrl=(D,C)=>{C=Object.assign({encode:!0,strict:!0,[o]:!0},C);const k=w(D.url).split("?")[0]||"",P=n.extract(D.url),O=n.parse(P,{sort:!1}),g=Object.assign(O,D.query);let _=n.stringify(g,C);_&&(_=`?${_}`);let R=I(D.url);return D.fragmentIdentifier&&(R=`#${C[o]?f(D.fragmentIdentifier,C):D.fragmentIdentifier}`),`${k}${_}${R}`},n.pick=(D,C,k)=>{k=Object.assign({parseFragmentIdentifier:!0,[o]:!1},k);const{url:P,query:O,fragmentIdentifier:g}=n.parseUrl(D,k);return n.stringifyUrl({url:P,query:i(O,C),fragmentIdentifier:g},k)},n.exclude=(D,C,k)=>{const P=Array.isArray(C)?O=>!C.includes(O):(O,g)=>!C(O,g);return n.pick(D,P,k)}})(xd);const OF={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},kF=":";function NF(n){const[e,t]=n.split(kF);return{namespace:e,reference:t}}function DF(n,e=[]){const t=[];return Object.keys(n).forEach(r=>{if(e.length&&!e.includes(r))return;const i=n[r];t.push(...i.accounts)}),t}function OC(n,e){return n.includes(":")?[n]:e.chains||[]}const kC="base10",Tr="base16",x_="base64pad",eb="utf8",NC=0,Hc=1,MF=0,QA=1,P_=12,tb=32;function LF(){const n=Jv.generateKeyPair();return{privateKey:xr(n.secretKey,Tr),publicKey:xr(n.publicKey,Tr)}}function O_(){const n=Uu.randomBytes(tb);return xr(n,Tr)}function UF(n,e){const t=Jv.sharedKey(zr(n,Tr),zr(e,Tr),!0),r=new MV(tm.SHA256,t).expand(tb);return xr(r,Tr)}function $F(n){const e=tm.hash(zr(n,Tr));return xr(e,Tr)}function Ql(n){const e=tm.hash(zr(n,eb));return xr(e,Tr)}function VF(n){return zr(`${n}`,kC)}function of(n){return Number(xr(n,kC))}function FF(n){const e=VF(typeof n.type<"u"?n.type:NC);if(of(e)===Hc&&typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof n.senderPublicKey<"u"?zr(n.senderPublicKey,Tr):void 0,r=typeof n.iv<"u"?zr(n.iv,Tr):Uu.randomBytes(P_),i=new Kv.ChaCha20Poly1305(zr(n.symKey,Tr)).seal(r,zr(n.message,eb));return jF({type:e,sealed:i,iv:r,senderPublicKey:t})}function BF(n){const e=new Kv.ChaCha20Poly1305(zr(n.symKey,Tr)),{sealed:t,iv:r}=r0(n.encoded),i=e.open(r,t);if(i===null)throw new Error("Failed to decrypt");return xr(i,eb)}function jF(n){if(of(n.type)===Hc){if(typeof n.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return xr(h_([n.type,n.senderPublicKey,n.iv,n.sealed]),x_)}return xr(h_([n.type,n.iv,n.sealed]),x_)}function r0(n){const e=zr(n,x_),t=e.slice(MF,QA),r=QA;if(of(t)===Hc){const c=r+tb,l=c+P_,h=e.slice(r,c),f=e.slice(c,l),m=e.slice(l);return{type:t,sealed:m,iv:f,senderPublicKey:h}}const i=r+P_,s=e.slice(r,i),o=e.slice(i);return{type:t,sealed:o,iv:s}}function qF(n,e){const t=r0(n);return DC({type:of(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?xr(t.senderPublicKey,Tr):void 0,receiverPublicKey:e?.receiverPublicKey})}function DC(n){const e=n?.type||NC;if(e===Hc){if(typeof n?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof n?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:n?.senderPublicKey,receiverPublicKey:n?.receiverPublicKey}}function JA(n){return n.type===Hc&&typeof n.senderPublicKey=="string"&&typeof n.receiverPublicKey=="string"}var HF=Object.defineProperty,YA=Object.getOwnPropertySymbols,WF=Object.prototype.hasOwnProperty,zF=Object.prototype.propertyIsEnumerable,ZA=(n,e,t)=>e in n?HF(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,XA=(n,e)=>{for(var t in e||(e={}))WF.call(e,t)&&ZA(n,t,e[t]);if(YA)for(var t of YA(e))zF.call(e,t)&&ZA(n,t,e[t]);return n};const GF="ReactNative",si={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},KF="js";function nb(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Vu(){return!rm()&&!!im()&&navigator.product===GF}function Fu(){return!nb()&&!!im()&&!!rm()}function af(){return Vu()?si.reactNative:nb()?si.node:Fu()?si.browser:si.unknown}function QF(){var n;try{return Vu()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(n=global.Application)==null?void 0:n.applicationId:void 0}catch{return}}function JF(n,e){let t=xd.parse(n);return t=XA(XA({},t),e),n=xd.stringify(t),n}function YF(){return Xv()||{name:"",description:"",url:"",icons:[""]}}function ZF(){if(af()===si.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:r}=global.Platform;return[t,r].join("-")}const n=CR();if(n===null)return"unknown";const e=n.os?n.os.replace(" ","").toLowerCase():"unknown";return n.type==="browser"?[e,n.name,n.version].join("-"):[e,n.version].join("-")}function XF(){var n;const e=af();return e===si.browser?[e,((n=Yv())==null?void 0:n.host)||"unknown"].join(":"):e}function eB(n,e,t){const r=ZF(),i=XF();return[[n,e].join("-"),[KF,t].join("-"),r,i].join("/")}function tB({protocol:n,version:e,relayUrl:t,sdkVersion:r,auth:i,projectId:s,useOnCloseEvent:o,bundleId:c}){const l=t.split("?"),h=eB(n,e,r),f={auth:i,ua:h,projectId:s,useOnCloseEvent:o||void 0,origin:c||void 0},m=JF(l[1]||"",f);return l[0]+"?"+m}function vc(n,e){return n.filter(t=>e.includes(t)).length===n.length}function MC(n){return Object.fromEntries(n.entries())}function LC(n){return new Map(Object.entries(n))}function Ll(n=Pe.FIVE_MINUTES,e){const t=Pe.toMiliseconds(n||Pe.FIVE_MINUTES);let r,i,s;return{resolve:o=>{s&&r&&(clearTimeout(s),r(o))},reject:o=>{s&&i&&(clearTimeout(s),i(o))},done:()=>new Promise((o,c)=>{s=setTimeout(()=>{c(new Error(e))},t),r=o,i=c})}}function Pd(n,e,t){return new Promise(async(r,i)=>{const s=setTimeout(()=>i(new Error(t)),e);try{const o=await n;r(o)}catch(o){i(o)}clearTimeout(s)})}function UC(n,e){if(typeof e=="string"&&e.startsWith(`${n}:`))return e;if(n.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(n.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${n}`)}function nB(n){return UC("topic",n)}function rB(n){return UC("id",n)}function $C(n){const[e,t]=n.split(":"),r={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")r.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return r}function Qi(n,e){return Pe.fromMiliseconds(Date.now()+Pe.toMiliseconds(n))}function Yo(n){return Date.now()>=Pe.toMiliseconds(n)}function Nn(n,e){return`${n}${e?`:${e}`:""}`}function Jl(n=[],e=[]){return[...new Set([...n,...e])]}async function iB({id:n,topic:e,wcDeepLink:t}){try{if(!t)return;let i=(typeof t=="string"?JSON.parse(t):t)?.href;if(typeof i!="string")return;i.endsWith("/")&&(i=i.slice(0,-1));const s=`${i}/wc?requestId=${n}&sessionTopic=${e}`,o=af();o===si.browser?s.startsWith("https://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):o===si.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(r){console.error(r)}}async function sB(n,e){try{return await n.getItem(e)||(Fu()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}const oB="irn";function k_(n){return n?.relay||{protocol:oB}}function Mg(n){const e=OF[n];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${n}`);return e}var aB=Object.defineProperty,e5=Object.getOwnPropertySymbols,cB=Object.prototype.hasOwnProperty,lB=Object.prototype.propertyIsEnumerable,t5=(n,e,t)=>e in n?aB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,uB=(n,e)=>{for(var t in e||(e={}))cB.call(e,t)&&t5(n,t,e[t]);if(e5)for(var t of e5(e))lB.call(e,t)&&t5(n,t,e[t]);return n};function hB(n,e="-"){const t={},r="relay"+e;return Object.keys(n).forEach(i=>{if(i.startsWith(r)){const s=i.replace(r,""),o=n[i];t[s]=o}}),t}function n5(n){n=n.includes("wc://")?n.replace("wc://",""):n,n=n.includes("wc:")?n.replace("wc:",""):n;const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),i=n.substring(e+1,t).split("@"),s=typeof t<"u"?n.substring(t):"",o=xd.parse(s);return{protocol:r,topic:dB(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:hB(o)}}function dB(n){return n.startsWith("//")?n.substring(2):n}function fB(n,e="-"){const t="relay",r={};return Object.keys(n).forEach(i=>{const s=t+e+i;n[i]&&(r[s]=n[i])}),r}function pB(n){return`${n.protocol}:${n.topic}@${n.version}?`+xd.stringify(uB({symKey:n.symKey},fB(n.relay)))}var gB=Object.defineProperty,mB=Object.defineProperties,yB=Object.getOwnPropertyDescriptors,r5=Object.getOwnPropertySymbols,wB=Object.prototype.hasOwnProperty,_B=Object.prototype.propertyIsEnumerable,i5=(n,e,t)=>e in n?gB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vB=(n,e)=>{for(var t in e||(e={}))wB.call(e,t)&&i5(n,t,e[t]);if(r5)for(var t of r5(e))_B.call(e,t)&&i5(n,t,e[t]);return n},bB=(n,e)=>mB(n,yB(e));function Bu(n){const e=[];return n.forEach(t=>{const[r,i]=t.split(":");e.push(`${r}:${i}`)}),e}function EB(n){const e=[];return Object.values(n).forEach(t=>{e.push(...Bu(t.accounts))}),e}function IB(n,e){const t=[];return Object.values(n).forEach(r=>{Bu(r.accounts).includes(e)&&t.push(...r.methods)}),t}function AB(n,e){const t=[];return Object.values(n).forEach(r=>{Bu(r.accounts).includes(e)&&t.push(...r.events)}),t}function SB(n,e){const t=Lg(n,e);if(t)throw new Error(t.message);const r={};for(const[i,s]of Object.entries(n))r[i]={methods:s.methods,events:s.events,chains:s.accounts.map(o=>`${o.split(":")[0]}:${o.split(":")[1]}`)};return r}function sm(n){return n.includes(":")}function Hl(n){return sm(n)?n.split(":")[0]:n}function kme(n){var e,t,r;const i={};if(!Rc(n))return i;for(const[s,o]of Object.entries(n)){const c=sm(s)?[s]:o.chains,l=o.methods||[],h=o.events||[],f=Hl(s);i[f]=bB(vB({},i[f]),{chains:Jl(c,(e=i[f])==null?void 0:e.chains),methods:Jl(l,(t=i[f])==null?void 0:t.methods),events:Jl(h,(r=i[f])==null?void 0:r.events)})}return i}const TB={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},RB={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function be(n,e){const{message:t,code:r}=RB[n];return{message:e?`${t} ${e}`:t,code:r}}function yn(n,e){const{message:t,code:r}=TB[n];return{message:e?`${t} ${e}`:t,code:r}}function ks(n,e){return!!Array.isArray(n)}function Rc(n){return Object.getPrototypeOf(n)===Object.prototype&&Object.keys(n).length}function qr(n){return typeof n>"u"}function Gn(n,e){return e&&qr(n)?!0:typeof n=="string"&&!!n.trim().length}function rb(n,e){return typeof n=="number"&&!isNaN(n)}function CB(n,e){const{requiredNamespaces:t}=e,r=Object.keys(n.namespaces),i=Object.keys(t);let s=!0;return vc(i,r)?(r.forEach(o=>{const{accounts:c,methods:l,events:h}=n.namespaces[o],f=Bu(c),m=t[o];(!vc(OC(o,m),f)||!vc(m.methods,l)||!vc(m.events,h))&&(s=!1)}),s):!1}function i0(n){return Gn(n,!1)&&n.includes(":")?n.split(":").length===2:!1}function xB(n){if(Gn(n,!1)&&n.includes(":")){const e=n.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&i0(t)}}return!1}function PB(n){if(Gn(n,!1))try{return typeof new URL(n)<"u"}catch{return!1}return!1}function OB(n){var e;return(e=n?.proposer)==null?void 0:e.publicKey}function kB(n){return n?.topic}function NB(n,e){let t=null;return Gn(n?.publicKey,!1)||(t=be("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function s5(n){let e=!0;return ks(n)?n.length&&(e=n.every(t=>Gn(t,!1))):e=!1,e}function DB(n,e,t){let r=null;return ks(e)&&e.length?e.forEach(i=>{r||i0(i)||(r=yn("UNSUPPORTED_CHAINS",`${t}, chain ${i} should be a string and conform to "namespace:chainId" format`))}):i0(n)||(r=yn("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),r}function MB(n,e,t){let r=null;return Object.entries(n).forEach(([i,s])=>{if(r)return;const o=DB(i,OC(i,s),`${e} ${t}`);o&&(r=o)}),r}function LB(n,e){let t=null;return ks(n)?n.forEach(r=>{t||xB(r)||(t=yn("UNSUPPORTED_ACCOUNTS",`${e}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=yn("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function UB(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=LB(r?.accounts,`${e} namespace`);i&&(t=i)}),t}function $B(n,e){let t=null;return s5(n?.methods)?s5(n?.events)||(t=yn("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=yn("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function VC(n,e){let t=null;return Object.values(n).forEach(r=>{if(t)return;const i=$B(r,`${e}, namespace`);i&&(t=i)}),t}function VB(n,e,t){let r=null;if(n&&Rc(n)){const i=VC(n,e);i&&(r=i);const s=MB(n,e,t);s&&(r=s)}else r=be("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return r}function Lg(n,e){let t=null;if(n&&Rc(n)){const r=VC(n,e);r&&(t=r);const i=UB(n,e);i&&(t=i)}else t=be("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function FC(n){return Gn(n.protocol,!0)}function FB(n,e){let t=!1;return n?n&&ks(n)&&n.length&&n.forEach(r=>{t=FC(r)}):t=!0,t}function BB(n){return typeof n=="number"}function Vr(n){return typeof n<"u"&&typeof n!==null}function jB(n){return!(!n||typeof n!="object"||!n.code||!rb(n.code)||!n.message||!Gn(n.message,!1))}function qB(n){return!(qr(n)||!Gn(n.method,!1))}function HB(n){return!(qr(n)||qr(n.result)&&qr(n.error)||!rb(n.id)||!Gn(n.jsonrpc,!1))}function WB(n){return!(qr(n)||!Gn(n.name,!1))}function o5(n,e){return!(!i0(e)||!EB(n).includes(e))}function zB(n,e,t){return Gn(t,!1)?IB(n,e).includes(t):!1}function GB(n,e,t){return Gn(t,!1)?AB(n,e).includes(t):!1}function a5(n,e,t){let r=null;const i=KB(n),s=QB(e),o=Object.keys(i),c=Object.keys(s),l=c5(Object.keys(n)),h=c5(Object.keys(e)),f=l.filter(m=>!h.includes(m));return f.length&&(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${f.toString()}
      Received: ${Object.keys(e).toString()}`)),vc(o,c)||(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${c.toString()}`)),Object.keys(e).forEach(m=>{if(!m.includes(":")||r)return;const y=Bu(e[m].accounts);y.includes(m)||(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${m}
        Required: ${m}
        Approved: ${y.toString()}`))}),o.forEach(m=>{r||(vc(i[m].methods,s[m].methods)?vc(i[m].events,s[m].events)||(r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${m}`)):r=be("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${m}`))}),r}function KB(n){const e={};return Object.keys(n).forEach(t=>{var r;t.includes(":")?e[t]=n[t]:(r=n[t].chains)==null||r.forEach(i=>{e[i]={methods:n[t].methods,events:n[t].events}})}),e}function c5(n){return[...new Set(n.map(e=>e.includes(":")?e.split(":")[0]:e))]}function QB(n){const e={};return Object.keys(n).forEach(t=>{t.includes(":")?e[t]=n[t]:Bu(n[t].accounts)?.forEach(i=>{e[i]={accounts:n[t].accounts.filter(s=>s.includes(`${i}:`)),methods:n[t].methods,events:n[t].events}})}),e}function JB(n,e){return rb(n)&&n<=e.max&&n>=e.min}function l5(){const n=af();return new Promise(e=>{switch(n){case si.browser:e(YB());break;case si.reactNative:e(ZB());break;case si.node:e(XB());break;default:e(!0)}})}function YB(){return Fu()&&navigator?.onLine}async function ZB(){return Vu()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function XB(){return!0}function ej(n){switch(af()){case si.browser:tj(n);break;case si.reactNative:nj(n);break}}function tj(n){!Vu()&&Fu()&&(window.addEventListener("online",()=>n(!0)),window.addEventListener("offline",()=>n(!1)))}function nj(n){Vu()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>n(e?.isConnected))}const zy={};let Jp=class{static get(e){return zy[e]}static set(e,t){zy[e]=t}static delete(e){delete zy[e]}};var u5={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},rj=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],o=n[t++],c=n[t++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},jC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],o=i+1<n.length,c=o?n[i+1]:0,l=i+2<n.length,h=l?n[i+2]:0,f=s>>2,m=(s&3)<<4|c>>4;let y=(c&15)<<2|h>>6,w=h&63;l||(w=64,o||(y=64)),r.push(t[f],t[m],t[y],t[w])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):rj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const m=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||c==null||h==null||m==null)throw new ij;const y=s<<2|c>>4;if(r.push(y),h!==64){const w=c<<4&240|h>>2;if(r.push(w),m!==64){const I=h<<6&192|m;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ij extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sj=function(n){const e=BC(n);return jC.encodeByteArray(e,!0)},s0=function(n){return sj(n).replace(/\./g,"")},qC=function(n){try{return jC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=()=>oj().__FIREBASE_DEFAULTS__,cj=()=>{if(typeof process>"u"||typeof u5>"u")return;const n=u5.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},lj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&qC(n[1]);return e&&JSON.parse(e)},om=()=>{try{return aj()||cj()||lj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},HC=n=>{var e,t;return(t=(e=om())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},WC=n=>{const e=HC(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},zC=()=>{var n;return(n=om())===null||n===void 0?void 0:n.config},GC=n=>{var e;return(e=om())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[s0(JSON.stringify(t)),s0(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mr())}function dj(){var n;const e=(n=om())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function QC(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gj(){const n=mr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function mj(){return!dj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JC(){try{return typeof indexedDB=="object"}catch{return!1}}function YC(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function yj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="FirebaseError";class $i extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=wj,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wc.prototype.create)}}class Wc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?_j(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new $i(i,c,r)}}function _j(n,e){return n.replace(vj,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const vj=/\{\$([^}]+)}/g;function bj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Od(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],o=e[i];if(h5(s)&&h5(o)){if(!Od(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function h5(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sd(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function od(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Ej(n,e){const t=new Ij(n,e);return t.subscribe.bind(t)}class Ij{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Aj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Gy),i.error===void 0&&(i.error=Gy),i.complete===void 0&&(i.complete=Gy);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Aj(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gy(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj=1e3,Tj=2,Rj=4*60*60*1e3,Cj=.5;function d5(n,e=Sj,t=Tj){const r=e*Math.pow(t,n),i=Math.round(Cj*r*(Math.random()-.5)*2);return Math.min(Rj,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(n){return n&&n._delegate?n._delegate:n}class Ui{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new uj;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Oj(e))try{this.getOrInitializeService({instanceIdentifier:dc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=dc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=dc){return this.instances.has(e)}getOptions(e=dc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Pj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=dc){return this.component?this.component.multipleInstances?e:dc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pj(n){return n===dc?void 0:n}function Oj(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(mt||(mt={}));const Nj={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},Dj=mt.INFO,Mj={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},Lj=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Mj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class am{constructor(e){this.name=e,this._logLevel=Dj,this._logHandler=Lj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...e),this._logHandler(this,mt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...e),this._logHandler(this,mt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...e),this._logHandler(this,mt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...e),this._logHandler(this,mt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...e),this._logHandler(this,mt.ERROR,...e)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($j(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $j(n){const e=n.getComponent();return e?.type==="VERSION"}const N_="@firebase/app",f5="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wo=new am("@firebase/app"),Vj="@firebase/app-compat",Fj="@firebase/analytics-compat",Bj="@firebase/analytics",jj="@firebase/app-check-compat",qj="@firebase/app-check",Hj="@firebase/auth",Wj="@firebase/auth-compat",zj="@firebase/database",Gj="@firebase/data-connect",Kj="@firebase/database-compat",Qj="@firebase/functions",Jj="@firebase/functions-compat",Yj="@firebase/installations",Zj="@firebase/installations-compat",Xj="@firebase/messaging",eq="@firebase/messaging-compat",tq="@firebase/performance",nq="@firebase/performance-compat",rq="@firebase/remote-config",iq="@firebase/remote-config-compat",sq="@firebase/storage",oq="@firebase/storage-compat",aq="@firebase/firestore",cq="@firebase/vertexai",lq="@firebase/firestore-compat",uq="firebase",hq="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_="[DEFAULT]",dq={[N_]:"fire-core",[Vj]:"fire-core-compat",[Bj]:"fire-analytics",[Fj]:"fire-analytics-compat",[qj]:"fire-app-check",[jj]:"fire-app-check-compat",[Hj]:"fire-auth",[Wj]:"fire-auth-compat",[zj]:"fire-rtdb",[Gj]:"fire-data-connect",[Kj]:"fire-rtdb-compat",[Qj]:"fire-fn",[Jj]:"fire-fn-compat",[Yj]:"fire-iid",[Zj]:"fire-iid-compat",[Xj]:"fire-fcm",[eq]:"fire-fcm-compat",[tq]:"fire-perf",[nq]:"fire-perf-compat",[rq]:"fire-rc",[iq]:"fire-rc-compat",[sq]:"fire-gcs",[oq]:"fire-gcs-compat",[aq]:"fire-fst",[lq]:"fire-fst-compat",[cq]:"fire-vertex","fire-js":"fire-js",[uq]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map,fq=new Map,M_=new Map;function p5(n,e){try{n.container.addComponent(e)}catch(t){wo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Zi(n){const e=n.name;if(M_.has(e))return wo.debug(`There were multiple attempts to register component ${e}.`),!1;M_.set(e,n);for(const t of o0.values())p5(t,n);for(const t of fq.values())p5(t,n);return!0}function xa(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ji(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pq={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},la=new Wc("app","Firebase",pq);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gq{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw la.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=hq;function mq(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:D_,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw la.create("bad-app-name",{appName:String(i)});if(t||(t=zC()),!t)throw la.create("no-options");const s=o0.get(i);if(s){if(Od(t,s.options)&&Od(r,s.config))return s;throw la.create("duplicate-app",{appName:i})}const o=new kj(i);for(const l of M_.values())o.addComponent(l);const c=new gq(t,r,o);return o0.set(i,c),c}function cm(n=D_){const e=o0.get(n);if(!e&&n===D_&&zC())return mq();if(!e)throw la.create("no-app",{appName:n});return e}function li(n,e,t){var r;let i=(r=dq[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const c=[`Unable to register library "${i}" with version "${e}":`];s&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wo.warn(c.join(" "));return}Zi(new Ui(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yq="firebase-heartbeat-database",wq=1,kd="firebase-heartbeat-store";let Ky=null;function ZC(){return Ky||(Ky=TR(yq,wq,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(kd)}catch(t){console.warn(t)}}}}).catch(n=>{throw la.create("idb-open",{originalErrorMessage:n.message})})),Ky}async function _q(n){try{const t=(await ZC()).transaction(kd),r=await t.objectStore(kd).get(XC(n));return await t.done,r}catch(e){if(e instanceof $i)wo.warn(e.message);else{const t=la.create("idb-get",{originalErrorMessage:e?.message});wo.warn(t.message)}}}async function g5(n,e){try{const r=(await ZC()).transaction(kd,"readwrite");await r.objectStore(kd).put(e,XC(n)),await r.done}catch(t){if(t instanceof $i)wo.warn(t.message);else{const r=la.create("idb-set",{originalErrorMessage:t?.message});wo.warn(r.message)}}}function XC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vq=1024,bq=30*24*60*60*1e3;class Eq{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Aq(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=m5();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=bq}),this._storage.overwrite(this._heartbeatsCache))}catch(r){wo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=m5(),{heartbeatsToSend:r,unsentEntries:i}=Iq(this._heartbeatsCache.heartbeats),s=s0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return wo.warn(t),""}}}function m5(){return new Date().toISOString().substring(0,10)}function Iq(n,e=vq){const t=[];let r=n.slice();for(const i of n){const s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),y5(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),y5(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Aq{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JC()?YC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _q(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return g5(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return g5(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function y5(n){return s0(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sq(n){Zi(new Ui("platform-logger",e=>new Uj(e),"PRIVATE")),Zi(new Ui("heartbeat",e=>new Eq(e),"PRIVATE")),li(N_,f5,n),li(N_,f5,"esm2017"),li("fire-js","")}Sq("");function e4(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Tq=e4,t4=new Wc("auth","Firebase",e4());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new am("@firebase/auth");function Rq(n,...e){a0.logLevel<=mt.WARN&&a0.warn(`Auth (${zc}): ${n}`,...e)}function Ug(n,...e){a0.logLevel<=mt.ERROR&&a0.error(`Auth (${zc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(n,...e){throw sb(n,...e)}function Yi(n,...e){return sb(n,...e)}function ib(n,e,t){const r=Object.assign(Object.assign({},Tq()),{[e]:t});return new Wc("auth","Firebase",r).create(e,{appName:n.name})}function mo(n){return ib(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cq(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&di(n,"argument-error"),ib(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sb(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return t4.create(n,...e)}function Le(n,e,...t){if(!n)throw sb(e,...t)}function fo(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ug(e),new Error(e)}function _o(n,e){n||fo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function xq(){return w5()==="http:"||w5()==="https:"}function w5(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xq()||QC()||"connection"in navigator)?navigator.onLine:!0}function Oq(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,t){this.shortDelay=e,this.longDelay=t,_o(t>e,"Short delay should be less than long delay!"),this.isMobile=hj()||pj()}get(){return Pq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n,e){_o(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nq=new lf(3e4,6e4);function Ls(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Us(n,e,t,r,i={}){return r4(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=cf(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const h=Object.assign({method:e,headers:l},s);return fj()||(h.referrerPolicy="no-referrer"),n4.fetch()(i4(n,n.config.apiHost,t,c),h)})}async function r4(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},kq),e);try{const i=new Mq(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Yp(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[l,h]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yp(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Yp(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Yp(n,"user-disabled",o);const f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw ib(n,f,h);di(n,f)}}catch(i){if(i instanceof $i)throw i;di(n,"network-request-failed",{message:String(i)})}}async function uf(n,e,t,r,i={}){const s=await Us(n,e,t,r,i);return"mfaPendingCredential"in s&&di(n,"multi-factor-auth-required",{_serverResponse:s}),s}function i4(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?ob(n.config,i):`${n.config.apiScheme}://${i}`}function Dq(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Mq{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Yi(this.auth,"network-request-failed")),Nq.get())})}}function Yp(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Yi(n,e,r);return i.customData._tokenResponse=t,i}function _5(n){return n!==void 0&&n.enterprise!==void 0}class Lq{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Dq(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Uq(n,e){return Us(n,"GET","/v2/recaptchaConfig",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $q(n,e){return Us(n,"POST","/v1/accounts:delete",e)}async function s4(n,e){return Us(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vq(n,e=!1){const t=Nt(n),r=await t.getIdToken(e),i=ab(r);Le(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:md(Qy(i.auth_time)),issuedAtTime:md(Qy(i.iat)),expirationTime:md(Qy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function Qy(n){return Number(n)*1e3}function ab(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ug("JWT malformed, contained fewer than 3 sections"),null;try{const i=qC(t);return i?JSON.parse(i):(Ug("Failed to decode base64 JWT payload"),null)}catch(i){return Ug("Caught error parsing JWT payload as JSON",i?.toString()),null}}function v5(n){const e=ab(n);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof $i&&Fq(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function Fq({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=md(this.lastLoginAt),this.creationTime=md(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c0(n){var e;const t=n.auth,r=await n.getIdToken(),i=await Nd(n,s4(t,{idToken:r}));Le(i?.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?o4(s.providerUserInfo):[],c=qq(n.providerData,o),l=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!c?.length,f=l?h:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new U_(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,m)}async function jq(n){const e=Nt(n);await c0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function qq(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function o4(n){return n.map(e=>{var{providerId:t}=e,r=Mv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hq(n,e){const t=await r4(n,{},async()=>{const r=cf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=i4(n,i,"/v1/token",`key=${s}`),c=await n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",n4.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Wq(n,e){return Us(n,"POST","/v2/accounts:revokeToken",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v5(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const t=v5(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await Hq(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new Yl;return r&&(Le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yl,this.toJSON())}_performRefresh(){return fo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(n,e){Le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class po{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Mv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bq(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new U_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Nd(this,this.stsTokenManager.getToken(this.auth,e));return Le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Vq(this,e)}reload(){return jq(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new po(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await c0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ji(this.auth.app))return Promise.reject(mo(this.auth));const e=await this.getIdToken();return await Nd(this,$q(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,c,l,h,f;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,y=(i=t.email)!==null&&i!==void 0?i:void 0,w=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=t.photoURL)!==null&&o!==void 0?o:void 0,T=(c=t.tenantId)!==null&&c!==void 0?c:void 0,A=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,L=(h=t.createdAt)!==null&&h!==void 0?h:void 0,D=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:C,emailVerified:k,isAnonymous:P,providerData:O,stsTokenManager:g}=t;Le(C&&g,e,"internal-error");const _=Yl.fromJSON(this.name,g);Le(typeof C=="string",e,"internal-error"),jo(m,e.name),jo(y,e.name),Le(typeof k=="boolean",e,"internal-error"),Le(typeof P=="boolean",e,"internal-error"),jo(w,e.name),jo(I,e.name),jo(T,e.name),jo(A,e.name),jo(L,e.name),jo(D,e.name);const R=new po({uid:C,auth:e,email:y,emailVerified:k,displayName:m,isAnonymous:P,photoURL:I,phoneNumber:w,tenantId:T,stsTokenManager:_,createdAt:L,lastLoginAt:D});return O&&Array.isArray(O)&&(R.providerData=O.map(N=>Object.assign({},N))),A&&(R._redirectEventId=A),R}static async _fromIdTokenResponse(e,t,r=!1){const i=new Yl;i.updateFromServerResponse(t);const s=new po({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await c0(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Le(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?o4(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,c=new Yl;c.updateFromIdToken(r);const l=new po({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new U_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new Map;function go(n){_o(n instanceof Function,"Expected a class definition");let e=b5.get(n);return e?(_o(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,b5.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}a4.type="NONE";const E5=a4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(n,e,t){return`firebase:${n}:${e}:${t}`}class Zl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=$g(this.userKey,i.apiKey,s),this.fullPersistenceKey=$g("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?po._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Zl(go(E5),e,r);const i=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||go(E5);const o=$g(r,e.config.apiKey,e.name);let c=null;for(const h of t)try{const f=await h._get(o);if(f){const m=po._fromJSON(e,f);h!==s&&(c=m),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Zl(s,e,r):(s=l[0],c&&await s._set(o,c.toJSON()),await Promise.all(t.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Zl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(h4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(c4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f4(e))return"Blackberry";if(p4(e))return"Webos";if(l4(e))return"Safari";if((e.includes("chrome/")||u4(e))&&!e.includes("edge/"))return"Chrome";if(d4(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function c4(n=mr()){return/firefox\//i.test(n)}function l4(n=mr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u4(n=mr()){return/crios\//i.test(n)}function h4(n=mr()){return/iemobile/i.test(n)}function d4(n=mr()){return/android/i.test(n)}function f4(n=mr()){return/blackberry/i.test(n)}function p4(n=mr()){return/webos/i.test(n)}function cb(n=mr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function zq(n=mr()){var e;return cb(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Gq(){return gj()&&document.documentMode===10}function g4(n=mr()){return cb(n)||d4(n)||p4(n)||f4(n)||/windows phone/i.test(n)||h4(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n,e=[]){let t;switch(n){case"Browser":t=I5(mr());break;case"Worker":t=`${I5(mr())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${zc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((o,c)=>{try{const l=e(s);o(l)}catch(l){c(l)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qq(n,e={}){return Us(n,"GET","/v2/passwordPolicy",Ls(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq=6;class Yq{constructor(e){var t,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Jq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,c;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new A5(this),this.idTokenSubscription=new A5(this),this.beforeStateQueue=new Kq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t4,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=go(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Zl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await s4(this,{idToken:e}),r=await po._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ji(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=i?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await c0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Oq()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ji(this.app))return Promise.reject(mo(this));const t=e?Nt(e):null;return t&&Le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ji(this.app)?Promise.reject(mo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ji(this.app)?Promise.reject(mo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(go(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Qq(this),t=new Yq(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await Wq(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&go(e)||this._popupRedirectResolver;Le(t,this,"argument-error"),this.redirectPersistenceManager=await Zl.create(this,[go(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m4(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Rq(`Error while retrieving App Check token: ${t.error}`),t?.token}}function $s(n){return Nt(n)}class A5{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ej(t=>this.observer=t)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xq(n){lm=n}function y4(n){return lm.loadJS(n)}function eH(){return lm.recaptchaEnterpriseScript}function tH(){return lm.gapiScript}function nH(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class rH{constructor(){this.enterprise=new iH}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class iH{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sH="recaptcha-enterprise",w4="NO_RECAPTCHA";class oH{constructor(e){this.type=sH,this.auth=$s(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,c)=>{Uq(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new Lq(l);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(l=>{c(l)})})}function i(s,o,c){const l=window.grecaptcha;_5(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(w4)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new rH().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(c=>{if(!t&&_5(window.grecaptcha))i(c,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=eH();l.length!==0&&(l+=c),y4(l).then(()=>{i(c,s,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function S5(n,e,t,r=!1,i=!1){const s=new oH(n);let o;if(i)o=w4;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const c=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const l=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const l=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function l0(n,e,t,r,i){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await S5(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await S5(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aH(n,e){const t=xa(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(Od(s,e??{}))return i;di(i,"already-initialized")}return t.initialize({options:e})}function cH(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(go);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function lH(n,e,t){const r=$s(n);Le(r._canInitEmulator,r,"emulator-config-failed"),Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=_4(e),{host:o,port:c}=uH(e),l=c===null?"":`:${c}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),hH()}function _4(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uH(n){const e=_4(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:T5(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:T5(o)}}}function T5(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function hH(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return fo("not implemented")}_getIdTokenResponse(e){return fo("not implemented")}_linkToIdToken(e,t){return fo("not implemented")}_getReauthenticationResolver(e){return fo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v4(n,e){return Us(n,"POST","/v1/accounts:resetPassword",Ls(n,e))}async function dH(n,e){return Us(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fH(n,e){return uf(n,"POST","/v1/accounts:signInWithPassword",Ls(n,e))}async function pH(n,e){return Us(n,"POST","/v1/accounts:sendOobCode",Ls(n,e))}async function gH(n,e){return pH(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mH(n,e){return uf(n,"POST","/v1/accounts:signInWithEmailLink",Ls(n,e))}async function yH(n,e){return uf(n,"POST","/v1/accounts:signInWithEmailLink",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends lb{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Dd(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Dd(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l0(e,t,"signInWithPassword",fH);case"emailLink":return mH(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return l0(e,r,"signUpPassword",dH);case"emailLink":return yH(e,{idToken:t,email:this._email,oobCode:this._password});default:di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xl(n,e){return uf(n,"POST","/v1/accounts:signInWithIdp",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH="http://localhost";class Nc extends lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Nc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):di("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=Mv(t,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Nc(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Xl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Xl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xl(e,t)}buildRequest(){const e={requestUri:wH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=cf(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _H(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function vH(n){const e=sd(od(n)).link,t=e?sd(od(e)).deep_link_id:null,r=sd(od(n)).deep_link_id;return(r?sd(od(r)).link:null)||r||t||e||n}class ub{constructor(e){var t,r,i,s,o,c;const l=sd(od(e)),h=(t=l.apiKey)!==null&&t!==void 0?t:null,f=(r=l.oobCode)!==null&&r!==void 0?r:null,m=_H((i=l.mode)!==null&&i!==void 0?i:null);Le(h&&f&&m,"argument-error"),this.apiKey=h,this.operation=m,this.code=f,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=l.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const t=vH(e);try{return new ub(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.providerId=ju.PROVIDER_ID}static credential(e,t){return Dd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ub.parseLink(t);return Le(r,"argument-error"),Dd._fromEmailAndCode(e,r.code,r.tenantId)}}ju.PROVIDER_ID="password";ju.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ju.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf extends hb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends hf{constructor(){super("facebook.com")}static credential(e){return Nc._fromParams({providerId:Xo.PROVIDER_ID,signInMethod:Xo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xo.credentialFromTaggedObject(e)}static credentialFromError(e){return Xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xo.credential(e.oauthAccessToken)}catch{return null}}}Xo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends hf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Nc._fromParams({providerId:ea.PROVIDER_ID,signInMethod:ea.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ea.credentialFromTaggedObject(e)}static credentialFromError(e){return ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ea.credential(t,r)}catch{return null}}}ea.GOOGLE_SIGN_IN_METHOD="google.com";ea.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends hf{constructor(){super("github.com")}static credential(e){return Nc._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.GITHUB_SIGN_IN_METHOD="github.com";ta.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends hf{constructor(){super("twitter.com")}static credential(e,t){return Nc._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return na.credential(t,r)}catch{return null}}}na.TWITTER_SIGN_IN_METHOD="twitter.com";na.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bH(n,e){return uf(n,"POST","/v1/accounts:signUp",Ls(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await po._fromIdTokenResponse(e,r,i),o=R5(r);return new Dc({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=R5(r);return new Dc({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function R5(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0 extends $i{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,u0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new u0(e,t,r,i)}}function b4(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?u0._fromErrorAndOperation(n,s,e,r):s})}async function EH(n,e,t=!1){const r=await Nd(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Dc._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IH(n,e,t=!1){const{auth:r}=n;if(Ji(r.app))return Promise.reject(mo(r));const i="reauthenticate";try{const s=await Nd(n,b4(r,i,e,n),t);Le(s.idToken,r,"internal-error");const o=ab(s.idToken);Le(o,r,"internal-error");const{sub:c}=o;return Le(n.uid===c,r,"user-mismatch"),Dc._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&di(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(n,e,t=!1){if(Ji(n.app))return Promise.reject(mo(n));const r="signIn",i=await b4(n,r,e),s=await Dc._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function AH(n,e){return E4($s(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?fb._fromServerResponse(e,t):"totpInfo"in t?pb._fromServerResponse(e,t):di(e,"internal-error")}}class fb extends db{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new fb(t)}}class pb extends db{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new pb(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gb(n){const e=$s(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Dme(n,e,t){const r=$s(n);await l0(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",gH)}async function Mme(n,e,t){await v4(Nt(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gb(n),r})}async function SH(n,e){const t=Nt(n),r=await v4(t,{oobCode:e}),i=r.requestType;switch(Le(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Le(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Le(r.mfaInfo,t,"internal-error");default:Le(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=db._fromServerResponse($s(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function Lme(n,e){const{data:t}=await SH(Nt(n),e);return t.email}async function Ume(n,e,t){if(Ji(n.app))return Promise.reject(mo(n));const r=$s(n),o=await l0(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bH).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&gb(n),l}),c=await Dc._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function $me(n,e,t){return Ji(n.app)?Promise.reject(mo(n)):AH(Nt(n),ju.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&gb(n),r})}function TH(n,e,t,r){return Nt(n).onIdTokenChanged(e,t,r)}function RH(n,e,t){return Nt(n).beforeAuthStateChanged(e,t)}function Vme(n,e,t,r){return Nt(n).onAuthStateChanged(e,t,r)}function Fme(n){return Nt(n).signOut()}const h0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(h0,"1"),this.storage.removeItem(h0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CH=1e3,xH=10;class A4 extends I4{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g4(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,c,l)=>{this.notifyListeners(o,l)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Gq()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,xH):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},CH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}A4.type="LOCAL";const PH=A4;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4 extends I4{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}S4.type="SESSION";const T4=S4;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new um(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,o=this.handlersMap[i];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(t.origin,s)),l=await OH(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}um.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{const h=mb("",20);i.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(){return window}function NH(n){Rs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(){return typeof Rs().WorkerGlobalScope<"u"&&typeof Rs().importScripts=="function"}async function DH(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MH(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function LH(){return R4()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4="firebaseLocalStorageDb",UH=1,d0="firebaseLocalStorage",x4="fbase_key";class df{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function hm(n,e){return n.transaction([d0],e?"readwrite":"readonly").objectStore(d0)}function $H(){const n=indexedDB.deleteDatabase(C4);return new df(n).toPromise()}function $_(){const n=indexedDB.open(C4,UH);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(d0,{keyPath:x4})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(d0)?e(r):(r.close(),await $H(),e(await $_()))})})}async function C5(n,e,t){const r=hm(n,!0).put({[x4]:e,value:t});return new df(r).toPromise()}async function VH(n,e){const t=hm(n,!1).get(e),r=await new df(t).toPromise();return r===void 0?null:r.value}function x5(n,e){const t=hm(n,!0).delete(e);return new df(t).toPromise()}const FH=800,BH=3;class P4{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $_(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>BH)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return R4()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=um._getInstance(LH()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await DH(),!this.activeServiceWorker)return;this.sender=new kH(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MH()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $_();return await C5(e,h0,"1"),await x5(e,h0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>C5(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>VH(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>x5(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=hm(i,!1).getAll();return new df(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FH)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P4.type="LOCAL";const jH=P4;new lf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(n,e){return e?go(e):(Le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb extends lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qH(n){return E4(n.auth,new yb(n),n.bypassAuthState)}function HH(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),IH(t,new yb(n),n.bypassAuthState)}async function WH(n){const{auth:e,user:t}=n;return Le(t,e,"internal-error"),EH(t,new yb(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qH;case"linkViaPopup":case"linkViaRedirect":return WH;case"reauthViaPopup":case"reauthViaRedirect":return HH;default:di(this.auth,"internal-error")}}resolve(e){_o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_o(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH=new lf(2e3,1e4);async function Bme(n,e,t){if(Ji(n.app))return Promise.reject(Yi(n,"operation-not-supported-in-this-environment"));const r=$s(n);Cq(n,e,hb);const i=O4(r,t);return new bc(r,"signInViaPopup",e,i).executeNotNull()}class bc extends k4{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,bc.currentPopupAction&&bc.currentPopupAction.cancel(),bc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){_o(this.filter.length===1,"Popup operations only handle one event");const e=mb();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zH.get())};e()}}bc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GH="pendingRedirect",Vg=new Map;class KH extends k4{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Vg.get(this.auth._key());if(!e){try{const r=await QH(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Vg.set(this.auth._key(),e)}return this.bypassAuthState||Vg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QH(n,e){const t=ZH(e),r=YH(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function JH(n,e){Vg.set(n._key(),e)}function YH(n){return go(n._redirectPersistence)}function ZH(n){return $g(GH,n.config.apiKey,n.name)}async function XH(n,e,t=!1){if(Ji(n.app))return Promise.reject(mo(n));const r=$s(n),i=O4(r,e),o=await new KH(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eW=10*60*1e3;class tW{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nW(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!N4(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Yi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eW&&this.cachedEventUids.clear(),this.cachedEventUids.has(P5(e))}saveEventToCache(e){this.cachedEventUids.add(P5(e)),this.lastProcessedEventTime=Date.now()}}function P5(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function N4({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nW(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return N4(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rW(n,e={}){return Us(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iW=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sW=/^https?/;async function oW(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rW(n);for(const t of e)try{if(aW(t))return}catch{}di(n,"unauthorized-domain")}function aW(n){const e=L_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!sW.test(t))return!1;if(iW.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cW=new lf(3e4,6e4);function O5(){const n=Rs().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lW(n){return new Promise((e,t)=>{var r,i,s;function o(){O5(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O5(),t(Yi(n,"network-request-failed"))},timeout:cW.get()})}if(!((i=(r=Rs().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Rs().gapi)===null||s===void 0)&&s.load)o();else{const c=nH("iframefcb");return Rs()[c]=()=>{gapi.load?o():t(Yi(n,"network-request-failed"))},y4(`${tH()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw Fg=null,e})}let Fg=null;function uW(n){return Fg=Fg||lW(n),Fg}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hW=new lf(5e3,15e3),dW="__/auth/iframe",fW="emulator/auth/iframe",pW={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gW=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mW(n){const e=n.config;Le(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ob(e,fW):`https://${n.config.authDomain}/${dW}`,r={apiKey:e.apiKey,appName:n.name,v:zc},i=gW.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${cf(r).slice(1)}`}async function yW(n){const e=await uW(n),t=Rs().gapi;return Le(t,n,"internal-error"),e.open({where:document.body,url:mW(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pW,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Yi(n,"network-request-failed"),c=Rs().setTimeout(()=>{s(o)},hW.get());function l(){Rs().clearTimeout(c),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wW={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_W=500,vW=600,bW="_blank",EW="http://localhost";class k5{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function IW(n,e,t,r=_W,i=vW){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const l=Object.assign(Object.assign({},wW),{width:r.toString(),height:i.toString(),top:s,left:o}),h=mr().toLowerCase();t&&(c=u4(h)?bW:t),c4(h)&&(e=e||EW,l.scrollbars="yes");const f=Object.entries(l).reduce((y,[w,I])=>`${y}${w}=${I},`,"");if(zq(h)&&c!=="_self")return AW(e||"",c),new k5(null);const m=window.open(e||"",c,f);Le(m,n,"popup-blocked");try{m.focus()}catch{}return new k5(m)}function AW(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SW="__/auth/handler",TW="emulator/auth/handler",RW=encodeURIComponent("fac");async function N5(n,e,t,r,i,s){Le(n.config.authDomain,n,"auth-domain-config-required"),Le(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:zc,eventId:i};if(e instanceof hb){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",bj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))o[f]=m}if(e instanceof hf){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const l=await n._getAppCheckToken(),h=l?`#${RW}=${encodeURIComponent(l)}`:"";return`${CW(n)}?${cf(c).slice(1)}${h}`}function CW({config:n}){return n.emulator?ob(n,TW):`https://${n.authDomain}/${SW}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="webStorageSupport";class xW{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T4,this._completeRedirectFn=XH,this._overrideRedirectResult=JH}async _openPopup(e,t,r,i){var s;_o((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await N5(e,t,r,L_(),i);return IW(e,o,mb())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await N5(e,t,r,L_(),i);return NH(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(_o(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await yW(e),r=new tW(e);return t.register("authEvent",i=>(Le(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jy,{type:Jy},i=>{var s;const o=(s=i?.[0])===null||s===void 0?void 0:s[Jy];o!==void 0&&t(!!o),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oW(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return g4()||l4()||cb()}}const PW=xW;var D5="@firebase/auth",M5="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OW{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kW(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NW(n){Zi(new Ui("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m4(n)},h=new Zq(r,i,s,l);return cH(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Zi(new Ui("auth-internal",e=>{const t=$s(e.getProvider("auth").getImmediate());return(r=>new OW(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(D5,M5,kW(n)),li(D5,M5,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DW=5*60,MW=GC("authIdTokenMaxAge")||DW;let L5=null;const LW=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MW)return;const i=t?.token;L5!==i&&(L5=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jme(n=cm()){const e=xa(n,"auth");if(e.isInitialized())return e.getImmediate();const t=aH(n,{popupRedirectResolver:PW,persistence:[jH,PH,T4]}),r=GC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=LW(s.toString());RH(t,o,()=>o(t.currentUser)),TH(t,c=>o(c))}}const i=HC("auth");return i&&lH(t,`http://${i}`),t}function UW(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Xq({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Yi("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",UW().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NW("Browser");var U5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cc,D4;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,_){function R(){}R.prototype=_.prototype,g.D=_.prototype,g.prototype=new R,g.prototype.constructor=g,g.C=function(N,M,j){for(var $=Array(arguments.length-2),q=2;q<arguments.length;q++)$[q-2]=arguments[q];return _.prototype[M].apply(N,$)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(g,_,R){R||(R=0);var N=Array(16);if(typeof _=="string")for(var M=0;16>M;++M)N[M]=_.charCodeAt(R++)|_.charCodeAt(R++)<<8|_.charCodeAt(R++)<<16|_.charCodeAt(R++)<<24;else for(M=0;16>M;++M)N[M]=_[R++]|_[R++]<<8|_[R++]<<16|_[R++]<<24;_=g.g[0],R=g.g[1],M=g.g[2];var j=g.g[3],$=_+(j^R&(M^j))+N[0]+3614090360&4294967295;_=R+($<<7&4294967295|$>>>25),$=j+(M^_&(R^M))+N[1]+3905402710&4294967295,j=_+($<<12&4294967295|$>>>20),$=M+(R^j&(_^R))+N[2]+606105819&4294967295,M=j+($<<17&4294967295|$>>>15),$=R+(_^M&(j^_))+N[3]+3250441966&4294967295,R=M+($<<22&4294967295|$>>>10),$=_+(j^R&(M^j))+N[4]+4118548399&4294967295,_=R+($<<7&4294967295|$>>>25),$=j+(M^_&(R^M))+N[5]+1200080426&4294967295,j=_+($<<12&4294967295|$>>>20),$=M+(R^j&(_^R))+N[6]+2821735955&4294967295,M=j+($<<17&4294967295|$>>>15),$=R+(_^M&(j^_))+N[7]+4249261313&4294967295,R=M+($<<22&4294967295|$>>>10),$=_+(j^R&(M^j))+N[8]+1770035416&4294967295,_=R+($<<7&4294967295|$>>>25),$=j+(M^_&(R^M))+N[9]+2336552879&4294967295,j=_+($<<12&4294967295|$>>>20),$=M+(R^j&(_^R))+N[10]+4294925233&4294967295,M=j+($<<17&4294967295|$>>>15),$=R+(_^M&(j^_))+N[11]+2304563134&4294967295,R=M+($<<22&4294967295|$>>>10),$=_+(j^R&(M^j))+N[12]+1804603682&4294967295,_=R+($<<7&4294967295|$>>>25),$=j+(M^_&(R^M))+N[13]+4254626195&4294967295,j=_+($<<12&4294967295|$>>>20),$=M+(R^j&(_^R))+N[14]+2792965006&4294967295,M=j+($<<17&4294967295|$>>>15),$=R+(_^M&(j^_))+N[15]+1236535329&4294967295,R=M+($<<22&4294967295|$>>>10),$=_+(M^j&(R^M))+N[1]+4129170786&4294967295,_=R+($<<5&4294967295|$>>>27),$=j+(R^M&(_^R))+N[6]+3225465664&4294967295,j=_+($<<9&4294967295|$>>>23),$=M+(_^R&(j^_))+N[11]+643717713&4294967295,M=j+($<<14&4294967295|$>>>18),$=R+(j^_&(M^j))+N[0]+3921069994&4294967295,R=M+($<<20&4294967295|$>>>12),$=_+(M^j&(R^M))+N[5]+3593408605&4294967295,_=R+($<<5&4294967295|$>>>27),$=j+(R^M&(_^R))+N[10]+38016083&4294967295,j=_+($<<9&4294967295|$>>>23),$=M+(_^R&(j^_))+N[15]+3634488961&4294967295,M=j+($<<14&4294967295|$>>>18),$=R+(j^_&(M^j))+N[4]+3889429448&4294967295,R=M+($<<20&4294967295|$>>>12),$=_+(M^j&(R^M))+N[9]+568446438&4294967295,_=R+($<<5&4294967295|$>>>27),$=j+(R^M&(_^R))+N[14]+3275163606&4294967295,j=_+($<<9&4294967295|$>>>23),$=M+(_^R&(j^_))+N[3]+4107603335&4294967295,M=j+($<<14&4294967295|$>>>18),$=R+(j^_&(M^j))+N[8]+1163531501&4294967295,R=M+($<<20&4294967295|$>>>12),$=_+(M^j&(R^M))+N[13]+2850285829&4294967295,_=R+($<<5&4294967295|$>>>27),$=j+(R^M&(_^R))+N[2]+4243563512&4294967295,j=_+($<<9&4294967295|$>>>23),$=M+(_^R&(j^_))+N[7]+1735328473&4294967295,M=j+($<<14&4294967295|$>>>18),$=R+(j^_&(M^j))+N[12]+2368359562&4294967295,R=M+($<<20&4294967295|$>>>12),$=_+(R^M^j)+N[5]+4294588738&4294967295,_=R+($<<4&4294967295|$>>>28),$=j+(_^R^M)+N[8]+2272392833&4294967295,j=_+($<<11&4294967295|$>>>21),$=M+(j^_^R)+N[11]+1839030562&4294967295,M=j+($<<16&4294967295|$>>>16),$=R+(M^j^_)+N[14]+4259657740&4294967295,R=M+($<<23&4294967295|$>>>9),$=_+(R^M^j)+N[1]+2763975236&4294967295,_=R+($<<4&4294967295|$>>>28),$=j+(_^R^M)+N[4]+1272893353&4294967295,j=_+($<<11&4294967295|$>>>21),$=M+(j^_^R)+N[7]+4139469664&4294967295,M=j+($<<16&4294967295|$>>>16),$=R+(M^j^_)+N[10]+3200236656&4294967295,R=M+($<<23&4294967295|$>>>9),$=_+(R^M^j)+N[13]+681279174&4294967295,_=R+($<<4&4294967295|$>>>28),$=j+(_^R^M)+N[0]+3936430074&4294967295,j=_+($<<11&4294967295|$>>>21),$=M+(j^_^R)+N[3]+3572445317&4294967295,M=j+($<<16&4294967295|$>>>16),$=R+(M^j^_)+N[6]+76029189&4294967295,R=M+($<<23&4294967295|$>>>9),$=_+(R^M^j)+N[9]+3654602809&4294967295,_=R+($<<4&4294967295|$>>>28),$=j+(_^R^M)+N[12]+3873151461&4294967295,j=_+($<<11&4294967295|$>>>21),$=M+(j^_^R)+N[15]+530742520&4294967295,M=j+($<<16&4294967295|$>>>16),$=R+(M^j^_)+N[2]+3299628645&4294967295,R=M+($<<23&4294967295|$>>>9),$=_+(M^(R|~j))+N[0]+4096336452&4294967295,_=R+($<<6&4294967295|$>>>26),$=j+(R^(_|~M))+N[7]+1126891415&4294967295,j=_+($<<10&4294967295|$>>>22),$=M+(_^(j|~R))+N[14]+2878612391&4294967295,M=j+($<<15&4294967295|$>>>17),$=R+(j^(M|~_))+N[5]+4237533241&4294967295,R=M+($<<21&4294967295|$>>>11),$=_+(M^(R|~j))+N[12]+1700485571&4294967295,_=R+($<<6&4294967295|$>>>26),$=j+(R^(_|~M))+N[3]+2399980690&4294967295,j=_+($<<10&4294967295|$>>>22),$=M+(_^(j|~R))+N[10]+4293915773&4294967295,M=j+($<<15&4294967295|$>>>17),$=R+(j^(M|~_))+N[1]+2240044497&4294967295,R=M+($<<21&4294967295|$>>>11),$=_+(M^(R|~j))+N[8]+1873313359&4294967295,_=R+($<<6&4294967295|$>>>26),$=j+(R^(_|~M))+N[15]+4264355552&4294967295,j=_+($<<10&4294967295|$>>>22),$=M+(_^(j|~R))+N[6]+2734768916&4294967295,M=j+($<<15&4294967295|$>>>17),$=R+(j^(M|~_))+N[13]+1309151649&4294967295,R=M+($<<21&4294967295|$>>>11),$=_+(M^(R|~j))+N[4]+4149444226&4294967295,_=R+($<<6&4294967295|$>>>26),$=j+(R^(_|~M))+N[11]+3174756917&4294967295,j=_+($<<10&4294967295|$>>>22),$=M+(_^(j|~R))+N[2]+718787259&4294967295,M=j+($<<15&4294967295|$>>>17),$=R+(j^(M|~_))+N[9]+3951481745&4294967295,g.g[0]=g.g[0]+_&4294967295,g.g[1]=g.g[1]+(M+($<<21&4294967295|$>>>11))&4294967295,g.g[2]=g.g[2]+M&4294967295,g.g[3]=g.g[3]+j&4294967295}r.prototype.u=function(g,_){_===void 0&&(_=g.length);for(var R=_-this.blockSize,N=this.B,M=this.h,j=0;j<_;){if(M==0)for(;j<=R;)i(this,g,j),j+=this.blockSize;if(typeof g=="string"){for(;j<_;)if(N[M++]=g.charCodeAt(j++),M==this.blockSize){i(this,N),M=0;break}}else for(;j<_;)if(N[M++]=g[j++],M==this.blockSize){i(this,N),M=0;break}}this.h=M,this.o+=_},r.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var _=1;_<g.length-8;++_)g[_]=0;var R=8*this.o;for(_=g.length-8;_<g.length;++_)g[_]=R&255,R/=256;for(this.u(g),g=Array(16),_=R=0;4>_;++_)for(var N=0;32>N;N+=8)g[R++]=this.g[_]>>>N&255;return g};function s(g,_){var R=c;return Object.prototype.hasOwnProperty.call(R,g)?R[g]:R[g]=_(g)}function o(g,_){this.h=_;for(var R=[],N=!0,M=g.length-1;0<=M;M--){var j=g[M]|0;N&&j==_||(R[M]=j,N=!1)}this.g=R}var c={};function l(g){return-128<=g&&128>g?s(g,function(_){return new o([_|0],0>_?-1:0)}):new o([g|0],0>g?-1:0)}function h(g){if(isNaN(g)||!isFinite(g))return m;if(0>g)return A(h(-g));for(var _=[],R=1,N=0;g>=R;N++)_[N]=g/R|0,R*=4294967296;return new o(_,0)}function f(g,_){if(g.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(g.charAt(0)=="-")return A(f(g.substring(1),_));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=h(Math.pow(_,8)),N=m,M=0;M<g.length;M+=8){var j=Math.min(8,g.length-M),$=parseInt(g.substring(M,M+j),_);8>j?(j=h(Math.pow(_,j)),N=N.j(j).add(h($))):(N=N.j(R),N=N.add(h($)))}return N}var m=l(0),y=l(1),w=l(16777216);n=o.prototype,n.m=function(){if(T(this))return-A(this).m();for(var g=0,_=1,R=0;R<this.g.length;R++){var N=this.i(R);g+=(0<=N?N:4294967296+N)*_,_*=4294967296}return g},n.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I(this))return"0";if(T(this))return"-"+A(this).toString(g);for(var _=h(Math.pow(g,6)),R=this,N="";;){var M=k(R,_).g;R=L(R,M.j(_));var j=((0<R.g.length?R.g[0]:R.h)>>>0).toString(g);if(R=M,I(R))return j+N;for(;6>j.length;)j="0"+j;N=j+N}},n.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function I(g){if(g.h!=0)return!1;for(var _=0;_<g.g.length;_++)if(g.g[_]!=0)return!1;return!0}function T(g){return g.h==-1}n.l=function(g){return g=L(this,g),T(g)?-1:I(g)?0:1};function A(g){for(var _=g.g.length,R=[],N=0;N<_;N++)R[N]=~g.g[N];return new o(R,~g.h).add(y)}n.abs=function(){return T(this)?A(this):this},n.add=function(g){for(var _=Math.max(this.g.length,g.g.length),R=[],N=0,M=0;M<=_;M++){var j=N+(this.i(M)&65535)+(g.i(M)&65535),$=(j>>>16)+(this.i(M)>>>16)+(g.i(M)>>>16);N=$>>>16,j&=65535,$&=65535,R[M]=$<<16|j}return new o(R,R[R.length-1]&-2147483648?-1:0)};function L(g,_){return g.add(A(_))}n.j=function(g){if(I(this)||I(g))return m;if(T(this))return T(g)?A(this).j(A(g)):A(A(this).j(g));if(T(g))return A(this.j(A(g)));if(0>this.l(w)&&0>g.l(w))return h(this.m()*g.m());for(var _=this.g.length+g.g.length,R=[],N=0;N<2*_;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(var M=0;M<g.g.length;M++){var j=this.i(N)>>>16,$=this.i(N)&65535,q=g.i(M)>>>16,B=g.i(M)&65535;R[2*N+2*M]+=$*B,D(R,2*N+2*M),R[2*N+2*M+1]+=j*B,D(R,2*N+2*M+1),R[2*N+2*M+1]+=$*q,D(R,2*N+2*M+1),R[2*N+2*M+2]+=j*q,D(R,2*N+2*M+2)}for(N=0;N<_;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=_;N<2*_;N++)R[N]=0;return new o(R,0)};function D(g,_){for(;(g[_]&65535)!=g[_];)g[_+1]+=g[_]>>>16,g[_]&=65535,_++}function C(g,_){this.g=g,this.h=_}function k(g,_){if(I(_))throw Error("division by zero");if(I(g))return new C(m,m);if(T(g))return _=k(A(g),_),new C(A(_.g),A(_.h));if(T(_))return _=k(g,A(_)),new C(A(_.g),_.h);if(30<g.g.length){if(T(g)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var R=y,N=_;0>=N.l(g);)R=P(R),N=P(N);var M=O(R,1),j=O(N,1);for(N=O(N,2),R=O(R,2);!I(N);){var $=j.add(N);0>=$.l(g)&&(M=M.add(R),j=$),N=O(N,1),R=O(R,1)}return _=L(g,M.j(_)),new C(M,_)}for(M=m;0<=g.l(_);){for(R=Math.max(1,Math.floor(g.m()/_.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),j=h(R),$=j.j(_);T($)||0<$.l(g);)R-=N,j=h(R),$=j.j(_);I(j)&&(j=y),M=M.add(j),g=L(g,$)}return new C(M,g)}n.A=function(g){return k(this,g).h},n.and=function(g){for(var _=Math.max(this.g.length,g.g.length),R=[],N=0;N<_;N++)R[N]=this.i(N)&g.i(N);return new o(R,this.h&g.h)},n.or=function(g){for(var _=Math.max(this.g.length,g.g.length),R=[],N=0;N<_;N++)R[N]=this.i(N)|g.i(N);return new o(R,this.h|g.h)},n.xor=function(g){for(var _=Math.max(this.g.length,g.g.length),R=[],N=0;N<_;N++)R[N]=this.i(N)^g.i(N);return new o(R,this.h^g.h)};function P(g){for(var _=g.g.length+1,R=[],N=0;N<_;N++)R[N]=g.i(N)<<1|g.i(N-1)>>>31;return new o(R,g.h)}function O(g,_){var R=_>>5;_%=32;for(var N=g.g.length-R,M=[],j=0;j<N;j++)M[j]=0<_?g.i(j+R)>>>_|g.i(j+R+1)<<32-_:g.i(j+R);return new o(M,g.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,D4=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=f,Cc=o}).apply(typeof U5<"u"?U5:typeof self<"u"?self:typeof window<"u"?window:{});var Zp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M4,ad,L4,Bg,V_,U4,$4,V4;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,S){return d==Array.prototype||d==Object.prototype||(d[v]=S.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zp=="object"&&Zp];for(var v=0;v<d.length;++v){var S=d[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var r=t(this);function i(d,v){if(v)e:{var S=r;d=d.split(".");for(var V=0;V<d.length-1;V++){var te=d[V];if(!(te in S))break e;S=S[te]}d=d[d.length-1],V=S[d],v=v(V),v!=V&&v!=null&&e(S,d,{configurable:!0,writable:!0,value:v})}}function s(d,v){d instanceof String&&(d+="");var S=0,V=!1,te={next:function(){if(!V&&S<d.length){var oe=S++;return{value:v(oe,d[oe]),done:!1}}return V=!0,{done:!0,value:void 0}}};return te[Symbol.iterator]=function(){return te},te}i("Array.prototype.values",function(d){return d||function(){return s(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function l(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function h(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function f(d,v,S){return d.call.apply(d.bind,arguments)}function m(d,v,S){if(!d)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(te,V),d.apply(v,te)}}return function(){return d.apply(v,arguments)}}function y(d,v,S){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,y.apply(null,arguments)}function w(d,v){var S=Array.prototype.slice.call(arguments,1);return function(){var V=S.slice();return V.push.apply(V,arguments),d.apply(this,V)}}function I(d,v){function S(){}S.prototype=v.prototype,d.aa=v.prototype,d.prototype=new S,d.prototype.constructor=d,d.Qb=function(V,te,oe){for(var me=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)me[Mt-2]=arguments[Mt];return v.prototype[te].apply(V,me)}}function T(d){const v=d.length;if(0<v){const S=Array(v);for(let V=0;V<v;V++)S[V]=d[V];return S}return[]}function A(d,v){for(let S=1;S<arguments.length;S++){const V=arguments[S];if(l(V)){const te=d.length||0,oe=V.length||0;d.length=te+oe;for(let me=0;me<oe;me++)d[te+me]=V[me]}else d.push(V)}}class L{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function D(d){return/^[\s\xa0]*$/.test(d)}function C(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function k(d){return k[" "](d),d}k[" "]=function(){};var P=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function O(d,v,S){for(const V in d)v.call(S,d[V],V,d)}function g(d,v){for(const S in d)v.call(void 0,d[S],S,d)}function _(d){const v={};for(const S in d)v[S]=d[S];return v}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(d,v){let S,V;for(let te=1;te<arguments.length;te++){V=arguments[te];for(S in V)d[S]=V[S];for(let oe=0;oe<R.length;oe++)S=R[oe],Object.prototype.hasOwnProperty.call(V,S)&&(d[S]=V[S])}}function M(d){var v=1;d=d.split(":");const S=[];for(;0<v&&d.length;)S.push(d.shift()),v--;return d.length&&S.push(d.join(":")),S}function j(d){c.setTimeout(()=>{throw d},0)}function $(){var d=J;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class q{constructor(){this.h=this.g=null}add(v,S){const V=B.get();V.set(v,S),this.h?this.h.next=V:this.g=V,this.h=V}}var B=new L(()=>new Q,d=>d.reset());class Q{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let G,K=!1,J=new q,ne=()=>{const d=c.Promise.resolve(void 0);G=()=>{d.then(se)}};var se=()=>{for(var d;d=$();){try{d.h.call(d.g)}catch(S){j(S)}var v=B;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}K=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Ae=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};c.addEventListener("test",S,v),c.removeEventListener("test",S,v)}catch{}return d}();function we(d,v){if(ae.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var S=this.type=d.type,V=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(P){e:{try{k(v.nodeName);var te=!0;break e}catch{}te=!1}te||(v=null)}}else S=="mouseover"?v=d.fromElement:S=="mouseout"&&(v=d.toElement);this.relatedTarget=v,V?(this.clientX=V.clientX!==void 0?V.clientX:V.pageX,this.clientY=V.clientY!==void 0?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:De[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&we.aa.h.call(this)}}I(we,ae);var De={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ee="closure_listenable_"+(1e6*Math.random()|0),re=0;function Y(d,v,S,V,te){this.listener=d,this.proxy=null,this.src=v,this.type=S,this.capture=!!V,this.ha=te,this.key=++re,this.da=this.fa=!1}function E(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function W(d){this.src=d,this.g={},this.h=0}W.prototype.add=function(d,v,S,V,te){var oe=d.toString();d=this.g[oe],d||(d=this.g[oe]=[],this.h++);var me=ye(d,v,V,te);return-1<me?(v=d[me],S||(v.fa=!1)):(v=new Y(v,this.src,oe,!!V,te),v.fa=S,d.push(v)),v};function ge(d,v){var S=v.type;if(S in d.g){var V=d.g[S],te=Array.prototype.indexOf.call(V,v,void 0),oe;(oe=0<=te)&&Array.prototype.splice.call(V,te,1),oe&&(E(v),d.g[S].length==0&&(delete d.g[S],d.h--))}}function ye(d,v,S,V){for(var te=0;te<d.length;++te){var oe=d[te];if(!oe.da&&oe.listener==v&&oe.capture==!!S&&oe.ha==V)return te}return-1}var Me="closure_lm_"+(1e6*Math.random()|0),We={};function tt(d,v,S,V,te){if(Array.isArray(v)){for(var oe=0;oe<v.length;oe++)tt(d,v[oe],S,V,te);return null}return S=je(S),d&&d[ee]?d.K(v,S,h(V)?!!V.capture:!!V,te):nt(d,v,S,!1,V,te)}function nt(d,v,S,V,te,oe){if(!v)throw Error("Invalid event type");var me=h(te)?!!te.capture:!!te,Mt=ze(d);if(Mt||(d[Me]=Mt=new W(d)),S=Mt.add(v,S,V,me,oe),S.proxy)return S;if(V=Zt(),S.proxy=V,V.src=d,V.listener=S,d.addEventListener)Ae||(te=me),te===void 0&&(te=!1),d.addEventListener(v.toString(),V,te);else if(d.attachEvent)d.attachEvent(Fe(v.toString()),V);else if(d.addListener&&d.removeListener)d.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return S}function Zt(){function d(S){return v.call(d.src,d.listener,S)}const v=Ze;return d}function Jt(d,v,S,V,te){if(Array.isArray(v))for(var oe=0;oe<v.length;oe++)Jt(d,v[oe],S,V,te);else V=h(V)?!!V.capture:!!V,S=je(S),d&&d[ee]?(d=d.i,v=String(v).toString(),v in d.g&&(oe=d.g[v],S=ye(oe,S,V,te),-1<S&&(E(oe[S]),Array.prototype.splice.call(oe,S,1),oe.length==0&&(delete d.g[v],d.h--)))):d&&(d=ze(d))&&(v=d.g[v.toString()],d=-1,v&&(d=ye(v,S,V,te)),(S=-1<d?v[d]:null)&&Ye(S))}function Ye(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ee])ge(v.i,d);else{var S=d.type,V=d.proxy;v.removeEventListener?v.removeEventListener(S,V,d.capture):v.detachEvent?v.detachEvent(Fe(S),V):v.addListener&&v.removeListener&&v.removeListener(V),(S=ze(v))?(ge(S,d),S.h==0&&(S.src=null,v[Me]=null)):E(d)}}}function Fe(d){return d in We?We[d]:We[d]="on"+d}function Ze(d,v){if(d.da)d=!0;else{v=new we(v,this);var S=d.listener,V=d.ha||d.src;d.fa&&Ye(d),d=S.call(V,v)}return d}function ze(d){return d=d[Me],d instanceof W?d:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(d){return typeof d=="function"?d:(d[Xe]||(d[Xe]=function(v){return d.handleEvent(v)}),d[Xe])}function Oe(){pe.call(this),this.i=new W(this),this.M=this,this.F=null}I(Oe,pe),Oe.prototype[ee]=!0,Oe.prototype.removeEventListener=function(d,v,S,V){Jt(this,d,v,S,V)};function Ce(d,v){var S,V=d.F;if(V)for(S=[];V;V=V.F)S.push(V);if(d=d.M,V=v.type||v,typeof v=="string")v=new ae(v,d);else if(v instanceof ae)v.target=v.target||d;else{var te=v;v=new ae(V,d),N(v,te)}if(te=!0,S)for(var oe=S.length-1;0<=oe;oe--){var me=v.g=S[oe];te=qe(me,V,!0,v)&&te}if(me=v.g=d,te=qe(me,V,!0,v)&&te,te=qe(me,V,!1,v)&&te,S)for(oe=0;oe<S.length;oe++)me=v.g=S[oe],te=qe(me,V,!1,v)&&te}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var S=d.g[v],V=0;V<S.length;V++)E(S[V]);delete d.g[v],d.h--}}this.F=null},Oe.prototype.K=function(d,v,S,V){return this.i.add(String(d),v,!1,S,V)},Oe.prototype.L=function(d,v,S,V){return this.i.add(String(d),v,!0,S,V)};function qe(d,v,S,V){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var te=!0,oe=0;oe<v.length;++oe){var me=v[oe];if(me&&!me.da&&me.capture==S){var Mt=me.listener,Ln=me.ha||me.src;me.fa&&ge(d.i,me),te=Mt.call(Ln,V)!==!1&&te}}return te&&!V.defaultPrevented}function lt(d,v,S){if(typeof d=="function")S&&(d=y(d,S));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:c.setTimeout(d,v||0)}function dt(d){d.g=lt(()=>{d.g=null,d.i&&(d.i=!1,dt(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class pt extends pe{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ut(d){pe.call(this),this.h=d,this.g={}}I(ut,pe);var wt=[];function It(d){O(d.g,function(v,S){this.g.hasOwnProperty(S)&&Ye(v)},d),d.g={}}ut.prototype.N=function(){ut.aa.N.call(this),It(this)},ut.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=c.JSON.stringify,kr=c.JSON.parse,Yr=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function gi(){}gi.prototype.h=null;function is(d){return d.h||(d.h=d.i())}function Bs(){}var mi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function js(){ae.call(this,"d")}I(js,ae);function dn(){ae.call(this,"c")}I(dn,ae);var zt={},vn=null;function rn(){return vn=vn||new Oe}zt.La="serverreachability";function fn(d){ae.call(this,zt.La,d)}I(fn,ae);function Xt(d){const v=rn();Ce(v,new fn(v))}zt.STAT_EVENT="statevent";function bn(d,v){ae.call(this,zt.STAT_EVENT,d),this.stat=v}I(bn,ae);function St(d){const v=rn();Ce(v,new bn(v,d))}zt.Ma="timingevent";function sn(d,v){ae.call(this,zt.Ma,d),this.size=v}I(sn,ae);function en(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},v)}function Gt(){this.g=!0}Gt.prototype.xa=function(){this.g=!1};function Rn(d,v,S,V,te,oe){d.info(function(){if(d.g)if(oe)for(var me="",Mt=oe.split("&"),Ln=0;Ln<Mt.length;Ln++){var _t=Mt[Ln].split("=");if(1<_t.length){var $t=_t[0];_t=_t[1];var On=$t.split("_");me=2<=On.length&&On[1]=="type"?me+($t+"="+_t+"&"):me+($t+"=redacted&")}}else me=null;else me=oe;return"XMLHTTP REQ ("+V+") [attempt "+te+"]: "+v+`
`+S+`
`+me})}function Cn(d,v,S,V,te,oe,me){d.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+te+"]: "+v+`
`+S+`
`+oe+" "+me})}function Yt(d,v,S,V){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Pn(d,S)+(V?" "+V:"")})}function xn(d,v){d.info(function(){return"TIMEOUT: "+v})}Gt.prototype.info=function(){};function Pn(d,v){if(!d.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(d=0;d<S.length;d++)if(Array.isArray(S[d])){var V=S[d];if(!(2>V.length)){var te=V[1];if(Array.isArray(te)&&!(1>te.length)){var oe=te[0];if(oe!="noop"&&oe!="stop"&&oe!="close")for(var me=1;me<te.length;me++)te[me]=""}}}}return At(S)}catch{return v}}var tl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oh;function Da(){}I(Da,gi),Da.prototype.g=function(){return new XMLHttpRequest},Da.prototype.i=function(){return{}},oh=new Da;function ss(d,v,S,V){this.j=d,this.i=v,this.l=S,this.R=V||1,this.U=new ut(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ff}function Ff(){this.i=null,this.g="",this.h=!1}var Bf={},ah={};function ch(d,v,S){d.L=1,d.v=Co(yi(v)),d.m=S,d.P=!0,jf(d,null)}function jf(d,v){d.F=Date.now(),qs(d),d.A=yi(d.v);var S=d.A,V=d.R;Array.isArray(V)||(V=[String(V)]),mh(S.i,"t",V),d.C=0,S=d.j.J,d.h=new Ff,d.g=lp(d.j,S?v:null,!d.m),0<d.O&&(d.M=new pt(y(d.Y,d,d.g),d.O)),v=d.U,S=d.g,V=d.ca;var te="readystatechange";Array.isArray(te)||(te&&(wt[0]=te.toString()),te=wt);for(var oe=0;oe<te.length;oe++){var me=tt(S,te[oe],V||v.handleEvent,!1,v.h||v);if(!me)break;v.g[me.key]=me}v=d.H?_(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Xt(),Rn(d.i,d.u,d.A,d.l,d.R,d.m)}ss.prototype.ca=function(d){d=d.target;const v=this.M;v&&Qn(d)==3?v.j():this.Y(d)},ss.prototype.Y=function(d){try{if(d==this.g)e:{const On=Qn(this.g);var v=this.g.Ba();const bi=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||_h(this.g)))){this.J||On!=4||v==7||(v==8||0>=bi?Xt(3):Xt(2)),lh(this);var S=this.g.Z();this.X=S;t:if(Ma(this)){var V=_h(this.g);d="";var te=V.length,oe=Qn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),La(this);var me="";break t}this.h.i=new c.TextDecoder}for(v=0;v<te;v++)this.h.h=!0,d+=this.h.i.decode(V[v],{stream:!(oe&&v==te-1)});V.length=0,this.h.g+=d,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=S==200,Cn(this.i,this.u,this.A,this.l,this.R,On,S),this.o){if(this.T&&!this.K){t:{if(this.g){var Mt,Ln=this.g;if((Mt=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(Mt)){var _t=Mt;break t}}_t=null}if(S=_t)Yt(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nl(this,S);else{this.o=!1,this.s=3,St(12),os(this),La(this);break e}}if(this.P){S=!0;let Nr;for(;!this.J&&this.C<me.length;)if(Nr=k1(this,me),Nr==ah){On==4&&(this.s=4,St(14),S=!1),Yt(this.i,this.l,null,"[Incomplete Response]");break}else if(Nr==Bf){this.s=4,St(15),Yt(this.i,this.l,me,"[Invalid Chunk]"),S=!1;break}else Yt(this.i,this.l,Nr,null),nl(this,Nr);if(Ma(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||me.length!=0||this.h.h||(this.s=1,St(16),S=!1),this.o=this.o&&S,!S)Yt(this.i,this.l,me,"[Invalid Chunked Response]"),os(this),La(this);else if(0<me.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),vi($t),$t.M=!0,St(11))}}else Yt(this.i,this.l,me,null),nl(this,me);On==4&&os(this),this.o&&!this.J&&(On==4?Ht(this.j,this):(this.o=!1,qs(this)))}else vh(this.g),S==400&&0<me.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),os(this),La(this)}}}catch{}finally{}};function Ma(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function k1(d,v){var S=d.C,V=v.indexOf(`
`,S);return V==-1?ah:(S=Number(v.substring(S,V)),isNaN(S)?Bf:(V+=1,V+S>v.length?ah:(v=v.slice(V,V+S),d.C=V+S,v)))}ss.prototype.cancel=function(){this.J=!0,os(this)};function qs(d){d.S=Date.now()+d.I,qf(d,d.I)}function qf(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=en(y(d.ba,d),v)}function lh(d){d.B&&(c.clearTimeout(d.B),d.B=null)}ss.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(xn(this.i,this.A),this.L!=2&&(Xt(),St(17)),os(this),this.s=2,La(this)):qf(this,this.S-d)};function La(d){d.j.G==0||d.J||Ht(d.j,d)}function os(d){lh(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,It(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function nl(d,v){try{var S=d.j;if(S.G!=0&&(S.g==d||uh(S.h,d))){if(!d.K&&uh(S.h,d)&&S.G==3){try{var V=S.Da.g.parse(v)}catch{V=null}if(Array.isArray(V)&&V.length==3){var te=V;if(te[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<d.F)Oo(S),Va(S);else break e;cl(S),St(18)}}else S.za=te[1],0<S.za-S.T&&37500>te[2]&&S.F&&S.v==0&&!S.C&&(S.C=en(y(S.Za,S),6e3));if(1>=Gf(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Fi(S,11)}else if((d.K||S.g==d)&&Oo(S),!D(v))for(te=S.Da.g.parse(v),v=0;v<te.length;v++){let _t=te[v];if(S.T=_t[0],_t=_t[1],S.G==2)if(_t[0]=="c"){S.K=_t[1],S.ia=_t[2];const $t=_t[3];$t!=null&&(S.la=$t,S.j.info("VER="+S.la));const On=_t[4];On!=null&&(S.Aa=On,S.j.info("SVER="+S.Aa));const bi=_t[5];bi!=null&&typeof bi=="number"&&0<bi&&(V=1.5*bi,S.L=V,S.j.info("backChannelRequestTimeoutMs_="+V)),V=S;const Nr=d.g;if(Nr){const Ha=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ha){var oe=V.h;oe.g||Ha.indexOf("spdy")==-1&&Ha.indexOf("quic")==-1&&Ha.indexOf("h2")==-1||(oe.j=oe.l,oe.g=new Set,oe.h&&(rl(oe,oe.h),oe.h=null))}if(V.D){const Ih=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ih&&(V.ya=Ih,qt(V.I,V.D,Ih))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-d.F,S.j.info("Handshake RTT: "+S.R+"ms")),V=S;var me=d;if(V.qa=ll(V,V.J?V.ia:null,V.W),me.K){hh(V.h,me);var Mt=me,Ln=V.L;Ln&&(Mt.I=Ln),Mt.B&&(lh(Mt),qs(Mt)),V.g=me}else ap(V);0<S.i.length&&Fa(S)}else _t[0]!="stop"&&_t[0]!="close"||Fi(S,7);else S.G==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Fi(S,7):al(S):_t[0]!="noop"&&S.l&&S.l.ta(_t),S.v=0)}}Xt(4)}catch{}}var Hf=class{constructor(d,v){this.g=d,this.map=v}};function Wf(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zf(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Gf(d){return d.h?1:d.g?d.g.size:0}function uh(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function rl(d,v){d.g?d.g.add(v):d.h=v}function hh(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Wf.prototype.cancel=function(){if(this.i=dh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function dh(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const S of d.g.values())v=v.concat(S.D);return v}return T(d.i)}function fh(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var v=[],S=d.length,V=0;V<S;V++)v.push(d[V]);return v}v=[],S=0;for(V in d)v[S++]=d[V];return v}function N1(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var v=[];d=d.length;for(var S=0;S<d;S++)v.push(S);return v}v=[],S=0;for(const V in d)v[S++]=V;return v}}}function ph(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var S=N1(d),V=fh(d),te=V.length,oe=0;oe<te;oe++)v.call(void 0,V[oe],S&&S[oe],d)}var Ua=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kf(d,v){if(d){d=d.split("&");for(var S=0;S<d.length;S++){var V=d[S].indexOf("="),te=null;if(0<=V){var oe=d[S].substring(0,V);te=d[S].substring(V+1)}else oe=d[S];v(oe,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function Hs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Hs){this.h=d.h,$a(this,d.j),this.o=d.o,this.g=d.g,Ro(this,d.s),this.l=d.l;var v=d.i,S=new xo;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),Qf(this,S),this.m=d.m}else d&&(v=String(d).match(Ua))?(this.h=!1,$a(this,v[1]||"",!0),this.o=Ws(v[2]||""),this.g=Ws(v[3]||"",!0),Ro(this,v[4]),this.l=Ws(v[5]||"",!0),Qf(this,v[6]||"",!0),this.m=Ws(v[7]||"")):(this.h=!1,this.i=new xo(null,this.h))}Hs.prototype.toString=function(){var d=[],v=this.j;v&&d.push(wi(v,gh,!0),":");var S=this.g;return(S||v=="file")&&(d.push("//"),(v=this.o)&&d.push(wi(v,gh,!0),"@"),d.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&d.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(wi(S,S.charAt(0)=="/"?Yf:D1,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",wi(S,Xf)),d.join("")};function yi(d){return new Hs(d)}function $a(d,v,S){d.j=S?Ws(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Ro(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function Qf(d,v,S){v instanceof xo?(d.i=v,M1(d.i,d.h)):(S||(v=wi(v,Zf)),d.i=new xo(v,d.h))}function qt(d,v,S){d.i.set(v,S)}function Co(d){return qt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ws(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function wi(d,v,S){return typeof d=="string"?(d=encodeURI(d).replace(v,Jf),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Jf(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var gh=/[#\/\?@]/g,D1=/[#\?:]/g,Yf=/[#\?]/g,Zf=/[#\?@]/g,Xf=/#/g;function xo(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function as(d){d.g||(d.g=new Map,d.h=0,d.i&&Kf(d.i,function(v,S){d.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}n=xo.prototype,n.add=function(d,v){as(this),this.i=null,d=Po(this,d);var S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(v),this.h+=1,this};function ep(d,v){as(d),v=Po(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function tp(d,v){return as(d),v=Po(d,v),d.g.has(v)}n.forEach=function(d,v){as(this),this.g.forEach(function(S,V){S.forEach(function(te){d.call(v,te,V,this)},this)},this)},n.na=function(){as(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let V=0;V<v.length;V++){const te=d[V];for(let oe=0;oe<te.length;oe++)S.push(v[V])}return S},n.V=function(d){as(this);let v=[];if(typeof d=="string")tp(this,d)&&(v=v.concat(this.g.get(Po(this,d))));else{d=Array.from(this.g.values());for(let S=0;S<d.length;S++)v=v.concat(d[S])}return v},n.set=function(d,v){return as(this),this.i=null,d=Po(this,d),tp(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function mh(d,v,S){ep(d,v),0<S.length&&(d.i=null,d.g.set(Po(d,v),T(S)),d.h+=S.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var V=v[S];const oe=encodeURIComponent(String(V)),me=this.V(V);for(V=0;V<me.length;V++){var te=oe;me[V]!==""&&(te+="="+encodeURIComponent(String(me[V]))),d.push(te)}}return this.i=d.join("&")};function Po(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function M1(d,v){v&&!d.j&&(as(d),d.i=null,d.g.forEach(function(S,V){var te=V.toLowerCase();V!=te&&(ep(this,V),mh(this,te,S))},d)),d.j=v}function L1(d,v){const S=new Gt;if(c.Image){const V=new Image;V.onload=w(_i,S,"TestLoadImage: loaded",!0,v,V),V.onerror=w(_i,S,"TestLoadImage: error",!1,v,V),V.onabort=w(_i,S,"TestLoadImage: abort",!1,v,V),V.ontimeout=w(_i,S,"TestLoadImage: timeout",!1,v,V),c.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=d}else v(!1)}function U1(d,v){const S=new Gt,V=new AbortController,te=setTimeout(()=>{V.abort(),_i(S,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:V.signal}).then(oe=>{clearTimeout(te),oe.ok?_i(S,"TestPingServer: ok",!0,v):_i(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(te),_i(S,"TestPingServer: error",!1,v)})}function _i(d,v,S,V,te){try{te&&(te.onload=null,te.onerror=null,te.onabort=null,te.ontimeout=null),V(S)}catch{}}function $1(){this.g=new Yr}function V1(d,v,S){const V=S||"";try{ph(d,function(te,oe){let me=te;h(te)&&(me=At(te)),v.push(V+oe+"="+encodeURIComponent(me))})}catch(te){throw v.push(V+"type="+encodeURIComponent("_badmap")),te}}function il(d){this.l=d.Ub||null,this.j=d.eb||!1}I(il,gi),il.prototype.g=function(){return new sl(this.l,this.j)},il.prototype.i=function(d){return function(){return d}}({});function sl(d,v){Oe.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(sl,Oe),n=sl.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,kt(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||c).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Dt(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,kt(this)),this.g&&(this.readyState=3,kt(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;np(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function np(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Dt(this):kt(this),this.readyState==3&&np(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Dt(this))},n.Qa=function(d){this.g&&(this.response=d,Dt(this))},n.ga=function(){this.g&&Dt(this)};function Dt(d){d.readyState=4,d.l=null,d.j=null,d.v=null,kt(d)}n.setRequestHeader=function(d,v){this.u.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=v.next();return d.join(`\r
`)};function kt(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function rp(d){let v="";return O(d,function(S,V){v+=V,v+=":",v+=S,v+=`\r
`}),v}function yh(d,v,S){e:{for(V in S){var V=!1;break e}V=!0}V||(S=rp(S),typeof d=="string"?S!=null&&encodeURIComponent(String(S)):qt(d,v,S))}function tn(d){Oe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(tn,Oe);var F1=/^https?$/i,B1=["POST","PUT"];n=tn.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,v,S,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oh.g(),this.v=this.o?is(this.o):is(oh),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(oe){ip(this,oe);return}if(d=S||"",S=new Map(this.headers),V)if(Object.getPrototypeOf(V)===Object.prototype)for(var te in V)S.set(te,V[te]);else if(typeof V.keys=="function"&&typeof V.get=="function")for(const oe of V.keys())S.set(oe,V.get(oe));else throw Error("Unknown input type for opt_headers: "+String(V));V=Array.from(S.keys()).find(oe=>oe.toLowerCase()=="content-type"),te=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(B1,v,void 0))||V||te||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[oe,me]of S)this.g.setRequestHeader(oe,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ol(this),this.u=!0,this.g.send(d),this.u=!1}catch(oe){ip(this,oe)}};function ip(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,wh(d),pn(d)}function wh(d){d.A||(d.A=!0,Ce(d,"complete"),Ce(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ce(this,"complete"),Ce(this,"abort"),pn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pn(this,!0)),tn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sp(this):this.bb())},n.bb=function(){sp(this)};function sp(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Qn(d)!=4||d.Z()!=2)){if(d.u&&Qn(d)==4)lt(d.Ea,0,d);else if(Ce(d,"readystatechange"),Qn(d)==4){d.h=!1;try{const me=d.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var V;if(V=me===0){var te=String(d.D).match(Ua)[1]||null;!te&&c.self&&c.self.location&&(te=c.self.location.protocol.slice(0,-1)),V=!F1.test(te?te.toLowerCase():"")}S=V}if(S)Ce(d,"complete"),Ce(d,"success");else{d.m=6;try{var oe=2<Qn(d)?d.g.statusText:""}catch{oe=""}d.l=oe+" ["+d.Z()+"]",wh(d)}}finally{pn(d)}}}}function pn(d,v){if(d.g){ol(d);const S=d.g,V=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||Ce(d,"ready");try{S.onreadystatechange=V}catch{}}}function ol(d){d.I&&(c.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Qn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Qn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),kr(v)}};function _h(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function vh(d){const v={};d=(d.g&&2<=Qn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let V=0;V<d.length;V++){if(D(d[V]))continue;var S=M(d[V]);const te=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const oe=v[te]||[];v[te]=oe,oe.push(S)}g(v,function(V){return V.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jn(d,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||v}function bh(d){this.Aa=0,this.i=[],this.j=new Gt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jn("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jn("baseRetryDelayMs",5e3,d),this.cb=jn("retryDelaySeedMs",1e4,d),this.Wa=jn("forwardChannelMaxRetries",2,d),this.wa=jn("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Wf(d&&d.concurrentRequestLimit),this.Da=new $1,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=bh.prototype,n.la=8,n.G=1,n.connect=function(d,v,S,V){St(0),this.W=d,this.H=v||{},S&&V!==void 0&&(this.H.OSID=S,this.H.OAID=V),this.F=this.X,this.I=ll(this,null,this.W),Fa(this)};function al(d){if(Eh(d),d.G==3){var v=d.U++,S=yi(d.I);if(qt(S,"SID",d.K),qt(S,"RID",v),qt(S,"TYPE","terminate"),Ba(d,S),v=new ss(d,d.j,v),v.L=2,v.v=Co(yi(S)),S=!1,c.navigator&&c.navigator.sendBeacon)try{S=c.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&c.Image&&(new Image().src=v.v,S=!0),S||(v.g=lp(v.j,null),v.g.ea(v.v)),v.F=Date.now(),qs(v)}cp(d)}function Va(d){d.g&&(vi(d),d.g.cancel(),d.g=null)}function Eh(d){Va(d),d.u&&(c.clearTimeout(d.u),d.u=null),Oo(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Fa(d){if(!zf(d.h)&&!d.s){d.s=!0;var v=d.Ga;G||ne(),K||(G(),K=!0),J.add(v,d),d.B=0}}function op(d,v){return Gf(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=en(y(d.Ga,d,v),Vi(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const te=new ss(this,this.j,d);let oe=this.o;if(this.S&&(oe?(oe=_(oe),N(oe,this.S)):oe=this.S),this.m!==null||this.O||(te.H=oe,oe=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var V=this.i[S];if("__data__"in V.map&&(V=V.map.__data__,typeof V=="string")){V=V.length;break t}V=void 0}if(V===void 0)break;if(v+=V,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=yr(this,te,v),S=yi(this.I),qt(S,"RID",d),qt(S,"CVER",22),this.D&&qt(S,"X-HTTP-Session-Id",this.D),Ba(this,S),oe&&(this.O?v="headers="+encodeURIComponent(String(rp(oe)))+"&"+v:this.m&&yh(S,this.m,oe)),rl(this.h,te),this.Ua&&qt(S,"TYPE","init"),this.P?(qt(S,"$req",v),qt(S,"SID","null"),te.T=!0,ch(te,S,null)):ch(te,S,v),this.G=2}}else this.G==3&&(d?sr(this,d):this.i.length==0||zf(this.h)||sr(this))};function sr(d,v){var S;v?S=v.l:S=d.U++;const V=yi(d.I);qt(V,"SID",d.K),qt(V,"RID",S),qt(V,"AID",d.T),Ba(d,V),d.m&&d.o&&yh(V,d.m,d.o),S=new ss(d,d.j,S,d.B+1),d.m===null&&(S.H=d.o),v&&(d.i=v.D.concat(d.i)),v=yr(d,S,1e3),S.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),rl(d.h,S),ch(S,V,v)}function Ba(d,v){d.H&&O(d.H,function(S,V){qt(v,V,S)}),d.l&&ph({},function(S,V){qt(v,V,S)})}function yr(d,v,S){S=Math.min(d.i.length,S);var V=d.l?y(d.l.Na,d.l,d):null;e:{var te=d.i;let oe=-1;for(;;){const me=["count="+S];oe==-1?0<S?(oe=te[0].g,me.push("ofs="+oe)):oe=0:me.push("ofs="+oe);let Mt=!0;for(let Ln=0;Ln<S;Ln++){let _t=te[Ln].g;const $t=te[Ln].map;if(_t-=oe,0>_t)oe=Math.max(0,te[Ln].g-100),Mt=!1;else try{V1($t,me,"req"+_t+"_")}catch{V&&V($t)}}if(Mt){V=me.join("&");break e}}}return d=d.i.splice(0,S),v.D=d,V}function ap(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;G||ne(),K||(G(),K=!0),J.add(v,d),d.v=0}}function cl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=en(y(d.Fa,d),Vi(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,ja(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=en(y(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),Va(this),ja(this))};function vi(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function ja(d){d.g=new ss(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=yi(d.qa);qt(v,"RID","rpc"),qt(v,"SID",d.K),qt(v,"AID",d.T),qt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&qt(v,"TO",d.ja),qt(v,"TYPE","xmlhttp"),Ba(d,v),d.m&&d.o&&yh(v,d.m,d.o),d.L&&(d.g.I=d.L);var S=d.g;d=d.ia,S.L=1,S.v=Co(yi(v)),S.m=null,S.P=!0,jf(S,d)}n.Za=function(){this.C!=null&&(this.C=null,Va(this),cl(this),St(19))};function Oo(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Ht(d,v){var S=null;if(d.g==v){Oo(d),vi(d),d.g=null;var V=2}else if(uh(d.h,v))S=v.D,hh(d.h,v),V=1;else return;if(d.G!=0){if(v.o)if(V==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var te=d.B;V=rn(),Ce(V,new sn(V,S)),Fa(d)}else ap(d);else if(te=v.s,te==3||te==0&&0<v.X||!(V==1&&op(d,v)||V==2&&cl(d)))switch(S&&0<S.length&&(v=d.h,v.i=v.i.concat(S)),te){case 1:Fi(d,5);break;case 4:Fi(d,10);break;case 3:Fi(d,6);break;default:Fi(d,2)}}}function Vi(d,v){let S=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(S*=2),S*v}function Fi(d,v){if(d.j.info("Error code "+v),v==2){var S=y(d.fb,d),V=d.Xa;const te=!V;V=new Hs(V||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||$a(V,"https"),Co(V),te?L1(V.toString(),S):U1(V.toString(),S)}else St(2);d.G=0,d.l&&d.l.sa(v),cp(d),Eh(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function cp(d){if(d.G=0,d.ka=[],d.l){const v=dh(d.h);(v.length!=0||d.i.length!=0)&&(A(d.ka,v),A(d.ka,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.ra()}}function ll(d,v,S){var V=S instanceof Hs?yi(S):new Hs(S);if(V.g!="")v&&(V.g=v+"."+V.g),Ro(V,V.s);else{var te=c.location;V=te.protocol,v=v?v+"."+te.hostname:te.hostname,te=+te.port;var oe=new Hs(null);V&&$a(oe,V),v&&(oe.g=v),te&&Ro(oe,te),S&&(oe.l=S),V=oe}return S=d.D,v=d.ya,S&&v&&qt(V,S,v),qt(V,"VER",d.la),Ba(d,V),V}function lp(d,v,S){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new tn(new il({eb:S})):new tn(d.pa),v.Ha(d.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function up(){}n=up.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ul(){}ul.prototype.g=function(d,v){return new or(d,v)};function or(d,v){Oe.call(this),this.g=new bh(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!D(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!D(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ko(this)}I(or,Oe),or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},or.prototype.close=function(){al(this.g)},or.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.u&&(S={},S.__data__=At(d),d=S);v.i.push(new Hf(v.Ya++,d)),v.G==3&&Fa(v)},or.prototype.N=function(){this.g.l=null,delete this.j,al(this.g),delete this.g,or.aa.N.call(this)};function qa(d){js.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const S in v){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}I(qa,js);function zs(){dn.call(this),this.status=1}I(zs,dn);function ko(d){this.g=d}I(ko,up),ko.prototype.ua=function(){Ce(this.g,"a")},ko.prototype.ta=function(d){Ce(this.g,new qa(d))},ko.prototype.sa=function(d){Ce(this.g,new zs)},ko.prototype.ra=function(){Ce(this.g,"b")},ul.prototype.createWebChannel=ul.prototype.g,or.prototype.send=or.prototype.o,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,V4=function(){return new ul},$4=function(){return rn()},U4=zt,V_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tl.NO_ERROR=0,tl.TIMEOUT=8,tl.HTTP_ERROR=6,Bg=tl,Vf.COMPLETE="complete",L4=Vf,Bs.EventType=mi,mi.OPEN="a",mi.CLOSE="b",mi.ERROR="c",mi.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,ad=Bs,tn.prototype.listenOnce=tn.prototype.L,tn.prototype.getLastError=tn.prototype.Ka,tn.prototype.getLastErrorCode=tn.prototype.Ba,tn.prototype.getStatus=tn.prototype.Z,tn.prototype.getResponseJson=tn.prototype.Oa,tn.prototype.getResponseText=tn.prototype.oa,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Ha,M4=tn}).apply(typeof Zp<"u"?Zp:typeof self<"u"?self:typeof window<"u"?window:{});const $5="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dr.UNAUTHENTICATED=new dr(null),dr.GOOGLE_CREDENTIALS=new dr("google-credentials-uid"),dr.FIRST_PARTY=new dr("first-party-uid"),dr.MOCK_USER=new dr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new am("@firebase/firestore");function Ul(){return Mc.logLevel}function Se(n,...e){if(Mc.logLevel<=mt.DEBUG){const t=e.map(wb);Mc.debug(`Firestore (${qu}): ${n}`,...t)}}function vo(n,...e){if(Mc.logLevel<=mt.ERROR){const t=e.map(wb);Mc.error(`Firestore (${qu}): ${n}`,...t)}}function fu(n,...e){if(Mc.logLevel<=mt.WARN){const t=e.map(wb);Mc.warn(`Firestore (${qu}): ${n}`,...t)}}function wb(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Be(n="Unexpected state"){const e=`FIRESTORE (${qu}) INTERNAL ASSERTION FAILED: `+n;throw vo(e),new Error(e)}function Bt(n,e){n||Be()}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends $i{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $W{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(dr.UNAUTHENTICATED))}shutdown(){}}class VW{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class FW{constructor(e){this.t=e,this.currentUser=dr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Bt(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let s=new yo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yo,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},c=l=>{Se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(Se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yo)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Bt(typeof r.accessToken=="string"),new F4(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Bt(e===null||typeof e=="string"),new dr(e)}}class BW{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=dr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class jW{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new BW(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(dr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qW{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HW{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Bt(this.o===void 0);const r=s=>{s.error!=null&&Se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Bt(typeof t.token=="string"),this.R=t.token,new qW(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=WW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function bt(n,e){return n<e?-1:n>e?1:0}function pu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{static fromTimestamp(e){return new He(e)}static min(){return new He(new Fn(0,0))}static max(){return new He(new Fn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t,r){t===void 0?t=0:t>e.length&&Be(),r===void 0?r=e.length-t:r>e.length-t&&Be(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Md.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Md?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Md{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const zW=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tr extends Md{construct(e,t,r){return new tr(e,t,r)}static isValidIdentifier(e){return zW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new _e(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new _e(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new _e(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tr(t)}static emptyPath(){return new tr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(Qt.fromString(e))}static fromName(e){return new ke(Qt.fromString(e).popFirst(5))}static empty(){return new ke(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new Qt(e.slice()))}}function GW(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=He.fromTimestamp(r===1e9?new Fn(t+1,0):new Fn(t,r));return new ya(i,ke.empty(),e)}function KW(n){return new ya(n.readTime,n.key,-1)}class ya{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ya(He.min(),ke.empty(),-1)}static max(){return new ya(He.max(),ke.empty(),-1)}}function QW(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:bt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YW{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==JW)throw n;Se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Be(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new de((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof de?t:de.resolve(t)}catch(t){return de.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):de.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):de.reject(t)}static resolve(e){return new de((t,r)=>{t(e)})}static reject(e){return new de((t,r)=>{r(e)})}static waitFor(e){return new de((t,r)=>{let i=0,s=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=de.resolve(!1);for(const r of e)t=t.next(i=>i?de.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new de((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let l=0;l<s;l++){const h=l;t(e[h]).next(f=>{o[h]=f,++c,c===s&&r(o)},f=>i(f))}})}static doWhile(e,t){return new de((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}function ZW(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wu(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dm.oe=-1;function fm(n){return n==null}function f0(n){return n===0&&1/n==-1/0}function XW(n){return typeof n=="number"&&Number.isInteger(n)&&!f0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=V5(e)),e=tz(n.get(t),e);return V5(e)}function tz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function V5(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F5(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Pa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function j4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t){this.comparator=e,this.root=t||Zn.EMPTY}insert(e,t){return new hn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zn.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xp(this.root,e,this.comparator,!0)}}class Xp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zn{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Zn.RED,this.left=i??Zn.EMPTY,this.right=s??Zn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Zn(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Zn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Be();const e=this.left.check();if(e!==this.right.check())throw Be();return e+(this.isRed()?0:1)}}Zn.EMPTY=null,Zn.RED=!0,Zn.BLACK=!1;Zn.EMPTY=new class{constructor(){this.size=0}get key(){throw Be()}get value(){throw Be()}get color(){throw Be()}get left(){throw Be()}get right(){throw Be()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Zn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new B5(this.data.getIterator())}getIteratorFrom(e){return new B5(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bn(this.comparator);return t.data=e,t}}class B5{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(tr.comparator)}static empty(){return new oi([])}unionWith(e){let t=new Bn(tr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return pu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new q4("Invalid base64 string: "+s):s}}(e);return new rr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rr.EMPTY_BYTE_STRING=new rr("");const nz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wa(n){if(Bt(!!n),typeof n=="string"){let e=0;const t=nz.exec(n);if(Bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:An(n.seconds),nanos:An(n.nanos)}}function An(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _a(n){return typeof n=="string"?rr.fromBase64String(n):rr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function gm(n){const e=n.mapValue.fields.__previous_value__;return pm(e)?gm(e):e}function Ld(n){const e=wa(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,t,r,i,s,o,c,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=h}}class Ud{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ud("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ud&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function va(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?pm(n)?4:sz(n)?9007199254740991:iz(n)?10:11:Be()}function Ns(n,e){if(n===e)return!0;const t=va(n);if(t!==va(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ld(n).isEqual(Ld(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=wa(i.timestampValue),c=wa(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return _a(i.bytesValue).isEqual(_a(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return An(i.geoPointValue.latitude)===An(s.geoPointValue.latitude)&&An(i.geoPointValue.longitude)===An(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return An(i.integerValue)===An(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=An(i.doubleValue),c=An(s.doubleValue);return o===c?f0(o)===f0(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return pu(n.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(F5(o)!==F5(c))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Ns(o[l],c[l])))return!1;return!0}(n,e);default:return Be()}}function $d(n,e){return(n.values||[]).find(t=>Ns(t,e))!==void 0}function gu(n,e){if(n===e)return 0;const t=va(n),r=va(e);if(t!==r)return bt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return bt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const c=An(s.integerValue||s.doubleValue),l=An(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return j5(n.timestampValue,e.timestampValue);case 4:return j5(Ld(n),Ld(e));case 5:return bt(n.stringValue,e.stringValue);case 6:return function(s,o){const c=_a(s),l=_a(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const c=s.split("/"),l=o.split("/");for(let h=0;h<c.length&&h<l.length;h++){const f=bt(c[h],l[h]);if(f!==0)return f}return bt(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const c=bt(An(s.latitude),An(o.latitude));return c!==0?c:bt(An(s.longitude),An(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return q5(n.arrayValue,e.arrayValue);case 10:return function(s,o){var c,l,h,f;const m=s.fields||{},y=o.fields||{},w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,I=(l=y.value)===null||l===void 0?void 0:l.arrayValue,T=bt(((h=w?.values)===null||h===void 0?void 0:h.length)||0,((f=I?.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:q5(w,I)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===eg.mapValue&&o===eg.mapValue)return 0;if(s===eg.mapValue)return 1;if(o===eg.mapValue)return-1;const c=s.fields||{},l=Object.keys(c),h=o.fields||{},f=Object.keys(h);l.sort(),f.sort();for(let m=0;m<l.length&&m<f.length;++m){const y=bt(l[m],f[m]);if(y!==0)return y;const w=gu(c[l[m]],h[f[m]]);if(w!==0)return w}return bt(l.length,f.length)}(n.mapValue,e.mapValue);default:throw Be()}}function j5(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return bt(n,e);const t=wa(n),r=wa(e),i=bt(t.seconds,r.seconds);return i!==0?i:bt(t.nanos,r.nanos)}function q5(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=gu(t[i],r[i]);if(s)return s}return bt(t.length,r.length)}function mu(n){return F_(n)}function F_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=wa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return _a(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ke.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=F_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${F_(t.fields[o])}`;return i+"}"}(n.mapValue):Be()}function jg(n){switch(va(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gm(n);return e?16+jg(e):16;case 5:return 2*n.stringValue.length;case 6:return _a(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+jg(s),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Pa(r.fields,(s,o)=>{i+=s.length+jg(o)}),i}(n.mapValue);default:throw Be()}}function p0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function B_(n){return!!n&&"integerValue"in n}function _b(n){return!!n&&"arrayValue"in n}function H5(n){return!!n&&"nullValue"in n}function W5(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qg(n){return!!n&&"mapValue"in n}function iz(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function yd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Pa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function sz(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yd(t)}setAll(e){let t=tr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=c.popLast()}o?r[c.lastSegment()]=yd(o):i.push(c.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());qg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Pa(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hr(yd(this.value))}}function H4(n){const e=[];return Pa(n.fields,(t,r)=>{const i=new tr([t]);if(qg(r)){const s=H4(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t,r,i,s,o,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new fr(e,0,He.min(),He.min(),He.min(),Hr.empty(),0)}static newFoundDocument(e,t,r,i){return new fr(e,1,t,He.min(),r,i,0)}static newNoDocument(e,t){return new fr(e,2,t,He.min(),He.min(),Hr.empty(),0)}static newUnknownDocument(e,t){return new fr(e,3,t,He.min(),He.min(),Hr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(He.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=He.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,t){this.position=e,this.inclusive=t}}function z5(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ke.comparator(ke.fromName(o.referenceValue),t.key):r=gu(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function G5(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ns(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t="asc"){this.field=e,this.dir=t}}function oz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{}class Mn extends W4{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new cz(e,t,r):t==="array-contains"?new hz(e,r):t==="in"?new dz(e,r):t==="not-in"?new fz(e,r):t==="array-contains-any"?new pz(e,r):new Mn(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lz(e,r):new uz(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(gu(t,this.value)):t!==null&&va(this.value)===va(t)&&this.matchesComparison(gu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Be()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xi extends W4{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Xi(e,t)}matches(e){return z4(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function z4(n){return n.op==="and"}function G4(n){return az(n)&&z4(n)}function az(n){for(const e of n.filters)if(e instanceof Xi)return!1;return!0}function j_(n){if(n instanceof Mn)return n.field.canonicalString()+n.op.toString()+mu(n.value);if(G4(n))return n.filters.map(e=>j_(e)).join(",");{const e=n.filters.map(t=>j_(t)).join(",");return`${n.op}(${e})`}}function K4(n,e){return n instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.field.isEqual(i.field)&&Ns(r.value,i.value)}(n,e):n instanceof Xi?function(r,i){return i instanceof Xi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,c)=>s&&K4(o,i.filters[c]),!0):!1}(n,e):void Be()}function Q4(n){return n instanceof Mn?function(t){return`${t.field.canonicalString()} ${t.op} ${mu(t.value)}`}(n):n instanceof Xi?function(t){return t.op.toString()+" {"+t.getFilters().map(Q4).join(" ,")+"}"}(n):"Filter"}class cz extends Mn{constructor(e,t,r){super(e,t,r),this.key=ke.fromName(r.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class lz extends Mn{constructor(e,t){super(e,"in",t),this.keys=J4("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uz extends Mn{constructor(e,t){super(e,"not-in",t),this.keys=J4("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function J4(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ke.fromName(r.referenceValue))}class hz extends Mn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _b(t)&&$d(t.arrayValue,this.value)}}class dz extends Mn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$d(this.value.arrayValue,t)}}class fz extends Mn{constructor(e,t){super(e,"not-in",t)}matches(e){if($d(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!$d(this.value.arrayValue,t)}}class pz extends Mn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_b(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$d(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(e,t=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}}function K5(n,e=null,t=[],r=[],i=null,s=null,o=null){return new gz(n,e,t,r,i,s,o)}function vb(n){const e=Qe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>j_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>mu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>mu(r)).join(",")),e.ue=t}return e.ue}function bb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!oz(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!K4(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!G5(n.startAt,e.startAt)&&G5(n.endAt,e.endAt)}function q_(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,t=null,r=[],i=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mz(n,e,t,r,i,s,o,c){return new Gc(n,e,t,r,i,s,o,c)}function mm(n){return new Gc(n)}function Q5(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Eb(n){return n.collectionGroup!==null}function eu(n){const e=Qe(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Bn(tr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Vd(s,r))}),t.has(tr.keyField().canonicalString())||e.ce.push(new Vd(tr.keyField(),r))}return e.ce}function Cs(n){const e=Qe(n);return e.le||(e.le=yz(e,eu(n))),e.le}function yz(n,e){if(n.limitType==="F")return K5(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Vd(i.field,s)});const t=n.endAt?new yu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yu(n.startAt.position,n.startAt.inclusive):null;return K5(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function H_(n,e){const t=n.filters.concat([e]);return new Gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function g0(n,e,t){return new Gc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ym(n,e){return bb(Cs(n),Cs(e))&&n.limitType===e.limitType}function Y4(n){return`${vb(Cs(n))}|lt:${n.limitType}`}function $l(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Q4(i)).join(", ")}]`),fm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>mu(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>mu(i)).join(",")),`Target(${r})`}(Cs(n))}; limitType=${n.limitType})`}function wm(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ke.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of eu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,c,l){const h=z5(o,c,l);return o.inclusive?h<=0:h<0}(r.startAt,eu(r),i)||r.endAt&&!function(o,c,l){const h=z5(o,c,l);return o.inclusive?h>=0:h>0}(r.endAt,eu(r),i))}(n,e)}function wz(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Z4(n){return(e,t)=>{let r=!1;for(const i of eu(n)){const s=_z(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function _z(n,e,t){const r=n.field.isKeyField()?ke.comparator(e.key,t.key):function(s,o,c){const l=o.data.field(s),h=c.data.field(s);return l!==null&&h!==null?gu(l,h):Be()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Be()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pa(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return j4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=new hn(ke.comparator);function bo(){return vz}const X4=new hn(ke.comparator);function cd(...n){let e=X4;for(const t of n)e=e.insert(t.key,t);return e}function e6(n){let e=X4;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ec(){return wd()}function t6(){return wd()}function wd(){return new Kc(n=>n.toString(),(n,e)=>n.isEqual(e))}const bz=new hn(ke.comparator),Ez=new Bn(ke.comparator);function yt(...n){let e=Ez;for(const t of n)e=e.add(t);return e}const Iz=new Bn(bt);function Az(){return Iz}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f0(e)?"-0":e}}function n6(n){return{integerValue:""+n}}function Sz(n,e){return XW(e)?n6(e):Ib(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(){this._=void 0}}function Tz(n,e,t){return n instanceof Fd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&pm(s)&&(s=gm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Bd?i6(n,e):n instanceof jd?s6(n,e):function(i,s){const o=r6(i,s),c=J5(o)+J5(i.Pe);return B_(o)&&B_(i.Pe)?n6(c):Ib(i.serializer,c)}(n,e)}function Rz(n,e,t){return n instanceof Bd?i6(n,e):n instanceof jd?s6(n,e):t}function r6(n,e){return n instanceof m0?function(r){return B_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Fd extends _m{}class Bd extends _m{constructor(e){super(),this.elements=e}}function i6(n,e){const t=o6(e);for(const r of n.elements)t.some(i=>Ns(i,r))||t.push(r);return{arrayValue:{values:t}}}class jd extends _m{constructor(e){super(),this.elements=e}}function s6(n,e){let t=o6(e);for(const r of n.elements)t=t.filter(i=>!Ns(i,r));return{arrayValue:{values:t}}}class m0 extends _m{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function J5(n){return An(n.integerValue||n.doubleValue)}function o6(n){return _b(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e,t){this.field=e,this.transform=t}}function xz(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Bd&&i instanceof Bd||r instanceof jd&&i instanceof jd?pu(r.elements,i.elements,Ns):r instanceof m0&&i instanceof m0?Ns(r.Pe,i.Pe):r instanceof Fd&&i instanceof Fd}(n.transform,e.transform)}class Pz{constructor(e,t){this.version=e,this.transformResults=t}}class Rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rr}static exists(e){return new Rr(void 0,e)}static updateTime(e){return new Rr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vm{}function a6(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new bm(n.key,Rr.none()):new ff(n.key,n.data,Rr.none());{const t=n.data,r=Hr.empty();let i=new Bn(tr.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Oa(n.key,r,new oi(i.toArray()),Rr.none())}}function Oz(n,e,t){n instanceof ff?function(i,s,o){const c=i.value.clone(),l=Z5(i.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Oa?function(i,s,o){if(!Hg(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Z5(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(c6(i)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function _d(n,e,t,r){return n instanceof ff?function(s,o,c,l){if(!Hg(s.precondition,o))return c;const h=s.value.clone(),f=X5(s.fieldTransforms,l,o);return h.setAll(f),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Oa?function(s,o,c,l){if(!Hg(s.precondition,o))return c;const h=X5(s.fieldTransforms,l,o),f=o.data;return f.setAll(c6(s)),f.setAll(h),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(s,o,c){return Hg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function kz(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=r6(r.transform,i||null);s!=null&&(t===null&&(t=Hr.empty()),t.set(r.field,s))}return t||null}function Y5(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&pu(r,i,(s,o)=>xz(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ff extends vm{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oa extends vm{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function c6(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Z5(n,e,t){const r=new Map;Bt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,Rz(o,c,t[i]))}return r}function X5(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,Tz(s,o,e))}return r}class bm extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nz extends vm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Oz(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_d(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_d(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=t6();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=t.has(i.key)?null:c;const l=a6(o,c);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(He.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yt())}isEqual(e){return this.batchId===e.batchId&&pu(this.mutations,e.mutations,(t,r)=>Y5(t,r))&&pu(this.baseMutations,e.baseMutations,(t,r)=>Y5(t,r))}}class Ab{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Bt(e.mutations.length===r.length);let i=function(){return bz}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ab(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mz{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dn,Tt;function Uz(n){switch(n){default:return Be();case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0}}function l6(n){if(n===void 0)return vo("GRPC error has no .code"),le.UNKNOWN;switch(n){case Dn.OK:return le.OK;case Dn.CANCELLED:return le.CANCELLED;case Dn.UNKNOWN:return le.UNKNOWN;case Dn.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Dn.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Dn.INTERNAL:return le.INTERNAL;case Dn.UNAVAILABLE:return le.UNAVAILABLE;case Dn.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Dn.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Dn.NOT_FOUND:return le.NOT_FOUND;case Dn.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Dn.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Dn.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Dn.ABORTED:return le.ABORTED;case Dn.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Dn.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Dn.DATA_LOSS:return le.DATA_LOSS;default:return Be()}}(Tt=Dn||(Dn={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $z(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vz=new Cc([4294967295,4294967295],0);function eS(n){const e=$z().encode(n),t=new D4;return t.update(e),new Uint8Array(t.digest())}function tS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Cc([t,r],0),new Cc([i,s],0)]}class Sb{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ld(`Invalid padding: ${t}`);if(r<0)throw new ld(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ld(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ld(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Cc.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Cc.fromNumber(r)));return i.compare(Vz)===1&&(i=new Cc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=eS(e),[r,i]=tS(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Sb(s,i,t);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Te===0)return;const t=eS(e),[r,i]=tS(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class ld extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,pf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Em(He.min(),i,new hn(bt),bo(),yt())}}class pf{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new pf(r,t,yt(),yt(),yt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class u6{constructor(e,t){this.targetId=e,this.me=t}}class h6{constructor(e,t,r=rr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class nS{constructor(){this.fe=0,this.ge=rS(),this.pe=rr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=yt(),t=yt(),r=yt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Be()}}),new pf(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=rS()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Fz{constructor(e){this.Le=e,this.Be=new Map,this.ke=bo(),this.qe=tg(),this.Qe=tg(),this.Ke=new hn(bt)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Be()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const s=i.target;if(q_(s))if(r===0){const o=new ke(s.path);this.We(t,o,fr.newNoDocument(o,He.min()))}else Bt(r===1);else{const o=this.Ze(t);if(o!==r){const c=this.Xe(e),l=c?this.et(c,e,o):1;if(l!==0){this.He(t);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,c;try{o=_a(r).toUint8Array()}catch(l){if(l instanceof q4)return fu("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new Sb(o,i,s)}catch(l){return fu(l instanceof ld?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Te===0?null:c}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((s,o)=>{const c=this.Ye(o);if(c){if(s.current&&q_(c.target)){const l=new ke(c.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,fr.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=yt();this.Qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{const h=this.Ye(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Em(e,t,this.Ke,this.ke,r);return this.ke=bo(),this.qe=tg(),this.Qe=tg(),this.Ke=new hn(bt),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new nS,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Bn(bt),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Bn(bt),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||Se("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new nS),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function tg(){return new hn(ke.comparator)}function rS(){return new hn(ke.comparator)}const Bz={asc:"ASCENDING",desc:"DESCENDING"},jz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qz={and:"AND",or:"OR"};class Hz{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function W_(n,e){return n.useProto3Json||fm(e)?e:{value:e}}function y0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d6(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Wz(n,e){return y0(n,e.toTimestamp())}function xs(n){return Bt(!!n),He.fromTimestamp(function(t){const r=wa(t);return new Fn(r.seconds,r.nanos)}(n))}function Tb(n,e){return z_(n,e).canonicalString()}function z_(n,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function f6(n){const e=Qt.fromString(n);return Bt(w6(e)),e}function G_(n,e){return Tb(n.databaseId,e.path)}function Yy(n,e){const t=f6(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(g6(t))}function p6(n,e){return Tb(n.databaseId,e)}function zz(n){const e=f6(n);return e.length===4?Qt.emptyPath():g6(e)}function K_(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function g6(n){return Bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function iS(n,e,t){return{name:G_(n,e),fields:t.value.mapValue.fields}}function Gz(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Be()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,f){return h.useProto3Json?(Bt(f===void 0||typeof f=="string"),rr.fromBase64String(f||"")):(Bt(f===void 0||f instanceof Buffer||f instanceof Uint8Array),rr.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const f=h.code===void 0?le.UNKNOWN:l6(h.code);return new _e(f,h.message||"")}(o);t=new h6(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yy(n,r.document.name),s=xs(r.document.updateTime),o=r.document.createTime?xs(r.document.createTime):He.min(),c=new Hr({mapValue:{fields:r.document.fields}}),l=fr.newFoundDocument(i,s,o,c),h=r.targetIds||[],f=r.removedTargetIds||[];t=new Wg(h,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yy(n,r.document),s=r.readTime?xs(r.readTime):He.min(),o=fr.newNoDocument(i,s),c=r.removedTargetIds||[];t=new Wg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yy(n,r.document),s=r.removedTargetIds||[];t=new Wg([],s,i,null)}else{if(!("filter"in e))return Be();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Lz(i,s),c=r.targetId;t=new u6(c,o)}}return t}function Kz(n,e){let t;if(e instanceof ff)t={update:iS(n,e.key,e.value)};else if(e instanceof bm)t={delete:G_(n,e.key)};else if(e instanceof Oa)t={update:iS(n,e.key,e.data),updateMask:rG(e.fieldMask)};else{if(!(e instanceof Nz))return Be();t={verify:G_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const c=o.transform;if(c instanceof Fd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Bd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof jd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof m0)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw Be()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Wz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Be()}(n,e.precondition)),t}function Qz(n,e){return n&&n.length>0?(Bt(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?xs(i.updateTime):xs(s);return o.isEqual(He.min())&&(o=xs(s)),new Pz(o,i.transformResults||[])}(t,e))):[]}function Jz(n,e){return{documents:[p6(n,e.path)]}}function Yz(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=p6(n,i);const s=function(h){if(h.length!==0)return y6(Xi.create(h,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(f=>function(y){return{field:Vl(y.field),direction:eG(y.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const c=W_(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ct:t,parent:i}}function Zz(n){let e=zz(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Bt(r===1);const f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(m){const y=m6(m);return y instanceof Xi&&G4(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(y=>function(I){return new Vd(Fl(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(m){let y;return y=typeof m=="object"?m.value:m,fm(y)?null:y}(t.limit));let l=null;t.startAt&&(l=function(m){const y=!!m.before,w=m.values||[];return new yu(w,y)}(t.startAt));let h=null;return t.endAt&&(h=function(m){const y=!m.before,w=m.values||[];return new yu(w,y)}(t.endAt)),mz(e,i,o,s,c,"F",l,h)}function Xz(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Be()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function m6(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Fl(t.unaryFilter.field);return Mn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fl(t.unaryFilter.field);return Mn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Fl(t.unaryFilter.field);return Mn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Fl(t.unaryFilter.field);return Mn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Be()}}(n):n.fieldFilter!==void 0?function(t){return Mn.create(Fl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Be()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xi.create(t.compositeFilter.filters.map(r=>m6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Be()}}(t.compositeFilter.op))}(n):Be()}function eG(n){return Bz[n]}function tG(n){return jz[n]}function nG(n){return qz[n]}function Vl(n){return{fieldPath:n.canonicalString()}}function Fl(n){return tr.fromServerFormat(n.fieldPath)}function y6(n){return n instanceof Mn?function(t){if(t.op==="=="){if(W5(t.value))return{unaryFilter:{field:Vl(t.field),op:"IS_NAN"}};if(H5(t.value))return{unaryFilter:{field:Vl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(W5(t.value))return{unaryFilter:{field:Vl(t.field),op:"IS_NOT_NAN"}};if(H5(t.value))return{unaryFilter:{field:Vl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vl(t.field),op:tG(t.op),value:t.value}}}(n):n instanceof Xi?function(t){const r=t.getFilters().map(i=>y6(i));return r.length===1?r[0]:{compositeFilter:{op:nG(t.op),filters:r}}}(n):Be()}function rG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function w6(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,r,i,s=He.min(),o=He.min(),c=rr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iG{constructor(e){this.ht=e}}function sG(n){const e=Zz({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?g0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oG{constructor(){this.ln=new aG}addToCollectionParentIndex(e,t){return this.ln.add(t),de.resolve()}getCollectionParents(e,t){return de.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return de.resolve()}deleteFieldIndex(e,t){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,t){return de.resolve()}getDocumentsMatchingTarget(e,t){return de.resolve(null)}getIndexType(e,t){return de.resolve(0)}getFieldIndexes(e,t){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,t){return de.resolve(ya.min())}getMinOffsetFromCollectionGroup(e,t){return de.resolve(ya.min())}updateCollectionGroup(e,t,r){return de.resolve()}updateIndexEntries(e,t){return de.resolve()}}class aG{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bn(Qt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Fr{static withCacheSize(e){return new Fr(e,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new wu(0)}static Qn(){return new wu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS([n,e],[t,r]){const i=bt(n,t);return i===0?bt(e,r):i}class cG{constructor(e){this.Gn=e,this.buffer=new Bn(oS),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();oS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lG{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Se("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wu(t)?Se("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await Hu(t)}await this.Yn(3e5)})}}class uG{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return de.resolve(dm.oe);const r=new cG(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Se("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(sS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sS):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,s,o,c,l,h;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,c=Date.now(),this.removeTargets(e,r,t))).next(m=>(s=m,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),Ul()<=mt.DEBUG&&Se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(l-c)+`ms
	Removed ${m} documents in `+(h-l)+`ms
Total Duration: ${h-f}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function hG(n,e){return new uG(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dG{constructor(){this.changes=new Kc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?de.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_d(r.mutation,i,oi.empty(),Fn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,yt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=yt()){const i=Ec();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=cd();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Ec();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,yt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,r,i){let s=bo();const o=wd(),c=function(){return wd()}();return t.forEach((l,h)=>{const f=r.get(h.key);i.has(h.key)&&(f===void 0||f.mutation instanceof Oa)?s=s.insert(h.key,h):f!==void 0?(o.set(h.key,f.mutation.getFieldMask()),_d(f.mutation,h,f.mutation.getFieldMask(),Fn.now())):o.set(h.key,oi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,f)=>o.set(h,f)),t.forEach((h,f)=>{var m;return c.set(h,new fG(f,(m=o.get(h))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,t){const r=wd();let i=new hn((o,c)=>o-c),s=yt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const c of o)c.keys().forEach(l=>{const h=t.get(l);if(h===null)return;let f=r.get(l)||oi.empty();f=c.applyToLocalView(h,f),r.set(l,f);const m=(i.get(c.batchId)||yt()).add(l);i=i.insert(c.batchId,m)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const l=c.getNext(),h=l.key,f=l.value,m=t6();f.forEach(y=>{if(!s.has(y)){const w=a6(t.get(y),r.get(y));w!==null&&m.set(y,w),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return de.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ke.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Eb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):de.resolve(Ec());let c=-1,l=s;return o.next(h=>de.forEach(h,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(f)?de.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{l=l.insert(f,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,yt())).next(f=>({batchId:c,changes:e6(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next(r=>{let i=cd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=cd();return this.indexManager.getCollectionParents(e,s).next(c=>de.forEach(c,l=>{const h=function(m,y){return new Gc(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,h)=>{const f=h.getKey();o.get(f)===null&&(o=o.insert(f,fr.newInvalidDocument(f)))});let c=cd();return o.forEach((l,h)=>{const f=s.get(l);f!==void 0&&_d(f.mutation,h,oi.empty(),Fn.now()),wm(t,h)&&(c=c.insert(l,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return de.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:xs(i.createTime)}}(t)),de.resolve()}getNamedQuery(e,t){return de.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:sG(i.bundledQuery),readTime:xs(i.readTime)}}(t)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mG{constructor(){this.overlays=new hn(ke.comparator),this.Er=new Map}getOverlay(e,t){return de.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ec();return de.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.Tt(e,t,s)}),de.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),de.resolve()}getOverlaysForCollection(e,t,r){const i=Ec(),s=t.length+1,o=new ke(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const l=c.getNext().value,h=l.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return de.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new hn((h,f)=>h-f);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let f=s.get(h.largestBatchId);f===null&&(f=Ec(),s=s.insert(h.largestBatchId,f)),f.set(h.getKey(),h)}}const c=Ec(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,f)=>c.set(h,f)),!(c.size()>=i)););return de.resolve(c)}Tt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Mz(t,r));let s=this.Er.get(t);s===void 0&&(s=yt(),this.Er.set(t,s)),this.Er.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(){this.sessionToken=rr.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(){this.dr=new Bn(Wn.Ar),this.Rr=new Bn(Wn.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Wn(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Wn(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new ke(new Qt([])),r=new Wn(t,e),i=new Wn(t,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ke(new Qt([])),r=new Wn(t,e),i=new Wn(t,e+1);let s=yt();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Wn(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Wn{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ke.comparator(e.key,t.key)||bt(e.br,t.br)}static Vr(e,t){return bt(e.br,t.br)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wG{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Bn(Wn.Ar)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Dz(s,t,r,i);this.mutationQueue.push(o);for(const c of i)this.vr=this.vr.add(new Wn(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,t){return de.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Fr(r),s=i<0?0:i;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wn(t,0),i=new Wn(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const c=this.Cr(o.br);s.push(c)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(bt);return t.forEach(i=>{const s=new Wn(i,0),o=new Wn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],c=>{r=r.add(c.br)})}),de.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ke.isDocumentKey(s)||(s=s.child(""));const o=new Wn(new ke(s),0);let c=new Bn(bt);return this.vr.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(l.br)),!0)},o),de.resolve(this.Mr(c))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Bt(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return de.forEach(t.mutations,i=>{const s=new Wn(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Wn(t,0),i=this.vr.firstAfterOrEqual(r);return de.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _G{constructor(e){this.Nr=e,this.docs=function(){return new hn(ke.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return de.resolve(r?r.document.mutableCopy():fr.newInvalidDocument(t))}getEntries(e,t){let r=bo();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fr.newInvalidDocument(i))}),de.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=bo();const o=t.path,c=new ke(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){const{key:h,value:{document:f}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||QW(KW(f),r)<=0||(i.has(f.key)||wm(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Be()}Lr(e,t){return de.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new vG(this)}getSize(e){return de.resolve(this.size)}}class vG extends dG{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),de.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bG{constructor(e){this.persistence=e,this.Br=new Kc(t=>vb(t),bb),this.lastRemoteSnapshotVersion=He.min(),this.highestTargetId=0,this.kr=0,this.qr=new Rb,this.targetCount=0,this.Qr=wu.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),de.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new wu(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,de.resolve()}updateTargetData(e,t){return this.Un(t),de.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Br.forEach((o,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),de.waitFor(s).next(()=>i)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return de.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),de.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),de.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return de.resolve(r)}containsKey(e,t){return de.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e,t){this.Kr={},this.overlays={},this.$r=new dm(0),this.Ur=!1,this.Ur=!0,this.Wr=new yG,this.referenceDelegate=e(this),this.Gr=new bG(this),this.indexManager=new oG,this.remoteDocumentCache=function(i){return new _G(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new iG(t),this.jr=new gG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mG,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new wG(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Se("MemoryPersistence","Starting transaction:",e);const i=new EG(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,t){return de.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class EG extends YW{constructor(e){super(),this.currentSequenceNumber=e}}class Cb{constructor(e){this.persistence=e,this.Zr=new Rb,this.Xr=null}static ei(e){return new Cb(e)}get ti(){if(this.Xr)return this.Xr;throw Be()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),de.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),de.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),de.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.ti,r=>{const i=ke.fromPath(r);return this.ni(e,i).next(s=>{s||t.removeEntry(i,He.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return de.or([()=>de.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class w0{constructor(e,t){this.persistence=e,this.ri=new Kc(r=>ez(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=hG(this,t)}static ei(e,t){return new w0(e,t)}Hr(){}Jr(e){return de.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return de.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?de.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(e,o=>this.ir(e,o,t).next(c=>{c||(r++,s.removeEntry(o,He.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),de.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),de.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),de.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jg(e.data.value)),t}ir(e,t,r){return de.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return de.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=yt(),i=yt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new xb(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IG{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return mj()?8:ZW(mr())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new IG;return this.ts(e,t,o).next(c=>{if(s.result=c,this.Hi)return this.ns(e,t,o,c.size)})}).next(()=>s.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Ul()<=mt.DEBUG&&Se("QueryEngine","SDK will not create cache indexes for query:",$l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),de.resolve()):(Ul()<=mt.DEBUG&&Se("QueryEngine","Query:",$l(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Ul()<=mt.DEBUG&&Se("QueryEngine","The SDK decides to create cache indexes for query:",$l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cs(t))):de.resolve())}Xi(e,t){if(Q5(t))return de.resolve(null);let r=Cs(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=g0(t,null,"F"),r=Cs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=yt(...s);return this.Zi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.rs(t,c);return this.ss(t,h,o,l.readTime)?this.Xi(e,g0(t,null,"F")):this.os(e,h,t,l)}))})))}es(e,t,r,i){return Q5(t)||i.isEqual(He.min())?de.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(t,s);return this.ss(t,o,r,i)?de.resolve(null):(Ul()<=mt.DEBUG&&Se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$l(t)),this.os(e,o,t,GW(i,-1)).next(c=>c))})}rs(e,t){let r=new Bn(Z4(e));return t.forEach((i,s)=>{wm(e,s)&&(r=r.add(s))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,t,r){return Ul()<=mt.DEBUG&&Se("QueryEngine","Using full collection scan to execute query:",$l(t)),this.Zi.getDocumentsMatchingQuery(e,t,ya.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SG{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new hn(bt),this.cs=new Kc(s=>vb(s),bb),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pG(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function TG(n,e,t,r){return new SG(n,e,t,r)}async function v6(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],c=[];let l=yt();for(const h of i){o.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}for(const h of s){c.push(h.batchId);for(const f of h.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(r,l).next(h=>({Ts:h,removedBatchIds:o,addedBatchIds:c}))})})}function RG(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.hs.newChangeBuffer({trackRemovals:!0});return function(c,l,h,f){const m=h.batch,y=m.keys();let w=de.resolve();return y.forEach(I=>{w=w.next(()=>f.getEntry(l,I)).next(T=>{const A=h.docVersions.get(I);Bt(A!==null),T.version.compareTo(A)<0&&(m.applyToRemoteDocument(T,h),T.isValidDocument()&&(T.setReadTime(h.commitVersion),f.addEntry(T)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(l,m))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let l=yt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(l=l.add(c.batch.mutations[h].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function b6(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function CG(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const c=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;c.push(t.Gr.removeMatchingKeys(s,f.removedDocuments,m).next(()=>t.Gr.addMatchingKeys(s,f.addedDocuments,m)));let w=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(rr.EMPTY_BYTE_STRING,He.min()).withLastLimboFreeSnapshotVersion(He.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),i=i.insert(m,w),function(T,A,L){return T.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(y,w,f)&&c.push(t.Gr.updateTargetData(s,w))});let l=bo(),h=yt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(xG(s,o,e.documentUpdates).next(f=>{l=f.Is,h=f.Es})),!r.isEqual(He.min())){const f=t.Gr.getLastRemoteSnapshotVersion(s).next(m=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));c.push(f)}return de.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(t.us=i,s))}function xG(n,e,t){let r=yt(),i=yt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=bo();return t.forEach((c,l)=>{const h=s.get(c);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),l.isNoDocument()&&l.version.isEqual(He.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):Se("LocalStore","Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",l.version)}),{Is:o,Es:i}})}function PG(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OG(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(s=>s?(i=s,de.resolve(i)):t.Gr.allocateTargetId(r).next(o=>(i=new sa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function Q_(n,e,t){const r=Qe(n),i=r.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Wu(o))throw o;Se("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function aS(n,e,t){const r=Qe(n);let i=He.min(),s=yt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,f){const m=Qe(l),y=m.cs.get(f);return y!==void 0?de.resolve(m.us.get(y)):m.Gr.getTargetData(h,f)}(r,o,Cs(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,t?i:He.min(),t?s:yt())).next(c=>(kG(r,wz(e),c),{documents:c,ds:s})))}function kG(n,e,t){let r=n.ls.get(e)||He.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ls.set(e,r)}class cS{constructor(){this.activeTargetIds=Az()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NG{constructor(){this._o=new cS,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new cS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DG{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Se("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Se("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ng=null;function Zy(){return ng===null?ng=function(){return 268435456+Math.round(2147483648*Math.random())}():ng++,"0x"+ng.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LG{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="WebChannelConnection";class UG extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(t,r,i,s,o){const c=Zy(),l=this.No(t,r.toUriEncodedString());Se("RestConnection",`Sending RPC '${t}' ${c}:`,l,i);const h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(h,s,o),this.Bo(t,l,h,i).then(f=>(Se("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw fu("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",i),f})}ko(t,r,i,s,o,c){return this.Oo(t,r,i,s,o)}Lo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}No(t,r){const i=MG[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const s=Zy();return new Promise((o,c)=>{const l=new M4;l.setWithCredentials(!0),l.listenOnce(L4.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Bg.NO_ERROR:const f=l.getResponseJson();Se(ur,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Bg.TIMEOUT:Se(ur,`RPC '${e}' ${s} timed out`),c(new _e(le.DEADLINE_EXCEEDED,"Request time out"));break;case Bg.HTTP_ERROR:const m=l.getStatus();if(Se(ur,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);const w=y?.error;if(w&&w.status&&w.message){const I=function(A){const L=A.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(L)>=0?L:le.UNKNOWN}(w.status);c(new _e(I,w.message))}else c(new _e(le.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new _e(le.UNAVAILABLE,"Connection failed."));break;default:Be()}}finally{Se(ur,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);Se(ur,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}qo(e,t,r){const i=Zy(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=V4(),c=$4(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const f=s.join("");Se(ur,`Creating RPC '${e}' stream ${i}: ${f}`,l);const m=o.createWebChannel(f,l);let y=!1,w=!1;const I=new LG({Eo:A=>{w?Se(ur,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(y||(Se(ur,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),Se(ur,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},Ao:()=>m.close()}),T=(A,L,D)=>{A.listen(L,C=>{try{D(C)}catch(k){setTimeout(()=>{throw k},0)}})};return T(m,ad.EventType.OPEN,()=>{w||(Se(ur,`RPC '${e}' stream ${i} transport opened.`),I.So())}),T(m,ad.EventType.CLOSE,()=>{w||(w=!0,Se(ur,`RPC '${e}' stream ${i} transport closed`),I.Do())}),T(m,ad.EventType.ERROR,A=>{w||(w=!0,fu(ur,`RPC '${e}' stream ${i} transport errored:`,A),I.Do(new _e(le.UNAVAILABLE,"The operation could not be completed")))}),T(m,ad.EventType.MESSAGE,A=>{var L;if(!w){const D=A.data[0];Bt(!!D);const C=D,k=C?.error||((L=C[0])===null||L===void 0?void 0:L.error);if(k){Se(ur,`RPC '${e}' stream ${i} received error:`,k);const P=k.status;let O=function(R){const N=Dn[R];if(N!==void 0)return l6(N)}(P),g=k.message;O===void 0&&(O=le.INTERNAL,g="Unknown error status: "+P+" with message "+k.message),w=!0,I.Do(new _e(O,g)),m.close()}else Se(ur,`RPC '${e}' stream ${i} received:`,D),I.vo(D)}}),T(c,U4.STAT_EVENT,A=>{A.stat===V_.PROXY?Se(ur,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===V_.NOPROXY&&Se(ur,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.bo()},0),I}}function Xy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n){return new Hz(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e,t,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&Se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t,r,i,s,o,c,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new E6(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(vo(t.toString()),vo("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new _e(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Se("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Se("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $G extends I6{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=Gz(this.serializer,e),r=function(s){if(!("targetChange"in s))return He.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?He.min():o.readTime?xs(o.readTime):He.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=K_(this.serializer),t.addTarget=function(s,o){let c;const l=o.target;if(c=q_(l)?{documents:Jz(s,l)}:{query:Yz(s,l).ct},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=d6(s,o.resumeToken);const h=W_(s,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(He.min())>0){c.readTime=y0(s,o.snapshotVersion.toTimestamp());const h=W_(s,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=Xz(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=K_(this.serializer),t.removeTarget=e,this.c_(t)}}class VG extends I6{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,Bt(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Qz(e.writeResults,e.commitTime),r=xs(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=K_(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Kz(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,z_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _e(le.UNKNOWN,s.toString())})}ko(e,t,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.ko(e,z_(t,r),i,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(le.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class BG{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(vo(t),this.C_=!1):Se("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jG{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Qc(this)&&(Se("RemoteStore","Restarting streams for network reachability change."),await async function(l){const h=Qe(l);h.k_.add(4),await gf(h),h.K_.set("Unknown"),h.k_.delete(4),await Am(h)}(this))})}),this.K_=new BG(r,i)}}async function Am(n){if(Qc(n))for(const e of n.q_)await e(!0)}async function gf(n){for(const e of n.q_)await e(!1)}function A6(n,e){const t=Qe(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Nb(t)?kb(t):zu(t).s_()&&Ob(t,e))}function Pb(n,e){const t=Qe(n),r=zu(t);t.B_.delete(e),r.s_()&&S6(t,e),t.B_.size===0&&(r.s_()?r.a_():Qc(t)&&t.K_.set("Unknown"))}function Ob(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(He.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zu(n).V_(e)}function S6(n,e){n.U_.xe(e),zu(n).m_(e)}function kb(n){n.U_=new Fz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),zu(n).start(),n.K_.F_()}function Nb(n){return Qc(n)&&!zu(n).i_()&&n.B_.size>0}function Qc(n){return Qe(n).k_.size===0}function T6(n){n.U_=void 0}async function qG(n){n.K_.set("Online")}async function HG(n){n.B_.forEach((e,t)=>{Ob(n,e)})}async function WG(n,e){T6(n),Nb(n)?(n.K_.O_(e),kb(n)):n.K_.set("Unknown")}async function zG(n,e,t){if(n.K_.set("Online"),e instanceof h6&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const c of s.targetIds)i.B_.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.B_.delete(c),i.U_.removeTarget(c))}(n,e)}catch(r){Se("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _0(n,r)}else if(e instanceof Wg?n.U_.$e(e):e instanceof u6?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(He.min()))try{const r=await b6(n.localStore);t.compareTo(r)>=0&&await function(s,o){const c=s.U_.it(o);return c.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.B_.get(h);f&&s.B_.set(h,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,h)=>{const f=s.B_.get(l);if(!f)return;s.B_.set(l,f.withResumeToken(rr.EMPTY_BYTE_STRING,f.snapshotVersion)),S6(s,l);const m=new sa(f.target,l,h,f.sequenceNumber);Ob(s,m)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t)}catch(r){Se("RemoteStore","Failed to raise snapshot:",r),await _0(n,r)}}async function _0(n,e,t){if(!Wu(e))throw e;n.k_.add(1),await gf(n),n.K_.set("Offline"),t||(t=()=>b6(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Se("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Am(n)})}function R6(n,e){return e().catch(t=>_0(n,t,e))}async function Sm(n){const e=Qe(n),t=ba(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;GG(e);)try{const i=await PG(e.localStore,r);if(i===null){e.L_.length===0&&t.a_();break}r=i.batchId,KG(e,i)}catch(i){await _0(e,i)}C6(e)&&x6(e)}function GG(n){return Qc(n)&&n.L_.length<10}function KG(n,e){n.L_.push(e);const t=ba(n);t.s_()&&t.f_&&t.g_(e.mutations)}function C6(n){return Qc(n)&&!ba(n).i_()&&n.L_.length>0}function x6(n){ba(n).start()}async function QG(n){ba(n).w_()}async function JG(n){const e=ba(n);for(const t of n.L_)e.g_(t.mutations)}async function YG(n,e,t){const r=n.L_.shift(),i=Ab.from(r,e,t);await R6(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Sm(n)}async function ZG(n,e){e&&ba(n).f_&&await async function(r,i){if(function(o){return Uz(o)&&o!==le.ABORTED}(i.code)){const s=r.L_.shift();ba(r).__(),await R6(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Sm(r)}}(n,e),C6(n)&&x6(n)}async function uS(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),Se("RemoteStore","RemoteStore received new credentials");const r=Qc(t);t.k_.add(3),await gf(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Am(t)}async function XG(n,e){const t=Qe(n);e?(t.k_.delete(2),await Am(t)):e||(t.k_.add(2),await gf(t),t.K_.set("Unknown"))}function zu(n){return n.W_||(n.W_=function(t,r,i){const s=Qe(t);return s.b_(),new $G(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:qG.bind(null,n),mo:HG.bind(null,n),po:WG.bind(null,n),R_:zG.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Nb(n)?kb(n):n.K_.set("Unknown")):(await n.W_.stop(),T6(n))})),n.W_}function ba(n){return n.G_||(n.G_=function(t,r,i){const s=Qe(t);return s.b_(),new VG(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:QG.bind(null,n),po:ZG.bind(null,n),p_:JG.bind(null,n),y_:YG.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Sm(n)):(await n.G_.stop(),n.L_.length>0&&(Se("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,c=new Db(e,t,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mb(n,e){if(vo("AsyncQueue",`${e}: ${n}`),Wu(n))return new _e(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{static emptySet(e){return new tu(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ke.comparator(t.key,r.key):(t,r)=>ke.comparator(t.key,r.key),this.keyedMap=cd(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof tu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new tu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(){this.z_=new hn(ke.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Be():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class _u{constructor(e,t,r,i,s,o,c,l,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new _u(e,t,tu.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eK{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class tK{constructor(){this.queries=dS(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const i=Qe(t),s=i.queries;i.queries=dS(),s.forEach((o,c)=>{for(const l of c.J_)l.onError(r)})})(this,new _e(le.ABORTED,"Firestore shutting down"))}}function dS(){return new Kc(n=>Y4(n),ym)}async function Lb(n,e){const t=Qe(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new eK,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await t.onListen(i,!0);break;case 1:s.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){const c=Mb(o,`Initialization of query '${$l(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&$b(t)}async function Ub(n,e){const t=Qe(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function nK(n,e){const t=Qe(n);let r=!1;for(const i of e){const s=i.query,o=t.queries.get(s);if(o){for(const c of o.J_)c.ta(i)&&(r=!0);o.H_=i}}r&&$b(t)}function rK(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(t);r.queries.delete(e)}function $b(n){n.X_.forEach(e=>{e.next()})}var J_,fS;(fS=J_||(J_={})).na="default",fS.Cache="cache";class Vb{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new _u(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=_u.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==J_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e){this.key=e}}class O6{constructor(e){this.key=e}}class iK{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=yt(),this.mutatedKeys=yt(),this.Va=Z4(e),this.ma=new tu(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new hS,i=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,c=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),w=wm(this.query,m)?m:null,I=!!y&&this.mutatedKeys.has(y.key),T=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let A=!1;y&&w?y.data.isEqual(w.data)?I!==T&&(r.track({type:3,doc:w}),A=!0):this.ya(y,w)||(r.track({type:2,doc:w}),A=!0,(l&&this.Va(w,l)>0||h&&this.Va(w,h)<0)&&(c=!0)):!y&&w?(r.track({type:0,doc:w}),A=!0):y&&!w&&(r.track({type:1,doc:y}),A=!0,(l||h)&&(c=!0)),A&&(w?(o=o.add(w),s=T?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{ma:o,pa:r,ss:c,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((f,m)=>function(w,I){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Be()}};return T(w)-T(I)}(f.type,m.type)||this.Va(f.doc,m.doc)),this.wa(r),i=i!=null&&i;const c=t&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,h=l!==this.Aa;return this.Aa=l,o.length!==0||h?{snapshot:new _u(this.query,e.ma,s,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:c}:{ba:c}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new hS,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=yt(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new O6(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new P6(r))}),t}va(e){this.da=e.ds,this.Ra=yt();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return _u.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class sK{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class oK{constructor(e){this.key=e,this.Fa=!1}}class aK{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Kc(c=>Y4(c),ym),this.Oa=new Map,this.Na=new Set,this.La=new hn(ke.comparator),this.Ba=new Map,this.ka=new Rb,this.qa={},this.Qa=new Map,this.Ka=wu.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function cK(n,e,t=!0){const r=U6(n);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await k6(r,e,t,!0),i}async function lK(n,e){const t=U6(n);await k6(t,e,!0,!1)}async function k6(n,e,t,r){const i=await OG(n.localStore,Cs(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let c;return r&&(c=await uK(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&A6(n.remoteStore,i),c}async function uK(n,e,t,r,i){n.Ua=(m,y,w)=>async function(T,A,L,D){let C=A.view.ga(L);C.ss&&(C=await aS(T.localStore,A.query,!1).then(({documents:g})=>A.view.ga(g,C)));const k=D&&D.targetChanges.get(A.targetId),P=D&&D.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(C,T.isPrimaryClient,k,P);return gS(T,A.targetId,O.ba),O.snapshot}(n,m,y,w);const s=await aS(n.localStore,e,!0),o=new iK(e,s.ds),c=o.ga(s.documents),l=pf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=o.applyChanges(c,n.isPrimaryClient,l);gS(n,t,h.ba);const f=new sK(e,t,o);return n.xa.set(e,f),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),h.snapshot}async function hK(n,e,t){const r=Qe(n),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!ym(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Q_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Pb(r.remoteStore,i.targetId),Y_(r,i.targetId)}).catch(Hu)):(Y_(r,i.targetId),await Q_(r.localStore,i.targetId,!0))}async function dK(n,e){const t=Qe(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Pb(t.remoteStore,r.targetId))}async function fK(n,e,t){const r=vK(n);try{const i=await function(o,c){const l=Qe(o),h=Fn.now(),f=c.reduce((w,I)=>w.add(I.key),yt());let m,y;return l.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=bo(),T=yt();return l.hs.getEntries(w,f).next(A=>{I=A,I.forEach((L,D)=>{D.isValidDocument()||(T=T.add(L))})}).next(()=>l.localDocuments.getOverlayedDocuments(w,I)).next(A=>{m=A;const L=[];for(const D of c){const C=kz(D,m.get(D.key).overlayedDocument);C!=null&&L.push(new Oa(D.key,C,H4(C.value.mapValue),Rr.exists(!0)))}return l.mutationQueue.addMutationBatch(w,h,L,c)}).next(A=>{y=A;const L=A.applyToLocalDocumentSet(m,T);return l.documentOverlayCache.saveOverlays(w,A.batchId,L)})}).then(()=>({batchId:y.batchId,changes:e6(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,l){let h=o.qa[o.currentUser.toKey()];h||(h=new hn(bt)),h=h.insert(c,l),o.qa[o.currentUser.toKey()]=h}(r,i.batchId,t),await mf(r,i.changes),await Sm(r.remoteStore)}catch(i){const s=Mb(i,"Failed to persist write");t.reject(s)}}async function N6(n,e){const t=Qe(n);try{const r=await CG(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Ba.get(s);o&&(Bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Bt(o.Fa):i.removedDocuments.size>0&&(Bt(o.Fa),o.Fa=!1))}),await mf(t,r,e)}catch(r){await Hu(r)}}function pS(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.xa.forEach((s,o)=>{const c=o.view.ea(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const l=Qe(o);l.onlineState=c;let h=!1;l.queries.forEach((f,m)=>{for(const y of m.J_)y.ea(c)&&(h=!0)}),h&&$b(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function pK(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),s=i&&i.key;if(s){let o=new hn(ke.comparator);o=o.insert(s,fr.newNoDocument(s,He.min()));const c=yt().add(s),l=new Em(He.min(),new Map,new hn(bt),o,c);await N6(r,l),r.La=r.La.remove(s),r.Ba.delete(e),Fb(r)}else await Q_(r.localStore,e,!1).then(()=>Y_(r,e,t)).catch(Hu)}async function gK(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=await RG(t.localStore,e);M6(t,r,null),D6(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await mf(t,i)}catch(i){await Hu(i)}}async function mK(n,e,t){const r=Qe(n);try{const i=await function(o,c){const l=Qe(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let f;return l.mutationQueue.lookupMutationBatch(h,c).next(m=>(Bt(m!==null),f=m.keys(),l.mutationQueue.removeMutationBatch(h,m))).next(()=>l.mutationQueue.performConsistencyCheck(h)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(h,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,f)).next(()=>l.localDocuments.getDocuments(h,f))})}(r.localStore,e);M6(r,e,t),D6(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await mf(r,i)}catch(i){await Hu(i)}}function D6(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function M6(n,e,t){const r=Qe(n);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function Y_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||L6(n,r)})}function L6(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(Pb(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),Fb(n))}function gS(n,e,t){for(const r of t)r instanceof P6?(n.ka.addReference(r.key,e),yK(n,r)):r instanceof O6?(Se("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||L6(n,r.key)):Be()}function yK(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(Se("SyncEngine","New document in limbo: "+t),n.Na.add(r),Fb(n))}function Fb(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new ke(Qt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new oK(t)),n.La=n.La.insert(t,r),A6(n.remoteStore,new sa(Cs(mm(t.path)),r,"TargetPurposeLimboResolution",dm.oe))}}async function mf(n,e,t){const r=Qe(n),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((c,l)=>{o.push(r.Ua(l,e,t).then(h=>{var f;if((h||t)&&r.isPrimaryClient){const m=h?!h.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(l.targetId,m?"current":"not-current")}if(h){i.push(h);const m=xb.zi(l.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,h){const f=Qe(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>de.forEach(h,y=>de.forEach(y.Wi,w=>f.persistence.referenceDelegate.addReference(m,y.targetId,w)).next(()=>de.forEach(y.Gi,w=>f.persistence.referenceDelegate.removeReference(m,y.targetId,w)))))}catch(m){if(!Wu(m))throw m;Se("LocalStore","Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const w=f.us.get(y),I=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(I);f.us=f.us.insert(y,T)}}}(r.localStore,s))}async function wK(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){Se("SyncEngine","User change. New user:",e.toKey());const r=await v6(t.localStore,e);t.currentUser=e,function(s,o){s.Qa.forEach(c=>{c.forEach(l=>{l.reject(new _e(le.CANCELLED,o))})}),s.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await mf(t,r.Ts)}}function _K(n,e){const t=Qe(n),r=t.Ba.get(e);if(r&&r.Fa)return yt().add(r.key);{let i=yt();const s=t.Oa.get(e);if(!s)return i;for(const o of s){const c=t.xa.get(o);i=i.unionWith(c.view.fa)}return i}}function U6(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_K.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pK.bind(null,e),e.Ma.R_=nK.bind(null,e.eventManager),e.Ma.Wa=rK.bind(null,e.eventManager),e}function vK(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mK.bind(null,e),e}class v0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Im(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return TG(this.persistence,new AG,e.initialUser,this.serializer)}ja(e){return new _6(Cb.ei,this.serializer)}za(e){return new NG}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}v0.provider={build:()=>new v0};class bK extends v0{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Bt(this.persistence.referenceDelegate instanceof w0);const r=this.persistence.referenceDelegate.garbageCollector;return new lG(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new _6(r=>w0.ei(r,t),this.serializer)}}class Z_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>pS(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=wK.bind(null,this.syncEngine),await XG(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tK}()}createDatastore(e){const t=Im(e.databaseInfo.databaseId),r=function(s){return new UG(s)}(e.databaseInfo);return function(s,o,c,l){return new FG(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,o,c){return new jG(r,i,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>pS(this.syncEngine,t,0),function(){return lS.p()?new lS:new DG}())}createSyncEngine(e,t){return function(i,s,o,c,l,h,f){const m=new aK(i,s,o,c,l,h);return f&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=Qe(i);Se("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await gf(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Z_.provider={build:()=>new Z_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):vo("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=dr.UNAUTHENTICATED,this.clientId=B4.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Se("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Se("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Mb(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ew(n,e){n.asyncQueue.verifyOperationInProgress(),Se("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await v6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function mS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await IK(n);Se("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>uS(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>uS(e.remoteStore,i)),n._onlineComponents=e}async function IK(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Se("FirestoreClient","Using user provided OfflineComponentProvider");try{await ew(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;fu("Error using user provided cache. Falling back to memory cache: "+t),await ew(n,new v0)}}else Se("FirestoreClient","Using default OfflineComponentProvider"),await ew(n,new bK(void 0));return n._offlineComponents}async function $6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Se("FirestoreClient","Using user provided OnlineComponentProvider"),await mS(n,n._uninitializedComponentsProvider._online)):(Se("FirestoreClient","Using default OnlineComponentProvider"),await mS(n,new Z_))),n._onlineComponents}function AK(n){return $6(n).then(e=>e.syncEngine)}async function b0(n){const e=await $6(n),t=e.eventManager;return t.onListen=cK.bind(null,e.syncEngine),t.onUnlisten=hK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=lK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dK.bind(null,e.syncEngine),t}function SK(n,e,t={}){const r=new yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,c,l,h){const f=new Bb({next:y=>{f.eu(),o.enqueueAndForget(()=>Ub(s,m));const w=y.docs.has(c);!w&&y.fromCache?h.reject(new _e(le.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&y.fromCache&&l&&l.source==="server"?h.reject(new _e(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new Vb(mm(c.path),f,{includeMetadataChanges:!0,ua:!0});return Lb(s,m)}(await b0(n),n.asyncQueue,e,t,r)),r.promise}function TK(n,e,t={}){const r=new yo;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,c,l,h){const f=new Bb({next:y=>{f.eu(),o.enqueueAndForget(()=>Ub(s,m)),y.fromCache&&l.source==="server"?h.reject(new _e(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new Vb(c,f,{includeMetadataChanges:!0,ua:!0});return Lb(s,m)}(await b0(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(n,e,t){if(!t)throw new _e(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function RK(n,e,t,r){if(e===!0&&r===!0)throw new _e(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wS(n){if(!ke.isDocumentKey(n))throw new _e(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _S(n){if(ke.isDocumentKey(n))throw new _e(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Be()}function Cr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Tm(n);throw new _e(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function CK(n,e){if(e<=0)throw new _e(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _e(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=V6((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rm{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vS({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vS(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $W;switch(r.type){case"firstParty":return new jW(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=yS.get(t);r&&(Se("ComponentProvider","Removing Datastore"),yS.delete(t),r.terminate())}(this),Promise.resolve()}}function xK(n,e,t,r={}){var i;const s=(n=Cr(n,Rm))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&fu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let c,l;if(typeof r.mockUserToken=="string")c=r.mockUserToken,l=dr.MOCK_USER;else{c=KC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new _e(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new dr(h)}n._authCredentials=new VW(new F4(c,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vs(this.firestore,e,this._query)}}class gr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ua(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class ua extends Vs{constructor(e,t,r){super(e,t,mm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new ke(e))}withConverter(e){return new ua(this.firestore,e,this._path)}}function zme(n,e,...t){if(n=Nt(n),F6("collection","path",e),n instanceof Rm){const r=Qt.fromString(e,...t);return _S(r),new ua(n,null,r)}{if(!(n instanceof gr||n instanceof ua))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return _S(r),new ua(n.firestore,null,r)}}function PK(n,e,...t){if(n=Nt(n),arguments.length===1&&(e=B4.newId()),F6("doc","path",e),n instanceof Rm){const r=Qt.fromString(e,...t);return wS(r),new gr(n,null,new ke(r))}{if(!(n instanceof gr||n instanceof ua))throw new _e(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return wS(r),new gr(n.firestore,n instanceof ua?n.converter:null,new ke(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new E6(this,"async_queue_retry"),this.fu=()=>{const r=Xy();r&&Se("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Xy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Xy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new yo;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Wu(e))throw e;Se("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw vo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=Db.createAndSchedule(this,e,t,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&Be()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function ES(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class Ds extends Rm{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new bS,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bS(e),this._firestoreClient=void 0,await e}}}function Gme(n,e){const t=typeof n=="object"?n:cm(),r=typeof n=="string"?n:"(default)",i=xa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=WC("firestore");s&&xK(i,...s)}return i}function yf(n){if(n._terminated)throw new _e(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||OK(n),n._firestoreClient}function OK(n){var e,t,r;const i=n._freezeSettings(),s=function(c,l,h,f){return new rz(c,l,h,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,V6(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new EK(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(c){const l=c?._online.build();return{_offline:c?._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vu(rr.fromBase64String(e))}catch(t){throw new _e(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vu(rr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kK=/^__.*__$/;class NK{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms):new ff(e,this.data,t,this.fieldTransforms)}}class B6{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function j6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Be()}}class Hb{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Hb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return E0(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(j6(this.Mu)&&kK.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class DK{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Im(e)}$u(e,t,r,i=!1){return new Hb({Mu:e,methodName:t,Ku:r,path:tr.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(n){const e=n._freezeSettings(),t=Im(n._databaseId);return new DK(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Wb(n,e,t,r,i,s={}){const o=n.$u(s.merge||s.mergeFields?2:0,e,t,i);Gb("Data must be an object, but it was:",o,r);const c=z6(r,o);let l,h;if(s.merge)l=new oi(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=X_(e,m,t);if(!o.contains(y))throw new _e(le.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);K6(f,y)||f.push(y)}l=new oi(f),h=o.fieldTransforms.filter(m=>l.covers(m.field))}else l=null,h=o.fieldTransforms;return new NK(new Hr(c),l,h)}class xm extends Cm{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xm}}class zb extends Cm{_toFieldTransform(e){return new Cz(e.path,new Fd)}isEqual(e){return e instanceof zb}}function q6(n,e,t,r){const i=n.$u(1,e,t);Gb("Data must be an object, but it was:",i,r);const s=[],o=Hr.empty();Pa(r,(l,h)=>{const f=Kb(e,l,t);h=Nt(h);const m=i.Bu(f);if(h instanceof xm)s.push(f);else{const y=_f(h,m);y!=null&&(s.push(f),o.set(f,y))}});const c=new oi(s);return new B6(o,c,i.fieldTransforms)}function H6(n,e,t,r,i,s){const o=n.$u(1,e,t),c=[X_(e,r,t)],l=[i];if(s.length%2!=0)throw new _e(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)c.push(X_(e,s[y])),l.push(s[y+1]);const h=[],f=Hr.empty();for(let y=c.length-1;y>=0;--y)if(!K6(h,c[y])){const w=c[y];let I=l[y];I=Nt(I);const T=o.Bu(w);if(I instanceof xm)h.push(w);else{const A=_f(I,T);A!=null&&(h.push(w),f.set(w,A))}}const m=new oi(h);return new B6(f,m,o.fieldTransforms)}function W6(n,e,t,r=!1){return _f(t,n.$u(r?4:3,e))}function _f(n,e){if(G6(n=Nt(n)))return Gb("Unsupported field value:",e,n),z6(n,e);if(n instanceof Cm)return function(r,i){if(!j6(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const c of r){let l=_f(c,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Sz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Fn.fromDate(r);return{timestampValue:y0(i.serializer,s)}}if(r instanceof Fn){const s=new Fn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:y0(i.serializer,s)}}if(r instanceof jb)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vu)return{bytesValue:d6(i.serializer,r._byteString)};if(r instanceof gr){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Tb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof qb)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw c.qu("VectorValues must only contain numeric values.");return Ib(c.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Tm(r)}`)}(n,e)}function z6(n,e){const t={};return j4(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pa(n,(r,i)=>{const s=_f(i,e.Ou(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function G6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof jb||n instanceof vu||n instanceof gr||n instanceof Cm||n instanceof qb)}function Gb(n,e,t){if(!G6(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Tm(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function X_(n,e,t){if((e=Nt(e))instanceof wf)return e._internalPath;if(typeof e=="string")return Kb(n,e);throw E0("Field path arguments must be of type string or ",n,!1,void 0,t)}const MK=new RegExp("[~\\*/\\[\\]]");function Kb(n,e,t){if(e.search(MK)>=0)throw E0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new wf(...e.split("."))._internalPath}catch{throw E0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function E0(n,e,t,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new _e(le.INVALID_ARGUMENT,c+n+l)}function K6(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Pm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LK extends Qb{data(){return super.data()}}function Pm(n,e){return typeof e=="string"?Kb(n,e):e instanceof wf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jb{}class Om extends Jb{}function Kme(n,e,...t){let r=[];e instanceof Jb&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Yb).length,c=s.filter(l=>l instanceof km).length;if(o>1||o>0&&c>0)throw new _e(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class km extends Om{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new km(e,t,r)}_apply(e){const t=this._parse(e);return J6(e._query,t),new Vs(e.firestore,e.converter,H_(e._query,t))}_parse(e){const t=Gu(e.firestore);return function(s,o,c,l,h,f,m){let y;if(h.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new _e(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){AS(m,f);const w=[];for(const I of m)w.push(IS(l,s,I));y={arrayValue:{values:w}}}else y=IS(l,s,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||AS(m,f),y=W6(c,o,m,f==="in"||f==="not-in");return Mn.create(h,f,y)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Qme(n,e,t){const r=e,i=Pm("where",n);return km._create(i,r,t)}class Yb extends Jb{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Yb(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Xi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i;const c=s.getFlattenedFilters();for(const l of c)J6(o,l),o=H_(o,l)}(e._query,t),new Vs(e.firestore,e.converter,H_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Zb extends Om{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zb(e,t)}_apply(e){const t=function(i,s,o){if(i.startAt!==null)throw new _e(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _e(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vd(s,o)}(e._query,this._field,this._direction);return new Vs(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Gc(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function Jme(n,e="asc"){const t=e,r=Pm("orderBy",n);return Zb._create(r,t)}class Xb extends Om{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Xb(e,t,r)}_apply(e){return new Vs(e.firestore,e.converter,g0(e._query,this._limit,this._limitType))}}function Yme(n){return CK("limit",n),Xb._create("limit",n,"F")}class eE extends Om{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new eE(e,t,r)}_apply(e){const t=UK(e,this.type,this._docOrFields,this._inclusive);return new Vs(e.firestore,e.converter,function(i,s){return new Gc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function Zme(...n){return eE._create("startAfter",n,!1)}function UK(n,e,t,r){if(t[0]=Nt(t[0]),t[0]instanceof Qb)return function(s,o,c,l,h){if(!l)throw new _e(le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const m of eu(s))if(m.field.isKeyField())f.push(p0(o,l.key));else{const y=l.data.field(m.field);if(pm(y))throw new _e(le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(y===null){const w=m.field.canonicalString();throw new _e(le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}f.push(y)}return new yu(f,h)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Gu(n.firestore);return function(o,c,l,h,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new _e(le.INVALID_ARGUMENT,`Too many arguments provided to ${h}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let I=0;I<f.length;I++){const T=f[I];if(y[I].field.isKeyField()){if(typeof T!="string")throw new _e(le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${h}(), but got a ${typeof T}`);if(!Eb(o)&&T.indexOf("/")!==-1)throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${h}() must be a plain document ID, but '${T}' contains a slash.`);const A=o.path.child(Qt.fromString(T));if(!ke.isDocumentKey(A))throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${h}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const L=new ke(A);w.push(p0(c,L))}else{const A=W6(l,h,T);w.push(A)}}return new yu(w,m)}(n._query,n.firestore._databaseId,i,e,t,r)}}function IS(n,e,t){if(typeof(t=Nt(t))=="string"){if(t==="")throw new _e(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eb(e)&&t.indexOf("/")!==-1)throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!ke.isDocumentKey(r))throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return p0(n,new ke(r))}if(t instanceof gr)return p0(n,t._key);throw new _e(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tm(t)}.`)}function AS(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J6(n,e){const t=function(i,s){for(const o of i)for(const c of o.getFlattenedFilters())if(s.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new _e(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $K{convertValue(e,t="none"){switch(va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return An(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Be()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Pa(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>An(o.doubleValue));return new qb(s)}convertGeoPoint(e){return new jb(An(e.latitude),An(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ld(e));default:return null}}convertTimestamp(e){const t=wa(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);Bt(w6(r));const i=new Ud(r.get(1),r.get(3)),s=new ke(r.popFirst(5));return i.isEqual(t)||vo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y6 extends Qb{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Pm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class zg extends Y6{data(e={}){return super.data(e)}}class Z6{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ud(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zg(this._firestore,this._userDataWriter,r.key,r,new ud(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const l=new zg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ud(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{const l=new zg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ud(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,f=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:VK(c.type),doc:l,oldIndex:h,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function VK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Be()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xme(n){n=Cr(n,gr);const e=Cr(n.firestore,Ds);return SK(yf(e),n._key).then(t=>X6(e,n,t))}class nE extends $K{constructor(e){super(),this.firestore=e}convertBytes(e){return new vu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,t)}}function e1e(n){n=Cr(n,Vs);const e=Cr(n.firestore,Ds),t=yf(e),r=new nE(e);return Q6(n._query),TK(t,n._query).then(i=>new Z6(e,r,n,i))}function t1e(n,e,t){n=Cr(n,gr);const r=Cr(n.firestore,Ds),i=tE(n.converter,e,t);return vf(r,[Wb(Gu(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Rr.none())])}function n1e(n,e,t,...r){n=Cr(n,gr);const i=Cr(n.firestore,Ds),s=Gu(i);let o;return o=typeof(e=Nt(e))=="string"||e instanceof wf?H6(s,"updateDoc",n._key,e,t,r):q6(s,"updateDoc",n._key,e),vf(i,[o.toMutation(n._key,Rr.exists(!0))])}function r1e(n){return vf(Cr(n.firestore,Ds),[new bm(n._key,Rr.none())])}function i1e(n,e){const t=Cr(n.firestore,Ds),r=PK(n),i=tE(n.converter,e);return vf(t,[Wb(Gu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Rr.exists(!1))]).then(()=>r)}function s1e(n,...e){var t,r,i;n=Nt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ES(e[o])||(s=e[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ES(e[o])){const m=e[o];e[o]=(t=m.next)===null||t===void 0?void 0:t.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(i=m.complete)===null||i===void 0?void 0:i.bind(m)}let l,h,f;if(n instanceof gr)h=Cr(n.firestore,Ds),f=mm(n._key.path),l={next:m=>{e[o]&&e[o](X6(h,n,m))},error:e[o+1],complete:e[o+2]};else{const m=Cr(n,Vs);h=Cr(m.firestore,Ds),f=m._query;const y=new nE(h);l={next:w=>{e[o]&&e[o](new Z6(h,y,m,w))},error:e[o+1],complete:e[o+2]},Q6(n._query)}return function(y,w,I,T){const A=new Bb(T),L=new Vb(w,A,I);return y.asyncQueue.enqueueAndForget(async()=>Lb(await b0(y),L)),()=>{A.eu(),y.asyncQueue.enqueueAndForget(async()=>Ub(await b0(y),L))}}(yf(h),f,c,l)}function vf(n,e){return function(r,i){const s=new yo;return r.asyncQueue.enqueueAndForget(async()=>fK(await AK(r),i,s)),s.promise}(yf(n),e)}function X6(n,e,t){const r=t.docs.get(e._key),i=new nE(n);return new Y6(n,i,e._key,r,new ud(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FK{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Gu(e)}set(e,t,r){this._verifyNotCommitted();const i=tw(e,this._firestore),s=tE(i.converter,t,r),o=Wb(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Rr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=tw(e,this._firestore);let o;return o=typeof(t=Nt(t))=="string"||t instanceof wf?H6(this._dataReader,"WriteBatch.update",s._key,t,r,i):q6(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=tw(e,this._firestore);return this._mutations=this._mutations.concat(new bm(t._key,Rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function tw(n,e){if((n=Nt(n)).firestore!==e)throw new _e(le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function o1e(){return new zb("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1e(n){return yf(n=Cr(n,Ds)),new FK(n,e=>vf(n,e))}(function(e,t=!0){(function(i){qu=i})(zc),Zi(new Ui("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new Ds(new FW(r.getProvider("auth-internal")),new HW(r.getProvider("app-check-internal")),function(h,f){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new _e(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ud(h.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),li($5,"4.7.5",e),li($5,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="firebasestorage.googleapis.com",tx="storageBucket",BK=2*60*1e3,jK=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends $i{constructor(e,t,r=0){super(nw(e),`Firebase Storage: ${t} (${nw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var wn;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(wn||(wn={}));function nw(n){return"storage/"+n}function rE(){const n="An unknown error occurred, please check the error payload for server response.";return new _n(wn.UNKNOWN,n)}function qK(n){return new _n(wn.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function HK(n){return new _n(wn.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function WK(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _n(wn.UNAUTHENTICATED,n)}function zK(){return new _n(wn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function GK(n){return new _n(wn.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function KK(){return new _n(wn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QK(){return new _n(wn.CANCELED,"User canceled the upload/download.")}function JK(n){return new _n(wn.INVALID_URL,"Invalid URL '"+n+"'.")}function YK(n){return new _n(wn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function ZK(){return new _n(wn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tx+"' property when initializing the app?")}function XK(){return new _n(wn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function eQ(){return new _n(wn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function tQ(n){return new _n(wn.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ev(n){return new _n(wn.INVALID_ARGUMENT,n)}function nx(){return new _n(wn.APP_DELETED,"The Firebase app was deleted.")}function nQ(n){return new _n(wn.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vd(n,e){return new _n(wn.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Bh(n){throw new _n(wn.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ai.makeFromUrl(e,t)}catch{return new ai(e,"")}if(r.path==="")return r;throw YK(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function h(k){k.path_=decodeURIComponent(k.path)}const f="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",w=new RegExp(`^https?://${m}/${f}/b/${i}/o${y}`,"i"),I={bucket:1,path:3},T=t===ex?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",L=new RegExp(`^https?://${T}/${i}/${A}`,"i"),C=[{regex:c,indices:l,postModify:s},{regex:w,indices:I,postModify:h},{regex:L,indices:{bucket:1,path:2},postModify:h}];for(let k=0;k<C.length;k++){const P=C[k],O=P.regex.exec(e);if(O){const g=O[P.indices.bucket];let _=O[P.indices.path];_||(_=""),r=new ai(g,_),P.postModify(r);break}}if(r==null)throw JK(e);return r}}class rQ{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iQ(n,e,t){let r=1,i=null,s=null,o=!1,c=0;function l(){return c===2}let h=!1;function f(...A){h||(h=!0,e.apply(null,A))}function m(A){i=setTimeout(()=>{i=null,n(w,l())},A)}function y(){s&&clearTimeout(s)}function w(A,...L){if(h){y();return}if(A){y(),f.call(null,A,...L);return}if(l()||o){y(),f.call(null,A,...L);return}r<64&&(r*=2);let C;c===1?(c=2,C=0):C=(r+Math.random())*1e3,m(C)}let I=!1;function T(A){I||(I=!0,y(),!h&&(i!==null?(A||(c=2),clearTimeout(i),m(0)):A||(c=1)))}return m(0),s=setTimeout(()=>{o=!0,T(!0)},t),T}function sQ(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oQ(n){return n!==void 0}function aQ(n){return typeof n=="object"&&!Array.isArray(n)}function iE(n){return typeof n=="string"||n instanceof String}function SS(n){return sE()&&n instanceof Blob}function sE(){return typeof Blob<"u"}function TS(n,e,t,r){if(r<e)throw ev(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw ev(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function rx(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var xc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(xc||(xc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cQ(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lQ{constructor(e,t,r,i,s,o,c,l,h,f,m,y=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,I)=>{this.resolve_=w,this.reject_=I,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new rg(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=c=>{const l=c.loaded,h=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const c=s.getErrorCode()===xc.NO_ERROR,l=s.getStatus();if(!c||cQ(l,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===xc.ABORT;r(!1,new rg(!1,null,f));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new rg(h,s))})},t=(r,i)=>{const s=this.resolve_,o=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(c,c.getResponse());oQ(l)?s(l):s()}catch(l){o(l)}else if(c!==null){const l=rE();l.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,l)):o(l)}else if(i.canceled){const l=this.appDelete_?nx():QK();o(l)}else{const l=KK();o(l)}};this.canceled_?t(!1,new rg(!1,null,!0)):this.backoffId_=iQ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function uQ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function hQ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function dQ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function fQ(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function pQ(n,e,t,r,i,s,o=!0){const c=rx(n.urlParams),l=n.url+c,h=Object.assign({},n.headers);return dQ(h,e),uQ(h,t),hQ(h,s),fQ(h,r),new lQ(l,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQ(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function mQ(...n){const e=gQ();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(sE())return new Blob(n);throw new _n(wn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function yQ(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wQ(n){if(typeof atob>"u")throw tQ("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rw{constructor(e,t){this.data=e,this.contentType=t||null}}function _Q(n,e){switch(n){case Is.RAW:return new rw(ix(e));case Is.BASE64:case Is.BASE64URL:return new rw(sx(n,e));case Is.DATA_URL:return new rw(bQ(e),EQ(e))}throw rE()}function ix(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=n.charCodeAt(++t);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function vQ(n){let e;try{e=decodeURIComponent(n)}catch{throw vd(Is.DATA_URL,"Malformed data URL.")}return ix(e)}function sx(n,e){switch(n){case Is.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw vd(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Is.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw vd(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=wQ(e)}catch(i){throw i.message.includes("polyfill")?i:vd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class ox{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw vd(Is.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=IQ(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function bQ(n){const e=new ox(n);return e.base64?sx(Is.BASE64,e.rest):vQ(e.rest)}function EQ(n){return new ox(n).contentType}function IQ(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t){let r=0,i="";SS(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(SS(this.data_)){const r=this.data_,i=yQ(r,e,t);return i===null?null:new ra(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ra(r,!0)}}static getBlob(...e){if(sE()){const t=e.map(r=>r instanceof ra?r.data_:r);return new ra(mQ.apply(null,t))}else{const t=e.map(o=>iE(o)?_Q(Is.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let c=0;c<o.length;c++)i[s++]=o[c]}),new ra(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(n){let e;try{e=JSON.parse(n)}catch{return null}return aQ(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AQ(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function SQ(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function cx(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TQ(n,e){return e}class br{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||TQ}}let ig=null;function RQ(n){return!iE(n)||n.length<2?n:cx(n)}function lx(){if(ig)return ig;const n=[];n.push(new br("bucket")),n.push(new br("generation")),n.push(new br("metageneration")),n.push(new br("name","fullPath",!0));function e(s,o){return RQ(o)}const t=new br("name");t.xform=e,n.push(t);function r(s,o){return o!==void 0?Number(o):o}const i=new br("size");return i.xform=r,n.push(i),n.push(new br("timeCreated")),n.push(new br("updated")),n.push(new br("md5Hash",null,!0)),n.push(new br("cacheControl",null,!0)),n.push(new br("contentDisposition",null,!0)),n.push(new br("contentEncoding",null,!0)),n.push(new br("contentLanguage",null,!0)),n.push(new br("contentType",null,!0)),n.push(new br("metadata","customMetadata",!0)),ig=n,ig}function CQ(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new ai(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function xQ(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return CQ(r,n),r}function ux(n,e,t){const r=ax(e);return r===null?null:xQ(n,r,t)}function PQ(n,e,t,r){const i=ax(e);if(i===null||!iE(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(h=>{const f=n.bucket,m=n.fullPath,y="/b/"+o(f)+"/o/"+o(m),w=Nm(y,t,r),I=rx({alt:"media",token:h});return w+I})[0]}function OQ(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class oE{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(n){if(!n)throw rE()}function kQ(n,e){function t(r,i){const s=ux(n,i,e);return hx(s!==null),s}return t}function NQ(n,e){function t(r,i){const s=ux(n,i,e);return hx(s!==null),PQ(s,i,n.host,n._protocol)}return t}function dx(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=zK():i=WK():t.getStatus()===402?i=HK(n.bucket):t.getStatus()===403?i=GK(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function fx(n){const e=dx(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=qK(n.path)),s.serverResponse=i.serverResponse,s}return t}function DQ(n,e,t){const r=e.fullServerUrl(),i=Nm(r,n.host,n._protocol),s="GET",o=n.maxOperationRetryTime,c=new oE(i,s,NQ(n,t),o);return c.errorHandler=fx(e),c}function MQ(n,e){const t=e.fullServerUrl(),r=Nm(t,n.host,n._protocol),i="DELETE",s=n.maxOperationRetryTime;function o(l,h){}const c=new oE(r,i,o,s);return c.successCodes=[200,204],c.errorHandler=fx(e),c}function LQ(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function UQ(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=LQ(null,e)),r}function $Q(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let k=0;k<2;k++)C=C+Math.random().toString().slice(2);return C}const l=c();o["Content-Type"]="multipart/related; boundary="+l;const h=UQ(e,r,i),f=OQ(h,t),m="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,y=`\r
--`+l+"--",w=ra.getBlob(m,r,y);if(w===null)throw XK();const I={name:h.fullPath},T=Nm(s,n.host,n._protocol),A="POST",L=n.maxUploadRetryTime,D=new oE(T,A,kQ(n,t),L);return D.urlParams=I,D.headers=o,D.body=w.uploadData(),D.errorHandler=dx(e),D}class VQ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xc.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xc.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xc.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Bh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class FQ extends VQ{initXhr(){this.xhr_.responseType="text"}}function aE(){return new FQ}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t){this._service=e,t instanceof ai?this._location=t:this._location=ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Lc(e,t)}get root(){const e=new ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cx(this._location.path)}get storage(){return this._service}get parent(){const e=AQ(this._location.path);if(e===null)return null;const t=new ai(this._location.bucket,e);return new Lc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw nQ(e)}}function BQ(n,e,t){n._throwIfRoot("uploadBytes");const r=$Q(n.storage,n._location,lx(),new ra(e,!0),t);return n.storage.makeRequestWithTokens(r,aE).then(i=>({metadata:i,ref:n}))}function jQ(n){n._throwIfRoot("getDownloadURL");const e=DQ(n.storage,n._location,lx());return n.storage.makeRequestWithTokens(e,aE).then(t=>{if(t===null)throw eQ();return t})}function qQ(n){n._throwIfRoot("deleteObject");const e=MQ(n.storage,n._location);return n.storage.makeRequestWithTokens(e,aE)}function HQ(n,e){const t=SQ(n._location.path,e),r=new ai(n._location.bucket,t);return new Lc(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WQ(n){return/^[A-Za-z]+:\/\//.test(n)}function zQ(n,e){return new Lc(n,e)}function px(n,e){if(n instanceof cE){const t=n;if(t._bucket==null)throw ZK();const r=new Lc(t,t._bucket);return e!=null?px(r,e):r}else return e!==void 0?HQ(n,e):n}function GQ(n,e){if(e&&WQ(e)){if(n instanceof cE)return zQ(n,e);throw ev("To use ref(service, url), the first argument must be a Storage instance.")}else return px(n,e)}function RS(n,e){const t=e?.[tx];return t==null?null:ai.makeFromBucketSpec(t,n)}function KQ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:KC(i,n.app.options.projectId))}class cE{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=ex,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=BK,this._maxUploadRetryTime=jK,this._requests=new Set,i!=null?this._bucket=ai.makeFromBucketSpec(i,this._host):this._bucket=RS(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ai.makeFromBucketSpec(this._url,e):this._bucket=RS(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){TS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){TS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Lc(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new rQ(nx());{const o=pQ(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const CS="@firebase/storage",xS="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="storage";function c1e(n,e,t){return n=Nt(n),BQ(n,e,t)}function l1e(n){return n=Nt(n),jQ(n)}function u1e(n){return n=Nt(n),qQ(n)}function h1e(n,e){return n=Nt(n),GQ(n,e)}function d1e(n=cm(),e){n=Nt(n);const r=xa(n,gx).getImmediate({identifier:e}),i=WC("storage");return i&&QQ(r,...i),r}function QQ(n,e,t,r={}){KQ(n,e,t,r)}function JQ(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cE(t,r,i,e,zc)}function YQ(){Zi(new Ui(gx,JQ,"PUBLIC").setMultipleInstances(!0)),li(CS,xS,""),li(CS,xS,"esm2017")}YQ();const mx="@firebase/installations",lE="0.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=1e4,wx=`w:${lE}`,_x="FIS_v2",ZQ="https://firebaseinstallations.googleapis.com/v1",XQ=60*60*1e3,eJ="installations",tJ="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nJ={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Uc=new Wc(eJ,tJ,nJ);function vx(n){return n instanceof $i&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx({projectId:n}){return`${ZQ}/projects/${n}/installations`}function Ex(n){return{token:n.token,requestStatus:2,expiresIn:iJ(n.expiresIn),creationTime:Date.now()}}async function Ix(n,e){const r=(await e.json()).error;return Uc.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Ax({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function rJ(n,{refreshToken:e}){const t=Ax(n);return t.append("Authorization",sJ(e)),t}async function Sx(n){const e=await n();return e.status>=500&&e.status<600?n():e}function iJ(n){return Number(n.replace("s","000"))}function sJ(n){return`${_x} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oJ({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=bx(n),i=Ax(n),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={fid:t,authVersion:_x,appId:n.appId,sdkVersion:wx},c={method:"POST",headers:i,body:JSON.stringify(o)},l=await Sx(()=>fetch(r,c));if(l.ok){const h=await l.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:Ex(h.authToken)}}else throw await Ix("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aJ(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cJ=/^[cdef][\w-]{21}$/,tv="";function lJ(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=uJ(n);return cJ.test(t)?t:tv}catch{return tv}}function uJ(n){return aJ(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=new Map;function Cx(n,e){const t=Dm(n);xx(t,e),hJ(t,e)}function xx(n,e){const t=Rx.get(n);if(t)for(const r of t)r(e)}function hJ(n,e){const t=dJ();t&&t.postMessage({key:n,fid:e}),fJ()}let Ic=null;function dJ(){return!Ic&&"BroadcastChannel"in self&&(Ic=new BroadcastChannel("[Firebase] FID Change"),Ic.onmessage=n=>{xx(n.data.key,n.data.fid)}),Ic}function fJ(){Rx.size===0&&Ic&&(Ic.close(),Ic=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJ="firebase-installations-database",gJ=1,$c="firebase-installations-store";let iw=null;function uE(){return iw||(iw=TR(pJ,gJ,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore($c)}}})),iw}async function I0(n,e){const t=Dm(n),i=(await uE()).transaction($c,"readwrite"),s=i.objectStore($c),o=await s.get(t);return await s.put(e,t),await i.done,(!o||o.fid!==e.fid)&&Cx(n,e.fid),e}async function Px(n){const e=Dm(n),r=(await uE()).transaction($c,"readwrite");await r.objectStore($c).delete(e),await r.done}async function Mm(n,e){const t=Dm(n),i=(await uE()).transaction($c,"readwrite"),s=i.objectStore($c),o=await s.get(t),c=e(o);return c===void 0?await s.delete(t):await s.put(c,t),await i.done,c&&(!o||o.fid!==c.fid)&&Cx(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hE(n){let e;const t=await Mm(n.appConfig,r=>{const i=mJ(r),s=yJ(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===tv?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function mJ(n){const e=n||{fid:lJ(),registrationStatus:0};return Ox(e)}function yJ(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Uc.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=wJ(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:_J(n)}:{installationEntry:e}}async function wJ(n,e){try{const t=await oJ(n,e);return I0(n.appConfig,t)}catch(t){throw vx(t)&&t.customData.serverCode===409?await Px(n.appConfig):await I0(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function _J(n){let e=await PS(n.appConfig);for(;e.registrationStatus===1;)await Tx(100),e=await PS(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await hE(n);return r||t}return e}function PS(n){return Mm(n,e=>{if(!e)throw Uc.create("installation-not-found");return Ox(e)})}function Ox(n){return vJ(n)?{fid:n.fid,registrationStatus:0}:n}function vJ(n){return n.registrationStatus===1&&n.registrationTime+yx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bJ({appConfig:n,heartbeatServiceProvider:e},t){const r=EJ(n,t),i=rJ(n,t),s=e.getImmediate({optional:!0});if(s){const h=await s.getHeartbeatsHeader();h&&i.append("x-firebase-client",h)}const o={installation:{sdkVersion:wx,appId:n.appId}},c={method:"POST",headers:i,body:JSON.stringify(o)},l=await Sx(()=>fetch(r,c));if(l.ok){const h=await l.json();return Ex(h)}else throw await Ix("Generate Auth Token",l)}function EJ(n,{fid:e}){return`${bx(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(n,e=!1){let t;const r=await Mm(n.appConfig,s=>{if(!kx(s))throw Uc.create("not-registered");const o=s.authToken;if(!e&&SJ(o))return s;if(o.requestStatus===1)return t=IJ(n,e),s;{if(!navigator.onLine)throw Uc.create("app-offline");const c=RJ(s);return t=AJ(n,c),c}});return t?await t:r.authToken}async function IJ(n,e){let t=await OS(n.appConfig);for(;t.authToken.requestStatus===1;)await Tx(100),t=await OS(n.appConfig);const r=t.authToken;return r.requestStatus===0?dE(n,e):r}function OS(n){return Mm(n,e=>{if(!kx(e))throw Uc.create("not-registered");const t=e.authToken;return CJ(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function AJ(n,e){try{const t=await bJ(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await I0(n.appConfig,r),t}catch(t){if(vx(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Px(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await I0(n.appConfig,r)}throw t}}function kx(n){return n!==void 0&&n.registrationStatus===2}function SJ(n){return n.requestStatus===2&&!TJ(n)}function TJ(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+XQ}function RJ(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function CJ(n){return n.requestStatus===1&&n.requestTime+yx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xJ(n){const e=n,{installationEntry:t,registrationPromise:r}=await hE(e);return r?r.catch(console.error):dE(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PJ(n,e=!1){const t=n;return await OJ(t),(await dE(t,e)).token}async function OJ(n){const{registrationPromise:e}=await hE(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kJ(n){if(!n||!n.options)throw sw("App Configuration");if(!n.name)throw sw("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw sw(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function sw(n){return Uc.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="installations",NJ="installations-internal",DJ=n=>{const e=n.getProvider("app").getImmediate(),t=kJ(e),r=xa(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},MJ=n=>{const e=n.getProvider("app").getImmediate(),t=xa(e,Nx).getImmediate();return{getId:()=>xJ(t),getToken:i=>PJ(t,i)}};function LJ(){Zi(new Ui(Nx,DJ,"PUBLIC")),Zi(new Ui(NJ,MJ,"PRIVATE"))}LJ();li(mx,lE);li(mx,lE,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="analytics",UJ="firebase_id",$J="origin",VJ=60*1e3,FJ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",fE="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new am("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ui=new Wc("analytics","Analytics",BJ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(n){if(!n.startsWith(fE)){const e=ui.create("invalid-gtag-resource",{gtagURL:n});return Gr.warn(e.message),""}return n}function Dx(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function qJ(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function HJ(n,e){const t=qJ("firebase-js-sdk-policy",{createScriptURL:jJ}),r=document.createElement("script"),i=`${fE}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function WJ(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function zJ(n,e,t,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await Dx(t)).find(h=>h.measurementId===i);l&&await e[l.appId]}}catch(c){Gr.error(c)}n("config",i,s)}async function GJ(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const c=await Dx(t);for(const l of o){const h=c.find(m=>m.measurementId===l),f=h&&e[h.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),n("event",r,i||{})}catch(s){Gr.error(s)}}function KJ(n,e,t,r){async function i(s,...o){try{if(s==="event"){const[c,l]=o;await GJ(n,e,t,c,l)}else if(s==="config"){const[c,l]=o;await zJ(n,e,t,r,c,l)}else if(s==="consent"){const[c,l]=o;n("consent",c,l)}else if(s==="get"){const[c,l,h]=o;n("get",c,l,h)}else if(s==="set"){const[c]=o;n("set",c)}else n(s,...o)}catch(c){Gr.error(c)}}return i}function QJ(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=KJ(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function JJ(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(fE)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ=30,ZJ=1e3;class XJ{constructor(e={},t=ZJ){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Mx=new XJ;function eY(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function tY(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:eY(r)},s=FJ.replace("{app-id}",t),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let c="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(c=l.error.message)}catch{}throw ui.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function nY(n,e=Mx,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw ui.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw ui.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new sY;return setTimeout(async()=>{c.abort()},VJ),Lx({appId:r,apiKey:i,measurementId:s},o,c,e)}async function Lx(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Mx){var s;const{appId:o,measurementId:c}=n;try{await rY(r,e)}catch(l){if(c)return Gr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${l?.message}]`),{appId:o,measurementId:c};throw l}try{const l=await tY(n);return i.deleteThrottleMetadata(o),l}catch(l){const h=l;if(!iY(h)){if(i.deleteThrottleMetadata(o),c)return Gr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:o,measurementId:c};throw l}const f=Number((s=h?.customData)===null||s===void 0?void 0:s.httpStatus)===503?d5(t,i.intervalMillis,YJ):d5(t,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+f,backoffCount:t+1};return i.setThrottleMetadata(o,m),Gr.debug(`Calling attemptFetch again in ${f} millis`),Lx(n,m,r,i)}}function rY(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ui.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function iY(n){if(!(n instanceof $i)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class sY{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function oY(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aY(){if(JC())try{await YC()}catch(n){return Gr.warn(ui.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Gr.warn(ui.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cY(n,e,t,r,i,s,o){var c;const l=nY(n);l.then(w=>{t[w.measurementId]=w.appId,n.options.measurementId&&w.measurementId!==n.options.measurementId&&Gr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>Gr.error(w)),e.push(l);const h=aY().then(w=>{if(w)return r.getId()}),[f,m]=await Promise.all([l,h]);JJ(s)||HJ(s,f.measurementId),i("js",new Date);const y=(c=o?.config)!==null&&c!==void 0?c:{};return y[$J]="firebase",y.update=!0,m!=null&&(y[UJ]=m),i("config",f.measurementId,y),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e){this.app=e}_delete(){return delete bd[this.app.options.appId],Promise.resolve()}}let bd={},kS=[];const NS={};let ow="dataLayer",uY="gtag",DS,Ux,MS=!1;function hY(){const n=[];if(QC()&&n.push("This is a browser extension environment."),yj()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ui.create("invalid-analytics-context",{errorInfo:e});Gr.warn(t.message)}}function dY(n,e,t){hY();const r=n.options.appId;if(!r)throw ui.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Gr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ui.create("no-api-key");if(bd[r]!=null)throw ui.create("already-exists",{id:r});if(!MS){WJ(ow);const{wrappedGtag:s,gtagCore:o}=QJ(bd,kS,NS,ow,uY);Ux=s,DS=o,MS=!0}return bd[r]=cY(n,kS,NS,e,DS,ow,t),new lY(n)}function f1e(n=cm()){n=Nt(n);const e=xa(n,A0);return e.isInitialized()?e.getImmediate():fY(n)}function fY(n,e={}){const t=xa(n,A0);if(t.isInitialized()){const i=t.getImmediate();if(Od(e,t.getOptions()))return i;throw ui.create("already-initialized")}return t.initialize({options:e})}function pY(n,e,t,r){n=Nt(n),oY(Ux,bd[n.app.options.appId],e,t,r).catch(i=>Gr.error(i))}const LS="@firebase/analytics",US="0.10.10";function gY(){Zi(new Ui(A0,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return dY(r,i,t)},"PUBLIC")),Zi(new Ui("analytics-internal",n,"PRIVATE")),li(LS,US),li(LS,US,"esm2017");function n(e){try{const t=e.getProvider(A0).getImmediate();return{logEvent:(r,i,s)=>pY(t,r,i,s)}}catch(t){throw ui.create("interop-component-reg-failed",{reason:t})}}}gY();function mY({mustBeMetaMask:n=!1,silent:e=!1,timeout:t=3e3}={}){i();let r=!1;return new Promise(s=>{window.ethereum?o():(window.addEventListener("ethereum#initialized",o,{once:!0}),setTimeout(()=>{o()},t));function o(){if(r)return;r=!0,window.removeEventListener("ethereum#initialized",o);const{ethereum:c}=window;c&&(!n||c.isMetaMask)?s(c):(!e&&console.error("@metamask/detect-provider:",n&&c?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum."),s(null))}});function i(){if(typeof n!="boolean")throw new Error("@metamask/detect-provider: Expected option 'mustBeMetaMask' to be a boolean.");if(typeof e!="boolean")throw new Error("@metamask/detect-provider: Expected option 'silent' to be a boolean.");if(typeof t!="number")throw new Error("@metamask/detect-provider: Expected option 'timeout' to be a number.")}}var yY=mY;const p1e=Lv(yY),[wY,_Y]=ot.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),qo=new Uint32Array(80),Ho=new Uint32Array(80);class vY extends JR{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:i,Ch:s,Cl:o,Dh:c,Dl:l,Eh:h,El:f,Fh:m,Fl:y,Gh:w,Gl:I,Hh:T,Hl:A}=this;return[e,t,r,i,s,o,c,l,h,f,m,y,w,I,T,A]}set(e,t,r,i,s,o,c,l,h,f,m,y,w,I,T,A){this.Ah=e|0,this.Al=t|0,this.Bh=r|0,this.Bl=i|0,this.Ch=s|0,this.Cl=o|0,this.Dh=c|0,this.Dl=l|0,this.Eh=h|0,this.El=f|0,this.Fh=m|0,this.Fl=y|0,this.Gh=w|0,this.Gl=I|0,this.Hh=T|0,this.Hl=A|0}process(e,t){for(let C=0;C<16;C++,t+=4)qo[C]=e.getUint32(t),Ho[C]=e.getUint32(t+=4);for(let C=16;C<80;C++){const k=qo[C-15]|0,P=Ho[C-15]|0,O=ot.rotrSH(k,P,1)^ot.rotrSH(k,P,8)^ot.shrSH(k,P,7),g=ot.rotrSL(k,P,1)^ot.rotrSL(k,P,8)^ot.shrSL(k,P,7),_=qo[C-2]|0,R=Ho[C-2]|0,N=ot.rotrSH(_,R,19)^ot.rotrBH(_,R,61)^ot.shrSH(_,R,6),M=ot.rotrSL(_,R,19)^ot.rotrBL(_,R,61)^ot.shrSL(_,R,6),j=ot.add4L(g,M,Ho[C-7],Ho[C-16]),$=ot.add4H(j,O,N,qo[C-7],qo[C-16]);qo[C]=$|0,Ho[C]=j|0}let{Ah:r,Al:i,Bh:s,Bl:o,Ch:c,Cl:l,Dh:h,Dl:f,Eh:m,El:y,Fh:w,Fl:I,Gh:T,Gl:A,Hh:L,Hl:D}=this;for(let C=0;C<80;C++){const k=ot.rotrSH(m,y,14)^ot.rotrSH(m,y,18)^ot.rotrBH(m,y,41),P=ot.rotrSL(m,y,14)^ot.rotrSL(m,y,18)^ot.rotrBL(m,y,41),O=m&w^~m&T,g=y&I^~y&A,_=ot.add5L(D,P,g,_Y[C],Ho[C]),R=ot.add5H(_,L,k,O,wY[C],qo[C]),N=_|0,M=ot.rotrSH(r,i,28)^ot.rotrBH(r,i,34)^ot.rotrBH(r,i,39),j=ot.rotrSL(r,i,28)^ot.rotrBL(r,i,34)^ot.rotrBL(r,i,39),$=r&s^r&c^s&c,q=i&o^i&l^o&l;L=T|0,D=A|0,T=w|0,A=I|0,w=m|0,I=y|0,{h:m,l:y}=ot.add(h|0,f|0,R|0,N|0),h=c|0,f=l|0,c=s|0,l=o|0,s=r|0,o=i|0;const B=ot.add3L(N,j,q);r=ot.add3H(B,R,M,$),i=B|0}({h:r,l:i}=ot.add(this.Ah|0,this.Al|0,r|0,i|0)),{h:s,l:o}=ot.add(this.Bh|0,this.Bl|0,s|0,o|0),{h:c,l}=ot.add(this.Ch|0,this.Cl|0,c|0,l|0),{h,l:f}=ot.add(this.Dh|0,this.Dl|0,h|0,f|0),{h:m,l:y}=ot.add(this.Eh|0,this.El|0,m|0,y|0),{h:w,l:I}=ot.add(this.Fh|0,this.Fl|0,w|0,I|0),{h:T,l:A}=ot.add(this.Gh|0,this.Gl|0,T|0,A|0),{h:L,l:D}=ot.add(this.Hh|0,this.Hl|0,L|0,D|0),this.set(r,i,s,o,c,l,h,f,m,y,w,I,T,A,L,D)}roundClean(){qo.fill(0),Ho.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const g1e=jv(()=>new vY);var bY="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";const $S=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),VS=4;function EY(n){let e=0;function t(){return n[e++]<<8|n[e++]}let r=t(),i=1,s=[0,1];for(let P=1;P<r;P++)s.push(i+=t());let o=t(),c=e;e+=o;let l=0,h=0;function f(){return l==0&&(h=h<<8|n[e++],l=8),h>>--l&1}const m=31,y=2**m,w=y>>>1,I=w>>1,T=y-1;let A=0;for(let P=0;P<m;P++)A=A<<1|f();let L=[],D=0,C=y;for(;;){let P=Math.floor(((A-D+1)*i-1)/C),O=0,g=r;for(;g-O>1;){let N=O+g>>>1;P<s[N]?g=N:O=N}if(O==0)break;L.push(O);let _=D+Math.floor(C*s[O]/i),R=D+Math.floor(C*s[O+1]/i)-1;for(;!((_^R)&w);)A=A<<1&T|f(),_=_<<1&T,R=R<<1&T|1;for(;_&~R&I;)A=A&w|A<<1&T>>>1|f(),_=_<<1^w,R=(R^w)<<1|w|1;D=_,C=1+R-_}let k=r-4;return L.map(P=>{switch(P-k){case 3:return k+65792+(n[c++]<<16|n[c++]<<8|n[c++]);case 2:return k+256+(n[c++]<<8|n[c++]);case 1:return k+n[c++];default:return P-1}})}function IY(n){let e=0;return()=>n[e++]}function $x(n){return IY(EY(AY(n)))}function AY(n){let e=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((i,s)=>e[i.charCodeAt(0)]=s);let t=n.length,r=new Uint8Array(6*t>>3);for(let i=0,s=0,o=0,c=0;i<t;i++)c=c<<6|e[n.charCodeAt(i)],o+=6,o>=8&&(r[s++]=c>>(o-=8));return r}function SY(n){return n&1?~n>>1:n>>1}function TY(n,e){let t=Array(n);for(let r=0,i=0;r<n;r++)t[r]=i+=SY(e());return t}function qd(n,e=0){let t=[];for(;;){let r=n(),i=n();if(!i)break;e+=r;for(let s=0;s<i;s++)t.push(e+s);e+=i+1}return t}function Vx(n){return Hd(()=>{let e=qd(n);if(e.length)return e})}function Fx(n){let e=[];for(;;){let t=n();if(t==0)break;e.push(RY(t,n))}for(;;){let t=n()-1;if(t<0)break;e.push(CY(t,n))}return e.flat()}function Hd(n){let e=[];for(;;){let t=n(e.length);if(!t)break;e.push(t)}return e}function Bx(n,e,t){let r=Array(n).fill().map(()=>[]);for(let i=0;i<e;i++)TY(n,t).forEach((s,o)=>r[o].push(s));return r}function RY(n,e){let t=1+e(),r=e(),i=Hd(e);return Bx(i.length,1+n,e).flatMap((o,c)=>{let[l,...h]=o;return Array(i[c]).fill().map((f,m)=>{let y=m*r;return[l+m*t,h.map(w=>w+y)]})})}function CY(n,e){let t=1+e();return Bx(t,1+n,e).map(i=>[i[0],i.slice(1)])}function xY(n){let e=[],t=qd(n);return i(r([]),[]),e;function r(s){let o=n(),c=Hd(()=>{let l=qd(n).map(h=>t[h]);if(l.length)return r(l)});return{S:o,B:c,Q:s}}function i({S:s,B:o},c,l){if(!(s&4&&l===c[c.length-1])){s&2&&(l=c[c.length-1]),s&1&&e.push(c);for(let h of o)for(let f of h.Q)i(h,[...c,f],l)}}}function PY(n){return n.toString(16).toUpperCase().padStart(2,"0")}function jx(n){return`{${PY(n)}}`}function OY(n){let e=[];for(let t=0,r=n.length;t<r;){let i=n.codePointAt(t);t+=i<65536?1:2,e.push(i)}return e}function bu(n){let t=n.length;if(t<4096)return String.fromCodePoint(...n);let r=[];for(let i=0;i<t;)r.push(String.fromCodePoint(...n.slice(i,i+=4096)));return r.join("")}function kY(n,e){let t=n.length,r=t-e.length;for(let i=0;r==0&&i<t;i++)r=n[i]-e[i];return r}var NY="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";const Wd=44032,S0=4352,T0=4449,R0=4519,qx=19,Hx=21,Eu=28,C0=Hx*Eu,DY=qx*C0,MY=Wd+DY,LY=S0+qx,UY=T0+Hx,$Y=R0+Eu;function hd(n){return n>>24&255}function Wx(n){return n&16777215}let nv,FS,rv,Gg;function VY(){let n=$x(NY);nv=new Map(Vx(n).flatMap((e,t)=>e.map(r=>[r,t+1<<24]))),FS=new Set(qd(n)),rv=new Map,Gg=new Map;for(let[e,t]of Fx(n)){if(!FS.has(e)&&t.length==2){let[r,i]=t,s=Gg.get(r);s||(s=new Map,Gg.set(r,s)),s.set(i,e)}rv.set(e,t.reverse())}}function zx(n){return n>=Wd&&n<MY}function FY(n,e){if(n>=S0&&n<LY&&e>=T0&&e<UY)return Wd+(n-S0)*C0+(e-T0)*Eu;if(zx(n)&&e>R0&&e<$Y&&(n-Wd)%Eu==0)return n+(e-R0);{let t=Gg.get(n);return t&&(t=t.get(e),t)?t:-1}}function Gx(n){nv||VY();let e=[],t=[],r=!1;function i(s){let o=nv.get(s);o&&(r=!0,s|=o),e.push(s)}for(let s of n)for(;;){if(s<128)e.push(s);else if(zx(s)){let o=s-Wd,c=o/C0|0,l=o%C0/Eu|0,h=o%Eu;i(S0+c),i(T0+l),h>0&&i(R0+h)}else{let o=rv.get(s);o?t.push(...o):i(s)}if(!t.length)break;s=t.pop()}if(r&&e.length>1){let s=hd(e[0]);for(let o=1;o<e.length;o++){let c=hd(e[o]);if(c==0||s<=c){s=c;continue}let l=o-1;for(;;){let h=e[l+1];if(e[l+1]=e[l],e[l]=h,!l||(s=hd(e[--l]),s<=c))break}s=hd(e[o])}}return e}function BY(n){let e=[],t=[],r=-1,i=0;for(let s of n){let o=hd(s),c=Wx(s);if(r==-1)o==0?r=c:e.push(c);else if(i>0&&i>=o)o==0?(e.push(r,...t),t.length=0,r=c):t.push(c),i=o;else{let l=FY(r,c);l>=0?r=l:i==0&&o==0?(e.push(r),r=c):(t.push(c),i=o)}}return r>=0&&e.push(r,...t),e}function Kx(n){return Gx(n).map(Wx)}function jY(n){return BY(Gx(n))}const BS=45,Qx=".",Jx=65039,Yx=1,x0=n=>Array.from(n);function zd(n,e){return n.P.has(e)||n.Q.has(e)}class qY extends Array{get is_emoji(){return!0}}let iv,Zx,Ac,sv,Xx,nu,aw,Bl,fc,jS,ov;function pE(){if(iv)return;let n=$x(bY);const e=()=>qd(n),t=()=>new Set(e()),r=(f,m)=>m.forEach(y=>f.add(y));iv=new Map(Fx(n)),Zx=t(),Ac=e(),sv=new Set(e().map(f=>Ac[f])),Ac=new Set(Ac),Xx=t(),t();let i=Vx(n),s=n();const o=()=>{let f=new Set;return e().forEach(m=>r(f,i[m])),r(f,e()),f};nu=Hd(f=>{let m=Hd(n).map(y=>y+96);if(m.length){let y=f>=s;m[0]-=32,m=bu(m),y&&(m=`Restricted[${m}]`);let w=o(),I=o(),T=!n();return{N:m,P:w,Q:I,M:T,R:y}}}),aw=t(),Bl=new Map;let c=e().concat(x0(aw)).sort((f,m)=>f-m);c.forEach((f,m)=>{let y=n(),w=c[m]=y?c[m-y]:{V:[],M:new Map};w.V.push(f),aw.has(f)||Bl.set(f,w)});for(let{V:f,M:m}of new Set(Bl.values())){let y=[];for(let I of f){let T=nu.filter(L=>zd(L,I)),A=y.find(({G:L})=>T.some(D=>L.has(D)));A||(A={G:new Set,V:[]},y.push(A)),A.V.push(I),r(A.G,T)}let w=y.flatMap(I=>x0(I.G));for(let{G:I,V:T}of y){let A=new Set(w.filter(L=>!I.has(L)));for(let L of T)m.set(L,A)}}fc=new Set;let l=new Set;const h=f=>fc.has(f)?l.add(f):fc.add(f);for(let f of nu){for(let m of f.P)h(m);for(let m of f.Q)h(m)}for(let f of fc)!Bl.has(f)&&!l.has(f)&&Bl.set(f,Yx);r(fc,Kx(fc)),jS=xY(n).map(f=>qY.from(f)).sort(kY),ov=new Map;for(let f of jS){let m=[ov];for(let y of f){let w=m.map(I=>{let T=I.get(y);return T||(T=new Map,I.set(y,T)),T});y===Jx?m.push(...w):m=w}for(let y of m)y.V=f}}function gE(n){return(eP(n)?"":`${mE(Lm([n]))} `)+jx(n)}function mE(n){return`"${n}"‎`}function HY(n){if(n.length>=4&&n[2]==BS&&n[3]==BS)throw new Error(`invalid label extension: "${bu(n.slice(0,4))}"`)}function WY(n){for(let t=n.lastIndexOf(95);t>0;)if(n[--t]!==95)throw new Error("underscore allowed only at start")}function zY(n){let e=n[0],t=$S.get(e);if(t)throw Ed(`leading ${t}`);let r=n.length,i=-1;for(let s=1;s<r;s++){e=n[s];let o=$S.get(e);if(o){if(i==s)throw Ed(`${t} + ${o}`);i=s+1,t=o}}if(i==r)throw Ed(`trailing ${t}`)}function Lm(n,e=1/0,t=jx){let r=[];GY(n[0])&&r.push("◌"),n.length>e&&(e>>=1,n=[...n.slice(0,e),8230,...n.slice(-e)]);let i=0,s=n.length;for(let o=0;o<s;o++){let c=n[o];eP(c)&&(r.push(bu(n.slice(i,o))),r.push(t(c)),i=o+1)}return r.push(bu(n.slice(i,s))),r.join("")}function GY(n){return pE(),Ac.has(n)}function eP(n){return pE(),Xx.has(n)}function m1e(n){return YY(KY(n,jY,eZ))}function KY(n,e,t){if(!n)return[];pE();let r=0;return n.split(Qx).map(i=>{let s=OY(i),o={input:s,offset:r};r+=s.length+1;try{let c=o.tokens=XY(s,e,t),l=c.length,h;if(!l)throw new Error("empty label");let f=o.output=c.flat();if(WY(f),!(o.emoji=l>1||c[0].is_emoji)&&f.every(y=>y<128))HY(f),h="ASCII";else{let y=c.flatMap(w=>w.is_emoji?[]:w);if(!y.length)h="Emoji";else{if(Ac.has(f[0]))throw Ed("leading combining mark");for(let T=1;T<l;T++){let A=c[T];if(!A.is_emoji&&Ac.has(A[0]))throw Ed(`emoji + combining mark: "${bu(c[T-1])} + ${Lm([A[0]])}"`)}zY(f);let w=x0(new Set(y)),[I]=JY(w);ZY(I,y),QY(I,w),h=I.N}}o.type=h}catch(c){o.error=c}return o})}function QY(n,e){let t,r=[];for(let i of e){let s=Bl.get(i);if(s===Yx)return;if(s){let o=s.M.get(i);if(t=t?t.filter(c=>o.has(c)):x0(o),!t.length)return}else r.push(i)}if(t){for(let i of t)if(r.every(s=>zd(i,s)))throw new Error(`whole-script confusable: ${n.N}/${i.N}`)}}function JY(n){let e=nu;for(let t of n){let r=e.filter(i=>zd(i,t));if(!r.length)throw nu.some(i=>zd(i,t))?nP(e[0],t):tP(t);if(e=r,r.length==1)break}return e}function YY(n){return n.map(({input:e,error:t,output:r})=>{if(t){let i=t.message;throw new Error(n.length==1?i:`Invalid label ${mE(Lm(e,63))}: ${i}`)}return bu(r)}).join(Qx)}function tP(n){return new Error(`disallowed character: ${gE(n)}`)}function nP(n,e){let t=gE(e),r=nu.find(i=>i.P.has(e));return r&&(t=`${r.N} ${t}`),new Error(`illegal mixture: ${n.N} + ${t}`)}function Ed(n){return new Error(`illegal placement: ${n}`)}function ZY(n,e){for(let t of e)if(!zd(n,t))throw nP(n,t);if(n.M){let t=Kx(e);for(let r=1,i=t.length;r<i;r++)if(sv.has(t[r])){let s=r+1;for(let o;s<i&&sv.has(o=t[s]);s++)for(let c=r;c<s;c++)if(t[c]==o)throw new Error(`duplicate non-spacing marks: ${gE(o)}`);if(s-r>VS)throw new Error(`excessive non-spacing marks: ${mE(Lm(t.slice(r-1,s)))} (${s-r}/${VS})`);r=s}}}function XY(n,e,t){let r=[],i=[];for(n=n.slice().reverse();n.length;){let s=tZ(n);if(s)i.length&&(r.push(e(i)),i=[]),r.push(t(s));else{let o=n.pop();if(fc.has(o))i.push(o);else{let c=iv.get(o);if(c)i.push(...c);else if(!Zx.has(o))throw tP(o)}}}return i.length&&r.push(e(i)),r}function eZ(n){return n.filter(e=>e!=Jx)}function tZ(n,e){let t=ov,r,i=n.length;for(;i&&(t=t.get(n[--i]),!!t);){let{V:s}=t;s&&(r=s,n.length=i)}return r}function qS(){return qS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qS.apply(null,arguments)}function nZ(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.includes(r))continue;t[r]=n[r]}return t}function av(n,e){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},av(n,e)}function rZ(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}const iZ=["top","right","bottom","left"],HS=["start","end"],WS=iZ.reduce((n,e)=>n.concat(e,e+"-"+HS[0],e+"-"+HS[1]),[]),Iu=Math.min,Pc=Math.max,P0=Math.round,sg=Math.floor,Ps=n=>({x:n,y:n}),sZ={left:"right",right:"left",bottom:"top",top:"bottom"},oZ={start:"end",end:"start"};function cv(n,e,t){return Pc(n,Iu(e,t))}function Ku(n,e){return typeof n=="function"?n(e):n}function Eo(n){return n.split("-")[0]}function Os(n){return n.split("-")[1]}function rP(n){return n==="x"?"y":"x"}function yE(n){return n==="y"?"height":"width"}function Au(n){return["top","bottom"].includes(Eo(n))?"y":"x"}function wE(n){return rP(Au(n))}function iP(n,e,t){t===void 0&&(t=!1);const r=Os(n),i=wE(n),s=yE(i);let o=i==="x"?r===(t?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=k0(o)),[o,k0(o)]}function aZ(n){const e=k0(n);return[O0(n),e,O0(e)]}function O0(n){return n.replace(/start|end/g,e=>oZ[e])}function cZ(n,e,t){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(n){case"top":case"bottom":return t?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function lZ(n,e,t,r){const i=Os(n);let s=cZ(Eo(n),t==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(O0)))),s}function k0(n){return n.replace(/left|right|bottom|top/g,e=>sZ[e])}function uZ(n){return{top:0,right:0,bottom:0,left:0,...n}}function sP(n){return typeof n!="number"?uZ(n):{top:n,right:n,bottom:n,left:n}}function N0(n){const{x:e,y:t,width:r,height:i}=n;return{width:r,height:i,top:t,left:e,right:e+r,bottom:t+i,x:e,y:t}}function zS(n,e,t){let{reference:r,floating:i}=n;const s=Au(e),o=wE(e),c=yE(o),l=Eo(e),h=s==="y",f=r.x+r.width/2-i.width/2,m=r.y+r.height/2-i.height/2,y=r[c]/2-i[c]/2;let w;switch(l){case"top":w={x:f,y:r.y-i.height};break;case"bottom":w={x:f,y:r.y+r.height};break;case"right":w={x:r.x+r.width,y:m};break;case"left":w={x:r.x-i.width,y:m};break;default:w={x:r.x,y:r.y}}switch(Os(e)){case"start":w[o]-=y*(t&&h?-1:1);break;case"end":w[o]+=y*(t&&h?-1:1);break}return w}const hZ=async(n,e,t)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=t,c=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let h=await o.getElementRects({reference:n,floating:e,strategy:i}),{x:f,y:m}=zS(h,r,l),y=r,w={},I=0;for(let T=0;T<c.length;T++){const{name:A,fn:L}=c[T],{x:D,y:C,data:k,reset:P}=await L({x:f,y:m,initialPlacement:r,placement:y,strategy:i,middlewareData:w,rects:h,platform:o,elements:{reference:n,floating:e}});f=D??f,m=C??m,w={...w,[A]:{...w[A],...k}},P&&I<=50&&(I++,typeof P=="object"&&(P.placement&&(y=P.placement),P.rects&&(h=P.rects===!0?await o.getElementRects({reference:n,floating:e,strategy:i}):P.rects),{x:f,y:m}=zS(h,y,l)),T=-1)}return{x:f,y:m,placement:y,strategy:i,middlewareData:w}};async function _E(n,e){var t;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:c,strategy:l}=n,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:y=!1,padding:w=0}=Ku(e,n),I=sP(w),A=c[y?m==="floating"?"reference":"floating":m],L=N0(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(A)))==null||t?A:A.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:l})),D=m==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(c.floating)),k=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},P=N0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:D,offsetParent:C,strategy:l}):D);return{top:(L.top-P.top+I.top)/k.y,bottom:(P.bottom-L.bottom+I.bottom)/k.y,left:(L.left-P.left+I.left)/k.x,right:(P.right-L.right+I.right)/k.x}}const dZ=n=>({name:"arrow",options:n,async fn(e){const{x:t,y:r,placement:i,rects:s,platform:o,elements:c,middlewareData:l}=e,{element:h,padding:f=0}=Ku(n,e)||{};if(h==null)return{};const m=sP(f),y={x:t,y:r},w=wE(i),I=yE(w),T=await o.getDimensions(h),A=w==="y",L=A?"top":"left",D=A?"bottom":"right",C=A?"clientHeight":"clientWidth",k=s.reference[I]+s.reference[w]-y[w]-s.floating[I],P=y[w]-s.reference[w],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(h));let g=O?O[C]:0;(!g||!await(o.isElement==null?void 0:o.isElement(O)))&&(g=c.floating[C]||s.floating[I]);const _=k/2-P/2,R=g/2-T[I]/2-1,N=Iu(m[L],R),M=Iu(m[D],R),j=N,$=g-T[I]-M,q=g/2-T[I]/2+_,B=cv(j,q,$),Q=!l.arrow&&Os(i)!=null&&q!==B&&s.reference[I]/2-(q<j?N:M)-T[I]/2<0,G=Q?q<j?q-j:q-$:0;return{[w]:y[w]+G,data:{[w]:B,centerOffset:q-B-G,...Q&&{alignmentOffset:G}},reset:Q}}});function fZ(n,e,t){return(n?[...t.filter(i=>Os(i)===n),...t.filter(i=>Os(i)!==n)]:t.filter(i=>Eo(i)===i)).filter(i=>n?Os(i)===n||(e?O0(i)!==i:!1):!0)}const pZ=function(n){return n===void 0&&(n={}),{name:"autoPlacement",options:n,async fn(e){var t,r,i;const{rects:s,middlewareData:o,placement:c,platform:l,elements:h}=e,{crossAxis:f=!1,alignment:m,allowedPlacements:y=WS,autoAlignment:w=!0,...I}=Ku(n,e),T=m!==void 0||y===WS?fZ(m||null,w,y):y,A=await _E(e,I),L=((t=o.autoPlacement)==null?void 0:t.index)||0,D=T[L];if(D==null)return{};const C=iP(D,s,await(l.isRTL==null?void 0:l.isRTL(h.floating)));if(c!==D)return{reset:{placement:T[0]}};const k=[A[Eo(D)],A[C[0]],A[C[1]]],P=[...((r=o.autoPlacement)==null?void 0:r.overflows)||[],{placement:D,overflows:k}],O=T[L+1];if(O)return{data:{index:L+1,overflows:P},reset:{placement:O}};const g=P.map(N=>{const M=Os(N.placement);return[N.placement,M&&f?N.overflows.slice(0,2).reduce((j,$)=>j+$,0):N.overflows[0],N.overflows]}).sort((N,M)=>N[1]-M[1]),R=((i=g.filter(N=>N[2].slice(0,Os(N[0])?2:3).every(M=>M<=0))[0])==null?void 0:i[0])||g[0][0];return R!==c?{data:{index:L+1,overflows:P},reset:{placement:R}}:{}}}},gZ=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(e){var t,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:c,platform:l,elements:h}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:y,fallbackStrategy:w="bestFit",fallbackAxisSideDirection:I="none",flipAlignment:T=!0,...A}=Ku(n,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const L=Eo(i),D=Au(c),C=Eo(c)===c,k=await(l.isRTL==null?void 0:l.isRTL(h.floating)),P=y||(C||!T?[k0(c)]:aZ(c)),O=I!=="none";!y&&O&&P.push(...lZ(c,T,I,k));const g=[c,...P],_=await _E(e,A),R=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&R.push(_[L]),m){const q=iP(i,o,k);R.push(_[q[0]],_[q[1]])}if(N=[...N,{placement:i,overflows:R}],!R.every(q=>q<=0)){var M,j;const q=(((M=s.flip)==null?void 0:M.index)||0)+1,B=g[q];if(B)return{data:{index:q,overflows:N},reset:{placement:B}};let Q=(j=N.filter(G=>G.overflows[0]<=0).sort((G,K)=>G.overflows[1]-K.overflows[1])[0])==null?void 0:j.placement;if(!Q)switch(w){case"bestFit":{var $;const G=($=N.filter(K=>{if(O){const J=Au(K.placement);return J===D||J==="y"}return!0}).map(K=>[K.placement,K.overflows.filter(J=>J>0).reduce((J,ne)=>J+ne,0)]).sort((K,J)=>K[1]-J[1])[0])==null?void 0:$[0];G&&(Q=G);break}case"initialPlacement":Q=c;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};async function mZ(n,e){const{placement:t,platform:r,elements:i}=n,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Eo(t),c=Os(t),l=Au(t)==="y",h=["left","top"].includes(o)?-1:1,f=s&&l?-1:1,m=Ku(e,n);let{mainAxis:y,crossAxis:w,alignmentAxis:I}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof I=="number"&&(w=c==="end"?I*-1:I),l?{x:w*f,y:y*h}:{x:y*h,y:w*f}}const yZ=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(e){var t,r;const{x:i,y:s,placement:o,middlewareData:c}=e,l=await mZ(e,n);return o===((t=c.offset)==null?void 0:t.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},wZ=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(e){const{x:t,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:c={fn:A=>{let{x:L,y:D}=A;return{x:L,y:D}}},...l}=Ku(n,e),h={x:t,y:r},f=await _E(e,l),m=Au(Eo(i)),y=rP(m);let w=h[y],I=h[m];if(s){const A=y==="y"?"top":"left",L=y==="y"?"bottom":"right",D=w+f[A],C=w-f[L];w=cv(D,w,C)}if(o){const A=m==="y"?"top":"left",L=m==="y"?"bottom":"right",D=I+f[A],C=I-f[L];I=cv(D,I,C)}const T=c.fn({...e,[y]:w,[m]:I});return{...T,data:{x:T.x-t,y:T.y-r,enabled:{[y]:s,[m]:o}}}}}};function Um(){return typeof window<"u"}function Qu(n){return oP(n)?(n.nodeName||"").toLowerCase():"#document"}function hi(n){var e;return(n==null||(e=n.ownerDocument)==null?void 0:e.defaultView)||window}function Fs(n){var e;return(e=(oP(n)?n.ownerDocument:n.document)||window.document)==null?void 0:e.documentElement}function oP(n){return Um()?n instanceof Node||n instanceof hi(n).Node:!1}function es(n){return Um()?n instanceof Element||n instanceof hi(n).Element:!1}function Ms(n){return Um()?n instanceof HTMLElement||n instanceof hi(n).HTMLElement:!1}function GS(n){return!Um()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof hi(n).ShadowRoot}function bf(n){const{overflow:e,overflowX:t,overflowY:r,display:i}=ts(n);return/auto|scroll|overlay|hidden|clip/.test(e+r+t)&&!["inline","contents"].includes(i)}function _Z(n){return["table","td","th"].includes(Qu(n))}function $m(n){return[":popover-open",":modal"].some(e=>{try{return n.matches(e)}catch{return!1}})}function vE(n){const e=bE(),t=es(n)?ts(n):n;return["transform","translate","scale","rotate","perspective"].some(r=>t[r]?t[r]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(t.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(t.contain||"").includes(r))}function vZ(n){let e=Ea(n);for(;Ms(e)&&!Su(e);){if(vE(e))return e;if($m(e))return null;e=Ea(e)}return null}function bE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Su(n){return["html","body","#document"].includes(Qu(n))}function ts(n){return hi(n).getComputedStyle(n)}function Vm(n){return es(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Ea(n){if(Qu(n)==="html")return n;const e=n.assignedSlot||n.parentNode||GS(n)&&n.host||Fs(n);return GS(e)?e.host:e}function aP(n){const e=Ea(n);return Su(e)?n.ownerDocument?n.ownerDocument.body:n.body:Ms(e)&&bf(e)?e:aP(e)}function Gd(n,e,t){var r;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=aP(n),s=i===((r=n.ownerDocument)==null?void 0:r.body),o=hi(i);if(s){const c=lv(o);return e.concat(o,o.visualViewport||[],bf(i)?i:[],c&&t?Gd(c):[])}return e.concat(i,Gd(i,[],t))}function lv(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function cP(n){const e=ts(n);let t=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ms(n),s=i?n.offsetWidth:t,o=i?n.offsetHeight:r,c=P0(t)!==s||P0(r)!==o;return c&&(t=s,r=o),{width:t,height:r,$:c}}function EE(n){return es(n)?n:n.contextElement}function ru(n){const e=EE(n);if(!Ms(e))return Ps(1);const t=e.getBoundingClientRect(),{width:r,height:i,$:s}=cP(e);let o=(s?P0(t.width):t.width)/r,c=(s?P0(t.height):t.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!c||!Number.isFinite(c))&&(c=1),{x:o,y:c}}const bZ=Ps(0);function lP(n){const e=hi(n);return!bE()||!e.visualViewport?bZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EZ(n,e,t){return e===void 0&&(e=!1),!t||e&&t!==hi(n)?!1:e}function Vc(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=n.getBoundingClientRect(),s=EE(n);let o=Ps(1);e&&(r?es(r)&&(o=ru(r)):o=ru(n));const c=EZ(s,t,r)?lP(s):Ps(0);let l=(i.left+c.x)/o.x,h=(i.top+c.y)/o.y,f=i.width/o.x,m=i.height/o.y;if(s){const y=hi(s),w=r&&es(r)?hi(r):r;let I=y,T=lv(I);for(;T&&r&&w!==I;){const A=ru(T),L=T.getBoundingClientRect(),D=ts(T),C=L.left+(T.clientLeft+parseFloat(D.paddingLeft))*A.x,k=L.top+(T.clientTop+parseFloat(D.paddingTop))*A.y;l*=A.x,h*=A.y,f*=A.x,m*=A.y,l+=C,h+=k,I=hi(T),T=lv(I)}}return N0({width:f,height:m,x:l,y:h})}function IE(n,e){const t=Vm(n).scrollLeft;return e?e.left+t:Vc(Fs(n)).left+t}function uP(n,e,t){t===void 0&&(t=!1);const r=n.getBoundingClientRect(),i=r.left+e.scrollLeft-(t?0:IE(n,r)),s=r.top+e.scrollTop;return{x:i,y:s}}function IZ(n){let{elements:e,rect:t,offsetParent:r,strategy:i}=n;const s=i==="fixed",o=Fs(r),c=e?$m(e.floating):!1;if(r===o||c&&s)return t;let l={scrollLeft:0,scrollTop:0},h=Ps(1);const f=Ps(0),m=Ms(r);if((m||!m&&!s)&&((Qu(r)!=="body"||bf(o))&&(l=Vm(r)),Ms(r))){const w=Vc(r);h=ru(r),f.x=w.x+r.clientLeft,f.y=w.y+r.clientTop}const y=o&&!m&&!s?uP(o,l,!0):Ps(0);return{width:t.width*h.x,height:t.height*h.y,x:t.x*h.x-l.scrollLeft*h.x+f.x+y.x,y:t.y*h.y-l.scrollTop*h.y+f.y+y.y}}function AZ(n){return Array.from(n.getClientRects())}function SZ(n){const e=Fs(n),t=Vm(n),r=n.ownerDocument.body,i=Pc(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Pc(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-t.scrollLeft+IE(n);const c=-t.scrollTop;return ts(r).direction==="rtl"&&(o+=Pc(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:c}}function TZ(n,e){const t=hi(n),r=Fs(n),i=t.visualViewport;let s=r.clientWidth,o=r.clientHeight,c=0,l=0;if(i){s=i.width,o=i.height;const h=bE();(!h||h&&e==="fixed")&&(c=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:c,y:l}}function RZ(n,e){const t=Vc(n,!0,e==="fixed"),r=t.top+n.clientTop,i=t.left+n.clientLeft,s=Ms(n)?ru(n):Ps(1),o=n.clientWidth*s.x,c=n.clientHeight*s.y,l=i*s.x,h=r*s.y;return{width:o,height:c,x:l,y:h}}function KS(n,e,t){let r;if(e==="viewport")r=TZ(n,t);else if(e==="document")r=SZ(Fs(n));else if(es(e))r=RZ(e,t);else{const i=lP(n);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return N0(r)}function hP(n,e){const t=Ea(n);return t===e||!es(t)||Su(t)?!1:ts(t).position==="fixed"||hP(t,e)}function CZ(n,e){const t=e.get(n);if(t)return t;let r=Gd(n,[],!1).filter(c=>es(c)&&Qu(c)!=="body"),i=null;const s=ts(n).position==="fixed";let o=s?Ea(n):n;for(;es(o)&&!Su(o);){const c=ts(o),l=vE(o);!l&&c.position==="fixed"&&(i=null),(s?!l&&!i:!l&&c.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||bf(o)&&!l&&hP(n,o))?r=r.filter(f=>f!==o):i=c,o=Ea(o)}return e.set(n,r),r}function xZ(n){let{element:e,boundary:t,rootBoundary:r,strategy:i}=n;const o=[...t==="clippingAncestors"?$m(e)?[]:CZ(e,this._c):[].concat(t),r],c=o[0],l=o.reduce((h,f)=>{const m=KS(e,f,i);return h.top=Pc(m.top,h.top),h.right=Iu(m.right,h.right),h.bottom=Iu(m.bottom,h.bottom),h.left=Pc(m.left,h.left),h},KS(e,c,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function PZ(n){const{width:e,height:t}=cP(n);return{width:e,height:t}}function OZ(n,e,t){const r=Ms(e),i=Fs(e),s=t==="fixed",o=Vc(n,!0,s,e);let c={scrollLeft:0,scrollTop:0};const l=Ps(0);if(r||!r&&!s)if((Qu(e)!=="body"||bf(i))&&(c=Vm(e)),r){const y=Vc(e,!0,s,e);l.x=y.x+e.clientLeft,l.y=y.y+e.clientTop}else i&&(l.x=IE(i));const h=i&&!r&&!s?uP(i,c):Ps(0),f=o.left+c.scrollLeft-l.x-h.x,m=o.top+c.scrollTop-l.y-h.y;return{x:f,y:m,width:o.width,height:o.height}}function cw(n){return ts(n).position==="static"}function QS(n,e){if(!Ms(n)||ts(n).position==="fixed")return null;if(e)return e(n);let t=n.offsetParent;return Fs(n)===t&&(t=t.ownerDocument.body),t}function dP(n,e){const t=hi(n);if($m(n))return t;if(!Ms(n)){let i=Ea(n);for(;i&&!Su(i);){if(es(i)&&!cw(i))return i;i=Ea(i)}return t}let r=QS(n,e);for(;r&&_Z(r)&&cw(r);)r=QS(r,e);return r&&Su(r)&&cw(r)&&!vE(r)?t:r||vZ(n)||t}const kZ=async function(n){const e=this.getOffsetParent||dP,t=this.getDimensions,r=await t(n.floating);return{reference:OZ(n.reference,await e(n.floating),n.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function NZ(n){return ts(n).direction==="rtl"}const DZ={convertOffsetParentRelativeRectToViewportRelativeRect:IZ,getDocumentElement:Fs,getClippingRect:xZ,getOffsetParent:dP,getElementRects:kZ,getClientRects:AZ,getDimensions:PZ,getScale:ru,isElement:es,isRTL:NZ};function fP(n,e){return n.x===e.x&&n.y===e.y&&n.width===e.width&&n.height===e.height}function MZ(n,e){let t=null,r;const i=Fs(n);function s(){var c;clearTimeout(r),(c=t)==null||c.disconnect(),t=null}function o(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),s();const h=n.getBoundingClientRect(),{left:f,top:m,width:y,height:w}=h;if(c||e(),!y||!w)return;const I=sg(m),T=sg(i.clientWidth-(f+y)),A=sg(i.clientHeight-(m+w)),L=sg(f),C={rootMargin:-I+"px "+-T+"px "+-A+"px "+-L+"px",threshold:Pc(0,Iu(1,l))||1};let k=!0;function P(O){const g=O[0].intersectionRatio;if(g!==l){if(!k)return o();g?o(!1,g):r=setTimeout(()=>{o(!1,1e-7)},1e3)}g===1&&!fP(h,n.getBoundingClientRect())&&o(),k=!1}try{t=new IntersectionObserver(P,{...C,root:i.ownerDocument})}catch{t=new IntersectionObserver(P,C)}t.observe(n)}return o(!0),s}function y1e(n,e,t,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,h=EE(n),f=i||s?[...h?Gd(h):[],...Gd(e)]:[];f.forEach(L=>{i&&L.addEventListener("scroll",t,{passive:!0}),s&&L.addEventListener("resize",t)});const m=h&&c?MZ(h,t):null;let y=-1,w=null;o&&(w=new ResizeObserver(L=>{let[D]=L;D&&D.target===h&&w&&(w.unobserve(e),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var C;(C=w)==null||C.observe(e)})),t()}),h&&!l&&w.observe(h),w.observe(e));let I,T=l?Vc(n):null;l&&A();function A(){const L=Vc(n);T&&!fP(T,L)&&t(),T=L,I=requestAnimationFrame(A)}return t(),()=>{var L;f.forEach(D=>{i&&D.removeEventListener("scroll",t),s&&D.removeEventListener("resize",t)}),m?.(),(L=w)==null||L.disconnect(),w=null,l&&cancelAnimationFrame(I)}}const w1e=yZ,_1e=pZ,v1e=wZ,b1e=gZ,E1e=dZ,I1e=(n,e,t)=>{const r=new Map,i={platform:DZ,...t},s={...i.platform,_c:r};return hZ(n,e,{...i,platform:s})};function Tu(n){"@babel/helpers - typeof";return Tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tu(n)}function LZ(n,e){if(Tu(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(Tu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pP(n){var e=LZ(n,"string");return Tu(e)=="symbol"?e:e+""}function UZ(n,e,t){return(e=pP(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JS(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function A1e(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JS(Object(t),!0).forEach(function(r){UZ(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):JS(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function $Z(n){if(Array.isArray(n))return n}function VZ(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,i,s,o,c=[],l=!0,h=!1;try{if(s=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(r=s.call(t)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(f){h=!0,i=f}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}function uv(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function gP(n,e){if(n){if(typeof n=="string")return uv(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?uv(n,e):void 0}}function FZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S1e(n,e){return $Z(n)||VZ(n,e)||gP(n,e)||FZ()}function T1e(n,e){if(n==null)return{};var t,r,i=nZ(n,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)t=s[r],e.includes(t)||{}.propertyIsEnumerable.call(n,t)&&(i[t]=n[t])}return i}function R1e(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function YS(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,pP(r.key),r)}}function C1e(n,e,t){return e&&YS(n.prototype,e),t&&YS(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function x1e(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&av(n,e)}function D0(n){return D0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D0(n)}function mP(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mP=function(){return!!n})()}function BZ(n,e){if(e&&(Tu(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rZ(n)}function P1e(n){var e=mP();return function(){var t,r=D0(n);if(e){var i=D0(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return BZ(this,t)}}function jZ(n){if(Array.isArray(n))return uv(n)}function qZ(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function HZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O1e(n){return jZ(n)||qZ(n)||gP(n)||HZ()}function k1e(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ef(n){return n+.5|0}const oa=(n,e,t)=>Math.max(Math.min(n,t),e);function dd(n){return oa(Ef(n*2.55),0,255)}function ha(n){return oa(Ef(n*255),0,255)}function lo(n){return oa(Ef(n/2.55)/100,0,1)}function ZS(n){return oa(Ef(n*100),0,100)}const xi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hv=[..."0123456789ABCDEF"],WZ=n=>hv[n&15],zZ=n=>hv[(n&240)>>4]+hv[n&15],og=n=>(n&240)>>4===(n&15),GZ=n=>og(n.r)&&og(n.g)&&og(n.b)&&og(n.a);function KZ(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&xi[n[1]]*17,g:255&xi[n[2]]*17,b:255&xi[n[3]]*17,a:e===5?xi[n[4]]*17:255}:(e===7||e===9)&&(t={r:xi[n[1]]<<4|xi[n[2]],g:xi[n[3]]<<4|xi[n[4]],b:xi[n[5]]<<4|xi[n[6]],a:e===9?xi[n[7]]<<4|xi[n[8]]:255})),t}const QZ=(n,e)=>n<255?e(n):"";function JZ(n){var e=GZ(n)?WZ:zZ;return n?"#"+e(n.r)+e(n.g)+e(n.b)+QZ(n.a,e):void 0}const YZ=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yP(n,e,t){const r=e*Math.min(t,1-t),i=(s,o=(s+n/30)%12)=>t-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function ZZ(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function XZ(n,e,t){const r=yP(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function eX(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function AE(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),o=Math.min(t,r,i),c=(s+o)/2;let l,h,f;return s!==o&&(f=s-o,h=c>.5?f/(2-s-o):f/(s+o),l=eX(t,r,i,f,s),l=l*60+.5),[l|0,h||0,c]}function SE(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(ha)}function TE(n,e,t){return SE(yP,n,e,t)}function tX(n,e,t){return SE(XZ,n,e,t)}function nX(n,e,t){return SE(ZZ,n,e,t)}function wP(n){return(n%360+360)%360}function rX(n){const e=YZ.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?dd(+e[5]):ha(+e[5]));const i=wP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=tX(i,s,o):e[1]==="hsv"?r=nX(i,s,o):r=TE(i,s,o),{r:r[0],g:r[1],b:r[2],a:t}}function iX(n,e){var t=AE(n);t[0]=wP(t[0]+e),t=TE(t),n.r=t[0],n.g=t[1],n.b=t[2]}function sX(n){if(!n)return;const e=AE(n),t=e[0],r=ZS(e[1]),i=ZS(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${lo(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const XS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},e3={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function oX(){const n={},e=Object.keys(e3),t=Object.keys(XS);let r,i,s,o,c;for(r=0;r<e.length;r++){for(o=c=e[r],i=0;i<t.length;i++)s=t[i],c=c.replace(s,XS[s]);s=parseInt(e3[o],16),n[c]=[s>>16&255,s>>8&255,s&255]}return n}let ag;function aX(n){ag||(ag=oX(),ag.transparent=[0,0,0,0]);const e=ag[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const cX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lX(n){const e=cX.exec(n);let t=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];t=e[8]?dd(o):oa(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?dd(r):oa(r,0,255)),i=255&(e[4]?dd(i):oa(i,0,255)),s=255&(e[6]?dd(s):oa(s,0,255)),{r,g:i,b:s,a:t}}}function uX(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${lo(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const lw=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Al=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function hX(n,e,t){const r=Al(lo(n.r)),i=Al(lo(n.g)),s=Al(lo(n.b));return{r:ha(lw(r+t*(Al(lo(e.r))-r))),g:ha(lw(i+t*(Al(lo(e.g))-i))),b:ha(lw(s+t*(Al(lo(e.b))-s))),a:n.a+t*(e.a-n.a)}}function cg(n,e,t){if(n){let r=AE(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=TE(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function _P(n,e){return n&&Object.assign(e||{},n)}function t3(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=ha(n[3]))):(e=_P(n,{r:0,g:0,b:0,a:1}),e.a=ha(e.a)),e}function dX(n){return n.charAt(0)==="r"?lX(n):rX(n)}class dv{constructor(e){if(e instanceof dv)return e;const t=typeof e;let r;t==="object"?r=t3(e):t==="string"&&(r=KZ(e)||aX(e)||dX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=_P(this._rgb);return e&&(e.a=lo(e.a)),e}set rgb(e){this._rgb=t3(e)}rgbString(){return this._valid?uX(this._rgb):void 0}hexString(){return this._valid?JZ(this._rgb):void 0}hslString(){return this._valid?sX(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const o=t===s?.5:t,c=2*o-1,l=r.a-i.a,h=((c*l===-1?c:(c+l)/(1+c*l))+1)/2;s=1-h,r.r=255&h*r.r+s*i.r+.5,r.g=255&h*r.g+s*i.g+.5,r.b=255&h*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=hX(this._rgb,e._rgb,t)),this}clone(){return new dv(this.rgb)}alpha(e){return this._rgb.a=ha(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Ef(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return cg(this._rgb,2,e),this}darken(e){return cg(this._rgb,2,-e),this}saturate(e){return cg(this._rgb,1,e),this}desaturate(e){return cg(this._rgb,1,-e),this}rotate(e){return iX(this._rgb,e),this}}const fX=n=>JSON.stringify(n,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),pX=n=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=n.replace(e,'$1"$2n"$3');return JSON.parse(t,(r,i)=>typeof i=="string"&&i.match(/^\d+n$/)?BigInt(i.substring(0,i.length-1)):i)};function Ju(n){if(typeof n!="string")throw new Error(`Cannot safe json parse value of type ${typeof n}`);try{return pX(n)}catch{return n}}function Ia(n){return typeof n=="string"?n:fX(n)||""}const gX="idb-keyval";var mX=(n={})=>{const e=n.base&&n.base.length>0?`${n.base}:`:"",t=i=>e+i;let r;return n.dbName&&n.storeName&&(r=j9(n.dbName,n.storeName)),{name:gX,options:n,async hasItem(i){return!(typeof await hA(t(i),r)>"u")},async getItem(i){return await hA(t(i),r)??null},setItem(i,s){return q9(t(i),s,r)},removeItem(i){return H9(t(i),r)},getKeys(){return W9(r)},clear(){return z9(r)}}};const yX="WALLET_CONNECT_V2_INDEXED_DB",wX="keyvaluestorage";let _X=class{constructor(){this.indexedDb=J9({driver:mX({dbName:yX,storeName:wX})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ia(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var uw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kg={exports:{}};(function(){let n;function e(){}n=e,n.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},n.prototype.setItem=function(t,r){this[t]=String(r)},n.prototype.removeItem=function(t){delete this[t]},n.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(r){t[r]=void 0,delete t[r]})},n.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},n.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof uw<"u"&&uw.localStorage?Kg.exports=uw.localStorage:typeof window<"u"&&window.localStorage?Kg.exports=window.localStorage:Kg.exports=new e})();function vX(n){var e;return[n[0],Ju((e=n[1])!=null?e:"")]}let bX=class{constructor(){this.localStorage=Kg.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(vX)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return Ju(t)}async setItem(e,t){this.localStorage.setItem(e,Ia(t))}async removeItem(e){this.localStorage.removeItem(e)}};const EX="wc_storage_version",n3=1,IX=async(n,e,t)=>{const r=EX,i=await e.getItem(r);if(i&&i>=n3){t(e);return}const s=await n.getKeys();if(!s.length){t(e);return}const o=[];for(;s.length;){const c=s.shift();if(!c)continue;const l=c.toLowerCase();if(l.includes("wc@")||l.includes("walletconnect")||l.includes("wc_")||l.includes("wallet_connect")){const h=await n.getItem(c);await e.setItem(c,h),o.push(c)}}await e.setItem(r,n3),t(e),AX(n,o)},AX=async(n,e)=>{e.length&&e.forEach(async t=>{await n.removeItem(t)})};let SX=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new bX;this.storage=e;try{const t=new _X;IX(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var Yu={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fv=function(n,e){return fv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},fv(n,e)};function TX(n,e){fv(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var pv=function(){return pv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},pv.apply(this,arguments)};function RX(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function CX(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function xX(n,e){return function(t,r){e(t,r,n)}}function PX(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function OX(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(f){try{h(r.next(f))}catch(m){o(m)}}function l(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(c,l)}h((r=r.apply(n,e||[])).next())})}function kX(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(f){return l([h,f])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){t.label=h[1];break}if(h[0]===6&&t.label<s[1]){t.label=s[1],s=h;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(h);break}s[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(f){h=[6,f],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function NX(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function DX(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function gv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vP(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function MX(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(vP(arguments[e]));return n}function LX(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,i++)r[i]=s[o];return r}function Kd(n){return this instanceof Kd?(this.v=n,this):new Kd(n)}function UX(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){r[y]&&(i[y]=function(w){return new Promise(function(I,T){s.push([y,w,I,T])>1||c(y,w)})})}function c(y,w){try{l(r[y](w))}catch(I){m(s[0][3],I)}}function l(y){y.value instanceof Kd?Promise.resolve(y.value.v).then(h,f):m(s[0][2],y)}function h(y){c("next",y)}function f(y){c("throw",y)}function m(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function $X(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Kd(n[i](o)),done:i==="return"}:s?s(o):o}:s}}function VX(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof gv=="function"?gv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,l){o=n[s](o),i(c,l,o.done,o.value)})}}function i(s,o,c,l){Promise.resolve(l).then(function(h){s({value:h,done:c})},o)}}function FX(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function BX(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function jX(n){return n&&n.__esModule?n:{default:n}}function qX(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function HX(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const WX=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return pv},__asyncDelegator:$X,__asyncGenerator:UX,__asyncValues:VX,__await:Kd,__awaiter:OX,__classPrivateFieldGet:qX,__classPrivateFieldSet:HX,__createBinding:NX,__decorate:CX,__exportStar:DX,__extends:TX,__generator:kX,__importDefault:jX,__importStar:BX,__makeTemplateObject:FX,__metadata:PX,__param:xX,__read:vP,__rest:RX,__spread:MX,__spreadArrays:LX,__values:gv},Symbol.toStringTag,{value:"Module"})),Fm=Bc(WX);var jh={},hw={},qh={};class Jc{}const zX=Object.freeze(Object.defineProperty({__proto__:null,IEvents:Jc},Symbol.toStringTag,{value:"Module"})),GX=Bc(zX);var r3;function KX(){if(r3)return qh;r3=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.IHeartBeat=void 0;const n=GX;class e extends n.IEvents{constructor(r){super()}}return qh.IHeartBeat=e,qh}var i3;function bP(){return i3||(i3=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Fm.__exportStar(KX(),n)}(hw)),hw}var dw={},tc={},s3;function QX(){if(s3)return tc;s3=1,Object.defineProperty(tc,"__esModule",{value:!0}),tc.HEARTBEAT_EVENTS=tc.HEARTBEAT_INTERVAL=void 0;const n=Pe;return tc.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,tc.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},tc}var o3;function EP(){return o3||(o3=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),Fm.__exportStar(QX(),n)}(dw)),dw}var a3;function JX(){if(a3)return jh;a3=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.HeartBeat=void 0;const n=Fm,e=Pr,t=Pe,r=bP(),i=EP();class s extends r.IHeartBeat{constructor(c){super(c),this.events=new e.EventEmitter,this.interval=i.HEARTBEAT_INTERVAL,this.interval=c?.interval||i.HEARTBEAT_INTERVAL}static init(c){return n.__awaiter(this,void 0,void 0,function*(){const l=new s(c);return yield l.init(),l})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(c,l){this.events.on(c,l)}once(c,l){this.events.once(c,l)}off(c,l){this.events.off(c,l)}removeListener(c,l){this.events.removeListener(c,l)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(i.HEARTBEAT_EVENTS.pulse)}}return jh.HeartBeat=s,jh}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=Fm;e.__exportStar(JX(),n),e.__exportStar(bP(),n),e.__exportStar(EP(),n)})(Yu);const YX={level:"info"},If="custom_context";var ZX=Object.defineProperty,XX=Object.defineProperties,eee=Object.getOwnPropertyDescriptors,c3=Object.getOwnPropertySymbols,tee=Object.prototype.hasOwnProperty,nee=Object.prototype.propertyIsEnumerable,l3=(n,e,t)=>e in n?ZX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ree=(n,e)=>{for(var t in e||(e={}))tee.call(e,t)&&l3(n,t,e[t]);if(c3)for(var t of c3(e))nee.call(e,t)&&l3(n,t,e[t]);return n},iee=(n,e)=>XX(n,eee(e));function Bm(n){return iee(ree({},n),{level:n?.level||YX.level})}function see(n,e=If){return n[e]||""}function oee(n,e,t=If){return n[t]=e,n}function Qr(n,e=If){let t="";return typeof n.bindings>"u"?t=see(n,e):t=n.bindings().context||"",t}function aee(n,e,t=If){const r=Qr(n,t);return r.trim()?`${r}/${e}`:e}function Jr(n,e,t=If){const r=aee(n,e,t),i=n.child({context:r});return oee(i,r,t)}let cee=class extends Jc{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},lee=class extends Jc{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},uee=class{constructor(e,t){this.logger=e,this.core=t}},hee=class extends Jc{constructor(e,t){super(),this.relayer=e,this.logger=t}},dee=class extends Jc{constructor(e){super()}},fee=class{constructor(e,t,r,i){this.core=e,this.logger=t,this.name=r}},pee=class extends Jc{constructor(e,t){super(),this.relayer=e,this.logger=t}},gee=class extends Jc{constructor(e,t){super(),this.core=e,this.logger=t}},mee=class{constructor(e,t){this.projectId=e,this.logger=t}},yee=class{constructor(e,t){this.projectId=e,this.logger=t}},wee=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},_ee=class{constructor(e){this.client=e}};var RE={},IP={};(function(n){Object.defineProperty(n,"__esModule",{value:!0});var e=et,t=pi;n.DIGEST_LENGTH=64,n.BLOCK_SIZE=128;var r=function(){function c(){this.digestLength=n.DIGEST_LENGTH,this.blockSize=n.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return c.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},c.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},c.prototype.clean=function(){t.wipe(this._buffer),t.wipe(this._tempHi),t.wipe(this._tempLo),this.reset()},c.prototype.update=function(l,h){if(h===void 0&&(h=l.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var f=0;if(this._bytesHashed+=h,this._bufferLength>0){for(;this._bufferLength<n.BLOCK_SIZE&&h>0;)this._buffer[this._bufferLength++]=l[f++],h--;this._bufferLength===this.blockSize&&(s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(h>=this.blockSize&&(f=s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,l,f,h),h%=this.blockSize);h>0;)this._buffer[this._bufferLength++]=l[f++],h--;return this},c.prototype.finish=function(l){if(!this._finished){var h=this._bytesHashed,f=this._bufferLength,m=h/536870912|0,y=h<<3,w=h%128<112?128:256;this._buffer[f]=128;for(var I=f+1;I<w-8;I++)this._buffer[I]=0;e.writeUint32BE(m,this._buffer,w-8),e.writeUint32BE(y,this._buffer,w-4),s(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var I=0;I<this.digestLength/8;I++)e.writeUint32BE(this._stateHi[I],l,I*8),e.writeUint32BE(this._stateLo[I],l,I*8+4);return this},c.prototype.digest=function(){var l=new Uint8Array(this.digestLength);return this.finish(l),l},c.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},c.prototype.restoreState=function(l){return this._stateHi.set(l.stateHi),this._stateLo.set(l.stateLo),this._bufferLength=l.bufferLength,l.buffer&&this._buffer.set(l.buffer),this._bytesHashed=l.bytesHashed,this._finished=!1,this},c.prototype.cleanSavedState=function(l){t.wipe(l.stateHi),t.wipe(l.stateLo),l.buffer&&t.wipe(l.buffer),l.bufferLength=0,l.bytesHashed=0},c}();n.SHA512=r;var i=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function s(c,l,h,f,m,y,w){for(var I=h[0],T=h[1],A=h[2],L=h[3],D=h[4],C=h[5],k=h[6],P=h[7],O=f[0],g=f[1],_=f[2],R=f[3],N=f[4],M=f[5],j=f[6],$=f[7],q,B,Q,G,K,J,ne,se;w>=128;){for(var pe=0;pe<16;pe++){var ae=8*pe+y;c[pe]=e.readUint32BE(m,ae),l[pe]=e.readUint32BE(m,ae+4)}for(var pe=0;pe<80;pe++){var Ae=I,we=T,De=A,ee=L,re=D,Y=C,E=k,W=P,ge=O,ye=g,Me=_,We=R,tt=N,nt=M,Zt=j,Jt=$;if(q=P,B=$,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=(D>>>14|N<<18)^(D>>>18|N<<14)^(N>>>9|D<<23),B=(N>>>14|D<<18)^(N>>>18|D<<14)^(D>>>9|N<<23),K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,q=D&C^~D&k,B=N&M^~N&j,K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,q=i[pe*2],B=i[pe*2+1],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,q=c[pe%16],B=l[pe%16],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,Q=ne&65535|se<<16,G=K&65535|J<<16,q=Q,B=G,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=(I>>>28|O<<4)^(O>>>2|I<<30)^(O>>>7|I<<25),B=(O>>>28|I<<4)^(I>>>2|O<<30)^(I>>>7|O<<25),K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,q=I&T^I&A^T&A,B=O&g^O&_^g&_,K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,W=ne&65535|se<<16,Jt=K&65535|J<<16,q=ee,B=We,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=Q,B=G,K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,ee=ne&65535|se<<16,We=K&65535|J<<16,T=Ae,A=we,L=De,D=ee,C=re,k=Y,P=E,I=W,g=ge,_=ye,R=Me,N=We,M=tt,j=nt,$=Zt,O=Jt,pe%16===15)for(var ae=0;ae<16;ae++)q=c[ae],B=l[ae],K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=c[(ae+9)%16],B=l[(ae+9)%16],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,Q=c[(ae+1)%16],G=l[(ae+1)%16],q=(Q>>>1|G<<31)^(Q>>>8|G<<24)^Q>>>7,B=(G>>>1|Q<<31)^(G>>>8|Q<<24)^(G>>>7|Q<<25),K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,Q=c[(ae+14)%16],G=l[(ae+14)%16],q=(Q>>>19|G<<13)^(G>>>29|Q<<3)^Q>>>6,B=(G>>>19|Q<<13)^(Q>>>29|G<<3)^(G>>>6|Q<<26),K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,c[ae]=ne&65535|se<<16,l[ae]=K&65535|J<<16}q=I,B=O,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[0],B=f[0],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[0]=I=ne&65535|se<<16,f[0]=O=K&65535|J<<16,q=T,B=g,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[1],B=f[1],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[1]=T=ne&65535|se<<16,f[1]=g=K&65535|J<<16,q=A,B=_,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[2],B=f[2],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[2]=A=ne&65535|se<<16,f[2]=_=K&65535|J<<16,q=L,B=R,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[3],B=f[3],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[3]=L=ne&65535|se<<16,f[3]=R=K&65535|J<<16,q=D,B=N,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[4],B=f[4],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[4]=D=ne&65535|se<<16,f[4]=N=K&65535|J<<16,q=C,B=M,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[5],B=f[5],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[5]=C=ne&65535|se<<16,f[5]=M=K&65535|J<<16,q=k,B=j,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[6],B=f[6],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[6]=k=ne&65535|se<<16,f[6]=j=K&65535|J<<16,q=P,B=$,K=B&65535,J=B>>>16,ne=q&65535,se=q>>>16,q=h[7],B=f[7],K+=B&65535,J+=B>>>16,ne+=q&65535,se+=q>>>16,J+=K>>>16,ne+=J>>>16,se+=ne>>>16,h[7]=P=ne&65535|se<<16,f[7]=$=K&65535|J<<16,y+=128,w-=128}return y}function o(c){var l=new r;l.update(c);var h=l.digest();return l.clean(),h}n.hash=o})(IP);(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.convertSecretKeyToX25519=n.convertPublicKeyToX25519=n.verify=n.sign=n.extractPublicKeyFromSecretKey=n.generateKeyPair=n.generateKeyPairFromSeed=n.SEED_LENGTH=n.SECRET_KEY_LENGTH=n.PUBLIC_KEY_LENGTH=n.SIGNATURE_LENGTH=void 0;const e=Uu,t=IP,r=pi;n.SIGNATURE_LENGTH=64,n.PUBLIC_KEY_LENGTH=32,n.SECRET_KEY_LENGTH=64,n.SEED_LENGTH=32;function i(ee){const re=new Float64Array(16);if(ee)for(let Y=0;Y<ee.length;Y++)re[Y]=ee[Y];return re}const s=new Uint8Array(32);s[0]=9;const o=i(),c=i([1]),l=i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),h=i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),f=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),y=i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(ee,re){for(let Y=0;Y<16;Y++)ee[Y]=re[Y]|0}function I(ee){let re=1;for(let Y=0;Y<16;Y++){let E=ee[Y]+re+65535;re=Math.floor(E/65536),ee[Y]=E-re*65536}ee[0]+=re-1+37*(re-1)}function T(ee,re,Y){const E=~(Y-1);for(let W=0;W<16;W++){const ge=E&(ee[W]^re[W]);ee[W]^=ge,re[W]^=ge}}function A(ee,re){const Y=i(),E=i();for(let W=0;W<16;W++)E[W]=re[W];I(E),I(E),I(E);for(let W=0;W<2;W++){Y[0]=E[0]-65517;for(let ye=1;ye<15;ye++)Y[ye]=E[ye]-65535-(Y[ye-1]>>16&1),Y[ye-1]&=65535;Y[15]=E[15]-32767-(Y[14]>>16&1);const ge=Y[15]>>16&1;Y[14]&=65535,T(E,Y,1-ge)}for(let W=0;W<16;W++)ee[2*W]=E[W]&255,ee[2*W+1]=E[W]>>8}function L(ee,re){let Y=0;for(let E=0;E<32;E++)Y|=ee[E]^re[E];return(1&Y-1>>>8)-1}function D(ee,re){const Y=new Uint8Array(32),E=new Uint8Array(32);return A(Y,ee),A(E,re),L(Y,E)}function C(ee){const re=new Uint8Array(32);return A(re,ee),re[0]&1}function k(ee,re){for(let Y=0;Y<16;Y++)ee[Y]=re[2*Y]+(re[2*Y+1]<<8);ee[15]&=32767}function P(ee,re,Y){for(let E=0;E<16;E++)ee[E]=re[E]+Y[E]}function O(ee,re,Y){for(let E=0;E<16;E++)ee[E]=re[E]-Y[E]}function g(ee,re,Y){let E,W,ge=0,ye=0,Me=0,We=0,tt=0,nt=0,Zt=0,Jt=0,Ye=0,Fe=0,Ze=0,ze=0,Xe=0,je=0,Oe=0,Ce=0,qe=0,lt=0,dt=0,pt=0,ut=0,wt=0,It=0,At=0,kr=0,Yr=0,gi=0,is=0,Bs=0,mi=0,js=0,dn=Y[0],zt=Y[1],vn=Y[2],rn=Y[3],fn=Y[4],Xt=Y[5],bn=Y[6],St=Y[7],sn=Y[8],en=Y[9],Gt=Y[10],Rn=Y[11],Cn=Y[12],Yt=Y[13],xn=Y[14],Pn=Y[15];E=re[0],ge+=E*dn,ye+=E*zt,Me+=E*vn,We+=E*rn,tt+=E*fn,nt+=E*Xt,Zt+=E*bn,Jt+=E*St,Ye+=E*sn,Fe+=E*en,Ze+=E*Gt,ze+=E*Rn,Xe+=E*Cn,je+=E*Yt,Oe+=E*xn,Ce+=E*Pn,E=re[1],ye+=E*dn,Me+=E*zt,We+=E*vn,tt+=E*rn,nt+=E*fn,Zt+=E*Xt,Jt+=E*bn,Ye+=E*St,Fe+=E*sn,Ze+=E*en,ze+=E*Gt,Xe+=E*Rn,je+=E*Cn,Oe+=E*Yt,Ce+=E*xn,qe+=E*Pn,E=re[2],Me+=E*dn,We+=E*zt,tt+=E*vn,nt+=E*rn,Zt+=E*fn,Jt+=E*Xt,Ye+=E*bn,Fe+=E*St,Ze+=E*sn,ze+=E*en,Xe+=E*Gt,je+=E*Rn,Oe+=E*Cn,Ce+=E*Yt,qe+=E*xn,lt+=E*Pn,E=re[3],We+=E*dn,tt+=E*zt,nt+=E*vn,Zt+=E*rn,Jt+=E*fn,Ye+=E*Xt,Fe+=E*bn,Ze+=E*St,ze+=E*sn,Xe+=E*en,je+=E*Gt,Oe+=E*Rn,Ce+=E*Cn,qe+=E*Yt,lt+=E*xn,dt+=E*Pn,E=re[4],tt+=E*dn,nt+=E*zt,Zt+=E*vn,Jt+=E*rn,Ye+=E*fn,Fe+=E*Xt,Ze+=E*bn,ze+=E*St,Xe+=E*sn,je+=E*en,Oe+=E*Gt,Ce+=E*Rn,qe+=E*Cn,lt+=E*Yt,dt+=E*xn,pt+=E*Pn,E=re[5],nt+=E*dn,Zt+=E*zt,Jt+=E*vn,Ye+=E*rn,Fe+=E*fn,Ze+=E*Xt,ze+=E*bn,Xe+=E*St,je+=E*sn,Oe+=E*en,Ce+=E*Gt,qe+=E*Rn,lt+=E*Cn,dt+=E*Yt,pt+=E*xn,ut+=E*Pn,E=re[6],Zt+=E*dn,Jt+=E*zt,Ye+=E*vn,Fe+=E*rn,Ze+=E*fn,ze+=E*Xt,Xe+=E*bn,je+=E*St,Oe+=E*sn,Ce+=E*en,qe+=E*Gt,lt+=E*Rn,dt+=E*Cn,pt+=E*Yt,ut+=E*xn,wt+=E*Pn,E=re[7],Jt+=E*dn,Ye+=E*zt,Fe+=E*vn,Ze+=E*rn,ze+=E*fn,Xe+=E*Xt,je+=E*bn,Oe+=E*St,Ce+=E*sn,qe+=E*en,lt+=E*Gt,dt+=E*Rn,pt+=E*Cn,ut+=E*Yt,wt+=E*xn,It+=E*Pn,E=re[8],Ye+=E*dn,Fe+=E*zt,Ze+=E*vn,ze+=E*rn,Xe+=E*fn,je+=E*Xt,Oe+=E*bn,Ce+=E*St,qe+=E*sn,lt+=E*en,dt+=E*Gt,pt+=E*Rn,ut+=E*Cn,wt+=E*Yt,It+=E*xn,At+=E*Pn,E=re[9],Fe+=E*dn,Ze+=E*zt,ze+=E*vn,Xe+=E*rn,je+=E*fn,Oe+=E*Xt,Ce+=E*bn,qe+=E*St,lt+=E*sn,dt+=E*en,pt+=E*Gt,ut+=E*Rn,wt+=E*Cn,It+=E*Yt,At+=E*xn,kr+=E*Pn,E=re[10],Ze+=E*dn,ze+=E*zt,Xe+=E*vn,je+=E*rn,Oe+=E*fn,Ce+=E*Xt,qe+=E*bn,lt+=E*St,dt+=E*sn,pt+=E*en,ut+=E*Gt,wt+=E*Rn,It+=E*Cn,At+=E*Yt,kr+=E*xn,Yr+=E*Pn,E=re[11],ze+=E*dn,Xe+=E*zt,je+=E*vn,Oe+=E*rn,Ce+=E*fn,qe+=E*Xt,lt+=E*bn,dt+=E*St,pt+=E*sn,ut+=E*en,wt+=E*Gt,It+=E*Rn,At+=E*Cn,kr+=E*Yt,Yr+=E*xn,gi+=E*Pn,E=re[12],Xe+=E*dn,je+=E*zt,Oe+=E*vn,Ce+=E*rn,qe+=E*fn,lt+=E*Xt,dt+=E*bn,pt+=E*St,ut+=E*sn,wt+=E*en,It+=E*Gt,At+=E*Rn,kr+=E*Cn,Yr+=E*Yt,gi+=E*xn,is+=E*Pn,E=re[13],je+=E*dn,Oe+=E*zt,Ce+=E*vn,qe+=E*rn,lt+=E*fn,dt+=E*Xt,pt+=E*bn,ut+=E*St,wt+=E*sn,It+=E*en,At+=E*Gt,kr+=E*Rn,Yr+=E*Cn,gi+=E*Yt,is+=E*xn,Bs+=E*Pn,E=re[14],Oe+=E*dn,Ce+=E*zt,qe+=E*vn,lt+=E*rn,dt+=E*fn,pt+=E*Xt,ut+=E*bn,wt+=E*St,It+=E*sn,At+=E*en,kr+=E*Gt,Yr+=E*Rn,gi+=E*Cn,is+=E*Yt,Bs+=E*xn,mi+=E*Pn,E=re[15],Ce+=E*dn,qe+=E*zt,lt+=E*vn,dt+=E*rn,pt+=E*fn,ut+=E*Xt,wt+=E*bn,It+=E*St,At+=E*sn,kr+=E*en,Yr+=E*Gt,gi+=E*Rn,is+=E*Cn,Bs+=E*Yt,mi+=E*xn,js+=E*Pn,ge+=38*qe,ye+=38*lt,Me+=38*dt,We+=38*pt,tt+=38*ut,nt+=38*wt,Zt+=38*It,Jt+=38*At,Ye+=38*kr,Fe+=38*Yr,Ze+=38*gi,ze+=38*is,Xe+=38*Bs,je+=38*mi,Oe+=38*js,W=1,E=ge+W+65535,W=Math.floor(E/65536),ge=E-W*65536,E=ye+W+65535,W=Math.floor(E/65536),ye=E-W*65536,E=Me+W+65535,W=Math.floor(E/65536),Me=E-W*65536,E=We+W+65535,W=Math.floor(E/65536),We=E-W*65536,E=tt+W+65535,W=Math.floor(E/65536),tt=E-W*65536,E=nt+W+65535,W=Math.floor(E/65536),nt=E-W*65536,E=Zt+W+65535,W=Math.floor(E/65536),Zt=E-W*65536,E=Jt+W+65535,W=Math.floor(E/65536),Jt=E-W*65536,E=Ye+W+65535,W=Math.floor(E/65536),Ye=E-W*65536,E=Fe+W+65535,W=Math.floor(E/65536),Fe=E-W*65536,E=Ze+W+65535,W=Math.floor(E/65536),Ze=E-W*65536,E=ze+W+65535,W=Math.floor(E/65536),ze=E-W*65536,E=Xe+W+65535,W=Math.floor(E/65536),Xe=E-W*65536,E=je+W+65535,W=Math.floor(E/65536),je=E-W*65536,E=Oe+W+65535,W=Math.floor(E/65536),Oe=E-W*65536,E=Ce+W+65535,W=Math.floor(E/65536),Ce=E-W*65536,ge+=W-1+37*(W-1),W=1,E=ge+W+65535,W=Math.floor(E/65536),ge=E-W*65536,E=ye+W+65535,W=Math.floor(E/65536),ye=E-W*65536,E=Me+W+65535,W=Math.floor(E/65536),Me=E-W*65536,E=We+W+65535,W=Math.floor(E/65536),We=E-W*65536,E=tt+W+65535,W=Math.floor(E/65536),tt=E-W*65536,E=nt+W+65535,W=Math.floor(E/65536),nt=E-W*65536,E=Zt+W+65535,W=Math.floor(E/65536),Zt=E-W*65536,E=Jt+W+65535,W=Math.floor(E/65536),Jt=E-W*65536,E=Ye+W+65535,W=Math.floor(E/65536),Ye=E-W*65536,E=Fe+W+65535,W=Math.floor(E/65536),Fe=E-W*65536,E=Ze+W+65535,W=Math.floor(E/65536),Ze=E-W*65536,E=ze+W+65535,W=Math.floor(E/65536),ze=E-W*65536,E=Xe+W+65535,W=Math.floor(E/65536),Xe=E-W*65536,E=je+W+65535,W=Math.floor(E/65536),je=E-W*65536,E=Oe+W+65535,W=Math.floor(E/65536),Oe=E-W*65536,E=Ce+W+65535,W=Math.floor(E/65536),Ce=E-W*65536,ge+=W-1+37*(W-1),ee[0]=ge,ee[1]=ye,ee[2]=Me,ee[3]=We,ee[4]=tt,ee[5]=nt,ee[6]=Zt,ee[7]=Jt,ee[8]=Ye,ee[9]=Fe,ee[10]=Ze,ee[11]=ze,ee[12]=Xe,ee[13]=je,ee[14]=Oe,ee[15]=Ce}function _(ee,re){g(ee,re,re)}function R(ee,re){const Y=i();let E;for(E=0;E<16;E++)Y[E]=re[E];for(E=253;E>=0;E--)_(Y,Y),E!==2&&E!==4&&g(Y,Y,re);for(E=0;E<16;E++)ee[E]=Y[E]}function N(ee,re){const Y=i();let E;for(E=0;E<16;E++)Y[E]=re[E];for(E=250;E>=0;E--)_(Y,Y),E!==1&&g(Y,Y,re);for(E=0;E<16;E++)ee[E]=Y[E]}function M(ee,re){const Y=i(),E=i(),W=i(),ge=i(),ye=i(),Me=i(),We=i(),tt=i(),nt=i();O(Y,ee[1],ee[0]),O(nt,re[1],re[0]),g(Y,Y,nt),P(E,ee[0],ee[1]),P(nt,re[0],re[1]),g(E,E,nt),g(W,ee[3],re[3]),g(W,W,h),g(ge,ee[2],re[2]),P(ge,ge,ge),O(ye,E,Y),O(Me,ge,W),P(We,ge,W),P(tt,E,Y),g(ee[0],ye,Me),g(ee[1],tt,We),g(ee[2],We,Me),g(ee[3],ye,tt)}function j(ee,re,Y){for(let E=0;E<4;E++)T(ee[E],re[E],Y)}function $(ee,re){const Y=i(),E=i(),W=i();R(W,re[2]),g(Y,re[0],W),g(E,re[1],W),A(ee,E),ee[31]^=C(Y)<<7}function q(ee,re,Y){w(ee[0],o),w(ee[1],c),w(ee[2],c),w(ee[3],o);for(let E=255;E>=0;--E){const W=Y[E/8|0]>>(E&7)&1;j(ee,re,W),M(re,ee),M(ee,ee),j(ee,re,W)}}function B(ee,re){const Y=[i(),i(),i(),i()];w(Y[0],f),w(Y[1],m),w(Y[2],c),g(Y[3],f,m),q(ee,Y,re)}function Q(ee){if(ee.length!==n.SEED_LENGTH)throw new Error(`ed25519: seed must be ${n.SEED_LENGTH} bytes`);const re=(0,t.hash)(ee);re[0]&=248,re[31]&=127,re[31]|=64;const Y=new Uint8Array(32),E=[i(),i(),i(),i()];B(E,re),$(Y,E);const W=new Uint8Array(64);return W.set(ee),W.set(Y,32),{publicKey:Y,secretKey:W}}n.generateKeyPairFromSeed=Q;function G(ee){const re=(0,e.randomBytes)(32,ee),Y=Q(re);return(0,r.wipe)(re),Y}n.generateKeyPair=G;function K(ee){if(ee.length!==n.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${n.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(ee.subarray(32))}n.extractPublicKeyFromSecretKey=K;const J=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ne(ee,re){let Y,E,W,ge;for(E=63;E>=32;--E){for(Y=0,W=E-32,ge=E-12;W<ge;++W)re[W]+=Y-16*re[E]*J[W-(E-32)],Y=Math.floor((re[W]+128)/256),re[W]-=Y*256;re[W]+=Y,re[E]=0}for(Y=0,W=0;W<32;W++)re[W]+=Y-(re[31]>>4)*J[W],Y=re[W]>>8,re[W]&=255;for(W=0;W<32;W++)re[W]-=Y*J[W];for(E=0;E<32;E++)re[E+1]+=re[E]>>8,ee[E]=re[E]&255}function se(ee){const re=new Float64Array(64);for(let Y=0;Y<64;Y++)re[Y]=ee[Y];for(let Y=0;Y<64;Y++)ee[Y]=0;ne(ee,re)}function pe(ee,re){const Y=new Float64Array(64),E=[i(),i(),i(),i()],W=(0,t.hash)(ee.subarray(0,32));W[0]&=248,W[31]&=127,W[31]|=64;const ge=new Uint8Array(64);ge.set(W.subarray(32),32);const ye=new t.SHA512;ye.update(ge.subarray(32)),ye.update(re);const Me=ye.digest();ye.clean(),se(Me),B(E,Me),$(ge,E),ye.reset(),ye.update(ge.subarray(0,32)),ye.update(ee.subarray(32)),ye.update(re);const We=ye.digest();se(We);for(let tt=0;tt<32;tt++)Y[tt]=Me[tt];for(let tt=0;tt<32;tt++)for(let nt=0;nt<32;nt++)Y[tt+nt]+=We[tt]*W[nt];return ne(ge.subarray(32),Y),ge}n.sign=pe;function ae(ee,re){const Y=i(),E=i(),W=i(),ge=i(),ye=i(),Me=i(),We=i();return w(ee[2],c),k(ee[1],re),_(W,ee[1]),g(ge,W,l),O(W,W,ee[2]),P(ge,ee[2],ge),_(ye,ge),_(Me,ye),g(We,Me,ye),g(Y,We,W),g(Y,Y,ge),N(Y,Y),g(Y,Y,W),g(Y,Y,ge),g(Y,Y,ge),g(ee[0],Y,ge),_(E,ee[0]),g(E,E,ge),D(E,W)&&g(ee[0],ee[0],y),_(E,ee[0]),g(E,E,ge),D(E,W)?-1:(C(ee[0])===re[31]>>7&&O(ee[0],o,ee[0]),g(ee[3],ee[0],ee[1]),0)}function Ae(ee,re,Y){const E=new Uint8Array(32),W=[i(),i(),i(),i()],ge=[i(),i(),i(),i()];if(Y.length!==n.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${n.SIGNATURE_LENGTH} bytes`);if(ae(ge,ee))return!1;const ye=new t.SHA512;ye.update(Y.subarray(0,32)),ye.update(ee),ye.update(re);const Me=ye.digest();return se(Me),q(W,ge,Me),B(ge,Y.subarray(32)),M(W,ge),$(E,W),!L(Y,E)}n.verify=Ae;function we(ee){let re=[i(),i(),i(),i()];if(ae(re,ee))throw new Error("Ed25519: invalid public key");let Y=i(),E=i(),W=re[1];P(Y,c,W),O(E,c,W),R(E,E),g(Y,Y,E);let ge=new Uint8Array(32);return A(ge,Y),ge}n.convertPublicKeyToX25519=we;function De(ee){const re=(0,t.hash)(ee.subarray(0,32));re[0]&=248,re[31]&=127,re[31]|=64;const Y=new Uint8Array(re.subarray(0,32));return(0,r.wipe)(re),Y}n.convertSecretKeyToX25519=De})(RE);const vee="EdDSA",bee="JWT",AP=".",SP="base64url",Eee="utf8",Iee="utf8",Aee=":",See="did",Tee="key",u3="base58btc",Ree="z",Cee="K36",xee=32;function M0(n){return xr(zr(Ia(n),Eee),SP)}function TP(n){const e=zr(Cee,u3),t=Ree+xr(h_([e,n]),u3);return[See,Tee,t].join(Aee)}function Pee(n){return xr(n,SP)}function Oee(n){return zr([M0(n.header),M0(n.payload)].join(AP),Iee)}function kee(n){return[M0(n.header),M0(n.payload),Pee(n.signature)].join(AP)}function h3(n=Uu.randomBytes(xee)){return RE.generateKeyPairFromSeed(n)}async function Nee(n,e,t,r,i=Pe.fromMiliseconds(Date.now())){const s={alg:vee,typ:bee},o=TP(r.publicKey),c=i+t,l={iss:o,sub:n,aud:e,iat:i,exp:c},h=Oee({header:s,payload:l}),f=RE.sign(r.secretKey,h);return kee({header:s,payload:l,signature:f})}const Dee="PARSE_ERROR",Mee="INVALID_REQUEST",Lee="METHOD_NOT_FOUND",Uee="INVALID_PARAMS",RP="INTERNAL_ERROR",CE="SERVER_ERROR",$ee=[-32700,-32600,-32601,-32602,-32603],Id={[Dee]:{code:-32700,message:"Parse error"},[Mee]:{code:-32600,message:"Invalid Request"},[Lee]:{code:-32601,message:"Method not found"},[Uee]:{code:-32602,message:"Invalid params"},[RP]:{code:-32603,message:"Internal error"},[CE]:{code:-32e3,message:"Server error"}},CP=CE;function Vee(n){return $ee.includes(n)}function d3(n){return Object.keys(Id).includes(n)?Id[n]:Id[CP]}function Fee(n){const e=Object.values(Id).find(t=>t.code===n);return e||Id[CP]}function xP(n,e,t){return n.message.includes("getaddrinfo ENOTFOUND")||n.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):n}var Yc={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mv=function(n,e){return mv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)r.hasOwnProperty(i)&&(t[i]=r[i])},mv(n,e)};function Bee(n,e){mv(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var yv=function(){return yv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},yv.apply(this,arguments)};function jee(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function qee(n,e,t,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(n,e,t,r);else for(var c=n.length-1;c>=0;c--)(o=n[c])&&(s=(i<3?o(s):i>3?o(e,t,s):o(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Hee(n,e){return function(t,r){e(t,r,n)}}function Wee(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)}function zee(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function c(f){try{h(r.next(f))}catch(m){o(m)}}function l(f){try{h(r.throw(f))}catch(m){o(m)}}function h(f){f.done?s(f.value):i(f.value).then(c,l)}h((r=r.apply(n,e||[])).next())})}function Gee(n,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(h){return function(f){return l([h,f])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){t.label=h[1];break}if(h[0]===6&&t.label<s[1]){t.label=s[1],s=h;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(h);break}s[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(f){h=[6,f],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Kee(n,e,t,r){r===void 0&&(r=t),n[r]=e[t]}function Qee(n,e){for(var t in n)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function wv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function PP(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){o={error:c}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(o)throw o.error}}return s}function Jee(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(PP(arguments[e]));return n}function Yee(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,i++)r[i]=s[o];return r}function Qd(n){return this instanceof Qd?(this.v=n,this):new Qd(n)}function Zee(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(y){r[y]&&(i[y]=function(w){return new Promise(function(I,T){s.push([y,w,I,T])>1||c(y,w)})})}function c(y,w){try{l(r[y](w))}catch(I){m(s[0][3],I)}}function l(y){y.value instanceof Qd?Promise.resolve(y.value.v).then(h,f):m(s[0][2],y)}function h(y){c("next",y)}function f(y){c("throw",y)}function m(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Xee(n){var e,t;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=n[i]?function(o){return(t=!t)?{value:Qd(n[i](o)),done:i==="return"}:s?s(o):o}:s}}function ete(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof wv=="function"?wv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(c,l){o=n[s](o),i(c,l,o.done,o.value)})}}function i(s,o,c,l){Promise.resolve(l).then(function(h){s({value:h,done:c})},o)}}function tte(n,e){return Object.defineProperty?Object.defineProperty(n,"raw",{value:e}):n.raw=e,n}function nte(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function rte(n){return n&&n.__esModule?n:{default:n}}function ite(n,e){if(!e.has(n))throw new TypeError("attempted to get private field on non-instance");return e.get(n)}function ste(n,e,t){if(!e.has(n))throw new TypeError("attempted to set private field on non-instance");return e.set(n,t),t}const ote=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return yv},__asyncDelegator:Xee,__asyncGenerator:Zee,__asyncValues:ete,__await:Qd,__awaiter:zee,__classPrivateFieldGet:ite,__classPrivateFieldSet:ste,__createBinding:Kee,__decorate:qee,__exportStar:Qee,__extends:Bee,__generator:Gee,__importDefault:rte,__importStar:nte,__makeTemplateObject:tte,__metadata:Wee,__param:Hee,__read:PP,__rest:jee,__spread:Jee,__spreadArrays:Yee,__values:wv},Symbol.toStringTag,{value:"Module"})),ate=Bc(ote);var no={},f3;function cte(){if(f3)return no;f3=1,Object.defineProperty(no,"__esModule",{value:!0}),no.isBrowserCryptoAvailable=no.getSubtleCrypto=no.getBrowerCrypto=void 0;function n(){return(ct===null||ct===void 0?void 0:ct.crypto)||(ct===null||ct===void 0?void 0:ct.msCrypto)||{}}no.getBrowerCrypto=n;function e(){const r=n();return r.subtle||r.webkitSubtle}no.getSubtleCrypto=e;function t(){return!!n()&&!!e()}return no.isBrowserCryptoAvailable=t,no}var ro={},p3;function lte(){if(p3)return ro;p3=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.isBrowser=ro.isNode=ro.isReactNative=void 0;function n(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ro.isReactNative=n;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ro.isNode=e;function t(){return!n()&&!e()}return ro.isBrowser=t,ro}(function(n){Object.defineProperty(n,"__esModule",{value:!0});const e=ate;e.__exportStar(cte(),n),e.__exportStar(lte(),n)})(Yc);function jm(n=3){const e=Date.now()*Math.pow(10,n),t=Math.floor(Math.random()*Math.pow(10,n));return e+t}function qm(n=6){return BigInt(jm(n))}function da(n,e,t){return{id:t||jm(),jsonrpc:"2.0",method:n,params:e}}function Hm(n,e){return{id:n,jsonrpc:"2.0",result:e}}function Ru(n,e,t){return{id:n,jsonrpc:"2.0",error:ute(e,t)}}function ute(n,e){return typeof n>"u"?d3(RP):(typeof n=="string"&&(n=Object.assign(Object.assign({},d3(CE)),{message:n})),typeof e<"u"&&(n.data=e),Vee(n.code)&&(n=Fee(n.code)),n)}class OP{}let hte=class extends OP{constructor(e){super()}};class dte extends OP{constructor(){super()}}let xE=class extends dte{constructor(e){super()}};const fte="^https?:",pte="^wss?:";function gte(n){const e=n.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function kP(n,e){const t=gte(n);return typeof t>"u"?!1:new RegExp(e).test(t)}function g3(n){return kP(n,fte)}function m3(n){return kP(n,pte)}function mte(n){return new RegExp("wss?://localhost(:d{2,5})?").test(n)}function NP(n){return typeof n=="object"&&"id"in n&&"jsonrpc"in n&&n.jsonrpc==="2.0"}function PE(n){return NP(n)&&"method"in n}function Zu(n){return NP(n)&&(co(n)||ii(n))}function co(n){return"result"in n}function ii(n){return"error"in n}let yte=class extends xE{constructor(e){super(e),this.events=new Pr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(da(e.method,e.params||[],e.id||qm().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{ii(s)?i(s.error):r(s.result)});try{await this.connection.send(e,t)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Zu(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const wte=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),_te=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",y3=n=>n.split("?")[0],w3=10,vte=wte();let bte=class{constructor(e){if(this.url=e,this.events=new Pr.EventEmitter,this.registering=!1,!m3(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=r=>{this.onClose(r),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ia(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!m3(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return i(new Error("WebSocket connection is missing or invalid"));r(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{const i=new URLSearchParams(e).get("origin"),s=Yc.isReactNative()?{headers:{origin:i}}:{rejectUnauthorized:!mte(e)},o=new vte(e,[],s);_te()?o.onerror=c=>{const l=c;r(this.emitError(l.error))}:o.on("error",c=>{r(this.emitError(c))}),o.onopen=()=>{this.onOpen(o),t(o)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ju(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=Ru(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return xP(e,y3(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>w3&&this.events.setMaxListeners(w3)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${y3(this.url)}`));return this.events.emit("register_error",t),t}};var Ete={};function Ite(n,e){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<n.length;i++){var s=n.charAt(i),o=s.charCodeAt(0);if(t[o]!==255)throw new TypeError(s+" is ambiguous");t[o]=i}var c=n.length,l=n.charAt(0),h=Math.log(c)/Math.log(256),f=Math.log(256)/Math.log(c);function m(I){if(I instanceof Uint8Array||(ArrayBuffer.isView(I)?I=new Uint8Array(I.buffer,I.byteOffset,I.byteLength):Array.isArray(I)&&(I=Uint8Array.from(I))),!(I instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(I.length===0)return"";for(var T=0,A=0,L=0,D=I.length;L!==D&&I[L]===0;)L++,T++;for(var C=(D-L)*f+1>>>0,k=new Uint8Array(C);L!==D;){for(var P=I[L],O=0,g=C-1;(P!==0||O<A)&&g!==-1;g--,O++)P+=256*k[g]>>>0,k[g]=P%c>>>0,P=P/c>>>0;if(P!==0)throw new Error("Non-zero carry");A=O,L++}for(var _=C-A;_!==C&&k[_]===0;)_++;for(var R=l.repeat(T);_<C;++_)R+=n.charAt(k[_]);return R}function y(I){if(typeof I!="string")throw new TypeError("Expected String");if(I.length===0)return new Uint8Array;var T=0;if(I[T]!==" "){for(var A=0,L=0;I[T]===l;)A++,T++;for(var D=(I.length-T)*h+1>>>0,C=new Uint8Array(D);I[T];){var k=t[I.charCodeAt(T)];if(k===255)return;for(var P=0,O=D-1;(k!==0||P<L)&&O!==-1;O--,P++)k+=c*C[O]>>>0,C[O]=k%256>>>0,k=k/256>>>0;if(k!==0)throw new Error("Non-zero carry");L=P,T++}if(I[T]!==" "){for(var g=D-L;g!==D&&C[g]===0;)g++;for(var _=new Uint8Array(A+(D-g)),R=A;g!==D;)_[R++]=C[g++];return _}}}function w(I){var T=y(I);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:m,decodeUnsafe:y,decode:w}}var Ate=Ite,Ste=Ate;const DP=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")},Tte=n=>new TextEncoder().encode(n),Rte=n=>new TextDecoder().decode(n);class Cte{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}let xte=class{constructor(e,t,r){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return MP(this,e)}};class Pte{constructor(e){this.decoders=e}or(e){return MP(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const MP=(n,e)=>new Pte({...n.decoders||{[n.prefix]:n},...e.decoders||{[e.prefix]:e}});class Ote{constructor(e,t,r,i){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=i,this.encoder=new Cte(e,t,r),this.decoder=new xte(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Wm=({name:n,prefix:e,encode:t,decode:r})=>new Ote(n,e,t,r),Af=({prefix:n,name:e,alphabet:t})=>{const{encode:r,decode:i}=Ste(t,e);return Wm({prefix:n,name:e,encode:r,decode:s=>DP(i(s))})},kte=(n,e,t,r)=>{const i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let s=n.length;for(;n[s-1]==="=";)--s;const o=new Uint8Array(s*t/8|0);let c=0,l=0,h=0;for(let f=0;f<s;++f){const m=i[n[f]];if(m===void 0)throw new SyntaxError(`Non-${r} character`);l=l<<t|m,c+=t,c>=8&&(c-=8,o[h++]=255&l>>c)}if(c>=t||255&l<<8-c)throw new SyntaxError("Unexpected end of data");return o},Nte=(n,e,t)=>{const r=e[e.length-1]==="=",i=(1<<t)-1;let s="",o=0,c=0;for(let l=0;l<n.length;++l)for(c=c<<8|n[l],o+=8;o>t;)o-=t,s+=e[i&c>>o];if(o&&(s+=e[i&c<<t-o]),r)for(;s.length*t&7;)s+="=";return s},ir=({name:n,prefix:e,bitsPerChar:t,alphabet:r})=>Wm({prefix:e,name:n,encode(i){return Nte(i,r,t)},decode(i){return kte(i,r,t,n)}}),Dte=Wm({prefix:"\0",name:"identity",encode:n=>Rte(n),decode:n=>Tte(n)});var Mte=Object.freeze({__proto__:null,identity:Dte});const Lte=ir({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ute=Object.freeze({__proto__:null,base2:Lte});const $te=ir({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Vte=Object.freeze({__proto__:null,base8:$te});const Fte=Af({prefix:"9",name:"base10",alphabet:"0123456789"});var Bte=Object.freeze({__proto__:null,base10:Fte});const jte=ir({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),qte=ir({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Hte=Object.freeze({__proto__:null,base16:jte,base16upper:qte});const Wte=ir({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),zte=ir({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Gte=ir({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Kte=ir({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qte=ir({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Jte=ir({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Yte=ir({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zte=ir({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Xte=ir({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ene=Object.freeze({__proto__:null,base32:Wte,base32upper:zte,base32pad:Gte,base32padupper:Kte,base32hex:Qte,base32hexupper:Jte,base32hexpad:Yte,base32hexpadupper:Zte,base32z:Xte});const tne=Af({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nne=Af({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var rne=Object.freeze({__proto__:null,base36:tne,base36upper:nne});const ine=Af({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),sne=Af({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var one=Object.freeze({__proto__:null,base58btc:ine,base58flickr:sne});const ane=ir({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cne=ir({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),lne=ir({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),une=ir({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var hne=Object.freeze({__proto__:null,base64:ane,base64pad:cne,base64url:lne,base64urlpad:une});const LP=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),dne=LP.reduce((n,e,t)=>(n[t]=e,n),[]),fne=LP.reduce((n,e,t)=>(n[e.codePointAt(0)]=t,n),[]);function pne(n){return n.reduce((e,t)=>(e+=dne[t],e),"")}function gne(n){const e=[];for(const t of n){const r=fne[t.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(r)}return new Uint8Array(e)}const mne=Wm({prefix:"🚀",name:"base256emoji",encode:pne,decode:gne});var yne=Object.freeze({__proto__:null,base256emoji:mne}),wne=UP,_3=128,_ne=127,vne=~_ne,bne=Math.pow(2,31);function UP(n,e,t){e=e||[],t=t||0;for(var r=t;n>=bne;)e[t++]=n&255|_3,n/=128;for(;n&vne;)e[t++]=n&255|_3,n>>>=7;return e[t]=n|0,UP.bytes=t-r+1,e}var Ene=_v,Ine=128,v3=127;function _v(n,r){var t=0,r=r||0,i=0,s=r,o,c=n.length;do{if(s>=c)throw _v.bytes=0,new RangeError("Could not decode varint");o=n[s++],t+=i<28?(o&v3)<<i:(o&v3)*Math.pow(2,i),i+=7}while(o>=Ine);return _v.bytes=s-r,t}var Ane=Math.pow(2,7),Sne=Math.pow(2,14),Tne=Math.pow(2,21),Rne=Math.pow(2,28),Cne=Math.pow(2,35),xne=Math.pow(2,42),Pne=Math.pow(2,49),One=Math.pow(2,56),kne=Math.pow(2,63),Nne=function(n){return n<Ane?1:n<Sne?2:n<Tne?3:n<Rne?4:n<Cne?5:n<xne?6:n<Pne?7:n<One?8:n<kne?9:10},Dne={encode:wne,decode:Ene,encodingLength:Nne},$P=Dne;const b3=(n,e,t=0)=>($P.encode(n,e,t),e),E3=n=>$P.encodingLength(n),vv=(n,e)=>{const t=e.byteLength,r=E3(n),i=r+E3(t),s=new Uint8Array(i+t);return b3(n,s,0),b3(t,s,r),s.set(e,i),new Mne(n,t,e,s)};class Mne{constructor(e,t,r,i){this.code=e,this.size=t,this.digest=r,this.bytes=i}}const VP=({name:n,code:e,encode:t})=>new Lne(n,e,t);class Lne{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?vv(this.code,t):t.then(r=>vv(this.code,r))}else throw Error("Unknown type, must be binary type")}}const FP=n=>async e=>new Uint8Array(await crypto.subtle.digest(n,e)),Une=VP({name:"sha2-256",code:18,encode:FP("SHA-256")}),$ne=VP({name:"sha2-512",code:19,encode:FP("SHA-512")});var Vne=Object.freeze({__proto__:null,sha256:Une,sha512:$ne});const BP=0,Fne="identity",jP=DP,Bne=n=>vv(BP,jP(n)),jne={code:BP,name:Fne,encode:jP,digest:Bne};var qne=Object.freeze({__proto__:null,identity:jne});new TextEncoder,new TextDecoder;const I3={...Mte,...Ute,...Vte,...Bte,...Hte,...ene,...rne,...one,...hne,...yne};({...Vne,...qne});function qP(n){return globalThis.Buffer!=null?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n}function Hne(n=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?qP(globalThis.Buffer.allocUnsafe(n)):new Uint8Array(n)}function HP(n,e,t,r){return{name:n,prefix:e,encoder:{name:n,prefix:e,encode:t},decoder:{decode:r}}}const A3=HP("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),fw=HP("ascii","a",n=>{let e="a";for(let t=0;t<n.length;t++)e+=String.fromCharCode(n[t]);return e},n=>{n=n.substring(1);const e=Hne(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}),Wne={utf8:A3,"utf-8":A3,hex:I3.base16,latin1:fw,ascii:fw,binary:fw,...I3};function zne(n,e="utf8"){const t=Wne[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?qP(globalThis.Buffer.from(n,"utf-8")):t.decoder.decode(`${t.prefix}${n}`)}const WP="wc",Gne=2,OE="core",Aa=`${WP}@2:${OE}:`,Kne={name:OE,logger:"error"},Qne={database:":memory:"},Jne="crypto",S3="client_ed25519_seed",Yne=Pe.ONE_DAY,Zne="keychain",Xne="0.3",ere="messages",tre="0.3",nre=Pe.SIX_HOURS,rre="publisher",zP="irn",ire="error",GP="wss://relay.walletconnect.com",T3="wss://relay.walletconnect.org",sre="relayer",pr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ore="_subscription",io={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},are=Pe.ONE_SECOND,cre="2.11.0",lre=1e4,ure="0.3",hre="WALLETCONNECT_CLIENT_ID",Ki={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},dre="subscription",fre="0.3",pre=Pe.FIVE_SECONDS*1e3,gre="pairing",mre="0.3",Hh={wc_pairingDelete:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:0},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:0}}},fd={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},fs={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},yre="history",wre="0.3",_re="expirer",Oi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},vre="0.3",pw="verify-api",Wl="https://verify.walletconnect.com",bv="https://verify.walletconnect.org",bre=[Wl,bv],Ere="echo",Ire="https://echo.walletconnect.com";let Are=class{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=Zne,this.version=Xne,this.initialized=!1,this.storagePrefix=Aa,this.init=async()=>{if(!this.initialized){const r=await this.getKeyChain();typeof r<"u"&&(this.keychain=r),this.initialized=!0}},this.has=r=>(this.isInitialized(),this.keychain.has(r)),this.set=async(r,i)=>{this.isInitialized(),this.keychain.set(r,i),await this.persist()},this.get=r=>{this.isInitialized();const i=this.keychain.get(r);if(typeof i>"u"){const{message:s}=be("NO_MATCHING_KEY",`${this.name}: ${r}`);throw new Error(s)}return i},this.del=async r=>{this.isInitialized(),this.keychain.delete(r),await this.persist()},this.core=e,this.logger=Jr(t,this.name)}get context(){return Qr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,MC(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?LC(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};class Sre{constructor(e,t,r){this.core=e,this.logger=t,this.name=Jne,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=i=>(this.isInitialized(),this.keychain.has(i)),this.getClientId=async()=>{this.isInitialized();const i=await this.getClientSeed(),s=h3(i);return TP(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const i=LF();return this.setPrivateKey(i.publicKey,i.privateKey)},this.signJWT=async i=>{this.isInitialized();const s=await this.getClientSeed(),o=h3(s),c=O_();return await Nee(c,i,Yne,o)},this.generateSharedKey=(i,s,o)=>{this.isInitialized();const c=this.getPrivateKey(i),l=UF(c,s);return this.setSymKey(l,o)},this.setSymKey=async(i,s)=>{this.isInitialized();const o=s||$F(i);return await this.keychain.set(o,i),o},this.deleteKeyPair=async i=>{this.isInitialized(),await this.keychain.del(i)},this.deleteSymKey=async i=>{this.isInitialized(),await this.keychain.del(i)},this.encode=async(i,s,o)=>{this.isInitialized();const c=DC(o),l=Ia(s);if(JA(c)){const y=c.senderPublicKey,w=c.receiverPublicKey;i=await this.generateSharedKey(y,w)}const h=this.getSymKey(i),{type:f,senderPublicKey:m}=c;return FF({type:f,symKey:h,message:l,senderPublicKey:m})},this.decode=async(i,s,o)=>{this.isInitialized();const c=qF(s,o);if(JA(c)){const l=c.receiverPublicKey,h=c.senderPublicKey;i=await this.generateSharedKey(l,h)}try{const l=this.getSymKey(i),h=BF({symKey:l,encoded:s});return Ju(h)}catch(l){this.logger.error(`Failed to decode message from topic: '${i}', clientId: '${await this.getClientId()}'`),this.logger.error(l)}},this.getPayloadType=i=>{const s=r0(i);return of(s.type)},this.getPayloadSenderPublicKey=i=>{const s=r0(i);return s.senderPublicKey?xr(s.senderPublicKey,Tr):void 0},this.core=e,this.logger=Jr(t,this.name),this.keychain=r||new Are(this.core,this.logger)}get context(){return Qr(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(S3)}catch{e=O_(),await this.keychain.set(S3,e)}return zne(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}let Tre=class extends uee{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=ere,this.version=tre,this.initialized=!1,this.storagePrefix=Aa,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const r=await this.getRelayerMessages();typeof r<"u"&&(this.messages=r),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(r){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(r)}finally{this.initialized=!0}}},this.set=async(r,i)=>{this.isInitialized();const s=Ql(i);let o=this.messages.get(r);return typeof o>"u"&&(o={}),typeof o[s]<"u"||(o[s]=i,this.messages.set(r,o),await this.persist()),s},this.get=r=>{this.isInitialized();let i=this.messages.get(r);return typeof i>"u"&&(i={}),i},this.has=(r,i)=>{this.isInitialized();const s=this.get(r),o=Ql(i);return typeof s[o]<"u"},this.del=async r=>{this.isInitialized(),this.messages.delete(r),await this.persist()},this.logger=Jr(e,this.name),this.core=t}get context(){return Qr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,MC(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?LC(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}};class Rre extends hee{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new Pr.EventEmitter,this.name=rre,this.queue=new Map,this.publishTimeout=Pe.toMiliseconds(Pe.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(r,i,s)=>{var o;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}});try{const c=s?.ttl||nre,l=k_(s),h=s?.prompt||!1,f=s?.tag||0,m=s?.id||qm().toString(),y={topic:r,message:i,opts:{ttl:c,relay:l,prompt:h,tag:f,id:m}},w=setTimeout(()=>this.queue.set(m,y),this.publishTimeout);try{await await Pd(this.rpcPublish(r,i,c,l,h,f,m),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(m),this.relayer.events.emit(pr.publish,y)}catch(I){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(o=s?.internal)!=null&&o.throwOnFailedPublish)throw this.removeRequestFromQueue(m),I;return}finally{clearTimeout(w)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:r,message:i,opts:s}})}catch(c){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(c),c}},this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.relayer=e,this.logger=Jr(t,this.name),this.registerEventListeners()}get context(){return Qr(this.logger)}rpcPublish(e,t,r,i,s,o,c){var l,h,f,m;const y={method:Mg(i.protocol).publish,params:{topic:e,message:t,ttl:r,prompt:s,tag:o},id:c};return qr((l=y.params)==null?void 0:l.prompt)&&((h=y.params)==null||delete h.prompt),qr((f=y.params)==null?void 0:f.tag)&&((m=y.params)==null||delete m.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:y}),this.relayer.request(y)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:r,opts:i}=e;await this.publish(t,r,i)})}registerEventListeners(){this.relayer.core.heartbeat.on(Yu.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(pr.connection_stalled);return}this.checkQueue()}),this.relayer.on(pr.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class Cre{constructor(){this.map=new Map,this.set=(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const i=r.filter(s=>s!==t);if(!i.length){this.map.delete(e);return}this.map.set(e,i)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var xre=Object.defineProperty,Pre=Object.defineProperties,Ore=Object.getOwnPropertyDescriptors,R3=Object.getOwnPropertySymbols,kre=Object.prototype.hasOwnProperty,Nre=Object.prototype.propertyIsEnumerable,C3=(n,e,t)=>e in n?xre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Wh=(n,e)=>{for(var t in e||(e={}))kre.call(e,t)&&C3(n,t,e[t]);if(R3)for(var t of R3(e))Nre.call(e,t)&&C3(n,t,e[t]);return n},gw=(n,e)=>Pre(n,Ore(e));let Dre=class extends pee{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new Cre,this.events=new Pr.EventEmitter,this.name=dre,this.version=fre,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Aa,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(r,i)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}});try{const s=k_(i),o={topic:r,relay:s};this.pending.set(r,o);const c=await this.rpcSubscribe(r,s);return this.onSubscribe(c,o),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:r,opts:i}}),c}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(r,i)=>{await this.restartToComplete(),this.isInitialized(),typeof i?.id<"u"?await this.unsubscribeById(r,i.id,i):await this.unsubscribeByTopic(r,i)},this.isSubscribed=async r=>this.topics.includes(r)?!0:await new Promise((i,s)=>{const o=new Pe.Watch;o.start(this.pendingSubscriptionWatchLabel);const c=setInterval(()=>{!this.pending.has(r)&&this.topics.includes(r)&&(clearInterval(c),o.stop(this.pendingSubscriptionWatchLabel),i(!0)),o.elapsed(this.pendingSubscriptionWatchLabel)>=pre&&(clearInterval(c),o.stop(this.pendingSubscriptionWatchLabel),s(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=Jr(t,this.name),this.clientId=""}get context(){return Qr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map(async i=>await this.unsubscribeById(e,i,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const i=k_(r);await this.rpcUnsubscribe(e,t,i);const s=yn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(i){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(i),i}}async rpcSubscribe(e,t){const r={method:Mg(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Pd(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(pr.connection_stalled)}return Ql(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,r={method:Mg(t.protocol).batchSubscribe,params:{topics:e.map(i=>i.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{return await await Pd(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(pr.connection_stalled)}}rpcUnsubscribe(e,t,r){const i={method:Mg(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),this.relayer.request(i)}onSubscribe(e,t){this.setSubscription(e,gw(Wh({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Wh({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Wh({},t)),this.topicMap.set(t.topic,e),this.events.emit(Ki.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Ki.deleted,gw(Wh({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Ki.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const r=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(r)}}this.events.emit(Ki.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);ks(t)&&this.onBatchSubscribe(t.map((r,i)=>gw(Wh({},e[i]),{id:r})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Yu.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(pr.connect,async()=>{await this.onConnect()}),this.relayer.on(pr.disconnect,()=>{this.onDisconnect()}),this.events.on(Ki.created,async e=>{const t=Ki.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(Ki.deleted,async e=>{const t=Ki.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}};var Mre=Object.defineProperty,x3=Object.getOwnPropertySymbols,Lre=Object.prototype.hasOwnProperty,Ure=Object.prototype.propertyIsEnumerable,P3=(n,e,t)=>e in n?Mre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$re=(n,e)=>{for(var t in e||(e={}))Lre.call(e,t)&&P3(n,t,e[t]);if(x3)for(var t of x3(e))Ure.call(e,t)&&P3(n,t,e[t]);return n};class Vre extends dee{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new Pr.EventEmitter,this.name=sre,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(r){throw this.logger.debug("Failed to Publish Request"),this.logger.error(r),r}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(pr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(pr.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(io.payload,this.onPayloadHandler),this.provider.on(io.connect,this.onConnectHandler),this.provider.on(io.disconnect,this.onDisconnectHandler),this.provider.on(io.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?Jr(e.logger,this.name):W0(Bm({level:e.logger||ire})),this.messages=new Tre(this.logger,e.core),this.subscriber=new Dre(this,this.logger),this.publisher=new Rre(this,this.logger),this.relayUrl=e?.relayUrl||GP,this.projectId=e.projectId,this.bundleId=QF(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${T3}...`),await this.restartTransport(T3)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},lre)}get context(){return Qr(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var r;this.isInitialized();let i=((r=this.subscriber.topicMap.get(e))==null?void 0:r[0])||"";if(i)return i;let s;const o=c=>{c.topic===e&&(this.subscriber.off(Ki.created,o),s())};return await Promise.all([new Promise(c=>{s=c,this.subscriber.on(Ki.created,o)}),new Promise(async c=>{i=await this.subscriber.subscribe(e,t),c()})]),i}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Pd(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(Ki.resubscribed,()=>{t()})}),new Promise(async(t,r)=>{try{await Pd(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(i){r(i);return}t()})])}catch(t){this.logger.error(t);const r=t;if(!this.isConnectionStalled(r.message))throw t;this.provider.events.emit(io.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await l5())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new yte(new bte(tB({sdkVersion:cre,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:r}=e;await this.messages.set(t,r)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||r.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const i=this.messages.has(t,r);return i&&this.logger.debug(`Ignoring duplicate message: ${r}`),i}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),PE(e)){if(!e.method.endsWith(ore))return;const t=e.params,{topic:r,message:i,publishedAt:s}=t.data,o={topic:r,message:i,publishedAt:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace($re({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else Zu(e)&&this.events.emit(pr.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(pr.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Hm(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(io.payload,this.onPayloadHandler),this.provider.off(io.connect,this.onConnectHandler),this.provider.off(io.disconnect,this.onDisconnectHandler),this.provider.off(io.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(pr.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await l5();ej(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(r=>this.logger.error(r)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(r=>this.logger.error(r))))})}onProviderDisconnect(){this.events.emit(pr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},Pe.toMiliseconds(are)))}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Fre=Object.defineProperty,O3=Object.getOwnPropertySymbols,Bre=Object.prototype.hasOwnProperty,jre=Object.prototype.propertyIsEnumerable,k3=(n,e,t)=>e in n?Fre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,N3=(n,e)=>{for(var t in e||(e={}))Bre.call(e,t)&&k3(n,t,e[t]);if(O3)for(var t of O3(e))jre.call(e,t)&&k3(n,t,e[t]);return n};let zm=class extends fee{constructor(e,t,r,i=Aa,s=void 0){super(e,t,r,i),this.core=e,this.logger=t,this.name=r,this.map=new Map,this.version=ure,this.cached=[],this.initialized=!1,this.storagePrefix=Aa,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>{this.getKey&&o!==null&&!qr(o)?this.map.set(this.getKey(o),o):OB(o)?this.map.set(o.id,o):kB(o)&&this.map.set(o.topic,o)}),this.cached=[],this.initialized=!0)},this.set=async(o,c)=>{this.isInitialized(),this.map.has(o)?await this.update(o,c):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:o,value:c}),this.map.set(o,c),await this.persist())},this.get=o=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:o}),this.getData(o)),this.getAll=o=>(this.isInitialized(),o?this.values.filter(c=>Object.keys(o).every(l=>iU(c[l],o[l]))):this.values),this.update=async(o,c)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:o,update:c});const l=N3(N3({},this.getData(o)),c);this.map.set(o,l),await this.persist()},this.delete=async(o,c)=>{this.isInitialized(),this.map.has(o)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:o,reason:c}),this.map.delete(o),await this.persist())},this.logger=Jr(t,this.name),this.storagePrefix=i,this.getKey=s}get context(){return Qr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}},qre=class{constructor(e,t){this.core=e,this.logger=t,this.name=gre,this.version=mre,this.events=new tf,this.initialized=!1,this.storagePrefix=Aa,this.ignoredPayloadTypes=[Hc],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:r})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...r])]},this.create=async()=>{this.isInitialized();const r=O_(),i=await this.core.crypto.setSymKey(r),s=Qi(Pe.FIVE_MINUTES),o={protocol:zP},c={topic:i,expiry:s,relay:o,active:!1},l=pB({protocol:this.core.protocol,version:this.core.version,topic:i,symKey:r,relay:o});return await this.pairings.set(i,c),await this.core.relayer.subscribe(i),this.core.expirer.set(i,s),{topic:i,uri:l}},this.pair=async r=>{this.isInitialized(),this.isValidPair(r);const{topic:i,symKey:s,relay:o}=n5(r.uri);let c;if(this.pairings.keys.includes(i)&&(c=this.pairings.get(i),c.active))throw new Error(`Pairing already exists: ${i}. Please try again with a new connection URI.`);const l=Qi(Pe.FIVE_MINUTES),h={topic:i,relay:o,expiry:l,active:!1};return await this.pairings.set(i,h),this.core.expirer.set(i,l),r.activatePairing&&await this.activate({topic:i}),this.events.emit(fd.create,h),this.core.crypto.keychain.has(i)||(await this.core.crypto.setSymKey(s,i),await this.core.relayer.subscribe(i,{relay:o})),h},this.activate=async({topic:r})=>{this.isInitialized();const i=Qi(Pe.THIRTY_DAYS);await this.pairings.update(r,{active:!0,expiry:i}),this.core.expirer.set(r,i)},this.ping=async r=>{this.isInitialized(),await this.isValidPing(r);const{topic:i}=r;if(this.pairings.keys.includes(i)){const s=await this.sendRequest(i,"wc_pairingPing",{}),{done:o,resolve:c,reject:l}=Ll();this.events.once(Nn("pairing_ping",s),({error:h})=>{h?l(h):c()}),await o()}},this.updateExpiry=async({topic:r,expiry:i})=>{this.isInitialized(),await this.pairings.update(r,{expiry:i})},this.updateMetadata=async({topic:r,metadata:i})=>{this.isInitialized(),await this.pairings.update(r,{peerMetadata:i})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async r=>{this.isInitialized(),await this.isValidDisconnect(r);const{topic:i}=r;this.pairings.keys.includes(i)&&(await this.sendRequest(i,"wc_pairingDelete",yn("USER_DISCONNECTED")),await this.deletePairing(i))},this.sendRequest=async(r,i,s)=>{const o=da(i,s),c=await this.core.crypto.encode(r,o),l=Hh[i].req;return this.core.history.set(r,o),this.core.relayer.publish(r,c,l),o.id},this.sendResult=async(r,i,s)=>{const o=Hm(r,s),c=await this.core.crypto.encode(i,o),l=await this.core.history.get(i,r),h=Hh[l.request.method].res;await this.core.relayer.publish(i,c,h),await this.core.history.resolve(o)},this.sendError=async(r,i,s)=>{const o=Ru(r,s),c=await this.core.crypto.encode(i,o),l=await this.core.history.get(i,r),h=Hh[l.request.method]?Hh[l.request.method].res:Hh.unregistered_method.res;await this.core.relayer.publish(i,c,h),await this.core.history.resolve(o)},this.deletePairing=async(r,i)=>{await this.core.relayer.unsubscribe(r),await Promise.all([this.pairings.delete(r,yn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(r),i?Promise.resolve():this.core.expirer.del(r)])},this.cleanup=async()=>{const r=this.pairings.getAll().filter(i=>Yo(i.expiry));await Promise.all(r.map(i=>this.deletePairing(i.topic)))},this.onRelayEventRequest=r=>{const{topic:i,payload:s}=r;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(i,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(i,s);default:return this.onUnknownRpcMethodRequest(i,s)}},this.onRelayEventResponse=async r=>{const{topic:i,payload:s}=r,o=(await this.core.history.get(i,s.id)).request.method;switch(o){case"wc_pairingPing":return this.onPairingPingResponse(i,s);default:return this.onUnknownRpcMethodResponse(o)}},this.onPairingPingRequest=async(r,i)=>{const{id:s}=i;try{this.isValidPing({topic:r}),await this.sendResult(s,r,!0),this.events.emit(fd.ping,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}},this.onPairingPingResponse=(r,i)=>{const{id:s}=i;setTimeout(()=>{co(i)?this.events.emit(Nn("pairing_ping",s),{}):ii(i)&&this.events.emit(Nn("pairing_ping",s),{error:i.error})},500)},this.onPairingDeleteRequest=async(r,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:r}),await this.deletePairing(r),this.events.emit(fd.delete,{id:s,topic:r})}catch(o){await this.sendError(s,r,o),this.logger.error(o)}},this.onUnknownRpcMethodRequest=async(r,i)=>{const{id:s,method:o}=i;try{if(this.registeredMethods.includes(o))return;const c=yn("WC_METHOD_UNSUPPORTED",o);await this.sendError(s,r,c),this.logger.error(c)}catch(c){await this.sendError(s,r,c),this.logger.error(c)}},this.onUnknownRpcMethodResponse=r=>{this.registeredMethods.includes(r)||this.logger.error(yn("WC_METHOD_UNSUPPORTED",r))},this.isValidPair=r=>{var i;if(!Vr(r)){const{message:o}=be("MISSING_OR_INVALID",`pair() params: ${r}`);throw new Error(o)}if(!PB(r.uri)){const{message:o}=be("MISSING_OR_INVALID",`pair() uri: ${r.uri}`);throw new Error(o)}const s=n5(r.uri);if(!((i=s?.relay)!=null&&i.protocol)){const{message:o}=be("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(o)}if(!(s!=null&&s.symKey)){const{message:o}=be("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(o)}},this.isValidPing=async r=>{if(!Vr(r)){const{message:s}=be("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)},this.isValidDisconnect=async r=>{if(!Vr(r)){const{message:s}=be("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(s)}const{topic:i}=r;await this.isValidPairingTopic(i)},this.isValidPairingTopic=async r=>{if(!Gn(r,!1)){const{message:i}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${r}`);throw new Error(i)}if(!this.pairings.keys.includes(r)){const{message:i}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${r}`);throw new Error(i)}if(Yo(this.pairings.get(r).expiry)){await this.deletePairing(r);const{message:i}=be("EXPIRED",`pairing topic: ${r}`);throw new Error(i)}},this.core=e,this.logger=Jr(t,this.name),this.pairings=new zm(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Qr(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(pr.message,async e=>{const{topic:t,message:r}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;const i=await this.core.crypto.decode(t,r);try{PE(i)?(this.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):Zu(i)&&(await this.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.core.history.delete(t,i.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(Oi.expired,async e=>{const{topic:t}=$C(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(fd.expire,{topic:t}))})}};class Hre extends lee{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new Pr.EventEmitter,this.name=yre,this.version=wre,this.cached=[],this.initialized=!1,this.storagePrefix=Aa,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.records.set(r.id,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(r,i,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:r,request:i,chainId:s}),this.records.has(i.id))return;const o={id:i.id,topic:r,request:{method:i.method,params:i.params||null},chainId:s,expiry:Qi(Pe.THIRTY_DAYS)};this.records.set(o.id,o),this.events.emit(fs.created,o)},this.resolve=async r=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:r}),!this.records.has(r.id))return;const i=await this.getRecord(r.id);typeof i.response>"u"&&(i.response=ii(r)?{error:r.error}:{result:r.result},this.records.set(i.id,i),this.events.emit(fs.updated,i))},this.get=async(r,i)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:r,id:i}),await this.getRecord(i)),this.delete=(r,i)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:i}),this.values.forEach(s=>{if(s.topic===r){if(typeof i<"u"&&s.id!==i)return;this.records.delete(s.id),this.events.emit(fs.deleted,s)}})},this.exists=async(r,i)=>(this.isInitialized(),this.records.has(i)?(await this.getRecord(i)).topic===r:!1),this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.logger=Jr(t,this.name)}get context(){return Qr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:da(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(r)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(fs.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(fs.created,e=>{const t=fs.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(fs.updated,e=>{const t=fs.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(fs.deleted,e=>{const t=fs.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(Yu.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{Pe.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}}let Wre=class extends gee{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new Pr.EventEmitter,this.name=_re,this.version=vre,this.cached=[],this.initialized=!1,this.storagePrefix=Aa,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(r=>this.expirations.set(r.target,r)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=r=>{try{const i=this.formatTarget(r);return typeof this.getExpiration(i)<"u"}catch{return!1}},this.set=(r,i)=>{this.isInitialized();const s=this.formatTarget(r),o={target:s,expiry:i};this.expirations.set(s,o),this.checkExpiry(s,o),this.events.emit(Oi.created,{target:s,expiration:o})},this.get=r=>{this.isInitialized();const i=this.formatTarget(r);return this.getExpiration(i)},this.del=r=>{if(this.isInitialized(),this.has(r)){const i=this.formatTarget(r),s=this.getExpiration(i);this.expirations.delete(i),this.events.emit(Oi.deleted,{target:i,expiration:s})}},this.on=(r,i)=>{this.events.on(r,i)},this.once=(r,i)=>{this.events.once(r,i)},this.off=(r,i)=>{this.events.off(r,i)},this.removeListener=(r,i)=>{this.events.removeListener(r,i)},this.logger=Jr(t,this.name)}get context(){return Qr(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return nB(e);if(typeof e=="number")return rB(e);const{message:t}=be("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Oi.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=be("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:r}=be("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(r),new Error(r)}return t}checkExpiry(e,t){const{expiry:r}=t;Pe.toMiliseconds(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(Oi.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(Yu.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Oi.created,e=>{const t=Oi.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Oi.expired,e=>{const t=Oi.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(Oi.deleted,e=>{const t=Oi.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}}},zre=class extends mee{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=pw,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async r=>{if(this.verifyDisabled||Vu()||!Fu())return;const i=this.getVerifyUrl(r?.verifyUrl);this.verifyUrl!==i&&this.removeIframe(),this.verifyUrl=i;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s)}if(!this.initialized){this.removeIframe(),this.verifyUrl=bv;try{await this.createIframe()}catch(s){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(s),this.verifyDisabled=!0}}},this.register=async r=>{this.initialized?this.sendPost(r.attestationId):(this.addToQueue(r.attestationId),await this.init())},this.resolve=async r=>{if(this.isDevEnv)return"";const i=this.getVerifyUrl(r?.verifyUrl);let s;try{s=await this.fetchAttestation(r.attestationId,i)}catch(o){this.logger.info(`failed to resolve attestation: ${r.attestationId} from url: ${i}`),this.logger.info(o),s=await this.fetchAttestation(r.attestationId,bv)}return s},this.fetchAttestation=async(r,i)=>{this.logger.info(`resolving attestation: ${r} from url: ${i}`);const s=this.startAbortTimer(Pe.ONE_SECOND*2),o=await fetch(`${i}/attestation/${r}`,{signal:this.abortController.signal});return clearTimeout(s),o.status===200?await o.json():void 0},this.addToQueue=r=>{this.queue.push(r)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(r=>this.sendPost(r)),this.queue=[])},this.sendPost=r=>{var i;try{if(!this.iframe)return;(i=this.iframe.contentWindow)==null||i.postMessage(r,"*"),this.logger.info(`postMessage sent: ${r} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let r;const i=s=>{s.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",i),r())};await Promise.race([new Promise(s=>{if(document.getElementById(pw))return s();window.addEventListener("message",i);const o=document.createElement("iframe");o.id=pw,o.src=`${this.verifyUrl}/${this.projectId}`,o.style.display="none",document.body.append(o),this.iframe=o,r=s}),new Promise((s,o)=>setTimeout(()=>{window.removeEventListener("message",i),o("verify iframe load timeout")},Pe.toMiliseconds(Pe.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=r=>{let i=r||Wl;return bre.includes(i)||(this.logger.info(`verify url: ${i}, not included in trusted list, assigning default: ${Wl}`),i=Wl),i},this.logger=Jr(t,this.name),this.verifyUrl=Wl,this.abortController=new AbortController,this.isDevEnv=nb()&&Ete.IS_VITEST}get context(){return Qr(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Pe.toMiliseconds(e))}},Gre=class extends yee{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=Ere,this.registerDeviceToken=async r=>{const{clientId:i,token:s,notificationType:o,enableEncrypted:c=!1}=r,l=`${Ire}/${this.projectId}/clients`;await G9(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:i,type:o,token:s,always_raw:c})})},this.logger=Jr(t,this.context)}};var Kre=Object.defineProperty,D3=Object.getOwnPropertySymbols,Qre=Object.prototype.hasOwnProperty,Jre=Object.prototype.propertyIsEnumerable,M3=(n,e,t)=>e in n?Kre(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L3=(n,e)=>{for(var t in e||(e={}))Qre.call(e,t)&&M3(n,t,e[t]);if(D3)for(var t of D3(e))Jre.call(e,t)&&M3(n,t,e[t]);return n};let Yre=class KP extends cee{constructor(e){super(e),this.protocol=WP,this.version=Gne,this.name=OE,this.events=new Pr.EventEmitter,this.initialized=!1,this.on=(r,i)=>this.events.on(r,i),this.once=(r,i)=>this.events.once(r,i),this.off=(r,i)=>this.events.off(r,i),this.removeListener=(r,i)=>this.events.removeListener(r,i),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||GP,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:W0(Bm({level:e?.logger||Kne.logger}));this.logger=Jr(t,this.name),this.heartbeat=new Yu.HeartBeat,this.crypto=new Sre(this,this.logger,e?.keychain),this.history=new Hre(this,this.logger),this.expirer=new Wre(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new SX(L3(L3({},Qne),e?.storageOptions)),this.relayer=new Vre({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new qre(this,this.logger),this.verify=new zre(this.projectId||"",this.logger),this.echoClient=new Gre(this.projectId||"",this.logger)}static async init(e){const t=new KP(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem(hre,r),t}get context(){return Qr(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const Zre=Yre,QP="wc",JP=2,YP="client",kE=`${QP}@${JP}:${YP}:`,mw={name:YP,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},U3="WALLETCONNECT_DEEPLINK_CHOICE",Xre="proposal",ZP="Proposal expired",eie="session",lg=Pe.SEVEN_DAYS,tie="engine",zh={wc_sessionPropose:{req:{ttl:Pe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Pe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Pe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Pe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Pe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Pe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Pe.THIRTY_SECONDS,prompt:!1,tag:1115}}},yw={min:Pe.FIVE_MINUTES,max:Pe.SEVEN_DAYS},so={idle:"IDLE",active:"ACTIVE"},nie="request",rie=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var iie=Object.defineProperty,sie=Object.defineProperties,oie=Object.getOwnPropertyDescriptors,$3=Object.getOwnPropertySymbols,aie=Object.prototype.hasOwnProperty,cie=Object.prototype.propertyIsEnumerable,V3=(n,e,t)=>e in n?iie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$r=(n,e)=>{for(var t in e||(e={}))aie.call(e,t)&&V3(n,t,e[t]);if($3)for(var t of $3(e))cie.call(e,t)&&V3(n,t,e[t]);return n},Gh=(n,e)=>sie(n,oie(e));class lie extends _ee{constructor(e){super(e),this.name=tie,this.events=new tf,this.initialized=!1,this.ignoredPayloadTypes=[Hc],this.requestQueue={state:so.idle,queue:[]},this.sessionRequestQueue={state:so.idle,queue:[]},this.requestQueueDelay=Pe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(zh)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Pe.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const r=Gh($r({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(r);const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:c,relays:l}=r;let h=i,f,m=!1;if(h&&(m=this.client.core.pairing.pairings.get(h).active),!h||!m){const{topic:C,uri:k}=await this.client.core.pairing.create();h=C,f=k}const y=await this.client.core.crypto.generateKeyPair(),w=$r({requiredNamespaces:s,optionalNamespaces:o,relays:l??[{protocol:zP}],proposer:{publicKey:y,metadata:this.client.metadata}},c&&{sessionProperties:c}),{reject:I,resolve:T,done:A}=Ll(Pe.FIVE_MINUTES,ZP);if(this.events.once(Nn("session_connect"),async({error:C,session:k})=>{if(C)I(C);else if(k){k.self.publicKey=y;const P=Gh($r({},k),{requiredNamespaces:k.requiredNamespaces,optionalNamespaces:k.optionalNamespaces});await this.client.session.set(k.topic,P),await this.setExpiry(k.topic,k.expiry),h&&await this.client.core.pairing.updateMetadata({topic:h,metadata:k.peer.metadata}),T(P)}}),!h){const{message:C}=be("NO_MATCHING_KEY",`connect() pairing topic: ${h}`);throw new Error(C)}const L=await this.sendRequest({topic:h,method:"wc_sessionPropose",params:w}),D=Qi(Pe.FIVE_MINUTES);return await this.setProposal(L,$r({id:L,expiry:D},w)),{uri:f,approval:A}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:r,relayProtocol:i,namespaces:s,sessionProperties:o}=t,c=this.client.proposal.get(r);let{pairingTopic:l,proposer:h,requiredNamespaces:f,optionalNamespaces:m}=c;l=l||"",Rc(f)||(f=SB(s,"approve()"));const y=await this.client.core.crypto.generateKeyPair(),w=h.publicKey,I=await this.client.core.crypto.generateSharedKey(y,w);l&&r&&(await this.client.core.pairing.updateMetadata({topic:l,metadata:h.metadata}),await this.sendResult({id:r,topic:l,result:{relay:{protocol:i??"irn"},responderPublicKey:y}}),await this.client.proposal.delete(r,yn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:l}));const T=$r({relay:{protocol:i??"irn"},namespaces:s,requiredNamespaces:f,optionalNamespaces:m,pairingTopic:l,controller:{publicKey:y,metadata:this.client.metadata},expiry:Qi(lg)},o&&{sessionProperties:o});await this.client.core.relayer.subscribe(I),await this.sendRequest({topic:I,method:"wc_sessionSettle",params:T,throwOnFailedPublish:!0});const A=Gh($r({},T),{topic:I,pairingTopic:l,acknowledged:!1,self:T.controller,peer:{publicKey:h.publicKey,metadata:h.metadata},controller:y});return await this.client.session.set(I,A),await this.setExpiry(I,Qi(lg)),{topic:I,acknowledged:()=>new Promise(L=>setTimeout(()=>L(this.client.session.get(I)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:r,reason:i}=t,{pairingTopic:s}=this.client.proposal.get(r);s&&(await this.sendError(r,s,i),await this.client.proposal.delete(r,yn("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:r,namespaces:i}=t,s=await this.sendRequest({topic:r,method:"wc_sessionUpdate",params:{namespaces:i}}),{done:o,resolve:c,reject:l}=Ll();return this.events.once(Nn("session_update",s),({error:h})=>{h?l(h):c()}),await this.client.session.update(r,{namespaces:i}),{acknowledged:o}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:r}=t,i=await this.sendRequest({topic:r,method:"wc_sessionExtend",params:{}}),{done:s,resolve:o,reject:c}=Ll();return this.events.once(Nn("session_extend",i),({error:l})=>{l?c(l):o()}),await this.setExpiry(r,Qi(lg)),{acknowledged:s}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:r,request:i,topic:s,expiry:o}=t,c=jm(),{done:l,resolve:h,reject:f}=Ll(o,"Request expired. Please try again.");return this.events.once(Nn("session_request",c),({error:m,result:y})=>{m?f(m):h(y)}),await Promise.all([new Promise(async m=>{await this.sendRequest({clientRpcId:c,topic:s,method:"wc_sessionRequest",params:{request:i,chainId:r},expiry:o,throwOnFailedPublish:!0}).catch(y=>f(y)),this.client.events.emit("session_request_sent",{topic:s,request:i,chainId:r,id:c}),m()}),new Promise(async m=>{const y=await sB(this.client.core.storage,U3);iB({id:c,topic:s,wcDeepLink:y}),m()}),l()]).then(m=>m[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:r,response:i}=t,{id:s}=i;co(i)?await this.sendResult({id:s,topic:r,result:i.result,throwOnFailedPublish:!0}):ii(i)&&await this.sendError(s,r,i.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:r}=t;if(this.client.session.keys.includes(r)){const i=await this.sendRequest({topic:r,method:"wc_sessionPing",params:{}}),{done:s,resolve:o,reject:c}=Ll();this.events.once(Nn("session_ping",i),({error:l})=>{l?c(l):o()}),await s()}else this.client.core.pairing.pairings.keys.includes(r)&&await this.client.core.pairing.ping({topic:r})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:r,event:i,chainId:s}=t;await this.sendRequest({topic:r,method:"wc_sessionEvent",params:{event:i,chainId:s}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:r}=t;this.client.session.keys.includes(r)?(await this.sendRequest({topic:r,method:"wc_sessionDelete",params:yn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(r)):await this.client.core.pairing.disconnect({topic:r})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(r=>CB(r,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const r=this.client.core.pairing.pairings.get(t.pairingTopic),i=this.client.core.pairing.pairings.getAll().filter(s=>{var o,c;return((o=s.peerMetadata)==null?void 0:o.url)&&((c=s.peerMetadata)==null?void 0:c.url)===t.peer.metadata.url&&s.topic&&s.topic!==r.topic});if(i.length===0)return;this.client.logger.info(`Cleaning up ${i.length} duplicate pairing(s)`),await Promise.all(i.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(r){this.client.logger.error(r)}},this.deleteSession=async(t,r)=>{const{self:i}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,yn("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(i.publicKey)&&await this.client.core.crypto.deleteKeyPair(i.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),r||this.client.core.expirer.del(t),this.client.core.storage.removeItem(U3).catch(s=>this.client.logger.warn(s)),this.getPendingSessionRequests().forEach(s=>{s.topic===t&&this.deletePendingSessionRequest(s.id,yn("USER_DISCONNECTED"))})},this.deleteProposal=async(t,r)=>{await Promise.all([this.client.proposal.delete(t,yn("USER_DISCONNECTED")),r?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,r,i=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,r),i?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==t),i&&(this.sessionRequestQueue.state=so.idle)},this.setExpiry=async(t,r)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:r}),this.client.core.expirer.set(t,r)},this.setProposal=async(t,r)=>{await this.client.proposal.set(t,r),this.client.core.expirer.set(t,r.expiry)},this.setPendingSessionRequest=async t=>{const r=zh.wc_sessionRequest.req.ttl,{id:i,topic:s,params:o,verifyContext:c}=t;await this.client.pendingRequest.set(i,{id:i,topic:s,params:o,verifyContext:c}),r&&this.client.core.expirer.set(i,Qi(r))},this.sendRequest=async t=>{const{topic:r,method:i,params:s,expiry:o,relayRpcId:c,clientRpcId:l,throwOnFailedPublish:h}=t,f=da(i,s,l);if(Fu()&&rie.includes(i)){const w=Ql(JSON.stringify(f));this.client.core.verify.register({attestationId:w})}const m=await this.client.core.crypto.encode(r,f),y=zh[i].req;return o&&(y.ttl=o),c&&(y.id=c),this.client.core.history.set(r,f),h?(y.internal=Gh($r({},y.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,m,y)):this.client.core.relayer.publish(r,m,y).catch(w=>this.client.logger.error(w)),f.id},this.sendResult=async t=>{const{id:r,topic:i,result:s,throwOnFailedPublish:o}=t,c=Hm(r,s),l=await this.client.core.crypto.encode(i,c),h=await this.client.core.history.get(i,r),f=zh[h.request.method].res;o?(f.internal=Gh($r({},f.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,l,f)):this.client.core.relayer.publish(i,l,f).catch(m=>this.client.logger.error(m)),await this.client.core.history.resolve(c)},this.sendError=async(t,r,i)=>{const s=Ru(t,i),o=await this.client.core.crypto.encode(r,s),c=await this.client.core.history.get(r,t),l=zh[c.request.method].res;this.client.core.relayer.publish(r,o,l),await this.client.core.history.resolve(s)},this.cleanup=async()=>{const t=[],r=[];this.client.session.getAll().forEach(i=>{Yo(i.expiry)&&t.push(i.topic)}),this.client.proposal.getAll().forEach(i=>{Yo(i.expiry)&&r.push(i.id)}),await Promise.all([...t.map(i=>this.deleteSession(i)),...r.map(i=>this.deleteProposal(i))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===so.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=so.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(r=>setTimeout(r,300))}catch(r){this.client.logger.warn(r)}}this.requestQueue.state=so.idle},this.processRequest=t=>{const{topic:r,payload:i}=t,s=i.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeRequest(r,i);case"wc_sessionSettle":return this.onSessionSettleRequest(r,i);case"wc_sessionUpdate":return this.onSessionUpdateRequest(r,i);case"wc_sessionExtend":return this.onSessionExtendRequest(r,i);case"wc_sessionPing":return this.onSessionPingRequest(r,i);case"wc_sessionDelete":return this.onSessionDeleteRequest(r,i);case"wc_sessionRequest":return this.onSessionRequest(r,i);case"wc_sessionEvent":return this.onSessionEventRequest(r,i);default:return this.client.logger.info(`Unsupported request method ${s}`)}},this.onRelayEventResponse=async t=>{const{topic:r,payload:i}=t,s=(await this.client.core.history.get(r,i.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(r,i);case"wc_sessionSettle":return this.onSessionSettleResponse(r,i);case"wc_sessionUpdate":return this.onSessionUpdateResponse(r,i);case"wc_sessionExtend":return this.onSessionExtendResponse(r,i);case"wc_sessionPing":return this.onSessionPingResponse(r,i);case"wc_sessionRequest":return this.onSessionRequestResponse(r,i);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:r}=t,{message:i}=be("MISSING_OR_INVALID",`Decoded payload on topic ${r} is not identifiable as a JSON-RPC request or a response.`);throw new Error(i)},this.onSessionProposeRequest=async(t,r)=>{const{params:i,id:s}=r;try{this.isValidConnect($r({},r.params));const o=Qi(Pe.FIVE_MINUTES),c=$r({id:s,pairingTopic:t,expiry:o},i);await this.setProposal(s,c);const l=Ql(JSON.stringify(r)),h=await this.getVerifyContext(l,c.proposer.metadata);this.client.events.emit("session_proposal",{id:s,params:c,verifyContext:h})}catch(o){await this.sendError(s,t,o),this.client.logger.error(o)}},this.onSessionProposeResponse=async(t,r)=>{const{id:i}=r;if(co(r)){const{result:s}=r;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const o=this.client.proposal.get(i);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o});const c=o.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c});const l=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:l});const h=await this.client.core.crypto.generateSharedKey(c,l);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:h});const f=await this.client.core.relayer.subscribe(h);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:f}),await this.client.core.pairing.activate({topic:t})}else ii(r)&&(await this.client.proposal.delete(i,yn("USER_DISCONNECTED")),this.events.emit(Nn("session_connect"),{error:r.error}))},this.onSessionSettleRequest=async(t,r)=>{const{id:i,params:s}=r;try{this.isValidSessionSettleRequest(s);const{relay:o,controller:c,expiry:l,namespaces:h,requiredNamespaces:f,optionalNamespaces:m,sessionProperties:y,pairingTopic:w}=r.params,I=$r({topic:t,relay:o,expiry:l,namespaces:h,acknowledged:!0,pairingTopic:w,requiredNamespaces:f,optionalNamespaces:m,controller:c.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:c.publicKey,metadata:c.metadata}},y&&{sessionProperties:y});await this.sendResult({id:r.id,topic:t,result:!0}),this.events.emit(Nn("session_connect"),{session:I}),this.cleanupDuplicatePairings(I)}catch(o){await this.sendError(i,t,o),this.client.logger.error(o)}},this.onSessionSettleResponse=async(t,r)=>{const{id:i}=r;co(r)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Nn("session_approve",i),{})):ii(r)&&(await this.client.session.delete(t,yn("USER_DISCONNECTED")),this.events.emit(Nn("session_approve",i),{error:r.error}))},this.onSessionUpdateRequest=async(t,r)=>{const{params:i,id:s}=r;try{const o=`${t}_session_update`,c=Jp.get(o);if(c&&this.isRequestOutOfSync(c,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidUpdate($r({topic:t},i)),await this.client.session.update(t,{namespaces:i.namespaces}),await this.sendResult({id:s,topic:t,result:!0}),this.client.events.emit("session_update",{id:s,topic:t,params:i}),Jp.set(o,s)}catch(o){await this.sendError(s,t,o),this.client.logger.error(o)}},this.isRequestOutOfSync=(t,r)=>parseInt(r.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,r)=>{const{id:i}=r;co(r)?this.events.emit(Nn("session_update",i),{}):ii(r)&&this.events.emit(Nn("session_update",i),{error:r.error})},this.onSessionExtendRequest=async(t,r)=>{const{id:i}=r;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Qi(lg)),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_extend",{id:i,topic:t})}catch(s){await this.sendError(i,t,s),this.client.logger.error(s)}},this.onSessionExtendResponse=(t,r)=>{const{id:i}=r;co(r)?this.events.emit(Nn("session_extend",i),{}):ii(r)&&this.events.emit(Nn("session_extend",i),{error:r.error})},this.onSessionPingRequest=async(t,r)=>{const{id:i}=r;try{this.isValidPing({topic:t}),await this.sendResult({id:i,topic:t,result:!0}),this.client.events.emit("session_ping",{id:i,topic:t})}catch(s){await this.sendError(i,t,s),this.client.logger.error(s)}},this.onSessionPingResponse=(t,r)=>{const{id:i}=r;setTimeout(()=>{co(r)?this.events.emit(Nn("session_ping",i),{}):ii(r)&&this.events.emit(Nn("session_ping",i),{error:r.error})},500)},this.onSessionDeleteRequest=async(t,r)=>{const{id:i}=r;try{this.isValidDisconnect({topic:t,reason:r.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(pr.publish,async()=>{s(await this.deleteSession(t))})}),this.sendResult({id:i,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:i,topic:t})}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async(t,r)=>{const{id:i,params:s}=r;try{this.isValidRequest($r({topic:t},s));const o=Ql(JSON.stringify(da("wc_sessionRequest",s,i))),c=this.client.session.get(t),l=await this.getVerifyContext(o,c.peer.metadata),h={id:i,topic:t,params:s,verifyContext:l};await this.setPendingSessionRequest(h),this.addSessionRequestToSessionRequestQueue(h),this.processSessionRequestQueue()}catch(o){await this.sendError(i,t,o),this.client.logger.error(o)}},this.onSessionRequestResponse=(t,r)=>{const{id:i}=r;co(r)?this.events.emit(Nn("session_request",i),{result:r.result}):ii(r)&&this.events.emit(Nn("session_request",i),{error:r.error})},this.onSessionEventRequest=async(t,r)=>{const{id:i,params:s}=r;try{const o=`${t}_session_event_${s.event.name}`,c=Jp.get(o);if(c&&this.isRequestOutOfSync(c,i)){this.client.logger.info(`Discarding out of sync request - ${i}`);return}this.isValidEmit($r({topic:t},s)),this.client.events.emit("session_event",{id:i,topic:t,params:s}),Jp.set(o,i)}catch(o){await this.sendError(i,t,o),this.client.logger.error(o)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=so.idle,this.processSessionRequestQueue()},Pe.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===so.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=so.active,this.client.events.emit("session_request",t)}catch(r){this.client.logger.error(r)}},this.onPairingCreated=t=>{if(t.active)return;const r=this.client.proposal.getAll().find(i=>i.pairingTopic===t.topic);r&&this.onSessionProposeRequest(t.topic,da("wc_sessionPropose",{requiredNamespaces:r.requiredNamespaces,optionalNamespaces:r.optionalNamespaces,relays:r.relays,proposer:r.proposer,sessionProperties:r.sessionProperties},r.id))},this.isValidConnect=async t=>{if(!Vr(t)){const{message:l}=be("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(l)}const{pairingTopic:r,requiredNamespaces:i,optionalNamespaces:s,sessionProperties:o,relays:c}=t;if(qr(r)||await this.isValidPairingTopic(r),!FB(c)){const{message:l}=be("MISSING_OR_INVALID",`connect() relays: ${c}`);throw new Error(l)}!qr(i)&&Rc(i)!==0&&this.validateNamespaces(i,"requiredNamespaces"),!qr(s)&&Rc(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),qr(o)||this.validateSessionProps(o,"sessionProperties")},this.validateNamespaces=(t,r)=>{const i=VB(t,"connect()",r);if(i)throw new Error(i.message)},this.isValidApprove=async t=>{if(!Vr(t))throw new Error(be("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:r,namespaces:i,relayProtocol:s,sessionProperties:o}=t;await this.isValidProposalId(r);const c=this.client.proposal.get(r),l=Lg(i,"approve()");if(l)throw new Error(l.message);const h=a5(c.requiredNamespaces,i,"approve()");if(h)throw new Error(h.message);if(!Gn(s,!0)){const{message:f}=be("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(f)}qr(o)||this.validateSessionProps(o,"sessionProperties")},this.isValidReject=async t=>{if(!Vr(t)){const{message:s}=be("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(s)}const{id:r,reason:i}=t;if(await this.isValidProposalId(r),!jB(i)){const{message:s}=be("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(i)}`);throw new Error(s)}},this.isValidSessionSettleRequest=t=>{if(!Vr(t)){const{message:h}=be("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(h)}const{relay:r,controller:i,namespaces:s,expiry:o}=t;if(!FC(r)){const{message:h}=be("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(h)}const c=NB(i,"onSessionSettleRequest()");if(c)throw new Error(c.message);const l=Lg(s,"onSessionSettleRequest()");if(l)throw new Error(l.message);if(Yo(o)){const{message:h}=be("EXPIRED","onSessionSettleRequest()");throw new Error(h)}},this.isValidUpdate=async t=>{if(!Vr(t)){const{message:l}=be("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(l)}const{topic:r,namespaces:i}=t;await this.isValidSessionTopic(r);const s=this.client.session.get(r),o=Lg(i,"update()");if(o)throw new Error(o.message);const c=a5(s.requiredNamespaces,i,"update()");if(c)throw new Error(c.message)},this.isValidExtend=async t=>{if(!Vr(t)){const{message:i}=be("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionTopic(r)},this.isValidRequest=async t=>{if(!Vr(t)){const{message:l}=be("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(l)}const{topic:r,request:i,chainId:s,expiry:o}=t;await this.isValidSessionTopic(r);const{namespaces:c}=this.client.session.get(r);if(!o5(c,s)){const{message:l}=be("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(l)}if(!qB(i)){const{message:l}=be("MISSING_OR_INVALID",`request() ${JSON.stringify(i)}`);throw new Error(l)}if(!zB(c,s,i.method)){const{message:l}=be("MISSING_OR_INVALID",`request() method: ${i.method}`);throw new Error(l)}if(o&&!JB(o,yw)){const{message:l}=be("MISSING_OR_INVALID",`request() expiry: ${o}. Expiry must be a number (in seconds) between ${yw.min} and ${yw.max}`);throw new Error(l)}},this.isValidRespond=async t=>{var r;if(!Vr(t)){const{message:o}=be("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(o)}const{topic:i,response:s}=t;try{await this.isValidSessionTopic(i)}catch(o){throw(r=t?.response)!=null&&r.id&&this.cleanupAfterResponse(t),o}if(!HB(s)){const{message:o}=be("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidPing=async t=>{if(!Vr(t)){const{message:i}=be("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.isValidEmit=async t=>{if(!Vr(t)){const{message:c}=be("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(c)}const{topic:r,event:i,chainId:s}=t;await this.isValidSessionTopic(r);const{namespaces:o}=this.client.session.get(r);if(!o5(o,s)){const{message:c}=be("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(c)}if(!WB(i)){const{message:c}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}if(!GB(o,s,i.name)){const{message:c}=be("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(i)}`);throw new Error(c)}},this.isValidDisconnect=async t=>{if(!Vr(t)){const{message:i}=be("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(i)}const{topic:r}=t;await this.isValidSessionOrPairingTopic(r)},this.getVerifyContext=async(t,r)=>{const i={verified:{verifyUrl:r.verifyUrl||Wl,validation:"UNKNOWN",origin:r.url||""}};try{const s=await this.client.core.verify.resolve({attestationId:t,verifyUrl:r.verifyUrl});s&&(i.verified.origin=s.origin,i.verified.isScam=s.isScam,i.verified.validation=s.origin===new URL(r.url).origin?"VALID":"INVALID")}catch(s){this.client.logger.info(s)}return this.client.logger.info(`Verify context: ${JSON.stringify(i)}`),i},this.validateSessionProps=(t,r)=>{Object.values(t).forEach(i=>{if(!Gn(i,!1)){const{message:s}=be("MISSING_OR_INVALID",`${r} must be in Record<string, string> format. Received: ${JSON.stringify(i)}`);throw new Error(s)}})}}async isInitialized(){if(!this.initialized){const{message:e}=be("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(pr.message,async e=>{const{topic:t,message:r}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(r)))return;const i=await this.client.core.crypto.decode(t,r);try{PE(i)?(this.client.core.history.set(t,i),this.onRelayEventRequest({topic:t,payload:i})):Zu(i)?(await this.client.core.history.resolve(i),await this.onRelayEventResponse({topic:t,payload:i}),this.client.core.history.delete(t,i.id)):this.onRelayEventUnknownPayload({topic:t,payload:i})}catch(s){this.client.logger.error(s)}})}registerExpirerEvents(){this.client.core.expirer.on(Oi.expired,async e=>{const{topic:t,id:r}=$C(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,be("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}registerPairingEvents(){this.client.core.pairing.events.on(fd.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Gn(e,!1)){const{message:t}=be("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Yo(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=be("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Gn(e,!1)){const{message:t}=be("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Yo(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=be("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Gn(e,!1)){const{message:t}=be("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=be("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!BB(e)){const{message:t}=be("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=be("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Yo(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=be("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class uie extends zm{constructor(e,t){super(e,t,Xre,kE),this.core=e,this.logger=t}}let hie=class extends zm{constructor(e,t){super(e,t,eie,kE),this.core=e,this.logger=t}};class die extends zm{constructor(e,t){super(e,t,nie,kE,r=>r.id),this.core=e,this.logger=t}}let fie=class XP extends wee{constructor(e){super(e),this.protocol=QP,this.version=JP,this.name=mw.name,this.events=new Pr.EventEmitter,this.on=(r,i)=>this.events.on(r,i),this.once=(r,i)=>this.events.once(r,i),this.off=(r,i)=>this.events.off(r,i),this.removeListener=(r,i)=>this.events.removeListener(r,i),this.removeAllListeners=r=>this.events.removeAllListeners(r),this.connect=async r=>{try{return await this.engine.connect(r)}catch(i){throw this.logger.error(i.message),i}},this.pair=async r=>{try{return await this.engine.pair(r)}catch(i){throw this.logger.error(i.message),i}},this.approve=async r=>{try{return await this.engine.approve(r)}catch(i){throw this.logger.error(i.message),i}},this.reject=async r=>{try{return await this.engine.reject(r)}catch(i){throw this.logger.error(i.message),i}},this.update=async r=>{try{return await this.engine.update(r)}catch(i){throw this.logger.error(i.message),i}},this.extend=async r=>{try{return await this.engine.extend(r)}catch(i){throw this.logger.error(i.message),i}},this.request=async r=>{try{return await this.engine.request(r)}catch(i){throw this.logger.error(i.message),i}},this.respond=async r=>{try{return await this.engine.respond(r)}catch(i){throw this.logger.error(i.message),i}},this.ping=async r=>{try{return await this.engine.ping(r)}catch(i){throw this.logger.error(i.message),i}},this.emit=async r=>{try{return await this.engine.emit(r)}catch(i){throw this.logger.error(i.message),i}},this.disconnect=async r=>{try{return await this.engine.disconnect(r)}catch(i){throw this.logger.error(i.message),i}},this.find=r=>{try{return this.engine.find(r)}catch(i){throw this.logger.error(i.message),i}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(r){throw this.logger.error(r.message),r}},this.name=e?.name||mw.name,this.metadata=e?.metadata||YF();const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:W0(Bm({level:e?.logger||mw.logger}));this.core=e?.core||new Zre(e),this.logger=Jr(t,this.name),this.session=new hie(this.core,this.logger),this.proposal=new uie(this.core,this.logger),this.pendingRequest=new die(this.core,this.logger),this.engine=new lie(this)}static async init(e){const t=new XP(e);return await t.initialize(),t}get context(){return Qr(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var pie=Object.defineProperty,gie=Object.defineProperties,mie=Object.getOwnPropertyDescriptors,F3=Object.getOwnPropertySymbols,yie=Object.prototype.hasOwnProperty,wie=Object.prototype.propertyIsEnumerable,B3=(n,e,t)=>e in n?pie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j3=(n,e)=>{for(var t in e||(e={}))yie.call(e,t)&&B3(n,t,e[t]);if(F3)for(var t of F3(e))wie.call(e,t)&&B3(n,t,e[t]);return n},q3=(n,e)=>gie(n,mie(e));const _ie={Accept:"application/json","Content-Type":"application/json"},vie="POST",H3={headers:_ie,method:vie},W3=10;let So=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new Pr.EventEmitter,this.isAvailable=!1,this.registering=!1,!g3(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Ia(e),r=await(await fA(this.url,q3(j3({},H3),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!g3(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((r,i)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),i(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return i(new Error("HTTP connection is missing or invalid"));r()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Ia({id:1,jsonrpc:"2.0",method:"test",params:[]});await fA(e,q3(j3({},H3),{body:t}))}this.onOpen()}catch(t){const r=this.parseError(t);throw this.events.emit("register_error",r),this.onClose(),r}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?Ju(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),i=r.message||r.toString(),s=Ru(e,i);this.events.emit("payload",s)}parseError(e,t=this.url){return xP(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>W3&&this.events.setMaxListeners(W3)}};class ka extends xE{constructor(e){super(e),this.events=new Pr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(da(e.method,e.params||[],e.id||qm().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{ii(s)?i(s.error):r(s.result)});try{await this.connection.send(e,t)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Zu(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const z3="error",bie="wss://relay.walletconnect.com",Eie="wc",Iie="universal_provider",G3=`${Eie}@2:${Iie}:`,Aie="https://rpc.walletconnect.com/v1/",To={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ev={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(n,e){(function(){var t,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",c="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",h=500,f="__lodash_placeholder__",m=1,y=2,w=4,I=1,T=2,A=1,L=2,D=4,C=8,k=16,P=32,O=64,g=128,_=256,R=512,N=30,M="...",j=800,$=16,q=1,B=2,Q=3,G=1/0,K=9007199254740991,J=17976931348623157e292,ne=NaN,se=4294967295,pe=se-1,ae=se>>>1,Ae=[["ary",g],["bind",A],["bindKey",L],["curry",C],["curryRight",k],["flip",R],["partial",P],["partialRight",O],["rearg",_]],we="[object Arguments]",De="[object Array]",ee="[object AsyncFunction]",re="[object Boolean]",Y="[object Date]",E="[object DOMException]",W="[object Error]",ge="[object Function]",ye="[object GeneratorFunction]",Me="[object Map]",We="[object Number]",tt="[object Null]",nt="[object Object]",Zt="[object Promise]",Jt="[object Proxy]",Ye="[object RegExp]",Fe="[object Set]",Ze="[object String]",ze="[object Symbol]",Xe="[object Undefined]",je="[object WeakMap]",Oe="[object WeakSet]",Ce="[object ArrayBuffer]",qe="[object DataView]",lt="[object Float32Array]",dt="[object Float64Array]",pt="[object Int8Array]",ut="[object Int16Array]",wt="[object Int32Array]",It="[object Uint8Array]",At="[object Uint8ClampedArray]",kr="[object Uint16Array]",Yr="[object Uint32Array]",gi=/\b__p \+= '';/g,is=/\b(__p \+=) '' \+/g,Bs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mi=/&(?:amp|lt|gt|quot|#39);/g,js=/[&<>"']/g,dn=RegExp(mi.source),zt=RegExp(js.source),vn=/<%-([\s\S]+?)%>/g,rn=/<%([\s\S]+?)%>/g,fn=/<%=([\s\S]+?)%>/g,Xt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bn=/^\w*$/,St=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sn=/[\\^$.*+?()[\]{}|]/g,en=RegExp(sn.source),Gt=/^\s+/,Rn=/\s/,Cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yt=/\{\n\/\* \[wrapped with (.+)\] \*/,xn=/,? & /,Pn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,tl=/[()=,{}\[\]\/\s]/,Vf=/\\(\\)?/g,oh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Da=/\w*$/,ss=/^[-+]0x[0-9a-f]+$/i,Ff=/^0b[01]+$/i,Bf=/^\[object .+?Constructor\]$/,ah=/^0o[0-7]+$/i,ch=/^(?:0|[1-9]\d*)$/,jf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ma=/($^)/,k1=/['\n\r\u2028\u2029\\]/g,qs="\\ud800-\\udfff",qf="\\u0300-\\u036f",lh="\\ufe20-\\ufe2f",La="\\u20d0-\\u20ff",os=qf+lh+La,nl="\\u2700-\\u27bf",Hf="a-z\\xdf-\\xf6\\xf8-\\xff",Wf="\\xac\\xb1\\xd7\\xf7",zf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Gf="\\u2000-\\u206f",uh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rl="A-Z\\xc0-\\xd6\\xd8-\\xde",hh="\\ufe0e\\ufe0f",dh=Wf+zf+Gf+uh,fh="['’]",N1="["+qs+"]",ph="["+dh+"]",Ua="["+os+"]",Kf="\\d+",Hs="["+nl+"]",yi="["+Hf+"]",$a="[^"+qs+dh+Kf+nl+Hf+rl+"]",Ro="\\ud83c[\\udffb-\\udfff]",Qf="(?:"+Ua+"|"+Ro+")",qt="[^"+qs+"]",Co="(?:\\ud83c[\\udde6-\\uddff]){2}",Ws="[\\ud800-\\udbff][\\udc00-\\udfff]",wi="["+rl+"]",Jf="\\u200d",gh="(?:"+yi+"|"+$a+")",D1="(?:"+wi+"|"+$a+")",Yf="(?:"+fh+"(?:d|ll|m|re|s|t|ve))?",Zf="(?:"+fh+"(?:D|LL|M|RE|S|T|VE))?",Xf=Qf+"?",xo="["+hh+"]?",as="(?:"+Jf+"(?:"+[qt,Co,Ws].join("|")+")"+xo+Xf+")*",ep="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mh=xo+Xf+as,Po="(?:"+[Hs,Co,Ws].join("|")+")"+mh,M1="(?:"+[qt+Ua+"?",Ua,Co,Ws,N1].join("|")+")",L1=RegExp(fh,"g"),U1=RegExp(Ua,"g"),_i=RegExp(Ro+"(?="+Ro+")|"+M1+mh,"g"),$1=RegExp([wi+"?"+yi+"+"+Yf+"(?="+[ph,wi,"$"].join("|")+")",D1+"+"+Zf+"(?="+[ph,wi+gh,"$"].join("|")+")",wi+"?"+gh+"+"+Yf,wi+"+"+Zf,tp,ep,Kf,Po].join("|"),"g"),V1=RegExp("["+Jf+qs+os+hh+"]"),il=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],np=-1,Dt={};Dt[lt]=Dt[dt]=Dt[pt]=Dt[ut]=Dt[wt]=Dt[It]=Dt[At]=Dt[kr]=Dt[Yr]=!0,Dt[we]=Dt[De]=Dt[Ce]=Dt[re]=Dt[qe]=Dt[Y]=Dt[W]=Dt[ge]=Dt[Me]=Dt[We]=Dt[nt]=Dt[Ye]=Dt[Fe]=Dt[Ze]=Dt[je]=!1;var kt={};kt[we]=kt[De]=kt[Ce]=kt[qe]=kt[re]=kt[Y]=kt[lt]=kt[dt]=kt[pt]=kt[ut]=kt[wt]=kt[Me]=kt[We]=kt[nt]=kt[Ye]=kt[Fe]=kt[Ze]=kt[ze]=kt[It]=kt[At]=kt[kr]=kt[Yr]=!0,kt[W]=kt[ge]=kt[je]=!1;var rp={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},yh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},F1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},B1=parseFloat,ip=parseInt,wh=typeof Kh=="object"&&Kh&&Kh.Object===Object&&Kh,sp=typeof self=="object"&&self&&self.Object===Object&&self,pn=wh||sp||Function("return this")(),ol=e&&!e.nodeType&&e,Qn=ol&&!0&&n&&!n.nodeType&&n,_h=Qn&&Qn.exports===ol,vh=_h&&wh.process,jn=function(){try{var Z=Qn&&Qn.require&&Qn.require("util").types;return Z||vh&&vh.binding&&vh.binding("util")}catch{}}(),bh=jn&&jn.isArrayBuffer,al=jn&&jn.isDate,Va=jn&&jn.isMap,Eh=jn&&jn.isRegExp,Fa=jn&&jn.isSet,op=jn&&jn.isTypedArray;function sr(Z,ce,ie){switch(ie.length){case 0:return Z.call(ce);case 1:return Z.call(ce,ie[0]);case 2:return Z.call(ce,ie[0],ie[1]);case 3:return Z.call(ce,ie[0],ie[1],ie[2])}return Z.apply(ce,ie)}function Ba(Z,ce,ie,Te){for(var Ge=-1,Lt=Z==null?0:Z.length;++Ge<Lt;){var Un=Z[Ge];ce(Te,Un,ie(Un),Z)}return Te}function yr(Z,ce){for(var ie=-1,Te=Z==null?0:Z.length;++ie<Te&&ce(Z[ie],ie,Z)!==!1;);return Z}function ap(Z,ce){for(var ie=Z==null?0:Z.length;ie--&&ce(Z[ie],ie,Z)!==!1;);return Z}function cl(Z,ce){for(var ie=-1,Te=Z==null?0:Z.length;++ie<Te;)if(!ce(Z[ie],ie,Z))return!1;return!0}function vi(Z,ce){for(var ie=-1,Te=Z==null?0:Z.length,Ge=0,Lt=[];++ie<Te;){var Un=Z[ie];ce(Un,ie,Z)&&(Lt[Ge++]=Un)}return Lt}function ja(Z,ce){var ie=Z==null?0:Z.length;return!!ie&&zs(Z,ce,0)>-1}function Oo(Z,ce,ie){for(var Te=-1,Ge=Z==null?0:Z.length;++Te<Ge;)if(ie(ce,Z[Te]))return!0;return!1}function Ht(Z,ce){for(var ie=-1,Te=Z==null?0:Z.length,Ge=Array(Te);++ie<Te;)Ge[ie]=ce(Z[ie],ie,Z);return Ge}function Vi(Z,ce){for(var ie=-1,Te=ce.length,Ge=Z.length;++ie<Te;)Z[Ge+ie]=ce[ie];return Z}function Fi(Z,ce,ie,Te){var Ge=-1,Lt=Z==null?0:Z.length;for(Te&&Lt&&(ie=Z[++Ge]);++Ge<Lt;)ie=ce(ie,Z[Ge],Ge,Z);return ie}function cp(Z,ce,ie,Te){var Ge=Z==null?0:Z.length;for(Te&&Ge&&(ie=Z[--Ge]);Ge--;)ie=ce(ie,Z[Ge],Ge,Z);return ie}function ll(Z,ce){for(var ie=-1,Te=Z==null?0:Z.length;++ie<Te;)if(ce(Z[ie],ie,Z))return!0;return!1}var lp=S("length");function up(Z){return Z.split("")}function ul(Z){return Z.match(Pn)||[]}function or(Z,ce,ie){var Te;return ie(Z,function(Ge,Lt,Un){if(ce(Ge,Lt,Un))return Te=Lt,!1}),Te}function qa(Z,ce,ie,Te){for(var Ge=Z.length,Lt=ie+(Te?1:-1);Te?Lt--:++Lt<Ge;)if(ce(Z[Lt],Lt,Z))return Lt;return-1}function zs(Z,ce,ie){return ce===ce?S8(Z,ce,ie):qa(Z,d,ie)}function ko(Z,ce,ie,Te){for(var Ge=ie-1,Lt=Z.length;++Ge<Lt;)if(Te(Z[Ge],ce))return Ge;return-1}function d(Z){return Z!==Z}function v(Z,ce){var ie=Z==null?0:Z.length;return ie?me(Z,ce)/ie:ne}function S(Z){return function(ce){return ce==null?t:ce[Z]}}function V(Z){return function(ce){return Z==null?t:Z[ce]}}function te(Z,ce,ie,Te,Ge){return Ge(Z,function(Lt,Un,Wt){ie=Te?(Te=!1,Lt):ce(ie,Lt,Un,Wt)}),ie}function oe(Z,ce){var ie=Z.length;for(Z.sort(ce);ie--;)Z[ie]=Z[ie].value;return Z}function me(Z,ce){for(var ie,Te=-1,Ge=Z.length;++Te<Ge;){var Lt=ce(Z[Te]);Lt!==t&&(ie=ie===t?Lt:ie+Lt)}return ie}function Mt(Z,ce){for(var ie=-1,Te=Array(Z);++ie<Z;)Te[ie]=ce(ie);return Te}function Ln(Z,ce){return Ht(ce,function(ie){return[ie,Z[ie]]})}function _t(Z){return Z&&Z.slice(0,b2(Z)+1).replace(Gt,"")}function $t(Z){return function(ce){return Z(ce)}}function On(Z,ce){return Ht(ce,function(ie){return Z[ie]})}function bi(Z,ce){return Z.has(ce)}function Nr(Z,ce){for(var ie=-1,Te=Z.length;++ie<Te&&zs(ce,Z[ie],0)>-1;);return ie}function Ha(Z,ce){for(var ie=Z.length;ie--&&zs(ce,Z[ie],0)>-1;);return ie}function Ih(Z,ce){for(var ie=Z.length,Te=0;ie--;)Z[ie]===ce&&++Te;return Te}var w8=V(rp),_8=V(yh);function v8(Z){return"\\"+F1[Z]}function b8(Z,ce){return Z==null?t:Z[ce]}function hl(Z){return V1.test(Z)}function E8(Z){return il.test(Z)}function I8(Z){for(var ce,ie=[];!(ce=Z.next()).done;)ie.push(ce.value);return ie}function j1(Z){var ce=-1,ie=Array(Z.size);return Z.forEach(function(Te,Ge){ie[++ce]=[Ge,Te]}),ie}function v2(Z,ce){return function(ie){return Z(ce(ie))}}function No(Z,ce){for(var ie=-1,Te=Z.length,Ge=0,Lt=[];++ie<Te;){var Un=Z[ie];(Un===ce||Un===f)&&(Z[ie]=f,Lt[Ge++]=ie)}return Lt}function hp(Z){var ce=-1,ie=Array(Z.size);return Z.forEach(function(Te){ie[++ce]=Te}),ie}function A8(Z){var ce=-1,ie=Array(Z.size);return Z.forEach(function(Te){ie[++ce]=[Te,Te]}),ie}function S8(Z,ce,ie){for(var Te=ie-1,Ge=Z.length;++Te<Ge;)if(Z[Te]===ce)return Te;return-1}function T8(Z,ce,ie){for(var Te=ie+1;Te--;)if(Z[Te]===ce)return Te;return Te}function dl(Z){return hl(Z)?C8(Z):lp(Z)}function Bi(Z){return hl(Z)?x8(Z):up(Z)}function b2(Z){for(var ce=Z.length;ce--&&Rn.test(Z.charAt(ce)););return ce}var R8=V(tn);function C8(Z){for(var ce=_i.lastIndex=0;_i.test(Z);)++ce;return ce}function x8(Z){return Z.match(_i)||[]}function P8(Z){return Z.match($1)||[]}var O8=function Z(ce){ce=ce==null?pn:fl.defaults(pn.Object(),ce,fl.pick(pn,sl));var ie=ce.Array,Te=ce.Date,Ge=ce.Error,Lt=ce.Function,Un=ce.Math,Wt=ce.Object,q1=ce.RegExp,k8=ce.String,Ei=ce.TypeError,dp=ie.prototype,N8=Lt.prototype,pl=Wt.prototype,fp=ce["__core-js_shared__"],pp=N8.toString,jt=pl.hasOwnProperty,D8=0,E2=function(){var a=/[^.]+$/.exec(fp&&fp.keys&&fp.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),gp=pl.toString,M8=pp.call(Wt),L8=pn._,U8=q1("^"+pp.call(jt).replace(sn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mp=_h?ce.Buffer:t,Do=ce.Symbol,yp=ce.Uint8Array,I2=mp?mp.allocUnsafe:t,wp=v2(Wt.getPrototypeOf,Wt),A2=Wt.create,S2=pl.propertyIsEnumerable,_p=dp.splice,T2=Do?Do.isConcatSpreadable:t,Ah=Do?Do.iterator:t,Wa=Do?Do.toStringTag:t,vp=function(){try{var a=Ja(Wt,"defineProperty");return a({},"",{}),a}catch{}}(),$8=ce.clearTimeout!==pn.clearTimeout&&ce.clearTimeout,V8=Te&&Te.now!==pn.Date.now&&Te.now,F8=ce.setTimeout!==pn.setTimeout&&ce.setTimeout,bp=Un.ceil,Ep=Un.floor,H1=Wt.getOwnPropertySymbols,B8=mp?mp.isBuffer:t,R2=ce.isFinite,j8=dp.join,q8=v2(Wt.keys,Wt),$n=Un.max,ar=Un.min,H8=Te.now,W8=ce.parseInt,C2=Un.random,z8=dp.reverse,W1=Ja(ce,"DataView"),Sh=Ja(ce,"Map"),z1=Ja(ce,"Promise"),gl=Ja(ce,"Set"),Th=Ja(ce,"WeakMap"),Rh=Ja(Wt,"create"),Ip=Th&&new Th,ml={},G8=Ya(W1),K8=Ya(Sh),Q8=Ya(z1),J8=Ya(gl),Y8=Ya(Th),Ap=Do?Do.prototype:t,Ch=Ap?Ap.valueOf:t,x2=Ap?Ap.toString:t;function U(a){if(gn(a)&&!Je(a)&&!(a instanceof gt)){if(a instanceof Ii)return a;if(jt.call(a,"__wrapped__"))return PI(a)}return new Ii(a)}var yl=function(){function a(){}return function(u){if(!on(u))return{};if(A2)return A2(u);a.prototype=u;var p=new a;return a.prototype=t,p}}();function Sp(){}function Ii(a,u){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=t}U.templateSettings={escape:vn,evaluate:rn,interpolate:fn,variable:"",imports:{_:U}},U.prototype=Sp.prototype,U.prototype.constructor=U,Ii.prototype=yl(Sp.prototype),Ii.prototype.constructor=Ii;function gt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function Z8(){var a=new gt(this.__wrapped__);return a.__actions__=Dr(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Dr(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Dr(this.__views__),a}function X8(){if(this.__filtered__){var a=new gt(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function eN(){var a=this.__wrapped__.value(),u=this.__dir__,p=Je(a),b=u<0,x=p?a.length:0,F=dD(0,x,this.__views__),H=F.start,z=F.end,X=z-H,ue=b?z:H-1,he=this.__iteratees__,fe=he.length,Ee=0,xe=ar(X,this.__takeCount__);if(!p||!b&&x==X&&xe==X)return X2(a,this.__actions__);var $e=[];e:for(;X--&&Ee<xe;){ue+=u;for(var it=-1,Ve=a[ue];++it<fe;){var ft=he[it],vt=ft.iteratee,ei=ft.type,vr=vt(Ve);if(ei==B)Ve=vr;else if(!vr){if(ei==q)continue e;break e}}$e[Ee++]=Ve}return $e}gt.prototype=yl(Sp.prototype),gt.prototype.constructor=gt;function za(a){var u=-1,p=a==null?0:a.length;for(this.clear();++u<p;){var b=a[u];this.set(b[0],b[1])}}function tN(){this.__data__=Rh?Rh(null):{},this.size=0}function nN(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u}function rN(a){var u=this.__data__;if(Rh){var p=u[a];return p===l?t:p}return jt.call(u,a)?u[a]:t}function iN(a){var u=this.__data__;return Rh?u[a]!==t:jt.call(u,a)}function sN(a,u){var p=this.__data__;return this.size+=this.has(a)?0:1,p[a]=Rh&&u===t?l:u,this}za.prototype.clear=tN,za.prototype.delete=nN,za.prototype.get=rN,za.prototype.has=iN,za.prototype.set=sN;function Gs(a){var u=-1,p=a==null?0:a.length;for(this.clear();++u<p;){var b=a[u];this.set(b[0],b[1])}}function oN(){this.__data__=[],this.size=0}function aN(a){var u=this.__data__,p=Tp(u,a);if(p<0)return!1;var b=u.length-1;return p==b?u.pop():_p.call(u,p,1),--this.size,!0}function cN(a){var u=this.__data__,p=Tp(u,a);return p<0?t:u[p][1]}function lN(a){return Tp(this.__data__,a)>-1}function uN(a,u){var p=this.__data__,b=Tp(p,a);return b<0?(++this.size,p.push([a,u])):p[b][1]=u,this}Gs.prototype.clear=oN,Gs.prototype.delete=aN,Gs.prototype.get=cN,Gs.prototype.has=lN,Gs.prototype.set=uN;function Ks(a){var u=-1,p=a==null?0:a.length;for(this.clear();++u<p;){var b=a[u];this.set(b[0],b[1])}}function hN(){this.size=0,this.__data__={hash:new za,map:new(Sh||Gs),string:new za}}function dN(a){var u=$p(this,a).delete(a);return this.size-=u?1:0,u}function fN(a){return $p(this,a).get(a)}function pN(a){return $p(this,a).has(a)}function gN(a,u){var p=$p(this,a),b=p.size;return p.set(a,u),this.size+=p.size==b?0:1,this}Ks.prototype.clear=hN,Ks.prototype.delete=dN,Ks.prototype.get=fN,Ks.prototype.has=pN,Ks.prototype.set=gN;function Ga(a){var u=-1,p=a==null?0:a.length;for(this.__data__=new Ks;++u<p;)this.add(a[u])}function mN(a){return this.__data__.set(a,l),this}function yN(a){return this.__data__.has(a)}Ga.prototype.add=Ga.prototype.push=mN,Ga.prototype.has=yN;function ji(a){var u=this.__data__=new Gs(a);this.size=u.size}function wN(){this.__data__=new Gs,this.size=0}function _N(a){var u=this.__data__,p=u.delete(a);return this.size=u.size,p}function vN(a){return this.__data__.get(a)}function bN(a){return this.__data__.has(a)}function EN(a,u){var p=this.__data__;if(p instanceof Gs){var b=p.__data__;if(!Sh||b.length<i-1)return b.push([a,u]),this.size=++p.size,this;p=this.__data__=new Ks(b)}return p.set(a,u),this.size=p.size,this}ji.prototype.clear=wN,ji.prototype.delete=_N,ji.prototype.get=vN,ji.prototype.has=bN,ji.prototype.set=EN;function P2(a,u){var p=Je(a),b=!p&&Za(a),x=!p&&!b&&Vo(a),F=!p&&!b&&!x&&bl(a),H=p||b||x||F,z=H?Mt(a.length,k8):[],X=z.length;for(var ue in a)(u||jt.call(a,ue))&&!(H&&(ue=="length"||x&&(ue=="offset"||ue=="parent")||F&&(ue=="buffer"||ue=="byteLength"||ue=="byteOffset")||Zs(ue,X)))&&z.push(ue);return z}function O2(a){var u=a.length;return u?a[ry(0,u-1)]:t}function IN(a,u){return Vp(Dr(a),Ka(u,0,a.length))}function AN(a){return Vp(Dr(a))}function G1(a,u,p){(p!==t&&!qi(a[u],p)||p===t&&!(u in a))&&Qs(a,u,p)}function xh(a,u,p){var b=a[u];(!(jt.call(a,u)&&qi(b,p))||p===t&&!(u in a))&&Qs(a,u,p)}function Tp(a,u){for(var p=a.length;p--;)if(qi(a[p][0],u))return p;return-1}function SN(a,u,p,b){return Mo(a,function(x,F,H){u(b,x,p(x),H)}),b}function k2(a,u){return a&&ls(u,qn(u),a)}function TN(a,u){return a&&ls(u,Lr(u),a)}function Qs(a,u,p){u=="__proto__"&&vp?vp(a,u,{configurable:!0,enumerable:!0,value:p,writable:!0}):a[u]=p}function K1(a,u){for(var p=-1,b=u.length,x=ie(b),F=a==null;++p<b;)x[p]=F?t:Cy(a,u[p]);return x}function Ka(a,u,p){return a===a&&(p!==t&&(a=a<=p?a:p),u!==t&&(a=a>=u?a:u)),a}function Ai(a,u,p,b,x,F){var H,z=u&m,X=u&y,ue=u&w;if(p&&(H=x?p(a,b,x,F):p(a)),H!==t)return H;if(!on(a))return a;var he=Je(a);if(he){if(H=pD(a),!z)return Dr(a,H)}else{var fe=cr(a),Ee=fe==ge||fe==ye;if(Vo(a))return nI(a,z);if(fe==nt||fe==we||Ee&&!x){if(H=X||Ee?{}:bI(a),!z)return X?rD(a,TN(H,a)):nD(a,k2(H,a))}else{if(!kt[fe])return x?a:{};H=gD(a,fe,z)}}F||(F=new ji);var xe=F.get(a);if(xe)return xe;F.set(a,H),JI(a)?a.forEach(function(Ve){H.add(Ai(Ve,u,p,Ve,a,F))}):KI(a)&&a.forEach(function(Ve,ft){H.set(ft,Ai(Ve,u,p,ft,a,F))});var $e=ue?X?py:fy:X?Lr:qn,it=he?t:$e(a);return yr(it||a,function(Ve,ft){it&&(ft=Ve,Ve=a[ft]),xh(H,ft,Ai(Ve,u,p,ft,a,F))}),H}function RN(a){var u=qn(a);return function(p){return N2(p,a,u)}}function N2(a,u,p){var b=p.length;if(a==null)return!b;for(a=Wt(a);b--;){var x=p[b],F=u[x],H=a[x];if(H===t&&!(x in a)||!F(H))return!1}return!0}function D2(a,u,p){if(typeof a!="function")throw new Ei(o);return Lh(function(){a.apply(t,p)},u)}function Ph(a,u,p,b){var x=-1,F=ja,H=!0,z=a.length,X=[],ue=u.length;if(!z)return X;p&&(u=Ht(u,$t(p))),b?(F=Oo,H=!1):u.length>=i&&(F=bi,H=!1,u=new Ga(u));e:for(;++x<z;){var he=a[x],fe=p==null?he:p(he);if(he=b||he!==0?he:0,H&&fe===fe){for(var Ee=ue;Ee--;)if(u[Ee]===fe)continue e;X.push(he)}else F(u,fe,b)||X.push(he)}return X}var Mo=aI(cs),M2=aI(J1,!0);function CN(a,u){var p=!0;return Mo(a,function(b,x,F){return p=!!u(b,x,F),p}),p}function Rp(a,u,p){for(var b=-1,x=a.length;++b<x;){var F=a[b],H=u(F);if(H!=null&&(z===t?H===H&&!Xr(H):p(H,z)))var z=H,X=F}return X}function xN(a,u,p,b){var x=a.length;for(p=rt(p),p<0&&(p=-p>x?0:x+p),b=b===t||b>x?x:rt(b),b<0&&(b+=x),b=p>b?0:ZI(b);p<b;)a[p++]=u;return a}function L2(a,u){var p=[];return Mo(a,function(b,x,F){u(b,x,F)&&p.push(b)}),p}function Jn(a,u,p,b,x){var F=-1,H=a.length;for(p||(p=yD),x||(x=[]);++F<H;){var z=a[F];u>0&&p(z)?u>1?Jn(z,u-1,p,b,x):Vi(x,z):b||(x[x.length]=z)}return x}var Q1=cI(),U2=cI(!0);function cs(a,u){return a&&Q1(a,u,qn)}function J1(a,u){return a&&U2(a,u,qn)}function Cp(a,u){return vi(u,function(p){return Xs(a[p])})}function Qa(a,u){u=Uo(u,a);for(var p=0,b=u.length;a!=null&&p<b;)a=a[us(u[p++])];return p&&p==b?a:t}function $2(a,u,p){var b=u(a);return Je(a)?b:Vi(b,p(a))}function wr(a){return a==null?a===t?Xe:tt:Wa&&Wa in Wt(a)?hD(a):AD(a)}function Y1(a,u){return a>u}function PN(a,u){return a!=null&&jt.call(a,u)}function ON(a,u){return a!=null&&u in Wt(a)}function kN(a,u,p){return a>=ar(u,p)&&a<$n(u,p)}function Z1(a,u,p){for(var b=p?Oo:ja,x=a[0].length,F=a.length,H=F,z=ie(F),X=1/0,ue=[];H--;){var he=a[H];H&&u&&(he=Ht(he,$t(u))),X=ar(he.length,X),z[H]=!p&&(u||x>=120&&he.length>=120)?new Ga(H&&he):t}he=a[0];var fe=-1,Ee=z[0];e:for(;++fe<x&&ue.length<X;){var xe=he[fe],$e=u?u(xe):xe;if(xe=p||xe!==0?xe:0,!(Ee?bi(Ee,$e):b(ue,$e,p))){for(H=F;--H;){var it=z[H];if(!(it?bi(it,$e):b(a[H],$e,p)))continue e}Ee&&Ee.push($e),ue.push(xe)}}return ue}function NN(a,u,p,b){return cs(a,function(x,F,H){u(b,p(x),F,H)}),b}function Oh(a,u,p){u=Uo(u,a),a=SI(a,u);var b=a==null?a:a[us(Ti(u))];return b==null?t:sr(b,a,p)}function V2(a){return gn(a)&&wr(a)==we}function DN(a){return gn(a)&&wr(a)==Ce}function MN(a){return gn(a)&&wr(a)==Y}function kh(a,u,p,b,x){return a===u?!0:a==null||u==null||!gn(a)&&!gn(u)?a!==a&&u!==u:LN(a,u,p,b,kh,x)}function LN(a,u,p,b,x,F){var H=Je(a),z=Je(u),X=H?De:cr(a),ue=z?De:cr(u);X=X==we?nt:X,ue=ue==we?nt:ue;var he=X==nt,fe=ue==nt,Ee=X==ue;if(Ee&&Vo(a)){if(!Vo(u))return!1;H=!0,he=!1}if(Ee&&!he)return F||(F=new ji),H||bl(a)?wI(a,u,p,b,x,F):lD(a,u,X,p,b,x,F);if(!(p&I)){var xe=he&&jt.call(a,"__wrapped__"),$e=fe&&jt.call(u,"__wrapped__");if(xe||$e){var it=xe?a.value():a,Ve=$e?u.value():u;return F||(F=new ji),x(it,Ve,p,b,F)}}return Ee?(F||(F=new ji),uD(a,u,p,b,x,F)):!1}function UN(a){return gn(a)&&cr(a)==Me}function X1(a,u,p,b){var x=p.length,F=x,H=!b;if(a==null)return!F;for(a=Wt(a);x--;){var z=p[x];if(H&&z[2]?z[1]!==a[z[0]]:!(z[0]in a))return!1}for(;++x<F;){z=p[x];var X=z[0],ue=a[X],he=z[1];if(H&&z[2]){if(ue===t&&!(X in a))return!1}else{var fe=new ji;if(b)var Ee=b(ue,he,X,a,u,fe);if(!(Ee===t?kh(he,ue,I|T,b,fe):Ee))return!1}}return!0}function F2(a){if(!on(a)||_D(a))return!1;var u=Xs(a)?U8:Bf;return u.test(Ya(a))}function $N(a){return gn(a)&&wr(a)==Ye}function VN(a){return gn(a)&&cr(a)==Fe}function FN(a){return gn(a)&&Wp(a.length)&&!!Dt[wr(a)]}function B2(a){return typeof a=="function"?a:a==null?Ur:typeof a=="object"?Je(a)?H2(a[0],a[1]):q2(a):lA(a)}function ey(a){if(!Mh(a))return q8(a);var u=[];for(var p in Wt(a))jt.call(a,p)&&p!="constructor"&&u.push(p);return u}function BN(a){if(!on(a))return ID(a);var u=Mh(a),p=[];for(var b in a)b=="constructor"&&(u||!jt.call(a,b))||p.push(b);return p}function ty(a,u){return a<u}function j2(a,u){var p=-1,b=Mr(a)?ie(a.length):[];return Mo(a,function(x,F,H){b[++p]=u(x,F,H)}),b}function q2(a){var u=my(a);return u.length==1&&u[0][2]?II(u[0][0],u[0][1]):function(p){return p===a||X1(p,a,u)}}function H2(a,u){return wy(a)&&EI(u)?II(us(a),u):function(p){var b=Cy(p,a);return b===t&&b===u?xy(p,a):kh(u,b,I|T)}}function xp(a,u,p,b,x){a!==u&&Q1(u,function(F,H){if(x||(x=new ji),on(F))jN(a,u,H,p,xp,b,x);else{var z=b?b(vy(a,H),F,H+"",a,u,x):t;z===t&&(z=F),G1(a,H,z)}},Lr)}function jN(a,u,p,b,x,F,H){var z=vy(a,p),X=vy(u,p),ue=H.get(X);if(ue){G1(a,p,ue);return}var he=F?F(z,X,p+"",a,u,H):t,fe=he===t;if(fe){var Ee=Je(X),xe=!Ee&&Vo(X),$e=!Ee&&!xe&&bl(X);he=X,Ee||xe||$e?Je(z)?he=z:En(z)?he=Dr(z):xe?(fe=!1,he=nI(X,!0)):$e?(fe=!1,he=rI(X,!0)):he=[]:Uh(X)||Za(X)?(he=z,Za(z)?he=XI(z):(!on(z)||Xs(z))&&(he=bI(X))):fe=!1}fe&&(H.set(X,he),x(he,X,b,F,H),H.delete(X)),G1(a,p,he)}function W2(a,u){var p=a.length;if(p)return u+=u<0?p:0,Zs(u,p)?a[u]:t}function z2(a,u,p){u.length?u=Ht(u,function(F){return Je(F)?function(H){return Qa(H,F.length===1?F[0]:F)}:F}):u=[Ur];var b=-1;u=Ht(u,$t(Ue()));var x=j2(a,function(F,H,z){var X=Ht(u,function(ue){return ue(F)});return{criteria:X,index:++b,value:F}});return oe(x,function(F,H){return tD(F,H,p)})}function qN(a,u){return G2(a,u,function(p,b){return xy(a,b)})}function G2(a,u,p){for(var b=-1,x=u.length,F={};++b<x;){var H=u[b],z=Qa(a,H);p(z,H)&&Nh(F,Uo(H,a),z)}return F}function HN(a){return function(u){return Qa(u,a)}}function ny(a,u,p,b){var x=b?ko:zs,F=-1,H=u.length,z=a;for(a===u&&(u=Dr(u)),p&&(z=Ht(a,$t(p)));++F<H;)for(var X=0,ue=u[F],he=p?p(ue):ue;(X=x(z,he,X,b))>-1;)z!==a&&_p.call(z,X,1),_p.call(a,X,1);return a}function K2(a,u){for(var p=a?u.length:0,b=p-1;p--;){var x=u[p];if(p==b||x!==F){var F=x;Zs(x)?_p.call(a,x,1):oy(a,x)}}return a}function ry(a,u){return a+Ep(C2()*(u-a+1))}function WN(a,u,p,b){for(var x=-1,F=$n(bp((u-a)/(p||1)),0),H=ie(F);F--;)H[b?F:++x]=a,a+=p;return H}function iy(a,u){var p="";if(!a||u<1||u>K)return p;do u%2&&(p+=a),u=Ep(u/2),u&&(a+=a);while(u);return p}function ht(a,u){return by(AI(a,u,Ur),a+"")}function zN(a){return O2(El(a))}function GN(a,u){var p=El(a);return Vp(p,Ka(u,0,p.length))}function Nh(a,u,p,b){if(!on(a))return a;u=Uo(u,a);for(var x=-1,F=u.length,H=F-1,z=a;z!=null&&++x<F;){var X=us(u[x]),ue=p;if(X==="__proto__"||X==="constructor"||X==="prototype")return a;if(x!=H){var he=z[X];ue=b?b(he,X,z):t,ue===t&&(ue=on(he)?he:Zs(u[x+1])?[]:{})}xh(z,X,ue),z=z[X]}return a}var Q2=Ip?function(a,u){return Ip.set(a,u),a}:Ur,KN=vp?function(a,u){return vp(a,"toString",{configurable:!0,enumerable:!1,value:Oy(u),writable:!0})}:Ur;function QN(a){return Vp(El(a))}function Si(a,u,p){var b=-1,x=a.length;u<0&&(u=-u>x?0:x+u),p=p>x?x:p,p<0&&(p+=x),x=u>p?0:p-u>>>0,u>>>=0;for(var F=ie(x);++b<x;)F[b]=a[b+u];return F}function JN(a,u){var p;return Mo(a,function(b,x,F){return p=u(b,x,F),!p}),!!p}function Pp(a,u,p){var b=0,x=a==null?b:a.length;if(typeof u=="number"&&u===u&&x<=ae){for(;b<x;){var F=b+x>>>1,H=a[F];H!==null&&!Xr(H)&&(p?H<=u:H<u)?b=F+1:x=F}return x}return sy(a,u,Ur,p)}function sy(a,u,p,b){var x=0,F=a==null?0:a.length;if(F===0)return 0;u=p(u);for(var H=u!==u,z=u===null,X=Xr(u),ue=u===t;x<F;){var he=Ep((x+F)/2),fe=p(a[he]),Ee=fe!==t,xe=fe===null,$e=fe===fe,it=Xr(fe);if(H)var Ve=b||$e;else ue?Ve=$e&&(b||Ee):z?Ve=$e&&Ee&&(b||!xe):X?Ve=$e&&Ee&&!xe&&(b||!it):xe||it?Ve=!1:Ve=b?fe<=u:fe<u;Ve?x=he+1:F=he}return ar(F,pe)}function J2(a,u){for(var p=-1,b=a.length,x=0,F=[];++p<b;){var H=a[p],z=u?u(H):H;if(!p||!qi(z,X)){var X=z;F[x++]=H===0?0:H}}return F}function Y2(a){return typeof a=="number"?a:Xr(a)?ne:+a}function Zr(a){if(typeof a=="string")return a;if(Je(a))return Ht(a,Zr)+"";if(Xr(a))return x2?x2.call(a):"";var u=a+"";return u=="0"&&1/a==-G?"-0":u}function Lo(a,u,p){var b=-1,x=ja,F=a.length,H=!0,z=[],X=z;if(p)H=!1,x=Oo;else if(F>=i){var ue=u?null:aD(a);if(ue)return hp(ue);H=!1,x=bi,X=new Ga}else X=u?[]:z;e:for(;++b<F;){var he=a[b],fe=u?u(he):he;if(he=p||he!==0?he:0,H&&fe===fe){for(var Ee=X.length;Ee--;)if(X[Ee]===fe)continue e;u&&X.push(fe),z.push(he)}else x(X,fe,p)||(X!==z&&X.push(fe),z.push(he))}return z}function oy(a,u){return u=Uo(u,a),a=SI(a,u),a==null||delete a[us(Ti(u))]}function Z2(a,u,p,b){return Nh(a,u,p(Qa(a,u)),b)}function Op(a,u,p,b){for(var x=a.length,F=b?x:-1;(b?F--:++F<x)&&u(a[F],F,a););return p?Si(a,b?0:F,b?F+1:x):Si(a,b?F+1:0,b?x:F)}function X2(a,u){var p=a;return p instanceof gt&&(p=p.value()),Fi(u,function(b,x){return x.func.apply(x.thisArg,Vi([b],x.args))},p)}function ay(a,u,p){var b=a.length;if(b<2)return b?Lo(a[0]):[];for(var x=-1,F=ie(b);++x<b;)for(var H=a[x],z=-1;++z<b;)z!=x&&(F[x]=Ph(F[x]||H,a[z],u,p));return Lo(Jn(F,1),u,p)}function eI(a,u,p){for(var b=-1,x=a.length,F=u.length,H={};++b<x;){var z=b<F?u[b]:t;p(H,a[b],z)}return H}function cy(a){return En(a)?a:[]}function ly(a){return typeof a=="function"?a:Ur}function Uo(a,u){return Je(a)?a:wy(a,u)?[a]:xI(Vt(a))}var YN=ht;function $o(a,u,p){var b=a.length;return p=p===t?b:p,!u&&p>=b?a:Si(a,u,p)}var tI=$8||function(a){return pn.clearTimeout(a)};function nI(a,u){if(u)return a.slice();var p=a.length,b=I2?I2(p):new a.constructor(p);return a.copy(b),b}function uy(a){var u=new a.constructor(a.byteLength);return new yp(u).set(new yp(a)),u}function ZN(a,u){var p=u?uy(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.byteLength)}function XN(a){var u=new a.constructor(a.source,Da.exec(a));return u.lastIndex=a.lastIndex,u}function eD(a){return Ch?Wt(Ch.call(a)):{}}function rI(a,u){var p=u?uy(a.buffer):a.buffer;return new a.constructor(p,a.byteOffset,a.length)}function iI(a,u){if(a!==u){var p=a!==t,b=a===null,x=a===a,F=Xr(a),H=u!==t,z=u===null,X=u===u,ue=Xr(u);if(!z&&!ue&&!F&&a>u||F&&H&&X&&!z&&!ue||b&&H&&X||!p&&X||!x)return 1;if(!b&&!F&&!ue&&a<u||ue&&p&&x&&!b&&!F||z&&p&&x||!H&&x||!X)return-1}return 0}function tD(a,u,p){for(var b=-1,x=a.criteria,F=u.criteria,H=x.length,z=p.length;++b<H;){var X=iI(x[b],F[b]);if(X){if(b>=z)return X;var ue=p[b];return X*(ue=="desc"?-1:1)}}return a.index-u.index}function sI(a,u,p,b){for(var x=-1,F=a.length,H=p.length,z=-1,X=u.length,ue=$n(F-H,0),he=ie(X+ue),fe=!b;++z<X;)he[z]=u[z];for(;++x<H;)(fe||x<F)&&(he[p[x]]=a[x]);for(;ue--;)he[z++]=a[x++];return he}function oI(a,u,p,b){for(var x=-1,F=a.length,H=-1,z=p.length,X=-1,ue=u.length,he=$n(F-z,0),fe=ie(he+ue),Ee=!b;++x<he;)fe[x]=a[x];for(var xe=x;++X<ue;)fe[xe+X]=u[X];for(;++H<z;)(Ee||x<F)&&(fe[xe+p[H]]=a[x++]);return fe}function Dr(a,u){var p=-1,b=a.length;for(u||(u=ie(b));++p<b;)u[p]=a[p];return u}function ls(a,u,p,b){var x=!p;p||(p={});for(var F=-1,H=u.length;++F<H;){var z=u[F],X=b?b(p[z],a[z],z,p,a):t;X===t&&(X=a[z]),x?Qs(p,z,X):xh(p,z,X)}return p}function nD(a,u){return ls(a,yy(a),u)}function rD(a,u){return ls(a,_I(a),u)}function kp(a,u){return function(p,b){var x=Je(p)?Ba:SN,F=u?u():{};return x(p,a,Ue(b,2),F)}}function wl(a){return ht(function(u,p){var b=-1,x=p.length,F=x>1?p[x-1]:t,H=x>2?p[2]:t;for(F=a.length>3&&typeof F=="function"?(x--,F):t,H&&_r(p[0],p[1],H)&&(F=x<3?t:F,x=1),u=Wt(u);++b<x;){var z=p[b];z&&a(u,z,b,F)}return u})}function aI(a,u){return function(p,b){if(p==null)return p;if(!Mr(p))return a(p,b);for(var x=p.length,F=u?x:-1,H=Wt(p);(u?F--:++F<x)&&b(H[F],F,H)!==!1;);return p}}function cI(a){return function(u,p,b){for(var x=-1,F=Wt(u),H=b(u),z=H.length;z--;){var X=H[a?z:++x];if(p(F[X],X,F)===!1)break}return u}}function iD(a,u,p){var b=u&A,x=Dh(a);function F(){var H=this&&this!==pn&&this instanceof F?x:a;return H.apply(b?p:this,arguments)}return F}function lI(a){return function(u){u=Vt(u);var p=hl(u)?Bi(u):t,b=p?p[0]:u.charAt(0),x=p?$o(p,1).join(""):u.slice(1);return b[a]()+x}}function _l(a){return function(u){return Fi(aA(oA(u).replace(L1,"")),a,"")}}function Dh(a){return function(){var u=arguments;switch(u.length){case 0:return new a;case 1:return new a(u[0]);case 2:return new a(u[0],u[1]);case 3:return new a(u[0],u[1],u[2]);case 4:return new a(u[0],u[1],u[2],u[3]);case 5:return new a(u[0],u[1],u[2],u[3],u[4]);case 6:return new a(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new a(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var p=yl(a.prototype),b=a.apply(p,u);return on(b)?b:p}}function sD(a,u,p){var b=Dh(a);function x(){for(var F=arguments.length,H=ie(F),z=F,X=vl(x);z--;)H[z]=arguments[z];var ue=F<3&&H[0]!==X&&H[F-1]!==X?[]:No(H,X);if(F-=ue.length,F<p)return pI(a,u,Np,x.placeholder,t,H,ue,t,t,p-F);var he=this&&this!==pn&&this instanceof x?b:a;return sr(he,this,H)}return x}function uI(a){return function(u,p,b){var x=Wt(u);if(!Mr(u)){var F=Ue(p,3);u=qn(u),p=function(z){return F(x[z],z,x)}}var H=a(u,p,b);return H>-1?x[F?u[H]:H]:t}}function hI(a){return Ys(function(u){var p=u.length,b=p,x=Ii.prototype.thru;for(a&&u.reverse();b--;){var F=u[b];if(typeof F!="function")throw new Ei(o);if(x&&!H&&Up(F)=="wrapper")var H=new Ii([],!0)}for(b=H?b:p;++b<p;){F=u[b];var z=Up(F),X=z=="wrapper"?gy(F):t;X&&_y(X[0])&&X[1]==(g|C|P|_)&&!X[4].length&&X[9]==1?H=H[Up(X[0])].apply(H,X[3]):H=F.length==1&&_y(F)?H[z]():H.thru(F)}return function(){var ue=arguments,he=ue[0];if(H&&ue.length==1&&Je(he))return H.plant(he).value();for(var fe=0,Ee=p?u[fe].apply(this,ue):he;++fe<p;)Ee=u[fe].call(this,Ee);return Ee}})}function Np(a,u,p,b,x,F,H,z,X,ue){var he=u&g,fe=u&A,Ee=u&L,xe=u&(C|k),$e=u&R,it=Ee?t:Dh(a);function Ve(){for(var ft=arguments.length,vt=ie(ft),ei=ft;ei--;)vt[ei]=arguments[ei];if(xe)var vr=vl(Ve),ti=Ih(vt,vr);if(b&&(vt=sI(vt,b,x,xe)),F&&(vt=oI(vt,F,H,xe)),ft-=ti,xe&&ft<ue){var In=No(vt,vr);return pI(a,u,Np,Ve.placeholder,p,vt,In,z,X,ue-ft)}var Hi=fe?p:this,to=Ee?Hi[a]:a;return ft=vt.length,z?vt=SD(vt,z):$e&&ft>1&&vt.reverse(),he&&X<ft&&(vt.length=X),this&&this!==pn&&this instanceof Ve&&(to=it||Dh(to)),to.apply(Hi,vt)}return Ve}function dI(a,u){return function(p,b){return NN(p,a,u(b),{})}}function Dp(a,u){return function(p,b){var x;if(p===t&&b===t)return u;if(p!==t&&(x=p),b!==t){if(x===t)return b;typeof p=="string"||typeof b=="string"?(p=Zr(p),b=Zr(b)):(p=Y2(p),b=Y2(b)),x=a(p,b)}return x}}function hy(a){return Ys(function(u){return u=Ht(u,$t(Ue())),ht(function(p){var b=this;return a(u,function(x){return sr(x,b,p)})})})}function Mp(a,u){u=u===t?" ":Zr(u);var p=u.length;if(p<2)return p?iy(u,a):u;var b=iy(u,bp(a/dl(u)));return hl(u)?$o(Bi(b),0,a).join(""):b.slice(0,a)}function oD(a,u,p,b){var x=u&A,F=Dh(a);function H(){for(var z=-1,X=arguments.length,ue=-1,he=b.length,fe=ie(he+X),Ee=this&&this!==pn&&this instanceof H?F:a;++ue<he;)fe[ue]=b[ue];for(;X--;)fe[ue++]=arguments[++z];return sr(Ee,x?p:this,fe)}return H}function fI(a){return function(u,p,b){return b&&typeof b!="number"&&_r(u,p,b)&&(p=b=t),u=eo(u),p===t?(p=u,u=0):p=eo(p),b=b===t?u<p?1:-1:eo(b),WN(u,p,b,a)}}function Lp(a){return function(u,p){return typeof u=="string"&&typeof p=="string"||(u=Ri(u),p=Ri(p)),a(u,p)}}function pI(a,u,p,b,x,F,H,z,X,ue){var he=u&C,fe=he?H:t,Ee=he?t:H,xe=he?F:t,$e=he?t:F;u|=he?P:O,u&=~(he?O:P),u&D||(u&=~(A|L));var it=[a,u,x,xe,fe,$e,Ee,z,X,ue],Ve=p.apply(t,it);return _y(a)&&TI(Ve,it),Ve.placeholder=b,RI(Ve,a,u)}function dy(a){var u=Un[a];return function(p,b){if(p=Ri(p),b=b==null?0:ar(rt(b),292),b&&R2(p)){var x=(Vt(p)+"e").split("e"),F=u(x[0]+"e"+(+x[1]+b));return x=(Vt(F)+"e").split("e"),+(x[0]+"e"+(+x[1]-b))}return u(p)}}var aD=gl&&1/hp(new gl([,-0]))[1]==G?function(a){return new gl(a)}:Dy;function gI(a){return function(u){var p=cr(u);return p==Me?j1(u):p==Fe?A8(u):Ln(u,a(u))}}function Js(a,u,p,b,x,F,H,z){var X=u&L;if(!X&&typeof a!="function")throw new Ei(o);var ue=b?b.length:0;if(ue||(u&=~(P|O),b=x=t),H=H===t?H:$n(rt(H),0),z=z===t?z:rt(z),ue-=x?x.length:0,u&O){var he=b,fe=x;b=x=t}var Ee=X?t:gy(a),xe=[a,u,p,b,x,he,fe,F,H,z];if(Ee&&ED(xe,Ee),a=xe[0],u=xe[1],p=xe[2],b=xe[3],x=xe[4],z=xe[9]=xe[9]===t?X?0:a.length:$n(xe[9]-ue,0),!z&&u&(C|k)&&(u&=~(C|k)),!u||u==A)var $e=iD(a,u,p);else u==C||u==k?$e=sD(a,u,z):(u==P||u==(A|P))&&!x.length?$e=oD(a,u,p,b):$e=Np.apply(t,xe);var it=Ee?Q2:TI;return RI(it($e,xe),a,u)}function mI(a,u,p,b){return a===t||qi(a,pl[p])&&!jt.call(b,p)?u:a}function yI(a,u,p,b,x,F){return on(a)&&on(u)&&(F.set(u,a),xp(a,u,t,yI,F),F.delete(u)),a}function cD(a){return Uh(a)?t:a}function wI(a,u,p,b,x,F){var H=p&I,z=a.length,X=u.length;if(z!=X&&!(H&&X>z))return!1;var ue=F.get(a),he=F.get(u);if(ue&&he)return ue==u&&he==a;var fe=-1,Ee=!0,xe=p&T?new Ga:t;for(F.set(a,u),F.set(u,a);++fe<z;){var $e=a[fe],it=u[fe];if(b)var Ve=H?b(it,$e,fe,u,a,F):b($e,it,fe,a,u,F);if(Ve!==t){if(Ve)continue;Ee=!1;break}if(xe){if(!ll(u,function(ft,vt){if(!bi(xe,vt)&&($e===ft||x($e,ft,p,b,F)))return xe.push(vt)})){Ee=!1;break}}else if(!($e===it||x($e,it,p,b,F))){Ee=!1;break}}return F.delete(a),F.delete(u),Ee}function lD(a,u,p,b,x,F,H){switch(p){case qe:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case Ce:return!(a.byteLength!=u.byteLength||!F(new yp(a),new yp(u)));case re:case Y:case We:return qi(+a,+u);case W:return a.name==u.name&&a.message==u.message;case Ye:case Ze:return a==u+"";case Me:var z=j1;case Fe:var X=b&I;if(z||(z=hp),a.size!=u.size&&!X)return!1;var ue=H.get(a);if(ue)return ue==u;b|=T,H.set(a,u);var he=wI(z(a),z(u),b,x,F,H);return H.delete(a),he;case ze:if(Ch)return Ch.call(a)==Ch.call(u)}return!1}function uD(a,u,p,b,x,F){var H=p&I,z=fy(a),X=z.length,ue=fy(u),he=ue.length;if(X!=he&&!H)return!1;for(var fe=X;fe--;){var Ee=z[fe];if(!(H?Ee in u:jt.call(u,Ee)))return!1}var xe=F.get(a),$e=F.get(u);if(xe&&$e)return xe==u&&$e==a;var it=!0;F.set(a,u),F.set(u,a);for(var Ve=H;++fe<X;){Ee=z[fe];var ft=a[Ee],vt=u[Ee];if(b)var ei=H?b(vt,ft,Ee,u,a,F):b(ft,vt,Ee,a,u,F);if(!(ei===t?ft===vt||x(ft,vt,p,b,F):ei)){it=!1;break}Ve||(Ve=Ee=="constructor")}if(it&&!Ve){var vr=a.constructor,ti=u.constructor;vr!=ti&&"constructor"in a&&"constructor"in u&&!(typeof vr=="function"&&vr instanceof vr&&typeof ti=="function"&&ti instanceof ti)&&(it=!1)}return F.delete(a),F.delete(u),it}function Ys(a){return by(AI(a,t,NI),a+"")}function fy(a){return $2(a,qn,yy)}function py(a){return $2(a,Lr,_I)}var gy=Ip?function(a){return Ip.get(a)}:Dy;function Up(a){for(var u=a.name+"",p=ml[u],b=jt.call(ml,u)?p.length:0;b--;){var x=p[b],F=x.func;if(F==null||F==a)return x.name}return u}function vl(a){var u=jt.call(U,"placeholder")?U:a;return u.placeholder}function Ue(){var a=U.iteratee||ky;return a=a===ky?B2:a,arguments.length?a(arguments[0],arguments[1]):a}function $p(a,u){var p=a.__data__;return wD(u)?p[typeof u=="string"?"string":"hash"]:p.map}function my(a){for(var u=qn(a),p=u.length;p--;){var b=u[p],x=a[b];u[p]=[b,x,EI(x)]}return u}function Ja(a,u){var p=b8(a,u);return F2(p)?p:t}function hD(a){var u=jt.call(a,Wa),p=a[Wa];try{a[Wa]=t;var b=!0}catch{}var x=gp.call(a);return b&&(u?a[Wa]=p:delete a[Wa]),x}var yy=H1?function(a){return a==null?[]:(a=Wt(a),vi(H1(a),function(u){return S2.call(a,u)}))}:My,_I=H1?function(a){for(var u=[];a;)Vi(u,yy(a)),a=wp(a);return u}:My,cr=wr;(W1&&cr(new W1(new ArrayBuffer(1)))!=qe||Sh&&cr(new Sh)!=Me||z1&&cr(z1.resolve())!=Zt||gl&&cr(new gl)!=Fe||Th&&cr(new Th)!=je)&&(cr=function(a){var u=wr(a),p=u==nt?a.constructor:t,b=p?Ya(p):"";if(b)switch(b){case G8:return qe;case K8:return Me;case Q8:return Zt;case J8:return Fe;case Y8:return je}return u});function dD(a,u,p){for(var b=-1,x=p.length;++b<x;){var F=p[b],H=F.size;switch(F.type){case"drop":a+=H;break;case"dropRight":u-=H;break;case"take":u=ar(u,a+H);break;case"takeRight":a=$n(a,u-H);break}}return{start:a,end:u}}function fD(a){var u=a.match(Yt);return u?u[1].split(xn):[]}function vI(a,u,p){u=Uo(u,a);for(var b=-1,x=u.length,F=!1;++b<x;){var H=us(u[b]);if(!(F=a!=null&&p(a,H)))break;a=a[H]}return F||++b!=x?F:(x=a==null?0:a.length,!!x&&Wp(x)&&Zs(H,x)&&(Je(a)||Za(a)))}function pD(a){var u=a.length,p=new a.constructor(u);return u&&typeof a[0]=="string"&&jt.call(a,"index")&&(p.index=a.index,p.input=a.input),p}function bI(a){return typeof a.constructor=="function"&&!Mh(a)?yl(wp(a)):{}}function gD(a,u,p){var b=a.constructor;switch(u){case Ce:return uy(a);case re:case Y:return new b(+a);case qe:return ZN(a,p);case lt:case dt:case pt:case ut:case wt:case It:case At:case kr:case Yr:return rI(a,p);case Me:return new b;case We:case Ze:return new b(a);case Ye:return XN(a);case Fe:return new b;case ze:return eD(a)}}function mD(a,u){var p=u.length;if(!p)return a;var b=p-1;return u[b]=(p>1?"& ":"")+u[b],u=u.join(p>2?", ":" "),a.replace(Cn,`{
/* [wrapped with `+u+`] */
`)}function yD(a){return Je(a)||Za(a)||!!(T2&&a&&a[T2])}function Zs(a,u){var p=typeof a;return u=u??K,!!u&&(p=="number"||p!="symbol"&&ch.test(a))&&a>-1&&a%1==0&&a<u}function _r(a,u,p){if(!on(p))return!1;var b=typeof u;return(b=="number"?Mr(p)&&Zs(u,p.length):b=="string"&&u in p)?qi(p[u],a):!1}function wy(a,u){if(Je(a))return!1;var p=typeof a;return p=="number"||p=="symbol"||p=="boolean"||a==null||Xr(a)?!0:bn.test(a)||!Xt.test(a)||u!=null&&a in Wt(u)}function wD(a){var u=typeof a;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?a!=="__proto__":a===null}function _y(a){var u=Up(a),p=U[u];if(typeof p!="function"||!(u in gt.prototype))return!1;if(a===p)return!0;var b=gy(p);return!!b&&a===b[0]}function _D(a){return!!E2&&E2 in a}var vD=fp?Xs:Ly;function Mh(a){var u=a&&a.constructor,p=typeof u=="function"&&u.prototype||pl;return a===p}function EI(a){return a===a&&!on(a)}function II(a,u){return function(p){return p==null?!1:p[a]===u&&(u!==t||a in Wt(p))}}function bD(a){var u=qp(a,function(b){return p.size===h&&p.clear(),b}),p=u.cache;return u}function ED(a,u){var p=a[1],b=u[1],x=p|b,F=x<(A|L|g),H=b==g&&p==C||b==g&&p==_&&a[7].length<=u[8]||b==(g|_)&&u[7].length<=u[8]&&p==C;if(!(F||H))return a;b&A&&(a[2]=u[2],x|=p&A?0:D);var z=u[3];if(z){var X=a[3];a[3]=X?sI(X,z,u[4]):z,a[4]=X?No(a[3],f):u[4]}return z=u[5],z&&(X=a[5],a[5]=X?oI(X,z,u[6]):z,a[6]=X?No(a[5],f):u[6]),z=u[7],z&&(a[7]=z),b&g&&(a[8]=a[8]==null?u[8]:ar(a[8],u[8])),a[9]==null&&(a[9]=u[9]),a[0]=u[0],a[1]=x,a}function ID(a){var u=[];if(a!=null)for(var p in Wt(a))u.push(p);return u}function AD(a){return gp.call(a)}function AI(a,u,p){return u=$n(u===t?a.length-1:u,0),function(){for(var b=arguments,x=-1,F=$n(b.length-u,0),H=ie(F);++x<F;)H[x]=b[u+x];x=-1;for(var z=ie(u+1);++x<u;)z[x]=b[x];return z[u]=p(H),sr(a,this,z)}}function SI(a,u){return u.length<2?a:Qa(a,Si(u,0,-1))}function SD(a,u){for(var p=a.length,b=ar(u.length,p),x=Dr(a);b--;){var F=u[b];a[b]=Zs(F,p)?x[F]:t}return a}function vy(a,u){if(!(u==="constructor"&&typeof a[u]=="function")&&u!="__proto__")return a[u]}var TI=CI(Q2),Lh=F8||function(a,u){return pn.setTimeout(a,u)},by=CI(KN);function RI(a,u,p){var b=u+"";return by(a,mD(b,TD(fD(b),p)))}function CI(a){var u=0,p=0;return function(){var b=H8(),x=$-(b-p);if(p=b,x>0){if(++u>=j)return arguments[0]}else u=0;return a.apply(t,arguments)}}function Vp(a,u){var p=-1,b=a.length,x=b-1;for(u=u===t?b:u;++p<u;){var F=ry(p,x),H=a[F];a[F]=a[p],a[p]=H}return a.length=u,a}var xI=bD(function(a){var u=[];return a.charCodeAt(0)===46&&u.push(""),a.replace(St,function(p,b,x,F){u.push(x?F.replace(Vf,"$1"):b||p)}),u});function us(a){if(typeof a=="string"||Xr(a))return a;var u=a+"";return u=="0"&&1/a==-G?"-0":u}function Ya(a){if(a!=null){try{return pp.call(a)}catch{}try{return a+""}catch{}}return""}function TD(a,u){return yr(Ae,function(p){var b="_."+p[0];u&p[1]&&!ja(a,b)&&a.push(b)}),a.sort()}function PI(a){if(a instanceof gt)return a.clone();var u=new Ii(a.__wrapped__,a.__chain__);return u.__actions__=Dr(a.__actions__),u.__index__=a.__index__,u.__values__=a.__values__,u}function RD(a,u,p){(p?_r(a,u,p):u===t)?u=1:u=$n(rt(u),0);var b=a==null?0:a.length;if(!b||u<1)return[];for(var x=0,F=0,H=ie(bp(b/u));x<b;)H[F++]=Si(a,x,x+=u);return H}function CD(a){for(var u=-1,p=a==null?0:a.length,b=0,x=[];++u<p;){var F=a[u];F&&(x[b++]=F)}return x}function xD(){var a=arguments.length;if(!a)return[];for(var u=ie(a-1),p=arguments[0],b=a;b--;)u[b-1]=arguments[b];return Vi(Je(p)?Dr(p):[p],Jn(u,1))}var PD=ht(function(a,u){return En(a)?Ph(a,Jn(u,1,En,!0)):[]}),OD=ht(function(a,u){var p=Ti(u);return En(p)&&(p=t),En(a)?Ph(a,Jn(u,1,En,!0),Ue(p,2)):[]}),kD=ht(function(a,u){var p=Ti(u);return En(p)&&(p=t),En(a)?Ph(a,Jn(u,1,En,!0),t,p):[]});function ND(a,u,p){var b=a==null?0:a.length;return b?(u=p||u===t?1:rt(u),Si(a,u<0?0:u,b)):[]}function DD(a,u,p){var b=a==null?0:a.length;return b?(u=p||u===t?1:rt(u),u=b-u,Si(a,0,u<0?0:u)):[]}function MD(a,u){return a&&a.length?Op(a,Ue(u,3),!0,!0):[]}function LD(a,u){return a&&a.length?Op(a,Ue(u,3),!0):[]}function UD(a,u,p,b){var x=a==null?0:a.length;return x?(p&&typeof p!="number"&&_r(a,u,p)&&(p=0,b=x),xN(a,u,p,b)):[]}function OI(a,u,p){var b=a==null?0:a.length;if(!b)return-1;var x=p==null?0:rt(p);return x<0&&(x=$n(b+x,0)),qa(a,Ue(u,3),x)}function kI(a,u,p){var b=a==null?0:a.length;if(!b)return-1;var x=b-1;return p!==t&&(x=rt(p),x=p<0?$n(b+x,0):ar(x,b-1)),qa(a,Ue(u,3),x,!0)}function NI(a){var u=a==null?0:a.length;return u?Jn(a,1):[]}function $D(a){var u=a==null?0:a.length;return u?Jn(a,G):[]}function VD(a,u){var p=a==null?0:a.length;return p?(u=u===t?1:rt(u),Jn(a,u)):[]}function FD(a){for(var u=-1,p=a==null?0:a.length,b={};++u<p;){var x=a[u];b[x[0]]=x[1]}return b}function DI(a){return a&&a.length?a[0]:t}function BD(a,u,p){var b=a==null?0:a.length;if(!b)return-1;var x=p==null?0:rt(p);return x<0&&(x=$n(b+x,0)),zs(a,u,x)}function jD(a){var u=a==null?0:a.length;return u?Si(a,0,-1):[]}var qD=ht(function(a){var u=Ht(a,cy);return u.length&&u[0]===a[0]?Z1(u):[]}),HD=ht(function(a){var u=Ti(a),p=Ht(a,cy);return u===Ti(p)?u=t:p.pop(),p.length&&p[0]===a[0]?Z1(p,Ue(u,2)):[]}),WD=ht(function(a){var u=Ti(a),p=Ht(a,cy);return u=typeof u=="function"?u:t,u&&p.pop(),p.length&&p[0]===a[0]?Z1(p,t,u):[]});function zD(a,u){return a==null?"":j8.call(a,u)}function Ti(a){var u=a==null?0:a.length;return u?a[u-1]:t}function GD(a,u,p){var b=a==null?0:a.length;if(!b)return-1;var x=b;return p!==t&&(x=rt(p),x=x<0?$n(b+x,0):ar(x,b-1)),u===u?T8(a,u,x):qa(a,d,x,!0)}function KD(a,u){return a&&a.length?W2(a,rt(u)):t}var QD=ht(MI);function MI(a,u){return a&&a.length&&u&&u.length?ny(a,u):a}function JD(a,u,p){return a&&a.length&&u&&u.length?ny(a,u,Ue(p,2)):a}function YD(a,u,p){return a&&a.length&&u&&u.length?ny(a,u,t,p):a}var ZD=Ys(function(a,u){var p=a==null?0:a.length,b=K1(a,u);return K2(a,Ht(u,function(x){return Zs(x,p)?+x:x}).sort(iI)),b});function XD(a,u){var p=[];if(!(a&&a.length))return p;var b=-1,x=[],F=a.length;for(u=Ue(u,3);++b<F;){var H=a[b];u(H,b,a)&&(p.push(H),x.push(b))}return K2(a,x),p}function Ey(a){return a==null?a:z8.call(a)}function eM(a,u,p){var b=a==null?0:a.length;return b?(p&&typeof p!="number"&&_r(a,u,p)?(u=0,p=b):(u=u==null?0:rt(u),p=p===t?b:rt(p)),Si(a,u,p)):[]}function tM(a,u){return Pp(a,u)}function nM(a,u,p){return sy(a,u,Ue(p,2))}function rM(a,u){var p=a==null?0:a.length;if(p){var b=Pp(a,u);if(b<p&&qi(a[b],u))return b}return-1}function iM(a,u){return Pp(a,u,!0)}function sM(a,u,p){return sy(a,u,Ue(p,2),!0)}function oM(a,u){var p=a==null?0:a.length;if(p){var b=Pp(a,u,!0)-1;if(qi(a[b],u))return b}return-1}function aM(a){return a&&a.length?J2(a):[]}function cM(a,u){return a&&a.length?J2(a,Ue(u,2)):[]}function lM(a){var u=a==null?0:a.length;return u?Si(a,1,u):[]}function uM(a,u,p){return a&&a.length?(u=p||u===t?1:rt(u),Si(a,0,u<0?0:u)):[]}function hM(a,u,p){var b=a==null?0:a.length;return b?(u=p||u===t?1:rt(u),u=b-u,Si(a,u<0?0:u,b)):[]}function dM(a,u){return a&&a.length?Op(a,Ue(u,3),!1,!0):[]}function fM(a,u){return a&&a.length?Op(a,Ue(u,3)):[]}var pM=ht(function(a){return Lo(Jn(a,1,En,!0))}),gM=ht(function(a){var u=Ti(a);return En(u)&&(u=t),Lo(Jn(a,1,En,!0),Ue(u,2))}),mM=ht(function(a){var u=Ti(a);return u=typeof u=="function"?u:t,Lo(Jn(a,1,En,!0),t,u)});function yM(a){return a&&a.length?Lo(a):[]}function wM(a,u){return a&&a.length?Lo(a,Ue(u,2)):[]}function _M(a,u){return u=typeof u=="function"?u:t,a&&a.length?Lo(a,t,u):[]}function Iy(a){if(!(a&&a.length))return[];var u=0;return a=vi(a,function(p){if(En(p))return u=$n(p.length,u),!0}),Mt(u,function(p){return Ht(a,S(p))})}function LI(a,u){if(!(a&&a.length))return[];var p=Iy(a);return u==null?p:Ht(p,function(b){return sr(u,t,b)})}var vM=ht(function(a,u){return En(a)?Ph(a,u):[]}),bM=ht(function(a){return ay(vi(a,En))}),EM=ht(function(a){var u=Ti(a);return En(u)&&(u=t),ay(vi(a,En),Ue(u,2))}),IM=ht(function(a){var u=Ti(a);return u=typeof u=="function"?u:t,ay(vi(a,En),t,u)}),AM=ht(Iy);function SM(a,u){return eI(a||[],u||[],xh)}function TM(a,u){return eI(a||[],u||[],Nh)}var RM=ht(function(a){var u=a.length,p=u>1?a[u-1]:t;return p=typeof p=="function"?(a.pop(),p):t,LI(a,p)});function UI(a){var u=U(a);return u.__chain__=!0,u}function CM(a,u){return u(a),a}function Fp(a,u){return u(a)}var xM=Ys(function(a){var u=a.length,p=u?a[0]:0,b=this.__wrapped__,x=function(F){return K1(F,a)};return u>1||this.__actions__.length||!(b instanceof gt)||!Zs(p)?this.thru(x):(b=b.slice(p,+p+(u?1:0)),b.__actions__.push({func:Fp,args:[x],thisArg:t}),new Ii(b,this.__chain__).thru(function(F){return u&&!F.length&&F.push(t),F}))});function PM(){return UI(this)}function OM(){return new Ii(this.value(),this.__chain__)}function kM(){this.__values__===t&&(this.__values__=YI(this.value()));var a=this.__index__>=this.__values__.length,u=a?t:this.__values__[this.__index__++];return{done:a,value:u}}function NM(){return this}function DM(a){for(var u,p=this;p instanceof Sp;){var b=PI(p);b.__index__=0,b.__values__=t,u?x.__wrapped__=b:u=b;var x=b;p=p.__wrapped__}return x.__wrapped__=a,u}function MM(){var a=this.__wrapped__;if(a instanceof gt){var u=a;return this.__actions__.length&&(u=new gt(this)),u=u.reverse(),u.__actions__.push({func:Fp,args:[Ey],thisArg:t}),new Ii(u,this.__chain__)}return this.thru(Ey)}function LM(){return X2(this.__wrapped__,this.__actions__)}var UM=kp(function(a,u,p){jt.call(a,p)?++a[p]:Qs(a,p,1)});function $M(a,u,p){var b=Je(a)?cl:CN;return p&&_r(a,u,p)&&(u=t),b(a,Ue(u,3))}function VM(a,u){var p=Je(a)?vi:L2;return p(a,Ue(u,3))}var FM=uI(OI),BM=uI(kI);function jM(a,u){return Jn(Bp(a,u),1)}function qM(a,u){return Jn(Bp(a,u),G)}function HM(a,u,p){return p=p===t?1:rt(p),Jn(Bp(a,u),p)}function $I(a,u){var p=Je(a)?yr:Mo;return p(a,Ue(u,3))}function VI(a,u){var p=Je(a)?ap:M2;return p(a,Ue(u,3))}var WM=kp(function(a,u,p){jt.call(a,p)?a[p].push(u):Qs(a,p,[u])});function zM(a,u,p,b){a=Mr(a)?a:El(a),p=p&&!b?rt(p):0;var x=a.length;return p<0&&(p=$n(x+p,0)),zp(a)?p<=x&&a.indexOf(u,p)>-1:!!x&&zs(a,u,p)>-1}var GM=ht(function(a,u,p){var b=-1,x=typeof u=="function",F=Mr(a)?ie(a.length):[];return Mo(a,function(H){F[++b]=x?sr(u,H,p):Oh(H,u,p)}),F}),KM=kp(function(a,u,p){Qs(a,p,u)});function Bp(a,u){var p=Je(a)?Ht:j2;return p(a,Ue(u,3))}function QM(a,u,p,b){return a==null?[]:(Je(u)||(u=u==null?[]:[u]),p=b?t:p,Je(p)||(p=p==null?[]:[p]),z2(a,u,p))}var JM=kp(function(a,u,p){a[p?0:1].push(u)},function(){return[[],[]]});function YM(a,u,p){var b=Je(a)?Fi:te,x=arguments.length<3;return b(a,Ue(u,4),p,x,Mo)}function ZM(a,u,p){var b=Je(a)?cp:te,x=arguments.length<3;return b(a,Ue(u,4),p,x,M2)}function XM(a,u){var p=Je(a)?vi:L2;return p(a,Hp(Ue(u,3)))}function e7(a){var u=Je(a)?O2:zN;return u(a)}function t7(a,u,p){(p?_r(a,u,p):u===t)?u=1:u=rt(u);var b=Je(a)?IN:GN;return b(a,u)}function n7(a){var u=Je(a)?AN:QN;return u(a)}function r7(a){if(a==null)return 0;if(Mr(a))return zp(a)?dl(a):a.length;var u=cr(a);return u==Me||u==Fe?a.size:ey(a).length}function i7(a,u,p){var b=Je(a)?ll:JN;return p&&_r(a,u,p)&&(u=t),b(a,Ue(u,3))}var s7=ht(function(a,u){if(a==null)return[];var p=u.length;return p>1&&_r(a,u[0],u[1])?u=[]:p>2&&_r(u[0],u[1],u[2])&&(u=[u[0]]),z2(a,Jn(u,1),[])}),jp=V8||function(){return pn.Date.now()};function o7(a,u){if(typeof u!="function")throw new Ei(o);return a=rt(a),function(){if(--a<1)return u.apply(this,arguments)}}function FI(a,u,p){return u=p?t:u,u=a&&u==null?a.length:u,Js(a,g,t,t,t,t,u)}function BI(a,u){var p;if(typeof u!="function")throw new Ei(o);return a=rt(a),function(){return--a>0&&(p=u.apply(this,arguments)),a<=1&&(u=t),p}}var Ay=ht(function(a,u,p){var b=A;if(p.length){var x=No(p,vl(Ay));b|=P}return Js(a,b,u,p,x)}),jI=ht(function(a,u,p){var b=A|L;if(p.length){var x=No(p,vl(jI));b|=P}return Js(u,b,a,p,x)});function qI(a,u,p){u=p?t:u;var b=Js(a,C,t,t,t,t,t,u);return b.placeholder=qI.placeholder,b}function HI(a,u,p){u=p?t:u;var b=Js(a,k,t,t,t,t,t,u);return b.placeholder=HI.placeholder,b}function WI(a,u,p){var b,x,F,H,z,X,ue=0,he=!1,fe=!1,Ee=!0;if(typeof a!="function")throw new Ei(o);u=Ri(u)||0,on(p)&&(he=!!p.leading,fe="maxWait"in p,F=fe?$n(Ri(p.maxWait)||0,u):F,Ee="trailing"in p?!!p.trailing:Ee);function xe(In){var Hi=b,to=x;return b=x=t,ue=In,H=a.apply(to,Hi),H}function $e(In){return ue=In,z=Lh(ft,u),he?xe(In):H}function it(In){var Hi=In-X,to=In-ue,uA=u-Hi;return fe?ar(uA,F-to):uA}function Ve(In){var Hi=In-X,to=In-ue;return X===t||Hi>=u||Hi<0||fe&&to>=F}function ft(){var In=jp();if(Ve(In))return vt(In);z=Lh(ft,it(In))}function vt(In){return z=t,Ee&&b?xe(In):(b=x=t,H)}function ei(){z!==t&&tI(z),ue=0,b=X=x=z=t}function vr(){return z===t?H:vt(jp())}function ti(){var In=jp(),Hi=Ve(In);if(b=arguments,x=this,X=In,Hi){if(z===t)return $e(X);if(fe)return tI(z),z=Lh(ft,u),xe(X)}return z===t&&(z=Lh(ft,u)),H}return ti.cancel=ei,ti.flush=vr,ti}var a7=ht(function(a,u){return D2(a,1,u)}),c7=ht(function(a,u,p){return D2(a,Ri(u)||0,p)});function l7(a){return Js(a,R)}function qp(a,u){if(typeof a!="function"||u!=null&&typeof u!="function")throw new Ei(o);var p=function(){var b=arguments,x=u?u.apply(this,b):b[0],F=p.cache;if(F.has(x))return F.get(x);var H=a.apply(this,b);return p.cache=F.set(x,H)||F,H};return p.cache=new(qp.Cache||Ks),p}qp.Cache=Ks;function Hp(a){if(typeof a!="function")throw new Ei(o);return function(){var u=arguments;switch(u.length){case 0:return!a.call(this);case 1:return!a.call(this,u[0]);case 2:return!a.call(this,u[0],u[1]);case 3:return!a.call(this,u[0],u[1],u[2])}return!a.apply(this,u)}}function u7(a){return BI(2,a)}var h7=YN(function(a,u){u=u.length==1&&Je(u[0])?Ht(u[0],$t(Ue())):Ht(Jn(u,1),$t(Ue()));var p=u.length;return ht(function(b){for(var x=-1,F=ar(b.length,p);++x<F;)b[x]=u[x].call(this,b[x]);return sr(a,this,b)})}),Sy=ht(function(a,u){var p=No(u,vl(Sy));return Js(a,P,t,u,p)}),zI=ht(function(a,u){var p=No(u,vl(zI));return Js(a,O,t,u,p)}),d7=Ys(function(a,u){return Js(a,_,t,t,t,u)});function f7(a,u){if(typeof a!="function")throw new Ei(o);return u=u===t?u:rt(u),ht(a,u)}function p7(a,u){if(typeof a!="function")throw new Ei(o);return u=u==null?0:$n(rt(u),0),ht(function(p){var b=p[u],x=$o(p,0,u);return b&&Vi(x,b),sr(a,this,x)})}function g7(a,u,p){var b=!0,x=!0;if(typeof a!="function")throw new Ei(o);return on(p)&&(b="leading"in p?!!p.leading:b,x="trailing"in p?!!p.trailing:x),WI(a,u,{leading:b,maxWait:u,trailing:x})}function m7(a){return FI(a,1)}function y7(a,u){return Sy(ly(u),a)}function w7(){if(!arguments.length)return[];var a=arguments[0];return Je(a)?a:[a]}function _7(a){return Ai(a,w)}function v7(a,u){return u=typeof u=="function"?u:t,Ai(a,w,u)}function b7(a){return Ai(a,m|w)}function E7(a,u){return u=typeof u=="function"?u:t,Ai(a,m|w,u)}function I7(a,u){return u==null||N2(a,u,qn(u))}function qi(a,u){return a===u||a!==a&&u!==u}var A7=Lp(Y1),S7=Lp(function(a,u){return a>=u}),Za=V2(function(){return arguments}())?V2:function(a){return gn(a)&&jt.call(a,"callee")&&!S2.call(a,"callee")},Je=ie.isArray,T7=bh?$t(bh):DN;function Mr(a){return a!=null&&Wp(a.length)&&!Xs(a)}function En(a){return gn(a)&&Mr(a)}function R7(a){return a===!0||a===!1||gn(a)&&wr(a)==re}var Vo=B8||Ly,C7=al?$t(al):MN;function x7(a){return gn(a)&&a.nodeType===1&&!Uh(a)}function P7(a){if(a==null)return!0;if(Mr(a)&&(Je(a)||typeof a=="string"||typeof a.splice=="function"||Vo(a)||bl(a)||Za(a)))return!a.length;var u=cr(a);if(u==Me||u==Fe)return!a.size;if(Mh(a))return!ey(a).length;for(var p in a)if(jt.call(a,p))return!1;return!0}function O7(a,u){return kh(a,u)}function k7(a,u,p){p=typeof p=="function"?p:t;var b=p?p(a,u):t;return b===t?kh(a,u,t,p):!!b}function Ty(a){if(!gn(a))return!1;var u=wr(a);return u==W||u==E||typeof a.message=="string"&&typeof a.name=="string"&&!Uh(a)}function N7(a){return typeof a=="number"&&R2(a)}function Xs(a){if(!on(a))return!1;var u=wr(a);return u==ge||u==ye||u==ee||u==Jt}function GI(a){return typeof a=="number"&&a==rt(a)}function Wp(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=K}function on(a){var u=typeof a;return a!=null&&(u=="object"||u=="function")}function gn(a){return a!=null&&typeof a=="object"}var KI=Va?$t(Va):UN;function D7(a,u){return a===u||X1(a,u,my(u))}function M7(a,u,p){return p=typeof p=="function"?p:t,X1(a,u,my(u),p)}function L7(a){return QI(a)&&a!=+a}function U7(a){if(vD(a))throw new Ge(s);return F2(a)}function $7(a){return a===null}function V7(a){return a==null}function QI(a){return typeof a=="number"||gn(a)&&wr(a)==We}function Uh(a){if(!gn(a)||wr(a)!=nt)return!1;var u=wp(a);if(u===null)return!0;var p=jt.call(u,"constructor")&&u.constructor;return typeof p=="function"&&p instanceof p&&pp.call(p)==M8}var Ry=Eh?$t(Eh):$N;function F7(a){return GI(a)&&a>=-K&&a<=K}var JI=Fa?$t(Fa):VN;function zp(a){return typeof a=="string"||!Je(a)&&gn(a)&&wr(a)==Ze}function Xr(a){return typeof a=="symbol"||gn(a)&&wr(a)==ze}var bl=op?$t(op):FN;function B7(a){return a===t}function j7(a){return gn(a)&&cr(a)==je}function q7(a){return gn(a)&&wr(a)==Oe}var H7=Lp(ty),W7=Lp(function(a,u){return a<=u});function YI(a){if(!a)return[];if(Mr(a))return zp(a)?Bi(a):Dr(a);if(Ah&&a[Ah])return I8(a[Ah]());var u=cr(a),p=u==Me?j1:u==Fe?hp:El;return p(a)}function eo(a){if(!a)return a===0?a:0;if(a=Ri(a),a===G||a===-G){var u=a<0?-1:1;return u*J}return a===a?a:0}function rt(a){var u=eo(a),p=u%1;return u===u?p?u-p:u:0}function ZI(a){return a?Ka(rt(a),0,se):0}function Ri(a){if(typeof a=="number")return a;if(Xr(a))return ne;if(on(a)){var u=typeof a.valueOf=="function"?a.valueOf():a;a=on(u)?u+"":u}if(typeof a!="string")return a===0?a:+a;a=_t(a);var p=Ff.test(a);return p||ah.test(a)?ip(a.slice(2),p?2:8):ss.test(a)?ne:+a}function XI(a){return ls(a,Lr(a))}function z7(a){return a?Ka(rt(a),-K,K):a===0?a:0}function Vt(a){return a==null?"":Zr(a)}var G7=wl(function(a,u){if(Mh(u)||Mr(u)){ls(u,qn(u),a);return}for(var p in u)jt.call(u,p)&&xh(a,p,u[p])}),eA=wl(function(a,u){ls(u,Lr(u),a)}),Gp=wl(function(a,u,p,b){ls(u,Lr(u),a,b)}),K7=wl(function(a,u,p,b){ls(u,qn(u),a,b)}),Q7=Ys(K1);function J7(a,u){var p=yl(a);return u==null?p:k2(p,u)}var Y7=ht(function(a,u){a=Wt(a);var p=-1,b=u.length,x=b>2?u[2]:t;for(x&&_r(u[0],u[1],x)&&(b=1);++p<b;)for(var F=u[p],H=Lr(F),z=-1,X=H.length;++z<X;){var ue=H[z],he=a[ue];(he===t||qi(he,pl[ue])&&!jt.call(a,ue))&&(a[ue]=F[ue])}return a}),Z7=ht(function(a){return a.push(t,yI),sr(tA,t,a)});function X7(a,u){return or(a,Ue(u,3),cs)}function eL(a,u){return or(a,Ue(u,3),J1)}function tL(a,u){return a==null?a:Q1(a,Ue(u,3),Lr)}function nL(a,u){return a==null?a:U2(a,Ue(u,3),Lr)}function rL(a,u){return a&&cs(a,Ue(u,3))}function iL(a,u){return a&&J1(a,Ue(u,3))}function sL(a){return a==null?[]:Cp(a,qn(a))}function oL(a){return a==null?[]:Cp(a,Lr(a))}function Cy(a,u,p){var b=a==null?t:Qa(a,u);return b===t?p:b}function aL(a,u){return a!=null&&vI(a,u,PN)}function xy(a,u){return a!=null&&vI(a,u,ON)}var cL=dI(function(a,u,p){u!=null&&typeof u.toString!="function"&&(u=gp.call(u)),a[u]=p},Oy(Ur)),lL=dI(function(a,u,p){u!=null&&typeof u.toString!="function"&&(u=gp.call(u)),jt.call(a,u)?a[u].push(p):a[u]=[p]},Ue),uL=ht(Oh);function qn(a){return Mr(a)?P2(a):ey(a)}function Lr(a){return Mr(a)?P2(a,!0):BN(a)}function hL(a,u){var p={};return u=Ue(u,3),cs(a,function(b,x,F){Qs(p,u(b,x,F),b)}),p}function dL(a,u){var p={};return u=Ue(u,3),cs(a,function(b,x,F){Qs(p,x,u(b,x,F))}),p}var fL=wl(function(a,u,p){xp(a,u,p)}),tA=wl(function(a,u,p,b){xp(a,u,p,b)}),pL=Ys(function(a,u){var p={};if(a==null)return p;var b=!1;u=Ht(u,function(F){return F=Uo(F,a),b||(b=F.length>1),F}),ls(a,py(a),p),b&&(p=Ai(p,m|y|w,cD));for(var x=u.length;x--;)oy(p,u[x]);return p});function gL(a,u){return nA(a,Hp(Ue(u)))}var mL=Ys(function(a,u){return a==null?{}:qN(a,u)});function nA(a,u){if(a==null)return{};var p=Ht(py(a),function(b){return[b]});return u=Ue(u),G2(a,p,function(b,x){return u(b,x[0])})}function yL(a,u,p){u=Uo(u,a);var b=-1,x=u.length;for(x||(x=1,a=t);++b<x;){var F=a==null?t:a[us(u[b])];F===t&&(b=x,F=p),a=Xs(F)?F.call(a):F}return a}function wL(a,u,p){return a==null?a:Nh(a,u,p)}function _L(a,u,p,b){return b=typeof b=="function"?b:t,a==null?a:Nh(a,u,p,b)}var rA=gI(qn),iA=gI(Lr);function vL(a,u,p){var b=Je(a),x=b||Vo(a)||bl(a);if(u=Ue(u,4),p==null){var F=a&&a.constructor;x?p=b?new F:[]:on(a)?p=Xs(F)?yl(wp(a)):{}:p={}}return(x?yr:cs)(a,function(H,z,X){return u(p,H,z,X)}),p}function bL(a,u){return a==null?!0:oy(a,u)}function EL(a,u,p){return a==null?a:Z2(a,u,ly(p))}function IL(a,u,p,b){return b=typeof b=="function"?b:t,a==null?a:Z2(a,u,ly(p),b)}function El(a){return a==null?[]:On(a,qn(a))}function AL(a){return a==null?[]:On(a,Lr(a))}function SL(a,u,p){return p===t&&(p=u,u=t),p!==t&&(p=Ri(p),p=p===p?p:0),u!==t&&(u=Ri(u),u=u===u?u:0),Ka(Ri(a),u,p)}function TL(a,u,p){return u=eo(u),p===t?(p=u,u=0):p=eo(p),a=Ri(a),kN(a,u,p)}function RL(a,u,p){if(p&&typeof p!="boolean"&&_r(a,u,p)&&(u=p=t),p===t&&(typeof u=="boolean"?(p=u,u=t):typeof a=="boolean"&&(p=a,a=t)),a===t&&u===t?(a=0,u=1):(a=eo(a),u===t?(u=a,a=0):u=eo(u)),a>u){var b=a;a=u,u=b}if(p||a%1||u%1){var x=C2();return ar(a+x*(u-a+B1("1e-"+((x+"").length-1))),u)}return ry(a,u)}var CL=_l(function(a,u,p){return u=u.toLowerCase(),a+(p?sA(u):u)});function sA(a){return Py(Vt(a).toLowerCase())}function oA(a){return a=Vt(a),a&&a.replace(jf,w8).replace(U1,"")}function xL(a,u,p){a=Vt(a),u=Zr(u);var b=a.length;p=p===t?b:Ka(rt(p),0,b);var x=p;return p-=u.length,p>=0&&a.slice(p,x)==u}function PL(a){return a=Vt(a),a&&zt.test(a)?a.replace(js,_8):a}function OL(a){return a=Vt(a),a&&en.test(a)?a.replace(sn,"\\$&"):a}var kL=_l(function(a,u,p){return a+(p?"-":"")+u.toLowerCase()}),NL=_l(function(a,u,p){return a+(p?" ":"")+u.toLowerCase()}),DL=lI("toLowerCase");function ML(a,u,p){a=Vt(a),u=rt(u);var b=u?dl(a):0;if(!u||b>=u)return a;var x=(u-b)/2;return Mp(Ep(x),p)+a+Mp(bp(x),p)}function LL(a,u,p){a=Vt(a),u=rt(u);var b=u?dl(a):0;return u&&b<u?a+Mp(u-b,p):a}function UL(a,u,p){a=Vt(a),u=rt(u);var b=u?dl(a):0;return u&&b<u?Mp(u-b,p)+a:a}function $L(a,u,p){return p||u==null?u=0:u&&(u=+u),W8(Vt(a).replace(Gt,""),u||0)}function VL(a,u,p){return(p?_r(a,u,p):u===t)?u=1:u=rt(u),iy(Vt(a),u)}function FL(){var a=arguments,u=Vt(a[0]);return a.length<3?u:u.replace(a[1],a[2])}var BL=_l(function(a,u,p){return a+(p?"_":"")+u.toLowerCase()});function jL(a,u,p){return p&&typeof p!="number"&&_r(a,u,p)&&(u=p=t),p=p===t?se:p>>>0,p?(a=Vt(a),a&&(typeof u=="string"||u!=null&&!Ry(u))&&(u=Zr(u),!u&&hl(a))?$o(Bi(a),0,p):a.split(u,p)):[]}var qL=_l(function(a,u,p){return a+(p?" ":"")+Py(u)});function HL(a,u,p){return a=Vt(a),p=p==null?0:Ka(rt(p),0,a.length),u=Zr(u),a.slice(p,p+u.length)==u}function WL(a,u,p){var b=U.templateSettings;p&&_r(a,u,p)&&(u=t),a=Vt(a),u=Gp({},u,b,mI);var x=Gp({},u.imports,b.imports,mI),F=qn(x),H=On(x,F),z,X,ue=0,he=u.interpolate||Ma,fe="__p += '",Ee=q1((u.escape||Ma).source+"|"+he.source+"|"+(he===fn?oh:Ma).source+"|"+(u.evaluate||Ma).source+"|$","g"),xe="//# sourceURL="+(jt.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++np+"]")+`
`;a.replace(Ee,function(Ve,ft,vt,ei,vr,ti){return vt||(vt=ei),fe+=a.slice(ue,ti).replace(k1,v8),ft&&(z=!0,fe+=`' +
__e(`+ft+`) +
'`),vr&&(X=!0,fe+=`';
`+vr+`;
__p += '`),vt&&(fe+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),ue=ti+Ve.length,Ve}),fe+=`';
`;var $e=jt.call(u,"variable")&&u.variable;if(!$e)fe=`with (obj) {
`+fe+`
}
`;else if(tl.test($e))throw new Ge(c);fe=(X?fe.replace(gi,""):fe).replace(is,"$1").replace(Bs,"$1;"),fe="function("+($e||"obj")+`) {
`+($e?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(z?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+fe+`return __p
}`;var it=cA(function(){return Lt(F,xe+"return "+fe).apply(t,H)});if(it.source=fe,Ty(it))throw it;return it}function zL(a){return Vt(a).toLowerCase()}function GL(a){return Vt(a).toUpperCase()}function KL(a,u,p){if(a=Vt(a),a&&(p||u===t))return _t(a);if(!a||!(u=Zr(u)))return a;var b=Bi(a),x=Bi(u),F=Nr(b,x),H=Ha(b,x)+1;return $o(b,F,H).join("")}function QL(a,u,p){if(a=Vt(a),a&&(p||u===t))return a.slice(0,b2(a)+1);if(!a||!(u=Zr(u)))return a;var b=Bi(a),x=Ha(b,Bi(u))+1;return $o(b,0,x).join("")}function JL(a,u,p){if(a=Vt(a),a&&(p||u===t))return a.replace(Gt,"");if(!a||!(u=Zr(u)))return a;var b=Bi(a),x=Nr(b,Bi(u));return $o(b,x).join("")}function YL(a,u){var p=N,b=M;if(on(u)){var x="separator"in u?u.separator:x;p="length"in u?rt(u.length):p,b="omission"in u?Zr(u.omission):b}a=Vt(a);var F=a.length;if(hl(a)){var H=Bi(a);F=H.length}if(p>=F)return a;var z=p-dl(b);if(z<1)return b;var X=H?$o(H,0,z).join(""):a.slice(0,z);if(x===t)return X+b;if(H&&(z+=X.length-z),Ry(x)){if(a.slice(z).search(x)){var ue,he=X;for(x.global||(x=q1(x.source,Vt(Da.exec(x))+"g")),x.lastIndex=0;ue=x.exec(he);)var fe=ue.index;X=X.slice(0,fe===t?z:fe)}}else if(a.indexOf(Zr(x),z)!=z){var Ee=X.lastIndexOf(x);Ee>-1&&(X=X.slice(0,Ee))}return X+b}function ZL(a){return a=Vt(a),a&&dn.test(a)?a.replace(mi,R8):a}var XL=_l(function(a,u,p){return a+(p?" ":"")+u.toUpperCase()}),Py=lI("toUpperCase");function aA(a,u,p){return a=Vt(a),u=p?t:u,u===t?E8(a)?P8(a):ul(a):a.match(u)||[]}var cA=ht(function(a,u){try{return sr(a,t,u)}catch(p){return Ty(p)?p:new Ge(p)}}),e9=Ys(function(a,u){return yr(u,function(p){p=us(p),Qs(a,p,Ay(a[p],a))}),a});function t9(a){var u=a==null?0:a.length,p=Ue();return a=u?Ht(a,function(b){if(typeof b[1]!="function")throw new Ei(o);return[p(b[0]),b[1]]}):[],ht(function(b){for(var x=-1;++x<u;){var F=a[x];if(sr(F[0],this,b))return sr(F[1],this,b)}})}function n9(a){return RN(Ai(a,m))}function Oy(a){return function(){return a}}function r9(a,u){return a==null||a!==a?u:a}var i9=hI(),s9=hI(!0);function Ur(a){return a}function ky(a){return B2(typeof a=="function"?a:Ai(a,m))}function o9(a){return q2(Ai(a,m))}function a9(a,u){return H2(a,Ai(u,m))}var c9=ht(function(a,u){return function(p){return Oh(p,a,u)}}),l9=ht(function(a,u){return function(p){return Oh(a,p,u)}});function Ny(a,u,p){var b=qn(u),x=Cp(u,b);p==null&&!(on(u)&&(x.length||!b.length))&&(p=u,u=a,a=this,x=Cp(u,qn(u)));var F=!(on(p)&&"chain"in p)||!!p.chain,H=Xs(a);return yr(x,function(z){var X=u[z];a[z]=X,H&&(a.prototype[z]=function(){var ue=this.__chain__;if(F||ue){var he=a(this.__wrapped__),fe=he.__actions__=Dr(this.__actions__);return fe.push({func:X,args:arguments,thisArg:a}),he.__chain__=ue,he}return X.apply(a,Vi([this.value()],arguments))})}),a}function u9(){return pn._===this&&(pn._=L8),this}function Dy(){}function h9(a){return a=rt(a),ht(function(u){return W2(u,a)})}var d9=hy(Ht),f9=hy(cl),p9=hy(ll);function lA(a){return wy(a)?S(us(a)):HN(a)}function g9(a){return function(u){return a==null?t:Qa(a,u)}}var m9=fI(),y9=fI(!0);function My(){return[]}function Ly(){return!1}function w9(){return{}}function _9(){return""}function v9(){return!0}function b9(a,u){if(a=rt(a),a<1||a>K)return[];var p=se,b=ar(a,se);u=Ue(u),a-=se;for(var x=Mt(b,u);++p<a;)u(p);return x}function E9(a){return Je(a)?Ht(a,us):Xr(a)?[a]:Dr(xI(Vt(a)))}function I9(a){var u=++D8;return Vt(a)+u}var A9=Dp(function(a,u){return a+u},0),S9=dy("ceil"),T9=Dp(function(a,u){return a/u},1),R9=dy("floor");function C9(a){return a&&a.length?Rp(a,Ur,Y1):t}function x9(a,u){return a&&a.length?Rp(a,Ue(u,2),Y1):t}function P9(a){return v(a,Ur)}function O9(a,u){return v(a,Ue(u,2))}function k9(a){return a&&a.length?Rp(a,Ur,ty):t}function N9(a,u){return a&&a.length?Rp(a,Ue(u,2),ty):t}var D9=Dp(function(a,u){return a*u},1),M9=dy("round"),L9=Dp(function(a,u){return a-u},0);function U9(a){return a&&a.length?me(a,Ur):0}function $9(a,u){return a&&a.length?me(a,Ue(u,2)):0}return U.after=o7,U.ary=FI,U.assign=G7,U.assignIn=eA,U.assignInWith=Gp,U.assignWith=K7,U.at=Q7,U.before=BI,U.bind=Ay,U.bindAll=e9,U.bindKey=jI,U.castArray=w7,U.chain=UI,U.chunk=RD,U.compact=CD,U.concat=xD,U.cond=t9,U.conforms=n9,U.constant=Oy,U.countBy=UM,U.create=J7,U.curry=qI,U.curryRight=HI,U.debounce=WI,U.defaults=Y7,U.defaultsDeep=Z7,U.defer=a7,U.delay=c7,U.difference=PD,U.differenceBy=OD,U.differenceWith=kD,U.drop=ND,U.dropRight=DD,U.dropRightWhile=MD,U.dropWhile=LD,U.fill=UD,U.filter=VM,U.flatMap=jM,U.flatMapDeep=qM,U.flatMapDepth=HM,U.flatten=NI,U.flattenDeep=$D,U.flattenDepth=VD,U.flip=l7,U.flow=i9,U.flowRight=s9,U.fromPairs=FD,U.functions=sL,U.functionsIn=oL,U.groupBy=WM,U.initial=jD,U.intersection=qD,U.intersectionBy=HD,U.intersectionWith=WD,U.invert=cL,U.invertBy=lL,U.invokeMap=GM,U.iteratee=ky,U.keyBy=KM,U.keys=qn,U.keysIn=Lr,U.map=Bp,U.mapKeys=hL,U.mapValues=dL,U.matches=o9,U.matchesProperty=a9,U.memoize=qp,U.merge=fL,U.mergeWith=tA,U.method=c9,U.methodOf=l9,U.mixin=Ny,U.negate=Hp,U.nthArg=h9,U.omit=pL,U.omitBy=gL,U.once=u7,U.orderBy=QM,U.over=d9,U.overArgs=h7,U.overEvery=f9,U.overSome=p9,U.partial=Sy,U.partialRight=zI,U.partition=JM,U.pick=mL,U.pickBy=nA,U.property=lA,U.propertyOf=g9,U.pull=QD,U.pullAll=MI,U.pullAllBy=JD,U.pullAllWith=YD,U.pullAt=ZD,U.range=m9,U.rangeRight=y9,U.rearg=d7,U.reject=XM,U.remove=XD,U.rest=f7,U.reverse=Ey,U.sampleSize=t7,U.set=wL,U.setWith=_L,U.shuffle=n7,U.slice=eM,U.sortBy=s7,U.sortedUniq=aM,U.sortedUniqBy=cM,U.split=jL,U.spread=p7,U.tail=lM,U.take=uM,U.takeRight=hM,U.takeRightWhile=dM,U.takeWhile=fM,U.tap=CM,U.throttle=g7,U.thru=Fp,U.toArray=YI,U.toPairs=rA,U.toPairsIn=iA,U.toPath=E9,U.toPlainObject=XI,U.transform=vL,U.unary=m7,U.union=pM,U.unionBy=gM,U.unionWith=mM,U.uniq=yM,U.uniqBy=wM,U.uniqWith=_M,U.unset=bL,U.unzip=Iy,U.unzipWith=LI,U.update=EL,U.updateWith=IL,U.values=El,U.valuesIn=AL,U.without=vM,U.words=aA,U.wrap=y7,U.xor=bM,U.xorBy=EM,U.xorWith=IM,U.zip=AM,U.zipObject=SM,U.zipObjectDeep=TM,U.zipWith=RM,U.entries=rA,U.entriesIn=iA,U.extend=eA,U.extendWith=Gp,Ny(U,U),U.add=A9,U.attempt=cA,U.camelCase=CL,U.capitalize=sA,U.ceil=S9,U.clamp=SL,U.clone=_7,U.cloneDeep=b7,U.cloneDeepWith=E7,U.cloneWith=v7,U.conformsTo=I7,U.deburr=oA,U.defaultTo=r9,U.divide=T9,U.endsWith=xL,U.eq=qi,U.escape=PL,U.escapeRegExp=OL,U.every=$M,U.find=FM,U.findIndex=OI,U.findKey=X7,U.findLast=BM,U.findLastIndex=kI,U.findLastKey=eL,U.floor=R9,U.forEach=$I,U.forEachRight=VI,U.forIn=tL,U.forInRight=nL,U.forOwn=rL,U.forOwnRight=iL,U.get=Cy,U.gt=A7,U.gte=S7,U.has=aL,U.hasIn=xy,U.head=DI,U.identity=Ur,U.includes=zM,U.indexOf=BD,U.inRange=TL,U.invoke=uL,U.isArguments=Za,U.isArray=Je,U.isArrayBuffer=T7,U.isArrayLike=Mr,U.isArrayLikeObject=En,U.isBoolean=R7,U.isBuffer=Vo,U.isDate=C7,U.isElement=x7,U.isEmpty=P7,U.isEqual=O7,U.isEqualWith=k7,U.isError=Ty,U.isFinite=N7,U.isFunction=Xs,U.isInteger=GI,U.isLength=Wp,U.isMap=KI,U.isMatch=D7,U.isMatchWith=M7,U.isNaN=L7,U.isNative=U7,U.isNil=V7,U.isNull=$7,U.isNumber=QI,U.isObject=on,U.isObjectLike=gn,U.isPlainObject=Uh,U.isRegExp=Ry,U.isSafeInteger=F7,U.isSet=JI,U.isString=zp,U.isSymbol=Xr,U.isTypedArray=bl,U.isUndefined=B7,U.isWeakMap=j7,U.isWeakSet=q7,U.join=zD,U.kebabCase=kL,U.last=Ti,U.lastIndexOf=GD,U.lowerCase=NL,U.lowerFirst=DL,U.lt=H7,U.lte=W7,U.max=C9,U.maxBy=x9,U.mean=P9,U.meanBy=O9,U.min=k9,U.minBy=N9,U.stubArray=My,U.stubFalse=Ly,U.stubObject=w9,U.stubString=_9,U.stubTrue=v9,U.multiply=D9,U.nth=KD,U.noConflict=u9,U.noop=Dy,U.now=jp,U.pad=ML,U.padEnd=LL,U.padStart=UL,U.parseInt=$L,U.random=RL,U.reduce=YM,U.reduceRight=ZM,U.repeat=VL,U.replace=FL,U.result=yL,U.round=M9,U.runInContext=Z,U.sample=e7,U.size=r7,U.snakeCase=BL,U.some=i7,U.sortedIndex=tM,U.sortedIndexBy=nM,U.sortedIndexOf=rM,U.sortedLastIndex=iM,U.sortedLastIndexBy=sM,U.sortedLastIndexOf=oM,U.startCase=qL,U.startsWith=HL,U.subtract=L9,U.sum=U9,U.sumBy=$9,U.template=WL,U.times=b9,U.toFinite=eo,U.toInteger=rt,U.toLength=ZI,U.toLower=zL,U.toNumber=Ri,U.toSafeInteger=z7,U.toString=Vt,U.toUpper=GL,U.trim=KL,U.trimEnd=QL,U.trimStart=JL,U.truncate=YL,U.unescape=ZL,U.uniqueId=I9,U.upperCase=XL,U.upperFirst=Py,U.each=$I,U.eachRight=VI,U.first=DI,Ny(U,function(){var a={};return cs(U,function(u,p){jt.call(U.prototype,p)||(a[p]=u)}),a}(),{chain:!1}),U.VERSION=r,yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){U[a].placeholder=U}),yr(["drop","take"],function(a,u){gt.prototype[a]=function(p){p=p===t?1:$n(rt(p),0);var b=this.__filtered__&&!u?new gt(this):this.clone();return b.__filtered__?b.__takeCount__=ar(p,b.__takeCount__):b.__views__.push({size:ar(p,se),type:a+(b.__dir__<0?"Right":"")}),b},gt.prototype[a+"Right"]=function(p){return this.reverse()[a](p).reverse()}}),yr(["filter","map","takeWhile"],function(a,u){var p=u+1,b=p==q||p==Q;gt.prototype[a]=function(x){var F=this.clone();return F.__iteratees__.push({iteratee:Ue(x,3),type:p}),F.__filtered__=F.__filtered__||b,F}}),yr(["head","last"],function(a,u){var p="take"+(u?"Right":"");gt.prototype[a]=function(){return this[p](1).value()[0]}}),yr(["initial","tail"],function(a,u){var p="drop"+(u?"":"Right");gt.prototype[a]=function(){return this.__filtered__?new gt(this):this[p](1)}}),gt.prototype.compact=function(){return this.filter(Ur)},gt.prototype.find=function(a){return this.filter(a).head()},gt.prototype.findLast=function(a){return this.reverse().find(a)},gt.prototype.invokeMap=ht(function(a,u){return typeof a=="function"?new gt(this):this.map(function(p){return Oh(p,a,u)})}),gt.prototype.reject=function(a){return this.filter(Hp(Ue(a)))},gt.prototype.slice=function(a,u){a=rt(a);var p=this;return p.__filtered__&&(a>0||u<0)?new gt(p):(a<0?p=p.takeRight(-a):a&&(p=p.drop(a)),u!==t&&(u=rt(u),p=u<0?p.dropRight(-u):p.take(u-a)),p)},gt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},gt.prototype.toArray=function(){return this.take(se)},cs(gt.prototype,function(a,u){var p=/^(?:filter|find|map|reject)|While$/.test(u),b=/^(?:head|last)$/.test(u),x=U[b?"take"+(u=="last"?"Right":""):u],F=b||/^find/.test(u);x&&(U.prototype[u]=function(){var H=this.__wrapped__,z=b?[1]:arguments,X=H instanceof gt,ue=z[0],he=X||Je(H),fe=function(ft){var vt=x.apply(U,Vi([ft],z));return b&&Ee?vt[0]:vt};he&&p&&typeof ue=="function"&&ue.length!=1&&(X=he=!1);var Ee=this.__chain__,xe=!!this.__actions__.length,$e=F&&!Ee,it=X&&!xe;if(!F&&he){H=it?H:new gt(this);var Ve=a.apply(H,z);return Ve.__actions__.push({func:Fp,args:[fe],thisArg:t}),new Ii(Ve,Ee)}return $e&&it?a.apply(this,z):(Ve=this.thru(fe),$e?b?Ve.value()[0]:Ve.value():Ve)})}),yr(["pop","push","shift","sort","splice","unshift"],function(a){var u=dp[a],p=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",b=/^(?:pop|shift)$/.test(a);U.prototype[a]=function(){var x=arguments;if(b&&!this.__chain__){var F=this.value();return u.apply(Je(F)?F:[],x)}return this[p](function(H){return u.apply(Je(H)?H:[],x)})}}),cs(gt.prototype,function(a,u){var p=U[u];if(p){var b=p.name+"";jt.call(ml,b)||(ml[b]=[]),ml[b].push({name:u,func:p})}}),ml[Np(t,L).name]=[{name:"wrapper",func:t}],gt.prototype.clone=Z8,gt.prototype.reverse=X8,gt.prototype.value=eN,U.prototype.at=xM,U.prototype.chain=PM,U.prototype.commit=OM,U.prototype.next=kM,U.prototype.plant=DM,U.prototype.reverse=MM,U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=LM,U.prototype.first=U.prototype.head,Ah&&(U.prototype[Ah]=NM),U},fl=O8();Qn?((Qn.exports=fl)._=fl,ol._=fl):pn._=fl}).call(Kh)})(Ev,Ev.exports);var Sie=Object.defineProperty,Tie=Object.defineProperties,Rie=Object.getOwnPropertyDescriptors,K3=Object.getOwnPropertySymbols,Cie=Object.prototype.hasOwnProperty,xie=Object.prototype.propertyIsEnumerable,Q3=(n,e,t)=>e in n?Sie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,ug=(n,e)=>{for(var t in e||(e={}))Cie.call(e,t)&&Q3(n,t,e[t]);if(K3)for(var t of K3(e))xie.call(e,t)&&Q3(n,t,e[t]);return n},Pie=(n,e)=>Tie(n,Rie(e));function Sa(n,e,t){var r;const i=NF(n);return((r=e.rpcMap)==null?void 0:r[i.reference])||`${Aie}?chainId=${i.namespace}:${i.reference}&projectId=${t}`}function Zc(n){return n.includes(":")?n.split(":")[1]:n}function eO(n){return n.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function Oie(n,e){const t=Object.keys(e.namespaces).filter(i=>i.includes(n));if(!t.length)return[];const r=[];return t.forEach(i=>{const s=e.namespaces[i].accounts;r.push(...s)}),r}function kie(n={},e={}){const t=J3(n),r=J3(e);return Ev.exports.merge(t,r)}function J3(n){var e,t,r,i;const s={};if(!Rc(n))return s;for(const[o,c]of Object.entries(n)){const l=sm(o)?[o]:c.chains,h=c.methods||[],f=c.events||[],m=c.rpcMap||{},y=Hl(o);s[y]=Pie(ug(ug({},s[y]),c),{chains:Jl(l,(e=s[y])==null?void 0:e.chains),methods:Jl(h,(t=s[y])==null?void 0:t.methods),events:Jl(f,(r=s[y])==null?void 0:r.events),rpcMap:ug(ug({},m),(i=s[y])==null?void 0:i.rpcMap)})}return s}function Nie(n){return n.includes(":")?n.split(":")[2]:n}function Die(n){const e={};for(const[t,r]of Object.entries(n)){const i=r.methods||[],s=r.events||[],o=r.accounts||[],c=sm(t)?[t]:r.chains?r.chains:eO(r.accounts);e[t]={chains:c,methods:i,events:s,accounts:o}}return e}function ww(n){return typeof n=="number"?n:n.includes("0x")?parseInt(n,16):n.includes(":")?Number(n.split(":")[1]):Number(n)}const tO={},nn=n=>tO[n],_w=(n,e)=>{tO[n]=e};class Mie{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Zc(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ka(new So(r,nn("disableProviderPing")))}}class Lie{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||Sa(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ka(new So(r,nn("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=parseInt(Zc(t));e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let i=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";i=i.startsWith("0x")?i:`0x${i}`;const s=parseInt(i,16);if(this.isChainApproved(s))this.setDefaultChain(`${s}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:i}]},chainId:(r=this.namespace.chains)==null?void 0:r[0]}),this.setDefaultChain(`${s}`);else throw new Error(`Failed to switch to chain 'eip155:${s}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class Uie{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Zc(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ka(new So(r,nn("disableProviderPing")))}}class $ie{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Zc(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ka(new So(r,nn("disableProviderPing")))}}class Vie{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const r=this.getCardanoRPCUrl(t),i=Zc(t);e[i]=this.createHttpProvider(i,r)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ka(new So(r,nn("disableProviderPing")))}}class Fie{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Zc(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ka(new So(r,nn("disableProviderPing")))}}class Bie{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;const i=Zc(t);e[i]=this.createHttpProvider(i,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Sa(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new ka(new So(r,nn("disableProviderPing")))}}class jie{constructor(e){this.name="near",this.namespace=e.namespace,this.events=nn("events"),this.client=nn("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||Sa(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(To.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,(r=this.namespace.rpcMap)==null?void 0:r[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||Sa(e,this.namespace);return typeof r>"u"?void 0:new ka(new So(r,nn("disableProviderPing")))}}var qie=Object.defineProperty,Hie=Object.defineProperties,Wie=Object.getOwnPropertyDescriptors,Y3=Object.getOwnPropertySymbols,zie=Object.prototype.hasOwnProperty,Gie=Object.prototype.propertyIsEnumerable,Z3=(n,e,t)=>e in n?qie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,hg=(n,e)=>{for(var t in e||(e={}))zie.call(e,t)&&Z3(n,t,e[t]);if(Y3)for(var t of Y3(e))Gie.call(e,t)&&Z3(n,t,e[t]);return n},vw=(n,e)=>Hie(n,Wie(e));class NE{constructor(e){this.events=new tf,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:W0(Bm({level:e?.logger||z3})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new NE(e);return await t.initialize(),t}async request(e,t){const[r,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(r).request({request:hg({},e),chainId:`${r}:${i}`,topic:this.session.topic})}sendAsync(e,t,r){const i=new Date().getTime();this.request(e,r).then(s=>t(null,Hm(i,s))).catch(s=>t(s,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:yn("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:r,approval:i}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await i().then(s=>{this.session=s,this.namespaces||(this.namespaces=Die(s.namespaces),this.persist("namespaces",this.namespaces))}).catch(s=>{if(s.message!==ZP)throw s;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,i]=this.validateChain(e);this.getProvider(r).setDefaultChain(i,t)}catch(r){if(!/Please call connect/.test(r.message))throw r}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(ks(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await fie.init({logger:this.providerOpts.logger||z3,relayUrl:this.providerOpts.relayUrl||bie,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Hl(t)))];_w("client",this.client),_w("events",this.events),_w("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const r=Oie(t,this.session),i=eO(r),s=kie(this.namespaces,this.optionalNamespaces),o=vw(hg({},s[t]),{accounts:r,chains:i});switch(t){case"eip155":this.rpcProviders[t]=new Lie({namespace:o});break;case"solana":this.rpcProviders[t]=new Uie({namespace:o});break;case"cosmos":this.rpcProviders[t]=new $ie({namespace:o});break;case"polkadot":this.rpcProviders[t]=new Mie({namespace:o});break;case"cip34":this.rpcProviders[t]=new Vie({namespace:o});break;case"elrond":this.rpcProviders[t]=new Fie({namespace:o});break;case"multiversx":this.rpcProviders[t]=new Bie({namespace:o});break;case"near":this.rpcProviders[t]=new jie({namespace:o});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:r}=t;if(r.name==="accountsChanged"){const i=r.data;i&&ks(i)&&this.events.emit("accountsChanged",i.map(Nie))}else if(r.name==="chainChanged"){const i=t.chainId,s=t.event.data,o=Hl(i),c=ww(i)!==ww(s)?`${o}:${ww(s)}`:i;this.onChainChanged(c)}else this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r;const{namespaces:i}=t,s=(r=this.client)==null?void 0:r.session.get(e);this.session=vw(hg({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",vw(hg({},yn("USER_DISCONNECTED")),{data:e.topic}))}),this.on(To.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=i,this.persist("namespaces",t),this.persist("optionalNamespaces",r)}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(o=>Hl(o)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const i=Hl(Object.keys(this.namespaces)[0]),s=this.rpcProviders[i].getDefaultChain();return[i,s]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var r;if(!this.namespaces)return;const[i,s]=this.validateChain(e);t||this.getProvider(i).setDefaultChain(s),((r=this.namespaces[i])!=null?r:this.namespaces[`${i}:${s}`]).defaultChain=s,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${G3}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${G3}/${e}`)}}const Kie=NE,Qie="wc",Jie="ethereum_provider",Yie=`${Qie}@2:${Jie}:`,Zie="https://rpc.walletconnect.com/v1/",L0=["eth_sendTransaction","personal_sign"],nO=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],U0=["chainChanged","accountsChanged"],rO=["chainChanged","accountsChanged","message","disconnect","connect"];var Xie=Object.defineProperty,ese=Object.defineProperties,tse=Object.getOwnPropertyDescriptors,X3=Object.getOwnPropertySymbols,nse=Object.prototype.hasOwnProperty,rse=Object.prototype.propertyIsEnumerable,eT=(n,e,t)=>e in n?Xie(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,pd=(n,e)=>{for(var t in e||(e={}))nse.call(e,t)&&eT(n,t,e[t]);if(X3)for(var t of X3(e))rse.call(e,t)&&eT(n,t,e[t]);return n},tT=(n,e)=>ese(n,tse(e));function $0(n){return Number(n[0].split(":")[1])}function bw(n){return`0x${n.toString(16)}`}function ise(n){const{chains:e,optionalChains:t,methods:r,optionalMethods:i,events:s,optionalEvents:o,rpcMap:c}=n;if(!ks(e))throw new Error("Invalid chains");const l={chains:e,methods:r||L0,events:s||U0,rpcMap:pd({},e.length?{[$0(e)]:c[$0(e)]}:{})},h=s?.filter(w=>!U0.includes(w)),f=r?.filter(w=>!L0.includes(w));if(!t&&!o&&!i&&!(h!=null&&h.length)&&!(f!=null&&f.length))return{required:e.length?l:void 0};const m=h?.length&&f?.length||!t,y={chains:[...new Set(m?l.chains.concat(t||[]):t)],methods:[...new Set(l.methods.concat(i!=null&&i.length?i:nO))],events:[...new Set(l.events.concat(o!=null&&o.length?o:rO))],rpcMap:c};return{required:e.length?l:void 0,optional:t.length?y:void 0}}let iO=class sO{constructor(){this.events=new Pr.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Yie,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new sO;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:r}=ise(this.rpc);try{const i=await new Promise(async(o,c)=>{var l;this.rpc.showQrModal&&((l=this.modal)==null||l.subscribeModal(h=>{!h.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),c(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(tT(pd({namespaces:pd({},t&&{[this.namespace]:t})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:e?.pairingTopic})).then(h=>{o(h)}).catch(h=>{c(new Error(h.message))})});if(!i)return;const s=DF(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:bw(this.chainId)})}catch(i){throw this.signer.logger.error(i),i}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:r}=t;r.name==="accountsChanged"?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):r.name==="chainChanged"?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",bw(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",tT(pd({},yn("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,r;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(r=this.modal)==null||r.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(r=>this.isCompatibleChainId(r)).map(r=>this.parseChainId(r));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",bw(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,r,i]=e.split(":");return{chainId:`${t}:${r}`,address:i}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;const i=(t=e?.chains)!=null?t:[],s=(r=e?.optionalChains)!=null?r:[],o=i.concat(s);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const c=i.length?e?.methods||L0:[],l=i.length?e?.events||U0:[],h=e?.optionalMethods||[],f=e?.optionalEvents||[],m=e?.rpcMap||this.buildRpcMap(o,e.projectId),y=e?.qrModalOptions||void 0;return{chains:i?.map(w=>this.formatChainId(w)),optionalChains:s.map(w=>this.formatChainId(w)),methods:c,events:l,optionalMethods:h,optionalEvents:f,rpcMap:m,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:y,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const r={};return e.forEach(i=>{r[i]=this.getRpcUrl(i,t)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?$0(this.rpc.chains):$0(this.rpc.optionalChains),this.signer=await Kie.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:r}=await RR(()=>Promise.resolve().then(()=>Ope),void 0);t=r}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(pd({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(r){throw this.signer.logger.error(r),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:r,rpcMap:i}=e;t&&ks(t)&&(this.rpc.chains=t.map(s=>this.formatChainId(s)),t.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)})),r&&ks(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(s=>this.formatChainId(s)),r.forEach(s=>{this.rpc.rpcMap[s]=i?.[s]||this.getRpcUrl(s)}))}getRpcUrl(e,t){var r;return((r=this.rpc.rpcMap)==null?void 0:r[e])||`${Zie}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}};const sse=iO,lye=Object.freeze(Object.defineProperty({__proto__:null,EthereumProvider:sse,OPTIONAL_EVENTS:rO,OPTIONAL_METHODS:nO,REQUIRED_EVENTS:U0,REQUIRED_METHODS:L0,default:iO},Symbol.toStringTag,{value:"Module"}));var oO={},Jd={},Gm={};Object.defineProperty(Gm,"__esModule",{value:!0});Gm.walletLogo=void 0;const ose=(n,e)=>{let t;switch(n){case"standard":return t=e,`data:image/svg+xml,%3Csvg width='${e}' height='${t}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return t=e,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${e}' height='${t}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return t=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return t=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return t=(.1*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return t=(.25*e).toFixed(2),`data:image/svg+xml,%3Csvg width='${e}' height='${t}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return t=e,`data:image/svg+xml,%3Csvg width='${e}' height='${t}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};Gm.walletLogo=ose;var Km={};Object.defineProperty(Km,"__esModule",{value:!0});Km.LINK_API_URL=void 0;Km.LINK_API_URL="https://www.walletlink.org";var Re={},Sf={},Io={};Object.defineProperty(Io,"__esModule",{value:!0});Io.errorValues=Io.standardErrorCodes=void 0;Io.standardErrorCodes={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}};Io.errorValues={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}};var Qm={},Jm={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.serialize=n.getErrorCode=n.isValidCode=n.getMessageFromCode=n.JSON_RPC_SERVER_ERROR_MESSAGE=void 0;const e=Io,t="Unspecified error message.";n.JSON_RPC_SERVER_ERROR_MESSAGE="Unspecified server error.";function r(y,w=t){if(y&&Number.isInteger(y)){const I=y.toString();if(f(e.errorValues,I))return e.errorValues[I].message;if(l(y))return n.JSON_RPC_SERVER_ERROR_MESSAGE}return w}n.getMessageFromCode=r;function i(y){if(!Number.isInteger(y))return!1;const w=y.toString();return!!(e.errorValues[w]||l(y))}n.isValidCode=i;function s(y){var w;if(typeof y=="number")return y;if(o(y))return(w=y.code)!==null&&w!==void 0?w:y.errorCode}n.getErrorCode=s;function o(y){return typeof y=="object"&&y!==null&&(typeof y.code=="number"||typeof y.errorCode=="number")}function c(y,{shouldIncludeStack:w=!1}={}){const I={};if(y&&typeof y=="object"&&!Array.isArray(y)&&f(y,"code")&&i(y.code)){const T=y;I.code=T.code,T.message&&typeof T.message=="string"?(I.message=T.message,f(T,"data")&&(I.data=T.data)):(I.message=r(I.code),I.data={originalError:h(y)})}else I.code=e.standardErrorCodes.rpc.internal,I.message=m(y,"message")?y.message:t,I.data={originalError:h(y)};return w&&(I.stack=m(y,"stack")?y.stack:void 0),I}n.serialize=c;function l(y){return y>=-32099&&y<=-32e3}function h(y){return y&&typeof y=="object"&&!Array.isArray(y)?Object.assign({},y):y}function f(y,w){return Object.prototype.hasOwnProperty.call(y,w)}function m(y,w){return typeof y=="object"&&y!==null&&w in y&&typeof y[w]=="string"}})(Jm);Object.defineProperty(Qm,"__esModule",{value:!0});Qm.standardErrors=void 0;const Yn=Io,aO=Jm;Qm.standardErrors={rpc:{parse:n=>Pi(Yn.standardErrorCodes.rpc.parse,n),invalidRequest:n=>Pi(Yn.standardErrorCodes.rpc.invalidRequest,n),invalidParams:n=>Pi(Yn.standardErrorCodes.rpc.invalidParams,n),methodNotFound:n=>Pi(Yn.standardErrorCodes.rpc.methodNotFound,n),internal:n=>Pi(Yn.standardErrorCodes.rpc.internal,n),server:n=>{if(!n||typeof n!="object"||Array.isArray(n))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:e}=n;if(!Number.isInteger(e)||e>-32005||e<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return Pi(e,n)},invalidInput:n=>Pi(Yn.standardErrorCodes.rpc.invalidInput,n),resourceNotFound:n=>Pi(Yn.standardErrorCodes.rpc.resourceNotFound,n),resourceUnavailable:n=>Pi(Yn.standardErrorCodes.rpc.resourceUnavailable,n),transactionRejected:n=>Pi(Yn.standardErrorCodes.rpc.transactionRejected,n),methodNotSupported:n=>Pi(Yn.standardErrorCodes.rpc.methodNotSupported,n),limitExceeded:n=>Pi(Yn.standardErrorCodes.rpc.limitExceeded,n)},provider:{userRejectedRequest:n=>Sl(Yn.standardErrorCodes.provider.userRejectedRequest,n),unauthorized:n=>Sl(Yn.standardErrorCodes.provider.unauthorized,n),unsupportedMethod:n=>Sl(Yn.standardErrorCodes.provider.unsupportedMethod,n),disconnected:n=>Sl(Yn.standardErrorCodes.provider.disconnected,n),chainDisconnected:n=>Sl(Yn.standardErrorCodes.provider.chainDisconnected,n),unsupportedChain:n=>Sl(Yn.standardErrorCodes.provider.unsupportedChain,n),custom:n=>{if(!n||typeof n!="object"||Array.isArray(n))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:e,message:t,data:r}=n;if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string');return new uO(e,t,r)}}};function Pi(n,e){const[t,r]=cO(e);return new lO(n,t||(0,aO.getMessageFromCode)(n),r)}function Sl(n,e){const[t,r]=cO(e);return new uO(n,t||(0,aO.getMessageFromCode)(n),r)}function cO(n){if(n){if(typeof n=="string")return[n];if(typeof n=="object"&&!Array.isArray(n)){const{message:e,data:t}=n;if(e&&typeof e!="string")throw new Error("Must specify string message.");return[e||void 0,t]}}return[]}class lO extends Error{constructor(e,t,r){if(!Number.isInteger(e))throw new Error('"code" must be an integer.');if(!t||typeof t!="string")throw new Error('"message" must be a nonempty string.');super(t),this.code=e,r!==void 0&&(this.data=r)}}class uO extends lO{constructor(e,t,r){if(!ase(e))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(e,t,r)}}function ase(n){return Number.isInteger(n)&&n>=1e3&&n<=4999}var Ym={},Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.isErrorResponse=void 0;function cse(n){return n.errorMessage!==void 0}Xu.isErrorResponse=cse;var eh={};Object.defineProperty(eh,"__esModule",{value:!0});eh.LIB_VERSION=void 0;eh.LIB_VERSION="3.9.3";Object.defineProperty(Ym,"__esModule",{value:!0});Ym.serializeError=void 0;const lse=Xu,use=eh,hse=Io,dse=Jm;function fse(n,e){const t=(0,dse.serialize)(pse(n),{shouldIncludeStack:!0}),r=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");r.searchParams.set("version",use.LIB_VERSION),r.searchParams.set("code",t.code.toString());const i=gse(t.data,e);return i&&r.searchParams.set("method",i),r.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:r.href})}Ym.serializeError=fse;function pse(n){return typeof n=="string"?{message:n,code:hse.standardErrorCodes.rpc.internal}:(0,lse.isErrorResponse)(n)?Object.assign(Object.assign({},n),{message:n.errorMessage,code:n.errorCode,data:{method:n.method}}):n}function gse(n,e){const t=n?.method;if(t)return t;if(e!==void 0){if(typeof e=="string")return e;if(Array.isArray(e)){if(e.length>0)return e[0].method}else return e.method}}(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.standardErrors=n.standardErrorCodes=n.serializeError=n.getMessageFromCode=n.getErrorCode=void 0;const e=Io;Object.defineProperty(n,"standardErrorCodes",{enumerable:!0,get:function(){return e.standardErrorCodes}});const t=Qm;Object.defineProperty(n,"standardErrors",{enumerable:!0,get:function(){return t.standardErrors}});const r=Ym;Object.defineProperty(n,"serializeError",{enumerable:!0,get:function(){return r.serializeError}});const i=Jm;Object.defineProperty(n,"getErrorCode",{enumerable:!0,get:function(){return i.getErrorCode}}),Object.defineProperty(n,"getMessageFromCode",{enumerable:!0,get:function(){return i.getMessageFromCode}})})(Sf);var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.ProviderType=Vn.RegExpString=Vn.IntNumber=Vn.BigIntString=Vn.AddressString=Vn.HexString=Vn.OpaqueType=void 0;function Tf(){return n=>n}Vn.OpaqueType=Tf;Vn.HexString=Tf();Vn.AddressString=Tf();Vn.BigIntString=Tf();function mse(n){return Math.floor(n)}Vn.IntNumber=mse;Vn.RegExpString=Tf();var nT;(function(n){n.CoinbaseWallet="CoinbaseWallet",n.MetaMask="MetaMask",n.Unselected=""})(nT||(Vn.ProviderType=nT={}));var yse=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Re,"__esModule",{value:!0});Re.isMobileWeb=Re.getLocation=Re.isInIFrame=Re.createQrUrl=Re.getFavicon=Re.range=Re.isBigNumber=Re.ensureParsedJSONObject=Re.ensureBN=Re.ensureRegExpString=Re.ensureIntNumber=Re.ensureBuffer=Re.ensureAddressString=Re.ensureEvenLengthHexString=Re.ensureHexString=Re.isHexString=Re.prepend0x=Re.strip0x=Re.has0xPrefix=Re.hexStringFromIntNumber=Re.intNumberFromHexString=Re.bigIntStringFromBN=Re.hexStringFromBuffer=Re.hexStringToUint8Array=Re.uint8ArrayToHex=Re.randomBytesHex=void 0;const ia=yse(z0),Xc=Sf,Li=Vn,hO=/^[0-9]*$/,dO=/^[a-f0-9]*$/;function wse(n){return fO(crypto.getRandomValues(new Uint8Array(n)))}Re.randomBytesHex=wse;function fO(n){return[...n].map(e=>e.toString(16).padStart(2,"0")).join("")}Re.uint8ArrayToHex=fO;function _se(n){return new Uint8Array(n.match(/.{1,2}/g).map(e=>parseInt(e,16)))}Re.hexStringToUint8Array=_se;function vse(n,e=!1){const t=n.toString("hex");return(0,Li.HexString)(e?`0x${t}`:t)}Re.hexStringFromBuffer=vse;function bse(n){return(0,Li.BigIntString)(n.toString(10))}Re.bigIntStringFromBN=bse;function Ese(n){return(0,Li.IntNumber)(new ia.default(Cf(n,!1),16).toNumber())}Re.intNumberFromHexString=Ese;function Ise(n){return(0,Li.HexString)(`0x${new ia.default(n).toString(16)}`)}Re.hexStringFromIntNumber=Ise;function DE(n){return n.startsWith("0x")||n.startsWith("0X")}Re.has0xPrefix=DE;function Zm(n){return DE(n)?n.slice(2):n}Re.strip0x=Zm;function pO(n){return DE(n)?`0x${n.slice(2)}`:`0x${n}`}Re.prepend0x=pO;function Rf(n){if(typeof n!="string")return!1;const e=Zm(n).toLowerCase();return dO.test(e)}Re.isHexString=Rf;function gO(n,e=!1){if(typeof n=="string"){const t=Zm(n).toLowerCase();if(dO.test(t))return(0,Li.HexString)(e?`0x${t}`:t)}throw Xc.standardErrors.rpc.invalidParams(`"${String(n)}" is not a hexadecimal string`)}Re.ensureHexString=gO;function Cf(n,e=!1){let t=gO(n,!1);return t.length%2===1&&(t=(0,Li.HexString)(`0${t}`)),e?(0,Li.HexString)(`0x${t}`):t}Re.ensureEvenLengthHexString=Cf;function Ase(n){if(typeof n=="string"){const e=Zm(n).toLowerCase();if(Rf(e)&&e.length===40)return(0,Li.AddressString)(pO(e))}throw Xc.standardErrors.rpc.invalidParams(`Invalid Ethereum address: ${String(n)}`)}Re.ensureAddressString=Ase;function Sse(n){if(Buffer.isBuffer(n))return n;if(typeof n=="string"){if(Rf(n)){const e=Cf(n,!1);return Buffer.from(e,"hex")}return Buffer.from(n,"utf8")}throw Xc.standardErrors.rpc.invalidParams(`Not binary data: ${String(n)}`)}Re.ensureBuffer=Sse;function mO(n){if(typeof n=="number"&&Number.isInteger(n))return(0,Li.IntNumber)(n);if(typeof n=="string"){if(hO.test(n))return(0,Li.IntNumber)(Number(n));if(Rf(n))return(0,Li.IntNumber)(new ia.default(Cf(n,!1),16).toNumber())}throw Xc.standardErrors.rpc.invalidParams(`Not an integer: ${String(n)}`)}Re.ensureIntNumber=mO;function Tse(n){if(n instanceof RegExp)return(0,Li.RegExpString)(n.toString());throw Xc.standardErrors.rpc.invalidParams(`Not a RegExp: ${String(n)}`)}Re.ensureRegExpString=Tse;function Rse(n){if(n!==null&&(ia.default.isBN(n)||yO(n)))return new ia.default(n.toString(10),10);if(typeof n=="number")return new ia.default(mO(n));if(typeof n=="string"){if(hO.test(n))return new ia.default(n,10);if(Rf(n))return new ia.default(Cf(n,!1),16)}throw Xc.standardErrors.rpc.invalidParams(`Not an integer: ${String(n)}`)}Re.ensureBN=Rse;function Cse(n){if(typeof n=="string")return JSON.parse(n);if(typeof n=="object")return n;throw Xc.standardErrors.rpc.invalidParams(`Not a JSON string or an object: ${String(n)}`)}Re.ensureParsedJSONObject=Cse;function yO(n){if(n==null||typeof n.constructor!="function")return!1;const{constructor:e}=n;return typeof e.config=="function"&&typeof e.EUCLID=="number"}Re.isBigNumber=yO;function xse(n,e){return Array.from({length:e-n},(t,r)=>n+r)}Re.range=xse;function Pse(){const n=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:e,host:t}=document.location,r=n?n.getAttribute("href"):null;return!r||r.startsWith("javascript:")||r.startsWith("vbscript:")?null:r.startsWith("http://")||r.startsWith("https://")||r.startsWith("data:")?r:r.startsWith("//")?e+r:`${e}//${t}${r}`}Re.getFavicon=Pse;function Ose(n,e,t,r,i,s){const o=r?"parent-id":"id",c=new URLSearchParams({[o]:n,secret:e,server:t,v:i,chainId:s.toString()}).toString();return`${t}/#/link?${c}`}Re.createQrUrl=Ose;function wO(){try{return window.frameElement!==null}catch{return!1}}Re.isInIFrame=wO;function kse(){try{return wO()&&window.top?window.top.location:window.location}catch{return window.location}}Re.getLocation=kse;function Nse(){var n;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((n=window?.navigator)===null||n===void 0?void 0:n.userAgent)}Re.isMobileWeb=Nse;var Xm={};Object.defineProperty(Xm,"__esModule",{value:!0});Xm.ScopedLocalStorage=void 0;class Dse{constructor(e){this.scope=e}setItem(e,t){localStorage.setItem(this.scopedKey(e),t)}getItem(e){return localStorage.getItem(this.scopedKey(e))}removeItem(e){localStorage.removeItem(this.scopedKey(e))}clear(){const e=this.scopedKey(""),t=[];for(let r=0;r<localStorage.length;r++){const i=localStorage.key(r);typeof i=="string"&&i.startsWith(e)&&t.push(i)}t.forEach(r=>localStorage.removeItem(r))}scopedKey(e){return`${this.scope}:${e}`}}Xm.ScopedLocalStorage=Dse;var Cu={},_O={exports:{}};(function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,h,f){this.fn=l,this.context=h,this.once=f||!1}function s(l,h,f,m,y){if(typeof f!="function")throw new TypeError("The listener must be a function");var w=new i(f,m||l,y),I=t?t+h:h;return l._events[I]?l._events[I].fn?l._events[I]=[l._events[I],w]:l._events[I].push(w):(l._events[I]=w,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new r:delete l._events[h]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],f,m;if(this._eventsCount===0)return h;for(m in f=this._events)e.call(f,m)&&h.push(t?m.slice(1):m);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(f)):h},c.prototype.listeners=function(h){var f=t?t+h:h,m=this._events[f];if(!m)return[];if(m.fn)return[m.fn];for(var y=0,w=m.length,I=new Array(w);y<w;y++)I[y]=m[y].fn;return I},c.prototype.listenerCount=function(h){var f=t?t+h:h,m=this._events[f];return m?m.fn?1:m.length:0},c.prototype.emit=function(h,f,m,y,w,I){var T=t?t+h:h;if(!this._events[T])return!1;var A=this._events[T],L=arguments.length,D,C;if(A.fn){switch(A.once&&this.removeListener(h,A.fn,void 0,!0),L){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,f),!0;case 3:return A.fn.call(A.context,f,m),!0;case 4:return A.fn.call(A.context,f,m,y),!0;case 5:return A.fn.call(A.context,f,m,y,w),!0;case 6:return A.fn.call(A.context,f,m,y,w,I),!0}for(C=1,D=new Array(L-1);C<L;C++)D[C-1]=arguments[C];A.fn.apply(A.context,D)}else{var k=A.length,P;for(C=0;C<k;C++)switch(A[C].once&&this.removeListener(h,A[C].fn,void 0,!0),L){case 1:A[C].fn.call(A[C].context);break;case 2:A[C].fn.call(A[C].context,f);break;case 3:A[C].fn.call(A[C].context,f,m);break;case 4:A[C].fn.call(A[C].context,f,m,y);break;default:if(!D)for(P=1,D=new Array(L-1);P<L;P++)D[P-1]=arguments[P];A[C].fn.apply(A[C].context,D)}}return!0},c.prototype.on=function(h,f,m){return s(this,h,f,m,!1)},c.prototype.once=function(h,f,m){return s(this,h,f,m,!0)},c.prototype.removeListener=function(h,f,m,y){var w=t?t+h:h;if(!this._events[w])return this;if(!f)return o(this,w),this;var I=this._events[w];if(I.fn)I.fn===f&&(!y||I.once)&&(!m||I.context===m)&&o(this,w);else{for(var T=0,A=[],L=I.length;T<L;T++)(I[T].fn!==f||y&&!I[T].once||m&&I[T].context!==m)&&A.push(I[T]);A.length?this._events[w]=A.length===1?A[0]:A:o(this,w)}return this},c.prototype.removeAllListeners=function(h){var f;return h?(f=t?t+h:h,this._events[f]&&o(this,f)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c})(_O);var Mse=_O.exports,xf={},Pf={},th={};Object.defineProperty(th,"__esModule",{value:!0});th.EVENTS=void 0;th.EVENTS={STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",METHOD_NOT_IMPLEMENTED:"walletlink_sdk.method_not_implemented",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"};var Mi={};Object.defineProperty(Mi,"__esModule",{value:!0});Mi.RelayAbstract=Mi.APP_VERSION_KEY=Mi.LOCAL_STORAGE_ADDRESSES_KEY=Mi.WALLET_USER_NAME_KEY=void 0;const rT=Sf;Mi.WALLET_USER_NAME_KEY="walletUsername";Mi.LOCAL_STORAGE_ADDRESSES_KEY="Addresses";Mi.APP_VERSION_KEY="AppVersion";class Lse{async makeEthereumJSONRPCRequest(e,t){if(!t)throw new Error("Error: No jsonRpcUrl provided");return window.fetch(t,{method:"POST",body:JSON.stringify(e),mode:"cors",headers:{"Content-Type":"application/json"}}).then(r=>r.json()).then(r=>{if(!r)throw rT.standardErrors.rpc.parse({});const i=r,{error:s}=i;if(s)throw(0,rT.serializeError)(s,e.method);return i})}}Mi.RelayAbstract=Lse;var nh={};Object.defineProperty(nh,"__esModule",{value:!0});nh.Session=void 0;const iT=tU,sT=Re,oT="session:id",aT="session:secret",cT="session:linked";class ME{constructor(e,t,r,i){this._storage=e,this._id=t||(0,sT.randomBytesHex)(16),this._secret=r||(0,sT.randomBytesHex)(32),this._key=new iT.sha256().update(`${this._id}, ${this._secret} WalletLink`).digest("hex"),this._linked=!!i}static load(e){const t=e.getItem(oT),r=e.getItem(cT),i=e.getItem(aT);return t&&i?new ME(e,t,i,r==="1"):null}static hash(e){return new iT.sha256().update(e).digest("hex")}get id(){return this._id}get secret(){return this._secret}get key(){return this._key}get linked(){return this._linked}set linked(e){this._linked=e,this.persistLinked()}save(){return this._storage.setItem(oT,this._id),this._storage.setItem(aT,this._secret),this.persistLinked(),this}persistLinked(){this._storage.setItem(cT,this._linked?"1":"0")}}nh.Session=ME;var e1={},t1={};Object.defineProperty(t1,"__esModule",{value:!0});t1.Cipher=void 0;const dg=Re;class Use{constructor(e){this.secret=e}async encrypt(e){const t=this.secret;if(t.length!==64)throw Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",(0,dg.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=new TextEncoder,o=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},i,s.encode(e)),c=16,l=o.slice(o.byteLength-c),h=o.slice(0,o.byteLength-c),f=new Uint8Array(l),m=new Uint8Array(h),y=new Uint8Array([...r,...f,...m]);return(0,dg.uint8ArrayToHex)(y)}async decrypt(e){const t=this.secret;if(t.length!==64)throw Error("secret must be 256 bits");return new Promise((r,i)=>{(async function(){const s=await crypto.subtle.importKey("raw",(0,dg.hexStringToUint8Array)(t),{name:"aes-gcm"},!1,["encrypt","decrypt"]),o=(0,dg.hexStringToUint8Array)(e),c=o.slice(0,12),l=o.slice(12,28),h=o.slice(28),f=new Uint8Array([...h,...l]),m={name:"AES-GCM",iv:new Uint8Array(c)};try{const y=await window.crypto.subtle.decrypt(m,s,f),w=new TextDecoder;r(w.decode(y))}catch(y){i(y)}})()})}}t1.Cipher=Use;var n1={};Object.defineProperty(n1,"__esModule",{value:!0});n1.WalletLinkHTTP=void 0;class $se{constructor(e,t,r){this.linkAPIUrl=e,this.sessionId=t;const i=`${t}:${r}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(e){return Promise.all(e.map(t=>fetch(`${this.linkAPIUrl}/events/${t.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(t=>console.error("Unabled to mark event as failed:",t))}async fetchUnseenEvents(){var e;const t=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(t.ok){const{events:r,error:i}=await t.json();if(i)throw new Error(`Check unseen events failed: ${i}`);const s=(e=r?.filter(o=>o.event==="Web3Response").map(o=>({type:"Event",sessionId:this.sessionId,eventId:o.id,event:o.event,data:o.data})))!==null&&e!==void 0?e:[];return this.markUnseenEventsAsSeen(s),s}throw new Error(`Check unseen events failed: ${t.status}`)}}n1.WalletLinkHTTP=$se;var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.WalletLinkWebSocket=xu.ConnectionState=void 0;var zl;(function(n){n[n.DISCONNECTED=0]="DISCONNECTED",n[n.CONNECTING=1]="CONNECTING",n[n.CONNECTED=2]="CONNECTED"})(zl||(xu.ConnectionState=zl={}));class Vse{setConnectionStateListener(e){this.connectionStateListener=e}setIncomingDataListener(e){this.incomingDataListener=e}constructor(e,t=WebSocket){this.WebSocketClass=t,this.webSocket=null,this.pendingData=[],this.url=e.replace(/^http/,"ws")}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");return new Promise((e,t)=>{var r;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(s){t(s);return}(r=this.connectionStateListener)===null||r===void 0||r.call(this,zl.CONNECTING),i.onclose=s=>{var o;this.clearWebSocket(),t(new Error(`websocket error ${s.code}: ${s.reason}`)),(o=this.connectionStateListener)===null||o===void 0||o.call(this,zl.DISCONNECTED)},i.onopen=s=>{var o;e(),(o=this.connectionStateListener)===null||o===void 0||o.call(this,zl.CONNECTED),this.pendingData.length>0&&([...this.pendingData].forEach(l=>this.sendData(l)),this.pendingData=[])},i.onmessage=s=>{var o,c;if(s.data==="h")(o=this.incomingDataListener)===null||o===void 0||o.call(this,{type:"Heartbeat"});else try{const l=JSON.parse(s.data);(c=this.incomingDataListener)===null||c===void 0||c.call(this,l)}catch{}}})}disconnect(){var e;const{webSocket:t}=this;if(t){this.clearWebSocket(),(e=this.connectionStateListener)===null||e===void 0||e.call(this,zl.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{t.close()}catch{}}}sendData(e){const{webSocket:t}=this;if(!t){this.pendingData.push(e),this.connect();return}t.send(e)}clearWebSocket(){const{webSocket:e}=this;e&&(this.webSocket=null,e.onclose=null,e.onerror=null,e.onmessage=null,e.onopen=null)}}xu.WalletLinkWebSocket=Vse;Object.defineProperty(e1,"__esModule",{value:!0});e1.WalletLinkConnection=void 0;const Tl=Vn,Fse=t1,ps=th,lT=Mi,Rl=nh,Bse=n1,fg=xu,uT=1e4,jse=6e4;class qse{constructor({session:e,linkAPIUrl:t,listener:r,diagnostic:i,WebSocketClass:s=WebSocket}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=(0,Tl.IntNumber)(1),this._connected=!1,this._linked=!1,this.shouldFetchUnseenEventsOnConnect=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=c=>{if(!c)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",h=>c.JsonRpcUrl&&this.handleChainUpdated(h,c.JsonRpcUrl)]]).forEach((h,f)=>{const m=c[f];m!==void 0&&h(m)})},this.handleDestroyed=c=>{var l,h;c==="1"&&((l=this.listener)===null||l===void 0||l.resetAndReload(),(h=this.diagnostic)===null||h===void 0||h.log(ps.EVENTS.METADATA_DESTROYED,{alreadyDestroyed:this.isDestroyed,sessionIdHash:Rl.Session.hash(this.session.id)}))},this.handleAccountUpdated=async c=>{var l,h;try{const f=await this.cipher.decrypt(c);(l=this.listener)===null||l===void 0||l.accountUpdated(f)}catch{(h=this.diagnostic)===null||h===void 0||h.log(ps.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"selectedAddress"})}},this.handleMetadataUpdated=async(c,l)=>{var h,f;try{const m=await this.cipher.decrypt(l);(h=this.listener)===null||h===void 0||h.metadataUpdated(c,m)}catch{(f=this.diagnostic)===null||f===void 0||f.log(ps.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:c})}},this.handleWalletUsernameUpdated=async c=>{this.handleMetadataUpdated(lT.WALLET_USER_NAME_KEY,c)},this.handleAppVersionUpdated=async c=>{this.handleMetadataUpdated(lT.APP_VERSION_KEY,c)},this.handleChainUpdated=async(c,l)=>{var h,f;try{const m=await this.cipher.decrypt(c),y=await this.cipher.decrypt(l);(h=this.listener)===null||h===void 0||h.chainUpdated(m,y)}catch{(f=this.diagnostic)===null||f===void 0||f.log(ps.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"chainId|jsonRpcUrl"})}},this.session=e,this.cipher=new Fse.Cipher(e.secret),this.diagnostic=i,this.listener=r;const o=new fg.WalletLinkWebSocket(`${t}/rpc`,s);o.setConnectionStateListener(async c=>{var l;(l=this.diagnostic)===null||l===void 0||l.log(ps.EVENTS.CONNECTED_STATE_CHANGE,{state:c,sessionIdHash:Rl.Session.hash(e.id)});let h=!1;switch(c){case fg.ConnectionState.DISCONNECTED:if(!this.destroyed){const f=async()=>{await new Promise(m=>setTimeout(m,5e3)),this.destroyed||o.connect().catch(()=>{f()})};f()}break;case fg.ConnectionState.CONNECTED:try{await this.authenticate(),this.sendIsLinked(),this.sendGetSessionConfig(),h=!0}catch{}this.updateLastHeartbeat(),setInterval(()=>{this.heartbeat()},uT),this.shouldFetchUnseenEventsOnConnect&&this.fetchUnseenEventsAPI();break;case fg.ConnectionState.CONNECTING:break}this.connected!==h&&(this.connected=h)}),o.setIncomingDataListener(c=>{var l,h,f;switch(c.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const m=c.type==="IsLinkedOK"?c.linked:void 0;(l=this.diagnostic)===null||l===void 0||l.log(ps.EVENTS.LINKED,{sessionIdHash:Rl.Session.hash(e.id),linked:m,type:c.type,onlineGuests:c.onlineGuests}),this.linked=m||c.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{(h=this.diagnostic)===null||h===void 0||h.log(ps.EVENTS.SESSION_CONFIG_RECEIVED,{sessionIdHash:Rl.Session.hash(e.id),metadata_keys:c&&c.metadata?Object.keys(c.metadata):void 0}),this.handleSessionMetadataUpdated(c.metadata);break}case"Event":{this.handleIncomingEvent(c);break}}c.id!==void 0&&((f=this.requestResolutions.get(c.id))===null||f===void 0||f(c))}),this.ws=o,this.http=new Bse.WalletLinkHTTP(t,e.id,e.key)}connect(){var e;if(this.destroyed)throw new Error("instance is destroyed");(e=this.diagnostic)===null||e===void 0||e.log(ps.EVENTS.STARTED_CONNECTING,{sessionIdHash:Rl.Session.hash(this.session.id)}),this.ws.connect()}destroy(){var e;this.destroyed=!0,this.ws.disconnect(),(e=this.diagnostic)===null||e===void 0||e.log(ps.EVENTS.DISCONNECTED,{sessionIdHash:Rl.Session.hash(this.session.id)}),this.listener=void 0}get isDestroyed(){return this.destroyed}get connected(){return this._connected}set connected(e){var t,r;this._connected=e,e&&((t=this.onceConnected)===null||t===void 0||t.call(this)),(r=this.listener)===null||r===void 0||r.connectedUpdated(e)}setOnceConnected(e){return new Promise(t=>{this.connected?e().then(t):this.onceConnected=()=>{e().then(t),this.onceConnected=void 0}})}get linked(){return this._linked}set linked(e){var t,r;this._linked=e,e&&((t=this.onceLinked)===null||t===void 0||t.call(this)),(r=this.listener)===null||r===void 0||r.linkedUpdated(e)}setOnceLinked(e){return new Promise(t=>{this.linked?e().then(t):this.onceLinked=()=>{e().then(t),this.onceLinked=void 0}})}async handleIncomingEvent(e){var t,r;if(!(e.type!=="Event"||e.event!=="Web3Response"))try{const i=await this.cipher.decrypt(e.data),s=JSON.parse(i);if(s.type!=="WEB3_RESPONSE")return;(t=this.listener)===null||t===void 0||t.handleWeb3ResponseMessage(s)}catch{(r=this.diagnostic)===null||r===void 0||r.log(ps.EVENTS.GENERAL_ERROR,{message:"Had error decrypting",value:"incomingEvent"})}}async checkUnseenEvents(){if(!this.connected){this.shouldFetchUnseenEventsOnConnect=!0;return}await new Promise(e=>setTimeout(e,250));try{await this.fetchUnseenEventsAPI()}catch(e){console.error("Unable to check for unseen events",e)}}async fetchUnseenEventsAPI(){this.shouldFetchUnseenEventsOnConnect=!1,(await this.http.fetchUnseenEvents()).forEach(t=>this.handleIncomingEvent(t))}async setSessionMetadata(e,t){const r={type:"SetSessionConfig",id:(0,Tl.IntNumber)(this.nextReqId++),sessionId:this.session.id,metadata:{[e]:t}};return this.setOnceConnected(async()=>{const i=await this.makeRequest(r);if(i.type==="Fail")throw new Error(i.error||"failed to set session metadata")})}async publishEvent(e,t,r=!1){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},t),{origin:location.origin,relaySource:window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),s={type:"PublishEvent",id:(0,Tl.IntNumber)(this.nextReqId++),sessionId:this.session.id,event:e,data:i,callWebhook:r};return this.setOnceLinked(async()=>{const o=await this.makeRequest(s);if(o.type==="Fail")throw new Error(o.error||"failed to publish event");return o.eventId})}sendData(e){this.ws.sendData(JSON.stringify(e))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>uT*2){this.ws.disconnect();return}try{this.ws.sendData("h")}catch{}}async makeRequest(e,t=jse){const r=e.id;this.sendData(e);let i;return Promise.race([new Promise((s,o)=>{i=window.setTimeout(()=>{o(new Error(`request ${r} timed out`))},t)}),new Promise(s=>{this.requestResolutions.set(r,o=>{clearTimeout(i),s(o),this.requestResolutions.delete(r)})})])}async authenticate(){const e={type:"HostSession",id:(0,Tl.IntNumber)(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key},t=await this.makeRequest(e);if(t.type==="Fail")throw new Error(t.error||"failed to authentcate")}sendIsLinked(){const e={type:"IsLinked",id:(0,Tl.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}sendGetSessionConfig(){const e={type:"GetSessionConfig",id:(0,Tl.IntNumber)(this.nextReqId++),sessionId:this.session.id};this.sendData(e)}}e1.WalletLinkConnection=qse;var Of={},kf={},LE={};Object.defineProperty(LE,"__esModule",{value:!0});LE.default='@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}';var Hse=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(kf,"__esModule",{value:!0});kf.injectCssReset=void 0;const Wse=Hse(LE);function zse(){const n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode(Wse.default)),document.documentElement.appendChild(n)}kf.injectCssReset=zse;var r1={},i1={};function vO(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=vO(n[e]))&&(r&&(r+=" "),r+=t);else for(e in n)n[e]&&(r&&(r+=" "),r+=e);return r}function hT(){for(var n,e,t=0,r="";t<arguments.length;)(n=arguments[t++])&&(e=vO(n))&&(r&&(r+=" "),r+=e);return r}const Gse=Object.freeze(Object.defineProperty({__proto__:null,clsx:hT,default:hT},Symbol.toStringTag,{value:"Module"})),Nf=Bc(Gse);var Pu={},s1={};Object.defineProperty(s1,"__esModule",{value:!0});s1.CloseIcon=void 0;const dT=Kr;function Kse(n){return(0,dT.h)("svg",Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),(0,dT.h)("path",{d:"M13.7677 13L12.3535 14.4142L18.3535 20.4142L12.3535 26.4142L13.7677 27.8284L19.7677 21.8284L25.7677 27.8284L27.1819 26.4142L21.1819 20.4142L27.1819 14.4142L25.7677 13L19.7677 19L13.7677 13Z"}))}s1.CloseIcon=Kse;var o1={};Object.defineProperty(o1,"__esModule",{value:!0});o1.CoinbaseWalletRound=void 0;const pg=Kr;function Qse(n){return(0,pg.h)("svg",Object.assign({width:"28",height:"28",viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),(0,pg.h)("circle",{cx:"14",cy:"14",r:"14",fill:"#0052FF"}),(0,pg.h)("path",{d:"M23.8521 14.0003C23.8521 19.455 19.455 23.8521 14.0003 23.8521C8.54559 23.8521 4.14844 19.455 4.14844 14.0003C4.14844 8.54559 8.54559 4.14844 14.0003 4.14844C19.455 4.14844 23.8521 8.54559 23.8521 14.0003Z",fill:"white"}),(0,pg.h)("path",{d:"M11.1855 12.5042C11.1855 12.0477 11.1855 11.7942 11.2835 11.642C11.3814 11.4899 11.4793 11.3377 11.6261 11.287C11.8219 11.1855 12.0178 11.1855 12.5073 11.1855H15.4934C15.983 11.1855 16.1788 11.1855 16.3746 11.287C16.5215 11.3884 16.6683 11.4899 16.7173 11.642C16.8152 11.8449 16.8152 12.0477 16.8152 12.5042V15.4965C16.8152 15.953 16.8152 16.2066 16.7173 16.3587C16.6194 16.5109 16.5215 16.663 16.3746 16.7137C16.1788 16.8152 15.983 16.8152 15.4934 16.8152H12.5073C12.0178 16.8152 11.8219 16.8152 11.6261 16.7137C11.4793 16.6123 11.3324 16.5109 11.2835 16.3587C11.1855 16.1558 11.1855 15.953 11.1855 15.4965V12.5042Z",fill:"#0052FF"}))}o1.CoinbaseWalletRound=Qse;var a1={};Object.defineProperty(a1,"__esModule",{value:!0});a1.QRCodeIcon=void 0;const Qh=Kr;function Jse(n){return(0,Qh.h)("svg",Object.assign({width:"18",height:"18",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n),(0,Qh.h)("path",{d:"M3 3V8.99939L5 8.99996V5H9V3H3Z"}),(0,Qh.h)("path",{d:"M15 21L21 21V15.0006L19 15V19L15 19V21Z"}),(0,Qh.h)("path",{d:"M21 9H19V5H15.0006L15 3H21V9Z"}),(0,Qh.h)("path",{d:"M3 15V21H8.99939L8.99996 19H5L5 15H3Z"}))}a1.QRCodeIcon=Jse;var c1={};function bO(n){this.mode=ri.MODE_8BIT_BYTE,this.data=n,this.parsedData=[];for(var e=0,t=this.data.length;e<t;e++){var r=[],i=this.data.charCodeAt(e);i>65536?(r[0]=240|(i&1835008)>>>18,r[1]=128|(i&258048)>>>12,r[2]=128|(i&4032)>>>6,r[3]=128|i&63):i>2048?(r[0]=224|(i&61440)>>>12,r[1]=128|(i&4032)>>>6,r[2]=128|i&63):i>128?(r[0]=192|(i&1984)>>>6,r[1]=128|i&63):r[0]=i,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}bO.prototype={getLength:function(n){return this.parsedData.length},write:function(n){for(var e=0,t=this.parsedData.length;e<t;e++)n.put(this.parsedData[e],8)}};function As(n,e){this.typeNumber=n,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}As.prototype={addData:function(n){var e=new bO(n);this.dataList.push(e),this.dataCache=null},isDark:function(n,e){if(n<0||this.moduleCount<=n||e<0||this.moduleCount<=e)throw new Error(n+","+e);return this.modules[n][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(n,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++){this.modules[t]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[t][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(n,e),this.typeNumber>=7&&this.setupTypeNumber(n),this.dataCache==null&&(this.dataCache=As.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)},setupPositionProbePattern:function(n,e){for(var t=-1;t<=7;t++)if(!(n+t<=-1||this.moduleCount<=n+t))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(0<=t&&t<=6&&(r==0||r==6)||0<=r&&r<=6&&(t==0||t==6)||2<=t&&t<=4&&2<=r&&r<=4?this.modules[n+t][e+r]=!0:this.modules[n+t][e+r]=!1)},getBestMaskPattern:function(){for(var n=0,e=0,t=0;t<8;t++){this.makeImpl(!0,t);var r=cn.getLostPoint(this);(t==0||n>r)&&(n=r,e=t)}return e},createMovieClip:function(n,e,t){var r=n.createEmptyMovieClip(e,t),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var o=s*i,c=0;c<this.modules[s].length;c++){var l=c*i,h=this.modules[s][c];h&&(r.beginFill(0,100),r.moveTo(l,o),r.lineTo(l+i,o),r.lineTo(l+i,o+i),r.lineTo(l,o+i),r.endFill())}return r},setupTimingPattern:function(){for(var n=8;n<this.moduleCount-8;n++)this.modules[n][6]==null&&(this.modules[n][6]=n%2==0);for(var e=8;e<this.moduleCount-8;e++)this.modules[6][e]==null&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var n=cn.getPatternPosition(this.typeNumber),e=0;e<n.length;e++)for(var t=0;t<n.length;t++){var r=n[e],i=n[t];if(this.modules[r][i]==null)for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)s==-2||s==2||o==-2||o==2||s==0&&o==0?this.modules[r+s][i+o]=!0:this.modules[r+s][i+o]=!1}},setupTypeNumber:function(n){for(var e=cn.getBCHTypeNumber(this.typeNumber),t=0;t<18;t++){var r=!n&&(e>>t&1)==1;this.modules[Math.floor(t/3)][t%3+this.moduleCount-8-3]=r}for(var t=0;t<18;t++){var r=!n&&(e>>t&1)==1;this.modules[t%3+this.moduleCount-8-3][Math.floor(t/3)]=r}},setupTypeInfo:function(n,e){for(var t=this.errorCorrectLevel<<3|e,r=cn.getBCHTypeInfo(t),i=0;i<15;i++){var s=!n&&(r>>i&1)==1;i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(var i=0;i<15;i++){var s=!n&&(r>>i&1)==1;i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!n},mapData:function(n,e){for(var t=-1,r=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2)for(o==6&&o--;;){for(var c=0;c<2;c++)if(this.modules[r][o-c]==null){var l=!1;s<n.length&&(l=(n[s]>>>i&1)==1);var h=cn.getMask(e,r,o-c);h&&(l=!l),this.modules[r][o-c]=l,i--,i==-1&&(s++,i=7)}if(r+=t,r<0||this.moduleCount<=r){r-=t,t=-t;break}}}};As.PAD0=236;As.PAD1=17;As.createData=function(n,e,t){for(var r=Es.getRSBlocks(n,e),i=new EO,s=0;s<t.length;s++){var o=t[s];i.put(o.mode,4),i.put(o.getLength(),cn.getLengthInBits(o.mode,n)),o.write(i)}for(var c=0,s=0;s<r.length;s++)c+=r[s].dataCount;if(i.getLengthInBits()>c*8)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+c*8+")");for(i.getLengthInBits()+4<=c*8&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=c*8||(i.put(As.PAD0,8),i.getLengthInBits()>=c*8));)i.put(As.PAD1,8);return As.createBytes(i,r)};As.createBytes=function(n,e){for(var t=0,r=0,i=0,s=new Array(e.length),o=new Array(e.length),c=0;c<e.length;c++){var l=e[c].dataCount,h=e[c].totalCount-l;r=Math.max(r,l),i=Math.max(i,h),s[c]=new Array(l);for(var f=0;f<s[c].length;f++)s[c][f]=255&n.buffer[f+t];t+=l;var m=cn.getErrorCorrectPolynomial(h),y=new iu(s[c],m.getLength()-1),w=y.mod(m);o[c]=new Array(m.getLength()-1);for(var f=0;f<o[c].length;f++){var I=f+w.getLength()-o[c].length;o[c][f]=I>=0?w.get(I):0}}for(var T=0,f=0;f<e.length;f++)T+=e[f].totalCount;for(var A=new Array(T),L=0,f=0;f<r;f++)for(var c=0;c<e.length;c++)f<s[c].length&&(A[L++]=s[c][f]);for(var f=0;f<i;f++)for(var c=0;c<e.length;c++)f<o[c].length&&(A[L++]=o[c][f]);return A};var ri={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},aa={L:1,M:0,Q:3,H:2},Wo={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},cn={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(n){for(var e=n<<10;cn.getBCHDigit(e)-cn.getBCHDigit(cn.G15)>=0;)e^=cn.G15<<cn.getBCHDigit(e)-cn.getBCHDigit(cn.G15);return(n<<10|e)^cn.G15_MASK},getBCHTypeNumber:function(n){for(var e=n<<12;cn.getBCHDigit(e)-cn.getBCHDigit(cn.G18)>=0;)e^=cn.G18<<cn.getBCHDigit(e)-cn.getBCHDigit(cn.G18);return n<<12|e},getBCHDigit:function(n){for(var e=0;n!=0;)e++,n>>>=1;return e},getPatternPosition:function(n){return cn.PATTERN_POSITION_TABLE[n-1]},getMask:function(n,e,t){switch(n){case Wo.PATTERN000:return(e+t)%2==0;case Wo.PATTERN001:return e%2==0;case Wo.PATTERN010:return t%3==0;case Wo.PATTERN011:return(e+t)%3==0;case Wo.PATTERN100:return(Math.floor(e/2)+Math.floor(t/3))%2==0;case Wo.PATTERN101:return e*t%2+e*t%3==0;case Wo.PATTERN110:return(e*t%2+e*t%3)%2==0;case Wo.PATTERN111:return(e*t%3+(e+t)%2)%2==0;default:throw new Error("bad maskPattern:"+n)}},getErrorCorrectPolynomial:function(n){for(var e=new iu([1],0),t=0;t<n;t++)e=e.multiply(new iu([1,zn.gexp(t)],0));return e},getLengthInBits:function(n,e){if(1<=e&&e<10)switch(n){case ri.MODE_NUMBER:return 10;case ri.MODE_ALPHA_NUM:return 9;case ri.MODE_8BIT_BYTE:return 8;case ri.MODE_KANJI:return 8;default:throw new Error("mode:"+n)}else if(e<27)switch(n){case ri.MODE_NUMBER:return 12;case ri.MODE_ALPHA_NUM:return 11;case ri.MODE_8BIT_BYTE:return 16;case ri.MODE_KANJI:return 10;default:throw new Error("mode:"+n)}else if(e<41)switch(n){case ri.MODE_NUMBER:return 14;case ri.MODE_ALPHA_NUM:return 13;case ri.MODE_8BIT_BYTE:return 16;case ri.MODE_KANJI:return 12;default:throw new Error("mode:"+n)}else throw new Error("type:"+e)},getLostPoint:function(n){for(var e=n.getModuleCount(),t=0,r=0;r<e;r++)for(var i=0;i<e;i++){for(var s=0,o=n.isDark(r,i),c=-1;c<=1;c++)if(!(r+c<0||e<=r+c))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||c==0&&l==0||o==n.isDark(r+c,i+l)&&s++;s>5&&(t+=3+s-5)}for(var r=0;r<e-1;r++)for(var i=0;i<e-1;i++){var h=0;n.isDark(r,i)&&h++,n.isDark(r+1,i)&&h++,n.isDark(r,i+1)&&h++,n.isDark(r+1,i+1)&&h++,(h==0||h==4)&&(t+=3)}for(var r=0;r<e;r++)for(var i=0;i<e-6;i++)n.isDark(r,i)&&!n.isDark(r,i+1)&&n.isDark(r,i+2)&&n.isDark(r,i+3)&&n.isDark(r,i+4)&&!n.isDark(r,i+5)&&n.isDark(r,i+6)&&(t+=40);for(var i=0;i<e;i++)for(var r=0;r<e-6;r++)n.isDark(r,i)&&!n.isDark(r+1,i)&&n.isDark(r+2,i)&&n.isDark(r+3,i)&&n.isDark(r+4,i)&&!n.isDark(r+5,i)&&n.isDark(r+6,i)&&(t+=40);for(var f=0,i=0;i<e;i++)for(var r=0;r<e;r++)n.isDark(r,i)&&f++;var m=Math.abs(100*f/e/e-50)/5;return t+=m*10,t}},zn={glog:function(n){if(n<1)throw new Error("glog("+n+")");return zn.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return zn.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var Xn=0;Xn<8;Xn++)zn.EXP_TABLE[Xn]=1<<Xn;for(var Xn=8;Xn<256;Xn++)zn.EXP_TABLE[Xn]=zn.EXP_TABLE[Xn-4]^zn.EXP_TABLE[Xn-5]^zn.EXP_TABLE[Xn-6]^zn.EXP_TABLE[Xn-8];for(var Xn=0;Xn<255;Xn++)zn.LOG_TABLE[zn.EXP_TABLE[Xn]]=Xn;function iu(n,e){if(n.length==null)throw new Error(n.length+"/"+e);for(var t=0;t<n.length&&n[t]==0;)t++;this.num=new Array(n.length-t+e);for(var r=0;r<n.length-t;r++)this.num[r]=n[r+t]}iu.prototype={get:function(n){return this.num[n]},getLength:function(){return this.num.length},multiply:function(n){for(var e=new Array(this.getLength()+n.getLength()-1),t=0;t<this.getLength();t++)for(var r=0;r<n.getLength();r++)e[t+r]^=zn.gexp(zn.glog(this.get(t))+zn.glog(n.get(r)));return new iu(e,0)},mod:function(n){if(this.getLength()-n.getLength()<0)return this;for(var e=zn.glog(this.get(0))-zn.glog(n.get(0)),t=new Array(this.getLength()),r=0;r<this.getLength();r++)t[r]=this.get(r);for(var r=0;r<n.getLength();r++)t[r]^=zn.gexp(zn.glog(n.get(r))+e);return new iu(t,0).mod(n)}};function Es(n,e){this.totalCount=n,this.dataCount=e}Es.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];Es.getRSBlocks=function(n,e){var t=Es.getRsBlockTable(n,e);if(t==null)throw new Error("bad rs block @ typeNumber:"+n+"/errorCorrectLevel:"+e);for(var r=t.length/3,i=[],s=0;s<r;s++)for(var o=t[s*3+0],c=t[s*3+1],l=t[s*3+2],h=0;h<o;h++)i.push(new Es(c,l));return i};Es.getRsBlockTable=function(n,e){switch(e){case aa.L:return Es.RS_BLOCK_TABLE[(n-1)*4+0];case aa.M:return Es.RS_BLOCK_TABLE[(n-1)*4+1];case aa.Q:return Es.RS_BLOCK_TABLE[(n-1)*4+2];case aa.H:return Es.RS_BLOCK_TABLE[(n-1)*4+3];default:return}};function EO(){this.buffer=[],this.length=0}EO.prototype={get:function(n){var e=Math.floor(n/8);return(this.buffer[e]>>>7-n%8&1)==1},put:function(n,e){for(var t=0;t<e;t++)this.putBit((n>>>e-t-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(n){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),n&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Ew=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function IO(n){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M",image:{svg:"",width:0,height:0}},typeof n=="string"&&(n={content:n}),n)for(var e in n)this.options[e]=n[e];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function t(l){switch(l){case"L":return aa.L;case"M":return aa.M;case"Q":return aa.Q;case"H":return aa.H;default:throw new Error("Unknwon error correction level: "+l)}}function r(l,h){for(var f=i(l),m=1,y=0,w=0,I=Ew.length;w<=I;w++){var T=Ew[w];if(!T)throw new Error("Content too long: expected "+y+" but got "+f);switch(h){case"L":y=T[0];break;case"M":y=T[1];break;case"Q":y=T[2];break;case"H":y=T[3];break;default:throw new Error("Unknwon error correction level: "+h)}if(f<=y)break;m++}if(m>Ew.length)throw new Error("Content too long");return m}function i(l){var h=encodeURI(l).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return h.length+(h.length!=l?3:0)}var s=this.options.content,o=r(s,this.options.ecl),c=t(this.options.ecl);this.qrcode=new As(o,c),this.qrcode.addData(s),this.qrcode.make()}IO.prototype.svg=function(n){var e=this.options||{},t=this.qrcode.modules;typeof n>"u"&&(n={container:e.container||"svg"});for(var r=typeof e.pretty<"u"?!!e.pretty:!0,i=r?"  ":"",s=r?`\r
`:"",o=e.width,c=e.height,l=t.length,h=o/(l+2*e.padding),f=c/(l+2*e.padding),m=typeof e.join<"u"?!!e.join:!1,y=typeof e.swap<"u"?!!e.swap:!1,w=typeof e.xmlDeclaration<"u"?!!e.xmlDeclaration:!0,I=typeof e.predefined<"u"?!!e.predefined:!1,T=I?i+'<defs><path id="qrmodule" d="M0 0 h'+f+" v"+h+' H0 z" style="fill:'+e.color+';shape-rendering:crispEdges;" /></defs>'+s:"",A=i+'<rect x="0" y="0" width="'+o+'" height="'+c+'" style="fill:'+e.background+';shape-rendering:crispEdges;"/>'+s,L="",D="",C=0;C<l;C++)for(var k=0;k<l;k++){var P=t[k][C];if(P){var O=k*h+e.padding*h,g=C*f+e.padding*f;if(y){var _=O;O=g,g=_}if(m){var R=h+O,N=f+g;O=Number.isInteger(O)?Number(O):O.toFixed(2),g=Number.isInteger(g)?Number(g):g.toFixed(2),R=Number.isInteger(R)?Number(R):R.toFixed(2),N=Number.isInteger(N)?Number(N):N.toFixed(2),D+="M"+O+","+g+" V"+N+" H"+R+" V"+g+" H"+O+" Z "}else I?L+=i+'<use x="'+O.toString()+'" y="'+g.toString()+'" href="#qrmodule" />'+s:L+=i+'<rect x="'+O.toString()+'" y="'+g.toString()+'" width="'+h+'" height="'+f+'" style="fill:'+e.color+';shape-rendering:crispEdges;"/>'+s}}m&&(L=i+'<path x="0" y="0" style="fill:'+e.color+';shape-rendering:crispEdges;" d="'+D+'" />');let M="";if(this.options.image!==void 0&&this.options.image.svg){const $=o*this.options.image.width/100,q=c*this.options.image.height/100,B=o/2-$/2,Q=c/2-q/2;M+=`<svg x="${B}" y="${Q}" width="${$}" height="${q}" viewBox="0 0 100 100" preserveAspectRatio="xMinYMin meet">`,M+=this.options.image.svg+s,M+="</svg>"}var j="";switch(n.container){case"svg":w&&(j+='<?xml version="1.0" standalone="yes"?>'+s),j+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+o+'" height="'+c+'">'+s,j+=T+A+L,j+=M,j+="</svg>";break;case"svg-viewbox":w&&(j+='<?xml version="1.0" standalone="yes"?>'+s),j+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+o+" "+c+'">'+s,j+=T+A+L,j+=M,j+="</svg>";break;case"g":j+='<g width="'+o+'" height="'+c+'">'+s,j+=T+A+L,j+=M,j+="</g>";break;default:j+=(T+A+L+M).replace(/^\s+/,"");break}return j};var Yse=IO,Zse=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(c1,"__esModule",{value:!0});c1.QRCode=void 0;const Xse=Kr,fT=H0,eoe=Zse(Yse),toe=n=>{const[e,t]=(0,fT.useState)("");return(0,fT.useEffect)(()=>{var r,i;const s=new eoe.default({content:n.content,background:n.bgColor||"#ffffff",color:n.fgColor||"#000000",container:"svg",ecl:"M",width:(r=n.width)!==null&&r!==void 0?r:256,height:(i=n.height)!==null&&i!==void 0?i:256,padding:0,image:n.image}),o=Buffer.from(s.svg(),"utf8").toString("base64");t(`data:image/svg+xml;base64,${o}`)},[n.bgColor,n.content,n.fgColor,n.height,n.image,n.width]),e?(0,Xse.h)("img",{src:e,alt:"QR Code"}):null};c1.QRCode=toe;var l1={},UE={};Object.defineProperty(UE,"__esModule",{value:!0});UE.default=".-cbwsdk-css-reset .-cbwsdk-spinner{display:inline-block}.-cbwsdk-css-reset .-cbwsdk-spinner svg{display:inline-block;animation:2s linear infinite -cbwsdk-spinner-svg}.-cbwsdk-css-reset .-cbwsdk-spinner svg circle{animation:1.9s ease-in-out infinite both -cbwsdk-spinner-circle;display:block;fill:rgba(0,0,0,0);stroke-dasharray:283;stroke-dashoffset:280;stroke-linecap:round;stroke-width:10px;transform-origin:50% 50%}@keyframes -cbwsdk-spinner-svg{0%{transform:rotateZ(0deg)}100%{transform:rotateZ(360deg)}}@keyframes -cbwsdk-spinner-circle{0%,25%{stroke-dashoffset:280;transform:rotate(0)}50%,75%{stroke-dashoffset:75;transform:rotate(45deg)}100%{stroke-dashoffset:280;transform:rotate(360deg)}}";var noe=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(l1,"__esModule",{value:!0});l1.Spinner=void 0;const gg=Kr,roe=noe(UE),ioe=n=>{var e;const t=(e=n.size)!==null&&e!==void 0?e:64,r=n.color||"#000";return(0,gg.h)("div",{class:"-cbwsdk-spinner"},(0,gg.h)("style",null,roe.default),(0,gg.h)("svg",{viewBox:"0 0 100 100",xmlns:"http://www.w3.org/2000/svg",style:{width:t,height:t}},(0,gg.h)("circle",{style:{cx:50,cy:50,r:45,stroke:r}})))};l1.Spinner=ioe;var $E={};Object.defineProperty($E,"__esModule",{value:!0});$E.default=".-cbwsdk-css-reset .-cbwsdk-connect-content{height:430px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-connect-content.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-header{display:flex;align-items:center;justify-content:space-between;margin:0 0 30px}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading{font-style:normal;font-weight:500;font-size:28px;line-height:36px;margin:0}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-layout{display:flex;flex-direction:row}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-left{margin-right:30px;display:flex;flex-direction:column;justify-content:space-between}.-cbwsdk-css-reset .-cbwsdk-connect-content-column-right{flex:25%;margin-right:34px}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-wrapper{width:220px;height:220px;border-radius:12px;display:flex;justify-content:center;align-items:center;background:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light{background-color:rgba(255,255,255,.95)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.light>p{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark{background-color:rgba(10,11,13,.9)}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting.dark>p{color:#fff}.-cbwsdk-css-reset .-cbwsdk-connect-content-qr-connecting>p{font-size:12px;font-weight:bold;margin-top:16px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app{border-radius:8px;font-size:14px;line-height:20px;padding:12px;width:339px}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.light{background:#eef0f3;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-connect-content-update-app.dark{background:#1e2025;color:#8a919e}.-cbwsdk-css-reset .-cbwsdk-cancel-button{-webkit-appearance:none;border:none;background:none;cursor:pointer;padding:0;margin:0}.-cbwsdk-css-reset .-cbwsdk-cancel-button-x{position:relative;display:block;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-wallet-steps{padding:0 0 0 16px;margin:0;width:100%;list-style:decimal}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item{list-style-type:decimal;display:list-item;font-style:normal;font-weight:400;font-size:16px;line-height:24px;margin-top:20px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-item-wrapper{display:flex;align-items:center}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-pad-left{margin-left:6px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon{display:flex;border-radius:50%;height:24px;width:24px}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.light{background:#0052ff}.-cbwsdk-css-reset .-cbwsdk-wallet-steps-icon.dark{background:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item{align-items:center;display:flex;flex-direction:row;padding:16px 24px;gap:12px;cursor:pointer;border-radius:100px;font-weight:600}.-cbwsdk-css-reset .-cbwsdk-connect-item.light{background:#f5f8ff;color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-connect-item.dark{background:#001033;color:#588af5}.-cbwsdk-css-reset .-cbwsdk-connect-item-copy-wrapper{margin:0 4px 0 8px}.-cbwsdk-css-reset .-cbwsdk-connect-item-title{margin:0 0 0;font-size:16px;line-height:24px;font-weight:500}.-cbwsdk-css-reset .-cbwsdk-connect-item-description{font-weight:400;font-size:14px;line-height:20px;margin:0}";var AO=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.CoinbaseWalletSteps=Pu.ConnectContent=void 0;const Oc=AO(Nf),Pt=Kr,soe=Re,ooe=eh,aoe=s1,coe=o1,loe=a1,uoe=c1,hoe=l1,doe=AO($E),Iw={title:"Coinbase Wallet app",description:"Connect with your self-custody wallet",steps:SO},foe=n=>n==="light"?"#FFFFFF":"#0A0B0D";function poe(n){const{theme:e}=n,t=(0,soe.createQrUrl)(n.sessionId,n.sessionSecret,n.linkAPIUrl,n.isParentConnection,n.version,n.chainId),r=Iw.steps;return(0,Pt.h)("div",{"data-testid":"connect-content",className:(0,Oc.default)("-cbwsdk-connect-content",e)},(0,Pt.h)("style",null,doe.default),(0,Pt.h)("div",{className:"-cbwsdk-connect-content-header"},(0,Pt.h)("h2",{className:(0,Oc.default)("-cbwsdk-connect-content-heading",e)},"Scan to connect with our mobile app"),n.onCancel&&(0,Pt.h)("button",{type:"button",className:"-cbwsdk-cancel-button",onClick:n.onCancel},(0,Pt.h)(aoe.CloseIcon,{fill:e==="light"?"#0A0B0D":"#FFFFFF"}))),(0,Pt.h)("div",{className:"-cbwsdk-connect-content-layout"},(0,Pt.h)("div",{className:"-cbwsdk-connect-content-column-left"},(0,Pt.h)(goe,{title:Iw.title,description:Iw.description,theme:e})),(0,Pt.h)("div",{className:"-cbwsdk-connect-content-column-right"},(0,Pt.h)("div",{className:"-cbwsdk-connect-content-qr-wrapper"},(0,Pt.h)(uoe.QRCode,{content:t,width:200,height:200,fgColor:"#000",bgColor:"transparent"}),(0,Pt.h)("input",{type:"hidden",name:"cbw-cbwsdk-version",value:ooe.LIB_VERSION}),(0,Pt.h)("input",{type:"hidden",value:t})),(0,Pt.h)(r,{theme:e}),!n.isConnected&&(0,Pt.h)("div",{"data-testid":"connecting-spinner",className:(0,Oc.default)("-cbwsdk-connect-content-qr-connecting",e)},(0,Pt.h)(hoe.Spinner,{size:36,color:e==="dark"?"#FFF":"#000"}),(0,Pt.h)("p",null,"Connecting...")))))}Pu.ConnectContent=poe;function goe({title:n,description:e,theme:t}){return(0,Pt.h)("div",{className:(0,Oc.default)("-cbwsdk-connect-item",t)},(0,Pt.h)("div",null,(0,Pt.h)(coe.CoinbaseWalletRound,null)),(0,Pt.h)("div",{className:"-cbwsdk-connect-item-copy-wrapper"},(0,Pt.h)("h3",{className:"-cbwsdk-connect-item-title"},n),(0,Pt.h)("p",{className:"-cbwsdk-connect-item-description"},e)))}function SO({theme:n}){return(0,Pt.h)("ol",{className:"-cbwsdk-wallet-steps"},(0,Pt.h)("li",{className:(0,Oc.default)("-cbwsdk-wallet-steps-item",n)},(0,Pt.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},"Open Coinbase Wallet app")),(0,Pt.h)("li",{className:(0,Oc.default)("-cbwsdk-wallet-steps-item",n)},(0,Pt.h)("div",{className:"-cbwsdk-wallet-steps-item-wrapper"},(0,Pt.h)("span",null,"Tap ",(0,Pt.h)("strong",null,"Scan")," "),(0,Pt.h)("span",{className:(0,Oc.default)("-cbwsdk-wallet-steps-pad-left","-cbwsdk-wallet-steps-icon",n)},(0,Pt.h)(loe.QRCodeIcon,{fill:foe(n)})))))}Pu.CoinbaseWalletSteps=SO;var u1={},h1={};Object.defineProperty(h1,"__esModule",{value:!0});h1.ArrowLeftIcon=void 0;const pT=Kr;function moe(n){return(0,pT.h)("svg",Object.assign({width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},n),(0,pT.h)("path",{d:"M8.60675 0.155884L7.37816 1.28209L12.7723 7.16662H0V8.83328H12.6548L6.82149 14.6666L8 15.8451L15.8201 8.02501L8.60675 0.155884Z"}))}h1.ArrowLeftIcon=moe;var d1={};Object.defineProperty(d1,"__esModule",{value:!0});d1.LaptopIcon=void 0;const Aw=Kr;function yoe(n){return(0,Aw.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},n),(0,Aw.h)("path",{d:"M1.8001 2.2002H12.2001V9.40019H1.8001V2.2002ZM3.4001 3.8002V7.80019H10.6001V3.8002H3.4001Z"}),(0,Aw.h)("path",{d:"M13.4001 10.2002H0.600098C0.600098 11.0838 1.31644 11.8002 2.2001 11.8002H11.8001C12.6838 11.8002 13.4001 11.0838 13.4001 10.2002Z"}))}d1.LaptopIcon=yoe;var f1={};Object.defineProperty(f1,"__esModule",{value:!0});f1.SafeIcon=void 0;const gT=Kr;function woe(n){return(0,gT.h)("svg",Object.assign({width:"14",height:"14",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},n),(0,gT.h)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0.600098 0.600098V11.8001H13.4001V0.600098H0.600098ZM7.0001 9.2001C5.3441 9.2001 4.0001 7.8561 4.0001 6.2001C4.0001 4.5441 5.3441 3.2001 7.0001 3.2001C8.6561 3.2001 10.0001 4.5441 10.0001 6.2001C10.0001 7.8561 8.6561 9.2001 7.0001 9.2001ZM0.600098 12.6001H3.8001V13.4001H0.600098V12.6001ZM10.2001 12.6001H13.4001V13.4001H10.2001V12.6001ZM8.8001 6.2001C8.8001 7.19421 7.99421 8.0001 7.0001 8.0001C6.00598 8.0001 5.2001 7.19421 5.2001 6.2001C5.2001 5.20598 6.00598 4.4001 7.0001 4.4001C7.99421 4.4001 8.8001 5.20598 8.8001 6.2001Z"}))}f1.SafeIcon=woe;var VE={};Object.defineProperty(VE,"__esModule",{value:!0});VE.default=".-cbwsdk-css-reset .-cbwsdk-try-extension{display:flex;margin-top:12px;height:202px;width:700px;border-radius:12px;padding:30px}.-cbwsdk-css-reset .-cbwsdk-try-extension.light{background:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension.dark{background:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-column-half{flex:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading{font-style:normal;font-weight:500;font-size:25px;line-height:32px;margin:0;max-width:204px}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.light{color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-try-extension-heading.dark{color:#fff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta{appearance:none;border:none;background:none;color:#0052ff;cursor:pointer;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.light{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta.dark{color:#588af5}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-wrapper{display:flex;align-items:center;margin-top:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-cta-icon{display:block;margin-left:4px;height:14px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list{display:flex;flex-direction:column;justify-content:center;align-items:center;margin:0;padding:0;list-style:none;height:100%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item{display:flex;align-items:center;flex-flow:nowrap;margin-top:24px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item:first-of-type{margin-top:0}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon-wrapper{display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon{display:flex;height:32px;width:32px;border-radius:50%}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon svg{margin:auto;display:block}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.light{background:#eef0f3}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-icon.dark{background:#1e2025}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy{display:block;font-weight:400;font-size:14px;line-height:20px;padding-left:12px}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.light{color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-try-extension-list-item-copy.dark{color:#8a919e}";var TO=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(u1,"__esModule",{value:!0});u1.TryExtensionContent=void 0;const nc=TO(Nf),kn=Kr,Sw=H0,_oe=h1,voe=d1,boe=f1,Eoe=TO(VE);function Ioe({theme:n}){const[e,t]=(0,Sw.useState)(!1),r=(0,Sw.useCallback)(()=>{window.open("https://api.wallet.coinbase.com/rpc/v2/desktop/chrome","_blank")},[]),i=(0,Sw.useCallback)(()=>{e?window.location.reload():(r(),t(!0))},[r,e]);return(0,kn.h)("div",{class:(0,nc.default)("-cbwsdk-try-extension",n)},(0,kn.h)("style",null,Eoe.default),(0,kn.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,kn.h)("h3",{class:(0,nc.default)("-cbwsdk-try-extension-heading",n)},"Or try the Coinbase Wallet browser extension"),(0,kn.h)("div",{class:"-cbwsdk-try-extension-cta-wrapper"},(0,kn.h)("button",{class:(0,nc.default)("-cbwsdk-try-extension-cta",n),onClick:i},e?"Refresh":"Install"),(0,kn.h)("div",null,!e&&(0,kn.h)(_oe.ArrowLeftIcon,{class:"-cbwsdk-try-extension-cta-icon",fill:n==="light"?"#0052FF":"#588AF5"})))),(0,kn.h)("div",{class:"-cbwsdk-try-extension-column-half"},(0,kn.h)("ul",{class:"-cbwsdk-try-extension-list"},(0,kn.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,kn.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,kn.h)("span",{class:(0,nc.default)("-cbwsdk-try-extension-list-item-icon",n)},(0,kn.h)(voe.LaptopIcon,{fill:n==="light"?"#0A0B0D":"#FFFFFF"}))),(0,kn.h)("div",{class:(0,nc.default)("-cbwsdk-try-extension-list-item-copy",n)},"Connect with dapps with just one click on your desktop browser")),(0,kn.h)("li",{class:"-cbwsdk-try-extension-list-item"},(0,kn.h)("div",{class:"-cbwsdk-try-extension-list-item-icon-wrapper"},(0,kn.h)("span",{class:(0,nc.default)("-cbwsdk-try-extension-list-item-icon",n)},(0,kn.h)(boe.SafeIcon,{fill:n==="light"?"#0A0B0D":"#FFFFFF"}))),(0,kn.h)("div",{class:(0,nc.default)("-cbwsdk-try-extension-list-item-copy",n)},"Add an additional layer of security by using a supported Ledger hardware wallet")))))}u1.TryExtensionContent=Ioe;var FE={};Object.defineProperty(FE,"__esModule",{value:!0});FE.default=".-cbwsdk-css-reset .-cbwsdk-connect-dialog{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop{z-index:2147483647;position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.light{background-color:rgba(0,0,0,.5)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop.dark{background-color:rgba(50,53,61,.4)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box{display:flex;position:relative;flex-direction:column;transform:scale(1);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-box-hidden{opacity:0;transform:scale(0.85)}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container{display:block}.-cbwsdk-css-reset .-cbwsdk-connect-dialog-container-hidden{display:none}";var RO=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(i1,"__esModule",{value:!0});i1.ConnectDialog=void 0;const Tw=RO(Nf),rc=Kr,Rw=H0,Aoe=Pu,Soe=u1,Toe=RO(FE),Roe=n=>{const{isOpen:e,darkMode:t}=n,[r,i]=(0,Rw.useState)(!e),[s,o]=(0,Rw.useState)(!e);(0,Rw.useEffect)(()=>{const l=[window.setTimeout(()=>{o(!e)},10)];return e?i(!1):l.push(window.setTimeout(()=>{i(!0)},360)),()=>{l.forEach(window.clearTimeout)}},[e]);const c=t?"dark":"light";return(0,rc.h)("div",{class:(0,Tw.default)("-cbwsdk-connect-dialog-container",r&&"-cbwsdk-connect-dialog-container-hidden")},(0,rc.h)("style",null,Toe.default),(0,rc.h)("div",{class:(0,Tw.default)("-cbwsdk-connect-dialog-backdrop",c,s&&"-cbwsdk-connect-dialog-backdrop-hidden")}),(0,rc.h)("div",{class:"-cbwsdk-connect-dialog"},(0,rc.h)("div",{class:(0,Tw.default)("-cbwsdk-connect-dialog-box",s&&"-cbwsdk-connect-dialog-box-hidden")},n.connectDisabled?null:(0,rc.h)(Aoe.ConnectContent,{theme:c,version:n.version,sessionId:n.sessionId,sessionSecret:n.sessionSecret,linkAPIUrl:n.linkAPIUrl,isConnected:n.isConnected,isParentConnection:n.isParentConnection,chainId:n.chainId,onCancel:n.onCancel}),(0,rc.h)(Soe.TryExtensionContent,{theme:c}))))};i1.ConnectDialog=Roe;Object.defineProperty(r1,"__esModule",{value:!0});r1.LinkFlow=void 0;const Cw=Kr,Coe=i1;class xoe{constructor(e){this.connected=!1,this.chainId=1,this.isOpen=!1,this.onCancel=null,this.root=null,this.connectDisabled=!1,this.darkMode=e.darkMode,this.version=e.version,this.sessionId=e.sessionId,this.sessionSecret=e.sessionSecret,this.linkAPIUrl=e.linkAPIUrl,this.isParentConnection=e.isParentConnection}attach(e){this.root=document.createElement("div"),this.root.className="-cbwsdk-link-flow-root",e.appendChild(this.root),this.render()}setConnected(e){this.connected!==e&&(this.connected=e,this.render())}setChainId(e){this.chainId!==e&&(this.chainId=e,this.render())}detach(){var e;this.root&&((0,Cw.render)(null,this.root),(e=this.root.parentElement)===null||e===void 0||e.removeChild(this.root))}setConnectDisabled(e){this.connectDisabled=e}open(e){this.isOpen=!0,this.onCancel=e.onCancel,this.render()}close(){this.isOpen=!1,this.onCancel=null,this.render()}render(){this.root&&(0,Cw.render)((0,Cw.h)(Coe.ConnectDialog,{darkMode:this.darkMode,version:this.version,sessionId:this.sessionId,sessionSecret:this.sessionSecret,linkAPIUrl:this.linkAPIUrl,isOpen:this.isOpen,isConnected:this.connected,isParentConnection:this.isParentConnection,chainId:this.chainId,onCancel:this.onCancel,connectDisabled:this.connectDisabled}),this.root)}}r1.LinkFlow=xoe;var BE={},jE={};Object.defineProperty(jE,"__esModule",{value:!0});jE.default=".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}";(function(n){var e=ct&&ct.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(n,"__esModule",{value:!0}),n.SnackbarInstance=n.SnackbarContainer=n.Snackbar=void 0;const t=e(Nf),r=Kr,i=H0,s=e(jE),o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",c="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class l{constructor(y){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=y.darkMode}attach(y){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",y.appendChild(this.root),this.render()}presentItem(y){const w=this.nextItemKey++;return this.items.set(w,y),this.render(),()=>{this.items.delete(w),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&(0,r.render)((0,r.h)("div",null,(0,r.h)(n.SnackbarContainer,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([y,w])=>(0,r.h)(n.SnackbarInstance,Object.assign({},w,{key:y}))))),this.root)}}n.Snackbar=l;const h=m=>(0,r.h)("div",{class:(0,t.default)("-cbwsdk-snackbar-container")},(0,r.h)("style",null,s.default),(0,r.h)("div",{class:"-cbwsdk-snackbar"},m.children));n.SnackbarContainer=h;const f=({autoExpand:m,message:y,menuItems:w})=>{const[I,T]=(0,i.useState)(!0),[A,L]=(0,i.useState)(m??!1);(0,i.useEffect)(()=>{const C=[window.setTimeout(()=>{T(!1)},1),window.setTimeout(()=>{L(!0)},1e4)];return()=>{C.forEach(window.clearTimeout)}});const D=()=>{L(!A)};return(0,r.h)("div",{class:(0,t.default)("-cbwsdk-snackbar-instance",I&&"-cbwsdk-snackbar-instance-hidden",A&&"-cbwsdk-snackbar-instance-expanded")},(0,r.h)("div",{class:"-cbwsdk-snackbar-instance-header",onClick:D},(0,r.h)("img",{src:o,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",(0,r.h)("div",{class:"-cbwsdk-snackbar-instance-header-message"},y),(0,r.h)("div",{class:"-gear-container"},!A&&(0,r.h)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),(0,r.h)("img",{src:c,class:"-gear-icon",title:"Expand"}))),w&&w.length>0&&(0,r.h)("div",{class:"-cbwsdk-snackbar-instance-menu"},w.map((C,k)=>(0,r.h)("div",{class:(0,t.default)("-cbwsdk-snackbar-instance-menu-item",C.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:C.onClick,key:k},(0,r.h)("svg",{width:C.svgWidth,height:C.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("path",{"fill-rule":C.defaultFillRule,"clip-rule":C.defaultClipRule,d:C.path,fill:"#AAAAAA"})),(0,r.h)("span",{class:(0,t.default)("-cbwsdk-snackbar-instance-menu-item-info",C.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},C.info)))))};n.SnackbarInstance=f})(BE);Object.defineProperty(Of,"__esModule",{value:!0});Of.WalletLinkRelayUI=void 0;const Poe=kf,Ooe=r1,koe=BE;class Noe{constructor(e){this.standalone=null,this.attached=!1,this.snackbar=new koe.Snackbar({darkMode:e.darkMode}),this.linkFlow=new Ooe.LinkFlow({darkMode:e.darkMode,version:e.version,sessionId:e.session.id,sessionSecret:e.session.secret,linkAPIUrl:e.linkAPIUrl,isParentConnection:!1})}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const e=document.documentElement,t=document.createElement("div");t.className="-cbwsdk-css-reset",e.appendChild(t),this.linkFlow.attach(t),this.snackbar.attach(t),this.attached=!0,(0,Poe.injectCssReset)()}setConnected(e){this.linkFlow.setConnected(e)}setChainId(e){this.linkFlow.setChainId(e)}setConnectDisabled(e){this.linkFlow.setConnectDisabled(e)}addEthereumChain(){}watchAsset(){}switchEthereumChain(){}requestEthereumAccounts(e){this.linkFlow.open({onCancel:e.onCancel})}hideRequestEthereumAccounts(){this.linkFlow.close()}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}showConnecting(e){let t;return e.isUnlinkedErrorState?t={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]}:t={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:e.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:e.onResetConnection}]},this.snackbar.presentItem(t)}reloadUI(){document.location.reload()}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}setStandalone(e){this.standalone=e}isStandalone(){var e;return(e=this.standalone)!==null&&e!==void 0?e:!1}}Of.WalletLinkRelayUI=Noe;Object.defineProperty(Pf,"__esModule",{value:!0});Pf.WalletLinkRelay=void 0;const Cl=Sf,Doe=Vn,an=Re,ic=th,mT=Mi,zo=nh,Moe=e1,sc=Xu,Loe=Of;class uo extends mT.RelayAbstract{constructor(e){var t;super(),this.accountsCallback=null,this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.chainCallback=null,this.dappDefaultChain=1,this.appName="",this.appLogoUrl=null,this.linkedUpdated=o=>{var c;this.isLinked=o;const l=this.storage.getItem(mT.LOCAL_STORAGE_ADDRESSES_KEY);if(o&&(this.session.linked=o),this.isUnlinkedErrorState=!1,l){const h=l.split(" "),f=this.storage.getItem("IsStandaloneSigning")==="true";if(h[0]!==""&&!o&&this.session.linked&&!f){this.isUnlinkedErrorState=!0;const m=this.getSessionIdHash();(c=this.diagnostic)===null||c===void 0||c.log(ic.EVENTS.UNLINKED_ERROR_STATE,{sessionIdHash:m})}}},this.metadataUpdated=(o,c)=>{this.storage.setItem(o,c)},this.chainUpdated=(o,c)=>{this.chainCallbackParams.chainId===o&&this.chainCallbackParams.jsonRpcUrl===c||(this.chainCallbackParams={chainId:o,jsonRpcUrl:c},this.chainCallback&&this.chainCallback(o,c))},this.accountUpdated=o=>{this.accountsCallback&&this.accountsCallback([o]),uo.accountRequestCallbackIds.size>0&&(Array.from(uo.accountRequestCallbackIds.values()).forEach(c=>{const l={type:"WEB3_RESPONSE",id:c,response:{method:"requestEthereumAccounts",result:[o]}};this.invokeCallback(Object.assign(Object.assign({},l),{id:c}))}),uo.accountRequestCallbackIds.clear())},this.connectedUpdated=o=>{this.ui.setConnected(o)},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=e.linkAPIUrl,this.storage=e.storage,this.options=e;const{session:r,ui:i,connection:s}=this.subscribe();this._session=r,this.connection=s,this.relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this._reloadOnDisconnect=(t=e.reloadOnDisconnect)!==null&&t!==void 0?t:!0,this.ui=i}subscribe(){const e=zo.Session.load(this.storage)||new zo.Session(this.storage).save(),{linkAPIUrl:t,diagnostic:r}=this,i=new Moe.WalletLinkConnection({session:e,linkAPIUrl:t,diagnostic:r,listener:this}),{version:s,darkMode:o}=this.options,c=this.options.uiConstructor({linkAPIUrl:t,version:s,darkMode:o,session:e});return i.connect(),{session:e,ui:c,connection:i}}attachUI(){this.ui.attach()}resetAndReload(){Promise.race([this.connection.setSessionMetadata("__destroyed","1"),new Promise(e=>setTimeout(()=>e(null),1e3))]).then(()=>{var e,t;const r=this.ui.isStandalone();(e=this.diagnostic)===null||e===void 0||e.log(ic.EVENTS.SESSION_STATE_CHANGE,{method:"relay::resetAndReload",sessionMetadataChange:"__destroyed, 1",sessionIdHash:this.getSessionIdHash()}),this.connection.destroy();const i=zo.Session.load(this.storage);if(i?.id===this._session.id?this.storage.clear():i&&((t=this.diagnostic)===null||t===void 0||t.log(ic.EVENTS.SKIPPED_CLEARING_SESSION,{sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:zo.Session.hash(i.id)})),this._reloadOnDisconnect){this.ui.reloadUI();return}this.accountsCallback&&this.accountsCallback([],!0);const{session:s,ui:o,connection:c}=this.subscribe();this._session=s,this.connection=c,this.ui=o,r&&this.ui.setStandalone&&this.ui.setStandalone(!0),this.options.headlessMode||this.attachUI()}).catch(e=>{var t;(t=this.diagnostic)===null||t===void 0||t.log(ic.EVENTS.FAILURE,{method:"relay::resetAndReload",message:`failed to reset and reload with ${e}`,sessionIdHash:this.getSessionIdHash()})})}setAppInfo(e,t){this.appName=e,this.appLogoUrl=t}getStorageItem(e){return this.storage.getItem(e)}get session(){return this._session}setStorageItem(e,t){this.storage.setItem(e,t)}signEthereumMessage(e,t,r,i){return this.sendRequest({method:"signEthereumMessage",params:{message:(0,an.hexStringFromBuffer)(e,!0),address:t,addPrefix:r,typedDataJson:i||null}})}ethereumAddressFromSignedMessage(e,t,r){return this.sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:(0,an.hexStringFromBuffer)(e,!0),signature:(0,an.hexStringFromBuffer)(t,!0),addPrefix:r}})}signEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,an.bigIntStringFromBN)(e.weiValue),data:(0,an.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,an.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.gasPriceInWei?(0,an.bigIntStringFromBN)(e.gasPriceInWei):null,maxPriorityFeePerGas:e.gasPriceInWei?(0,an.bigIntStringFromBN)(e.gasPriceInWei):null,gasLimit:e.gasLimit?(0,an.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(e){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:e.fromAddress,toAddress:e.toAddress,weiValue:(0,an.bigIntStringFromBN)(e.weiValue),data:(0,an.hexStringFromBuffer)(e.data,!0),nonce:e.nonce,gasPriceInWei:e.gasPriceInWei?(0,an.bigIntStringFromBN)(e.gasPriceInWei):null,maxFeePerGas:e.maxFeePerGas?(0,an.bigIntStringFromBN)(e.maxFeePerGas):null,maxPriorityFeePerGas:e.maxPriorityFeePerGas?(0,an.bigIntStringFromBN)(e.maxPriorityFeePerGas):null,gasLimit:e.gasLimit?(0,an.bigIntStringFromBN)(e.gasLimit):null,chainId:e.chainId,shouldSubmit:!0}})}submitEthereumTransaction(e,t){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:(0,an.hexStringFromBuffer)(e,!0),chainId:t}})}scanQRCode(e){return this.sendRequest({method:"scanQRCode",params:{regExp:e}})}getQRCodeUrl(){return(0,an.createQrUrl)(this._session.id,this._session.secret,this.linkAPIUrl,!1,this.options.version,this.dappDefaultChain)}genericRequest(e,t){return this.sendRequest({method:"generic",params:{action:t,data:e}})}sendGenericMessage(e){return this.sendRequest(e)}sendRequest(e){let t=null;const r=(0,an.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,e.method,o),t?.()};return{promise:new Promise((o,c)=>{this.ui.isStandalone()||(t=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload})),this.relayEventManager.callbacks.set(r,l=>{if(t?.(),(0,sc.isErrorResponse)(l))return c(new Error(l.errorMessage));o(l)}),this.ui.isStandalone()?this.sendRequestStandalone(r,e):this.publishWeb3RequestEvent(r,e)}),cancel:i}}setConnectDisabled(e){this.ui.setConnectDisabled(e)}setAccountsCallback(e){this.accountsCallback=e}setChainCallback(e){this.chainCallback=e}setDappDefaultChainCallback(e){this.dappDefaultChain=e,this.ui instanceof Loe.WalletLinkRelayUI&&this.ui.setChainId(e)}publishWeb3RequestEvent(e,t){var r;const i={type:"WEB3_REQUEST",id:e,request:t},s=zo.Session.load(this.storage);(r=this.diagnostic)===null||r===void 0||r.log(ic.EVENTS.WEB3_REQUEST,{eventId:i.id,method:`relay::${t.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?zo.Session.hash(s.id):"",isSessionMismatched:(s?.id!==this._session.id).toString()}),this.publishEvent("Web3Request",i,!0).then(o=>{var c;(c=this.diagnostic)===null||c===void 0||c.log(ic.EVENTS.WEB3_REQUEST_PUBLISHED,{eventId:i.id,method:`relay::${t.method}`,sessionIdHash:this.getSessionIdHash(),storedSessionIdHash:s?zo.Session.hash(s.id):"",isSessionMismatched:(s?.id!==this._session.id).toString()})}).catch(o=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i.id,response:{method:t.method,errorMessage:o.message}})})}publishWeb3RequestCanceledEvent(e){const t={type:"WEB3_REQUEST_CANCELED",id:e};this.publishEvent("Web3RequestCanceled",t,!1).then()}publishEvent(e,t,r){return this.connection.publishEvent(e,t,r)}handleWeb3ResponseMessage(e){var t;const{response:r}=e;if((t=this.diagnostic)===null||t===void 0||t.log(ic.EVENTS.WEB3_RESPONSE,{eventId:e.id,method:`relay::${r.method}`,sessionIdHash:this.getSessionIdHash()}),r.method==="requestEthereumAccounts"){uo.accountRequestCallbackIds.forEach(i=>this.invokeCallback(Object.assign(Object.assign({},e),{id:i}))),uo.accountRequestCallbackIds.clear();return}this.invokeCallback(e)}handleErrorResponse(e,t,r,i){var s;const o=(s=r?.message)!==null&&s!==void 0?s:(0,Cl.getMessageFromCode)(i);this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:{method:t,errorMessage:o,errorCode:i}})}invokeCallback(e){const t=this.relayEventManager.callbacks.get(e.id);t&&(t(e.response),this.relayEventManager.callbacks.delete(e.id))}requestEthereumAccounts(){const e={method:"requestEthereumAccounts",params:{appName:this.appName,appLogoUrl:this.appLogoUrl||null}},t=(0,an.randomBytesHex)(8),r=s=>{this.publishWeb3RequestCanceledEvent(t),this.handleErrorResponse(t,e.method,s)};return{promise:new Promise((s,o)=>{if(this.relayEventManager.callbacks.set(t,c=>{if(this.ui.hideRequestEthereumAccounts(),(0,sc.isErrorResponse)(c))return o(new Error(c.errorMessage));s(c)}),this.ui.inlineAccountsResponse()){const c=l=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:t,response:{method:"requestEthereumAccounts",result:l}})};this.ui.requestEthereumAccounts({onCancel:r,onAccounts:c})}else{const c=Cl.standardErrors.provider.userRejectedRequest("User denied account authorization");this.ui.requestEthereumAccounts({onCancel:()=>r(c)})}uo.accountRequestCallbackIds.add(t),!this.ui.inlineAccountsResponse()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(t,e)}),cancel:r}}selectProvider(e){const t={method:"selectProvider",params:{providerOptions:e}},r=(0,an.randomBytesHex)(8),i=o=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,o)},s=new Promise((o,c)=>{this.relayEventManager.callbacks.set(r,f=>{if((0,sc.isErrorResponse)(f))return c(new Error(f.errorMessage));o(f)});const l=f=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r,response:{method:"selectProvider",result:Doe.ProviderType.Unselected}})},h=f=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:r,response:{method:"selectProvider",result:f}})};this.ui.selectProvider&&this.ui.selectProvider({onApprove:h,onCancel:l,providerOptions:e})});return{cancel:i,promise:s}}watchAsset(e,t,r,i,s,o){const c={method:"watchAsset",params:{type:e,options:{address:t,symbol:r,decimals:i,image:s},chainId:o}};let l=null;const h=(0,an.randomBytesHex)(8),f=y=>{this.publishWeb3RequestCanceledEvent(h),this.handleErrorResponse(h,c.method,y),l?.()};this.ui.inlineWatchAsset()||(l=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:f,onResetConnection:this.resetAndReload}));const m=new Promise((y,w)=>{this.relayEventManager.callbacks.set(h,A=>{if(l?.(),(0,sc.isErrorResponse)(A))return w(new Error(A.errorMessage));y(A)});const I=A=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:h,response:{method:"watchAsset",result:!1}})},T=()=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:h,response:{method:"watchAsset",result:!0}})};this.ui.inlineWatchAsset()&&this.ui.watchAsset({onApprove:T,onCancel:I,type:e,address:t,symbol:r,decimals:i,image:s,chainId:o}),!this.ui.inlineWatchAsset()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(h,c)});return{cancel:f,promise:m}}addEthereumChain(e,t,r,i,s,o){const c={method:"addEthereumChain",params:{chainId:e,rpcUrls:t,blockExplorerUrls:i,chainName:s,iconUrls:r,nativeCurrency:o}};let l=null;const h=(0,an.randomBytesHex)(8),f=y=>{this.publishWeb3RequestCanceledEvent(h),this.handleErrorResponse(h,c.method,y),l?.()};return this.ui.inlineAddEthereumChain(e)||(l=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:f,onResetConnection:this.resetAndReload})),{promise:new Promise((y,w)=>{this.relayEventManager.callbacks.set(h,A=>{if(l?.(),(0,sc.isErrorResponse)(A))return w(new Error(A.errorMessage));y(A)});const I=A=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:h,response:{method:"addEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},T=A=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:h,response:{method:"addEthereumChain",result:{isApproved:!0,rpcUrl:A}}})};this.ui.inlineAddEthereumChain(e)&&this.ui.addEthereumChain({onCancel:I,onApprove:T,chainId:c.params.chainId,rpcUrls:c.params.rpcUrls,blockExplorerUrls:c.params.blockExplorerUrls,chainName:c.params.chainName,iconUrls:c.params.iconUrls,nativeCurrency:c.params.nativeCurrency}),!this.ui.inlineAddEthereumChain(e)&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(h,c)}),cancel:f}}switchEthereumChain(e,t){const r={method:"switchEthereumChain",params:Object.assign({chainId:e},{address:t})},i=(0,an.randomBytesHex)(8),s=c=>{this.publishWeb3RequestCanceledEvent(i),this.handleErrorResponse(i,r.method,c)};return{promise:new Promise((c,l)=>{this.relayEventManager.callbacks.set(i,m=>{if((0,sc.isErrorResponse)(m)&&m.errorCode)return l(Cl.standardErrors.provider.custom({code:m.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if((0,sc.isErrorResponse)(m))return l(new Error(m.errorMessage));c(m)});const h=m=>{var y;if(m){const w=(y=(0,Cl.getErrorCode)(m))!==null&&y!==void 0?y:Cl.standardErrorCodes.provider.unsupportedChain;this.handleErrorResponse(i,"switchEthereumChain",m instanceof Error?m:Cl.standardErrors.provider.unsupportedChain(e),w)}else this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i,response:{method:"switchEthereumChain",result:{isApproved:!1,rpcUrl:""}}})},f=m=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:i,response:{method:"switchEthereumChain",result:{isApproved:!0,rpcUrl:m}}})};this.ui.switchEthereumChain({onCancel:h,onApprove:f,chainId:r.params.chainId,address:r.params.address}),!this.ui.inlineSwitchEthereumChain()&&!this.ui.isStandalone()&&this.publishWeb3RequestEvent(i,r)}),cancel:s}}inlineAddEthereumChain(e){return this.ui.inlineAddEthereumChain(e)}getSessionIdHash(){return zo.Session.hash(this._session.id)}sendRequestStandalone(e,t){const r=s=>{this.handleErrorResponse(e,t.method,s)},i=s=>{this.handleWeb3ResponseMessage({type:"WEB3_RESPONSE",id:e,response:s})};switch(t.method){case"signEthereumMessage":this.ui.signEthereumMessage({request:t,onSuccess:i,onCancel:r});break;case"signEthereumTransaction":this.ui.signEthereumTransaction({request:t,onSuccess:i,onCancel:r});break;case"submitEthereumTransaction":this.ui.submitEthereumTransaction({request:t,onSuccess:i,onCancel:r});break;case"ethereumAddressFromSignedMessage":this.ui.ethereumAddressFromSignedMessage({request:t,onSuccess:i});break;default:r();break}}}Pf.WalletLinkRelay=uo;uo.accountRequestCallbackIds=new Set;var Df={},p1={},CO={};(function(n){var e=ct&&ct.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,c)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),t=ct&&ct.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(n,"__esModule",{value:!0}),t(BE,n)})(CO);var qE={};Object.defineProperty(qE,"__esModule",{value:!0});qE.default=".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}";var xO=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(p1,"__esModule",{value:!0});p1.RedirectDialog=void 0;const Uoe=xO(Nf),bs=Kr,$oe=kf,Voe=CO,Foe=xO(qE);class Boe{constructor(){this.root=null}attach(){const e=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",e.appendChild(this.root),(0,$oe.injectCssReset)()}present(e){this.render(e)}clear(){this.render(null)}render(e){this.root&&((0,bs.render)(null,this.root),e&&(0,bs.render)((0,bs.h)(joe,Object.assign({},e,{onDismiss:()=>{this.clear()}})),this.root))}}p1.RedirectDialog=Boe;const joe=({title:n,buttonText:e,darkMode:t,onButtonClick:r,onDismiss:i})=>{const s=t?"dark":"light";return(0,bs.h)(Voe.SnackbarContainer,{darkMode:t},(0,bs.h)("div",{class:"-cbwsdk-redirect-dialog"},(0,bs.h)("style",null,Foe.default),(0,bs.h)("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),(0,bs.h)("div",{class:(0,Uoe.default)("-cbwsdk-redirect-dialog-box",s)},(0,bs.h)("p",null,n),(0,bs.h)("button",{onClick:r},e))))};Object.defineProperty(Df,"__esModule",{value:!0});Df.MobileRelayUI=void 0;const qoe=p1;class Hoe{constructor(e){this.attached=!1,this.darkMode=!1,this.redirectDialog=new qoe.RedirectDialog,this.darkMode=e.darkMode}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}setConnected(e){}redirectToCoinbaseWallet(e){const t=new URL("https://go.cb-w.com/walletlink");t.searchParams.append("redirect_url",window.location.href),e&&t.searchParams.append("wl_url",e);const r=document.createElement("a");r.target="cbw-opener",r.href=t.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(e){this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",darkMode:this.darkMode,onButtonClick:()=>{this.redirectToCoinbaseWallet(e)}}),setTimeout(()=>{this.redirectToCoinbaseWallet(e)},99)}showConnecting(e){return()=>{this.redirectDialog.clear()}}hideRequestEthereumAccounts(){this.redirectDialog.clear()}requestEthereumAccounts(){}addEthereumChain(){}watchAsset(){}selectProvider(){}switchEthereumChain(){}signEthereumMessage(){}signEthereumTransaction(){}submitEthereumTransaction(){}ethereumAddressFromSignedMessage(){}reloadUI(){}setStandalone(){}setConnectDisabled(){}inlineAccountsResponse(){return!1}inlineAddEthereumChain(){return!1}inlineWatchAsset(){return!1}inlineSwitchEthereumChain(){return!1}isStandalone(){return!1}}Df.MobileRelayUI=Hoe;Object.defineProperty(xf,"__esModule",{value:!0});xf.MobileRelay=void 0;const Woe=Re,zoe=Pf,Goe=Df;class Koe extends zoe.WalletLinkRelay{constructor(e){var t;super(e),this._enableMobileWalletLink=(t=e.enableMobileWalletLink)!==null&&t!==void 0?t:!1}requestEthereumAccounts(){return this._enableMobileWalletLink?super.requestEthereumAccounts():{promise:new Promise(()=>{const e=(0,Woe.getLocation)();e.href=`https://go.cb-w.com/dapp?cb_url=${encodeURIComponent(e.href)}`}),cancel:()=>{}}}publishWeb3RequestEvent(e,t){if(super.publishWeb3RequestEvent(e,t),!(this._enableMobileWalletLink&&this.ui instanceof Goe.MobileRelayUI))return;let r=!1;switch(t.method){case"requestEthereumAccounts":case"connectAndSignIn":r=!0,this.ui.openCoinbaseWalletDeeplink(this.getQRCodeUrl());break;case"switchEthereumChain":return;default:r=!0,this.ui.openCoinbaseWalletDeeplink();break}r&&window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0})}handleWeb3ResponseMessage(e){super.handleWeb3ResponseMessage(e)}connectAndSignIn(e){if(!this._enableMobileWalletLink)throw new Error("connectAndSignIn is supported only when enableMobileWalletLink is on");return this.sendRequest({method:"connectAndSignIn",params:{appName:this.appName,appLogoUrl:this.appLogoUrl,domain:window.location.hostname,aud:window.location.href,version:"1",type:"eip4361",nonce:e.nonce,iat:new Date().toISOString(),chainId:`eip155:${this.dappDefaultChain}`,statement:e.statement,resources:e.resources}})}}xf.MobileRelay=Koe;const Qoe=sU,Joe=z0;function PO(n){return Buffer.allocUnsafe(n).fill(0)}function OO(n,e,t){const r=PO(e);return n=g1(n),t?n.length<e?(n.copy(r),r):n.slice(0,e):n.length<e?(n.copy(r,e-n.length),r):n.slice(-e)}function Yoe(n,e){return OO(n,e,!0)}function g1(n){if(!Buffer.isBuffer(n))if(Array.isArray(n))n=Buffer.from(n);else if(typeof n=="string")kO(n)?n=Buffer.from(eae(NO(n)),"hex"):n=Buffer.from(n);else if(typeof n=="number")n=intToBuffer(n);else if(n==null)n=Buffer.allocUnsafe(0);else if(Joe.isBN(n))n=n.toArrayLike(Buffer);else if(n.toArray)n=Buffer.from(n.toArray());else throw new Error("invalid type");return n}function Zoe(n){return n=g1(n),"0x"+n.toString("hex")}function Xoe(n,e){return n=g1(n),e||(e=256),Qoe("keccak"+e).update(n).digest()}function eae(n){return n.length%2?"0"+n:n}function kO(n){return typeof n=="string"&&n.match(/^0x[0-9A-Fa-f]*$/)}function NO(n){return typeof n=="string"&&n.startsWith("0x")?n.slice(2):n}var DO={zeros:PO,setLength:OO,setLengthRight:Yoe,isHexString:kO,stripHexPrefix:NO,toBuffer:g1,bufferToHex:Zoe,keccak:Xoe};const Fc=DO,Sc=z0;function MO(n){return n.startsWith("int[")?"int256"+n.slice(3):n==="int"?"int256":n.startsWith("uint[")?"uint256"+n.slice(4):n==="uint"?"uint256":n.startsWith("fixed[")?"fixed128x128"+n.slice(5):n==="fixed"?"fixed128x128":n.startsWith("ufixed[")?"ufixed128x128"+n.slice(6):n==="ufixed"?"ufixed128x128":n}function su(n){return parseInt(/^\D+(\d+)$/.exec(n)[1],10)}function yT(n){var e=/^\D+(\d+)x(\d+)$/.exec(n);return[parseInt(e[1],10),parseInt(e[2],10)]}function LO(n){var e=n.match(/(.*)\[(.*?)\]$/);return e?e[2]===""?"dynamic":parseInt(e[2],10):null}function gc(n){var e=typeof n;if(e==="string")return Fc.isHexString(n)?new Sc(Fc.stripHexPrefix(n),16):new Sc(n,10);if(e==="number")return new Sc(n);if(n.toArray)return n;throw new Error("Argument is not a number")}function vs(n,e){var t,r,i,s;if(n==="address")return vs("uint160",gc(e));if(n==="bool")return vs("uint8",e?1:0);if(n==="string")return vs("bytes",new Buffer(e,"utf8"));if(nae(n)){if(typeof e.length>"u")throw new Error("Not an array?");if(t=LO(n),t!=="dynamic"&&t!==0&&e.length>t)throw new Error("Elements exceed array size: "+t);i=[],n=n.slice(0,n.lastIndexOf("[")),typeof e=="string"&&(e=JSON.parse(e));for(s in e)i.push(vs(n,e[s]));if(t==="dynamic"){var o=vs("uint256",e.length);i.unshift(o)}return Buffer.concat(i)}else{if(n==="bytes")return e=new Buffer(e),i=Buffer.concat([vs("uint256",e.length),e]),e.length%32!==0&&(i=Buffer.concat([i,Fc.zeros(32-e.length%32)])),i;if(n.startsWith("bytes")){if(t=su(n),t<1||t>32)throw new Error("Invalid bytes<N> width: "+t);return Fc.setLengthRight(e,32)}else if(n.startsWith("uint")){if(t=su(n),t%8||t<8||t>256)throw new Error("Invalid uint<N> width: "+t);if(r=gc(e),r.bitLength()>t)throw new Error("Supplied uint exceeds width: "+t+" vs "+r.bitLength());if(r<0)throw new Error("Supplied uint is negative");return r.toArrayLike(Buffer,"be",32)}else if(n.startsWith("int")){if(t=su(n),t%8||t<8||t>256)throw new Error("Invalid int<N> width: "+t);if(r=gc(e),r.bitLength()>t)throw new Error("Supplied int exceeds width: "+t+" vs "+r.bitLength());return r.toTwos(256).toArrayLike(Buffer,"be",32)}else if(n.startsWith("ufixed")){if(t=yT(n),r=gc(e),r<0)throw new Error("Supplied ufixed is negative");return vs("uint256",r.mul(new Sc(2).pow(new Sc(t[1]))))}else if(n.startsWith("fixed"))return t=yT(n),vs("int256",gc(e).mul(new Sc(2).pow(new Sc(t[1]))))}throw new Error("Unsupported or invalid type: "+n)}function tae(n){return n==="string"||n==="bytes"||LO(n)==="dynamic"}function nae(n){return n.lastIndexOf("]")===n.length-1}function rae(n,e){var t=[],r=[],i=32*n.length;for(var s in n){var o=MO(n[s]),c=e[s],l=vs(o,c);tae(o)?(t.push(vs("uint256",i)),r.push(l),i+=l.length):t.push(l)}return Buffer.concat(t.concat(r))}function UO(n,e){if(n.length!==e.length)throw new Error("Number of types are not matching the values");for(var t,r,i=[],s=0;s<n.length;s++){var o=MO(n[s]),c=e[s];if(o==="bytes")i.push(c);else if(o==="string")i.push(new Buffer(c,"utf8"));else if(o==="bool")i.push(new Buffer(c?"01":"00","hex"));else if(o==="address")i.push(Fc.setLength(c,20));else if(o.startsWith("bytes")){if(t=su(o),t<1||t>32)throw new Error("Invalid bytes<N> width: "+t);i.push(Fc.setLengthRight(c,t))}else if(o.startsWith("uint")){if(t=su(o),t%8||t<8||t>256)throw new Error("Invalid uint<N> width: "+t);if(r=gc(c),r.bitLength()>t)throw new Error("Supplied uint exceeds width: "+t+" vs "+r.bitLength());i.push(r.toArrayLike(Buffer,"be",t/8))}else if(o.startsWith("int")){if(t=su(o),t%8||t<8||t>256)throw new Error("Invalid int<N> width: "+t);if(r=gc(c),r.bitLength()>t)throw new Error("Supplied int exceeds width: "+t+" vs "+r.bitLength());i.push(r.toTwos(t).toArrayLike(Buffer,"be",t/8))}else throw new Error("Unsupported or invalid type: "+o)}return Buffer.concat(i)}function iae(n,e){return Fc.keccak(UO(n,e))}var sae={rawEncode:rae,solidityPack:UO,soliditySHA3:iae};const zi=DO,Ad=sae,$O={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},xw={encodeData(n,e,t,r=!0){const i=["bytes32"],s=[this.hashType(n,t)];if(r){const o=(c,l,h)=>{if(t[l]!==void 0)return["bytes32",h==null?"0x0000000000000000000000000000000000000000000000000000000000000000":zi.keccak(this.encodeData(l,h,t,r))];if(h===void 0)throw new Error(`missing value for field ${c} of type ${l}`);if(l==="bytes")return["bytes32",zi.keccak(h)];if(l==="string")return typeof h=="string"&&(h=Buffer.from(h,"utf8")),["bytes32",zi.keccak(h)];if(l.lastIndexOf("]")===l.length-1){const f=l.slice(0,l.lastIndexOf("[")),m=h.map(y=>o(c,f,y));return["bytes32",zi.keccak(Ad.rawEncode(m.map(([y])=>y),m.map(([,y])=>y)))]}return[l,h]};for(const c of t[n]){const[l,h]=o(c.name,c.type,e[c.name]);i.push(l),s.push(h)}}else for(const o of t[n]){let c=e[o.name];if(c!==void 0)if(o.type==="bytes")i.push("bytes32"),c=zi.keccak(c),s.push(c);else if(o.type==="string")i.push("bytes32"),typeof c=="string"&&(c=Buffer.from(c,"utf8")),c=zi.keccak(c),s.push(c);else if(t[o.type]!==void 0)i.push("bytes32"),c=zi.keccak(this.encodeData(o.type,c,t,r)),s.push(c);else{if(o.type.lastIndexOf("]")===o.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(o.type),s.push(c)}}return Ad.rawEncode(i,s)},encodeType(n,e){let t="",r=this.findTypeDependencies(n,e).filter(i=>i!==n);r=[n].concat(r.sort());for(const i of r){if(!e[i])throw new Error("No type definition specified: "+i);t+=i+"("+e[i].map(({name:o,type:c})=>c+" "+o).join(",")+")"}return t},findTypeDependencies(n,e,t=[]){if(n=n.match(/^\w*/)[0],t.includes(n)||e[n]===void 0)return t;t.push(n);for(const r of e[n])for(const i of this.findTypeDependencies(r.type,e,t))!t.includes(i)&&t.push(i);return t},hashStruct(n,e,t,r=!0){return zi.keccak(this.encodeData(n,e,t,r))},hashType(n,e){return zi.keccak(this.encodeType(n,e))},sanitizeData(n){const e={};for(const t in $O.properties)n[t]&&(e[t]=n[t]);return e.types&&(e.types=Object.assign({EIP712Domain:[]},e.types)),e},hash(n,e=!0){const t=this.sanitizeData(n),r=[Buffer.from("1901","hex")];return r.push(this.hashStruct("EIP712Domain",t.domain,t.types,e)),t.primaryType!=="EIP712Domain"&&r.push(this.hashStruct(t.primaryType,t.message,t.types,e)),zi.keccak(Buffer.concat(r))}};var oae={TYPED_MESSAGE_SCHEMA:$O,TypedDataUtils:xw,hashForSignTypedDataLegacy:function(n){return aae(n.data)},hashForSignTypedData_v3:function(n){return xw.hash(n.data,!1)},hashForSignTypedData_v4:function(n){return xw.hash(n.data)}};function aae(n){const e=new Error("Expect argument to be non-empty array");if(typeof n!="object"||!n.length)throw e;const t=n.map(function(s){return s.type==="bytes"?zi.toBuffer(s.value):s.value}),r=n.map(function(s){return s.type}),i=n.map(function(s){if(!s.name)throw e;return s.type+" "+s.name});return Ad.soliditySHA3(["bytes32","bytes32"],[Ad.soliditySHA3(new Array(n.length).fill("string"),i),Ad.soliditySHA3(r,t)])}var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.filterFromParam=Ou.FilterPolyfill=void 0;const jl=Vn,Er=Re,cae=5*60*1e3,mc={jsonrpc:"2.0",id:0};class lae{constructor(e){this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,jl.IntNumber)(1),this.REQUEST_THROTTLE_INTERVAL=1e3,this.lastFetchTimestamp=new Date(0),this.resolvers=[],this.provider=e}async newFilter(e){const t=VO(e),r=this.makeFilterId(),i=await this.setInitialCursorPosition(r,t.fromBlock);return console.info(`Installing new log filter(${r}):`,t,"initial cursor position:",i),this.logFilters.set(r,t),this.setFilterTimeout(r),(0,Er.hexStringFromIntNumber)(r)}async newBlockFilter(){const e=this.makeFilterId(),t=await this.setInitialCursorPosition(e,"latest");return console.info(`Installing new block filter (${e}) with initial cursor position:`,t),this.blockFilters.add(e),this.setFilterTimeout(e),(0,Er.hexStringFromIntNumber)(e)}async newPendingTransactionFilter(){const e=this.makeFilterId(),t=await this.setInitialCursorPosition(e,"latest");return console.info(`Installing new block filter (${e}) with initial cursor position:`,t),this.pendingTransactionFilters.add(e),this.setFilterTimeout(e),(0,Er.hexStringFromIntNumber)(e)}uninstallFilter(e){const t=(0,Er.intNumberFromHexString)(e);return console.info(`Uninstalling filter (${t})`),this.deleteFilter(t),!0}getFilterChanges(e){const t=(0,Er.intNumberFromHexString)(e);return this.timeouts.has(t)&&this.setFilterTimeout(t),this.logFilters.has(t)?this.getLogFilterChanges(t):this.blockFilters.has(t)?this.getBlockFilterChanges(t):this.pendingTransactionFilters.has(t)?this.getPendingTransactionFilterChanges(t):Promise.resolve(mg())}async getFilterLogs(e){const t=(0,Er.intNumberFromHexString)(e),r=this.logFilters.get(t);return r?this.sendAsyncPromise(Object.assign(Object.assign({},mc),{method:"eth_getLogs",params:[wT(r)]})):mg()}makeFilterId(){return(0,jl.IntNumber)(++this.nextFilterId)}sendAsyncPromise(e){return new Promise((t,r)=>{this.provider.sendAsync(e,(i,s)=>{if(i)return r(i);if(Array.isArray(s)||s==null)return r(new Error(`unexpected response received: ${JSON.stringify(s)}`));t(s)})})}deleteFilter(e){console.info(`Deleting filter (${e})`),this.logFilters.delete(e),this.blockFilters.delete(e),this.pendingTransactionFilters.delete(e),this.cursors.delete(e),this.timeouts.delete(e)}async getLogFilterChanges(e){const t=this.logFilters.get(e),r=this.cursors.get(e);if(!r||!t)return mg();const i=await this.getCurrentBlockHeight(),s=t.toBlock==="latest"?i:t.toBlock;if(r>i||r>Number(t.toBlock))return yg();console.info(`Fetching logs from ${r} to ${s} for filter ${e}`);const o=await this.sendAsyncPromise(Object.assign(Object.assign({},mc),{method:"eth_getLogs",params:[wT(Object.assign(Object.assign({},t),{fromBlock:r,toBlock:s}))]}));if(Array.isArray(o.result)){const c=o.result.map(h=>(0,Er.intNumberFromHexString)(h.blockNumber||"0x0")),l=Math.max(...c);if(l&&l>r){const h=(0,jl.IntNumber)(l+1);console.info(`Moving cursor position for filter (${e}) from ${r} to ${h}`),this.cursors.set(e,h)}}return o}async getBlockFilterChanges(e){const t=this.cursors.get(e);if(!t)return mg();const r=await this.getCurrentBlockHeight();if(t>r)return yg();console.info(`Fetching blocks from ${t} to ${r} for filter (${e})`);const i=(await Promise.all((0,Er.range)(t,r+1).map(o=>this.getBlockHashByNumber((0,jl.IntNumber)(o))))).filter(o=>!!o),s=(0,jl.IntNumber)(t+i.length);return console.info(`Moving cursor position for filter (${e}) from ${t} to ${s}`),this.cursors.set(e,s),Object.assign(Object.assign({},mc),{result:i})}async getPendingTransactionFilterChanges(e){return Promise.resolve(yg())}async setInitialCursorPosition(e,t){const r=await this.getCurrentBlockHeight(),i=typeof t=="number"&&t>r?t:r;return this.cursors.set(e,i),i}setFilterTimeout(e){const t=this.timeouts.get(e);t&&window.clearTimeout(t);const r=window.setTimeout(()=>{console.info(`Filter (${e}) timed out`),this.deleteFilter(e)},cae);this.timeouts.set(e,r)}async getCurrentBlockHeight(){const e=new Date;if(e.getTime()-this.lastFetchTimestamp.getTime()>this.REQUEST_THROTTLE_INTERVAL){this.lastFetchTimestamp=e;const t=await this._getCurrentBlockHeight();this.currentBlockHeight=t,this.resolvers.forEach(r=>r(t)),this.resolvers=[]}return this.currentBlockHeight?this.currentBlockHeight:new Promise(t=>this.resolvers.push(t))}async _getCurrentBlockHeight(){const{result:e}=await this.sendAsyncPromise(Object.assign(Object.assign({},mc),{method:"eth_blockNumber",params:[]}));return(0,Er.intNumberFromHexString)((0,Er.ensureHexString)(e))}async getBlockHashByNumber(e){const t=await this.sendAsyncPromise(Object.assign(Object.assign({},mc),{method:"eth_getBlockByNumber",params:[(0,Er.hexStringFromIntNumber)(e),!1]}));return t.result&&typeof t.result.hash=="string"?(0,Er.ensureHexString)(t.result.hash):null}}Ou.FilterPolyfill=lae;function VO(n){return{fromBlock:_T(n.fromBlock),toBlock:_T(n.toBlock),addresses:n.address===void 0?null:Array.isArray(n.address)?n.address:[n.address],topics:n.topics||[]}}Ou.filterFromParam=VO;function wT(n){const e={fromBlock:vT(n.fromBlock),toBlock:vT(n.toBlock),topics:n.topics};return n.addresses!==null&&(e.address=n.addresses),e}function _T(n){if(n===void 0||n==="latest"||n==="pending")return"latest";if(n==="earliest")return(0,jl.IntNumber)(0);if((0,Er.isHexString)(n))return(0,Er.intNumberFromHexString)(n);throw new Error(`Invalid block option: ${String(n)}`)}function vT(n){return n==="latest"?n:(0,Er.hexStringFromIntNumber)(n)}function mg(){return Object.assign(Object.assign({},mc),{error:{code:-32e3,message:"filter not found"}})}function yg(){return Object.assign(Object.assign({},mc),{result:[]})}var m1={},FO={};Object.defineProperty(FO,"__esModule",{value:!0});const uae=Pr;function bT(n,e,t){try{Reflect.apply(n,e,t)}catch(r){setTimeout(()=>{throw r})}}function hae(n){const e=n.length,t=new Array(e);for(let r=0;r<e;r+=1)t[r]=n[r];return t}class dae extends uae.EventEmitter{emit(e,...t){let r=e==="error";const i=this._events;if(i!==void 0)r=r&&i.error===void 0;else if(!r)return!1;if(r){let o;if(t.length>0&&([o]=t),o instanceof Error)throw o;const c=new Error(`Unhandled error.${o?` (${o.message})`:""}`);throw c.context=o,c}const s=i[e];if(s===void 0)return!1;if(typeof s=="function")bT(s,this,t);else{const o=s.length,c=hae(s);for(let l=0;l<o;l+=1)bT(c[l],this,t)}return!0}}FO.default=dae;var fae={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.assertExhaustive=nr.assertStruct=nr.assert=nr.AssertionError=void 0;const pae=jc;function gae(n){return typeof n=="object"&&n!==null&&"message"in n}function mae(n){var e,t;return typeof((t=(e=n?.prototype)===null||e===void 0?void 0:e.constructor)===null||t===void 0?void 0:t.name)=="string"}function yae(n){const e=gae(n)?n.message:String(n);return e.endsWith(".")?e.slice(0,-1):e}function BO(n,e){return mae(n)?new n({message:e}):n({message:e})}class HE extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}nr.AssertionError=HE;function wae(n,e="Assertion failed.",t=HE){if(!n)throw e instanceof Error?e:BO(t,e)}nr.assert=wae;function _ae(n,e,t="Assertion failed",r=HE){try{(0,pae.assert)(n,e)}catch(i){throw BO(r,`${t}: ${yae(i)}.`)}}nr.assertStruct=_ae;function vae(n){throw new Error("Invalid branch reached. Should be detected during compilation.")}nr.assertExhaustive=vae;var Mf={};Object.defineProperty(Mf,"__esModule",{value:!0});Mf.base64=void 0;const bae=jc,Eae=nr,Iae=(n,e={})=>{var t,r;const i=(t=e.paddingRequired)!==null&&t!==void 0?t:!1,s=(r=e.characterSet)!==null&&r!==void 0?r:"base64";let o;s==="base64"?o=String.raw`[A-Za-z0-9+\/]`:((0,Eae.assert)(s==="base64url"),o=String.raw`[-_A-Za-z0-9]`);let c;return i?c=new RegExp(`^(?:${o}{4})*(?:${o}{3}=|${o}{2}==)?$`,"u"):c=new RegExp(`^(?:${o}{4})*(?:${o}{2,3}|${o}{3}=|${o}{2}==)?$`,"u"),(0,bae.pattern)(n,c)};Mf.base64=Iae;var Ot={},Lf={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.remove0x=n.add0x=n.assertIsStrictHexString=n.assertIsHexString=n.isStrictHexString=n.isHexString=n.StrictHexStruct=n.HexStruct=void 0;const e=jc,t=nr;n.HexStruct=(0,e.pattern)((0,e.string)(),/^(?:0x)?[0-9a-f]+$/iu),n.StrictHexStruct=(0,e.pattern)((0,e.string)(),/^0x[0-9a-f]+$/iu);function r(h){return(0,e.is)(h,n.HexStruct)}n.isHexString=r;function i(h){return(0,e.is)(h,n.StrictHexStruct)}n.isStrictHexString=i;function s(h){(0,t.assert)(r(h),"Value must be a hexadecimal string.")}n.assertIsHexString=s;function o(h){(0,t.assert)(i(h),'Value must be a hexadecimal string, starting with "0x".')}n.assertIsStrictHexString=o;function c(h){return h.startsWith("0x")?h:h.startsWith("0X")?`0x${h.substring(2)}`:`0x${h}`}n.add0x=c;function l(h){return h.startsWith("0x")||h.startsWith("0X")?h.substring(2):h}n.remove0x=l})(Lf);Object.defineProperty(Ot,"__esModule",{value:!0});Ot.createDataView=Ot.concatBytes=Ot.valueToBytes=Ot.stringToBytes=Ot.numberToBytes=Ot.signedBigIntToBytes=Ot.bigIntToBytes=Ot.hexToBytes=Ot.bytesToString=Ot.bytesToNumber=Ot.bytesToSignedBigInt=Ot.bytesToBigInt=Ot.bytesToHex=Ot.assertIsBytes=Ot.isBytes=void 0;const ci=nr,Iv=Lf,ET=48,IT=58,AT=87;function Aae(){const n=[];return()=>{if(n.length===0)for(let e=0;e<256;e++)n.push(e.toString(16).padStart(2,"0"));return n}}const Sae=Aae();function WE(n){return n instanceof Uint8Array}Ot.isBytes=WE;function rh(n){(0,ci.assert)(WE(n),"Value must be a Uint8Array.")}Ot.assertIsBytes=rh;function jO(n){if(rh(n),n.length===0)return"0x";const e=Sae(),t=new Array(n.length);for(let r=0;r<n.length;r++)t[r]=e[n[r]];return(0,Iv.add0x)(t.join(""))}Ot.bytesToHex=jO;function qO(n){rh(n);const e=jO(n);return BigInt(e)}Ot.bytesToBigInt=qO;function Tae(n){rh(n);let e=BigInt(0);for(const t of n)e=(e<<BigInt(8))+BigInt(t);return BigInt.asIntN(n.length*8,e)}Ot.bytesToSignedBigInt=Tae;function Rae(n){rh(n);const e=qO(n);return(0,ci.assert)(e<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(e)}Ot.bytesToNumber=Rae;function Cae(n){return rh(n),new TextDecoder().decode(n)}Ot.bytesToString=Cae;function y1(n){var e;if(((e=n?.toLowerCase)===null||e===void 0?void 0:e.call(n))==="0x")return new Uint8Array;(0,Iv.assertIsHexString)(n);const t=(0,Iv.remove0x)(n).toLowerCase(),r=t.length%2===0?t:`0${t}`,i=new Uint8Array(r.length/2);for(let s=0;s<i.length;s++){const o=r.charCodeAt(s*2),c=r.charCodeAt(s*2+1),l=o-(o<IT?ET:AT),h=c-(c<IT?ET:AT);i[s]=l*16+h}return i}Ot.hexToBytes=y1;function HO(n){(0,ci.assert)(typeof n=="bigint","Value must be a bigint."),(0,ci.assert)(n>=BigInt(0),"Value must be a non-negative bigint.");const e=n.toString(16);return y1(e)}Ot.bigIntToBytes=HO;function xae(n,e){(0,ci.assert)(e>0);const t=n>>BigInt(31);return!((~n&t)+(n&~t)>>BigInt(e*8+-1))}function Pae(n,e){(0,ci.assert)(typeof n=="bigint","Value must be a bigint."),(0,ci.assert)(typeof e=="number","Byte length must be a number."),(0,ci.assert)(e>0,"Byte length must be greater than 0."),(0,ci.assert)(xae(n,e),"Byte length is too small to represent the given value.");let t=n;const r=new Uint8Array(e);for(let i=0;i<r.length;i++)r[i]=Number(BigInt.asUintN(8,t)),t>>=BigInt(8);return r.reverse()}Ot.signedBigIntToBytes=Pae;function WO(n){(0,ci.assert)(typeof n=="number","Value must be a number."),(0,ci.assert)(n>=0,"Value must be a non-negative number."),(0,ci.assert)(Number.isSafeInteger(n),"Value is not a safe integer. Use `bigIntToBytes` instead.");const e=n.toString(16);return y1(e)}Ot.numberToBytes=WO;function zO(n){return(0,ci.assert)(typeof n=="string","Value must be a string."),new TextEncoder().encode(n)}Ot.stringToBytes=zO;function GO(n){if(typeof n=="bigint")return HO(n);if(typeof n=="number")return WO(n);if(typeof n=="string")return n.startsWith("0x")?y1(n):zO(n);if(WE(n))return n;throw new TypeError(`Unsupported value type: "${typeof n}".`)}Ot.valueToBytes=GO;function Oae(n){const e=new Array(n.length);let t=0;for(let i=0;i<n.length;i++){const s=GO(n[i]);e[i]=s,t+=s.length}const r=new Uint8Array(t);for(let i=0,s=0;i<e.length;i++)r.set(e[i],s),s+=e[i].length;return r}Ot.concatBytes=Oae;function kae(n){if(typeof Buffer<"u"&&n instanceof Buffer){const e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);return new DataView(e)}return new DataView(n.buffer,n.byteOffset,n.byteLength)}Ot.createDataView=kae;var w1={};Object.defineProperty(w1,"__esModule",{value:!0});w1.ChecksumStruct=void 0;const ST=jc,Nae=Mf;w1.ChecksumStruct=(0,ST.size)((0,Nae.base64)((0,ST.string)(),{paddingRequired:!0}),44,44);var Ss={};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.createHex=Ss.createBytes=Ss.createBigInt=Ss.createNumber=void 0;const un=jc,Dae=nr,KO=Ot,_1=Lf,QO=(0,un.union)([(0,un.number)(),(0,un.bigint)(),(0,un.string)(),_1.StrictHexStruct]),Mae=(0,un.coerce)((0,un.number)(),QO,Number),Lae=(0,un.coerce)((0,un.bigint)(),QO,BigInt);(0,un.union)([_1.StrictHexStruct,(0,un.instance)(Uint8Array)]);const Uae=(0,un.coerce)((0,un.instance)(Uint8Array),(0,un.union)([_1.StrictHexStruct]),KO.hexToBytes),$ae=(0,un.coerce)(_1.StrictHexStruct,(0,un.instance)(Uint8Array),KO.bytesToHex);function Vae(n){try{const e=(0,un.create)(n,Mae);return(0,Dae.assert)(Number.isFinite(e),`Expected a number-like value, got "${n}".`),e}catch(e){throw e instanceof un.StructError?new Error(`Expected a number-like value, got "${n}".`):e}}Ss.createNumber=Vae;function Fae(n){try{return(0,un.create)(n,Lae)}catch(e){throw e instanceof un.StructError?new Error(`Expected a number-like value, got "${String(e.value)}".`):e}}Ss.createBigInt=Fae;function Bae(n){if(typeof n=="string"&&n.toLowerCase()==="0x")return new Uint8Array;try{return(0,un.create)(n,Uae)}catch(e){throw e instanceof un.StructError?new Error(`Expected a bytes-like value, got "${String(e.value)}".`):e}}Ss.createBytes=Bae;function jae(n){if(n instanceof Uint8Array&&n.length===0||typeof n=="string"&&n.toLowerCase()==="0x")return"0x";try{return(0,un.create)(n,$ae)}catch(e){throw e instanceof un.StructError?new Error(`Expected a bytes-like value, got "${String(e.value)}".`):e}}Ss.createHex=jae;var ku={},JO=ct&&ct.__classPrivateFieldSet||function(n,e,t,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?n!==e||!i:!e.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(n,t):i?i.value=t:e.set(n,t),t},Ir=ct&&ct.__classPrivateFieldGet||function(n,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?n!==e||!r:!e.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(n):r?r.value:e.get(n)},Wi,gs;Object.defineProperty(ku,"__esModule",{value:!0});ku.FrozenSet=ku.FrozenMap=void 0;class zE{constructor(e){Wi.set(this,void 0),JO(this,Wi,new Map(e),"f"),Object.freeze(this)}get size(){return Ir(this,Wi,"f").size}[(Wi=new WeakMap,Symbol.iterator)](){return Ir(this,Wi,"f")[Symbol.iterator]()}entries(){return Ir(this,Wi,"f").entries()}forEach(e,t){return Ir(this,Wi,"f").forEach((r,i,s)=>e.call(t,r,i,this))}get(e){return Ir(this,Wi,"f").get(e)}has(e){return Ir(this,Wi,"f").has(e)}keys(){return Ir(this,Wi,"f").keys()}values(){return Ir(this,Wi,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map(([e,t])=>`${String(e)} => ${String(t)}`).join(", ")} `:""}}`}}ku.FrozenMap=zE;class GE{constructor(e){gs.set(this,void 0),JO(this,gs,new Set(e),"f"),Object.freeze(this)}get size(){return Ir(this,gs,"f").size}[(gs=new WeakMap,Symbol.iterator)](){return Ir(this,gs,"f")[Symbol.iterator]()}entries(){return Ir(this,gs,"f").entries()}forEach(e,t){return Ir(this,gs,"f").forEach((r,i,s)=>e.call(t,r,i,this))}has(e){return Ir(this,gs,"f").has(e)}keys(){return Ir(this,gs,"f").keys()}values(){return Ir(this,gs,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map(e=>String(e)).join(", ")} `:""}}`}}ku.FrozenSet=GE;Object.freeze(zE);Object.freeze(zE.prototype);Object.freeze(GE);Object.freeze(GE.prototype);var YO={};Object.defineProperty(YO,"__esModule",{value:!0});var ZO={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonRpcIdValidator=n.assertIsJsonRpcError=n.isJsonRpcError=n.assertIsJsonRpcFailure=n.isJsonRpcFailure=n.assertIsJsonRpcSuccess=n.isJsonRpcSuccess=n.assertIsJsonRpcResponse=n.isJsonRpcResponse=n.assertIsPendingJsonRpcResponse=n.isPendingJsonRpcResponse=n.JsonRpcResponseStruct=n.JsonRpcFailureStruct=n.JsonRpcSuccessStruct=n.PendingJsonRpcResponseStruct=n.assertIsJsonRpcRequest=n.isJsonRpcRequest=n.assertIsJsonRpcNotification=n.isJsonRpcNotification=n.JsonRpcNotificationStruct=n.JsonRpcRequestStruct=n.JsonRpcParamsStruct=n.JsonRpcErrorStruct=n.JsonRpcIdStruct=n.JsonRpcVersionStruct=n.jsonrpc2=n.getJsonSize=n.isValidJson=n.JsonStruct=n.UnsafeJsonStruct=void 0;const e=jc,t=nr,r=()=>(0,e.define)("finite number",P=>(0,e.is)(P,(0,e.number)())&&Number.isFinite(P));n.UnsafeJsonStruct=(0,e.union)([(0,e.literal)(null),(0,e.boolean)(),r(),(0,e.string)(),(0,e.array)((0,e.lazy)(()=>n.UnsafeJsonStruct)),(0,e.record)((0,e.string)(),(0,e.lazy)(()=>n.UnsafeJsonStruct))]),n.JsonStruct=(0,e.define)("Json",(P,O)=>{function g(_,R){const M=[...R.validator(_,O)];return M.length>0?M:!0}try{const _=g(P,n.UnsafeJsonStruct);return _!==!0?_:g(JSON.parse(JSON.stringify(P)),n.UnsafeJsonStruct)}catch(_){return _ instanceof RangeError?"Circular reference detected":!1}});function i(P){return(0,e.is)(P,n.JsonStruct)}n.isValidJson=i;function s(P){(0,t.assertStruct)(P,n.JsonStruct,"Invalid JSON value");const O=JSON.stringify(P);return new TextEncoder().encode(O).byteLength}n.getJsonSize=s,n.jsonrpc2="2.0",n.JsonRpcVersionStruct=(0,e.literal)(n.jsonrpc2),n.JsonRpcIdStruct=(0,e.nullable)((0,e.union)([(0,e.number)(),(0,e.string)()])),n.JsonRpcErrorStruct=(0,e.object)({code:(0,e.integer)(),message:(0,e.string)(),data:(0,e.optional)(n.JsonStruct),stack:(0,e.optional)((0,e.string)())}),n.JsonRpcParamsStruct=(0,e.optional)((0,e.union)([(0,e.record)((0,e.string)(),n.JsonStruct),(0,e.array)(n.JsonStruct)])),n.JsonRpcRequestStruct=(0,e.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,method:(0,e.string)(),params:n.JsonRpcParamsStruct}),n.JsonRpcNotificationStruct=(0,e.omit)(n.JsonRpcRequestStruct,["id"]);function o(P){return(0,e.is)(P,n.JsonRpcNotificationStruct)}n.isJsonRpcNotification=o;function c(P,O){(0,t.assertStruct)(P,n.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",O)}n.assertIsJsonRpcNotification=c;function l(P){return(0,e.is)(P,n.JsonRpcRequestStruct)}n.isJsonRpcRequest=l;function h(P,O){(0,t.assertStruct)(P,n.JsonRpcRequestStruct,"Invalid JSON-RPC request",O)}n.assertIsJsonRpcRequest=h,n.PendingJsonRpcResponseStruct=(0,e.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:(0,e.optional)((0,e.unknown)()),error:(0,e.optional)(n.JsonRpcErrorStruct)}),n.JsonRpcSuccessStruct=(0,e.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:n.JsonStruct}),n.JsonRpcFailureStruct=(0,e.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,error:n.JsonRpcErrorStruct}),n.JsonRpcResponseStruct=(0,e.union)([n.JsonRpcSuccessStruct,n.JsonRpcFailureStruct]);function f(P){return(0,e.is)(P,n.PendingJsonRpcResponseStruct)}n.isPendingJsonRpcResponse=f;function m(P,O){(0,t.assertStruct)(P,n.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",O)}n.assertIsPendingJsonRpcResponse=m;function y(P){return(0,e.is)(P,n.JsonRpcResponseStruct)}n.isJsonRpcResponse=y;function w(P,O){(0,t.assertStruct)(P,n.JsonRpcResponseStruct,"Invalid JSON-RPC response",O)}n.assertIsJsonRpcResponse=w;function I(P){return(0,e.is)(P,n.JsonRpcSuccessStruct)}n.isJsonRpcSuccess=I;function T(P,O){(0,t.assertStruct)(P,n.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",O)}n.assertIsJsonRpcSuccess=T;function A(P){return(0,e.is)(P,n.JsonRpcFailureStruct)}n.isJsonRpcFailure=A;function L(P,O){(0,t.assertStruct)(P,n.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",O)}n.assertIsJsonRpcFailure=L;function D(P){return(0,e.is)(P,n.JsonRpcErrorStruct)}n.isJsonRpcError=D;function C(P,O){(0,t.assertStruct)(P,n.JsonRpcErrorStruct,"Invalid JSON-RPC error",O)}n.assertIsJsonRpcError=C;function k(P){const{permitEmptyString:O,permitFractions:g,permitNull:_}=Object.assign({permitEmptyString:!0,permitFractions:!1,permitNull:!0},P);return N=>!!(typeof N=="number"&&(g||Number.isInteger(N))||typeof N=="string"&&(O||N.length>0)||_&&N===null)}n.getJsonRpcIdValidator=k})(ZO);var XO={};Object.defineProperty(XO,"__esModule",{value:!0});var Nu={},qae=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.createModuleLogger=Nu.createProjectLogger=void 0;const Hae=qae(Z9),Wae=(0,Hae.default)("metamask");function zae(n){return Wae.extend(n)}Nu.createProjectLogger=zae;function Gae(n,e){return n.extend(e)}Nu.createModuleLogger=Gae;var ek={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateNumberSize=n.calculateStringSize=n.isASCII=n.isPlainObject=n.ESCAPE_CHARACTERS_REGEXP=n.JsonSize=n.hasProperty=n.isObject=n.isNullOrUndefined=n.isNonEmptyArray=void 0;function e(h){return Array.isArray(h)&&h.length>0}n.isNonEmptyArray=e;function t(h){return h==null}n.isNullOrUndefined=t;function r(h){return!!h&&typeof h=="object"&&!Array.isArray(h)}n.isObject=r;const i=(h,f)=>Object.hasOwnProperty.call(h,f);n.hasProperty=i,function(h){h[h.Null=4]="Null",h[h.Comma=1]="Comma",h[h.Wrapper=1]="Wrapper",h[h.True=4]="True",h[h.False=5]="False",h[h.Quote=1]="Quote",h[h.Colon=1]="Colon",h[h.Date=24]="Date"}(n.JsonSize||(n.JsonSize={})),n.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu;function s(h){if(typeof h!="object"||h===null)return!1;try{let f=h;for(;Object.getPrototypeOf(f)!==null;)f=Object.getPrototypeOf(f);return Object.getPrototypeOf(h)===f}catch{return!1}}n.isPlainObject=s;function o(h){return h.charCodeAt(0)<=127}n.isASCII=o;function c(h){var f;return h.split("").reduce((y,w)=>o(w)?y+1:y+2,0)+((f=h.match(n.ESCAPE_CHARACTERS_REGEXP))!==null&&f!==void 0?f:[]).length}n.calculateStringSize=c;function l(h){return h.toString().length}n.calculateNumberSize=l})(ek);var Ts={};Object.defineProperty(Ts,"__esModule",{value:!0});Ts.hexToBigInt=Ts.hexToNumber=Ts.bigIntToHex=Ts.numberToHex=void 0;const ou=nr,Yd=Lf,Kae=n=>((0,ou.assert)(typeof n=="number","Value must be a number."),(0,ou.assert)(n>=0,"Value must be a non-negative number."),(0,ou.assert)(Number.isSafeInteger(n),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,Yd.add0x)(n.toString(16)));Ts.numberToHex=Kae;const Qae=n=>((0,ou.assert)(typeof n=="bigint","Value must be a bigint."),(0,ou.assert)(n>=0,"Value must be a non-negative bigint."),(0,Yd.add0x)(n.toString(16)));Ts.bigIntToHex=Qae;const Jae=n=>{(0,Yd.assertIsHexString)(n);const e=parseInt(n,16);return(0,ou.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `hexToBigInt` instead."),e};Ts.hexToNumber=Jae;const Yae=n=>((0,Yd.assertIsHexString)(n),BigInt((0,Yd.add0x)(n)));Ts.hexToBigInt=Yae;var tk={};Object.defineProperty(tk,"__esModule",{value:!0});var nk={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.timeSince=n.inMilliseconds=n.Duration=void 0,function(s){s[s.Millisecond=1]="Millisecond",s[s.Second=1e3]="Second",s[s.Minute=6e4]="Minute",s[s.Hour=36e5]="Hour",s[s.Day=864e5]="Day",s[s.Week=6048e5]="Week",s[s.Year=31536e6]="Year"}(n.Duration||(n.Duration={}));const e=s=>Number.isInteger(s)&&s>=0,t=(s,o)=>{if(!e(s))throw new Error(`"${o}" must be a non-negative integer. Received: "${s}".`)};function r(s,o){return t(s,"count"),s*o}n.inMilliseconds=r;function i(s){return t(s,"timestamp"),Date.now()-s}n.timeSince=i})(nk);var rk={};Object.defineProperty(rk,"__esModule",{value:!0});var ik={},Av={exports:{}};const Zae="2.0.0",sk=256,Xae=Number.MAX_SAFE_INTEGER||9007199254740991,ece=16,tce=sk-6,nce=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var v1={MAX_LENGTH:sk,MAX_SAFE_COMPONENT_LENGTH:ece,MAX_SAFE_BUILD_LENGTH:tce,MAX_SAFE_INTEGER:Xae,RELEASE_TYPES:nce,SEMVER_SPEC_VERSION:Zae,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Pw={};const rce=typeof process=="object"&&Pw&&Pw.NODE_DEBUG&&/\bsemver\b/i.test(Pw.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{};var b1=rce;(function(n,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=v1,s=b1;e=n.exports={};const o=e.re=[],c=e.safeRe=[],l=e.src=[],h=e.t={};let f=0;const m="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",i],[m,r]],w=T=>{for(const[A,L]of y)T=T.split(`${A}*`).join(`${A}{0,${L}}`).split(`${A}+`).join(`${A}{1,${L}}`);return T},I=(T,A,L)=>{const D=w(A),C=f++;s(T,C,A),h[T]=C,l[C]=A,o[C]=new RegExp(A,L?"g":void 0),c[C]=new RegExp(D,L?"g":void 0)};I("NUMERICIDENTIFIER","0|[1-9]\\d*"),I("NUMERICIDENTIFIERLOOSE","\\d+"),I("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${m}*`),I("MAINVERSION",`(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})\\.(${l[h.NUMERICIDENTIFIER]})`),I("MAINVERSIONLOOSE",`(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})\\.(${l[h.NUMERICIDENTIFIERLOOSE]})`),I("PRERELEASEIDENTIFIER",`(?:${l[h.NUMERICIDENTIFIER]}|${l[h.NONNUMERICIDENTIFIER]})`),I("PRERELEASEIDENTIFIERLOOSE",`(?:${l[h.NUMERICIDENTIFIERLOOSE]}|${l[h.NONNUMERICIDENTIFIER]})`),I("PRERELEASE",`(?:-(${l[h.PRERELEASEIDENTIFIER]}(?:\\.${l[h.PRERELEASEIDENTIFIER]})*))`),I("PRERELEASELOOSE",`(?:-?(${l[h.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[h.PRERELEASEIDENTIFIERLOOSE]})*))`),I("BUILDIDENTIFIER",`${m}+`),I("BUILD",`(?:\\+(${l[h.BUILDIDENTIFIER]}(?:\\.${l[h.BUILDIDENTIFIER]})*))`),I("FULLPLAIN",`v?${l[h.MAINVERSION]}${l[h.PRERELEASE]}?${l[h.BUILD]}?`),I("FULL",`^${l[h.FULLPLAIN]}$`),I("LOOSEPLAIN",`[v=\\s]*${l[h.MAINVERSIONLOOSE]}${l[h.PRERELEASELOOSE]}?${l[h.BUILD]}?`),I("LOOSE",`^${l[h.LOOSEPLAIN]}$`),I("GTLT","((?:<|>)?=?)"),I("XRANGEIDENTIFIERLOOSE",`${l[h.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),I("XRANGEIDENTIFIER",`${l[h.NUMERICIDENTIFIER]}|x|X|\\*`),I("XRANGEPLAIN",`[v=\\s]*(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:\\.(${l[h.XRANGEIDENTIFIER]})(?:${l[h.PRERELEASE]})?${l[h.BUILD]}?)?)?`),I("XRANGEPLAINLOOSE",`[v=\\s]*(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[h.XRANGEIDENTIFIERLOOSE]})(?:${l[h.PRERELEASELOOSE]})?${l[h.BUILD]}?)?)?`),I("XRANGE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAIN]}$`),I("XRANGELOOSE",`^${l[h.GTLT]}\\s*${l[h.XRANGEPLAINLOOSE]}$`),I("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),I("COERCE",`${l[h.COERCEPLAIN]}(?:$|[^\\d])`),I("COERCEFULL",l[h.COERCEPLAIN]+`(?:${l[h.PRERELEASE]})?(?:${l[h.BUILD]})?(?:$|[^\\d])`),I("COERCERTL",l[h.COERCE],!0),I("COERCERTLFULL",l[h.COERCEFULL],!0),I("LONETILDE","(?:~>?)"),I("TILDETRIM",`(\\s*)${l[h.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",I("TILDE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAIN]}$`),I("TILDELOOSE",`^${l[h.LONETILDE]}${l[h.XRANGEPLAINLOOSE]}$`),I("LONECARET","(?:\\^)"),I("CARETTRIM",`(\\s*)${l[h.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",I("CARET",`^${l[h.LONECARET]}${l[h.XRANGEPLAIN]}$`),I("CARETLOOSE",`^${l[h.LONECARET]}${l[h.XRANGEPLAINLOOSE]}$`),I("COMPARATORLOOSE",`^${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]})$|^$`),I("COMPARATOR",`^${l[h.GTLT]}\\s*(${l[h.FULLPLAIN]})$|^$`),I("COMPARATORTRIM",`(\\s*)${l[h.GTLT]}\\s*(${l[h.LOOSEPLAIN]}|${l[h.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",I("HYPHENRANGE",`^\\s*(${l[h.XRANGEPLAIN]})\\s+-\\s+(${l[h.XRANGEPLAIN]})\\s*$`),I("HYPHENRANGELOOSE",`^\\s*(${l[h.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[h.XRANGEPLAINLOOSE]})\\s*$`),I("STAR","(<|>)?=?\\s*\\*"),I("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),I("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Av,Av.exports);var Uf=Av.exports;const ice=Object.freeze({loose:!0}),sce=Object.freeze({}),oce=n=>n?typeof n!="object"?ice:n:sce;var KE=oce;const TT=/^[0-9]+$/,ok=(n,e)=>{const t=TT.test(n),r=TT.test(e);return t&&r&&(n=+n,e=+e),n===e?0:t&&!r?-1:r&&!t?1:n<e?-1:1},ace=(n,e)=>ok(e,n);var ak={compareIdentifiers:ok,rcompareIdentifiers:ace};const wg=b1,{MAX_LENGTH:RT,MAX_SAFE_INTEGER:_g}=v1,{safeRe:CT,t:xT}=Uf,cce=KE,{compareIdentifiers:xl}=ak;let lce=class _s{constructor(e,t){if(t=cce(t),e instanceof _s){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>RT)throw new TypeError(`version is longer than ${RT} characters`);wg("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?CT[xT.LOOSE]:CT[xT.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>_g||this.major<0)throw new TypeError("Invalid major version");if(this.minor>_g||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>_g||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<_g)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(wg("SemVer.compare",this.version,this.options,e),!(e instanceof _s)){if(typeof e=="string"&&e===this.version)return 0;e=new _s(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof _s||(e=new _s(e,this.options)),xl(this.major,e.major)||xl(this.minor,e.minor)||xl(this.patch,e.patch)}comparePre(e){if(e instanceof _s||(e=new _s(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],i=e.prerelease[t];if(wg("prerelease compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xl(r,i)}while(++t)}compareBuild(e){e instanceof _s||(e=new _s(e,this.options));let t=0;do{const r=this.build[t],i=e.build[t];if(wg("build compare",t,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return xl(r,i)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!t&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(t===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(t){let s=[t,i];r===!1&&(s=[t]),xl(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Or=lce;const PT=Or,uce=(n,e,t=!1)=>{if(n instanceof PT)return n;try{return new PT(n,e)}catch(r){if(!t)return null;throw r}};var ih=uce;const hce=ih,dce=(n,e)=>{const t=hce(n,e);return t?t.version:null};var fce=dce;const pce=ih,gce=(n,e)=>{const t=pce(n.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var mce=gce;const OT=Or,yce=(n,e,t,r,i)=>{typeof t=="string"&&(i=r,r=t,t=void 0);try{return new OT(n instanceof OT?n.version:n,t).inc(e,r,i).version}catch{return null}};var wce=yce;const kT=ih,_ce=(n,e)=>{const t=kT(n,null,!0),r=kT(e,null,!0),i=t.compare(r);if(i===0)return null;const s=i>0,o=s?t:r,c=s?r:t,l=!!o.prerelease.length;if(!!c.prerelease.length&&!l)return!c.patch&&!c.minor?"major":o.patch?"patch":o.minor?"minor":"major";const f=l?"pre":"";return t.major!==r.major?f+"major":t.minor!==r.minor?f+"minor":t.patch!==r.patch?f+"patch":"prerelease"};var vce=_ce;const bce=Or,Ece=(n,e)=>new bce(n,e).major;var Ice=Ece;const Ace=Or,Sce=(n,e)=>new Ace(n,e).minor;var Tce=Sce;const Rce=Or,Cce=(n,e)=>new Rce(n,e).patch;var xce=Cce;const Pce=ih,Oce=(n,e)=>{const t=Pce(n,e);return t&&t.prerelease.length?t.prerelease:null};var kce=Oce;const NT=Or,Nce=(n,e,t)=>new NT(n,t).compare(new NT(e,t));var ns=Nce;const Dce=ns,Mce=(n,e,t)=>Dce(e,n,t);var Lce=Mce;const Uce=ns,$ce=(n,e)=>Uce(n,e,!0);var Vce=$ce;const DT=Or,Fce=(n,e,t)=>{const r=new DT(n,t),i=new DT(e,t);return r.compare(i)||r.compareBuild(i)};var QE=Fce;const Bce=QE,jce=(n,e)=>n.sort((t,r)=>Bce(t,r,e));var qce=jce;const Hce=QE,Wce=(n,e)=>n.sort((t,r)=>Hce(r,t,e));var zce=Wce;const Gce=ns,Kce=(n,e,t)=>Gce(n,e,t)>0;var E1=Kce;const Qce=ns,Jce=(n,e,t)=>Qce(n,e,t)<0;var JE=Jce;const Yce=ns,Zce=(n,e,t)=>Yce(n,e,t)===0;var ck=Zce;const Xce=ns,ele=(n,e,t)=>Xce(n,e,t)!==0;var lk=ele;const tle=ns,nle=(n,e,t)=>tle(n,e,t)>=0;var YE=nle;const rle=ns,ile=(n,e,t)=>rle(n,e,t)<=0;var ZE=ile;const sle=ck,ole=lk,ale=E1,cle=YE,lle=JE,ule=ZE,hle=(n,e,t,r)=>{switch(e){case"===":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n===t;case"!==":return typeof n=="object"&&(n=n.version),typeof t=="object"&&(t=t.version),n!==t;case"":case"=":case"==":return sle(n,t,r);case"!=":return ole(n,t,r);case">":return ale(n,t,r);case">=":return cle(n,t,r);case"<":return lle(n,t,r);case"<=":return ule(n,t,r);default:throw new TypeError(`Invalid operator: ${e}`)}};var uk=hle;const dle=Or,fle=ih,{safeRe:vg,t:bg}=Uf,ple=(n,e)=>{if(n instanceof dle)return n;if(typeof n=="number"&&(n=String(n)),typeof n!="string")return null;e=e||{};let t=null;if(!e.rtl)t=n.match(e.includePrerelease?vg[bg.COERCEFULL]:vg[bg.COERCE]);else{const l=e.includePrerelease?vg[bg.COERCERTLFULL]:vg[bg.COERCERTL];let h;for(;(h=l.exec(n))&&(!t||t.index+t[0].length!==n.length);)(!t||h.index+h[0].length!==t.index+t[0].length)&&(t=h),l.lastIndex=h.index+h[1].length+h[2].length;l.lastIndex=-1}if(t===null)return null;const r=t[2],i=t[3]||"0",s=t[4]||"0",o=e.includePrerelease&&t[5]?`-${t[5]}`:"",c=e.includePrerelease&&t[6]?`+${t[6]}`:"";return fle(`${r}.${i}.${s}${o}${c}`,e)};var gle=ple;class mle{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);if(t!==void 0)return this.map.delete(e),this.map.set(e,t),t}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&t!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,t)}return this}}var yle=mle,Ow,MT;function rs(){if(MT)return Ow;MT=1;const n=/\s+/g;class e{constructor(B,Q){if(Q=i(Q),B instanceof e)return B.loose===!!Q.loose&&B.includePrerelease===!!Q.includePrerelease?B:new e(B.raw,Q);if(B instanceof s)return this.raw=B.value,this.set=[[B]],this.formatted=void 0,this;if(this.options=Q,this.loose=!!Q.loose,this.includePrerelease=!!Q.includePrerelease,this.raw=B.trim().replace(n," "),this.set=this.raw.split("||").map(G=>this.parseRange(G.trim())).filter(G=>G.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const G=this.set[0];if(this.set=this.set.filter(K=>!T(K[0])),this.set.length===0)this.set=[G];else if(this.set.length>1){for(const K of this.set)if(K.length===1&&A(K[0])){this.set=[K];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let B=0;B<this.set.length;B++){B>0&&(this.formatted+="||");const Q=this.set[B];for(let G=0;G<Q.length;G++)G>0&&(this.formatted+=" "),this.formatted+=Q[G].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(B){const G=((this.options.includePrerelease&&w)|(this.options.loose&&I))+":"+B,K=r.get(G);if(K)return K;const J=this.options.loose,ne=J?l[h.HYPHENRANGELOOSE]:l[h.HYPHENRANGE];B=B.replace(ne,j(this.options.includePrerelease)),o("hyphen replace",B),B=B.replace(l[h.COMPARATORTRIM],f),o("comparator trim",B),B=B.replace(l[h.TILDETRIM],m),o("tilde trim",B),B=B.replace(l[h.CARETTRIM],y),o("caret trim",B);let se=B.split(" ").map(we=>D(we,this.options)).join(" ").split(/\s+/).map(we=>M(we,this.options));J&&(se=se.filter(we=>(o("loose invalid filter",we,this.options),!!we.match(l[h.COMPARATORLOOSE])))),o("range list",se);const pe=new Map,ae=se.map(we=>new s(we,this.options));for(const we of ae){if(T(we))return[we];pe.set(we.value,we)}pe.size>1&&pe.has("")&&pe.delete("");const Ae=[...pe.values()];return r.set(G,Ae),Ae}intersects(B,Q){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(G=>L(G,Q)&&B.set.some(K=>L(K,Q)&&G.every(J=>K.every(ne=>J.intersects(ne,Q)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new c(B,this.options)}catch{return!1}for(let Q=0;Q<this.set.length;Q++)if($(this.set[Q],B,this.options))return!0;return!1}}Ow=e;const t=yle,r=new t,i=KE,s=I1(),o=b1,c=Or,{safeRe:l,t:h,comparatorTrimReplace:f,tildeTrimReplace:m,caretTrimReplace:y}=Uf,{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:I}=v1,T=q=>q.value==="<0.0.0-0",A=q=>q.value==="",L=(q,B)=>{let Q=!0;const G=q.slice();let K=G.pop();for(;Q&&G.length;)Q=G.every(J=>K.intersects(J,B)),K=G.pop();return Q},D=(q,B)=>(o("comp",q,B),q=O(q,B),o("caret",q),q=k(q,B),o("tildes",q),q=_(q,B),o("xrange",q),q=N(q,B),o("stars",q),q),C=q=>!q||q.toLowerCase()==="x"||q==="*",k=(q,B)=>q.trim().split(/\s+/).map(Q=>P(Q,B)).join(" "),P=(q,B)=>{const Q=B.loose?l[h.TILDELOOSE]:l[h.TILDE];return q.replace(Q,(G,K,J,ne,se)=>{o("tilde",q,G,K,J,ne,se);let pe;return C(K)?pe="":C(J)?pe=`>=${K}.0.0 <${+K+1}.0.0-0`:C(ne)?pe=`>=${K}.${J}.0 <${K}.${+J+1}.0-0`:se?(o("replaceTilde pr",se),pe=`>=${K}.${J}.${ne}-${se} <${K}.${+J+1}.0-0`):pe=`>=${K}.${J}.${ne} <${K}.${+J+1}.0-0`,o("tilde return",pe),pe})},O=(q,B)=>q.trim().split(/\s+/).map(Q=>g(Q,B)).join(" "),g=(q,B)=>{o("caret",q,B);const Q=B.loose?l[h.CARETLOOSE]:l[h.CARET],G=B.includePrerelease?"-0":"";return q.replace(Q,(K,J,ne,se,pe)=>{o("caret",q,K,J,ne,se,pe);let ae;return C(J)?ae="":C(ne)?ae=`>=${J}.0.0${G} <${+J+1}.0.0-0`:C(se)?J==="0"?ae=`>=${J}.${ne}.0${G} <${J}.${+ne+1}.0-0`:ae=`>=${J}.${ne}.0${G} <${+J+1}.0.0-0`:pe?(o("replaceCaret pr",pe),J==="0"?ne==="0"?ae=`>=${J}.${ne}.${se}-${pe} <${J}.${ne}.${+se+1}-0`:ae=`>=${J}.${ne}.${se}-${pe} <${J}.${+ne+1}.0-0`:ae=`>=${J}.${ne}.${se}-${pe} <${+J+1}.0.0-0`):(o("no pr"),J==="0"?ne==="0"?ae=`>=${J}.${ne}.${se}${G} <${J}.${ne}.${+se+1}-0`:ae=`>=${J}.${ne}.${se}${G} <${J}.${+ne+1}.0-0`:ae=`>=${J}.${ne}.${se} <${+J+1}.0.0-0`),o("caret return",ae),ae})},_=(q,B)=>(o("replaceXRanges",q,B),q.split(/\s+/).map(Q=>R(Q,B)).join(" ")),R=(q,B)=>{q=q.trim();const Q=B.loose?l[h.XRANGELOOSE]:l[h.XRANGE];return q.replace(Q,(G,K,J,ne,se,pe)=>{o("xRange",q,G,K,J,ne,se,pe);const ae=C(J),Ae=ae||C(ne),we=Ae||C(se),De=we;return K==="="&&De&&(K=""),pe=B.includePrerelease?"-0":"",ae?K===">"||K==="<"?G="<0.0.0-0":G="*":K&&De?(Ae&&(ne=0),se=0,K===">"?(K=">=",Ae?(J=+J+1,ne=0,se=0):(ne=+ne+1,se=0)):K==="<="&&(K="<",Ae?J=+J+1:ne=+ne+1),K==="<"&&(pe="-0"),G=`${K+J}.${ne}.${se}${pe}`):Ae?G=`>=${J}.0.0${pe} <${+J+1}.0.0-0`:we&&(G=`>=${J}.${ne}.0${pe} <${J}.${+ne+1}.0-0`),o("xRange return",G),G})},N=(q,B)=>(o("replaceStars",q,B),q.trim().replace(l[h.STAR],"")),M=(q,B)=>(o("replaceGTE0",q,B),q.trim().replace(l[B.includePrerelease?h.GTE0PRE:h.GTE0],"")),j=q=>(B,Q,G,K,J,ne,se,pe,ae,Ae,we,De)=>(C(G)?Q="":C(K)?Q=`>=${G}.0.0${q?"-0":""}`:C(J)?Q=`>=${G}.${K}.0${q?"-0":""}`:ne?Q=`>=${Q}`:Q=`>=${Q}${q?"-0":""}`,C(ae)?pe="":C(Ae)?pe=`<${+ae+1}.0.0-0`:C(we)?pe=`<${ae}.${+Ae+1}.0-0`:De?pe=`<=${ae}.${Ae}.${we}-${De}`:q?pe=`<${ae}.${Ae}.${+we+1}-0`:pe=`<=${pe}`,`${Q} ${pe}`.trim()),$=(q,B,Q)=>{for(let G=0;G<q.length;G++)if(!q[G].test(B))return!1;if(B.prerelease.length&&!Q.includePrerelease){for(let G=0;G<q.length;G++)if(o(q[G].semver),q[G].semver!==s.ANY&&q[G].semver.prerelease.length>0){const K=q[G].semver;if(K.major===B.major&&K.minor===B.minor&&K.patch===B.patch)return!0}return!1}return!0};return Ow}var kw,LT;function I1(){if(LT)return kw;LT=1;const n=Symbol("SemVer ANY");class e{static get ANY(){return n}constructor(f,m){if(m=t(m),f instanceof e){if(f.loose===!!m.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),o("comparator",f,m),this.options=m,this.loose=!!m.loose,this.parse(f),this.semver===n?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(f){const m=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],y=f.match(m);if(!y)throw new TypeError(`Invalid comparator: ${f}`);this.operator=y[1]!==void 0?y[1]:"",this.operator==="="&&(this.operator=""),y[2]?this.semver=new c(y[2],this.options.loose):this.semver=n}toString(){return this.value}test(f){if(o("Comparator.test",f,this.options.loose),this.semver===n||f===n)return!0;if(typeof f=="string")try{f=new c(f,this.options)}catch{return!1}return s(f,this.operator,this.semver,this.options)}intersects(f,m){if(!(f instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,m).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,m).test(f.semver):(m=t(m),m.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||s(this.semver,"<",f.semver,m)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||s(this.semver,">",f.semver,m)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}kw=e;const t=KE,{safeRe:r,t:i}=Uf,s=uk,o=b1,c=Or,l=rs();return kw}const wle=rs(),_le=(n,e,t)=>{try{e=new wle(e,t)}catch{return!1}return e.test(n)};var A1=_le;const vle=rs(),ble=(n,e)=>new vle(n,e).set.map(t=>t.map(r=>r.value).join(" ").trim().split(" "));var Ele=ble;const Ile=Or,Ale=rs(),Sle=(n,e,t)=>{let r=null,i=null,s=null;try{s=new Ale(e,t)}catch{return null}return n.forEach(o=>{s.test(o)&&(!r||i.compare(o)===-1)&&(r=o,i=new Ile(r,t))}),r};var Tle=Sle;const Rle=Or,Cle=rs(),xle=(n,e,t)=>{let r=null,i=null,s=null;try{s=new Cle(e,t)}catch{return null}return n.forEach(o=>{s.test(o)&&(!r||i.compare(o)===1)&&(r=o,i=new Rle(r,t))}),r};var Ple=xle;const Nw=Or,Ole=rs(),UT=E1,kle=(n,e)=>{n=new Ole(n,e);let t=new Nw("0.0.0");if(n.test(t)||(t=new Nw("0.0.0-0"),n.test(t)))return t;t=null;for(let r=0;r<n.set.length;++r){const i=n.set[r];let s=null;i.forEach(o=>{const c=new Nw(o.semver.version);switch(o.operator){case">":c.prerelease.length===0?c.patch++:c.prerelease.push(0),c.raw=c.format();case"":case">=":(!s||UT(c,s))&&(s=c);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!t||UT(t,s))&&(t=s)}return t&&n.test(t)?t:null};var Nle=kle;const Dle=rs(),Mle=(n,e)=>{try{return new Dle(n,e).range||"*"}catch{return null}};var Lle=Mle;const Ule=Or,hk=I1(),{ANY:$le}=hk,Vle=rs(),Fle=A1,$T=E1,VT=JE,Ble=ZE,jle=YE,qle=(n,e,t,r)=>{n=new Ule(n,r),e=new Vle(e,r);let i,s,o,c,l;switch(t){case">":i=$T,s=Ble,o=VT,c=">",l=">=";break;case"<":i=VT,s=jle,o=$T,c="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Fle(n,e,r))return!1;for(let h=0;h<e.set.length;++h){const f=e.set[h];let m=null,y=null;if(f.forEach(w=>{w.semver===$le&&(w=new hk(">=0.0.0")),m=m||w,y=y||w,i(w.semver,m.semver,r)?m=w:o(w.semver,y.semver,r)&&(y=w)}),m.operator===c||m.operator===l||(!y.operator||y.operator===c)&&s(n,y.semver))return!1;if(y.operator===l&&o(n,y.semver))return!1}return!0};var XE=qle;const Hle=XE,Wle=(n,e,t)=>Hle(n,e,">",t);var zle=Wle;const Gle=XE,Kle=(n,e,t)=>Gle(n,e,"<",t);var Qle=Kle;const FT=rs(),Jle=(n,e,t)=>(n=new FT(n,t),e=new FT(e,t),n.intersects(e,t));var Yle=Jle;const Zle=A1,Xle=ns;var eue=(n,e,t)=>{const r=[];let i=null,s=null;const o=n.sort((f,m)=>Xle(f,m,t));for(const f of o)Zle(f,e,t)?(s=f,i||(i=f)):(s&&r.push([i,s]),s=null,i=null);i&&r.push([i,null]);const c=[];for(const[f,m]of r)f===m?c.push(f):!m&&f===o[0]?c.push("*"):m?f===o[0]?c.push(`<=${m}`):c.push(`${f} - ${m}`):c.push(`>=${f}`);const l=c.join(" || "),h=typeof e.raw=="string"?e.raw:String(e);return l.length<h.length?l:e};const BT=rs(),e2=I1(),{ANY:Dw}=e2,Jh=A1,t2=ns,tue=(n,e,t={})=>{if(n===e)return!0;n=new BT(n,t),e=new BT(e,t);let r=!1;e:for(const i of n.set){for(const s of e.set){const o=rue(i,s,t);if(r=r||o!==null,o)continue e}if(r)return!1}return!0},nue=[new e2(">=0.0.0-0")],jT=[new e2(">=0.0.0")],rue=(n,e,t)=>{if(n===e)return!0;if(n.length===1&&n[0].semver===Dw){if(e.length===1&&e[0].semver===Dw)return!0;t.includePrerelease?n=nue:n=jT}if(e.length===1&&e[0].semver===Dw){if(t.includePrerelease)return!0;e=jT}const r=new Set;let i,s;for(const w of n)w.operator===">"||w.operator===">="?i=qT(i,w,t):w.operator==="<"||w.operator==="<="?s=HT(s,w,t):r.add(w.semver);if(r.size>1)return null;let o;if(i&&s){if(o=t2(i.semver,s.semver,t),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const w of r){if(i&&!Jh(w,String(i),t)||s&&!Jh(w,String(s),t))return null;for(const I of e)if(!Jh(w,String(I),t))return!1;return!0}let c,l,h,f,m=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1,y=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1;m&&m.prerelease.length===1&&s.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(const w of e){if(f=f||w.operator===">"||w.operator===">=",h=h||w.operator==="<"||w.operator==="<=",i){if(y&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===y.major&&w.semver.minor===y.minor&&w.semver.patch===y.patch&&(y=!1),w.operator===">"||w.operator===">="){if(c=qT(i,w,t),c===w&&c!==i)return!1}else if(i.operator===">="&&!Jh(i.semver,String(w),t))return!1}if(s){if(m&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===m.major&&w.semver.minor===m.minor&&w.semver.patch===m.patch&&(m=!1),w.operator==="<"||w.operator==="<="){if(l=HT(s,w,t),l===w&&l!==s)return!1}else if(s.operator==="<="&&!Jh(s.semver,String(w),t))return!1}if(!w.operator&&(s||i)&&o!==0)return!1}return!(i&&h&&!s&&o!==0||s&&f&&!i&&o!==0||y||m)},qT=(n,e,t)=>{if(!n)return e;const r=t2(n.semver,e.semver,t);return r>0?n:r<0||e.operator===">"&&n.operator===">="?e:n},HT=(n,e,t)=>{if(!n)return e;const r=t2(n.semver,e.semver,t);return r<0?n:r>0||e.operator==="<"&&n.operator==="<="?e:n};var iue=tue;const Mw=Uf,WT=v1,sue=Or,zT=ak,oue=ih,aue=fce,cue=mce,lue=wce,uue=vce,hue=Ice,due=Tce,fue=xce,pue=kce,gue=ns,mue=Lce,yue=Vce,wue=QE,_ue=qce,vue=zce,bue=E1,Eue=JE,Iue=ck,Aue=lk,Sue=YE,Tue=ZE,Rue=uk,Cue=gle,xue=I1(),Pue=rs(),Oue=A1,kue=Ele,Nue=Tle,Due=Ple,Mue=Nle,Lue=Lle,Uue=XE,$ue=zle,Vue=Qle,Fue=Yle,Bue=eue,jue=iue;var que={parse:oue,valid:aue,clean:cue,inc:lue,diff:uue,major:hue,minor:due,patch:fue,prerelease:pue,compare:gue,rcompare:mue,compareLoose:yue,compareBuild:wue,sort:_ue,rsort:vue,gt:bue,lt:Eue,eq:Iue,neq:Aue,gte:Sue,lte:Tue,cmp:Rue,coerce:Cue,Comparator:xue,Range:Pue,satisfies:Oue,toComparators:kue,maxSatisfying:Nue,minSatisfying:Due,minVersion:Mue,validRange:Lue,outside:Uue,gtr:$ue,ltr:Vue,intersects:Fue,simplifyRange:Bue,subset:jue,SemVer:sue,re:Mw.re,src:Mw.src,tokens:Mw.t,SEMVER_SPEC_VERSION:WT.SEMVER_SPEC_VERSION,RELEASE_TYPES:WT.RELEASE_TYPES,compareIdentifiers:zT.compareIdentifiers,rcompareIdentifiers:zT.rcompareIdentifiers};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.satisfiesVersionRange=n.gtRange=n.gtVersion=n.assertIsSemVerRange=n.assertIsSemVerVersion=n.isValidSemVerRange=n.isValidSemVerVersion=n.VersionRangeStruct=n.VersionStruct=void 0;const e=que,t=jc,r=nr;n.VersionStruct=(0,t.refine)((0,t.string)(),"Version",m=>(0,e.valid)(m)===null?`Expected SemVer version, got "${m}"`:!0),n.VersionRangeStruct=(0,t.refine)((0,t.string)(),"Version range",m=>(0,e.validRange)(m)===null?`Expected SemVer range, got "${m}"`:!0);function i(m){return(0,t.is)(m,n.VersionStruct)}n.isValidSemVerVersion=i;function s(m){return(0,t.is)(m,n.VersionRangeStruct)}n.isValidSemVerRange=s;function o(m){(0,r.assertStruct)(m,n.VersionStruct)}n.assertIsSemVerVersion=o;function c(m){(0,r.assertStruct)(m,n.VersionRangeStruct)}n.assertIsSemVerRange=c;function l(m,y){return(0,e.gt)(m,y)}n.gtVersion=l;function h(m,y){return(0,e.gtr)(m,y)}n.gtRange=h;function f(m,y){return(0,e.satisfies)(m,y,{includePrerelease:!0})}n.satisfiesVersionRange=f})(ik);(function(n){var e=ct&&ct.__createBinding||(Object.create?function(r,i,s,o){o===void 0&&(o=s);var c=Object.getOwnPropertyDescriptor(i,s);(!c||("get"in c?!i.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(r,o,c)}:function(r,i,s,o){o===void 0&&(o=s),r[o]=i[s]}),t=ct&&ct.__exportStar||function(r,i){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,r,s)};Object.defineProperty(n,"__esModule",{value:!0}),t(nr,n),t(Mf,n),t(Ot,n),t(w1,n),t(Ss,n),t(ku,n),t(YO,n),t(Lf,n),t(ZO,n),t(XO,n),t(Nu,n),t(ek,n),t(Ts,n),t(tk,n),t(nk,n),t(rk,n),t(ik,n)})(fae);Object.defineProperty(m1,"__esModule",{value:!0});m1.SubscriptionManager=void 0;const Hue=V9,Wue=F9,GT=()=>{};class zue{constructor(e){const t=new Hue.PollingBlockTracker({provider:e,pollingInterval:15e3,setSkipCacheFlag:!0}),{events:r,middleware:i}=Wue({blockTracker:t,provider:e});this.events=r,this.subscriptionMiddleware=i}async handleRequest(e){const t={};return await this.subscriptionMiddleware(e,t,GT,GT),t}destroy(){this.subscriptionMiddleware.destroy()}}m1.SubscriptionManager=zue;var dk=ct&&ct.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.CoinbaseWalletProvider=void 0;const Gue=dk(z0),Kue=Mse,xt=Sf,st=Re,Que=xf,KT=Mi,Eg=nh,ni=Xu,Lw=dk(oae),Yh=th,Jue=Ou,Yue=m1,QT="DefaultChainId",JT="DefaultJsonRpcUrl";class Zue extends Kue.EventEmitter{constructor(e){var t,r;super(),this._filterPolyfill=new Jue.FilterPolyfill(this),this._subscriptionManager=new Yue.SubscriptionManager(this),this._relay=null,this._addresses=[],this.hasMadeFirstChainChangedEmission=!1,this.setProviderInfo=this.setProviderInfo.bind(this),this.updateProviderInfo=this.updateProviderInfo.bind(this),this.getChainId=this.getChainId.bind(this),this.setAppInfo=this.setAppInfo.bind(this),this.enable=this.enable.bind(this),this.close=this.close.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this),this.request=this.request.bind(this),this._setAddresses=this._setAddresses.bind(this),this.scanQRCode=this.scanQRCode.bind(this),this.genericRequest=this.genericRequest.bind(this),this._chainIdFromOpts=e.chainId,this._jsonRpcUrlFromOpts=e.jsonRpcUrl,this._overrideIsMetaMask=e.overrideIsMetaMask,this._relayProvider=e.relayProvider,this._storage=e.storage,this._relayEventManager=e.relayEventManager,this.diagnostic=e.diagnosticLogger,this.reloadOnDisconnect=!0,this.isCoinbaseWallet=(t=e.overrideIsCoinbaseWallet)!==null&&t!==void 0?t:!0,this.isCoinbaseBrowser=(r=e.overrideIsCoinbaseBrowser)!==null&&r!==void 0?r:!1,this.qrUrl=e.qrUrl;const i=this.getChainId(),s=(0,st.prepend0x)(i.toString(16));this.emit("connect",{chainIdStr:s});const o=this._storage.getItem(KT.LOCAL_STORAGE_ADDRESSES_KEY);if(o){const c=o.split(" ");c[0]!==""&&(this._addresses=c.map(l=>(0,st.ensureAddressString)(l)),this.emit("accountsChanged",c))}this._subscriptionManager.events.on("notification",c=>{this.emit("message",{type:c.method,data:c.params})}),this._isAuthorized()&&this.initializeRelay(),window.addEventListener("message",c=>{var l;if(!(c.origin!==location.origin||c.source!==window)&&c.data.type==="walletLinkMessage"&&c.data.data.action==="dappChainSwitched"){const h=c.data.data.chainId,f=(l=c.data.data.jsonRpcUrl)!==null&&l!==void 0?l:this.jsonRpcUrl;this.updateProviderInfo(f,Number(h))}})}get selectedAddress(){return this._addresses[0]||void 0}get networkVersion(){return this.getChainId().toString(10)}get chainId(){return(0,st.prepend0x)(this.getChainId().toString(16))}get isWalletLink(){return!0}get isMetaMask(){return this._overrideIsMetaMask}get host(){return this.jsonRpcUrl}get connected(){return!0}isConnected(){return!0}get jsonRpcUrl(){var e;return(e=this._storage.getItem(JT))!==null&&e!==void 0?e:this._jsonRpcUrlFromOpts}set jsonRpcUrl(e){this._storage.setItem(JT,e)}disableReloadOnDisconnect(){this.reloadOnDisconnect=!1}setProviderInfo(e,t){this.isCoinbaseBrowser||(this._chainIdFromOpts=t,this._jsonRpcUrlFromOpts=e),this.updateProviderInfo(this.jsonRpcUrl,this.getChainId())}updateProviderInfo(e,t){this.jsonRpcUrl=e;const r=this.getChainId();this._storage.setItem(QT,t.toString(10)),((0,st.ensureIntNumber)(t)!==r||!this.hasMadeFirstChainChangedEmission)&&(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}async watchAsset(e,t,r,i,s,o){const l=await(await this.initializeRelay()).watchAsset(e,t,r,i,s,o?.toString()).promise;return(0,ni.isErrorResponse)(l)?!1:!!l.result}async addEthereumChain(e,t,r,i,s,o){var c,l;if((0,st.ensureIntNumber)(e)===this.getChainId())return!1;const h=await this.initializeRelay(),f=h.inlineAddEthereumChain(e.toString());!this._isAuthorized()&&!f&&await h.requestEthereumAccounts().promise;const m=await h.addEthereumChain(e.toString(),t,s,r,i,o).promise;return(0,ni.isErrorResponse)(m)?!1:(((c=m.result)===null||c===void 0?void 0:c.isApproved)===!0&&this.updateProviderInfo(t[0],e),((l=m.result)===null||l===void 0?void 0:l.isApproved)===!0)}async switchEthereumChain(e){const r=await(await this.initializeRelay()).switchEthereumChain(e.toString(10),this.selectedAddress||void 0).promise;if((0,ni.isErrorResponse)(r)){if(!r.errorCode)return;throw r.errorCode===xt.standardErrorCodes.provider.unsupportedChain?xt.standardErrors.provider.unsupportedChain():xt.standardErrors.provider.custom({message:r.errorMessage,code:r.errorCode})}const i=r.result;i.isApproved&&i.rpcUrl.length>0&&this.updateProviderInfo(i.rpcUrl,e)}setAppInfo(e,t){this.initializeRelay().then(r=>r.setAppInfo(e,t))}async enable(){var e;return(e=this.diagnostic)===null||e===void 0||e.log(Yh.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?Eg.Session.hash(this._relay.session.id):void 0}),this._isAuthorized()?[...this._addresses]:await this.send("eth_requestAccounts")}async close(){(await this.initializeRelay()).resetAndReload()}send(e,t){try{const r=this._send(e,t);if(r instanceof Promise)return r.catch(i=>{throw(0,xt.serializeError)(i,e)})}catch(r){throw(0,xt.serializeError)(r,e)}}_send(e,t){if(typeof e=="string"){const i=e,s=Array.isArray(t)?t:t!==void 0?[t]:[],o={jsonrpc:"2.0",id:0,method:i,params:s};return this._sendRequestAsync(o).then(c=>c.result)}if(typeof t=="function"){const i=e,s=t;return this._sendAsync(i,s)}if(Array.isArray(e))return e.map(s=>this._sendRequest(s));const r=e;return this._sendRequest(r)}async sendAsync(e,t){try{return this._sendAsync(e,t).catch(r=>{throw(0,xt.serializeError)(r,e)})}catch(r){return Promise.reject((0,xt.serializeError)(r,e))}}async _sendAsync(e,t){if(typeof t!="function")throw new Error("callback is required");if(Array.isArray(e)){const i=t;this._sendMultipleRequestsAsync(e).then(s=>i(null,s)).catch(s=>i(s,null));return}const r=t;return this._sendRequestAsync(e).then(i=>r(null,i)).catch(i=>r(i,null))}async request(e){try{return this._request(e).catch(t=>{throw(0,xt.serializeError)(t,e.method)})}catch(t){return Promise.reject((0,xt.serializeError)(t,e.method))}}async _request(e){if(!e||typeof e!="object"||Array.isArray(e))throw xt.standardErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:e});const{method:t,params:r}=e;if(typeof t!="string"||t.length===0)throw xt.standardErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:e});if(r!==void 0&&!Array.isArray(r)&&(typeof r!="object"||r===null))throw xt.standardErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:e});const i=r===void 0?[]:r,s=this._relayEventManager.makeRequestId();return(await this._sendRequestAsync({method:t,params:i,jsonrpc:"2.0",id:s})).result}async scanQRCode(e){const r=await(await this.initializeRelay()).scanQRCode((0,st.ensureRegExpString)(e)).promise;if((0,ni.isErrorResponse)(r))throw(0,xt.serializeError)(r.errorMessage,"scanQRCode");if(typeof r.result!="string")throw(0,xt.serializeError)("result was not a string","scanQRCode");return r.result}async genericRequest(e,t){const i=await(await this.initializeRelay()).genericRequest(e,t).promise;if((0,ni.isErrorResponse)(i))throw(0,xt.serializeError)(i.errorMessage,"generic");if(typeof i.result!="string")throw(0,xt.serializeError)("result was not a string","generic");return i.result}async connectAndSignIn(e){var t;(t=this.diagnostic)===null||t===void 0||t.log(Yh.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::connectAndSignIn",sessionIdHash:this._relay?Eg.Session.hash(this._relay.session.id):void 0});let r;try{const s=await this.initializeRelay();if(!(s instanceof Que.MobileRelay))throw new Error("connectAndSignIn is only supported on mobile");if(r=await s.connectAndSignIn(e).promise,(0,ni.isErrorResponse)(r))throw new Error(r.errorMessage)}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?xt.standardErrors.provider.userRejectedRequest("User denied account authorization"):s}if(!r.result)throw new Error("accounts received is empty");const{accounts:i}=r.result;return this._setAddresses(i),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),r.result}async selectProvider(e){const r=await(await this.initializeRelay()).selectProvider(e).promise;if((0,ni.isErrorResponse)(r))throw(0,xt.serializeError)(r.errorMessage,"selectProvider");if(typeof r.result!="string")throw(0,xt.serializeError)("result was not a string","selectProvider");return r.result}supportsSubscriptions(){return!1}subscribe(){throw new Error("Subscriptions are not supported")}unsubscribe(){throw new Error("Subscriptions are not supported")}disconnect(){return!0}_sendRequest(e){const t={jsonrpc:"2.0",id:e.id},{method:r}=e;if(t.result=this._handleSynchronousMethods(e),t.result===void 0)throw new Error(`Coinbase Wallet does not support calling ${r} synchronously without a callback. Please provide a callback parameter to call ${r} asynchronously.`);return t}_setAddresses(e,t){if(!Array.isArray(e))throw new Error("addresses is not an array");const r=e.map(i=>(0,st.ensureAddressString)(i));JSON.stringify(r)!==JSON.stringify(this._addresses)&&(this._addresses=r,this.emit("accountsChanged",this._addresses),this._storage.setItem(KT.LOCAL_STORAGE_ADDRESSES_KEY,r.join(" ")))}_sendRequestAsync(e){return new Promise((t,r)=>{try{const i=this._handleSynchronousMethods(e);if(i!==void 0)return t({jsonrpc:"2.0",id:e.id,result:i});const s=this._handleAsynchronousFilterMethods(e);if(s!==void 0){s.then(c=>t(Object.assign(Object.assign({},c),{id:e.id}))).catch(c=>r(c));return}const o=this._handleSubscriptionMethods(e);if(o!==void 0){o.then(c=>t({jsonrpc:"2.0",id:e.id,result:c.result})).catch(c=>r(c));return}}catch(i){return r(i)}this._handleAsynchronousMethods(e).then(i=>i&&t(Object.assign(Object.assign({},i),{id:e.id}))).catch(i=>r(i))})}_sendMultipleRequestsAsync(e){return Promise.all(e.map(t=>this._sendRequestAsync(t)))}_handleSynchronousMethods(e){const{method:t}=e,r=e.params||[];switch(t){case"eth_accounts":return this._eth_accounts();case"eth_coinbase":return this._eth_coinbase();case"eth_uninstallFilter":return this._eth_uninstallFilter(r);case"net_version":return this._net_version();case"eth_chainId":return this._eth_chainId();default:return}}async _handleAsynchronousMethods(e){const{method:t}=e,r=e.params||[];switch(t){case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_sign":return this._eth_sign(r);case"eth_ecRecover":return this._eth_ecRecover(r);case"personal_sign":return this._personal_sign(r);case"personal_ecRecover":return this._personal_ecRecover(r);case"eth_signTransaction":return this._eth_signTransaction(r);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(r);case"eth_sendTransaction":return this._eth_sendTransaction(r);case"eth_signTypedData_v1":return this._eth_signTypedData_v1(r);case"eth_signTypedData_v2":return this._throwUnsupportedMethodError();case"eth_signTypedData_v3":return this._eth_signTypedData_v3(r);case"eth_signTypedData_v4":case"eth_signTypedData":return this._eth_signTypedData_v4(r);case"cbWallet_arbitrary":return this._cbwallet_arbitrary(r);case"wallet_addEthereumChain":return this._wallet_addEthereumChain(r);case"wallet_switchEthereumChain":return this._wallet_switchEthereumChain(r);case"wallet_watchAsset":return this._wallet_watchAsset(r)}return(await this.initializeRelay()).makeEthereumJSONRPCRequest(e,this.jsonRpcUrl).catch(s=>{var o;throw(s.code===xt.standardErrorCodes.rpc.methodNotFound||s.code===xt.standardErrorCodes.rpc.methodNotSupported)&&((o=this.diagnostic)===null||o===void 0||o.log(Yh.EVENTS.METHOD_NOT_IMPLEMENTED,{method:e.method,sessionIdHash:this._relay?Eg.Session.hash(this._relay.session.id):void 0})),s})}_handleAsynchronousFilterMethods(e){const{method:t}=e,r=e.params||[];switch(t){case"eth_newFilter":return this._eth_newFilter(r);case"eth_newBlockFilter":return this._eth_newBlockFilter();case"eth_newPendingTransactionFilter":return this._eth_newPendingTransactionFilter();case"eth_getFilterChanges":return this._eth_getFilterChanges(r);case"eth_getFilterLogs":return this._eth_getFilterLogs(r)}}_handleSubscriptionMethods(e){switch(e.method){case"eth_subscribe":case"eth_unsubscribe":return this._subscriptionManager.handleRequest(e)}}_isKnownAddress(e){try{const t=(0,st.ensureAddressString)(e);return this._addresses.map(i=>(0,st.ensureAddressString)(i)).includes(t)}catch{}return!1}_ensureKnownAddress(e){var t;if(!this._isKnownAddress(e))throw(t=this.diagnostic)===null||t===void 0||t.log(Yh.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}_prepareTransactionParams(e){const t=e.from?(0,st.ensureAddressString)(e.from):this.selectedAddress;if(!t)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(t);const r=e.to?(0,st.ensureAddressString)(e.to):null,i=e.value!=null?(0,st.ensureBN)(e.value):new Gue.default(0),s=e.data?(0,st.ensureBuffer)(e.data):Buffer.alloc(0),o=e.nonce!=null?(0,st.ensureIntNumber)(e.nonce):null,c=e.gasPrice!=null?(0,st.ensureBN)(e.gasPrice):null,l=e.maxFeePerGas!=null?(0,st.ensureBN)(e.maxFeePerGas):null,h=e.maxPriorityFeePerGas!=null?(0,st.ensureBN)(e.maxPriorityFeePerGas):null,f=e.gas!=null?(0,st.ensureBN)(e.gas):null,m=e.chainId?(0,st.ensureIntNumber)(e.chainId):this.getChainId();return{fromAddress:t,toAddress:r,weiValue:i,data:s,nonce:o,gasPriceInWei:c,maxFeePerGas:l,maxPriorityFeePerGas:h,gasLimit:f,chainId:m}}_isAuthorized(){return this._addresses.length>0}_requireAuthorization(){if(!this._isAuthorized())throw xt.standardErrors.provider.unauthorized({})}_throwUnsupportedMethodError(){throw xt.standardErrors.provider.unsupportedMethod({})}async _signEthereumMessage(e,t,r,i){this._ensureKnownAddress(t);try{const o=await(await this.initializeRelay()).signEthereumMessage(e,t,r,i).promise;if((0,ni.isErrorResponse)(o))throw new Error(o.errorMessage);return{jsonrpc:"2.0",id:0,result:o.result}}catch(s){throw typeof s.message=="string"&&s.message.match(/(denied|rejected)/i)?xt.standardErrors.provider.userRejectedRequest("User denied message signature"):s}}async _ethereumAddressFromSignedMessage(e,t,r){const s=await(await this.initializeRelay()).ethereumAddressFromSignedMessage(e,t,r).promise;if((0,ni.isErrorResponse)(s))throw new Error(s.errorMessage);return{jsonrpc:"2.0",id:0,result:s.result}}_eth_accounts(){return[...this._addresses]}_eth_coinbase(){return this.selectedAddress||null}_net_version(){return this.getChainId().toString(10)}_eth_chainId(){return(0,st.hexStringFromIntNumber)(this.getChainId())}getChainId(){const e=this._storage.getItem(QT);if(!e)return(0,st.ensureIntNumber)(this._chainIdFromOpts);const t=parseInt(e,10);return(0,st.ensureIntNumber)(t)}async _eth_requestAccounts(){var e;if((e=this.diagnostic)===null||e===void 0||e.log(Yh.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?Eg.Session.hash(this._relay.session.id):void 0}),this._isAuthorized())return Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses});let t;try{if(t=await(await this.initializeRelay()).requestEthereumAccounts().promise,(0,ni.isErrorResponse)(t))throw new Error(t.errorMessage)}catch(r){throw typeof r.message=="string"&&r.message.match(/(denied|rejected)/i)?xt.standardErrors.provider.userRejectedRequest("User denied account authorization"):r}if(!t.result)throw new Error("accounts received is empty");return this._setAddresses(t.result),this.isCoinbaseBrowser||await this.switchEthereumChain(this.getChainId()),{jsonrpc:"2.0",id:0,result:this._addresses}}_eth_sign(e){this._requireAuthorization();const t=(0,st.ensureAddressString)(e[0]),r=(0,st.ensureBuffer)(e[1]);return this._signEthereumMessage(r,t,!1)}_eth_ecRecover(e){const t=(0,st.ensureBuffer)(e[0]),r=(0,st.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!1)}_personal_sign(e){this._requireAuthorization();const t=(0,st.ensureBuffer)(e[0]),r=(0,st.ensureAddressString)(e[1]);return this._signEthereumMessage(t,r,!0)}_personal_ecRecover(e){const t=(0,st.ensureBuffer)(e[0]),r=(0,st.ensureBuffer)(e[1]);return this._ethereumAddressFromSignedMessage(t,r,!0)}async _eth_signTransaction(e){this._requireAuthorization();const t=this._prepareTransactionParams(e[0]||{});try{const i=await(await this.initializeRelay()).signEthereumTransaction(t).promise;if((0,ni.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(r){throw typeof r.message=="string"&&r.message.match(/(denied|rejected)/i)?xt.standardErrors.provider.userRejectedRequest("User denied transaction signature"):r}}async _eth_sendRawTransaction(e){const t=(0,st.ensureBuffer)(e[0]),i=await(await this.initializeRelay()).submitEthereumTransaction(t,this.getChainId()).promise;if((0,ni.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}async _eth_sendTransaction(e){this._requireAuthorization();const t=this._prepareTransactionParams(e[0]||{});try{const i=await(await this.initializeRelay()).signAndSubmitEthereumTransaction(t).promise;if((0,ni.isErrorResponse)(i))throw new Error(i.errorMessage);return{jsonrpc:"2.0",id:0,result:i.result}}catch(r){throw typeof r.message=="string"&&r.message.match(/(denied|rejected)/i)?xt.standardErrors.provider.userRejectedRequest("User denied transaction signature"):r}}async _eth_signTypedData_v1(e){this._requireAuthorization();const t=(0,st.ensureParsedJSONObject)(e[0]),r=(0,st.ensureAddressString)(e[1]);this._ensureKnownAddress(r);const i=Lw.default.hashForSignTypedDataLegacy({data:t}),s=JSON.stringify(t,null,2);return this._signEthereumMessage(i,r,!1,s)}async _eth_signTypedData_v3(e){this._requireAuthorization();const t=(0,st.ensureAddressString)(e[0]),r=(0,st.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);const i=Lw.default.hashForSignTypedData_v3({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,t,!1,s)}async _eth_signTypedData_v4(e){this._requireAuthorization();const t=(0,st.ensureAddressString)(e[0]),r=(0,st.ensureParsedJSONObject)(e[1]);this._ensureKnownAddress(t);const i=Lw.default.hashForSignTypedData_v4({data:r}),s=JSON.stringify(r,null,2);return this._signEthereumMessage(i,t,!1,s)}async _cbwallet_arbitrary(e){const t=e[0],r=e[1];if(typeof r!="string")throw new Error("parameter must be a string");if(typeof t!="object"||t===null)throw new Error("parameter must be an object");return{jsonrpc:"2.0",id:0,result:await this.genericRequest(t,r)}}async _wallet_addEthereumChain(e){var t,r,i,s;const o=e[0];if(((t=o.rpcUrls)===null||t===void 0?void 0:t.length)===0)return{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}};if(!o.chainName||o.chainName.trim()==="")throw xt.standardErrors.rpc.invalidParams("chainName is a required field");if(!o.nativeCurrency)throw xt.standardErrors.rpc.invalidParams("nativeCurrency is a required field");const c=parseInt(o.chainId,16);return await this.addEthereumChain(c,(r=o.rpcUrls)!==null&&r!==void 0?r:[],(i=o.blockExplorerUrls)!==null&&i!==void 0?i:[],o.chainName,(s=o.iconUrls)!==null&&s!==void 0?s:[],o.nativeCurrency)?{jsonrpc:"2.0",id:0,result:null}:{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}}}async _wallet_switchEthereumChain(e){const t=e[0];return await this.switchEthereumChain(parseInt(t.chainId,16)),{jsonrpc:"2.0",id:0,result:null}}async _wallet_watchAsset(e){const t=Array.isArray(e)?e[0]:e;if(!t.type)throw xt.standardErrors.rpc.invalidParams("Type is required");if(t?.type!=="ERC20")throw xt.standardErrors.rpc.invalidParams(`Asset of type '${t.type}' is not supported`);if(!t?.options)throw xt.standardErrors.rpc.invalidParams("Options are required");if(!t?.options.address)throw xt.standardErrors.rpc.invalidParams("Address is required");const r=this.getChainId(),{address:i,symbol:s,image:o,decimals:c}=t.options;return{jsonrpc:"2.0",id:0,result:await this.watchAsset(t.type,i,s,c,o,r)}}_eth_uninstallFilter(e){const t=(0,st.ensureHexString)(e[0]);return this._filterPolyfill.uninstallFilter(t)}async _eth_newFilter(e){const t=e[0];return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newFilter(t)}}async _eth_newBlockFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newBlockFilter()}}async _eth_newPendingTransactionFilter(){return{jsonrpc:"2.0",id:0,result:await this._filterPolyfill.newPendingTransactionFilter()}}_eth_getFilterChanges(e){const t=(0,st.ensureHexString)(e[0]);return this._filterPolyfill.getFilterChanges(t)}_eth_getFilterLogs(e){const t=(0,st.ensureHexString)(e[0]);return this._filterPolyfill.getFilterLogs(t)}initializeRelay(){return this._relay?Promise.resolve(this._relay):this._relayProvider().then(e=>(e.setAccountsCallback((t,r)=>this._setAddresses(t,r)),e.setChainCallback((t,r)=>{this.updateProviderInfo(r,parseInt(t,10))}),e.setDappDefaultChainCallback(this._chainIdFromOpts),this._relay=e,e))}}Cu.CoinbaseWalletProvider=Zue;var S1={};Object.defineProperty(S1,"__esModule",{value:!0});S1.RelayEventManager=void 0;const Xue=Re;class ehe{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const e=this._nextRequestId,t=(0,Xue.prepend0x)(e.toString(16));return this.callbacks.get(t)&&this.callbacks.delete(t),e}}S1.RelayEventManager=ehe;Object.defineProperty(Jd,"__esModule",{value:!0});Jd.CoinbaseWalletSDK=void 0;const the=Gm,nhe=Km,YT=Re,rhe=Xm,ihe=Cu,she=xf,ohe=Df,ahe=S1,che=Of,lhe=Pf,fk=eh;class T1{constructor(e){var t,r,i;this._appName="",this._appLogoUrl=null,this._relay=null,this._relayEventManager=null;const s=e.linkAPIUrl||nhe.LINK_API_URL;typeof e.overrideIsMetaMask>"u"?this._overrideIsMetaMask=!1:this._overrideIsMetaMask=e.overrideIsMetaMask,this._overrideIsCoinbaseWallet=(t=e.overrideIsCoinbaseWallet)!==null&&t!==void 0?t:!0,this._overrideIsCoinbaseBrowser=(r=e.overrideIsCoinbaseBrowser)!==null&&r!==void 0?r:!1,this._diagnosticLogger=e.diagnosticLogger,this._reloadOnDisconnect=(i=e.reloadOnDisconnect)!==null&&i!==void 0?i:!0;const o=new URL(s),c=`${o.protocol}//${o.host}`;if(this._storage=new rhe.ScopedLocalStorage(`-walletlink:${c}`),this._storage.setItem("version",T1.VERSION),this.walletExtension||this.coinbaseBrowser)return;this._relayEventManager=new ahe.RelayEventManager;const l=(0,YT.isMobileWeb)(),h=e.uiConstructor||(m=>l?new ohe.MobileRelayUI(m):new che.WalletLinkRelayUI(m)),f={linkAPIUrl:s,version:fk.LIB_VERSION,darkMode:!!e.darkMode,headlessMode:!!e.headlessMode,uiConstructor:h,storage:this._storage,relayEventManager:this._relayEventManager,diagnosticLogger:this._diagnosticLogger,reloadOnDisconnect:this._reloadOnDisconnect,enableMobileWalletLink:e.enableMobileWalletLink};this._relay=l?new she.MobileRelay(f):new lhe.WalletLinkRelay(f),this.setAppInfo(e.appName,e.appLogoUrl),!e.headlessMode&&this._relay.attachUI()}makeWeb3Provider(e="",t=1){const r=this.walletExtension;if(r)return this.isCipherProvider(r)||r.setProviderInfo(e,t),this._reloadOnDisconnect===!1&&typeof r.disableReloadOnDisconnect=="function"&&r.disableReloadOnDisconnect(),r;const i=this.coinbaseBrowser;if(i)return i;const s=this._relay;if(!s||!this._relayEventManager||!this._storage)throw new Error("Relay not initialized, should never happen");return e||s.setConnectDisabled(!0),new ihe.CoinbaseWalletProvider({relayProvider:()=>Promise.resolve(s),relayEventManager:this._relayEventManager,storage:this._storage,jsonRpcUrl:e,chainId:t,qrUrl:this.getQrUrl(),diagnosticLogger:this._diagnosticLogger,overrideIsMetaMask:this._overrideIsMetaMask,overrideIsCoinbaseWallet:this._overrideIsCoinbaseWallet,overrideIsCoinbaseBrowser:this._overrideIsCoinbaseBrowser})}setAppInfo(e,t){var r;this._appName=e||"DApp",this._appLogoUrl=t||(0,YT.getFavicon)();const i=this.walletExtension;i?this.isCipherProvider(i)||i.setAppInfo(this._appName,this._appLogoUrl):(r=this._relay)===null||r===void 0||r.setAppInfo(this._appName,this._appLogoUrl)}disconnect(){var e;const t=this===null||this===void 0?void 0:this.walletExtension;t?t.close():(e=this._relay)===null||e===void 0||e.resetAndReload()}getQrUrl(){var e,t;return(t=(e=this._relay)===null||e===void 0?void 0:e.getQRCodeUrl())!==null&&t!==void 0?t:null}getCoinbaseWalletLogo(e,t=240){return(0,the.walletLogo)(e,t)}get walletExtension(){var e;return(e=window.coinbaseWalletExtension)!==null&&e!==void 0?e:window.walletLinkExtension}get coinbaseBrowser(){var e,t;try{const r=(e=window.ethereum)!==null&&e!==void 0?e:(t=window.top)===null||t===void 0?void 0:t.ethereum;return r&&"isCoinbaseBrowser"in r&&r.isCoinbaseBrowser?r:void 0}catch{return}}isCipherProvider(e){return typeof e.isCipher=="boolean"&&e.isCipher}}Jd.CoinbaseWalletSDK=T1;T1.VERSION=fk.LIB_VERSION;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CoinbaseWalletProvider=n.CoinbaseWalletSDK=void 0;const e=Jd,t=Cu;var r=Jd;Object.defineProperty(n,"CoinbaseWalletSDK",{enumerable:!0,get:function(){return r.CoinbaseWalletSDK}});var i=Cu;Object.defineProperty(n,"CoinbaseWalletProvider",{enumerable:!0,get:function(){return i.CoinbaseWalletProvider}}),n.default=e.CoinbaseWalletSDK,typeof window<"u"&&(window.CoinbaseWalletSDK=e.CoinbaseWalletSDK,window.CoinbaseWalletProvider=t.CoinbaseWalletProvider,window.WalletLink=e.CoinbaseWalletSDK,window.WalletLinkProvider=t.CoinbaseWalletProvider)})(oO);const uhe=Lv(oO),uye=Object.freeze(Object.defineProperty({__proto__:null,default:uhe},Symbol.toStringTag,{value:"Module"}));let ZT=class extends xE{constructor(e){super(e),this.events=new Pr.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(da(e.method,e.params||[],e.id||qm().toString()),t)}async requestStrict(e,t){return new Promise(async(r,i)=>{if(!this.connection.connected)try{await this.open()}catch(s){i(s)}this.events.on(`${e.id}`,s=>{ii(s)?i(s.error):r(s.result)});try{await this.connection.send(e,t)}catch(s){i(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Zu(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Uw="Session currently connected",oc="Session currently disconnected",hhe="Session Rejected",dhe="Missing JSON RPC response",fhe='JSON-RPC success response must include "result" field',phe='JSON-RPC error response must include "error" field',ghe='JSON RPC request must have valid "method" value',mhe='JSON RPC request must have valid "id" value',yhe="Missing one of the required parameters: bridge / uri / session",XT="JSON RPC response format is invalid",whe="URI format is invalid",_he="QRCode Modal not provided",eR="User close QRCode Modal",vhe=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],bhe=["wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],n2=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign",...bhe],Sv="WALLETCONNECT_DEEPLINK_CHOICE",Ehe={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"},r2="hex",i2="utf8",Ihe="binary",Ahe="buffer",She="array",The="typed-array",Rhe="array-buffer",R1="0";function Du(n){return new Uint8Array(n)}function s2(n,e=!1){const t=n.toString(r2);return e?$f(t):t}function o2(n){return n.toString(i2)}function pk(n){return n.readUIntBE(0,n.length)}function sh(n){return B9(n)}function fa(n,e=!1){return s2(sh(n),e)}function gk(n){return o2(sh(n))}function mk(n){return pk(sh(n))}function a2(n){return Buffer.from(Mu(n),r2)}function pa(n){return Du(a2(n))}function Che(n){return o2(a2(n))}function xhe(n){return mk(pa(n))}function c2(n){return Buffer.from(n,i2)}function yk(n){return Du(c2(n))}function Phe(n,e=!1){return s2(c2(n),e)}function Ohe(n){const e=parseInt(n,10);return Qhe(Khe(e),"Number can only safely store up to 53 bits"),e}function khe(n){return Lhe(l2(n))}function Nhe(n){return u2(l2(n))}function Dhe(n,e){return Uhe(l2(n),e)}function Mhe(n){return`${n}`}function l2(n){const e=(n>>>0).toString(2);return d2(e)}function Lhe(n){return sh(u2(n))}function u2(n){return new Uint8Array(qhe(n).map(e=>parseInt(e,2)))}function Uhe(n,e){return fa(u2(n),e)}function $he(n){return!(typeof n!="string"||!new RegExp(/^[01]+$/).test(n)||n.length%8!==0)}function wk(n,e){return!(typeof n!="string"||!n.match(/^0x[0-9A-Fa-f]*$/)||e&&n.length!==2+2*e)}function C1(n){return Buffer.isBuffer(n)}function h2(n){return K9.strict(n)&&!C1(n)}function _k(n){return!h2(n)&&!C1(n)&&typeof n.byteLength<"u"}function Vhe(n){return C1(n)?Ahe:h2(n)?The:_k(n)?Rhe:Array.isArray(n)?She:typeof n}function Fhe(n){return $he(n)?Ihe:wk(n)?r2:i2}function Bhe(...n){return Buffer.concat(n)}function vk(...n){let e=[];return n.forEach(t=>e=e.concat(Array.from(t))),new Uint8Array([...e])}function jhe(n,e=8){const t=n%e;return t?(n-t)/e*e+e:n}function qhe(n,e=8){const t=d2(n).match(new RegExp(`.{${e}}`,"gi"));return Array.from(t||[])}function d2(n,e=8,t=R1){return Hhe(n,jhe(n.length,e),t)}function Hhe(n,e,t=R1){return Jhe(n,e,!0,t)}function Mu(n){return n.replace(/^0x/,"")}function $f(n){return n.startsWith("0x")?n:`0x${n}`}function Whe(n){return n=Mu(n),n=d2(n,2),n&&(n=$f(n)),n}function zhe(n){const e=n.startsWith("0x");return n=Mu(n),n=n.startsWith(R1)?n.substring(1):n,e?$f(n):n}function Ghe(n){return typeof n>"u"}function Khe(n){return!Ghe(n)}function Qhe(n,e){if(!n)throw new Error(e)}function Jhe(n,e,t,r=R1){const i=e-n.length;let s=n;return i>0&&(s=r.repeat(i)+n),s}function V0(n){return sh(new Uint8Array(n))}function Yhe(n){return gk(new Uint8Array(n))}function bk(n,e){return fa(new Uint8Array(n),!e)}function Zhe(n){return mk(new Uint8Array(n))}function Xhe(...n){return pa(n.map(e=>fa(new Uint8Array(e))).join("")).buffer}function Ek(n){return Du(n).buffer}function ede(n){return o2(n)}function tde(n,e){return s2(n,!e)}function nde(n){return pk(n)}function rde(...n){return Bhe(...n)}function ide(n){return yk(n).buffer}function sde(n){return c2(n)}function ode(n,e){return Phe(n,!e)}function ade(n){return Ohe(n)}function cde(n){return a2(n)}function Ik(n){return pa(n).buffer}function lde(n){return Che(n)}function ude(n){return xhe(n)}function hde(n){return khe(n)}function dde(n){return Nhe(n).buffer}function fde(n){return Mhe(n)}function Ak(n,e){return Dhe(Number(n),!e)}const pde=IC,gde=AC,mde=SC,yde=rm,wde=TC,Sk=im,_de=RC,Tk=Yv,vde=CC,bde=xC,Ede=PC,x1=EC;function P1(n){return CR(n)}function O1(){const n=P1();return n&&n.os?n.os:void 0}function Rk(){const n=O1();return n?n.toLowerCase().includes("android"):!1}function Ck(){const n=O1();return n?n.toLowerCase().includes("ios")||n.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function xk(){return O1()?Rk()||Ck():!1}function Pk(){const n=P1();return n&&n.name?n.name.toLowerCase()==="node":!1}function Ok(){return!Pk()&&!!Sk()}const kk=Ju,Nk=Ia;function f2(n,e){const t=Nk(e),r=x1();r&&r.setItem(n,t)}function p2(n){let e=null,t=null;const r=x1();return r&&(t=r.getItem(n)),e=t&&kk(t),e}function g2(n){const e=x1();e&&e.removeItem(n)}function Tv(){return Xv()}function Ide(n){return Whe(n)}function Ade(n){return $f(n)}function Sde(n){return Mu(n)}function Tde(n){return zhe($f(n))}const Dk=jm;function Qg(){return((e,t)=>{for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t})()}function Rde(){console.warn("DEPRECATION WARNING: This WalletConnect client library will be deprecated in favor of @walletconnect/client. Please check docs.walletconnect.org to learn more about this migration!")}function Mk(n,e){let t;const r=Ehe[n];return r&&(t=`https://${r}.infura.io/v3/${e}`),t}function Lk(n,e){let t;const r=Mk(n,e.infuraId);return e.custom&&e.custom[n]?t=e.custom[n]:r&&(t=r),t}function Cde(n,e){const t=encodeURIComponent(n);return e.universalLink?`${e.universalLink}/wc?uri=${t}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${t}`:""}function xde(n){const e=n.href.split("?")[0];f2(Sv,Object.assign(Object.assign({},n),{href:e}))}function Uk(n,e){return n.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))[0]}function Pde(n,e){let t=n;return e&&(t=e.map(r=>Uk(n,r)).filter(Boolean)),t}function Ode(n,e){return async(...r)=>new Promise((i,s)=>{const o=(c,l)=>{(c===null||typeof c>"u")&&s(c),i(l)};n.apply(e,[...r,o])})}function $k(n){const e=n.message||"Failed or Rejected Request";let t=-32e3;if(n&&!n.code)switch(e){case"Parse error":t=-32700;break;case"Invalid request":t=-32600;break;case"Method not found":t=-32601;break;case"Invalid params":t=-32602;break;case"Internal error":t=-32603;break;default:t=-32e3;break}const r={code:t,message:e};return n.data&&(r.data=n.data),r}const Vk="https://registry.walletconnect.com";function kde(){return Vk+"/api/v2/wallets"}function Nde(){return Vk+"/api/v2/dapps"}function Fk(n,e="mobile"){var t;return{name:n.name||"",shortName:n.metadata.shortName||"",color:n.metadata.colors.primary||"",logo:(t=n.image_url.sm)!==null&&t!==void 0?t:"",universalLink:n[e].universal||"",deepLink:n[e].native||""}}function Dde(n,e="mobile"){return Object.values(n).filter(t=>!!t[e].universal||!!t[e].native).map(t=>Fk(t,e))}function Bk(n){const e=n.indexOf("?")!==-1?n.indexOf("?"):void 0;return typeof e<"u"?n.substr(e):""}function jk(n,e){let t=m2(n);return t=Object.assign(Object.assign({},t),e),n=qk(t),n}function m2(n){return xR.parse(n)}function qk(n){return xR.stringify(n)}function Hk(n){return typeof n.bridge<"u"}function Wk(n){const e=n.indexOf(":"),t=n.indexOf("?")!==-1?n.indexOf("?"):void 0,r=n.substring(0,e),i=n.substring(e+1,t);function s(m){const w=m.split("@");return{handshakeTopic:w[0],version:parseInt(w[1],10)}}const o=s(i),c=typeof t<"u"?n.substr(t):"";function l(m){const y=m2(m);return{key:y.key||"",bridge:y.bridge||""}}const h=l(c);return Object.assign(Object.assign({protocol:r},o),h)}function Mde(n){return n===""||typeof n=="string"&&n.trim()===""}function Lde(n){return!(n&&n.length)}function Ude(n){return C1(n)}function $de(n){return h2(n)}function Vde(n){return _k(n)}function Fde(n){return Vhe(n)}function Bde(n){return Fhe(n)}function jde(n,e){return wk(n,e)}function qde(n){return typeof n.params=="object"}function zk(n){return typeof n.method<"u"}function Gl(n){return typeof n.result<"u"}function Zd(n){return typeof n.error<"u"}function Rv(n){return typeof n.event<"u"}function Gk(n){return vhe.includes(n)||n.startsWith("wc_")}function Kk(n){return n.method.startsWith("wc_")?!0:!n2.includes(n.method)}const Hde=Object.freeze(Object.defineProperty({__proto__:null,addHexPrefix:Ade,appendToQueryString:jk,concatArrayBuffers:Xhe,concatBuffers:rde,convertArrayBufferToBuffer:V0,convertArrayBufferToHex:bk,convertArrayBufferToNumber:Zhe,convertArrayBufferToUtf8:Yhe,convertBufferToArrayBuffer:Ek,convertBufferToHex:tde,convertBufferToNumber:nde,convertBufferToUtf8:ede,convertHexToArrayBuffer:Ik,convertHexToBuffer:cde,convertHexToNumber:ude,convertHexToUtf8:lde,convertNumberToArrayBuffer:dde,convertNumberToBuffer:hde,convertNumberToHex:Ak,convertNumberToUtf8:fde,convertUtf8ToArrayBuffer:ide,convertUtf8ToBuffer:sde,convertUtf8ToHex:ode,convertUtf8ToNumber:ade,detectEnv:P1,detectOS:O1,formatIOSMobile:Cde,formatMobileRegistry:Dde,formatMobileRegistryEntry:Fk,formatQueryString:qk,formatRpcError:$k,getClientMeta:Tv,getCrypto:bde,getCryptoOrThrow:vde,getDappRegistryUrl:Nde,getDocument:yde,getDocumentOrThrow:mde,getEncoding:Bde,getFromWindow:pde,getFromWindowOrThrow:gde,getInfuraRpcUrl:Mk,getLocal:p2,getLocalStorage:x1,getLocalStorageOrThrow:Ede,getLocation:Tk,getLocationOrThrow:_de,getMobileLinkRegistry:Pde,getMobileRegistryEntry:Uk,getNavigator:Sk,getNavigatorOrThrow:wde,getQueryString:Bk,getRpcUrl:Lk,getType:Fde,getWalletRegistryUrl:kde,isAndroid:Rk,isArrayBuffer:Vde,isBrowser:Ok,isBuffer:Ude,isEmptyArray:Lde,isEmptyString:Mde,isHexString:jde,isIOS:Ck,isInternalEvent:Rv,isJsonRpcRequest:zk,isJsonRpcResponseError:Zd,isJsonRpcResponseSuccess:Gl,isJsonRpcSubscription:qde,isMobile:xk,isNode:Pk,isReservedEvent:Gk,isSilentPayload:Kk,isTypedArray:$de,isWalletConnectSession:Hk,logDeprecationWarning:Rde,parseQueryString:m2,parseWalletConnectUri:Wk,payloadId:Dk,promisify:Ode,removeHexLeadingZeros:Tde,removeHexPrefix:Sde,removeLocal:g2,safeJsonParse:kk,safeJsonStringify:Nk,sanitizeHex:Ide,saveMobileLinkInfo:xde,setLocal:f2,uuid:Qg},Symbol.toStringTag,{value:"Module"}));class Wde{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(e,t){this._eventEmitters.push({event:e,callback:t})}trigger(e){let t=[];e&&(t=this._eventEmitters.filter(r=>r.event===e)),t.forEach(r=>{r.callback()})}}const zde=typeof global.WebSocket<"u"?global.WebSocket:require("ws");class Gde{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new Wde,!e.url||typeof e.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return this.readyState===0}set connected(e){}get connected(){return this.readyState===1}set closing(e){}get closing(){return this.readyState===2}set closed(e){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(e,t,r){if(!t||typeof t!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:t,type:"pub",payload:e,silent:!!r})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,t){this._events.push({event:e,callback:t})}_socketCreate(){if(this._nextSocket)return;const e=Kde(this._url,this._protocol,this._version);if(this._nextSocket=new zde(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=t=>this._socketReceive(t),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=t=>this._socketError(t),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const t=JSON.stringify(e);this._socket&&this._socket.readyState===1?this._socket.send(t):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let t;try{t=JSON.parse(e.data)}catch{return}if(this._socketSend({topic:t.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const r=this._events.filter(i=>i.event==="message");r&&r.length&&r.forEach(i=>i.callback(t))}}_socketError(e){const t=this._events.filter(r=>r.event==="error");t&&t.length&&t.forEach(r=>r.callback(e))}_queueSubscriptions(){this._subscriptions.forEach(t=>this._queue.push({topic:t,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach(t=>this._socketSend(t)),this._queue=[]}}function Kde(n,e,t){var r,i;const o=(n.startsWith("https")?n.replace("https","wss"):n.startsWith("http")?n.replace("http","ws"):n).split("?"),c=Ok()?{protocol:e,version:t,env:"browser",host:((r=Tk())===null||r===void 0?void 0:r.host)||""}:{protocol:e,version:t,env:((i=P1())===null||i===void 0?void 0:i.name)||""},l=jk(Bk(o[1]||""),c);return o[0]+"?"+l}class Qde{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter(t=>t.event!==e)}trigger(e){let t=[],r;zk(e)?r=e.method:Gl(e)||Zd(e)?r=`response:${e.id}`:Rv(e)?r=e.event:r="",r&&(t=this._eventEmitters.filter(i=>i.event===r)),(!t||!t.length)&&!Gk(r)&&!Rv(r)&&(t=this._eventEmitters.filter(i=>i.event==="call_request")),t.forEach(i=>{if(Zd(e)){const s=new Error(e.error.message);i.callback(s,null)}else i.callback(null,e)})}}class Jde{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const t=p2(this.storageId);return t&&Hk(t)&&(e=t),e}setSession(e){return f2(this.storageId,e),e}removeSession(){g2(this.storageId)}}const Yde="walletconnect.org",Zde="abcdefghijklmnopqrstuvwxyz0123456789",Qk=Zde.split("").map(n=>`https://${n}.bridge.walletconnect.org`);function Xde(n){let e=n.indexOf("//")>-1?n.split("/")[2]:n.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}function efe(n){return Xde(n).split(".").slice(-2).join(".")}function tfe(){return Math.floor(Math.random()*Qk.length)}function nfe(){return Qk[tfe()]}function rfe(n){return efe(n)===Yde}function ife(n){return rfe(n)?nfe():n}class sfe{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new Qde,this._clientMeta=Tv()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new Jde(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...n2,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error(yhe);e.connectorOpts.bridge&&(this.bridge=ife(e.connectorOpts.bridge)),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const t=e.connectorOpts.session||this._getStorageSession();t&&(this.session=t),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new Gde({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){e&&(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const t=Ik(e);this._key=t}get key(){return this._key?bk(this._key,!0):""}set clientId(e){e&&(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=Qg()),this._clientId}set peerId(e){e&&(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=Tv()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){e&&(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){e&&(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:t,bridge:r,key:i}=this._parseUri(e);this.handshakeTopic=t,this.bridge=r,this.key=i}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,t){const r={event:e,callback:t};this._eventManager.subscribe(r)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const t=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=t.id,this.handshakeTopic=Qg(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(eR)});const r=()=>{this.killSession()};try{const i=await this._sendCallRequest(t);return i&&r(),i}catch(i){throw r(),i}}async connect(e){if(!this._qrcodeModal)throw new Error(_he);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise(async(t,r)=>{this.on("modal_closed",()=>r(new Error(eR))),this.on("connect",(i,s)=>{if(i)return r(i);t(s.params[0])})}))}async createSession(e){if(this._connected)throw new Error(Uw);if(this.pending)return;this._key=await this._generateKey();const t=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=t.id,this.handshakeTopic=Qg(),this._sendSessionRequest(t,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(Uw);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},r={id:this.handshakeId,jsonrpc:"2.0",result:t};this._sendResponse(r),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(Uw);const t=e&&e.message?e.message:hhe,r=this._formatResponse({id:this.handshakeId,error:{message:t}});this._sendResponse(r),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(oc);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},r=this._formatRequest({method:"wc_sessionUpdate",params:[t]});this._sendSessionRequest(r,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const t=e?e.message:"Session Disconnected",r={approved:!1,chainId:null,networkId:null,accounts:null},i=this._formatRequest({method:"wc_sessionUpdate",params:[r]});await this._sendRequest(i),this._handleSessionDisconnect(t)}async sendTransaction(e){if(!this._connected)throw new Error(oc);const t=e,r=this._formatRequest({method:"eth_sendTransaction",params:[t]});return await this._sendCallRequest(r)}async signTransaction(e){if(!this._connected)throw new Error(oc);const t=e,r=this._formatRequest({method:"eth_signTransaction",params:[t]});return await this._sendCallRequest(r)}async signMessage(e){if(!this._connected)throw new Error(oc);const t=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(t)}async signPersonalMessage(e){if(!this._connected)throw new Error(oc);const t=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(t)}async signTypedData(e){if(!this._connected)throw new Error(oc);const t=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(t)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const t=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(t)}unsafeSend(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),new Promise((r,i)=>{this._subscribeToResponse(e.id,(s,o)=>{if(s){i(s);return}if(!o)throw new Error(dhe);r(o)})})}async sendCustomRequest(e,t){if(!this._connected)throw new Error(oc);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return Ak(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params;break;case"personal_sign":e.params;break}const r=this._formatRequest(e);return await this._sendCallRequest(r,t)}approveRequest(e){if(Gl(e)){const t=this._formatResponse(e);this._sendResponse(t)}else throw new Error(fhe)}rejectRequest(e){if(Zd(e)){const t=this._formatResponse(e);this._sendResponse(t)}else throw new Error(phe)}transportClose(){this._transport.close()}async _sendRequest(e,t){const r=this._formatRequest(e),i=await this._encrypt(r),s=typeof t?.topic<"u"?t.topic:this.peerId,o=JSON.stringify(i),c=typeof t?.forcePushNotification<"u"?!t.forcePushNotification:Kk(r);this._transport.send(o,s,c)}async _sendResponse(e){const t=await this._encrypt(e),r=this.peerId,i=JSON.stringify(t);this._transport.send(i,r,!0)}async _sendSessionRequest(e,t,r){this._sendRequest(e,r),this._subscribeToSessionResponse(e.id,t)}_sendCallRequest(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if(typeof e.method>"u")throw new Error(ghe);return{id:typeof e.id>"u"?Dk():e.id,jsonrpc:"2.0",method:e.method,params:typeof e.params>"u"?[]:e.params}}_formatResponse(e){if(typeof e.id>"u")throw new Error(mhe);const t={id:e.id,jsonrpc:"2.0"};if(Zd(e)){const r=$k(e.error);return Object.assign(Object.assign(Object.assign({},t),e),{error:r})}else if(Gl(e))return Object.assign(Object.assign({},t),e);throw new Error(XT)}_handleSessionDisconnect(e){const t=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),g2(Sv)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,t){t?t.approved?(this._connected?(t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),t.peerId&&!this.peerId&&(this.peerId=t.peerId),t.peerMeta&&!this.peerMeta&&(this.peerMeta=t.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let r;try{r=JSON.parse(e.payload)}catch{return}const i=await this._decrypt(r);i&&this._eventManager.trigger(i)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,t){this.on(`response:${e}`,t)}_subscribeToSessionResponse(e,t){this._subscribeToResponse(e,(r,i)=>{if(r){this._handleSessionResponse(r.message);return}Gl(i)?this._handleSessionResponse(t,i.result):i.error&&i.error.message?this._handleSessionResponse(i.error.message):this._handleSessionResponse(t)})}_subscribeToCallResponse(e){return new Promise((t,r)=>{this._subscribeToResponse(e,(i,s)=>{if(i){r(i);return}Gl(s)?t(s.result):s.error&&s.error.message?r(s.error):r(new Error(XT))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(e,t)=>{const{request:r}=t.params[0];if(xk()&&this._signingMethods.includes(r.method)){const i=p2(Sv);i&&(window.location.href=i.href)}}),this.on("wc_sessionRequest",(e,t)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=t.id,this.peerId=t.params[0].peerId,this.peerMeta=t.params[0].peerMeta;const r=Object.assign(Object.assign({},t),{method:"session_request"});this._eventManager.trigger(r)}),this.on("wc_sessionUpdate",(e,t)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",t.params[0])})}_initTransport(){this._transport.on("message",e=>this._handleIncomingMessages(e)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const e=this.protocol,t=this.handshakeTopic,r=this.version,i=encodeURIComponent(this.bridge),s=this.key;return`${e}:${t}@${r}?bridge=${i}&key=${s}`}_parseUri(e){const t=Wk(e);if(t.protocol===this.protocol){if(!t.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const r=t.handshakeTopic;if(!t.bridge)throw Error("Invalid or missing bridge url parameter value");const i=decodeURIComponent(t.bridge);if(!t.key)throw Error("Invalid or missing key parameter value");const s=t.key;return{handshakeTopic:r,bridge:i,key:s}}else throw new Error(whe)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(e){const t=this._key;return this._cryptoLib&&t?await this._cryptoLib.encrypt(e,t):null}async _decrypt(e){const t=this._key;return this._cryptoLib&&t?await this._cryptoLib.decrypt(e,t):null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||typeof e.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||typeof e.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||typeof e.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const t={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",async(r,i)=>{if(r)throw r;if(e.peerMeta){const s=i.params[0].peerMeta.name;t.peerName=s}try{if(!(await(await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function ofe(n){return Yc.getBrowerCrypto().getRandomValues(new Uint8Array(n))}const Jk=256,Yk=Jk,afe=Jk,Ta="AES-CBC",cfe=`SHA-${Yk}`,Cv="HMAC",lfe="encrypt",ufe="decrypt",hfe="sign",dfe="verify";function ffe(n){return n===Ta?{length:Yk,name:Ta}:{hash:{name:cfe},name:Cv}}function pfe(n){return n===Ta?[lfe,ufe]:[hfe,dfe]}async function y2(n,e=Ta){return Yc.getSubtleCrypto().importKey("raw",n,ffe(e),!0,pfe(e))}async function gfe(n,e,t){const r=Yc.getSubtleCrypto(),i=await y2(e,Ta),s=await r.encrypt({iv:n,name:Ta},i,t);return new Uint8Array(s)}async function mfe(n,e,t){const r=Yc.getSubtleCrypto(),i=await y2(e,Ta),s=await r.decrypt({iv:n,name:Ta},i,t);return new Uint8Array(s)}async function yfe(n,e){const t=Yc.getSubtleCrypto(),r=await y2(n,Cv),i=await t.sign({length:afe,name:Cv},r,e);return new Uint8Array(i)}function wfe(n,e,t){return gfe(n,e,t)}function _fe(n,e,t){return mfe(n,e,t)}async function Zk(n,e){return await yfe(n,e)}async function Xk(n){const e=(n||256)/8,t=ofe(e);return Ek(sh(t))}async function e8(n,e){const t=pa(n.data),r=pa(n.iv),i=pa(n.hmac),s=fa(i,!1),o=vk(t,r),c=await Zk(e,o),l=fa(c,!1);return Mu(s)===Mu(l)}async function vfe(n,e,t){const r=Du(V0(e)),i=t||await Xk(128),s=Du(V0(i)),o=fa(s,!1),c=JSON.stringify(n),l=yk(c),h=await wfe(s,r,l),f=fa(h,!1),m=vk(h,s),y=await Zk(r,m),w=fa(y,!1);return{data:f,hmac:w,iv:o}}async function bfe(n,e){const t=Du(V0(e));if(!t)throw new Error("Missing key: required for decryption");if(!await e8(n,t))return null;const i=pa(n.data),s=pa(n.iv),o=await _fe(s,t,i),c=gk(o);let l;try{l=JSON.parse(c)}catch{return null}return l}const Efe=Object.freeze(Object.defineProperty({__proto__:null,decrypt:bfe,encrypt:vfe,generateKey:Xk,verifyHmac:e8},Symbol.toStringTag,{value:"Module"}));class Ife extends sfe{constructor(e,t){super({cryptoLib:Efe,connectorOpts:e,pushServerOpts:t})}}const Afe=Bc(Hde);function t8(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var Ar=Afe,n8=t8(PR),Sfe=t8(oU),Ie=Q9;function Tfe(n){n8.toString(n,{type:"terminal"}).then(console.log)}var Rfe=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function Cfe(n,e){try{var t=n()}catch(r){return e(r)}return t&&t.then?t.then(void 0,e):t}var xfe="data:image/svg+xml,%3C?xml version='1.0' encoding='UTF-8'?%3E %3Csvg width='300px' height='185px' viewBox='0 0 300 185' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E %3C!-- Generator: Sketch 49.3 (51167) - http://www.bohemiancoding.com/sketch --%3E %3Ctitle%3EWalletConnect%3C/title%3E %3Cdesc%3ECreated with Sketch.%3C/desc%3E %3Cdefs%3E%3C/defs%3E %3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E %3Cg id='walletconnect-logo-alt' fill='%233B99FC' fill-rule='nonzero'%3E %3Cpath d='M61.4385429,36.2562612 C110.349767,-11.6319051 189.65053,-11.6319051 238.561752,36.2562612 L244.448297,42.0196786 C246.893858,44.4140867 246.893858,48.2961898 244.448297,50.690599 L224.311602,70.406102 C223.088821,71.6033071 221.106302,71.6033071 219.883521,70.406102 L211.782937,62.4749541 C177.661245,29.0669724 122.339051,29.0669724 88.2173582,62.4749541 L79.542302,70.9685592 C78.3195204,72.1657633 76.337001,72.1657633 75.1142214,70.9685592 L54.9775265,51.2530561 C52.5319653,48.8586469 52.5319653,44.9765439 54.9775265,42.5821357 L61.4385429,36.2562612 Z M280.206339,77.0300061 L298.128036,94.5769031 C300.573585,96.9713 300.573599,100.85338 298.128067,103.247793 L217.317896,182.368927 C214.872352,184.763353 210.907314,184.76338 208.461736,182.368989 C208.461726,182.368979 208.461714,182.368967 208.461704,182.368957 L151.107561,126.214385 C150.496171,125.615783 149.504911,125.615783 148.893521,126.214385 C148.893517,126.214389 148.893514,126.214393 148.89351,126.214396 L91.5405888,182.368927 C89.095052,184.763359 85.1300133,184.763399 82.6844276,182.369014 C82.6844133,182.369 82.684398,182.368986 82.6843827,182.36897 L1.87196327,103.246785 C-0.573596939,100.852377 -0.573596939,96.9702735 1.87196327,94.5758653 L19.7936929,77.028998 C22.2392531,74.6345898 26.2042918,74.6345898 28.6498531,77.028998 L86.0048306,133.184355 C86.6162214,133.782957 87.6074796,133.782957 88.2188704,133.184355 C88.2188796,133.184346 88.2188878,133.184338 88.2188969,133.184331 L145.571,77.028998 C148.016505,74.6345347 151.981544,74.6344449 154.427161,77.028798 C154.427195,77.0288316 154.427229,77.0288653 154.427262,77.028899 L211.782164,133.184331 C212.393554,133.782932 213.384814,133.782932 213.996204,133.184331 L271.350179,77.0300061 C273.79574,74.6355969 277.760778,74.6355969 280.206339,77.0300061 Z' id='WalletConnect'%3E%3C/path%3E %3C/g%3E %3C/g%3E %3C/svg%3E",Pfe="WalletConnect",Ofe=300,kfe="rgb(64, 153, 255)",r8="walletconnect-wrapper",tR="walletconnect-style-sheet",i8="walletconnect-qrcode-modal",Nfe="walletconnect-qrcode-close",s8="walletconnect-qrcode-text",Dfe="walletconnect-connect-button";function Mfe(n){return Ie.createElement("div",{className:"walletconnect-modal__header"},Ie.createElement("img",{src:xfe,className:"walletconnect-modal__headerLogo"}),Ie.createElement("p",null,Pfe),Ie.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:n.onClose},Ie.createElement("div",{id:Nfe,className:"walletconnect-modal__close__icon"},Ie.createElement("div",{className:"walletconnect-modal__close__line1"}),Ie.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function Lfe(n){return Ie.createElement("a",{className:"walletconnect-connect__button",href:n.href,id:Dfe+"-"+n.name,onClick:n.onClick,rel:"noopener noreferrer",style:{backgroundColor:n.color},target:"_blank"},n.name)}var Ufe="data:image/svg+xml,%3Csvg width='8' height='18' viewBox='0 0 8 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.586301 0.213898C0.150354 0.552968 0.0718197 1.18124 0.41089 1.61719L5.2892 7.88931C5.57007 8.25042 5.57007 8.75608 5.2892 9.11719L0.410889 15.3893C0.071819 15.8253 0.150353 16.4535 0.586301 16.7926C1.02225 17.1317 1.65052 17.0531 1.98959 16.6172L6.86791 10.3451C7.7105 9.26174 7.7105 7.74476 6.86791 6.66143L1.98959 0.38931C1.65052 -0.0466374 1.02225 -0.125172 0.586301 0.213898Z' fill='%233C4252'/%3E %3C/svg%3E";function $fe(n){var e=n.color,t=n.href,r=n.name,i=n.logo,s=n.onClick;return Ie.createElement("a",{className:"walletconnect-modal__base__row",href:t,onClick:s,rel:"noopener noreferrer",target:"_blank"},Ie.createElement("h3",{className:"walletconnect-modal__base__row__h3"},r),Ie.createElement("div",{className:"walletconnect-modal__base__row__right"},Ie.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),Ie.createElement("img",{src:Ufe,className:"walletconnect-modal__base__row__right__caret"})))}function Vfe(n){var e=n.color,t=n.href,r=n.name,i=n.logo,s=n.onClick,o=window.innerWidth<768?(r.length>8?2.5:2.7)+"vw":"inherit";return Ie.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:t,onClick:s,rel:"noopener noreferrer",target:"_blank"},Ie.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+i+"') "+e,backgroundSize:"100%"}}),Ie.createElement("div",{style:{fontSize:o},className:"walletconnect-connect__button__text"},r))}var Ffe=5,$w=12;function Bfe(n){var e=Ar.isAndroid(),t=Ie.useState(""),r=t[0],i=t[1],s=Ie.useState(""),o=s[0],c=s[1],l=Ie.useState(1),h=l[0],f=l[1],m=o?n.links.filter(function(k){return k.name.toLowerCase().includes(o.toLowerCase())}):n.links,y=n.errorMessage,w=o||m.length>Ffe,I=Math.ceil(m.length/$w),T=[(h-1)*$w+1,h*$w],A=m.length?m.filter(function(k,P){return P+1>=T[0]&&P+1<=T[1]}):[],L=!e&&I>1,D=void 0;function C(k){i(k.target.value),clearTimeout(D),k.target.value?D=setTimeout(function(){c(k.target.value),f(1)},1e3):(i(""),c(""),f(1))}return Ie.createElement("div",null,Ie.createElement("p",{id:s8,className:"walletconnect-qrcode__text"},e?n.text.connect_mobile_wallet:n.text.choose_preferred_wallet),!e&&Ie.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:r,onChange:C}),Ie.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":w&&m.length?"__wrap":"")},e?Ie.createElement(Lfe,{name:n.text.connect,color:kfe,href:n.uri,onClick:Ie.useCallback(function(){Ar.saveMobileLinkInfo({name:"Unknown",href:n.uri})},[])}):A.length?A.map(function(k){var P=k.color,O=k.name,g=k.shortName,_=k.logo,R=Ar.formatIOSMobile(n.uri,k),N=Ie.useCallback(function(){Ar.saveMobileLinkInfo({name:O,href:R})},[A]);return w?Ie.createElement(Vfe,{color:P,href:R,name:g||O,logo:_,onClick:N}):Ie.createElement($fe,{color:P,href:R,name:O,logo:_,onClick:N})}):Ie.createElement(Ie.Fragment,null,Ie.createElement("p",null,y.length?n.errorMessage:n.links.length&&!m.length?n.text.no_wallets_found:n.text.loading))),L&&Ie.createElement("div",{className:"walletconnect-modal__footer"},Array(I).fill(0).map(function(k,P){var O=P+1,g=h===O;return Ie.createElement("a",{style:{margin:"auto 10px",fontWeight:g?"bold":"normal"},onClick:function(){return f(O)}},O)})))}function jfe(n){var e=!!n.message.trim();return Ie.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},n.message)}var qfe=function(n){try{var e="";return Promise.resolve(n8.toString(n,{margin:0,type:"svg"})).then(function(t){return typeof t=="string"&&(e=t.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(t){return Promise.reject(t)}};function Hfe(n){var e=Ie.useState(""),t=e[0],r=e[1],i=Ie.useState(""),s=i[0],o=i[1];Ie.useEffect(function(){try{return Promise.resolve(qfe(n.uri)).then(function(l){o(l)})}catch(l){Promise.reject(l)}},[]);var c=function(){var l=Sfe(n.uri);l?(r(n.text.copied_to_clipboard),setInterval(function(){return r("")},1200)):(r("Error"),setInterval(function(){return r("")},1200))};return Ie.createElement("div",null,Ie.createElement("p",{id:s8,className:"walletconnect-qrcode__text"},n.text.scan_qrcode_with_wallet),Ie.createElement("div",{dangerouslySetInnerHTML:{__html:s}}),Ie.createElement("div",{className:"walletconnect-modal__footer"},Ie.createElement("a",{onClick:c},n.text.copy_to_clipboard)),Ie.createElement(jfe,{message:t}))}function Wfe(n){var e=Ar.isAndroid(),t=Ar.isMobile(),r=t?n.qrcodeModalOptions&&n.qrcodeModalOptions.mobileLinks?n.qrcodeModalOptions.mobileLinks:void 0:n.qrcodeModalOptions&&n.qrcodeModalOptions.desktopLinks?n.qrcodeModalOptions.desktopLinks:void 0,i=Ie.useState(!1),s=i[0],o=i[1],c=Ie.useState(!1),l=c[0],h=c[1],f=Ie.useState(!t),m=f[0],y=f[1],w={mobile:t,text:n.text,uri:n.uri,qrcodeModalOptions:n.qrcodeModalOptions},I=Ie.useState(""),T=I[0],A=I[1],L=Ie.useState(!1),D=L[0],C=L[1],k=Ie.useState([]),P=k[0],O=k[1],g=Ie.useState(""),_=g[0],R=g[1],N=function(){l||s||r&&!r.length||P.length>0||Ie.useEffect(function(){var j=function(){try{if(e)return Promise.resolve();o(!0);var $=Cfe(function(){var q=n.qrcodeModalOptions&&n.qrcodeModalOptions.registryUrl?n.qrcodeModalOptions.registryUrl:Ar.getWalletRegistryUrl();return Promise.resolve(fetch(q)).then(function(B){return Promise.resolve(B.json()).then(function(Q){var G=Q.listings,K=t?"mobile":"desktop",J=Ar.getMobileLinkRegistry(Ar.formatMobileRegistry(G,K),r);o(!1),h(!0),R(J.length?"":n.text.no_supported_wallets),O(J);var ne=J.length===1;ne&&(A(Ar.formatIOSMobile(n.uri,J[0])),y(!0)),C(ne)})})},function(q){o(!1),h(!0),R(n.text.something_went_wrong),console.error(q)});return Promise.resolve($&&$.then?$.then(function(){}):void 0)}catch(q){return Promise.reject(q)}};j()})};N();var M=t?m:!m;return Ie.createElement("div",{id:i8,className:"walletconnect-qrcode__base animated fadeIn"},Ie.createElement("div",{className:"walletconnect-modal__base"},Ie.createElement(Mfe,{onClose:n.onClose}),D&&m?Ie.createElement("div",{className:"walletconnect-modal__single_wallet"},Ie.createElement("a",{onClick:function(){return Ar.saveMobileLinkInfo({name:P[0].name,href:T})},href:T,rel:"noopener noreferrer",target:"_blank"},n.text.connect_with+" "+(D?P[0].name:"")+" ›")):e||s||!s&&P.length?Ie.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(M?" right__selected":"")},Ie.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),t?Ie.createElement(Ie.Fragment,null,Ie.createElement("a",{onClick:function(){return y(!1),N()}},n.text.mobile),Ie.createElement("a",{onClick:function(){return y(!0)}},n.text.qrcode)):Ie.createElement(Ie.Fragment,null,Ie.createElement("a",{onClick:function(){return y(!0)}},n.text.qrcode),Ie.createElement("a",{onClick:function(){return y(!1),N()}},n.text.desktop))):null,Ie.createElement("div",null,m||!e&&!s&&!P.length?Ie.createElement(Hfe,Object.assign({},w)):Ie.createElement(Bfe,Object.assign({},w,{links:P,errorMessage:_})))))}var zfe={choose_preferred_wallet:"Wähle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterstützten Wallet",no_wallets_found:"keine Wallet gefunden"},Gfe={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},Kfe={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera móvil",scan_qrcode_with_wallet:"Escanea el código QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo salió mal",no_supported_wallets:"Todavía no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},Qfe={choose_preferred_wallet:"Choisissez votre portefeuille préféré",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copié!",connect_with:"Connectez-vous à l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourné",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouvé"},Jfe={choose_preferred_wallet:"원하는 지갑을 선택하세요",connect_mobile_wallet:"모바일 지갑과 연결",scan_qrcode_with_wallet:"WalletConnect 지원 지갑에서 QR코드를 스캔하세요",connect:"연결",qrcode:"QR 코드",mobile:"모바일",desktop:"데스크탑",copy_to_clipboard:"클립보드에 복사",copied_to_clipboard:"클립보드에 복사되었습니다!",connect_with:"와 연결하다",loading:"로드 중...",something_went_wrong:"문제가 발생했습니다.",no_supported_wallets:"아직 지원되는 지갑이 없습니다",no_wallets_found:"지갑을 찾을 수 없습니다"},Yfe={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se à carteira móvel",scan_qrcode_with_wallet:"Ler o código QR com uma carteira compatível com WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda não há carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},Zfe={choose_preferred_wallet:"选择你的钱包",connect_mobile_wallet:"连接至移动端钱包",scan_qrcode_with_wallet:"使用兼容 WalletConnect 的钱包扫描二维码",connect:"连接",qrcode:"二维码",mobile:"移动",desktop:"桌面",copy_to_clipboard:"复制到剪贴板",copied_to_clipboard:"复制到剪贴板成功！",connect_with:"通过以下方式连接",loading:"正在加载...",something_went_wrong:"出了问题",no_supported_wallets:"目前还没有支持的钱包",no_wallets_found:"没有找到钱包"},Xfe={choose_preferred_wallet:"کیف پول مورد نظر خود را انتخاب کنید",connect_mobile_wallet:"به کیف پول موبایل وصل شوید",scan_qrcode_with_wallet:"کد QR را با یک کیف پول سازگار با WalletConnect اسکن کنید",connect:"اتصال",qrcode:"کد QR",mobile:"سیار",desktop:"دسکتاپ",copy_to_clipboard:"کپی به کلیپ بورد",copied_to_clipboard:"در کلیپ بورد کپی شد!",connect_with:"ارتباط با",loading:"...بارگذاری",something_went_wrong:"مشکلی پیش آمد",no_supported_wallets:"هنوز هیچ کیف پول پشتیبانی شده ای وجود ندارد",no_wallets_found:"هیچ کیف پولی پیدا نشد"},nR={de:zfe,en:Gfe,es:Kfe,fr:Qfe,ko:Jfe,pt:Yfe,zh:Zfe,fa:Xfe};function epe(){var n=Ar.getDocumentOrThrow(),e=n.getElementById(tR);e&&n.head.removeChild(e);var t=n.createElement("style");t.setAttribute("id",tR),t.innerText=Rfe,n.head.appendChild(t)}function tpe(){var n=Ar.getDocumentOrThrow(),e=n.createElement("div");return e.setAttribute("id",r8),n.body.appendChild(e),e}function o8(){var n=Ar.getDocumentOrThrow(),e=n.getElementById(i8);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var t=n.getElementById(r8);t&&n.body.removeChild(t)},Ofe))}function npe(n){return function(){o8(),n&&n()}}function rpe(){var n=Ar.getNavigatorOrThrow().language.split("-")[0]||"en";return nR[n]||nR.en}function ipe(n,e,t){epe();var r=tpe();Ie.render(Ie.createElement(Wfe,{text:rpe(),uri:n,onClose:npe(e),qrcodeModalOptions:t}),r)}function spe(){o8()}var a8=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function ope(n,e,t){console.log(n),a8()?Tfe(n):ipe(n,e,t)}function ape(){a8()||spe()}var cpe={open:ope,close:ape},lpe=cpe;const upe=Lv(lpe);class hpe extends hte{constructor(e){super(),this.events=new tf,this.accounts=[],this.chainId=1,this.pending=!1,this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModalOptions=void 0,this.opts=e,this.chainId=e?.chainId||this.chainId,this.wc=this.register(e)}get connected(){return typeof this.wc<"u"&&this.wc.connected}get connecting(){return this.pending}get connector(){return this.wc=this.register(this.opts),this.wc}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e){if(this.connected){this.onOpen();return}return new Promise((t,r)=>{this.on("error",i=>{r(i)}),this.on("open",()=>{t()}),this.create(e)})}async close(){typeof this.wc>"u"||(this.wc.connected&&this.wc.killSession(),this.onClose())}async send(e){this.wc=this.register(this.opts),this.connected||await this.open(),this.sendPayload(e).then(t=>this.events.emit("payload",t)).catch(t=>this.events.emit("payload",Ru(e.id,t.message)))}register(e){if(this.wc)return this.wc;this.opts=e||this.opts,this.bridge=e?.connector?e.connector.bridge:e?.bridge||"https://bridge.walletconnect.org",this.qrcode=typeof e?.qrcode>"u"||e.qrcode!==!1,this.chainId=typeof e?.chainId<"u"?e.chainId:this.chainId,this.qrcodeModalOptions=e?.qrcodeModalOptions;const t={bridge:this.bridge,qrcodeModal:this.qrcode?upe:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:e?.storageId,signingMethods:e?.signingMethods,clientMeta:e?.clientMeta};if(this.wc=typeof e?.connector<"u"?e.connector:new Ife(t),typeof this.wc>"u")throw new Error("Failed to register WalletConnect connector");return this.wc.accounts.length&&(this.accounts=this.wc.accounts),this.wc.chainId&&(this.chainId=this.wc.chainId),this.registerConnectorEvents(),this.wc}onOpen(e){this.pending=!1,e&&(this.wc=e),this.events.emit("open")}onClose(){this.pending=!1,this.wc&&(this.wc=void 0),this.events.emit("close")}onError(e,t="Failed or Rejected Request",r=-32e3){const i={id:e.id,jsonrpc:e.jsonrpc,error:{code:r,message:t}};return this.events.emit("payload",i),i}create(e){this.wc=this.register(this.opts),this.chainId=e||this.chainId,!(this.connected||this.pending)&&(this.pending=!0,this.registerConnectorEvents(),this.wc.createSession({chainId:this.chainId}).then(()=>this.events.emit("created")).catch(t=>this.events.emit("error",t)))}registerConnectorEvents(){this.wc=this.register(this.opts),this.wc.on("connect",e=>{var t,r;if(e){this.events.emit("error",e);return}this.accounts=((t=this.wc)===null||t===void 0?void 0:t.accounts)||[],this.chainId=((r=this.wc)===null||r===void 0?void 0:r.chainId)||this.chainId,this.onOpen()}),this.wc.on("disconnect",e=>{if(e){this.events.emit("error",e);return}this.onClose()}),this.wc.on("modal_closed",()=>{this.events.emit("error",new Error("User closed modal"))}),this.wc.on("session_update",(e,t)=>{const{accounts:r,chainId:i}=t.params[0];(!this.accounts||r&&this.accounts!==r)&&(this.accounts=r,this.events.emit("accountsChanged",r)),(!this.chainId||i&&this.chainId!==i)&&(this.chainId=i,this.events.emit("chainChanged",i))})}async sendPayload(e){this.wc=this.register(this.opts);try{const t=await this.wc.unsafeSend(e);return this.sanitizeResponse(t)}catch(t){return this.onError(e,t.message)}}sanitizeResponse(e){return typeof e.error<"u"&&typeof e.error.code>"u"?Ru(e.id,e.error.message,e.error.data):e}}class dpe{constructor(e){this.events=new tf,this.rpc={infuraId:e?.infuraId,custom:e?.rpc},this.signer=new ZT(new hpe(e));const t=this.signer.connection.chainId||e?.chainId||1;this.http=this.setHttpProvider(t),this.registerEventListeners()}get connected(){return this.signer.connection.connected}get connector(){return this.signer.connection.connector}get accounts(){return this.signer.connection.accounts}get chainId(){return this.signer.connection.chainId}get rpcUrl(){var e;return((e=this.http)===null||e===void 0?void 0:e.connection).url||""}async request(e){switch(e.method){case"eth_requestAccounts":return await this.connect(),this.signer.connection.accounts;case"eth_accounts":return this.signer.connection.accounts;case"eth_chainId":return this.signer.connection.chainId}if(n2.includes(e.method))return this.signer.request(e);if(typeof this.http>"u")throw new Error(`Cannot request JSON-RPC method (${e.method}) without provided rpc url`);return this.http.request(e)}sendAsync(e,t){this.request(e).then(r=>t(null,r)).catch(r=>t(r,void 0))}async enable(){return await this.request({method:"eth_requestAccounts"})}async connect(){this.signer.connection.connected||await this.signer.connect()}async disconnect(){this.signer.connection.connected&&await this.signer.disconnect()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}registerEventListeners(){this.signer.connection.on("accountsChanged",e=>{this.events.emit("accountsChanged",e)}),this.signer.connection.on("chainChanged",e=>{this.http=this.setHttpProvider(e),this.events.emit("chainChanged",e)}),this.signer.on("disconnect",()=>{this.events.emit("disconnect")})}setHttpProvider(e){const t=Lk(e,this.rpc);return typeof t>"u"?void 0:new ZT(new So(t))}}const dye=Object.freeze(Object.defineProperty({__proto__:null,default:dpe},Symbol.toStringTag,{value:"Module"})),F0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_17TRACK_API_KEY:"90E44878A5030837C5293798DC6081CD",VITE_ADMIN_WALLET:"0x5828D525fe00902AE22f2270Ac714616651894fF",VITE_ALCHEMY_API_KEY:"Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",VITE_CHAIN_FEES:"0.02,0.05,0.01,369",VITE_ETHERSCAN_API_KEY:"JE5C1JTK2C629S4T8XVWD125CE37QZ83QS",VITE_FACTORY_ADDRESS_10143:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426",VITE_FACTORY_ADDRESS_11155111:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",VITE_FACTORY_ADDRESS_130:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_FACTORY_ADDRESS_1301:"0x08a58b1628Fb449635078355Be83e181EFBe3948",VITE_FACTORY_ADDRESS_137:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",VITE_FACTORY_ADDRESS_1828369849:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",VITE_FIREBASE_API_KEY:"AIzaSyDlfQMHiTf2vlpOdQA7gsiPK9PcITwBCc8",VITE_FIREBASE_APP_ID:"1:235589319121:web:05d9cd3aeaed3d62d748f0",VITE_FIREBASE_AUTH_DOMAIN:"tokenfactory-bbe1a.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-SJ14LLN724",VITE_FIREBASE_MESSAGING_SENDER_ID:"235589319121",VITE_FIREBASE_PROJECT_ID:"tokenfactory-bbe1a",VITE_FIREBASE_STORAGE_BUCKET:"tokenfactory-bbe1a.firebasestorage.app",VITE_MAILJET_API_KEY:"12622e0080c3a1c247990785dd1d0691",VITE_MAILJET_SECRET_KEY:"d9870d511fd1850d97b702f5f43247e6",VITE_MERCH_FIREBASE_API_KEY:"AIzaSyADTuh7W2jR3iCVo3nmDXUEVcCoM92szTg",VITE_MERCH_FIREBASE_APP_ID:"1:946488133747:web:1cefa3eab5250023218206",VITE_MERCH_FIREBASE_AUTH_DOMAIN:"merch-store-581c9.firebaseapp.com",VITE_MERCH_FIREBASE_MEASUREMENT_ID:"G-JKNYX3PJWDP\0R\0I\0V\0A\0T\0E\0_\0K\0E\0Y\0=\0y\0o\0u\0r\0_\0p\0r\0i\0v\0a\0t\0e\0_\0k\0e\0y\0",VITE_MERCH_FIREBASE_MESSAGING_SENDER_ID:"946488133747",VITE_MERCH_FIREBASE_PROJECT_ID:"merch-store-581c9",VITE_MERCH_FIREBASE_STORAGE_BUCKET:"merch-store-581c9.firebasestorage.app",VITE_MERCH_PLATFORM_ADDRESS_1301:"0xCCc38F4174BfE412e8e05Ae666037A70349ea36B",VITE_MERCH_PLATFORM_ADDRESS_137:"0x2571F240AA2Ca27Af06e5848f891efceB27d1626",VITE_NFT1155_IMPLEMENTATION_MONAD_TESTNET:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_NFT1155_IMPLEMENTATION_MOONWALKER:"0xBE339Ee485dD54375949Eb51CA4b80bCC994dee0",VITE_NFT1155_IMPLEMENTATION_POLYGON:"0x2Bab33d0D290f952BeBF50d44f8B015058a76A52",VITE_NFT1155_IMPLEMENTATION_SEPOLIA:"0xc558f0e1d3b0676abba36027642819e0351fbcb5",VITE_NFT1155_IMPLEMENTATION_UNICHAIN:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_MAINNET:"0xfA4e5A906F03A1a2522CbAA32346aD8B8Db0EAE2",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_TESTNET:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT721_IMPLEMENTATION_MONAD_TESTNET:"0xBF098eDe4264fd46Dc2da4b6E87d1dF39271e7C9",VITE_NFT721_IMPLEMENTATION_MOONWALKER:"0xF4815EF47E2fe9479485Ac00f2D904eB358DA7c1",VITE_NFT721_IMPLEMENTATION_POLYGON:"0x4f227F5f8e4659AB79bF3993ce547BE929f60185",VITE_NFT721_IMPLEMENTATION_SEPOLIA:"0x725f7a6eda7216f11f2c1ac6e382f05f947378e8",VITE_NFT721_IMPLEMENTATION_UNICHAIN:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT721_IMPLEMENTATION_UNICHAIN_MAINNET:"0x15433E7Ebdd06d56eD6FEC60132cB8DBceC42245",VITE_NFT721_IMPLEMENTATION_UNICHAIN_TESTNET:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT_FACTORY_MONAD_TESTNET:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02",VITE_NFT_FACTORY_MOONWALKER:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",VITE_NFT_FACTORY_POLYGON:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",VITE_NFT_FACTORY_SEPOLIA:"0xfb9c2ebfacb84cc5843a4c01fd8cf3d1a9e3423d",VITE_NFT_FACTORY_UNICHAIN:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_NFT_FACTORY_UNICHAIN_MAINNET:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",VITE_NFT_FACTORY_UNICHAIN_TESTNET:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_PAYSTACK_PUBLIC_KEY:"pk_live_6c4619b6e6f7db500ee33c96d03c3db3adf197ae",VITE_PINATA_JWT:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M",VITE_POLYGONSCAN_API_KEY:"264JGIIIMW61H1F8J33BZFQWJNSGPDR9S9",VITE_ROUTER_ADDRESS_11155111:"0xeE567Fe1712Faf6149d80dA1E6934E354124CfE3",VITE_ROUTER_ADDRESS_1301:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_ROUTER_ADDRESS_137:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",VITE_ROUTER_ADDRESS_UNICHAIN:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_SUPPORTED_CHAINS:"11155111,137,1301,1828369849,10143",VITE_UNICHAIN_EXPLORER_API_KEY:"F2STYRDMGGEY6NY3H2FXCYKBD971WSX5DX",VITE_UNICHAIN_EXPLORER_URL:"https://unichain-sepolia.blockscout.com",VITE_UNICHAIN_RPC_URL:"https://sepolia.unichain.org",VITE_UNICHAIN_USDC_ADDRESS:"0x31d0220469e10c4E71834a79b1f276d740d3768F",VITE_UNICHAIN_USDT_ADDRESS:"0x70262e266E50603AcFc5D58997eF73e5a8775844",VITE_USDC_ADDRESS_POLYGON:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",VITE_USDC_ADDRESS_SEPOLIA:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",VITE_USDT_ADDRESS_POLYGON:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",VITE_USDT_ADDRESS_SEPOLIA:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0",VITE_WALLET_CONNECT_PROJECT_ID:"3f6cfb67c10d3242035f4bd4580e9bf9"},Vw=n=>typeof n=="object"&&n!==null,Zo=new WeakMap,Ig=new WeakSet,fpe=(n=Object.is,e=(h,f)=>new Proxy(h,f),t=h=>Vw(h)&&!Ig.has(h)&&(Array.isArray(h)||!(Symbol.iterator in h))&&!(h instanceof WeakMap)&&!(h instanceof WeakSet)&&!(h instanceof Error)&&!(h instanceof Number)&&!(h instanceof Date)&&!(h instanceof String)&&!(h instanceof RegExp)&&!(h instanceof ArrayBuffer),r=h=>{switch(h.status){case"fulfilled":return h.value;case"rejected":throw h.reason;default:throw h}},i=new WeakMap,s=(h,f,m=r)=>{const y=i.get(h);if(y?.[0]===f)return y[1];const w=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h));return dA(w,!0),i.set(h,[f,w]),Reflect.ownKeys(h).forEach(I=>{if(Object.getOwnPropertyDescriptor(w,I))return;const T=Reflect.get(h,I),A={value:T,enumerable:!0,configurable:!0};if(Ig.has(T))dA(T,!1);else if(T instanceof Promise)delete A.value,A.get=()=>m(T);else if(Zo.has(T)){const[L,D]=Zo.get(T);A.value=s(L,D(),m)}Object.defineProperty(w,I,A)}),Object.preventExtensions(w)},o=new WeakMap,c=[1,1],l=h=>{if(!Vw(h))throw new Error("object required");const f=o.get(h);if(f)return f;let m=c[0];const y=new Set,w=(R,N=++c[0])=>{m!==N&&(m=N,y.forEach(M=>M(R,N)))};let I=c[1];const T=(R=++c[1])=>(I!==R&&!y.size&&(I=R,L.forEach(([N])=>{const M=N[1](R);M>m&&(m=M)})),m),A=R=>(N,M)=>{const j=[...N];j[1]=[R,...j[1]],w(j,M)},L=new Map,D=(R,N)=>{if((F0?"production":void 0)!=="production"&&L.has(R))throw new Error("prop listener already exists");if(y.size){const M=N[3](A(R));L.set(R,[N,M])}else L.set(R,[N])},C=R=>{var N;const M=L.get(R);M&&(L.delete(R),(N=M[1])==null||N.call(M))},k=R=>(y.add(R),y.size===1&&L.forEach(([M,j],$)=>{if((F0?"production":void 0)!=="production"&&j)throw new Error("remove already exists");const q=M[3](A($));L.set($,[M,q])}),()=>{y.delete(R),y.size===0&&L.forEach(([M,j],$)=>{j&&(j(),L.set($,[M]))})}),P=Array.isArray(h)?[]:Object.create(Object.getPrototypeOf(h)),g=e(P,{deleteProperty(R,N){const M=Reflect.get(R,N);C(N);const j=Reflect.deleteProperty(R,N);return j&&w(["delete",[N],M]),j},set(R,N,M,j){const $=Reflect.has(R,N),q=Reflect.get(R,N,j);if($&&(n(q,M)||o.has(M)&&n(q,o.get(M))))return!0;C(N),Vw(M)&&(M=rU(M)||M);let B=M;if(M instanceof Promise)M.then(Q=>{M.status="fulfilled",M.value=Q,w(["resolve",[N],Q])}).catch(Q=>{M.status="rejected",M.reason=Q,w(["reject",[N],Q])});else{!Zo.has(M)&&t(M)&&(B=l(M));const Q=!Ig.has(B)&&Zo.get(B);Q&&D(N,Q)}return Reflect.set(R,N,B,j),w(["set",[N],M,q]),!0}});o.set(h,g);const _=[P,T,s,k];return Zo.set(g,_),Reflect.ownKeys(h).forEach(R=>{const N=Object.getOwnPropertyDescriptor(h,R);"value"in N&&(g[R]=h[R],delete N.value,delete N.writable),Object.defineProperty(P,R,N)}),g})=>[l,Zo,Ig,n,e,t,r,i,s,o,c],[ppe]=fpe();function Na(n={}){return ppe(n)}function el(n,e,t){const r=Zo.get(n);(F0?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let i;const s=[],o=r[3];let c=!1;const h=o(f=>{s.push(f),i||(i=Promise.resolve().then(()=>{i=void 0,c&&e(s.splice(0))}))});return c=!0,()=>{c=!1,h()}}function gpe(n,e){const t=Zo.get(n);(F0?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[r,i,s]=t;return s(r,i(),e)}const Hn=Na({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),ln={state:Hn,subscribe(n){return el(Hn,()=>n(Hn))},push(n,e){n!==Hn.view&&(Hn.view=n,e&&(Hn.data=e),Hn.history.push(n))},reset(n){Hn.view=n,Hn.history=[n]},replace(n){Hn.history.length>1&&(Hn.history[Hn.history.length-1]=n,Hn.view=n)},goBack(){if(Hn.history.length>1){Hn.history.pop();const[n]=Hn.history.slice(-1);Hn.view=n}},setData(n){Hn.data=n}},Ne={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return Ne.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const n=navigator.userAgent.toLowerCase();return Ne.isMobile()&&(n.includes("iphone")||n.includes("ipad"))},isHttpUrl(n){return n.startsWith("http://")||n.startsWith("https://")},isArray(n){return Array.isArray(n)&&n.length>0},formatNativeUrl(n,e,t){if(Ne.isHttpUrl(n))return this.formatUniversalUrl(n,e,t);let r=n;r.includes("://")||(r=n.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,t);const i=encodeURIComponent(e);return`${r}wc?uri=${i}`},formatUniversalUrl(n,e,t){if(!Ne.isHttpUrl(n))return this.formatNativeUrl(n,e,t);let r=n;r.endsWith("/")||(r=`${r}/`),this.setWalletConnectDeepLink(r,t);const i=encodeURIComponent(e);return`${r}wc?uri=${i}`},async wait(n){return new Promise(e=>{setTimeout(e,n)})},openHref(n,e){window.open(n,e,"noreferrer noopener")},setWalletConnectDeepLink(n,e){try{localStorage.setItem(Ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:n,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(n){try{const[e]=n.split("?");localStorage.setItem(Ne.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(Ne.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(Ne.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var n;const e=(n=ln.state.data)==null?void 0:n.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},mpe=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),hr=Na({enabled:mpe,userSessionId:"",events:[],connectedWalletId:void 0}),c8={state:hr,subscribe(n){return el(hr.events,()=>n(gpe(hr.events[hr.events.length-1])))},initialize(){hr.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(hr.userSessionId=crypto.randomUUID())},setConnectedWalletId(n){hr.connectedWalletId=n},click(n){if(hr.enabled){const e={type:"CLICK",name:n.name,userSessionId:hr.userSessionId,timestamp:Date.now(),data:n};hr.events.push(e)}},track(n){if(hr.enabled){const e={type:"TRACK",name:n.name,userSessionId:hr.userSessionId,timestamp:Date.now(),data:n};hr.events.push(e)}},view(n){if(hr.enabled){const e={type:"VIEW",name:n.name,userSessionId:hr.userSessionId,timestamp:Date.now(),data:n};hr.events.push(e)}}},ms=Na({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Tn={state:ms,subscribe(n){return el(ms,()=>n(ms))},setChains(n){ms.chains=n},setWalletConnectUri(n){ms.walletConnectUri=n},setIsCustomDesktop(n){ms.isCustomDesktop=n},setIsCustomMobile(n){ms.isCustomMobile=n},setIsDataLoaded(n){ms.isDataLoaded=n},setIsUiLoaded(n){ms.isUiLoaded=n},setIsAuth(n){ms.isAuth=n}},Ag=Na({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),fi={state:Ag,subscribe(n){return el(Ag,()=>n(Ag))},setConfig(n){var e,t;c8.initialize(),Tn.setChains(n.chains),Tn.setIsAuth(!!n.enableAuthMode),Tn.setIsCustomMobile(!!((e=n.mobileWallets)!=null&&e.length)),Tn.setIsCustomDesktop(!!((t=n.desktopWallets)!=null&&t.length)),Ne.setModalVersionInStorage(),Object.assign(Ag,n)}};var ype=Object.defineProperty,rR=Object.getOwnPropertySymbols,wpe=Object.prototype.hasOwnProperty,_pe=Object.prototype.propertyIsEnumerable,iR=(n,e,t)=>e in n?ype(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vpe=(n,e)=>{for(var t in e||(e={}))wpe.call(e,t)&&iR(n,t,e[t]);if(rR)for(var t of rR(e))_pe.call(e,t)&&iR(n,t,e[t]);return n};const xv="https://explorer-api.walletconnect.com",Pv="wcm",Ov="js-2.6.2";async function Sg(n,e){const t=vpe({sdkType:Pv,sdkVersion:Ov},e),r=new URL(n,xv);return r.searchParams.append("projectId",fi.state.projectId),Object.entries(t).forEach(([i,s])=>{s&&r.searchParams.append(i,String(s))}),(await fetch(r)).json()}const ac={async getDesktopListings(n){return Sg("/w3m/v1/getDesktopListings",n)},async getMobileListings(n){return Sg("/w3m/v1/getMobileListings",n)},async getInjectedListings(n){return Sg("/w3m/v1/getInjectedListings",n)},async getAllListings(n){return Sg("/w3m/v1/getAllListings",n)},getWalletImageUrl(n){return`${xv}/w3m/v1/getWalletImage/${n}?projectId=${fi.state.projectId}&sdkType=${Pv}&sdkVersion=${Ov}`},getAssetImageUrl(n){return`${xv}/w3m/v1/getAssetImage/${n}?projectId=${fi.state.projectId}&sdkType=${Pv}&sdkVersion=${Ov}`}};var bpe=Object.defineProperty,sR=Object.getOwnPropertySymbols,Epe=Object.prototype.hasOwnProperty,Ipe=Object.prototype.propertyIsEnumerable,oR=(n,e,t)=>e in n?bpe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ape=(n,e)=>{for(var t in e||(e={}))Epe.call(e,t)&&oR(n,t,e[t]);if(sR)for(var t of sR(e))Ipe.call(e,t)&&oR(n,t,e[t]);return n};const aR=Ne.isMobile(),ys=Na({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),Br={state:ys,async getRecomendedWallets(){const{explorerRecommendedWalletIds:n,explorerExcludedWalletIds:e}=fi.state;if(n==="NONE"||e==="ALL"&&!n)return ys.recomendedWallets;if(Ne.isArray(n)){const t={recommendedIds:n.join(",")},{listings:r}=await ac.getAllListings(t),i=Object.values(r);i.sort((s,o)=>{const c=n.indexOf(s.id),l=n.indexOf(o.id);return c-l}),ys.recomendedWallets=i}else{const{chains:t,isAuth:r}=Tn.state,i=t?.join(","),s=Ne.isArray(e),o={page:1,sdks:r?"auth_v1":void 0,entries:Ne.RECOMMENDED_WALLET_AMOUNT,chains:i,version:2,excludedIds:s?e.join(","):void 0},{listings:c}=aR?await ac.getMobileListings(o):await ac.getDesktopListings(o);ys.recomendedWallets=Object.values(c)}return ys.recomendedWallets},async getWallets(n){const e=Ape({},n),{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:r}=fi.state,{recomendedWallets:i}=ys;if(r==="ALL")return ys.wallets;i.length?e.excludedIds=i.map(m=>m.id).join(","):Ne.isArray(t)&&(e.excludedIds=t.join(",")),Ne.isArray(r)&&(e.excludedIds=[e.excludedIds,r].filter(Boolean).join(",")),Tn.state.isAuth&&(e.sdks="auth_v1");const{page:s,search:o}=n,{listings:c,total:l}=aR?await ac.getMobileListings(e):await ac.getDesktopListings(e),h=Object.values(c),f=o?"search":"wallets";return ys[f]={listings:[...ys[f].listings,...h],total:l,page:s??1},{listings:h,total:l}},getWalletImageUrl(n){return ac.getWalletImageUrl(n)},getAssetImageUrl(n){return ac.getAssetImageUrl(n)},resetSearch(){ys.search={listings:[],total:0,page:1}}},Pl=Na({open:!1}),kc={state:Pl,subscribe(n){return el(Pl,()=>n(Pl))},async open(n){return new Promise(e=>{const{isUiLoaded:t,isDataLoaded:r}=Tn.state;if(Ne.removeWalletConnectDeepLink(),Tn.setWalletConnectUri(n?.uri),Tn.setChains(n?.chains),ln.reset("ConnectWallet"),t&&r)Pl.open=!0,e();else{const i=setInterval(()=>{const s=Tn.state;s.isUiLoaded&&s.isDataLoaded&&(clearInterval(i),Pl.open=!0,e())},200)}})},close(){Pl.open=!1}};var Spe=Object.defineProperty,cR=Object.getOwnPropertySymbols,Tpe=Object.prototype.hasOwnProperty,Rpe=Object.prototype.propertyIsEnumerable,lR=(n,e,t)=>e in n?Spe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Cpe=(n,e)=>{for(var t in e||(e={}))Tpe.call(e,t)&&lR(n,t,e[t]);if(cR)for(var t of cR(e))Rpe.call(e,t)&&lR(n,t,e[t]);return n};function xpe(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const Zh=Na({themeMode:xpe()?"dark":"light"}),Ra={state:Zh,subscribe(n){return el(Zh,()=>n(Zh))},setThemeConfig(n){const{themeMode:e,themeVariables:t}=n;e&&(Zh.themeMode=e),t&&(Zh.themeVariables=Cpe({},t))}},cc=Na({open:!1,message:"",variant:"success"}),ca={state:cc,subscribe(n){return el(cc,()=>n(cc))},openToast(n,e){cc.open=!0,cc.message=n,cc.variant=e},closeToast(){cc.open=!1}};class Ppe{constructor(e){this.openModal=kc.open,this.closeModal=kc.close,this.subscribeModal=kc.subscribe,this.setTheme=Ra.setThemeConfig,Ra.setThemeConfig(e),fi.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await RR(()=>Promise.resolve().then(()=>tme),void 0);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Tn.setIsUiLoaded(!0)}}}const Ope=Object.freeze(Object.defineProperty({__proto__:null,WalletConnectModal:Ppe},Symbol.toStringTag,{value:"Module"}));function kpe(n,e){n.indexOf(e)===-1&&n.push(e)}const l8=(n,e,t)=>Math.min(Math.max(t,n),e),Di={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},B0=n=>typeof n=="number",au=n=>Array.isArray(n)&&!B0(n[0]),Npe=(n,e,t)=>{const r=e-n;return((t-n)%r+r)%r+n};function Dpe(n,e){return au(n)?n[Npe(0,n.length,e)]:n}const u8=(n,e,t)=>-t*n+t*e+n,h8=()=>{},ga=n=>n,w2=(n,e,t)=>e-n===0?1:(t-n)/(e-n);function d8(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const i=w2(0,e,r);n.push(u8(t,1,i))}}function Mpe(n){const e=[0];return d8(e,n-1),e}function Lpe(n,e=Mpe(n.length),t=ga){const r=n.length,i=r-e.length;return i>0&&d8(e,i),s=>{let o=0;for(;o<r-2&&!(s<e[o+1]);o++);let c=l8(0,1,w2(e[o],e[o+1],s));return c=Dpe(t,o)(c),u8(n[o],n[o+1],c)}}const f8=n=>Array.isArray(n)&&B0(n[0]),kv=n=>typeof n=="object"&&!!n.createAnimation,Xd=n=>typeof n=="function",Upe=n=>typeof n=="string",Sd={ms:n=>n*1e3,s:n=>n/1e3},p8=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,$pe=1e-7,Vpe=12;function Fpe(n,e,t,r,i){let s,o,c=0;do o=e+(t-e)/2,s=p8(o,r,i)-n,s>0?t=o:e=o;while(Math.abs(s)>$pe&&++c<Vpe);return o}function gd(n,e,t,r){if(n===e&&t===r)return ga;const i=s=>Fpe(s,0,1,n,t);return s=>s===0||s===1?s:p8(i(s),e,r)}const Bpe=(n,e="end")=>t=>{t=e==="end"?Math.min(t,.999):Math.max(t,.001);const r=t*n,i=e==="end"?Math.floor(r):Math.ceil(r);return l8(0,1,i/n)},jpe={ease:gd(.25,.1,.25,1),"ease-in":gd(.42,0,1,1),"ease-in-out":gd(.42,0,.58,1),"ease-out":gd(0,0,.58,1)},qpe=/\((.*?)\)/;function uR(n){if(Xd(n))return n;if(f8(n))return gd(...n);const e=jpe[n];if(e)return e;if(n.startsWith("steps")){const t=qpe.exec(n);if(t){const r=t[1].split(",");return Bpe(parseFloat(r[0]),r[1].trim())}}return ga}class Hpe{constructor(e,t=[0,1],{easing:r,duration:i=Di.duration,delay:s=Di.delay,endDelay:o=Di.endDelay,repeat:c=Di.repeat,offset:l,direction:h="normal",autoplay:f=!0}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=ga,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise((y,w)=>{this.resolve=y,this.reject=w}),r=r||Di.easing,kv(r)){const y=r.createAnimation(t);r=y.easing,t=y.keyframes||t,i=y.duration||i}this.repeat=c,this.easing=au(r)?ga:uR(r),this.updateDuration(i);const m=Lpe(t,l,au(r)?r.map(uR):ga);this.tick=y=>{var w;s=s;let I=0;this.pauseTime!==void 0?I=this.pauseTime:I=(y-this.startTime)*this.rate,this.t=I,I/=1e3,I=Math.max(I-s,0),this.playState==="finished"&&this.pauseTime===void 0&&(I=this.totalDuration);const T=I/this.duration;let A=Math.floor(T),L=T%1;!L&&T>=1&&(L=1),L===1&&A--;const D=A%2;(h==="reverse"||h==="alternate"&&D||h==="alternate-reverse"&&!D)&&(L=1-L);const C=I>=this.totalDuration?1:Math.min(L,1),k=m(this.easing(C));e(k),this.pauseTime===void 0&&(this.playState==="finished"||I>=this.totalDuration+o)?(this.playState="finished",(w=this.resolve)===null||w===void 0||w.call(this,k)):this.playState!=="idle"&&(this.frameRequestId=requestAnimationFrame(this.tick))},f&&this.play()}play(){const e=performance.now();this.playState="running",this.pauseTime!==void 0?this.startTime=e-this.pauseTime:this.startTime||(this.startTime=e),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var e;this.playState="idle",this.frameRequestId!==void 0&&cancelAnimationFrame(this.frameRequestId),(e=this.reject)===null||e===void 0||e.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(e){this.duration=e,this.totalDuration=e*(this.repeat+1)}get currentTime(){return this.t}set currentTime(e){this.pauseTime!==void 0||this.rate===0?this.pauseTime=e:this.startTime=performance.now()-e/this.rate}get playbackRate(){return this.rate}set playbackRate(e){this.rate=e}}class Wpe{setAnimation(e){this.animation=e,e?.finished.then(()=>this.clearAnimation()).catch(()=>{})}clearAnimation(){this.animation=this.generator=void 0}}const Fw=new WeakMap;function g8(n){return Fw.has(n)||Fw.set(n,{transforms:[],values:new Map}),Fw.get(n)}function zpe(n,e){return n.has(e)||n.set(e,new Wpe),n.get(e)}const Gpe=["","X","Y","Z"],Kpe=["translate","scale","rotate","skew"],j0={x:"translateX",y:"translateY",z:"translateZ"},hR={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:n=>n+"deg"},Qpe={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:n=>n+"px"},rotate:hR,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:ga},skew:hR},ef=new Map,_2=n=>`--motion-${n}`,q0=["x","y","z"];Kpe.forEach(n=>{Gpe.forEach(e=>{q0.push(n+e),ef.set(_2(n+e),Qpe[n])})});const Jpe=(n,e)=>q0.indexOf(n)-q0.indexOf(e),Ype=new Set(q0),m8=n=>Ype.has(n),Zpe=(n,e)=>{j0[e]&&(e=j0[e]);const{transforms:t}=g8(n);kpe(t,e),n.style.transform=Xpe(t)},Xpe=n=>n.sort(Jpe).reduce(ege,"").trim(),ege=(n,e)=>`${n} ${e}(var(${_2(e)}))`,Nv=n=>n.startsWith("--"),dR=new Set;function tge(n){if(!dR.has(n)){dR.add(n);try{const{syntax:e,initialValue:t}=ef.has(n)?ef.get(n):{};CSS.registerProperty({name:n,inherits:!1,syntax:e,initialValue:t})}catch{}}}const Bw=(n,e)=>document.createElement("div").animate(n,e),fR={cssRegisterProperty:()=>typeof CSS<"u"&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{Bw({opacity:[1]})}catch{return!1}return!0},finished:()=>!!Bw({opacity:[0,1]},{duration:.001}).finished,linearEasing:()=>{try{Bw({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0}},jw={},Kl={};for(const n in fR)Kl[n]=()=>(jw[n]===void 0&&(jw[n]=fR[n]()),jw[n]);const nge=.015,rge=(n,e)=>{let t="";const r=Math.round(e/nge);for(let i=0;i<r;i++)t+=n(w2(0,r-1,i))+", ";return t.substring(0,t.length-2)},pR=(n,e)=>Xd(n)?Kl.linearEasing()?`linear(${rge(n,e)})`:Di.easing:f8(n)?ige(n):n,ige=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`;function sge(n,e){for(let t=0;t<n.length;t++)n[t]===null&&(n[t]=t?n[t-1]:e());return n}const oge=n=>Array.isArray(n)?n:[n];function Dv(n){return j0[n]&&(n=j0[n]),m8(n)?_2(n):n}const Tg={get:(n,e)=>{e=Dv(e);let t=Nv(e)?n.style.getPropertyValue(e):getComputedStyle(n)[e];if(!t&&t!==0){const r=ef.get(e);r&&(t=r.initialValue)}return t},set:(n,e,t)=>{e=Dv(e),Nv(e)?n.style.setProperty(e,t):n.style[e]=t}};function y8(n,e=!0){if(!(!n||n.playState==="finished"))try{n.stop?n.stop():(e&&n.commitStyles(),n.cancel())}catch{}}function age(n,e){var t;let r=e?.toDefaultUnit||ga;const i=n[n.length-1];if(Upe(i)){const s=((t=i.match(/(-?[\d.]+)([a-z%]*)/))===null||t===void 0?void 0:t[2])||"";s&&(r=o=>o+s)}return r}function cge(){return window.__MOTION_DEV_TOOLS_RECORD}function lge(n,e,t,r={},i){const s=cge(),o=r.record!==!1&&s;let c,{duration:l=Di.duration,delay:h=Di.delay,endDelay:f=Di.endDelay,repeat:m=Di.repeat,easing:y=Di.easing,persist:w=!1,direction:I,offset:T,allowWebkitAcceleration:A=!1,autoplay:L=!0}=r;const D=g8(n),C=m8(e);let k=Kl.waapi();C&&Zpe(n,e);const P=Dv(e),O=zpe(D.values,P),g=ef.get(P);return y8(O.animation,!(kv(y)&&O.generator)&&r.record!==!1),()=>{const _=()=>{var M,j;return(j=(M=Tg.get(n,P))!==null&&M!==void 0?M:g?.initialValue)!==null&&j!==void 0?j:0};let R=sge(oge(t),_);const N=age(R,g);if(kv(y)){const M=y.createAnimation(R,e!=="opacity",_,P,O);y=M.easing,R=M.keyframes||R,l=M.duration||l}if(Nv(P)&&(Kl.cssRegisterProperty()?tge(P):k=!1),C&&!Kl.linearEasing()&&(Xd(y)||au(y)&&y.some(Xd))&&(k=!1),k){g&&(R=R.map($=>B0($)?g.toDefaultUnit($):$)),R.length===1&&(!Kl.partialKeyframes()||o)&&R.unshift(_());const M={delay:Sd.ms(h),duration:Sd.ms(l),endDelay:Sd.ms(f),easing:au(y)?void 0:pR(y,l),direction:I,iterations:m+1,fill:"both"};c=n.animate({[P]:R,offset:T,easing:au(y)?y.map($=>pR($,l)):void 0},M),c.finished||(c.finished=new Promise(($,q)=>{c.onfinish=$,c.oncancel=q}));const j=R[R.length-1];c.finished.then(()=>{w||(Tg.set(n,P,j),c.cancel())}).catch(h8),A||(c.playbackRate=1.000001)}else if(i&&C)R=R.map(M=>typeof M=="string"?parseFloat(M):M),R.length===1&&R.unshift(parseFloat(_())),c=new i(M=>{Tg.set(n,P,N?N(M):M)},R,Object.assign(Object.assign({},r),{duration:l,easing:y}));else{const M=R[R.length-1];Tg.set(n,P,g&&B0(M)?g.toDefaultUnit(M):M)}return o&&s(n,e,R,{duration:l,delay:h,easing:y,repeat:m,offset:T},"motion-one"),O.setAnimation(c),c&&!L&&c.pause(),c}}const uge=(n,e)=>n[e]?Object.assign(Object.assign({},n),n[e]):Object.assign({},n);function hge(n,e){return typeof n=="string"?n=document.querySelectorAll(n):n instanceof Element&&(n=[n]),Array.from(n||[])}const dge=n=>n(),fge=(n,e,t=Di.duration)=>new Proxy({animations:n.map(dge).filter(Boolean),duration:t,options:e},gge),pge=n=>n.animations[0],gge={get:(n,e)=>{const t=pge(n);switch(e){case"duration":return n.duration;case"currentTime":return Sd.s(t?.[e]||0);case"playbackRate":case"playState":return t?.[e];case"finished":return n.finished||(n.finished=Promise.all(n.animations.map(mge)).catch(h8)),n.finished;case"stop":return()=>{n.animations.forEach(r=>y8(r))};case"forEachNative":return r=>{n.animations.forEach(i=>r(i,n))};default:return typeof t?.[e]>"u"?void 0:()=>n.animations.forEach(r=>r[e]())}},set:(n,e,t)=>{switch(e){case"currentTime":t=Sd.ms(t);case"playbackRate":for(let r=0;r<n.animations.length;r++)n.animations[r][e]=t;return!0}return!1}},mge=n=>n.finished;function yge(n,e,t){return Xd(n)?n(e,t):n}function wge(n){return function(t,r,i={}){t=hge(t);const s=t.length,o=[];for(let c=0;c<s;c++){const l=t[c];for(const h in r){const f=uge(i,h);f.delay=yge(f.delay,c,s);const m=lge(l,h,r[h],f,n);o.push(m)}}return fge(o,i,i.duration)}}const fye=wge(Hpe);var _ge=Object.defineProperty,gR=Object.getOwnPropertySymbols,vge=Object.prototype.hasOwnProperty,bge=Object.prototype.propertyIsEnumerable,mR=(n,e,t)=>e in n?_ge(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qw=(n,e)=>{for(var t in e||(e={}))vge.call(e,t)&&mR(n,t,e[t]);if(gR)for(var t of gR(e))bge.call(e,t)&&mR(n,t,e[t]);return n};function Ege(){var n;const e=(n=Ra.state.themeMode)!=null?n:"dark",t={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":t.foreground[1],"--wcm-color-fg-2":t.foreground[2],"--wcm-color-fg-3":t.foreground[3],"--wcm-color-bg-1":t.background[1],"--wcm-color-bg-2":t.background[2],"--wcm-color-bg-3":t.background[3],"--wcm-color-overlay":t.overlay}}function yR(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const Et={getPreset(n){return yR()[n]},setTheme(){const n=document.querySelector(":root"),{themeVariables:e}=Ra.state;if(n){const t=qw(qw(qw({},Ege()),yR()),e);Object.entries(t).forEach(([r,i])=>n.style.setProperty(r,i))}},globalCss:Ut`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},Ige=Ut`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var Age=Object.defineProperty,Sge=Object.getOwnPropertyDescriptor,Ol=(n,e,t,r)=>{for(var i=r>1?void 0:r?Sge(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&Age(e,t,i),i};let Go=class extends Ct{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const n={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),ve`<button class="${Ao(n)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};Go.styles=[Et.globalCss,Ige],Ol([at({type:Boolean})],Go.prototype,"disabled",2),Ol([at()],Go.prototype,"iconLeft",2),Ol([at()],Go.prototype,"iconRight",2),Ol([at()],Go.prototype,"onClick",2),Ol([at()],Go.prototype,"variant",2),Go=Ol([Rt("wcm-button")],Go);const Tge=Ut`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var Rge=Object.defineProperty,Cge=Object.getOwnPropertyDescriptor,Hw=(n,e,t,r)=>{for(var i=r>1?void 0:r?Cge(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&Rge(e,t,i),i};let Xh=class extends Ct{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const n={"wcm-secondary":this.variant==="secondary"};return ve`<button ?disabled="${this.disabled}" class="${Ao(n)}"><slot></slot></button>`}};Xh.styles=[Et.globalCss,Tge],Hw([at({type:Boolean})],Xh.prototype,"disabled",2),Hw([at()],Xh.prototype,"variant",2),Xh=Hw([Rt("wcm-button-big")],Xh);const xge=Ut`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var Pge=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let Ww=class extends Ct{render(){return ve`<div><slot></slot></div>`}};Ww.styles=[Et.globalCss,xge],Ww=Pge([Rt("wcm-info-footer")],Ww);const Ft={CROSS_ICON:mn`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:mn`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:mn`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:mn`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:mn`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:mn`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:mn`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:mn`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:mn`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:mn`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:mn`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:mn`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:mn`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:mn`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:mn`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:mn`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:mn`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:mn`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},Oge=Ut`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var kge=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let zw=class extends Ct{render(){return ve`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${Ft.WALLET_CONNECT_LOGO} <button @click="${kc.close}">${Ft.CROSS_ICON}</button></div>`}};zw.styles=[Et.globalCss,Oge],zw=kge([Rt("wcm-modal-backcard")],zw);const Nge=Ut`main{padding:20px;padding-top:0;width:100%}`;var Dge=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let Gw=class extends Ct{render(){return ve`<main><slot></slot></main>`}};Gw.styles=[Et.globalCss,Nge],Gw=Dge([Rt("wcm-modal-content")],Gw);const Mge=Ut`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var Lge=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let Kw=class extends Ct{render(){return ve`<footer><slot></slot></footer>`}};Kw.styles=[Et.globalCss,Mge],Kw=Lge([Rt("wcm-modal-footer")],Kw);const Uge=Ut`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var $ge=Object.defineProperty,Vge=Object.getOwnPropertyDescriptor,ed=(n,e,t,r)=>{for(var i=r>1?void 0:r?Vge(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&$ge(e,t,i),i};let lc=class extends Ct{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return ve`<button class="wcm-back-btn" @click="${ln.goBack}">${Ft.BACK_ICON}</button>`}actionBtnTemplate(){return ve`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const n={"wcm-border":this.border},e=ln.state.history.length>1,t=this.title?ve`<wcm-text variant="big-bold">${this.title}</wcm-text>`:ve`<slot></slot>`;return ve`<header class="${Ao(n)}">${e?this.backBtnTemplate():null} ${t} ${this.onAction?this.actionBtnTemplate():null}</header>`}};lc.styles=[Et.globalCss,Uge],ed([at()],lc.prototype,"title",2),ed([at()],lc.prototype,"onAction",2),ed([at()],lc.prototype,"actionIcon",2),ed([at({type:Boolean})],lc.prototype,"border",2),lc=ed([Rt("wcm-modal-header")],lc);const Ke={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(n,e){const t=n.renderRoot.querySelector(e);if(!t)throw new Error(`${e} not found`);return t},getWalletIcon({id:n,image_id:e}){const{walletImages:t}=fi.state;return t!=null&&t[n]?t[n]:e?Br.getWalletImageUrl(e):""},getWalletName(n,e=!1){return e&&n.length>8?`${n.substring(0,8)}..`:n},isMobileAnimation(){return window.innerWidth<=Ke.MOBILE_BREAKPOINT},async preloadImage(n){const e=new Promise((t,r)=>{const i=new Image;i.onload=t,i.onerror=r,i.crossOrigin="anonymous",i.src=n});return Promise.race([e,Ne.wait(3e3)])},getErrorMessage(n){return n instanceof Error?n.message:"Unknown Error"},debounce(n,e=500){let t;return(...r)=>{function i(){n(...r)}t&&clearTimeout(t),t=setTimeout(i,e)}},handleMobileLinking(n){const{walletConnectUri:e}=Tn.state,{mobile:t,name:r}=n,i=t?.native,s=t?.universal;Ke.setRecentWallet(n);function o(c){let l="";i?l=Ne.formatUniversalUrl(i,c,r):s&&(l=Ne.formatNativeUrl(s,c,r)),Ne.openHref(l,"_self")}e&&o(e)},handleAndroidLinking(){const{walletConnectUri:n}=Tn.state;n&&(Ne.setWalletConnectAndroidDeepLink(n),Ne.openHref(n,"_self"))},async handleUriCopy(){const{walletConnectUri:n}=Tn.state;if(n)try{await navigator.clipboard.writeText(n),ca.openToast("Link copied","success")}catch{ca.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:n}=fi.state,e=Object.values(n??{});return Object.values(e)},truncate(n,e=8){return n.length<=e?n:`${n.substring(0,4)}...${n.substring(n.length-4)}`},setRecentWallet(n){try{localStorage.setItem(Ke.WCM_RECENT_WALLET_DATA,JSON.stringify(n))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const n=localStorage.getItem(Ke.WCM_RECENT_WALLET_DATA);return n?JSON.parse(n):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(n,e){return n.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){Ne.openHref(Ke.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:n,mobile:e}=Ne.getWalletRouterData(),t=!!n?.native,r=!!n?.universal,i=!!e?.native||!!e?.universal;return{isDesktop:t,isMobile:i,isWeb:r}},goToConnectingView(n){ln.setData({Wallet:n});const e=Ne.isMobile(),{isDesktop:t,isWeb:r,isMobile:i}=Ke.getCachedRouterWalletPlatforms();e?i?ln.push("MobileConnecting"):r?ln.push("WebConnecting"):ln.push("InstallWallet"):t?ln.push("DesktopConnecting"):r?ln.push("WebConnecting"):i?ln.push("MobileQrcodeConnecting"):ln.push("InstallWallet")}},Fge=Ut`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var Bge=Object.defineProperty,jge=Object.getOwnPropertyDescriptor,Qw=(n,e,t,r)=>{for(var i=r>1?void 0:r?jge(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&Bge(e,t,i),i};let td=class extends Ct{constructor(){super(),this.view=ln.state.view,this.prevView=ln.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=ln.subscribe(n=>{this.view!==n.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([n])=>{const e=`${n.contentRect.height}px`;this.oldHeight!=="0px"&&yc(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var n,e;(n=this.unsubscribe)==null||n.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return Ke.getShadowRootElement(this,".wcm-router")}get contentEl(){return Ke.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return ve`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return ve`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return ve`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return ve`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return ve`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return ve`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return ve`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return ve`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return ve`<div>Not Found</div>`}}async onChangeRoute(){await yc(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=ln.state.view,yc(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return ve`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};td.styles=[Et.globalCss,Fge],Qw([Wr()],td.prototype,"view",2),Qw([Wr()],td.prototype,"prevView",2),td=Qw([Rt("wcm-modal-router")],td);const qge=Ut`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var Hge=Object.defineProperty,Wge=Object.getOwnPropertyDescriptor,wR=(n,e,t,r)=>{for(var i=r>1?void 0:r?Wge(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&Hge(e,t,i),i};let Rg=class extends Ct{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=ca.subscribe(n=>{n.open?(this.open=!0,this.timeout=setTimeout(()=>ca.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var n;(n=this.unsubscribe)==null||n.call(this),clearTimeout(this.timeout),ca.closeToast()}render(){const{message:n,variant:e}=ca.state,t={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?ve`<div class="${Ao(t)}">${e==="success"?Ft.CHECKMARK_ICON:null} ${e==="error"?Ft.CROSS_ICON:null}<wcm-text variant="small-regular">${n}</wcm-text></div>`:null}};Rg.styles=[Et.globalCss,qge],wR([Wr()],Rg.prototype,"open",2),Rg=wR([Rt("wcm-modal-toast")],Rg);const zge=.1,_R=2.5,oo=7;function Jw(n,e,t){return n===e?!1:(n-e<0?e-n:n-e)<=t+zge}function Gge(n,e){const t=Array.prototype.slice.call(PR.create(n,{errorCorrectionLevel:e}).modules.data,0),r=Math.sqrt(t.length);return t.reduce((i,s,o)=>(o%r===0?i.push([s]):i[i.length-1].push(s))&&i,[])}const Kge={generate(n,e,t){const r="#141414",i="#ffffff",s=[],o=Gge(n,"Q"),c=e/o.length,l=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];l.forEach(({x:I,y:T})=>{const A=(o.length-oo)*c*I,L=(o.length-oo)*c*T,D=.45;for(let C=0;C<l.length;C+=1){const k=c*(oo-C*2);s.push(mn`<rect fill="${C%2===0?r:i}" height="${k}" rx="${k*D}" ry="${k*D}" width="${k}" x="${A+c*C}" y="${L+c*C}">`)}});const h=Math.floor((t+25)/c),f=o.length/2-h/2,m=o.length/2+h/2-1,y=[];o.forEach((I,T)=>{I.forEach((A,L)=>{if(o[T][L]&&!(T<oo&&L<oo||T>o.length-(oo+1)&&L<oo||T<oo&&L>o.length-(oo+1))&&!(T>f&&T<m&&L>f&&L<m)){const D=T*c+c/2,C=L*c+c/2;y.push([D,C])}})});const w={};return y.forEach(([I,T])=>{w[I]?w[I].push(T):w[I]=[T]}),Object.entries(w).map(([I,T])=>{const A=T.filter(L=>T.every(D=>!Jw(L,D,c)));return[Number(I),A]}).forEach(([I,T])=>{T.forEach(A=>{s.push(mn`<circle cx="${I}" cy="${A}" fill="${r}" r="${c/_R}">`)})}),Object.entries(w).filter(([I,T])=>T.length>1).map(([I,T])=>{const A=T.filter(L=>T.some(D=>Jw(L,D,c)));return[Number(I),A]}).map(([I,T])=>{T.sort((L,D)=>L<D?-1:1);const A=[];for(const L of T){const D=A.find(C=>C.some(k=>Jw(L,k,c)));D?D.push(L):A.push([L])}return[I,A.map(L=>[L[0],L[L.length-1]])]}).forEach(([I,T])=>{T.forEach(([A,L])=>{s.push(mn`<line x1="${I}" x2="${I}" y1="${A}" y2="${L}" stroke="${r}" stroke-width="${c/(_R/2)}" stroke-linecap="round">`)})}),s}},Qge=Ut`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var Jge=Object.defineProperty,Yge=Object.getOwnPropertyDescriptor,kl=(n,e,t,r)=>{for(var i=r>1?void 0:r?Yge(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&Jge(e,t,i),i};let ao=class extends Ct{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const n=Ra.state.themeMode==="light"?this.size:this.size-36;return mn`<svg height="${n}" width="${n}">${Kge.generate(this.uri,n,n/4)}</svg>`}render(){const n={"wcm-dark":Ra.state.themeMode==="dark"};return ve`<div style="${`width: ${this.size}px`}" class="${Ao(n)}">${this.walletId||this.imageUrl?ve`<wcm-wallet-image walletId="${Sr(this.walletId)}" imageId="${Sr(this.imageId)}" imageUrl="${Sr(this.imageUrl)}"></wcm-wallet-image>`:Ft.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};ao.styles=[Et.globalCss,Qge],kl([at()],ao.prototype,"uri",2),kl([at({type:Number})],ao.prototype,"size",2),kl([at()],ao.prototype,"imageId",2),kl([at()],ao.prototype,"walletId",2),kl([at()],ao.prototype,"imageUrl",2),ao=kl([Rt("wcm-qrcode")],ao);const Zge=Ut`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var Xge=Object.defineProperty,e0e=Object.getOwnPropertyDescriptor,vR=(n,e,t,r)=>{for(var i=r>1?void 0:r?e0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&Xge(e,t,i),i};let Cg=class extends Ct{constructor(){super(...arguments),this.onChange=()=>null}render(){return ve`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${Ft.SEARCH_ICON}`}};Cg.styles=[Et.globalCss,Zge],vR([at()],Cg.prototype,"onChange",2),Cg=vR([Rt("wcm-search-input")],Cg);const t0e=Ut`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var n0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let Yw=class extends Ct{render(){return ve`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};Yw.styles=[Et.globalCss,t0e],Yw=n0e([Rt("wcm-spinner")],Yw);const r0e=Ut`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var i0e=Object.defineProperty,s0e=Object.getOwnPropertyDescriptor,Zw=(n,e,t,r)=>{for(var i=r>1?void 0:r?s0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&i0e(e,t,i),i};let nd=class extends Ct{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const n={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return ve`<span><slot class="${Ao(n)}"></slot></span>`}};nd.styles=[Et.globalCss,r0e],Zw([at()],nd.prototype,"variant",2),Zw([at()],nd.prototype,"color",2),nd=Zw([Rt("wcm-text")],nd);const o0e=Ut`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var a0e=Object.defineProperty,c0e=Object.getOwnPropertyDescriptor,Ko=(n,e,t,r)=>{for(var i=r>1?void 0:r?c0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&a0e(e,t,i),i};let ws=class extends Ct{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?ve`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?ve`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){c8.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var n;return ve`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Sr(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(n=this.label)!=null?n:Ke.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};ws.styles=[Et.globalCss,o0e],Ko([at()],ws.prototype,"onClick",2),Ko([at()],ws.prototype,"name",2),Ko([at()],ws.prototype,"walletId",2),Ko([at()],ws.prototype,"label",2),Ko([at()],ws.prototype,"imageId",2),Ko([at({type:Boolean})],ws.prototype,"installed",2),Ko([at({type:Boolean})],ws.prototype,"recent",2),ws=Ko([Rt("wcm-wallet-button")],ws);const l0e=Ut`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var u0e=Object.defineProperty,h0e=Object.getOwnPropertyDescriptor,xg=(n,e,t,r)=>{for(var i=r>1?void 0:r?h0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&u0e(e,t,i),i};let Nl=class extends Ct{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var n;const e=(n=this.imageUrl)!=null&&n.length?this.imageUrl:Ke.getWalletIcon({id:this.walletId,image_id:this.imageId});return ve`${e.length?ve`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:Ft.WALLET_PLACEHOLDER}`}};Nl.styles=[Et.globalCss,l0e],xg([at()],Nl.prototype,"walletId",2),xg([at()],Nl.prototype,"imageId",2),xg([at()],Nl.prototype,"imageUrl",2),Nl=xg([Rt("wcm-wallet-image")],Nl);var d0e=Object.defineProperty,f0e=Object.getOwnPropertyDescriptor,bR=(n,e,t,r)=>{for(var i=r>1?void 0:r?f0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&d0e(e,t,i),i};let Xw=class extends Ct{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(n){try{n!=null&&n.length&&await Promise.all(n.map(async e=>Ke.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",n)}}async preloadListings(){if(fi.state.enableExplorer){await Br.getRecomendedWallets(),Tn.setIsDataLoaded(!0);const{recomendedWallets:n}=Br.state,e=n.map(t=>Ke.getWalletIcon(t));await this.loadImages(e)}else Tn.setIsDataLoaded(!0)}async preloadCustomImages(){const n=Ke.getCustomImageUrls();await this.loadImages(n)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(n){console.error(n),ca.openToast("Failed preloading","error")}}};bR([Wr()],Xw.prototype,"preload",2),Xw=bR([Rt("wcm-explorer-context")],Xw);var p0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let ER=class extends Ct{constructor(){super(),this.unsubscribeTheme=void 0,Et.setTheme(),this.unsubscribeTheme=Ra.subscribe(Et.setTheme)}disconnectedCallback(){var n;(n=this.unsubscribeTheme)==null||n.call(this)}};ER=p0e([Rt("wcm-theme-context")],ER);const g0e=Ut`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var m0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let e_=class extends Ct{onGoToQrcode(){ln.push("Qrcode")}render(){const{recomendedWallets:n}=Br.state,e=[...n,...n],t=Ne.RECOMMENDED_WALLET_AMOUNT*2;return ve`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${Ft.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${Ft.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(t)].map((r,i)=>{const s=e[i%e.length];return s?ve`<wcm-wallet-image walletId="${s.id}" imageId="${s.image_id}"></wcm-wallet-image>`:Ft.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${Ke.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};e_.styles=[Et.globalCss,g0e],e_=m0e([Rt("wcm-android-wallet-selection")],e_);const y0e=Ut`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var w0e=Object.defineProperty,_0e=Object.getOwnPropertyDescriptor,Dl=(n,e,t,r)=>{for(var i=r>1?void 0:r?_0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&w0e(e,t,i),i};let Qo=class extends Ct{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var n,e;const t=(e=(n=Ra.state.themeVariables)==null?void 0:n["--wcm-wallet-icon-large-border-radius"])!=null?e:Et.getPreset("--wcm-wallet-icon-large-border-radius");let r=0;t.includes("%")?r=88/100*parseInt(t,10):r=parseInt(t,10),r*=1.17;const i=317-r*1.57,s=425-r*1.8;return ve`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${r}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${i}" stroke-dashoffset="${s}"></use></svg>`}render(){const n={"wcm-error":this.isError,"wcm-stale":this.isStale};return ve`<div class="${Ao(n)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Sr(this.walletId)}" imageId="${Sr(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Qo.styles=[Et.globalCss,y0e],Dl([at()],Qo.prototype,"walletId",2),Dl([at()],Qo.prototype,"imageId",2),Dl([at({type:Boolean})],Qo.prototype,"isError",2),Dl([at({type:Boolean})],Qo.prototype,"isStale",2),Dl([at()],Qo.prototype,"label",2),Qo=Dl([Rt("wcm-connector-waiting")],Qo);const cu={manualWallets(){var n,e;const{mobileWallets:t,desktopWallets:r}=fi.state,i=(n=cu.recentWallet())==null?void 0:n.id,s=Ne.isMobile()?t:r,o=s?.filter(c=>i!==c.id);return(e=Ne.isMobile()?o?.map(({id:c,name:l,links:h})=>({id:c,name:l,mobile:h,links:h})):o?.map(({id:c,name:l,links:h})=>({id:c,name:l,desktop:h,links:h})))!=null?e:[]},recentWallet(){return Ke.getRecentWallet()},recomendedWallets(n=!1){var e;const t=n||(e=cu.recentWallet())==null?void 0:e.id,{recomendedWallets:r}=Br.state;return r.filter(i=>t!==i.id)}},ma={onConnecting(n){Ke.goToConnectingView(n)},manualWalletsTemplate(){return cu.manualWallets().map(n=>ve`<wcm-wallet-button walletId="${n.id}" name="${n.name}" .onClick="${()=>this.onConnecting(n)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(n=!1){return cu.recomendedWallets(n).map(e=>ve`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const n=cu.recentWallet();if(n)return ve`<wcm-wallet-button name="${n.name}" walletId="${n.id}" imageId="${Sr(n.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(n)}"></wcm-wallet-button>`}},v0e=Ut`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var b0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let t_=class extends Ct{render(){const{explorerExcludedWalletIds:n,enableExplorer:e}=fi.state,t=n!=="ALL"&&e,r=ma.manualWalletsTemplate(),i=ma.recomendedWalletsTemplate();let s=[ma.recentWalletTemplate(),...r,...i];s=s.filter(Boolean);const o=s.length>4||t;let c=[];o?c=s.slice(0,3):c=s;const l=!!c.length;return ve`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${Ke.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${Ft.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${Ft.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${l?ve`<wcm-modal-footer><div class="wcm-desktop-title">${Ft.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${c} ${o?ve`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};t_.styles=[Et.globalCss,v0e],t_=b0e([Rt("wcm-desktop-wallet-selection")],t_);const E0e=Ut`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var I0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let n_=class extends Ct{render(){const{termsOfServiceUrl:n,privacyPolicyUrl:e}=fi.state;return n??e?ve`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${n?ve`<a href="${n}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${n&&e?"and":null} ${e?ve`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};n_.styles=[Et.globalCss,E0e],n_=I0e([Rt("wcm-legal-notice")],n_);const A0e=Ut`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var S0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let r_=class extends Ct{onQrcode(){ln.push("Qrcode")}render(){const{explorerExcludedWalletIds:n,enableExplorer:e}=fi.state,t=n!=="ALL"&&e,r=ma.manualWalletsTemplate(),i=ma.recomendedWalletsTemplate();let s=[ma.recentWalletTemplate(),...r,...i];s=s.filter(Boolean);const o=s.length>8||t;let c=[];o?c=s.slice(0,7):c=s;const l=!!c.length;return ve`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${Ft.QRCODE_ICON}"></wcm-modal-header>${l?ve`<wcm-modal-content><div>${c} ${o?ve`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};r_.styles=[Et.globalCss,A0e],r_=S0e([Rt("wcm-mobile-wallet-selection")],r_);const T0e=Ut`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var R0e=Object.defineProperty,C0e=Object.getOwnPropertyDescriptor,i_=(n,e,t,r)=>{for(var i=r>1?void 0:r?C0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&R0e(e,t,i),i};let ql=class extends Ct{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=kc.subscribe(n=>{n.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var n;(n=this.unsubscribeModal)==null||n.call(this)}get overlayEl(){return Ke.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return Ke.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(n){document.querySelector("body")&&(n?document.getElementById("wcm-styles")?.remove():document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>'))}onCloseModal(n){n.target===n.currentTarget&&kc.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const n=Ke.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,t=.2;await Promise.all([yc(this.overlayEl,{opacity:[0,1]},{delay:e,duration:t}).finished,yc(this.containerEl,n,{delay:e,duration:t}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const n=Ke.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([yc(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,yc(this.containerEl,n,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",n=>{var e;n.key==="Escape"?kc.close():n.key==="Tab"&&((e=n.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var n;(n=this.abortController)==null||n.abort(),this.abortController=void 0}render(){const n={"wcm-overlay":!0,"wcm-active":this.active};return ve`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${Ao(n)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?ve`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};ql.styles=[Et.globalCss,T0e],i_([Wr()],ql.prototype,"open",2),i_([Wr()],ql.prototype,"active",2),ql=i_([Rt("wcm-modal")],ql);const x0e=Ut`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var P0e=Object.defineProperty,O0e=Object.getOwnPropertyDescriptor,rd=(n,e,t,r)=>{for(var i=r>1?void 0:r?O0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&P0e(e,t,i),i};let uc=class extends Ct{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){Ne.isMobile()?ln.replace("MobileConnecting"):ln.replace("MobileQrcodeConnecting")}onDesktop(){ln.replace("DesktopConnecting")}onWeb(){ln.replace("WebConnecting")}render(){return ve`<div>${this.isRetry?ve`<slot></slot>`:null} ${this.isMobile?ve`<wcm-button .onClick="${this.onMobile}" .iconLeft="${Ft.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?ve`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${Ft.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?ve`<wcm-button .onClick="${this.onWeb}" .iconLeft="${Ft.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};uc.styles=[Et.globalCss,x0e],rd([at({type:Boolean})],uc.prototype,"isMobile",2),rd([at({type:Boolean})],uc.prototype,"isDesktop",2),rd([at({type:Boolean})],uc.prototype,"isWeb",2),rd([at({type:Boolean})],uc.prototype,"isRetry",2),uc=rd([Rt("wcm-platform-selection")],uc);const k0e=Ut`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var N0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let s_=class extends Ct{onClick(){ln.push("WalletExplorer")}render(){const{recomendedWallets:n}=Br.state,e=cu.manualWallets(),t=[...n,...e].reverse().slice(0,4);return ve`<button @click="${this.onClick}"><div class="wcm-icons">${t.map(r=>{const i=Ke.getWalletIcon(r);if(i)return ve`<img crossorigin="anonymous" src="${i}">`;const s=Ke.getWalletIcon({id:r.id});return s?ve`<img crossorigin="anonymous" src="${s}">`:Ft.WALLET_PLACEHOLDER})} ${[...Array(4-t.length)].map(()=>Ft.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};s_.styles=[Et.globalCss,k0e],s_=N0e([Rt("wcm-view-all-wallets-button")],s_);const D0e=Ut`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var M0e=Object.defineProperty,L0e=Object.getOwnPropertyDescriptor,Pg=(n,e,t,r)=>{for(var i=r>1?void 0:r?L0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&M0e(e,t,i),i};let Ml=class extends Ct{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:n}=Tn.state;this.uri=n},0)}get overlayEl(){return Ke.getShadowRootElement(this,".wcm-qr-container")}render(){return ve`<div class="wcm-qr-container">${this.uri?ve`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Sr(this.walletId)}" imageId="${Sr(this.imageId)}"></wcm-qrcode>`:ve`<wcm-spinner></wcm-spinner>`}</div>`}};Ml.styles=[Et.globalCss,D0e],Pg([at()],Ml.prototype,"walletId",2),Pg([at()],Ml.prototype,"imageId",2),Pg([Wr()],Ml.prototype,"uri",2),Ml=Pg([Rt("wcm-walletconnect-qr")],Ml);var U0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let o_=class extends Ct{viewTemplate(){return Ne.isAndroid()?ve`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:Ne.isMobile()?ve`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:ve`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return ve`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};o_.styles=[Et.globalCss],o_=U0e([Rt("wcm-connect-wallet-view")],o_);const $0e=Ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var V0e=Object.defineProperty,F0e=Object.getOwnPropertyDescriptor,IR=(n,e,t,r)=>{for(var i=r>1?void 0:r?F0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&V0e(e,t,i),i};let Og=class extends Ct{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(n){const{desktop:e,name:t}=Ne.getWalletRouterData(),r=e?.native;if(r){const i=Ne.formatNativeUrl(r,n,t);Ne.openHref(i,"_self")}}openDesktopApp(){const{walletConnectUri:n}=Tn.state,e=Ne.getWalletRouterData();Ke.setRecentWallet(e),n&&this.onFormatAndRedirect(n)}render(){const{name:n,id:e,image_id:t}=Ne.getWalletRouterData(),{isMobile:r,isWeb:i}=Ke.getCachedRouterWalletPlatforms();return ve`<wcm-modal-header title="${n}" .onAction="${Ke.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Sr(t)}" label="${`Continue in ${n}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${n} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${r}" .isWeb="${i}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${Ft.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Og.styles=[Et.globalCss,$0e],IR([Wr()],Og.prototype,"isError",2),Og=IR([Rt("wcm-desktop-connecting-view")],Og);const B0e=Ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var j0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let a_=class extends Ct{onInstall(n){n&&Ne.openHref(n,"_blank")}render(){const{name:n,id:e,image_id:t,homepage:r}=Ne.getWalletRouterData();return ve`<wcm-modal-header title="${n}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Sr(t)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${n} to continue. If multiple browser extensions are installed, disable non ${n} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(r)}" .iconLeft="${Ft.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};a_.styles=[Et.globalCss,B0e],a_=j0e([Rt("wcm-install-wallet-view")],a_);const q0e=Ut`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var H0e=Object.defineProperty,W0e=Object.getOwnPropertyDescriptor,AR=(n,e,t,r)=>{for(var i=r>1?void 0:r?W0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&H0e(e,t,i),i};let kg=class extends Ct{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(n,e=!1){const{mobile:t,name:r}=Ne.getWalletRouterData(),i=t?.native,s=t?.universal;if(i&&!e){const o=Ne.formatNativeUrl(i,n,r);Ne.openHref(o,"_self")}else if(s){const o=Ne.formatUniversalUrl(s,n,r);Ne.openHref(o,"_self")}}openMobileApp(n=!1){const{walletConnectUri:e}=Tn.state,t=Ne.getWalletRouterData();Ke.setRecentWallet(t),e&&this.onFormatAndRedirect(e,n)}onGoToAppStore(n){n&&Ne.openHref(n,"_blank")}render(){const{name:n,id:e,image_id:t,app:r,mobile:i}=Ne.getWalletRouterData(),{isWeb:s}=Ke.getCachedRouterWalletPlatforms(),o=r?.ios,c=i?.universal;return ve`<wcm-modal-header title="${n}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Sr(t)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${s}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${Ft.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${c?ve`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Sr(t)}"></wcm-wallet-image><wcm-text>${`Get ${n}`}</wcm-text></div><wcm-button .iconRight="${Ft.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(o)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};kg.styles=[Et.globalCss,q0e],AR([Wr()],kg.prototype,"isError",2),kg=AR([Rt("wcm-mobile-connecting-view")],kg);const z0e=Ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var G0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let c_=class extends Ct{render(){const{name:n,id:e,image_id:t}=Ne.getWalletRouterData(),{isDesktop:r,isWeb:i}=Ke.getCachedRouterWalletPlatforms();return ve`<wcm-modal-header title="${n}" .onAction="${Ke.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Sr(t)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${n} app`}</wcm-text><wcm-platform-selection .isDesktop="${r}" .isWeb="${i}"></wcm-platform-selection></wcm-info-footer>`}};c_.styles=[Et.globalCss,z0e],c_=G0e([Rt("wcm-mobile-qr-connecting-view")],c_);var K0e=(n,e,t,r)=>{for(var i=e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=o(i)||i);return i};let l_=class extends Ct{render(){return ve`<wcm-modal-header title="Scan the code" .onAction="${Ke.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};l_.styles=[Et.globalCss],l_=K0e([Rt("wcm-qrcode-view")],l_);const Q0e=Ut`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var J0e=Object.defineProperty,Y0e=Object.getOwnPropertyDescriptor,id=(n,e,t,r)=>{for(var i=r>1?void 0:r?Y0e(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&J0e(e,t,i),i};const u_=40;let hc=class extends Ct{constructor(){super(...arguments),this.loading=!Br.state.wallets.listings.length,this.firstFetch=!Br.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=Ke.debounce(n=>{n.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=n,Br.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),Br.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var n;(n=this.intersectionObserver)==null||n.disconnect()}get placeholderEl(){return Ke.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([n])=>{n.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:n,search:e}=Br.state,{listings:t,total:r}=this.search?e:n;return r<=u_||t.length>=r}async fetchWallets(){var n;const{wallets:e,search:t}=Br.state,{listings:r,total:i,page:s}=this.search?t:e;if(!this.endReached&&(this.firstFetch||i>u_&&r.length<i))try{this.loading=!0;const o=(n=Tn.state.chains)==null?void 0:n.join(","),{listings:c}=await Br.getWallets({page:this.firstFetch?1:s+1,entries:u_,search:this.search,version:2,chains:o}),l=c.map(h=>Ke.getWalletIcon(h));await Promise.all([...l.map(async h=>Ke.preloadImage(h)),Ne.wait(300)]),this.endReached=this.isLastPage()}catch(o){console.error(o),ca.openToast(Ke.getErrorMessage(o),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(n){Ne.isAndroid()?Ke.handleMobileLinking(n):Ke.goToConnectingView(n)}onSearchChange(n){const{value:e}=n.target;this.searchDebounce(e)}render(){const{wallets:n,search:e}=Br.state,{listings:t}=this.search?e:n,r=this.loading&&!t.length,i=this.search.length>=3;let s=ma.manualWalletsTemplate(),o=ma.recomendedWalletsTemplate(!0);i&&(s=s.filter(({values:h})=>Ke.caseSafeIncludes(h[0],this.search)),o=o.filter(({values:h})=>Ke.caseSafeIncludes(h[0],this.search)));const c=!this.loading&&!t.length&&!o.length,l={"wcm-loading":r,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":c};return ve`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${Ao(l)}"><div class="wcm-grid">${r?null:s} ${r?null:o} ${r?null:t.map(h=>ve`${h?ve`<wcm-wallet-button imageId="${h.image_id}" name="${h.name}" walletId="${h.id}" .onClick="${()=>this.onConnect(h)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${c?ve`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!c&&this.loading?ve`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};hc.styles=[Et.globalCss,Q0e],id([Wr()],hc.prototype,"loading",2),id([Wr()],hc.prototype,"firstFetch",2),id([Wr()],hc.prototype,"search",2),id([Wr()],hc.prototype,"endReached",2),hc=id([Rt("wcm-wallet-explorer-view")],hc);const Z0e=Ut`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var X0e=Object.defineProperty,eme=Object.getOwnPropertyDescriptor,SR=(n,e,t,r)=>{for(var i=r>1?void 0:r?eme(e,t):e,s=n.length-1,o;s>=0;s--)(o=n[s])&&(i=(r?o(e,t,i):o(i))||i);return r&&i&&X0e(e,t,i),i};let Ng=class extends Ct{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(n){const{desktop:e,name:t}=Ne.getWalletRouterData(),r=e?.universal;if(r){const i=Ne.formatUniversalUrl(r,n,t);Ne.openHref(i,"_blank")}}openWebWallet(){const{walletConnectUri:n}=Tn.state,e=Ne.getWalletRouterData();Ke.setRecentWallet(e),n&&this.onFormatAndRedirect(n)}render(){const{name:n,id:e,image_id:t}=Ne.getWalletRouterData(),{isMobile:r,isDesktop:i}=Ke.getCachedRouterWalletPlatforms(),s=Ne.isMobile();return ve`<wcm-modal-header title="${n}" .onAction="${Ke.handleUriCopy}" .actionIcon="${Ft.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Sr(t)}" label="${`Continue in ${n}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${n} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${r}" .isDesktop="${s?!1:i}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${Ft.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};Ng.styles=[Et.globalCss,Z0e],SR([Wr()],Ng.prototype,"isError",2),Ng=SR([Rt("wcm-web-connecting-view")],Ng);const tme=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return ql},get WcmQrCode(){return ao}},Symbol.toStringTag,{value:"Module"}));export{es as $,$me as A,Bme as B,Dme as C,p1e as D,Zme as E,u1e as F,ea as G,a1e as H,Lme as I,Mme as J,xme as K,Q$ as L,Pme as M,Ome as N,_me as O,Ame as P,er as Q,y1e as R,E1e as S,Fn as T,I1e as U,w1e as V,b1e as W,v1e as X,GS as Y,Ms as Z,_1e as _,mq as a,Gd as a0,Qu as a1,Su as a2,Ea as a3,ts as a4,hi as a5,sg as a6,T1e as a7,S1e as a8,A1e as a9,wme as aA,NR as aB,Ime as aC,kme as aD,lye as aE,dye as aF,k1e as aa,qS as ab,Tu as ac,UZ as ad,x1e as ae,P1e as af,C1e as ag,R1e as ah,O1e as ai,FV as aj,dv as ak,FO as al,fae as am,li as an,Xd as ao,fye as ap,fge as aq,Hpe as ar,g1e as as,p$ as at,Tme as au,G$ as av,m1e as aw,w$ as ax,Sme as ay,Eme as az,Gme as b,d1e as c,f1e as d,zme as e,e1e as f,jme as g,Jme as h,uye as i,i1e as j,PK as k,Yme as l,t1e as m,Xme as n,s1e as o,r1e as p,Kme as q,h1e as r,o1e as s,c1e as t,n1e as u,l1e as v,Qme as w,Vme as x,Ume as y,Fme as z};
