import{u as js,R as ot,r as l,j as e,F as Mr,a as Ir,L as ut,O as Fr,b as Sn,c as An,d as Mn,e as In,f as Fn,g as Ln,h as Pn,i as Os,B as Lr,k as Dn,H as Bn,l as Rn,m as On,T as _s,n as _n,o as ka,p as Wn,q as Hn,s as Pr,t as Dr,v as Br,w as Rr,x as G,y as Un,z as $n,_ as Q,A as dt,C as nt,D as Or,E as pt,G as se,I as Ta,J as Pe,K as ua,M as _r,N as qn,P as zn,Q as Vn,S as Gn,U as Yn,V as Xn,W as et,X as Zn,Y as Jn,$ as Rt,Z as Ws,a0 as ss,a1 as rs,a2 as Hs,a3 as Kn,a4 as Qn,a5 as Wr,a6 as fs,a7 as eo,a8 as to,a9 as Ua,aa as Hr,ab as ps,ac as ao,ad as so,ae as $a,af as ro,ag as no,ah as oo,ai as io,aj as Us,ak as lo,al as co,am as uo,an as mo,ao as Dt,ap as Ns,aq as $s,ar as Ur,as as $r,at as xo,au as ho,av as fo,aw as gs,ax as Ca,ay as po,az as go,aA as bo,aB as yo,aC as wo,aD as Ea,aE as Ts,aF as ko,aG as vo,aH as Zt,aI as jo,aJ as bs,aK as No,aL as To,aM as Co,aN as qr,aO as ns,aP as Ia,aQ as Eo,aR as So,aS as Ao,aT as kt,aU as Mo,aV as Io,aW as Fo,aX as qs,aY as zs,aZ as Vs,a_ as Gs,a$ as Lo,b0 as zr,b1 as Ys,b2 as Po,b3 as Do,b4 as Bo,b5 as Ro,b6 as Oo,b7 as _o}from"./react-OEhP2pWc.js";import{u as Cs,a as Wo,b as Vr,c as Za}from"./context-D4fmVuWz.js";import{u as Sa,a as Le,p as Ho,b as Es,c as Yt,d as Gr,e as Uo,f as $o}from"./web3-DE1AGvEk.js";import{C as qo,u as zo}from"./rainbow-D6PcEwE4.js";import{a as Yr,g as Vo,b as Xr,c as Go,d as Zr,G as Yo,e as Ft,f as _e,q as Be,w as Ie,o as Aa,h as Ue,j as xt,l as Ja,u as Ss,s as ca,k as Lt,C as _,m as Et,B as ne,p as qt,n as Te,r as Xo,J as wt,t as Ve,v as Zo,x as Jo,A as zt,y as Y,M as lt,z as B,D as Jr,T as Ko,E as Gt,F as Qo,H as qa,I as ei,K as Je,L as ti,N as Kr,O as Xs,P as ai,Q as si,R as ri,Z as va,S as mt,U as Qr,V as tt,W as Pt,X as ja,Y as ni,_ as oi,$ as ii,a0 as li,a1 as di,a2 as ci}from"./vendor-D4KQtBUH.js";import{R as Wa,B as ui,X as en,T as Ha,a as mi,P as xi,b as hi,C as fi,A as tn,c as an,d as pi,Y as gi}from"./recharts-e47e005g.js";const bi=window.location.hostname==="localhost",yi={apiKey:"AIzaSyADTuh7W2jR3iCVo3nmDXUEVcCoM92szTg",authDomain:bi?"merch-store-581c9.firebaseapp.com":"auth.token-factory.xyz",projectId:"merch-store-581c9",storageBucket:"merch-store-581c9.firebasestorage.app",messagingSenderId:"946488133747",appId:"1:946488133747:web:1cefa3eab5250023218206",measurementId:"G-JKNYX3PJWDP\0R\0I\0V\0A\0T\0E\0_\0K\0E\0Y\0=\0y\0o\0u\0r\0_\0p\0r\0i\0v\0a\0t\0e\0_\0k\0e\0y\0"},Ka=Yr(yi,"merchStore"),wi=Vo(Ka),At=Xr(Ka),ki=Go(Ka);Zr(Ka);const vi=new Yo;vi.setCustomParameters({prompt:"select_account",auth_type:"reauthenticate"});wi.useDeviceLanguage();function Pc(){const n=js(),[a,t]=ot.useState(localStorage.getItem("admin-theme")||"light");l.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(a),localStorage.setItem("admin-theme",a)},[a]);const s=()=>{t(a==="light"?"dark":"light")},r=i=>n.pathname===i,o=[{path:"/admin",icon:e.jsx(Sn,{}),label:"Dashboard"},{path:"/admin/withdrawals",icon:e.jsx(An,{}),label:"Withdrawals"},{path:"/admin/refunds",icon:e.jsx(Mn,{}),label:"Refunds"},{path:"/admin/sales",icon:e.jsx(In,{}),label:"Sales"},{path:"/admin/stores-revenue",icon:e.jsx(Fn,{}),label:"Stores Revenue"},{path:"/admin/store-verification",icon:e.jsx(Ln,{}),label:"Store Verification"},{path:"/admin/settings",icon:e.jsx(Pn,{}),label:"Settings"}];return e.jsxs("div",{className:`min-h-screen ${a==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("header",{className:`${a==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-sm border-b`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16 items-center",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-xl font-bold text-[#FF1B6B]",children:"Admin Panel"})}),e.jsx("button",{onClick:s,className:`p-2 rounded-lg ${a==="dark"?"bg-gray-700 text-yellow-400 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"} transition-colors duration-200`,"aria-label":"Toggle theme",children:a==="dark"?e.jsx(Mr,{className:"w-5 h-5"}):e.jsx(Ir,{className:"w-5 h-5"})})]})})}),e.jsx("nav",{className:`${a==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-sm border-b`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-8 h-14",children:o.map(i=>e.jsxs(ut,{to:i.path,className:`inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 ${r(i.path)?"border-[#FF1B6B] text-[#FF1B6B]":`border-transparent ${a==="dark"?"text-gray-400 hover:border-gray-600 hover:text-gray-300":"text-gray-500 hover:border-gray-300 hover:text-gray-700"}`}`,children:[e.jsx("span",{className:"mr-2",children:i.icon}),i.label]},i.path))})})}),e.jsx("main",{className:`max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 ${a==="dark"?"text-white":"text-gray-900"}`,children:e.jsx(Fr,{})})]})}const Zs=()=>e.jsxs("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L17.196 4.804L20 10L17.196 15.196L12 18L6.804 15.196L4 10L6.804 4.804L12 2Z",fill:"#FF1B6B",filter:"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.15))"}),e.jsx("path",{d:"M12 4L15.696 6.104L17.8 9.8L15.696 13.496L12 15.6L8.304 13.496L6.2 9.8L8.304 6.104L12 4Z",fill:"#FF1B6B",className:"brightness-110"}),e.jsx("path",{d:"M8.5 10L11 12.5L15.5 8",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm"})]});function Dc({onOpenModal:n,onOpenNFTModal:a}){const[t,s]=l.useState(!1),[r,o]=l.useState(!1),i=js(),d=x=>i.pathname===x,u=[{icon:Lr,label:"Create Token",action:n,primary:!0},{icon:Dn,label:"Create NFT",action:a},{type:"divider"},{icon:Bn,label:"Dashboard",to:"/",isRouterLink:!0},{icon:Rn,label:"Collections",to:"/collections",isRouterLink:!0,noDefaultHighlight:!0},{icon:On,label:"Meme Factory",to:"/memefactory",isRouterLink:!0},{type:"divider"},{icon:_s,label:"Trading",to:"/trading",isRouterLink:!0},{icon:_n,label:"Bridge",to:"/bridge",isRouterLink:!0},{icon:ka,label:"MerchStore",to:"/merch-store",isRouterLink:!0},{icon:_s,label:"Trending Tokens",to:"#",isRouterLink:!0,comingSoon:!0},{icon:Wn,label:"Recent Tokens",to:"#",isRouterLink:!0,comingSoon:!0},{type:"divider"},{icon:Hn,label:"Account",to:"/account",isRouterLink:!0,noDefaultHighlight:!0},{icon:Pr,label:"History",to:"/history",isRouterLink:!0}],c=[{icon:Dr,href:"https://t.me/tokenfactorry",label:"Telegram"},{icon:Br,href:"https://x.com/TokenFac",label:"X (Twitter)"},{icon:Rr,href:"https://discord.com/users/chriswilder",label:"Discord"}],m=(x,f)=>{if(x.type==="divider")return e.jsx("div",{className:"my-2 border-b border-gray-200 dark:border-gray-800"},`divider-${f}`);const p=`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200 relative group
      ${x.primary?"text-gray-800 dark:text-gray-200 hover:text-black dark:hover:text-black hover:bg-[#00ffbd] font-semibold":`text-gray-800 dark:text-gray-200 ${x.comingSoon?"cursor-default opacity-50":"hover:text-black dark:hover:text-black hover:bg-[#00ffbd]"} 
           ${x.isRouterLink&&d(x.to)&&!x.noDefaultHighlight?"text-[#00ffbd]":""}`}
      ${t?"justify-center":""}
    `;return x.isRouterLink?e.jsxs(ut,{to:x.to,className:p,onClick:x.comingSoon?b=>b.preventDefault():void 0,children:[e.jsx(x.icon,{size:20,className:`flex-shrink-0 ${x.isRouterLink&&d(x.to)&&!x.noDefaultHighlight?"text-[#00ffbd]":""}`}),!t&&e.jsx("span",{className:"truncate",children:x.label}),x.comingSoon&&!t&&e.jsx("span",{className:"absolute right-0 top-1/2 -translate-y-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Coming Soon"})]},f):e.jsxs("button",{onClick:x.action||(()=>{}),className:p,children:[e.jsx(x.icon,{size:20,className:"flex-shrink-0"}),!t&&e.jsx("div",{className:"flex items-center justify-between w-full min-w-0 transition-opacity duration-200",children:e.jsx("span",{className:"truncate",children:x.label})})]},f)};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden transition-opacity duration-300",onClick:()=>o(!1)}),e.jsx("button",{onClick:()=>o(!r),className:`fixed top-8 -left-3 p-1.5 rounded-full bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 lg:hidden z-30 transition-all duration-300 ${r?"opacity-0 -translate-x-4":"opacity-100 translate-x-0"}`,children:e.jsx(Os,{size:12,className:`transform transition-transform duration-200 text-gray-600 dark:text-gray-400
            ${r?"":"rotate-180"}
          `})}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-white dark:bg-[#0d0e12] border-r border-gray-200 dark:border-gray-800 transition-all duration-300 z-20 flex flex-col
          ${t?"w-20":"w-64"} 
          lg:translate-x-0
          ${r?"translate-x-0":"-translate-x-full"}
        `,children:[e.jsxs("div",{className:"p-6 relative",children:[e.jsx("button",{onClick:()=>s(!t),className:"absolute -right-3 top-8 p-1.5 rounded-full bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 hidden lg:flex items-center justify-center hover:bg-gray-100 dark:hover:bg-[#2d2f36] transition-all duration-200 z-50",children:e.jsx(Os,{size:12,className:`transform transition-transform duration-200 text-gray-600 dark:text-gray-400
                ${t?"rotate-180":""}
              `})}),e.jsx("div",{className:"flex items-center mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/tf1.svg",alt:"Token Factory Logo",className:"w-10 h-10 text-[#00ffbd]"}),!t&&e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white transition-opacity duration-200",children:"Token Factory"})]})}),e.jsx("div",{className:"space-y-2",children:u.map((x,f)=>m(x,f))})]}),e.jsx("div",{className:`mt-auto p-6 transition-all duration-200 ${t?"flex flex-col items-center":""}`,children:e.jsx("div",{className:`flex gap-3 ${t?"flex-col":""}`,children:c.map((x,f)=>e.jsx("a",{href:x.href,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",title:x.label,children:e.jsx(x.icon,{size:20})},f))})})]})]})}function ji(){const{isLoading:n,chain:a,chains:t}=Sa(),{isConnected:s}=Le(),[r,o]=l.useState(!1);return l.useEffect(()=>{const i=d=>{d.message?.includes("Internal JSON-RPC error")&&(o(!1),G.error("Network switch failed. Please try again."))};return window.ethereum&&window.ethereum.on("error",i),()=>{window.ethereum&&window.ethereum.removeListener("error",i)}},[]),l.useEffect(()=>{s&&a&&o(!1)},[a,s]),e.jsx("div",{className:"relative",style:{zIndex:99999},children:e.jsx(qo,{chainStatus:n||r?"loading":"icon",showBalance:!1,accountStatus:"address",onClick:()=>{!n&&!r&&o(!0)}})})}const Js={bitcoin:"BTC",ethereum:"ETH",binancecoin:"BNB",ripple:"XRP",cardano:"ADA",solana:"SOL",polkadot:"DOT",dogecoin:"DOGE","avalanche-2":"AVAX",chainlink:"LINK",polygon:"POL",uniswap:"UNI",stellar:"XLM",cosmos:"ATOM","internet-computer":"ICP",filecoin:"FIL","ethereum-classic":"ETC",monero:"XMR","bitcoin-cash":"BCH",litecoin:"LTC"};function Ni(){const[n,a]=l.useState([]),[t,s]=l.useState(!0);return l.useEffect(()=>{const r=async()=>{try{const i=await Ft.get("https://api.coingecko.com/api/v3/simple/price",{params:{ids:Object.keys(Js).join(","),vs_currencies:"usd",include_24hr_change:!0}}),d=Object.entries(i.data).map(([u,c])=>({id:u,symbol:Js[u],price:c.usd,change24h:c.usd_24h_change}));a(d),s(!1)}catch(i){console.error("Error fetching prices:",i),s(!1)}};r();const o=setInterval(r,3e4);return()=>clearInterval(o)},[]),t?null:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"relative flex items-center",children:e.jsx("div",{className:"animate-ticker flex items-center gap-6 whitespace-nowrap",children:[...n,...n].map((r,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r.symbol}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",r.price.toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsxs("span",{className:`text-xs ${r.change24h>=0?"text-green-500":"text-red-500"}`,children:[r.change24h.toFixed(2),"%"]})]},`${r.id}-${o}`))})})})}function Bc(){const{isDarkMode:n,toggleTheme:a}=Cs();return Le(),e.jsxs("header",{className:"fixed top-0 right-0 lg:left-64 left-0 h-16 bg-white dark:bg-[#0d0e12] border-b border-gray-200 dark:border-gray-800 px-6 flex items-center justify-between z-10 transition-all duration-300",children:[e.jsx(Ni,{}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ji,{}),e.jsx("button",{onClick:a,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#1a1b1f] text-gray-600 dark:text-gray-300",children:n?e.jsx(Un,{size:20}):e.jsx($n,{size:20})})]})]})}const Ti="hh-sol-artifact-1",Ci="TokenFactory",Ei="contracts/TokenFactory.sol",Si=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"}],name:"FeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"FeeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"polAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"liquidityAmount",type:"uint256"}],name:"LiquidityAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"polAmount",type:"uint256"}],name:"LiquidityAdditionFailed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"address",name:"tokenAddress",type:"address"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"symbol",type:"string"},{indexed:!1,internalType:"uint8",name:"decimals",type:"uint8"},{indexed:!1,internalType:"uint256",name:"initialSupply",type:"uint256"},{indexed:!1,internalType:"string",name:"logoURI",type:"string"},{indexed:!1,internalType:"bool",name:"isMeme",type:"bool"}],name:"TokenCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"chainFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint256",name:"totalSupply",type:"uint256"},{internalType:"address",name:"marketingWallet",type:"address"},{internalType:"address",name:"treasuryAddress",type:"address"},{internalType:"address",name:"devAddress",type:"address"},{internalType:"address",name:"liquidityAddress",type:"address"},{internalType:"uint256",name:"burnFee",type:"uint256"},{internalType:"uint256",name:"treasuryFee",type:"uint256"},{internalType:"uint256",name:"devFee",type:"uint256"},{internalType:"uint256",name:"marketingFee",type:"uint256"},{internalType:"uint256",name:"liquidityFee",type:"uint256"},{internalType:"uint256",name:"buyFees",type:"uint256"},{internalType:"uint256",name:"sellFees",type:"uint256"},{internalType:"address",name:"router",type:"address"},{internalType:"string",name:"logoURI",type:"string"}],internalType:"struct TokenFactory.MemeTokenParams",name:"params",type:"tuple"}],name:"createMemeToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"},{internalType:"uint256",name:"initialSupply",type:"uint256"},{internalType:"string",name:"logoURI",type:"string"}],name:"createToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[],name:"defaultDex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"dexConfigs",outputs:[{internalType:"address",name:"router",type:"address"},{internalType:"address",name:"factory",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"memeImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"}],name:"setChainFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_paused",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"standardImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenLogos",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"router",type:"address"},{internalType:"address",name:"factory",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"bool",name:"isActive",type:"bool"}],name:"updateDexConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],sn={_format:Ti,contractName:Ci,sourceName:Ei,abi:Si},Ai=5*1024*1024,Mi=["image/jpeg","image/jpg","image/png","image/webp"],Ii=n=>{if(!n||!(n instanceof File||n instanceof Blob))throw new Error("Invalid file object");let a=n.type;if(!a&&n.name)switch(n.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":a="image/jpeg";break;case"png":a="image/png";break;case"webp":a="image/webp";break;default:throw new Error("Unsupported file type. Please use .jpg, .jpeg, .png, or .webp")}if(!a||!Mi.includes(a.toLowerCase()))throw new Error("File must be .jpg, .jpeg, .png, or .webp");if(!n.size||n.size>Ai)throw new Error("File size must be less than 5MB");if(n.size===0)throw new Error("File is empty")};async function Fi(n){try{Ii(n);const a=new FormData;a.append("file",n);const t=await fetch("https://api.pinata.cloud/pinning/pinFileToIPFS",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M"},body:a});if(!t.ok){const i=await t.json().catch(()=>({}));throw new Error(i.message||`Upload failed with status ${t.status}`)}const s=await t.json();if(!s.IpfsHash)throw new Error("No IPFS hash returned from Pinata");const r=`ipfs://${s.IpfsHash}`,o=`https://gateway.pinata.cloud/ipfs/${s.IpfsHash}`;return{ipfsUrl:r,httpUrl:o}}catch(a){throw console.error("Upload Error:",a),a.message.includes("401")?new Error("Invalid Pinata API key. Please check your configuration."):a.message.includes("413")?new Error("File size too large. Please use a smaller image."):a}}const yt={ERC721:[{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"uint256[]",name:"limits",type:"uint256[]"}],name:"setWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_paymentToken",type:"address"}],name:"setPaymentToken",outputs:[],stateMutability:"nonpayable",type:"function"},"error MaxSupplyExceeded()","error InsufficientPayment()","error MintingNotStarted()","error MaxPerWalletExceeded()","error InvalidMintAmount()"],ERC1155:[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"initialized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"message",type:"string"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Debug",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"symbol",type:"string"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"}],name:"Initialized",type:"event"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_paymentToken",type:"address"}],name:"setPaymentToken",outputs:[],stateMutability:"nonpayable",type:"function"}],ERC721Royalty:[{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"}],ERC1155Royalty:[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"}]},Li={apiKey:"AIzaSyDlfQMHiTf2vlpOdQA7gsiPK9PcITwBCc8",authDomain:"tokenfactory-bbe1a.firebaseapp.com",projectId:"tokenfactory-bbe1a",storageBucket:"tokenfactory-bbe1a.firebasestorage.app",messagingSenderId:"235589319121",appId:"1:235589319121:web:05d9cd3aeaed3d62d748f0",measurementId:"G-SJ14LLN724"},rn=Yr(Li);Zr(rn);const $e=Xr(rn),Ma=_e($e,"collections"),Qa=_e($e,"tokenDeployments"),es=_e($e,"mints"),Ks=_e($e,"holders");_e($e,"minters");_e($e,"volume");_e($e,"tokenTransfers");_e($e,"pools");_e($e,"userPools");const Pi=async n=>{try{const{artwork:a,...t}=n,s={...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return(await Lt(Ma,s)).id}catch(a){throw a}},As=async n=>{try{const a=Be(Ma,Ie("symbol","==",n)),t=await Ue(a);if(!t.empty){const s=t.docs[0];return{id:s.id,...s.data()}}return null}catch(a){throw a}},Di=async(n={})=>{try{let a=_e($e,"collections");const t=[];return n.network&&n.network!=="all"&&(n.network==="unichain-mainnet"?t.push(Ie("chainId","==",130)):n.network==="unichain"?t.push(Ie("chainId","==",1301)):t.push(Ie("network","==",n.network))),n.type&&n.type!=="all"&&t.push(Ie("type","==",n.type)),n.isRandomMint&&t.push(Ie("isRandomMint","==",!0)),t.push(xt("createdAt","desc")),a=Be(a,...t),(await Ue(a)).docs.map(r=>({id:r.id,...r.data()}))}catch(a){throw console.error("Error in getAllCollections:",a),a}},Bi=async(n,a)=>{try{const t=Be(Ma,Ie("symbol","==",n)),s=await Ue(t);if(!s.empty){const r=s.docs[0].ref;return await Ss(r,{totalMinted:a,updatedAt:ca()}),{...s.docs[0].data(),totalMinted:a}}}catch(t){throw t}},Ri=(n,a)=>{const t=Be(Ma,Ie("symbol","==",n));return Aa(t,s=>{s.empty||a(s.docs[0].data())})},Rc=async(n,a)=>{try{if(!n.chainId||!n.chainName)throw new Error("chainId and chainName are required for token deployment");await Lt(Qa,{...n,creatorAddress:a.toLowerCase(),createdAt:Date.now(),type:"token",chainId:n.chainId,chainName:n.chainName})}catch(t){throw t}},Oc=async n=>{try{const a=Be(Qa,Ie("creatorAddress","==",n.toLowerCase()));return(await Ue(a)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>o.createdAt-r.createdAt)}catch(a){throw a}},_c=async n=>{try{const a=Be(Ma,Ie("creatorAddress","==",n.toLowerCase()));return(await Ue(a)).docs.map(r=>({id:r.id,...r.data()})).sort((r,o)=>o.createdAt-r.createdAt)}catch(a){throw a}},Wc=async n=>{try{const a=Be(es,Ie("collectionAddress","==",n),xt("timestamp","desc"),Ja(50));return(await Ue(a)).docs.map(s=>({id:s.id,...s.data(),timestamp:s.data().timestamp?.toDate()}))}catch{return[]}},Oi=async n=>{try{const{metadataUrl:a,...t}=n,s={collectionAddress:t.collectionAddress||"",minterAddress:t.minterAddress?t.minterAddress.toLowerCase():"",tokenId:String(t.tokenId||"0"),quantity:String(t.quantity||"1"),hash:String(t.hash||""),image:String(t.image||""),value:String(t.value||"0"),type:String(t.type||"ERC1155"),name:t.name||"",symbol:t.symbol||"",artworkType:t.artworkType||"image",network:t.network||"sepolia",mintPrice:t.mintPrice||"0",paymentToken:t.paymentToken||null,timestamp:ca()};if(!s.collectionAddress||!s.minterAddress)throw new Error("Missing required fields in mint data");const r=await Lt(es,s),o=Be(Ks,Ie("collectionAddress","==",s.collectionAddress),Ie("holderAddress","==",s.minterAddress)),i=await Ue(o),d=Number(s.quantity);if(i.empty)await Lt(Ks,{collectionAddress:s.collectionAddress,holderAddress:s.minterAddress,quantity:d,lastUpdated:ca()});else{const u=i.docs[0],c=Number(u.data().quantity)||0;await Ss(u.ref,{quantity:c+d,lastUpdated:ca()})}return r.id}catch(a){throw a}},Ze=async n=>{try{const a=Be(Qa,Ie("address","==",n)),t=await Ue(a);return t.empty?null:t.docs[0].data()}catch{return null}},Hc=async n=>{try{return await Ze(n)}catch{return null}},Uc=async n=>{try{const a=Be(_e($e,"mints"),Ie("minterAddress","==",n.toLowerCase())),s=(await Ue(a)).docs.map(u=>({id:u.id,...u.data(),mintedAt:u.data().timestamp?.toDate()||new Date})),r=await Ue(_e($e,"collections")),o=new Map;r.docs.forEach(u=>{const c=u.data();c.contractAddress&&o.set(c.contractAddress.toLowerCase(),c)});const i=[],d=new Set;for(const u of s){const c=o.get(u.collectionAddress?.toLowerCase());if(c||u.type==="ERC1155"){const m={...u,...c||{},tokenId:u.tokenId||1,name:u.name||c?.name||"Unknown Collection",collectionName:c?.name||u.name,type:u.type||c?.type||"ERC721",symbol:c?.symbol||u.symbol,artworkType:c?.artworkType||u.artworkType||"image",network:c?.network||u.network||"sepolia",value:u.value||c?.mintPrice||"0",paymentToken:u.paymentToken||c?.paymentToken||null},x=`${m.collectionAddress}-${m.tokenId}`;if(!d.has(x))if(d.add(x),u.type==="ERC1155"&&u.balance>1)for(let f=0;f<u.balance;f++)i.push({...m,balance:1,uniqueId:`${x}-${f}`});else i.push({...m,balance:u.balance||1,uniqueId:x})}}return i}catch{return[]}},_i=async()=>{try{const n=Be(Qa,Ie("type","==","token"),xt("createdAt","desc"));return(await Ue(n)).docs.map(t=>({id:t.id,...t.data()}))}catch{return[]}},nn="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M",on="https://api.pinata.cloud/pinning",Wi="https://ipfs.io/ipfs/";async function Hi(n){const a=new FormData;return a.append("file",n),`ipfs://${(await Ft.post(`${on}/pinFileToIPFS`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${nn}`},maxBodyLength:1/0})).data.IpfsHash}`}async function Ui(n){const a={...n};return`ipfs://${(await Ft.post(`${on}/pinJSONToIPFS`,a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${nn}`}})).data.IpfsHash}`}function it(n){return n?n.startsWith("http")?n:n.replace("ipfs://",Wi):""}const na=_e($e,"tokenTransfers"),$i=["event Transfer(address indexed from, address indexed to, uint256 value)"],Qs=new Map,Fa=new Set,$c=async(n,a)=>{try{if(Qs.has(n))return;const t=new _(n,$i,a),s=await a.getBlockNumber(),o=(await a.getNetwork()).chainId,i=t.filters.Transfer(),d=Math.max(0,s-1e4),u=await t.queryFilter(i,d,s);for(const m of u){const x=`${m.transactionHash}-${m.args[0]}-${m.args[1]}-${m.args[2]}`;if(Fa.has(x))continue;const f=await a.getBlock(m.blockNumber),p={tokenAddress:n,fromAddress:m.args[0].toLowerCase(),toAddress:m.args[1].toLowerCase(),amount:m.args[2].toString(),transactionHash:m.transactionHash,blockNumber:m.blockNumber,timestamp:f.timestamp*1e3,chainId:Number(o)},b=Be(na,Ie("transactionHash","==",p.transactionHash),Ie("fromAddress","==",p.fromAddress),Ie("toAddress","==",p.toAddress));(await Ue(b)).empty&&await Lt(na,p),Fa.add(x)}const c=t.on("Transfer",async(m,x,f,p)=>{const b=`${p.transactionHash}-${m}-${x}-${f}`;if(Fa.has(b))return;const A=await a.getBlock(p.blockNumber),N={tokenAddress:n,fromAddress:m.toLowerCase(),toAddress:x.toLowerCase(),amount:f.toString(),transactionHash:p.transactionHash,blockNumber:p.blockNumber,timestamp:A.timestamp*1e3,chainId:Number(o)},y=Be(na,Ie("transactionHash","==",N.transactionHash),Ie("fromAddress","==",N.fromAddress),Ie("toAddress","==",N.toAddress));(await Ue(y)).empty&&await Lt(na,N),Fa.add(b)});Qs.set(n,c)}catch(t){throw t}},qc=async n=>{try{const a=Be(na,Ie("fromAddress","==",n.toLowerCase()),xt("timestamp","desc")),t=Be(na,Ie("toAddress","==",n.toLowerCase()),xt("timestamp","desc")),[s,r]=await Promise.all([Ue(a),Ue(t)]),o=s.docs.map(u=>{const c=u.data();return{id:u.id,...c,type:"sent",timestamp:new Date(c.timestamp)}}),i=r.docs.map(u=>{const c=u.data();return{id:u.id,...c,type:"received",timestamp:new Date(c.timestamp)}});return[...o,...i].sort((u,c)=>c.timestamp.getTime()-u.timestamp.getTime())}catch{return[]}},zc=async n=>{try{const a=Be(_e($e,"nftTransfers"),Ie("fromAddress","==",n.toLowerCase()),xt("timestamp","desc")),t=Be(_e($e,"nftTransfers"),Ie("toAddress","==",n.toLowerCase()),xt("timestamp","desc")),[s,r]=await Promise.all([Ue(a),Ue(t)]),o=s.docs.map(u=>{const c=u.data();return{id:u.id,...c,type:"sent",timestamp:new Date(c.timestamp)}}),i=r.docs.map(u=>{const c=u.data();return{id:u.id,...c,type:"received",timestamp:new Date(c.timestamp)}});return[...o,...i].sort((u,c)=>c.timestamp.getTime()-u.timestamp.getTime())}catch{return[]}},ln=document.createElement("style");ln.textContent=`
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-3px);
    }
  }
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-2px);
    }
    75% {
      transform: translateX(2px);
    }
  }
`;document.head.appendChild(ln);const fa={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingLogo:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),CreatingToken:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},He={SEPOLIA:11155111,POLYGON:137,UNICHAIN_MAINNET:130,UNICHAIN:1301,MOONWALKER:1828369849,MONAD_TESTNET:10143},qi={[He.SEPOLIA]:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",[He.POLYGON]:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",[He.UNICHAIN_MAINNET]:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",[He.UNICHAIN]:"0x08a58b1628Fb449635078355Be83e181EFBe3948",[He.MOONWALKER]:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",[He.MONAD_TESTNET]:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426"},os={[He.SEPOLIA]:"0.01",[He.POLYGON]:"20",[He.UNICHAIN_MAINNET]:"0.01",[He.UNICHAIN]:"0.01",[He.MOONWALKER]:"369",[He.MONAD_TESTNET]:"0.01"},zi={[He.SEPOLIA]:"ETH",[He.POLYGON]:"POL",[He.UNICHAIN_MAINNET]:"ETH",[He.UNICHAIN]:"ETH",[He.MOONWALKER]:"ZERO",[He.MONAD_TESTNET]:"MON"},Vi=({isOpen:n,onClose:a,currentStep:t,tokenName:s,error:r,deployedAddress:o})=>{const i=[{key:"preparing",label:"Preparing Transaction",icon:fa.Preparing},{key:"uploading",label:"Uploading Logo",icon:fa.UploadingLogo},{key:"creating",label:"Creating Token",icon:fa.CreatingToken},{key:"completed",label:"Token Created Successfully",icon:fa.Completed}],d=i.findIndex(m=>m.key===t),u=m=>m?.includes("user rejected action")?"Transaction was rejected. Please try again.":m?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":m?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred",c=async m=>{try{await navigator.clipboard.writeText(m),Pe.success("Address copied to clipboard!")}catch{Pe.error("Failed to copy address")}};return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-[99999]",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm z-[99999]"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-[99999]",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[r?"Error Creating Token":"Creating Token",s&&!r&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:s})]}),e.jsx("div",{className:"space-y-4",children:i.map((m,x)=>{const f=m.icon,p=x===d,b=!r&&x<d,A=r&&x===d;return e.jsxs("div",{className:Et("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":p&&!A,"text-[#00ffbd]":b,"bg-red-500/10 text-red-500":A,"text-gray-400":!p&&!b&&!A}),children:[e.jsx(f,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m.label}),p&&m.key==="creating"&&!r&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Creating token ",s]})]})]},m.key)})}),r&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fa.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#00ffbd] font-medium text-lg",children:"Token created successfully! 🎉"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Your token has been deployed and is ready for use"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Token Contract Address"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("code",{className:"text-sm text-gray-800 dark:text-gray-200 flex-1 break-all",children:o}),e.jsx("button",{onClick:()=>c(o),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md transition-colors",title:"Copy address",children:e.jsx(Ta,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ℹ️ Copy this address to import your token in your wallet"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Next Steps"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Import Token"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add the token to your wallet using the contract address above"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Add Liquidity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Provide liquidity to enable trading of your token"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Start Trading"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Use TokenFactory Swap to trade your token"})]})]})]})]})]})]})})})})]})})},Gi=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[...Array(9)].map((d,u)=>e.jsx("button",{onMouseEnter:()=>i(u+1),onMouseLeave:()=>i(0),onClick:()=>{r(u+1),t(u+1),a()},className:"focus:outline-none",children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${u+1<=(o||s)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},u))})]})})})})]})})};function Vc({isOpen:n,onClose:a}){const{account:t}=Wo(),[s,r]=l.useState(null),[o,i]=l.useState(null),[d,u]=l.useState({name:"",symbol:"",totalSupply:"",description:"",logo:null}),[c,m]=l.useState(null),{addDeployment:x}=Vr(),[f,p]=l.useState(!1),[b,A]=l.useState(null),[N,y]=l.useState(null),[k,w]=l.useState(!1),[g,v]=l.useState(!1),[S,h]=l.useState({width:window.innerWidth,height:window.innerHeight});l.useEffect(()=>{(async()=>{if(window.ethereum){const O=await window.ethereum.request({method:"eth_chainId"});r(parseInt(O,16))}})(),window.ethereum?.on("chainChanged",O=>{r(parseInt(O,16))})},[]);const T=R=>{u({...d,[R.target.name]:R.target.value})},C=R=>{const O=R.target.files[0];O&&(u({...d,logo:O}),m(URL.createObjectURL(O)))},H=()=>qi[s],M=()=>{const R=os[s],O=zi[s]||"ETH";return`${R} ${O}`},j=async(R,O,D)=>{try{const Z=F=>{switch(F){case 137:return"Polygon";case 11155111:return"Sepolia";case 130:return"Unichain Mainnet";case 1301:return"Unichain Testnet";case 1828369849:return"Moonwalker";case 10143:return"Monad Testnet";default:return"Unknown"}};R&&i(R);try{const F=await getNetwork().then(I=>I.chainId),L={address:R,name:d.name,symbol:d.symbol,decimals:18,totalSupply:d.totalSupply,logo:D?.logo,logoIpfs:D?.logoIpfs,timestamp:Date.now(),chainId:F,chainName:Z(F),type:"token"};await x(L)}catch(F){console.warn("Error saving deployment:",F)}A("completed"),y(null)}catch(Z){console.error("Error in handleSuccess:",Z),y(Z.message)}},E=async R=>{if(R.preventDefault(),!t){Pe.error("Please connect your wallet first");return}p(!0),A("preparing"),y(null);try{let O={ipfsUrl:"",httpUrl:""};if(d.logo){A("uploading");try{O=await Fi(d.logo)}catch(be){A("error"),y(`Logo upload failed: ${be.message}`);return}}else{A("error"),y("Please upload a logo");return}const Z=await new ne(window.ethereum).getSigner(),F=H();if(!F){A("error"),y("Factory address not found for this network");return}const L=new _(F,sn.abi,Z);let I;s===He.MONAD_TESTNET?(I=qt(os[s]),Pe.success("Creating token with MON as fee on Monad Testnet")):s===He.MOONWALKER?(I=qt("0.01"),Pe.success("Note: 369 ZERO fee will be implemented in the next contract update")):I=qt(os[s]?.toString()||"0.01"),A("creating");const V=s===He.MONAD_TESTNET?{gasLimit:5e6}:{gasLimit:3e6},X=await(await L.createToken(d.name,d.symbol,18,Te(d.totalSupply,18),O.ipfsUrl,{value:I,...V})).wait(),ae=X.logs.find(be=>{if(be.address.toLowerCase()!==F.toLowerCase())return!1;try{const ge=Xo("TokenCreated(address,address,string,string,uint8,uint256,string,bool)");return be.topics[0].toLowerCase()===ge.toLowerCase()}catch(ge){return console.error("Error checking event signature:",ge),!1}});let le;if(ae)le=L.interface.parseLog({topics:ae.topics,data:ae.data}).args[1];else{const ge=X.logs.map(ve=>{try{return L.interface.parseLog(ve)}catch{return null}}).filter(Boolean).find(ve=>ve.name==="TokenCreated");if(ge)le=ge.args[1];else throw console.error("Available logs:",X.logs),new Error("Could not find token address in transaction events")}if(le)i(le),A("completed");else throw new Error("Failed to get token address from transaction");const xe={name:d.name,symbol:d.symbol,decimals:18,supply:Te(d.totalSupply,18),logo:O.ipfsUrl};await j(le,xe,O),A("completed"),w(!0),setTimeout(()=>{p(!1),A(null),y(null),setTimeout(()=>{v(!0)},1e3),setTimeout(()=>{w(!1)},3e4)},8e3),a(),u({name:"",symbol:"",totalSupply:"",description:"",logo:null}),m(null)}catch(O){console.error("Token Creation error:",O),A("error"),y(O.message.includes("chain")?"Please switch to a supported network":`Failed to create token: ${O.message}`)}};return l.useEffect(()=>{const R=()=>{h({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{open:n,onClose:a,className:"relative z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999]","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-[9999]",children:e.jsx(Q.Panel,{className:"relative w-full max-w-2xl transform overflow-hidden rounded-lg bg-white dark:bg-[#0a0b0f] p-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(R=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${R*.2}s`}},R))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(Q.Title,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create New Token"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:e.jsx(dt,{size:24})})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:["Launch your own token. Fee: ",M()||"..."]}),t?e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("div",{className:`w-full h-full rounded-full border-2 border-dashed ${c?"border-[#00ffbd]":"border-gray-300"} flex items-center justify-center overflow-hidden`,children:c?e.jsx("img",{src:c,alt:"Token Logo",className:"w-full h-full object-cover"}):e.jsx(Or,{size:32,className:"text-gray-400"})}),e.jsx("input",{type:"file",onChange:C,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Token Name"}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:T,className:`w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200
                  autofill:bg-gray-50 dark:autofill:bg-[#1a1b1f] 
                  [-webkit-autofill]:!bg-gray-50 dark:[-webkit-autofill]:!bg-[#1a1b1f]
                  [-webkit-autofill]:!text-gray-900 dark:[-webkit-autofill]:!text-white
                  [-webkit-autofill_selected]:!bg-gray-50 dark:[-webkit-autofill_selected]:!bg-[#1a1b1f]`,placeholder:"My Token",required:!0,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Token Symbol"}),e.jsx("input",{type:"text",name:"symbol",value:d.symbol,onChange:T,className:`w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200
                  autofill:bg-gray-50 dark:autofill:bg-[#1a1b1f] 
                  [-webkit-autofill]:!bg-gray-50 dark:[-webkit-autofill]:!bg-[#1a1b1f]
                  [-webkit-autofill]:!text-gray-900 dark:[-webkit-autofill]:!text-white
                  [-webkit-autofill_selected]:!bg-gray-50 dark:[-webkit-autofill_selected]:!bg-[#1a1b1f]`,placeholder:"MTK",required:!0,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Decimals"}),e.jsx("input",{type:"number",name:"decimals",value:"18",disabled:!0,className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 cursor-not-allowed opacity-75"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Standard ERC20 decimal places (non-modifiable)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Total Supply"}),e.jsx("input",{type:"text",name:"totalSupply",value:d.totalSupply,onChange:T,className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200",placeholder:"1000000",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:d.description,onChange:T,className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none resize-none transition-all duration-200",placeholder:"Describe your token...",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2.5 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",disabled:!t,children:"Create Token"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(nt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create a token"}),e.jsx("w3m-button",{})]})]})]})})})]}),e.jsx(Vi,{isOpen:f,onClose:()=>{p(!1),A(null)},currentStep:b,tokenName:d.name,error:N,deployedAddress:o}),e.jsx(Gi,{isOpen:g,onClose:()=>v(!1),onRate:R=>{console.log("User rated token creation:",R)}}),k&&e.jsx(pt,{width:S.width,height:S.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}})]})}const Yi={11155111:{USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",USDT:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0",WETH:"0xfff9976782d46cc05630d1f6ebab18b2324d6b14"},137:{USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",WMATIC:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270"},1301:{USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844",WETH:"0x4E6F7372696F00000000000000000000000000FF"},1828369849:{USDC:void 0,USDT:void 0,WZERO:void 0}},Xi=[{inputs:[{components:[{internalType:"string",name:"collectionType",type:"string"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"},{internalType:"address",name:"royaltyReceiver",type:"address"},{internalType:"uint96",name:"royaltyFeeNumerator",type:"uint96"}],internalType:"struct NFTFactory.CreateNFTCollectionParams",name:"params",type:"tuple"}],name:"createNFTCollection",outputs:[],stateMutability:"payable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"address",name:"collection",type:"address"},{indexed:!1,internalType:"string",name:"collectionType",type:"string"}],name:"CollectionCreated",type:"event"}],Zi=["level","strength","power","speed","health","mana","stamina"];async function dn(n,a,t){try{const s=await Hi(a),r=it(s),o=n.attributes?.map(u=>{const c=u.value?.toString()||"",m=Number(c),x=!isNaN(m)&&c!=="",f=u.trait_type?.toLowerCase();return{trait_type:u.trait_type,value:x?m:c,display_type:x&&Zi.includes(f)?"number":void 0}}).filter(u=>u.trait_type&&u.value!=="")||[],i={name:n.name+(t?` #${t}`:""),description:n.description||"",image:s,external_url:n.website||"",attributes:o,background_color:n.background_color||"000000"};return{metadataUrl:await Ui(i),imageHttpUrl:r,imageIpfsUrl:s}}catch{throw new Error("Failed to prepare and upload metadata")}}const Xe={SEPOLIA:11155111,POLYGON:137,UNICHAIN_MAINNET:130,UNICHAIN:1301,MOONWALKER:1828369849,MONAD_TESTNET:10143},Ji={[Xe.SEPOLIA]:"0xfb9c2ebfacb84cc5843a4c01fd8cf3d1a9e3423d",[Xe.POLYGON]:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",[Xe.UNICHAIN_MAINNET]:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",[Xe.UNICHAIN]:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",[Xe.MOONWALKER]:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",[Xe.MONAD_TESTNET]:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02"},Ki={[Xe.SEPOLIA]:"ETH",[Xe.POLYGON]:"POL",[Xe.UNICHAIN_MAINNET]:"ETH",[Xe.UNICHAIN]:"ETH",[Xe.MOONWALKER]:"ZERO",[Xe.MONAD_TESTNET]:"MON"},cn=document.createElement("style");cn.textContent=`
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-3px);
    }
  }
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-2px);
    }
    75% {
      transform: translateX(2px);
    }
  }
`;document.head.appendChild(cn);const Jt={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingMetadata:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),CreatingCollection:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("path",{d:"M9 6l6 12M15 6l-6 12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"1s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),SettingWhitelist:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 8v8",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M8 12h8",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.3s"}}),e.jsx("path",{d:"M7 7l2 2 2-2M13 15l2 2 2-2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 2s ease-in-out infinite",animationDelay:"0.6s"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},Qi=({isOpen:n,onClose:a,currentStep:t,collectionName:s,error:r})=>{const o=[{key:"preparing",label:"Preparing Transaction",icon:Jt.Preparing},{key:"uploading",label:"Uploading Metadata",icon:Jt.UploadingMetadata},{key:"creating",label:"Creating Collection",icon:Jt.CreatingCollection},{key:"whitelist",label:"Setting Whitelist",icon:Jt.SettingWhitelist},{key:"completed",label:"Collection Created Successfully",icon:Jt.Completed}],i=o.findIndex(c=>c.key===t),d=!!r,u=c=>c?.includes("user rejected action")?"Transaction was rejected. Please try again.":c?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return _r.createPortal(e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"fixed inset-0 z-[10000]",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsxs(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[d?"Error Creating Collection":"Creating NFT Collection",s&&!d&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:s})]}),e.jsx("div",{className:"space-y-4",children:o.map((c,m)=>{const x=c.icon,f=m===i,p=!d&&m<i,b=d&&m===i;return e.jsxs("div",{className:Et("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":f&&!b,"text-[#00ffbd]":p,"bg-red-500/10 text-red-500":b,"text-gray-400":!f&&!p&&!b}),children:[e.jsx(x,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.label}),f&&c.key==="creating"&&!d&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Creating collection ",s]})]})]},c.key)})}),d&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Jt.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-[#00ffbd] font-medium",children:"Collection created successfully!"})})]})})})})]})}),document.body)},el=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[...Array(9)].map((d,u)=>e.jsx("button",{onMouseEnter:()=>i(u+1),onMouseLeave:()=>i(0),onClick:()=>{r(u+1),t(u+1),a()},className:"focus:outline-none",children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${u+1<=(o||s)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},u))})]})})})})]})})},vt=[{id:"type",title:"Collection Type"},{id:"basics",title:"Basic Info"},{id:"artwork",title:"Artwork"},{id:"properties",title:"Properties"},{id:"minting",title:"Minting"}],is={137:"2 POL",11155111:"0.015 ETH",1:"0.015 ETH",1301:"0.015 ETH",1828369849:"369 ZERO",10143:"0.01 MON"},tl=({isOpen:n,onClose:a,addresses:t,onRemoveAddress:s,onUpdateAddress:r})=>{if(!n)return null;const o=d=>{d.stopPropagation()},i=(d,u)=>{u.preventDefault(),u.stopPropagation();const c=u.target.value,m=[...t],x=c===""?"":parseInt(c)||"";typeof m[d]=="string"?m[d]={address:m[d],maxMint:x}:m[d]={...m[d],maxMint:x},r({whitelistAddresses:m})};return _r.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100]",onClick:o,children:[e.jsx("div",{className:"fixed inset-0 bg-black/70"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl transform rounded-lg bg-white dark:bg-[#0a0b0f] p-6 relative",onClick:o,children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("button",{type:"button",onClick:d=>{d.stopPropagation(),a()},className:"absolute top-6 right-6 w-8 h-8 flex items-center justify-center bg-white dark:bg-[#0a0b0f] border border-[#00ffbd] rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors z-50",children:e.jsx(dt,{size:20,className:"text-[#00ffbd]"})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Whitelist Addresses"}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar [&::-webkit-scrollbar-thumb]:bg-[#00ffbd] hover:[&::-webkit-scrollbar-thumb]:bg-[#00e6a9]",children:t.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2",children:t.map((d,u)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-[#1a1b1f] rounded-lg hover:bg-gray-100 dark:hover:bg-[#2a2b2f] transition-colors",children:[e.jsx("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 flex-1",children:typeof d=="object"?d.address:d}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mint limit:"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:typeof d=="object"?d.maxMint===""?"":d.maxMint:1,onChange:c=>i(u,c),onBlur:c=>{const m=c.target.value,x=[...t],f=m===""||parseInt(m)<1?1:parseInt(m);typeof x[u]=="string"?x[u]={address:x[u],maxMint:f}:x[u]={...x[u],maxMint:f},r({whitelistAddresses:x})},onKeyDown:c=>{c.stopPropagation(),!(c.key==="Backspace"||c.key==="Delete"||c.key==="ArrowLeft"||c.key==="ArrowRight"||c.key==="Tab")&&!/[0-9]/.test(c.key)&&!c.ctrlKey&&!c.metaKey&&c.preventDefault()},className:"w-16 px-2 py-1 bg-white dark:bg-[#0d0e12] text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded text-sm focus:border-[#00ffbd] focus:ring-1 focus:ring-[#00ffbd] focus:outline-none",onClick:c=>{c.stopPropagation(),c.target.select()}})]}),e.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),s(u)},className:"p-2 text-red-500 hover:bg-red-500/10 dark:hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(qn,{size:18})})]})]},u))}):e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No addresses added yet"})})]})]})})]}),document.body)};function Gc({isOpen:n,onClose:a}){const t=ua(),{address:s}=Le(),{openConnectModal:r}=zo();Sa();const[o,i]=l.useState("type"),[d,u]=l.useState(""),[c,m]=l.useState(null),[x,f]=l.useState(!1),[p,b]=l.useState(null),[A,N]=l.useState(null),[y,k]=l.useState(!1),[w,g]=l.useState(!1),[v,S]=l.useState(!1),[h,T]=l.useState({type:"",name:"",symbol:"",description:"",website:"",category:"",socials:{twitter:"",discord:"",telegram:"",zos:""},artwork:null,previewUrl:null,artworkType:null,attributes:[],mintPrice:"",maxSupply:"",maxPerWallet:"",releaseDate:"",mintEndDate:"",infiniteMint:!1,enableWhitelist:!1,whitelistAddresses:[],mintingToken:"native",customTokenAddress:"",customTokenSymbol:"",royaltyFeePercent:"",royaltyFeeNumerator:0,royaltyReceiver:""}),[C,H]=l.useState({width:window.innerWidth,height:window.innerHeight}),[M,j]=l.useState(null);l.useEffect(()=>((async()=>{if(window.ethereum)try{const q=await window.ethereum.request({method:"eth_chainId"});j(parseInt(q,16))}catch(q){console.error("Error getting chain ID:",q)}})(),window.ethereum&&window.ethereum.on("chainChanged",q=>j(parseInt(q,16))),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",q=>j(parseInt(q,16)))}),[]);const E=()=>M===130?[{id:"native",name:"Native Token (ETH)",icon:e.jsx(et,{className:"text-[#00ffbd]"}),address:"",symbol:"ETH"},{id:"custom",name:"Custom Token",icon:e.jsx(nt,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:M===1301?[{id:"native",name:"Native Token (ETH)",icon:e.jsx(et,{className:"text-[#00ffbd]"}),address:"",symbol:"ETH"},{id:"custom",name:"Custom Token",icon:e.jsx(nt,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:M===137?[{id:"native",name:"Native Token (POL)",icon:e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}),address:"",symbol:"POL"},{id:"custom",name:"Custom Token",icon:e.jsx(nt,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:M===10143?[{id:"native",name:"Native Token (MON)",icon:e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}),address:"",symbol:"MON"},{id:"custom",name:"Custom Token",icon:e.jsx(nt,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:[{id:"custom",name:"Custom Token",icon:e.jsx(nt,{className:"text-[#00ffbd]"}),address:"",symbol:""}],R=()=>{const U=E(),q=U.find(ee=>ee.id===h.mintingToken)||U[0];return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>S(!v),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[q.icon,e.jsx("span",{children:h.mintingToken==="custom"&&h.customTokenSymbol?h.customTokenSymbol:q.name})]}),e.jsx(Zn,{className:`transition-transform ${v?"rotate-180":""}`})]}),v&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-[#1a1b1f] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1",children:U.map(ee=>e.jsxs("button",{onClick:()=>{D({mintingToken:ee.id,customTokenAddress:ee.address,customTokenSymbol:ee.symbol}),S(!1)},className:"w-full px-4 py-2 text-left text-gray-900 dark:text-white hover:bg-[#00ffbd]/10 flex items-center gap-2",children:[ee.icon,e.jsx("span",{children:ee.name})]},ee.id))})]})},O=async()=>{try{let U;if(window.ethereum&&(U=await window.ethereum.request({method:"eth_chainId"}),U=parseInt(U,16)),!U)return console.error("Chain ID not available"),null;if(is[U])return is[U];const q=Ji[U];if(!q)return console.error("Factory address not found for chain:",U),null;const ee=new wt(U===Xe.POLYGON?"https://polygon-rpc.com":U===Xe.UNICHAIN?"https://sepolia.unichain.org":U===Xe.UNICHAIN_MAINNET?"https://mainnet.unichain.org":U===Xe.MONAD_TESTNET?"https://testnet-rpc.monad.xyz/":"https://polygon-rpc.com"),te=await new _(q,["function chainFees(uint256) view returns (uint256)"],ee).chainFees(U),ue=Ve(te),de=Ki[U]||"ETH";return`${ue} ${de}`}catch(U){return console.error("Error getting creation fee:",U),is[M]||null}};l.useEffect(()=>{(async()=>{await O().then(q=>{T(ee=>({...ee,fee:q}))})})()},[]);const D=U=>{T(q=>({...q,...U}))},Z=U=>{const q=U.target.files[0];if(q){const ee=q.type==="video/mp4",ke=q.type.startsWith("image/");if(!ee&&!ke){Pe.error("Please upload an image or MP4 video file");return}const te=ee?5*1024*1024:2*1024*1024;if(q.size>te){Pe.error(`File size must be less than ${ee?"5MB":"2MB"}`);return}const ue=URL.createObjectURL(q);D({artwork:q,previewUrl:ue,artworkType:ee?"video":"image"})}},F=U=>/^0x[a-fA-F0-9]{40}$/.test(U),L=async()=>{try{if(Pe.dismiss("whitelist-info"),!s){Pe.error("Please connect your wallet first");return}if(!h.type||!h.name||!h.symbol||!h.artwork){Pe.error("Please fill in all required fields");return}const U=new ne(window.ethereum),q=await window.ethereum.request({method:"eth_chainId"}),ee=parseInt(q,16);let ke;if(ee===137?ke="0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66":ee===130?ke="0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73":ee===1301?ke="0x5B63598728e1cE2041d2aDbA14B81d668f766857":ee===1828369849?ke="0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8":ee===10143&&(ke="0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02"),!ke){Pe.error(`Factory address not found for network with chain ID ${ee}`);return}f(!0),b("preparing"),N(null);const te=await U.getSigner(),ue=await O();if(!ue){Pe.error("Failed to get creation fee from contract");return}const[de]=ue.split(" "),fe=qt(de);console.log("Setting fee:",fe.toString());try{b("uploading");const{metadataUrl:he,imageHttpUrl:Se,imageIpfsUrl:$}=await dn(h,h.artwork);b("creating");const K=new _(ke,Xi,te),ce=X(ee);console.log("Payment Token being set:",{type:h.mintingToken,address:ce,customAddress:h.customTokenAddress});const ye=h.enableWhitelist?BigInt(1e6):BigInt(h.maxPerWallet||1),Ne=Number(Ve(fe)),z=Number(de);if(Ne!==z)throw new Error(`Invalid fee amount: ${Ne}. Expected: ${z}`);let me={};ee===Xe.MONAD_TESTNET&&(me={gasLimit:8e6,maxFeePerGas:Te("100","gwei"),maxPriorityFeePerGas:Te("10","gwei")},Pe("Using higher gas limit for Monad Testnet",{duration:4e3,icon:"ℹ️"}));const Fe=await(await K.createNFTCollection({collectionType:h.type==="ERC721"?"ERC721":"ERC1155",name:h.name,symbol:h.symbol,metadataURI:"ipfs://",maxSupply:BigInt(h.maxSupply||1e4),mintPrice:Ho(h.mintPrice||"0"),maxPerWallet:ye,releaseDate:BigInt(h.releaseDate?Math.floor(new Date(h.releaseDate).getTime()/1e3):Math.floor(Date.now()/1e3)),mintEndDate:BigInt(h.mintEndDate?Math.floor(new Date(h.mintEndDate).getTime()/1e3):0),infiniteMint:!!h.infiniteMint,paymentToken:h.mintingToken==="native"?"0x0000000000000000000000000000000000000000":h.mintingToken==="custom"?h.customTokenAddress:ce||"0x0000000000000000000000000000000000000000",enableWhitelist:!!h.enableWhitelist,royaltyReceiver:h.royaltyReceiver||s,royaltyFeeNumerator:BigInt(h.royaltyFeeNumerator||0)},{value:fe,...me})).wait();let Ee;const Ce=Fe.logs.find(Me=>Me.topics[0]==="0xaf1866185e64615f1cfc5b81e7bf1ff8beafdc402920eb36641743d8fe5f7757");if(Ce&&(Ee=zt.defaultAbiCoder().decode(["tuple(address creator, address collection, string collectionType, string name, string symbol, uint256 maxSupply, uint256 mintPrice, uint256 maxPerWallet, uint256 releaseDate, uint256 mintEndDate, bool infiniteMint)"],Ce.data)[0].collection),Ee||(Ee=Fe.logs.find(We=>We.topics[0]==="0x82dfd53401a55bb491abcb3e7a97c99da1ed7eaffd89721d3e96e8e8ad4a692d")?.address),!Ee){b("error"),N("Failed to get collection address from transaction");return}if(ee===Xe.MONAD_TESTNET&&!Ee)throw new Error("Collection deployment failed on Monad Testnet. Please check your MON balance.");if(h.enableWhitelist&&h.whitelistAddresses.length>0){b("whitelist");const Me=new _(Ee,yt.ERC721,te),We=h.whitelistAddresses.map(Ke=>typeof Ke=="string"?Ke:Ke.address),Ge=h.whitelistAddresses.map(Ke=>BigInt(typeof Ke=="string"?1:Ke.maxMint));await(await Me.setWhitelist(We,Ge)).wait()}const Ae={...h,contractAddress:Ee,network:ee===1301?"unichain":ee===11155111?"sepolia":ee===137?"polygon":ee===1828369849?"moonwalker":ee===10143?"monad-testnet":"unknown",chainId:ee,previewUrl:Se,imageIpfsUrl:$,metadataUrl:he,mintToken:{type:h.mintingToken||"native",symbol:h.mintingToken==="usdc"?"USDC":h.mintingToken==="usdt"?"USDT":h.mintingToken==="custom"?h.customTokenSymbol:(h.mintingToken==="native",ee===137?"POL":ee===10143?"MON":"ETH"),address:h.mintingToken==="native"?"0x0000000000000000000000000000000000000000":h.mintingToken==="custom"?h.customTokenAddress:ce||"0x0000000000000000000000000000000000000000"},whitelistAddresses:h.whitelistAddresses,createdAt:Date.now(),totalMinted:0,creatorAddress:s.toLowerCase()};await Pi(Ae),b("completed"),k(!0),setTimeout(()=>{f(!1),b(null),N(null),setTimeout(()=>{g(!0)},1e3),setTimeout(()=>{k(!1)},3e4)},2e3),a(),t(`/collection/${h.symbol}`)}catch(he){console.error("Error in collection creation process:",he),b("error"),N(he.message||"Failed to create collection. Please try again.")}}catch(U){console.error("Error in form submission:",U),b("error"),N("Failed to start collection creation. Please check your inputs and try again.")}},I=U=>{const q=document.createElement("input");q.type="file",q.accept=U==="csv"?".csv":U==="excel"?".xlsx,.xls":".json",q.onchange=async ee=>{const ke=ee.target.files[0];if(ke)try{let te=[];if(U==="json"){const de=await ke.text();let fe;try{fe=JSON.parse(de)}catch(K){console.error("JSON parse error:",K),Pe.error("Invalid JSON format");return}const he=K=>{if(typeof K!="string")return null;const ce=K.match(/0x[a-fA-F0-9]{40}/);return ce?ce[0]:null},$=(K=>{const ce=new Set,ye=Ne=>{if(typeof Ne=="string"){const z=he(Ne);z&&ce.add(z);return}if(Array.isArray(Ne)){Ne.forEach(ye);return}Ne&&typeof Ne=="object"&&Object.values(Ne).forEach(ye)};return ye(K),Array.from(ce)})(fe);console.log("Found addresses:",$),te=$.map(K=>({address:K,maxMint:1}))}else if(U==="csv")te=(await ke.text()).split(/[\r\n,]+/).map(he=>he.trim()).filter(he=>he.length>0).map(he=>({address:he.replace(/['"]/g,""),maxMint:1}));else if(U==="excel"){const de=await ke.arrayBuffer(),fe=Zo(de),he=fe.Sheets[fe.SheetNames[0]];te=Jo.sheet_to_json(he,{header:1,raw:!1}).flatMap($=>Array.isArray($)?$.map(K=>{if(!K)return null;const ce=String(K).trim();return ce.startsWith("0x")?{address:ce,maxMint:1}:null}).filter(Boolean):[])}const ue=[...new Set(te.filter(de=>de&&de.address&&F(de.address)).map(de=>de.address))].map(de=>({address:de,maxMint:1}));if(console.log("Valid addresses:",ue),ue.length===0){Pe.error("No valid addresses found in file");return}D({whitelistAddresses:ue}),Pe.success(e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:["Imported ",ue.length," addresses"]}),e.jsx("span",{className:"text-sm text-gray-400 mt-1",children:"Click the counter to view the list"})]}))}catch(te){console.error("Error importing file:",te),Pe.error(`Failed to import ${U} file. Please check the format.`)}},q.click()},V=()=>{const U=()=>e.jsxs("div",{className:"flex justify-between items-center gap-3 mt-6",children:[o!=="type"&&e.jsx("button",{onClick:()=>{const q=vt.findIndex(ee=>ee.id===o);i(vt[q-1].id)},className:"px-6 py-2 border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-[#1a1b1f] text-gray-700 dark:text-gray-300 font-semibold rounded-lg transition-colors",children:"Back"}),o!=="minting"&&e.jsx("button",{onClick:W,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors ml-auto",children:"Continue"}),o==="minting"&&e.jsx("button",{onClick:L,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors ml-auto",children:"Create Collection"})]});switch(o){case"type":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Create NFT Collection"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Choose your collection type. Creation fee: ",h.fee||"Loading..."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>{D({type:"ERC721"}),i("basics")},className:Et("p-4 rounded-lg border-2 text-left","hover:border-[#00ffbd] transition-colors",h.type==="ERC721"?"border-[#00ffbd]":"border-gray-200 dark:border-gray-800"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(et,{size:24,className:"text-[#00ffbd]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ERC-721"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Traditional NFTs, unique and non-divisible"})]})]})}),e.jsx("button",{onClick:()=>{D({type:"ERC1155"}),i("basics")},className:Et("p-4 rounded-lg border-2","hover:border-[#00ffbd] transition-colors",h.type==="ERC1155"?"border-[#00ffbd]":"border-gray-200 dark:border-gray-800"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(et,{size:24,className:"text-[#00ffbd]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ERC-1155"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-token standard, semi-fungible"})]})]})})]}),U()]})]});case"basics":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Collection Name *"}),e.jsx("input",{type:"text",value:h.name,onChange:q=>D({name:q.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"My NFT Collection"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Symbol *"}),e.jsx("input",{type:"text",value:h.symbol,onChange:q=>D({symbol:q.target.value.toUpperCase()}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"MYNFT"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:q=>D({description:q.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none h-24",placeholder:"Describe your collection..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),e.jsx("input",{type:"url",value:h.website,onChange:q=>D({website:q.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"https://"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:h.category,onChange:q=>D({category:q.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"collectibles",children:"Collectibles"}),e.jsx("option",{value:"gaming",children:"Gaming"}),e.jsx("option",{value:"music",children:"Music"}),e.jsx("option",{value:"photography",children:"Photography"}),e.jsx("option",{value:"sports",children:"Sports"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Social Links"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Twitter Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),e.jsx("input",{type:"text",value:h.socials.twitter,onChange:q=>D({socials:{...h.socials,twitter:q.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg pl-8 p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"username"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Discord Server"}),e.jsx("input",{type:"url",value:h.socials.discord,onChange:q=>D({socials:{...h.socials,discord:q.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"https://discord.gg/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Telegram Group"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"t.me/"}),e.jsx("input",{type:"text",value:h.socials.telegram,onChange:q=>D({socials:{...h.socials,telegram:q.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg pl-12 p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"groupname"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"ZOS Profile"}),e.jsx("input",{type:"url",value:h.socials.zos,onChange:q=>D({socials:{...h.socials,zos:q.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"https://zos.zero.tech/..."})]})]})]}),U()]})]});case"artwork":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-64 h-64 relative",children:[e.jsx("div",{className:Et("w-full h-full rounded-lg border-2 border-dashed flex items-center justify-center overflow-hidden",h.previewUrl?"border-[#00ffbd]":"border-gray-300 dark:border-gray-700"),children:h.previewUrl?h.artworkType==="video"?e.jsx("video",{src:h.previewUrl,className:"w-full h-full object-cover",controls:!0}):e.jsx("img",{src:h.previewUrl,alt:"Preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex justify-center gap-4 mb-2",children:[e.jsx(Or,{size:24,className:"text-gray-400"}),e.jsx(Xn,{size:24,className:"text-gray-400"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drop your file here, or click to browse"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supported: Images (2MB) or MP4 Videos (5MB)"})]})}),e.jsx("input",{type:"file",onChange:Z,accept:"image/*,video/mp4",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),h.previewUrl&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>D({artwork:null,previewUrl:null,artworkType:null}),className:"text-sm text-red-500 hover:text-red-600",children:"Remove File"})}),U()]})]});case"properties":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Attributes/traits"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Add traits that make your NFTs unique"})]}),e.jsx("button",{onClick:()=>D({attributes:[...h.attributes,{trait_type:"",value:""}]}),className:"px-3 py-1.5 text-sm bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-lg",children:"Add Attribute"})]}),h.attributes.length===0?e.jsx("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No attributes added yet"})}):e.jsx("div",{className:"space-y-3",children:h.attributes.map((q,ee)=>e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{placeholder:"Attribute name",value:q.trait_type,onChange:ke=>{const te=[...h.attributes];te[ee].trait_type=ke.target.value,D({attributes:te})},className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none text-sm"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{placeholder:"Value",value:q.value,onChange:ke=>{const te=[...h.attributes];te[ee].value=ke.target.value,D({attributes:te})},className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none text-sm"})}),e.jsx("button",{onClick:()=>{const ke=h.attributes.filter((te,ue)=>ue!==ee);D({attributes:ke})},className:"p-2.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(dt,{size:20})})]},ee))}),U()]})]});case"minting":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minting Currency *"}),R()]}),h.mintingToken==="custom"&&e.jsxs("div",{className:"mt-4 space-y-4 animate-[fadeIn_0.3s_ease-in-out]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Custom Token Address *"}),e.jsx("input",{type:"text",value:h.customTokenAddress,onChange:q=>D({customTokenAddress:q.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter token contract address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Custom Token Symbol *"}),e.jsx("input",{type:"text",value:h.customTokenSymbol,onChange:q=>D({customTokenSymbol:q.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter token symbol",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Mint Price *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",step:"0.000000000000000001",value:h.mintPrice,onChange:q=>D({mintPrice:q.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg pl-16 p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"0.00",required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Royalty Fee (%)"}),e.jsx("input",{type:"number",value:h.royaltyFeePercent,onChange:q=>D({royaltyFeePercent:q.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter royalty percentage (0-100) (Optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Royalty Receiver Address"}),e.jsx("input",{type:"text",value:h.royaltyReceiver,onChange:q=>D({royaltyReceiver:q.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter address (Optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Max Supply *"}),e.jsx("input",{type:"number",value:h.maxSupply,onChange:q=>D({maxSupply:q.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter max supply",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Max Per Wallet *"}),e.jsx("input",{type:"number",min:"1",value:h.maxPerWallet,onChange:q=>D({maxPerWallet:q.target.value}),placeholder:"Enter max per wallet",className:`w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white border border-gray-200 dark:border-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-[#00ffbd] ${h.enableWhitelist?"cursor-not-allowed bg-gray-100 dark:bg-[#1a1b1f] opacity-75":""}`,disabled:h.enableWhitelist,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Release Date *"}),e.jsx("input",{type:"datetime-local",value:h.releaseDate,onChange:q=>D({releaseDate:q.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",required:!0})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:h.enableWhitelist,onChange:q=>re(q.target.checked),className:"w-4 h-4 text-[#00ffbd] border-gray-300 rounded focus:ring-[#00ffbd]"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable whitelist for early minting"})]})}),h.enableWhitelist&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Import Whitelist"}),e.jsxs("button",{onClick:()=>xe(!0),className:"text-xs text-[#00ffbd] hover:text-[#00e6a9] transition-colors flex items-center gap-1",children:[e.jsxs("span",{children:[h.whitelistAddresses.length," Addresses"]}),e.jsx(zn,{size:16})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter wallet address (0x...)",value:d,onChange:q=>u(q.target.value),className:"flex-1 bg-white dark:bg-[#0d0e12] text-gray-900 dark:text-white rounded-lg px-3 py-2 text-sm border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none"}),e.jsx("button",{onClick:ge,className:"px-3 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-lg text-sm",children:"Add"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>I("csv"),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-[#1a1b1f]",children:[e.jsx(Vn,{size:16}),"Import CSV"]}),e.jsxs("button",{onClick:()=>I("excel"),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-[#1a1b1f]",children:[e.jsx(Gn,{size:16}),"Import EXCEL"]}),e.jsxs("button",{onClick:()=>I("json"),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-[#1a1b1f]",children:[e.jsx(Yn,{size:16}),"Import JSON"]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Mint End Date *"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"datetime-local",value:h.mintEndDate,onChange:q=>D({mintEndDate:q.target.value}),className:`flex-1 bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none ${h.infiniteMint?"cursor-not-allowed opacity-50":""}`,disabled:h.infiniteMint,required:!h.infiniteMint}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h.infiniteMint,onChange:q=>D({infiniteMint:q.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#00ffbd]/20 dark:peer-focus:ring-[#00ffbd]/30 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#00ffbd]"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Infinite Mint"})]})]})]}),U()]})]})}},W=()=>{if(o==="minting")L();else{const U=vt.findIndex(q=>q.id===o);i(vt[U+1].id)}},X=U=>{if(!h.mintingToken||h.mintingToken==="native")return U===137?"0x0000000000000000000000000000000000001010":"0x0000000000000000000000000000000000000000";const q=Yi[U];if(!q)return console.warn("Token addresses not configured for this network"),"0x0000000000000000000000000000000000000000";switch(h.mintingToken){case"usdc":return q.USDC;case"usdt":return q.USDT;case"custom":return h.customTokenAddress||"0x0000000000000000000000000000000000000000";default:return"0x0000000000000000000000000000000000000000"}},ae=()=>e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(nt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create an NFT collection"}),e.jsx("button",{onClick:r,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]});l.useEffect(()=>{(async()=>{if(window.ethereum){const q=await window.ethereum.request({method:"eth_chainId"});m(parseInt(q,16))}})(),window.ethereum?.on("chainChanged",q=>{m(parseInt(q,16))})},[]);const[le,xe]=l.useState(!1),be=U=>{const q=h.whitelistAddresses.filter((ee,ke)=>ke!==U);D({whitelistAddresses:q})},ge=U=>{U.stopPropagation(),F(d)?(D({whitelistAddresses:[...h.whitelistAddresses,{address:d,maxMint:1}]}),u("")):Pe.error("Invalid wallet address")},ve=U=>{T(q=>({...q,whitelistAddresses:U.whitelistAddresses}))};l.useState(!1);const[P,J]=l.useState("");l.useEffect(()=>{h.enableWhitelist&&J("1000000")},[h.enableWhitelist]);const re=U=>{U?(D({enableWhitelist:U,maxPerWallet:"1000000"}),Pe("When whitelist is enabled, max per wallet is set high to allow individual whitelist limits to control minting. You can set specific mint limits for each address when adding them to the whitelist.",{duration:1/0,id:"whitelist-info"})):(D({enableWhitelist:U,maxPerWallet:""}),Pe.dismiss("whitelist-info"))};return l.useEffect(()=>{const U=()=>{H({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(Q,{open:n,onClose:a,className:"relative z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999]","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-[9999]",children:e.jsx(Q.Panel,{className:"relative w-full max-w-2xl transform overflow-hidden rounded-lg bg-white dark:bg-[#0a0b0f] p-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(U=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${U*.2}s`}},U))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(Q.Title,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create NFT Collection"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:e.jsx(dt,{size:24})})]}),s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex justify-between",children:vt.map((U,q)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:Et("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",o===U.id||vt.findIndex(ee=>ee.id===o)>q?"bg-[#00ffbd] text-black":"bg-gray-100 dark:bg-[#1a1b1f] text-gray-400"),children:q+1}),q!==vt.length-1&&e.jsx("div",{className:Et("h-0.5 w-full mx-2",vt.findIndex(ee=>ee.id===o)>q?"bg-[#00ffbd]":"bg-gray-100 dark:bg-[#1a1b1f]")})]},U.id))})}),V()]}):ae()]})]})})})]}),e.jsx(tl,{isOpen:le,onClose:()=>xe(!1),addresses:h.whitelistAddresses,onRemoveAddress:be,onUpdateAddress:ve}),y&&e.jsx(pt,{width:C.width,height:C.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(Qi,{isOpen:x,onClose:()=>{f(!1),b(null)},currentStep:p,collectionName:h.name,error:A}),e.jsx(el,{isOpen:w,onClose:()=>g(!1),onRate:U=>{console.log("User rated NFT creation:",U)}})]})}const al=[{question:"What security measures are in place?",answer:"The contract includes initialization protection, ownership controls via OpenZeppelin's Ownable, and ReentrancyGuard protection. Each token can only be initialized once and has input validation for names, symbols, and decimals. Learn more about OpenZeppelin's security features here: ",link:"https://docs.openzeppelin.com/contracts/4.x/api/security"},{question:"What can token creators do?",answer:"Token creators can set the initial supply, name, symbol, and decimals (up to 18) of their token. They receive full ownership of their created token and the initial supply is minted to their address. Read more about ERC20 implementation here: ",link:"https://docs.openzeppelin.com/contracts/4.x/erc20"},{question:"What are the limitations?",answer:"Tokens are non-upgradeable once deployed. There's no built-in burning mechanism, no additional minting after initial supply, no pausing functionality, and no token recovery mechanism."},{question:"What's the creation fee and how is it used?",answer:"The creation fee is 0.02 ETH. This fee helps cover operational costs including server maintenance, IPFS hosting, Firebase services, and most importantly, contributes to my audit fund. My goal is to undergo a comprehensive smart contract audit to ensure maximum security for our users."},{question:"Are the tokens standard ERC20?",answer:"Yes, all created tokens are standard ERC20 tokens using OpenZeppelin's implementation, ensuring compatibility with all ERC20-supporting platforms and wallets. Learn more about the standard here: ",link:"https://eips.ethereum.org/EIPS/eip-20"}],sl=[{question:"What security features protect NFT creators and collectors?",answer:"Our NFT contracts implement multiple security layers including OpenZeppelin's ReentrancyGuard to prevent reentrancy attacks, Ownable for secure ownership management, and Pausable for emergency stops. We use ERC721Enumerable and ERC1155Supply for accurate token tracking. Learn more about these security features: ",link:"https://docs.openzeppelin.com/contracts/4.x/api/security"},{question:"How are NFT metadata and assets stored?",answer:"All NFT metadata and assets are stored on IPFS, ensuring decentralized and permanent storage. The IPFS hashes are immutably recorded on-chain. We use Pinata for reliable pinning services to ensure your NFT assets remain accessible."},{question:"What anti-bot measures are in place?",answer:"Our contracts include multiple bot prevention mechanisms: configurable mint limits per wallet, optional whitelist functionality, and transaction rate limiting. For whitelisted sales, we use Merkle trees for efficient and secure verification."},{question:"How does the whitelist system work?",answer:"Our whitelist implementation uses Merkle trees (via OpenZeppelin's MerkleProof) for gas-efficient and secure verification. Whitelisted addresses can have custom mint limits and pricing. Learn more about Merkle proofs: ",link:"https://docs.openzeppelin.com/contracts/4.x/api/utils#MerkleProof"},{question:"What royalty standards are supported?",answer:"We implement EIP-2981 for on-chain royalties, compatible with major marketplaces. Creators can set royalty percentages (up to 10%) that are enforced at the contract level. Read about the standard: ",link:"https://eips.ethereum.org/EIPS/eip-2981"},{question:"Can the contracts be upgraded after deployment?",answer:"No, our contracts are purposely non-upgradeable to ensure immutability and security. All parameters (baseURI, royalties, etc.) are set at deployment and cannot be changed unless specifically allowed through controlled functions."},{question:"What's the creation fee and how is it used?",answer:"The creation fee (0.02 ETH for ERC721, 0.025 ETH for ERC1155) supports our infrastructure costs including IPFS hosting, Firebase services, and server maintenance. A portion is allocated to our audit fund - we're actively working towards a comprehensive audit by a reputable firm."},{question:"What's the difference between ERC721 and ERC1155?",answer:"ERC721 tokens are unique, ideal for 1/1 artwork or unique collectibles. ERC1155 supports both fungible and non-fungible tokens, perfect for editions or collections with multiple copies. Learn more: ",link:"https://docs.openzeppelin.com/contracts/4.x/erc721"},{question:"How are gas costs optimized?",answer:"We implement several gas optimizations: efficient storage packing, minimal storage operations, optimized metadata handling, and batch minting support for ERC1155. Our contracts are thoroughly tested for gas efficiency."},{question:"What happens if something goes wrong?",answer:"Contracts include emergency pause functionality (for admins only) and clear error messages. While we can't modify or upgrade contracts, the pause feature provides a safety mechanism in extreme situations."}];function Yc({isOpen:n,onClose:a}){return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(!0),className:"fixed bottom-6 right-6 bg-[#00ffbd] hover:bg-[#00e6a9] text-black p-3 rounded-full shadow-lg",children:e.jsx(Jn,{size:24})}),e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(Q.Panel,{className:"relative bg-[#0a0b0f] rounded-lg p-6 max-w-md w-full",children:[e.jsxs("div",{className:"absolute -top-px -left-px w-24 h-24",children:[e.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[1px] h-full bg-gradient-to-b from-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-px -right-px w-24 h-24",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gradient-to-b from-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-full h-[1px] bg-gradient-to-r to-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-px -left-px w-24 h-24",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[1px] h-full bg-gradient-to-t from-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-gradient-to-r from-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-px -right-px w-24 h-24",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[1px] h-full bg-gradient-to-t from-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[1px] bg-gradient-to-r to-[#00ffbd]"})]}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1",children:[1,2,3].map(t=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${t*.2}s`}},t))}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(Q.Title,{className:"text-xl font-semibold text-white",children:"Frequently Asked Questions"}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-300",children:e.jsx(dt,{size:24})})]}),e.jsxs(Rt.Group,{children:[e.jsxs(Rt.List,{className:"flex space-x-1 rounded-xl bg-[#1a1b1f] p-1 mb-6",children:[e.jsx(Rt,{className:({selected:t})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5
                     ${t?"bg-[#00ffbd] text-black shadow":"text-gray-400 hover:bg-[#2a2b2f] hover:text-white"}`,children:"Tokens"}),e.jsx(Rt,{className:({selected:t})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5
                     ${t?"bg-[#00ffbd] text-black shadow":"text-gray-400 hover:bg-[#2a2b2f] hover:text-white"}`,children:"NFTs"})]}),e.jsxs("div",{className:"overflow-y-auto pr-2 custom-scrollbar",style:{maxHeight:"calc(80vh - 140px)",scrollbarWidth:"thin",scrollbarColor:"#00ffbd #1a1b1f"},children:[e.jsx("style",{jsx:!0,children:`
                    .custom-scrollbar::-webkit-scrollbar {
                      width: 4px;
                    }
                    
                    .custom-scrollbar::-webkit-scrollbar-track {
                      background: #1a1b1f;
                      border-radius: 2px;
                    }
                    
                    .custom-scrollbar::-webkit-scrollbar-thumb {
                      background: #00ffbd;
                      border-radius: 2px;
                    }
                    
                    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                      background: #00e6a9;
                    }
                  `}),e.jsxs(Rt.Panels,{children:[e.jsx(Rt.Panel,{children:e.jsx("div",{className:"space-y-6",children:al.map((t,s)=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4 last:border-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:t.question}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[t.answer,t.link&&e.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:underline ml-1",children:"Read more"})]})]},s))})}),e.jsx(Rt.Panel,{children:e.jsx("div",{className:"space-y-6",children:sl.map((t,s)=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4 last:border-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:t.question}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[t.answer,t.link&&e.jsx("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:underline ml-1",children:"Read more"})]})]},s))})})]})]})]})]})]})})]})]})}const er={1:"https://etherscan.io",11155111:"https://sepolia.etherscan.io",137:"https://polygonscan.com",80001:"https://mumbai.polygonscan.com",130:"https://unichain.blockscout.com",1301:"https://unichain-sepolia.blockscout.com",1828369849:"https://moonwalker-blockscout.eu-north-2.gateway.fm"},Xc=(n,a="tx",t)=>{const s=er[n]||er[1];switch(a){case"tx":return`${s}/tx/${t}`;case"address":return`${s}/address/${t}`;case"token":return`${s}/token/${t}`;case"api":return s;default:return`${s}/tx/${t}`}},tr=30*1e3;class rl{constructor(){this.volumeCache=new Map,this.lastCacheUpdate=0,this.lastKnownBlock=0,this.loadCacheFromStorage(),this.setupSwapListener()}async setupSwapListener(){try{const a=new ne(window.ethereum);this.lastKnownBlock=await a.getBlockNumber(),a.on("block",t=>{t>this.lastKnownBlock&&(this.lastKnownBlock=t,this.invalidateCache())})}catch(a){console.warn("Error setting up swap listener:",a)}}invalidateCache(){this.volumeCache.clear(),this.lastCacheUpdate=0,localStorage.removeItem("volumeCache")}loadCacheFromStorage(){try{const a=localStorage.getItem("volumeCache");if(a){const{volumes:t,timestamp:s,lastBlock:r}=JSON.parse(a);Date.now()-s<tr&&r===this.lastKnownBlock&&(this.volumeCache=new Map(Object.entries(t)),this.lastCacheUpdate=s)}}catch(a){console.warn("Error loading volume cache:",a)}}saveCacheToStorage(){try{const a=Object.fromEntries(this.volumeCache);localStorage.setItem("volumeCache",JSON.stringify({volumes:a,timestamp:Date.now(),lastBlock:this.lastKnownBlock}))}catch(a){console.warn("Error saving volume cache:",a)}}isStablecoin(a){return[oe.USDC.toLowerCase(),oe.USDT.toLowerCase()].includes(a.toLowerCase())}getTokenPrice(a,t,s,r,o){const i=Number(Y(a[0],r)),d=Number(Y(a[1],o));return this.isStablecoin(t)?i/d:this.isStablecoin(s)?d/i:0}async getPoolVolumes(a,t,s,r){try{const o=a.toLowerCase(),i=this.volumeCache.get(o),d=Date.now();if(i&&d-i.timestamp<tr)return console.log("Returning volume data from cache for:",a),i;const u=new ne(window.ethereum),c=await u.getBlockNumber(),m=await u.getBlock(c),[x,f]=await Promise.all([t.token0(),t.token1()]),p=7200,b=p,A=p*7,N=p*30,y=t.filters.Swap(),[k,w,g,v]=await Promise.all([t.queryFilter(y,c-b,c),t.queryFilter(y,c-A,c),t.queryFilter(y,c-N,c),t.getReserves()]),S=this.getTokenPrice(v,x,f,s,r),h=C=>{let H=0;for(const M of C){let j=0;const E=Number(Y(M.args.amount0In,s)),R=Number(Y(M.args.amount0Out,s)),O=Number(Y(M.args.amount1In,r)),D=Number(Y(M.args.amount1Out,r));if(this.isStablecoin(x))j=E+R;else if(this.isStablecoin(f))j=O+D;else if(S>0)j=(E+R)*S;else continue;H+=j}return H},T={oneDayVolume:h(k),sevenDayVolume:h(w),thirtyDayVolume:h(g),oneDayTxCount:k.length,sevenDayTxCount:w.length,thirtyDayTxCount:g.length,timestamp:d};return this.volumeCache.set(o,T),this.saveCacheToStorage(),console.log("Volume data for pool:",a,T),T}catch(o){return console.error("Error calculating pool volumes:",o),{oneDayVolume:0,sevenDayVolume:0,thirtyDayVolume:0,oneDayTxCount:0,sevenDayTxCount:0,thirtyDayTxCount:0,timestamp:Date.now()}}}}const oe={factory:"0xF62c03E08ada871A0bEb309762E260a7a6a880E6",router:"0xeE567Fe1712Faf6149d80dA1E6934E354124CfE3",WETH:"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",USDT:"0x148b1aB3e2321d79027C4b71B6118e70434B4784",USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238"},Kt=["function createPair(address tokenA, address tokenB) external returns (address pair)","function getPair(address tokenA, address tokenB) external view returns (address pair)","function allPairs(uint) external view returns (address pair)","function allPairsLength() external view returns (uint)","function feeTo() external view returns (address)","function feeToSetter() external view returns (address)","event PairCreated(address indexed token0, address indexed token1, address pair, uint)"],ht=["function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapTokensForExactTokens(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapETHForExactTokens(uint amountOut, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapTokensForExactETH(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function quote(uint amountA, uint reserveA, uint reserveB) external pure returns (uint amountB)","function getAmountOut(uint amountIn, uint reserveIn, uint reserveOut) external pure returns (uint amountOut)","function getAmountIn(uint amountOut, uint reserveIn, uint reserveOut) external pure returns (uint amountIn)","function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)","function getAmountsIn(uint amountOut, address[] calldata path) external view returns (uint[] memory amounts)"],La=["function token0() external view returns (address)","function token1() external view returns (address)","function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)","function price0CumulativeLast() external view returns (uint)","function price1CumulativeLast() external view returns (uint)","event Swap(address indexed sender, uint amount0In, uint amount1In, uint amount0Out, uint amount1Out, address indexed to)"],Ye=["function approve(address spender, uint value) external returns (bool)","function balanceOf(address owner) external view returns (uint)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)","function totalSupply() external view returns (uint256)","function transfer(address to, uint value) external returns (bool)","function transferFrom(address from, address to, uint value) external returns (bool)","function allowance(address owner, address spender) external view returns (uint)"];class un{constructor(a,t){this.publicClient=a,this.walletClient=t,this.factory={address:oe.factory,abi:Kt},this.router={address:oe.router,abi:ht},this.poolCache=new Map,this.poolInfoCache=new Map,this.lastCacheUpdate=0,this.CACHE_DURATION=15*60*1e3,this.volumeTracker=new rl,this.loadCacheFromStorage()}loadCacheFromStorage(){try{const a=localStorage.getItem("uniswapPoolCache");if(a){const{pools:t,poolInfo:s,timestamp:r}=JSON.parse(a);Date.now()-r<60*60*1e3&&(this.poolCache=new Map(t),this.poolInfoCache=new Map(s),this.lastCacheUpdate=r)}}catch(a){console.warn("Error loading cache from storage:",a)}}saveCacheToStorage(){try{const a={pools:Array.from(this.poolCache.entries()),poolInfo:Array.from(this.poolInfoCache.entries()),timestamp:Date.now()};localStorage.setItem("uniswapPoolCache",JSON.stringify(a))}catch(a){console.warn("Error saving cache to storage:",a)}}clearCache(){this.poolCache.clear(),this.poolInfoCache.clear(),this.lastCacheUpdate=0,localStorage.removeItem("uniswapPoolCache")}isCacheValid(){return Date.now()-this.lastCacheUpdate<this.CACHE_DURATION}async getPools(a){if(!a)throw console.error("tokenAddress is required for getPools"),new Error("tokenAddress is required");try{console.log("Getting pools for token:",a);const t=new _(oe.factory,Kt,new ne(window.ethereum)),s=await t.allPairsLength();console.log("Total pairs:",s.toString());const r=[];for(let o=0;o<s;o++)try{const i=await t.allPairs(o);console.log(`Checking pair ${o}:`,i);const d=new _(i,La,new ne(window.ethereum)),[u,c,m]=await Promise.all([d.token0(),d.token1(),d.getReserves()]);console.log(`Pair ${o} tokens:`,u,c),(u.toLowerCase()===a.toLowerCase()||c.toLowerCase()===a.toLowerCase())&&(r.push({address:i,token0:u,token1:c,reserves:m}),console.log("Found matching pair:",i))}catch(i){console.error(`Error processing pair ${o}:`,i);continue}return console.log("Found pairs:",r.length),r}catch(t){throw console.error("Error getting pools:",t),t}}async checkPoolExists(a,t){try{const s=new ne(window.ethereum);return await new _(oe.factory,Kt,s).getPair(a,t)!=="0x0000000000000000000000000000000000000000"}catch(s){throw console.error("Error checking pool existence:",s),s}}async createPool(a,t,s,r){try{const o=new ne(window.ethereum),i=await o.getSigner(),d=await i.getAddress(),u=a.toLowerCase()==="eth",c=t.toLowerCase()==="eth",m=u?oe.WETH:a,x=c?oe.WETH:t,[f,p]=m.toLowerCase()<x.toLowerCase()?[m,x]:[x,m],[b,A]=m.toLowerCase()<x.toLowerCase()?[s,r]:[r,s],N=new _(oe.factory,Kt,i),y=new _(oe.router,ht,i),k=u?null:new _(f,Ye,i),w=c?null:new _(p,Ye,i);console.log("Checking if pair exists...");const g=await N.getPair(f,p);if(console.log("Existing pair address:",g),g!=="0x0000000000000000000000000000000000000000")throw new Error("Pool already exists");const S=(await o.getFeeData()).gasPrice*105n/100n,h=lt,T=[];if(!u&&!c){const[I,V]=await Promise.all([k.allowance(d,oe.router),w.allowance(d,oe.router)]),[W,X]=await Promise.all([k.approve.estimateGas(oe.router,h),w.approve.estimateGas(oe.router,h)]).catch(ae=>[100000n,100000n]);I<b&&(console.log("Approving token0..."),G.loading("Approving first token...",{id:"approve0"}),T.push(k.approve(oe.router,h,{gasLimit:W*120n/100n,gasPrice:S}).then(ae=>ae.wait()).then(()=>{G.success("First token approved",{id:"approve0"})}).catch(ae=>{throw G.error("Failed to approve first token: "+ae.message,{id:"approve0"}),ae}))),V<A&&(console.log("Approving token1..."),G.loading("Approving second token...",{id:"approve1"}),T.push(w.approve(oe.router,h,{gasLimit:X*120n/100n,gasPrice:S}).then(ae=>ae.wait()).then(()=>{G.success("Second token approved",{id:"approve1"})}).catch(ae=>{throw G.error("Failed to approve second token: "+ae.message,{id:"approve1"}),ae})))}else if(u){if(!c){const I=await w.allowance(d,oe.router),V=await w.approve.estimateGas(oe.router,h).catch(()=>100000n);I<A&&(console.log("Approving token1..."),G.loading("Approving token...",{id:"approve1"}),T.push(w.approve(oe.router,h,{gasLimit:V*120n/100n,gasPrice:S}).then(W=>W.wait()).then(()=>{G.success("Token approved",{id:"approve1"})}).catch(W=>{throw G.error("Failed to approve token: "+W.message,{id:"approve1"}),W})))}}else{const I=await k.allowance(d,oe.router),V=await k.approve.estimateGas(oe.router,h).catch(()=>100000n);I<b&&(console.log("Approving token0..."),G.loading("Approving token...",{id:"approve0"}),T.push(k.approve(oe.router,h,{gasLimit:V*120n/100n,gasPrice:S}).then(W=>W.wait()).then(()=>{G.success("Token approved",{id:"approve0"})}).catch(W=>{throw G.error("Failed to approve token: "+W.message,{id:"approve0"}),W})))}if(T.length>0){await Promise.all(T),console.log("All tokens approved");const I=await Promise.all([u?h:k.allowance(d,oe.router),c?h:w.allowance(d,oe.router)]);if(I[0]<b||I[1]<A)throw new Error("Approval process failed. Please try again.")}console.log("Creating pair..."),G.loading("Creating liquidity pool...",{id:"create-pool"});const C=await N.createPair.estimateGas(f,p).catch(()=>3000000n),H=await N.createPair(f,p,{gasLimit:C*120n/100n,gasPrice:S});console.log("Create pair transaction sent:",H.hash);const M=await H.wait();console.log("Create pair transaction confirmed"),G.success("Pool created successfully!",{id:"create-pool"});const j=M.logs.find(I=>{try{return N.interface.parseLog({topics:I.topics,data:I.data}).name==="PairCreated"}catch{return!1}});if(!j)throw new Error("Failed to get pair address from transaction receipt");const R=N.interface.parseLog({topics:j.topics,data:j.data}).args[2];console.log("Created pair address:",R),await new Promise(I=>setTimeout(I,2e3));const O=b*99n/100n,D=A*99n/100n,Z=BigInt(Math.floor(Date.now()/1e3)+60*20);let F;if(G.loading("Adding initial liquidity...",{id:"add-liquidity"}),u||c){const I=u?p:f,V=u?b:A,W=u?A:b,X=u?O:D,ae=u?D:O;console.log("Adding ETH liquidity with params:",{token:I,ethAmount:V.toString(),tokenAmount:W.toString(),ethAmountMin:X.toString(),tokenAmountMin:ae.toString()}),F=await y.addLiquidityETH(I,W,ae,X,d,Z,{value:V,gasLimit:5e5,gasPrice:S})}else F=await y.addLiquidity(f,p,b,A,O,D,d,Z,{gasLimit:5e5,gasPrice:S});console.log("Add liquidity transaction sent:",F.hash);const L=await F.wait();return console.log("Add liquidity transaction confirmed"),G.success("Initial liquidity added successfully!",{id:"add-liquidity"}),{pairAddress:R,createPairReceipt:M,addLiquidityReceipt:L}}catch(o){throw console.error("Error in pool creation:",o),o.message.includes("INSUFFICIENT_A_AMOUNT")?(G.error("Insufficient amount for token A. Try increasing the amount."),new Error("Insufficient amount for token A. Try increasing the amount.")):o.message.includes("INSUFFICIENT_B_AMOUNT")?(G.error("Insufficient amount for token B. Try increasing the amount."),new Error("Insufficient amount for token B. Try increasing the amount.")):o.message.includes("TRANSFER_FROM_FAILED")?(G.error("Transfer failed. Please check your token balances and approvals."),new Error("Transfer failed. Please check your token balances and approvals.")):(G.error(o.message),o)}}async swapExactTokensForTokens(a,t,s,r,o=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const d=await new ne(window.ethereum).getSigner().catch(p=>{throw console.error("Error getting signer:",p),p.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):p}),u=new _(oe.router,ht,d),c=new _(s[0],Ye,d),m=await c.balanceOf(r);if(m<a)throw new Error(`Insufficient token balance. Required: ${Y(a,await c.decimals())}, Available: ${Y(m,await c.decimals())}`);const x=await c.allowance(r,oe.router);if(console.log("Current allowance:",x.toString()),console.log("Required amount:",a.toString()),x<a){console.log("Approving token for swap...");try{x>0&&await(await c.approve(oe.router,0)).wait(),await(await c.approve(oe.router,a)).wait(),console.log("Token approved")}catch(p){throw console.error("Error approving token:",p),p.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):p}}else console.log("Sufficient allowance exists, skipping approval");if(await c.allowance(r,oe.router)<a)throw new Error("Failed to approve token transfer");console.log("Executing swap with params:",{amountIn:a.toString(),amountOutMin:t.toString(),path:s,to:r,deadline:o.toString()});try{const p=await u.swapExactTokensForTokens(a,t,s,r,o,{gasLimit:3e6});console.log("Swap transaction:",p.hash);const b=await p.wait();return console.log("Swap receipt:",b),b}catch(p){throw console.error("Error executing swap:",p),p.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):p}}catch(i){throw console.error("Error swapping tokens:",i),i}}async addLiquidity(a,t,s,r,o,i,d,u=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{const c=new ne(window.ethereum),m=await c.getSigner(),f=(await c.getFeeData()).gasPrice*110n/100n,p=new _(oe.router,ht,m),b=new _(a,Ye,m),A=new _(t,Ye,m),[N,y]=await Promise.all([b.decimals(),A.decimals()]);console.log("Token details:",{tokenA:{address:a,decimals:N,amountDesired:Y(s,N)},tokenB:{address:t,decimals:y,amountDesired:Y(r,y)}}),console.log("Checking pool info...");const k=await this.getPoolInfo(a,t);let w=s,g=r;if(k){const D=k.reserve0,Z=k.reserve1;if(D>0&&Z>0)if(console.log("Current pool reserves:",{reserve0:Y(D,k.token0.decimals),reserve1:Y(Z,k.token1.decimals),ratio:Number(Z)/Number(D)}),a.toLowerCase()===k.token0.address.toLowerCase()){const F=s*Z/D;console.log("Calculated optimal amounts (A is token0):",{optimalB:Y(F,y),providedB:Y(r,y)}),F>r?(g=r,w=r*D/Z,console.log("Adjusting token A amount to match ratio")):(g=F,console.log("Using calculated optimal amount for token B"))}else{const F=s*D/Z;console.log("Calculated optimal amounts (A is token1):",{optimalB:Y(F,y),providedB:Y(r,y)}),F>r?(g=r,w=r*Z/D,console.log("Adjusting token A amount to match ratio")):(g=F,console.log("Using calculated optimal amount for token B"))}}const[v,S]=await Promise.all([b.balanceOf(d),A.balanceOf(d)]);if(console.log("Token balances:",{tokenA:Y(v,N),tokenB:Y(S,y)}),v<w)throw new Error(`Insufficient balance for token A. Required: ${Y(w,N)}, Available: ${Y(v,N)}`);if(S<g)throw new Error(`Insufficient balance for token B. Required: ${Y(g,y)}, Available: ${Y(S,y)}`);const h=99n,T=w*h/100n,C=g*h/100n;console.log("Final amounts:",{tokenA:{desired:Y(w,N),minimum:Y(T,N)},tokenB:{desired:Y(g,y),minimum:Y(C,y)}}),console.log("Checking allowances...");const[H,M]=await Promise.all([b.allowance(d,oe.router),A.allowance(d,oe.router)]);console.log("Current allowances:",{tokenA:Y(H,N),tokenB:Y(M,y)});const j=lt,E=[];if(H<w&&(console.log("Approving token A..."),G.loading("Approving first token...",{id:"approve-a"}),E.push(b.approve(oe.router,j,{gasLimit:6e4,gasPrice:f}).then(D=>D.wait()).then(()=>{G.success("First token approved",{id:"approve-a"})}).catch(D=>{throw G.error("Failed to approve first token",{id:"approve-a"}),D}))),M<g&&(console.log("Approving token B..."),G.loading("Approving second token...",{id:"approve-b"}),E.push(A.approve(oe.router,j,{gasLimit:6e4,gasPrice:f}).then(D=>D.wait()).then(()=>{G.success("Second token approved",{id:"approve-b"})}).catch(D=>{throw G.error("Failed to approve second token",{id:"approve-b"}),D}))),E.length>0){await Promise.all(E),console.log("All approvals completed");const[D,Z]=await Promise.all([b.allowance(d,oe.router),A.allowance(d,oe.router)]);if(console.log("Final allowances:",{tokenA:Y(D,N),tokenB:Y(Z,y)}),D<w||Z<g)throw new Error("Approval process failed. Please try again.")}console.log("Adding liquidity with parameters:",{tokenA:a,tokenB:t,amountADesired:Y(w,N),amountBDesired:Y(g,y),amountAMin:Y(T,N),amountBMin:Y(C,y)});const R=await p.addLiquidity(a,t,w,g,T,C,d,u,{gasLimit:5e5,gasPrice:f});console.log("Add liquidity transaction:",R.hash);const O=await R.wait();return console.log("Add liquidity receipt:",O),O}catch(c){if(console.error("Error adding liquidity:",c),c.message.includes("INSUFFICIENT_A_AMOUNT")){const m="The amount of first token is too low for the current pool ratio. Try increasing the amount or adjusting the ratio.";throw G.error(m),new Error(m)}else if(c.message.includes("INSUFFICIENT_B_AMOUNT")){const m="The amount of second token is too low for the current pool ratio. Try increasing the amount or adjusting the ratio.";throw G.error(m),new Error(m)}else if(c.message.includes("TRANSFER_FROM_FAILED")){const m="Transfer failed. Please check your token balances and approvals.";throw G.error(m),new Error(m)}throw G.error(c.message),c}}async getPoolInfo(a,t){try{const s=new ne(window.ethereum),o=await new _(oe.factory,Kt,s).getPair(a,t);if(o==="0x0000000000000000000000000000000000000000")return null;const i=new _(o,La,s),[d,u,c]=await Promise.all([i.token0(),i.token1(),i.getReserves()]),m=new _(d,Ye,s),x=new _(u,Ye,s),[f,p,b,A]=await Promise.all([m.symbol(),m.decimals(),x.symbol(),x.decimals()]);return{pairAddress:o,token0:{address:d,symbol:f,decimals:p},token1:{address:u,symbol:b,decimals:A},reserve0:c[0],reserve1:c[1]}}catch(s){throw console.error("Error getting pool info:",s),s}}async getAmountOut(a,t){try{const s=new ne(window.ethereum),r=new _(oe.router,ht,s),o=[...t];o[0].toLowerCase()==="ETH"&&(o[0]=oe.WETH);const i=await r.getAmountsOut(a,o);return i[i.length-1]}catch(s){throw console.error("Error getting amount out:",s),s}}async getTokenInfo(a){try{const t=new ne(window.ethereum),s=new _(a,Ye,t),[r,o,i]=await Promise.all([s.symbol().catch(()=>"Unknown"),s.name().catch(()=>"Unknown Token"),s.decimals().catch(()=>18)]);return a.toLowerCase()===oe.WETH.toLowerCase()?{symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}:a.toLowerCase()===oe.USDT.toLowerCase()?{symbol:"tUSDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}:a.toLowerCase()===oe.USDC.toLowerCase()?{symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"}:{symbol:r||"Unknown",name:o||"Unknown Token",decimals:i||18}}catch(t){return console.error("Error getting token info:",t),{symbol:"Unknown",name:"Unknown Token",decimals:18}}}async getPoolInfoByAddress(a){try{const t=new ne(window.ethereum),s=new _(a,La,t),[r,o]=await Promise.all([s.token0(),s.token1()]),i=new _(r,Ye,t),d=new _(o,Ye,t),[u,c,m,x,f]=await Promise.all([i.symbol(),d.symbol(),i.decimals(),d.decimals(),s.getReserves()]),p=await this.volumeTracker.getPoolVolumes(a,s,m,x);return console.log("Pool info volumes:",p),{pairAddress:a,token0:{address:r,symbol:u,decimals:m},token1:{address:o,symbol:c,decimals:x},reserves:{reserve0:f[0],reserve1:f[1],blockTimestampLast:f[2]},volumes:p}}catch(t){throw console.error("Error getting pool info:",t),t}}async swapExactETHForTokens(a,t,s,r,o=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const d=await new ne(window.ethereum).getSigner().catch(x=>{throw console.error("Error getting signer:",x),x.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):x});if(s[0].toLowerCase()!==oe.WETH.toLowerCase())throw new Error("Path must start with WETH for ETH swaps");const u=new _(oe.router,ht,d);console.log("Executing ETH swap with params:",{amountIn:a.toString(),amountOutMin:t.toString(),path:s,to:r,deadline:o.toString()});const c=await u.swapExactETHForTokens(t,s,r,o,{value:a,gasLimit:3e6});console.log("Swap transaction:",c.hash);const m=await c.wait();return console.log("Swap receipt:",m),m}catch(i){throw console.error("Error swapping ETH for tokens:",i),i}}async swapExactTokensForTokens(a,t,s,r,o=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const i=new ne(window.ethereum),d=await i.getSigner(),u=new _(oe.router,ht,d),c=new _(s[0],Ye,d),x=(await i.getFeeData()).gasPrice*110n/100n;return await c.allowance(r,oe.router)<a&&await(await c.approve(oe.router,a,{gasLimit:6e4,gasPrice:x})).wait(),await(await u.swapExactTokensForTokens(a,t,s,r,o,{gasLimit:15e4,gasPrice:x})).wait()}catch(i){throw console.error("Error swapping tokens:",i),i}}async addLiquidity(a,t,s,r,o,i,d,u=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{const c=new ne(window.ethereum),m=await c.getSigner(),f=(await c.getFeeData()).gasPrice*110n/100n,p=new _(oe.router,ht,m),b=new _(a,Ye,m),A=new _(t,Ye,m),N={gasLimit:6e4,gasPrice:f},y={gasLimit:6e4,gasPrice:f},k=await b.allowance(d,oe.router),w=await A.allowance(d,oe.router);return k<s&&await(await b.approve(oe.router,s,N)).wait(),w<r&&await(await A.approve(oe.router,r,y)).wait(),await(await p.addLiquidity(a,t,s,r,o,i,d,u,{gasLimit:25e4,gasPrice:f})).wait()}catch(c){throw console.error("Error adding liquidity:",c),c}}async swapExactTokensForETH(a,t,s,r,o=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const i=new ne(window.ethereum),d=await i.getSigner();if(s[s.length-1].toLowerCase()!==oe.WETH.toLowerCase())throw new Error("Path must end with WETH for ETH swaps");const u=new _(oe.router,ht,d),c=new _(s[0],Ye,d);await c.allowance(r,oe.router)<a&&(console.log("Approving token for swap..."),await(await c.approve(oe.router,a)).wait(),console.log("Token approved")),console.log("Executing token to ETH swap with params:",{amountIn:a.toString(),amountOutMin:t.toString(),path:s,to:r,deadline:o.toString()});const f=(await i.getFeeData()).gasPrice*110n/100n,p=await u.swapExactTokensForETH(a,t,s,r,o,{gasLimit:25e4,gasPrice:f});console.log("Swap transaction:",p.hash);const b=await p.wait();return console.log("Swap receipt:",b),b}catch(i){throw console.error("Error swapping tokens for ETH:",i),i}}async getAllPools(){try{if(console.log("Getting all pools from factory"),this.isCacheValid()&&this.poolCache.size>0)return console.log("Returning pools from cache"),Array.from(this.poolCache.values());const a=new ne(window.ethereum),t=new _(oe.factory,Kt,a),s=await t.allPairsLength();console.log("Total pairs:",s.toString());const r=20,o=[];for(let u=0;u<s;u+=r){const c=[];for(let m=0;m<r&&u+m<s;m++)c.push(t.allPairs(u+m));o.push(Promise.all(c))}const d=(await Promise.all(o)).flat();return d.forEach(u=>{this.poolCache.set(u.toLowerCase(),u)}),console.log("Found pairs:",d.length),this.lastCacheUpdate=Date.now(),this.saveCacheToStorage(),d}catch(a){if(console.error("Error getting all pools:",a),this.poolCache.size>0)return console.log("Returning cached pools due to error"),Array.from(this.poolCache.values());throw a}}async batchLoadPoolInfo(a){const t=a.filter(d=>!this.isCacheValid()||!this.poolInfoCache.has(d.toLowerCase()));if(t.length===0)return console.log("All pool info available in cache"),a.map(d=>this.poolInfoCache.get(d.toLowerCase()));console.log(`Loading info for ${t.length} uncached pools`);const s=10,r=[],o=[];for(let d=0;d<t.length;d+=s){const u=t.slice(d,d+s);o.push(Promise.all(u.map(c=>this.getPoolInfoByAddress(c))))}const i=await Promise.all(o);return r.push(...i.flat()),r.forEach(d=>{d&&this.poolInfoCache.set(d.pairAddress.toLowerCase(),d)}),this.saveCacheToStorage(),a.map(d=>this.poolInfoCache.get(d.toLowerCase())||null)}async calculateLiquidityAmounts(a,t,s){try{const r=await this.getPoolInfo(a,t);if(!r)return console.log("No existing pool - amounts will set initial price"),{amountA:s,amountB:s,priceRatio:"1",isNewPool:!0,estimatedPrice:"1"};const{reserve0:o,reserve1:i}=r,d=a.toLowerCase()===r.token0.address.toLowerCase(),u=new ne(window.ethereum),c=new _(a,Ye,u),m=new _(t,Ye,u),[x,f]=await Promise.all([c.decimals(),m.decimals()]);let p,b,A;d?(p=s*i/o,b=Y(i,f)/Y(o,x),A=Y(o,x)/Y(i,f)):(p=s*o/i,b=Y(o,f)/Y(i,x),A=Y(i,x)/Y(o,f));const N=Y(s,x),y=Y(p,f);return console.log("Calculated liquidity amounts:",{amountA:N,amountB:y,priceRatio:b.toString(),estimatedPrice:A.toString(),poolReserves:{reserve0:Y(o,r.token0.decimals),reserve1:Y(i,r.token1.decimals)}}),{amountA:s,amountB:p,priceRatio:b.toString(),isNewPool:!1,estimatedPrice:A.toString(),token0IsTokenA:d}}catch(r){throw console.error("Error calculating liquidity amounts:",r),r}}calculateInitialPoolPrice(a,t,s,r){try{const o=Y(a,s),i=Y(t,r),d=Number(i)/Number(o),u=Number(o)/Number(i);return{token0Price:d.toString(),token1Price:u.toString()}}catch(o){throw console.error("Error calculating initial pool price:",o),o}}async removeLiquidity(a,t,s,r,o,i,d=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{const u=new ne(window.ethereum),c=await u.getSigner(),x=(await u.getFeeData()).gasPrice*110n/100n;return await(await new _(oe.router,ht,c).removeLiquidity(a,t,s,r,o,i,d,{gasLimit:25e4,gasPrice:x})).wait()}catch(u){throw console.error("Error removing liquidity:",u),u}}async getPoolVolumes(a){try{const t=new ne(window.ethereum),s=new _(a,La,t),[r,o]=await Promise.all([s.token0(),s.token1()]),i=new _(r,Ye,t),d=new _(o,Ye,t),[u,c]=await Promise.all([i.decimals(),d.decimals()]);return await this.volumeTracker.getPoolVolumes(a,s,u,c)}catch(t){return console.error("Error getting pool volumes:",t),{oneDayVolume:0,sevenDayVolume:0,thirtyDayVolume:0,oneDayTxCount:0,sevenDayTxCount:0,thirtyDayTxCount:0,poolCreatedAt:0}}}}const ls={11155111:{ETH_USD:"0x694AA1769357215DE4FAC081bf1f309aDC325306",USDC_USD:"0xA2F78ab2355fe2f984D808B5CeE7FD0A93D5270E",USDT_USD:"0xA2F78ab2355fe2f984D808B5CeE7FD0A93D5270E"},1:{ETH_USD:"0x5f4eC3Df9cbd43714FE2740f5E3616155c5b8419",USDC_USD:"0x8fFfFfd4AfB6115b954Bd326cbe7B4BA576818f6",USDT_USD:"0x3E7d1eAB13ad0104d2750B8863b489D65364e32D"},137:{ETH_USD:"0xF9680D99D6C9589e2a93a78A04A279e509205945",USDC_USD:"0xfE4A8cc5b5B2366C1B58Bea3858e81843581b2F7",USDT_USD:"0x0A6513e40db6EB1b165753AD52E80663aeA50545"},1301:{ETH_USD:"0x13e3Ee699D1909E989722E753853AE30b17e08c5",USDC_USD:"0x16a9FA2FDa030272Ce99B29CF780dFA30361E0f3",USDT_USD:"0xECef79E109e997bCA29c1c0897ec9d7b03647F5E"}},ar={11155111:{USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",USDT:"0x148b1ab3e2321d79027c4b71b6118e70434b4784"},137:{USDC:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F"},1301:{USDC:"0x9c891326Fd8b1a713982003a9733F03707103837",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"}},nl=["function decimals() external view returns (uint8)","function description() external view returns (string)","function version() external view returns (uint256)","function getRoundData(uint80 _roundId) external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)","function latestRoundData() external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)"];class sr{constructor(){this.provider=new ne(window.ethereum),this.uniswap=new un,this.chainId=null}async init(){if(!this.chainId){const a=await this.provider.getNetwork();this.chainId=Number(a.chainId)}}async getLatestPrice(a){try{const t=new wt("https://mainnet.optimism.io"),s=new _(a,nl,t),[r]=await Promise.all([s.latestRoundData()]);return Number(r.answer)/1e8}catch{return null}}async getETHPrice(){await this.init();const a=ls[this.chainId];return a?.ETH_USD?this.getLatestPrice(a.ETH_USD):null}async getUSDCPrice(){await this.init();const a=ls[this.chainId];return a?.USDC_USD?this.getLatestPrice(a.USDC_USD):1}async getUSDTPrice(){await this.init();const a=ls[this.chainId];return a?.USDT_USD?this.getLatestPrice(a.USDT_USD):1}async getPriceFromStablePair(a){await this.init();const t=ar[this.chainId];if(!t)return null;try{const s=await this.uniswap.getPoolInfo(a,t.USDC);if(s&&s.reserve0&&s.reserve1){const{reserve0:r,reserve1:o,token0:i,token1:d}=s,u=a.toLowerCase()===i.address.toLowerCase(),c=u?r:o,m=u?o:r,x=u?i.decimals:d.decimals,f=u?d.decimals:i.decimals,p=Number(Y(c,x));return Number(Y(m,f))/p}}catch{}try{const s=await this.uniswap.getPoolInfo(a,t.USDT);if(s&&s.reserve0&&s.reserve1){const{reserve0:r,reserve1:o,token0:i,token1:d}=s,u=a.toLowerCase()===i.address.toLowerCase(),c=u?r:o,m=u?o:r,x=u?i.decimals:d.decimals,f=u?d.decimals:i.decimals,p=Number(Y(c,x));return Number(Y(m,f))/p}}catch{}return null}async calculateUSDValue(a,t,s){try{if(await this.init(),!a||!t||s===void 0)return null;let r;const o=ar[this.chainId];if(!o)return null;switch(a.toLowerCase()){case"eth":case"0xfff9976782d46cc05630d1f6ebab18b2324d6b14":r=await this.getETHPrice();break;case o.USDC.toLowerCase():r=1;break;case o.USDT.toLowerCase():r=1;break;default:r=await this.getPriceFromStablePair(a)}return r?Number(Y(t,s))*r:null}catch{return null}}}function mn(){const[n,a]=l.useState({ETH:null,USDC:null,USDT:null});return l.useEffect(()=>{const r=new sr;let o=!0;async function i(){try{const[u,c,m]=await Promise.all([r.getETHPrice(),r.getUSDCPrice(),r.getUSDTPrice()]);o&&a({ETH:u,USDC:c,USDT:m})}catch(u){console.error("Error fetching token prices:",u)}}i();const d=setInterval(i,3e4);return()=>{o=!1,clearInterval(d)}},[]),{prices:n,calculateUSDValue:async(r,o)=>{try{return new sr().calculateUSDValue(r.address,o,r.decimals)}catch(i){return console.error("Error calculating USD value:",i),null}},formatUSD:r=>r==null?"---":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}}function Bt(){const n=Es(),{data:a}=Yt();return l.useMemo(()=>!n||!a?null:new un(n,a),[n,a])}const ol=()=>{const n=[{Icon:et,delay:0,y:-10,x:-70,scale:.9,static:!0},{Icon:ss,delay:.2,y:-12,x:-68,scale:.85,static:!0},{Icon:rs,delay:.4,y:-8,x:-72,scale:.8,static:!0},{Icon:et,delay:0,y:-10,x:-70,scale:1},{Icon:ss,delay:.4,y:-12,x:-70,scale:.95},{Icon:rs,delay:.8,y:-8,x:-70,scale:.9},{Icon:Hs,delay:1.2,y:-14,x:-70,scale:1},{Icon:Kn,delay:1.6,y:-10,x:-70,scale:.95},{Icon:Qn,delay:2,y:-12,x:-70,scale:1},{Icon:Wr,delay:2.4,y:-8,x:-70,scale:.9},{Icon:ss,delay:0,y:-10,x:65,scale:.8,static:!0},{Icon:rs,delay:.2,y:-14,x:68,scale:.75,static:!0},{Icon:et,delay:.4,y:-12,x:62,scale:.85,static:!0},{Icon:Hs,delay:.6,y:-8,x:70,scale:.7,static:!0}],a={initial:{opacity:0,scale:.95},animate:{opacity:[.15,.2,.15],scale:[.95,1,.95],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}},t={initial:{rotate:0,opacity:.4},animate:{rotate:360,opacity:[.4,.7,.4],transition:{duration:8,repeat:1/0,ease:"linear"}}},s={initial:{opacity:0,scale:0},animate:i=>({opacity:[.4,.5,.4],scale:i.scale,transition:{opacity:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.5,delay:i.delay}}})},r={initial:{opacity:0,scale:0,x:-70,y:i=>i.y,rotate:0},animate:i=>({opacity:[0,1,1,1,0],scale:[0,i.scale,i.scale*1.1,i.scale,0],rotate:[0,180,360,540,720],y:[i.y,i.y-20,i.y-25,i.y-15,i.y],x:[-70,-20,0,40,65],transition:{duration:3,delay:i.delay,repeat:1/0,ease:[.4,0,.2,1]}})},o={initial:{opacity:0,y:0},animate:{opacity:[0,.5,0],y:[-10,10],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}};return e.jsxs(B.div,{className:"relative w-[480px] h-48",initial:"initial",animate:"animate",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-[#00ffbd]/5 to-transparent",style:{backgroundSize:"20px 20px",backgroundImage:"linear-gradient(to right, #00ffbd05 1px, transparent 1px), linear-gradient(to bottom, #00ffbd05 1px, transparent 1px)"}}),e.jsx(B.div,{variants:a,className:"absolute left-4 top-1/2 -translate-y-1/2 w-28 h-28 rounded-lg border border-[#00ffbd]/20 bg-[#00ffbd]/5",style:{boxShadow:"0 0 20px rgba(0, 255, 189, 0.15)",backdropFilter:"blur(8px)"},children:[...Array(5)].map((i,d)=>e.jsx(B.div,{variants:o,className:"absolute w-1 h-1 rounded-full bg-[#00ffbd]/30",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},`particle-left-${d}`))}),e.jsx(B.div,{variants:a,className:"absolute right-4 top-1/2 -translate-y-1/2 w-28 h-28 rounded-lg border border-[#00ffbd]/20 bg-[#00ffbd]/5",style:{boxShadow:"0 0 20px rgba(0, 255, 189, 0.15)",backdropFilter:"blur(8px)"},children:[...Array(5)].map((i,d)=>e.jsx(B.div,{variants:o,className:"absolute w-1 h-1 rounded-full bg-[#00ffbd]/30",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},`particle-right-${d}`))}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-64 h-6",children:[e.jsx("div",{className:"absolute inset-0 bg-[#00ffbd]/5 rounded-full"}),e.jsx(B.div,{animate:{backgroundPosition:["0px 0px","20px 0px"],transition:{duration:1,repeat:1/0,ease:"linear"}},className:"absolute inset-0 rounded-full",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0, 255, 189, 0.1) 10px, rgba(0, 255, 189, 0.1) 20px)"}})]}),e.jsx(B.div,{animate:{opacity:[.2,.4,.2],scale:[.95,1.05,.95]},transition:{duration:2,repeat:1/0},className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-20 bg-[#00ffbd]/10 rounded-full blur-md"}),e.jsx(B.div,{variants:t,className:"absolute left-24 top-1/2 -translate-y-1/2 w-8 h-8 text-[#00ffbd]",style:{filter:"drop-shadow(0 0 8px rgba(0, 255, 189, 0.5))"},children:e.jsx(Ws,{className:"w-full h-full"})}),e.jsx(B.div,{variants:t,className:"absolute right-24 top-1/2 -translate-y-1/2 w-8 h-8 text-[#00ffbd]",style:{filter:"drop-shadow(0 0 8px rgba(0, 255, 189, 0.5))"},children:e.jsx(Ws,{className:"w-full h-full"})}),n.filter(i=>i.static).map((i,d)=>e.jsx(B.div,{custom:i,variants:s,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",style:{transform:`translate(${i.x}px, ${i.y}px)`},children:e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(i.Icon,{className:"text-[#00ffbd]/50",style:{filter:"drop-shadow(0 0 8px rgba(0, 255, 189, 0.3))",width:"100%",height:"100%"}})})},`static-${d}`)),n.filter(i=>!i.static).map((i,d)=>e.jsxs(B.div,{custom:i,variants:r,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[e.jsx(B.div,{className:"absolute w-full h-full",style:{background:"linear-gradient(90deg, transparent, #00ffbd20)",filter:"blur(4px)",width:"20px",height:"2px",transform:"translateX(-10px)"}}),e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(i.Icon,{className:"text-[#00ffbd]",style:{filter:"drop-shadow(0 0 12px rgba(0, 255, 189, 0.5))",width:"100%",height:"100%"}})})]},`moving-${d}`)),e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-64 flex justify-between items-center",children:[e.jsx(B.div,{animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:"w-2 h-2 rounded-full bg-[#00ffbd]"}),e.jsx(B.div,{animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,delay:.6},className:"w-2 h-2 rounded-full bg-[#00ffbd]"}),e.jsx(B.div,{animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,delay:1.2},className:"w-2 h-2 rounded-full bg-[#00ffbd]"})]})]})};function Zc(){const{deployments:n}=Vr(),{prices:a}=mn(),t=Bt(),[s,r]=l.useState({volume24h:369,liquidity:639,holders:420}),[o,i]=l.useState(!0),[d,u]=l.useState(!1),[c,m]=l.useState(-100),[x,f]=l.useState(!1);l.useEffect(()=>{const N=async()=>{if(t)try{i(!0);const y=await t.getAllPools();let k=0,w=0,g=new Set;for(const v of y){const S=await t.getPoolInfoByAddress(v);if(!S)continue;const h=S.reserves?.reserve0&&a.ETH?Number(ethers.formatUnits(S.reserves.reserve0,S.token0.decimals))*a.ETH:0,T=S.reserves?.reserve1&&a.ETH?Number(ethers.formatUnits(S.reserves.reserve1,S.token1.decimals))*a.ETH:0;k+=h+T;const C=await t.getPoolVolume(v,"24h");C&&(w+=C*a.ETH),(await t.getPoolHolders(v)).forEach(M=>g.add(M))}r({volume24h:w,liquidity:k,holders:g.size})}catch(y){console.error("Error loading pool stats:",y)}finally{i(!1)}};t&&a.ETH&&N()},[t,a.ETH]),l.useEffect(()=>{setTimeout(()=>{m(75),setTimeout(()=>{f(!0),u(!0)},1e3)},500)},[]);const p=N=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(N),b=[{icon:Ua,title:"Security First",description:"Built with battle-tested OpenZeppelin and Uniswap V2 contracts.",gradient:"from-[#00ffbd] to-[#00e6a9]"},{icon:Lr,title:"Token Types",description:"Create immutable ERC20 tokens with fixed supply for enhanced security and trust.",gradient:"from-blue-500 to-blue-600"},{icon:Hr,title:"Launch in Minutes",description:"Create your own ERC20 tokens with just a few clicks. No coding required.",gradient:"from-purple-500 to-purple-600"},{icon:ps,title:"Full Control",description:"Transfer tokens, manage allowances, and track balances with standard ERC20 features.",gradient:"from-pink-500 to-pink-600"},{icon:fs,title:"Liquidity Tools",description:"Easily add liquidity and create trading pairs on DEXes.",gradient:"from-yellow-500 to-yellow-600"},{icon:ao,title:"NFT Collections",description:"Launch your NFT collection with customizable traits and rarity.",gradient:"from-green-500 to-green-600"}];function A({deployment:N}){const y=N.type==="nft",k=`/collection/${N.symbol}`,g=(S=>{if(!S)return"unknown";const h=S.toLowerCase();switch(h){case"unknown":case"localhost":case"1828369849":return"moonwalker";case"sepolia":return"sepolia";case"130":case"unichain-mainnet":return"unichain-mainnet";case"1301":case"unichain":return"unichain";case"10143":case"monad-testnet":return"monad-testnet";default:return h}})(N.chainName||N.network),v=(S,h)=>{switch(S.toLowerCase()){case"sepolia":return`https://sepolia.etherscan.io/token/${h}`;case"polygon":return`https://polygonscan.com/token/${h}`;case"unichain-mainnet":return`https://unichain.blockscout.com/token/${h}`;case"unichain":return`https://unichain-sepolia.blockscout.com/token/${h}`;case"moonwalker":return`https://moonwalker-sepolia.blockscout.com/token/${h}`;case"monad-testnet":return`https://monad-testnet.socialscan.io/token/${h}`;default:return"#"}};return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-800 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[N.artworkType==="video"?e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-gray-200 dark:border-gray-800",children:e.jsx("video",{src:N.logo||it(N.logoIpfs),className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0})}):e.jsx("img",{src:N.logo||it(N.logoIpfs),alt:N.name,className:"w-8 h-8 rounded-full",onError:S=>{S.target.onerror=null,S.target.src="/token-default.png"}}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[N.name," (",N.symbol,")"]}),y?e.jsx(so,{className:"text-[#00ffbd]",size:16,title:"NFT Collection"}):e.jsx(Ua,{className:"text-[#00ffbd]",size:16,title:"Non-Mintable Token"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["on ",g]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500",children:Jr(N.timestamp,{addSuffix:!0})}),y?e.jsxs(ut,{to:k,className:"text-xs text-[#00ffbd] hover:text-[#00e6a9] transition-colors group relative",children:["Supply: ",Number(N.totalSupply).toLocaleString(),e.jsx("span",{className:"absolute bottom-full right-0 mb-2 w-max px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"View Collection"})]}):e.jsxs("a",{href:v(g,N.address),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#00ffbd] hover:text-[#00e6a9] transition-colors",children:["Supply: ",Number(N.totalSupply).toLocaleString()]})]})]})}return e.jsxs("main",{className:"mt-16 p-8",children:[e.jsxs("div",{className:"text-center mb-12 relative h-32",children:[e.jsxs("div",{className:`transition-all duration-1000 ${d?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-10"}`,children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:"Welcome to Token Factory"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Launch your own tokens and NFTs on Unichain, Polygon and other EVM chains (coming soon). Create, trade, and manage your crypto assets with our powerful platform."})]}),e.jsx("div",{className:`absolute ${x?"top-4":"-top-4"} transition-all duration-1000 ease-out`,style:{left:`${c}%`,transform:"translate(-50%, 0)"},children:e.jsx(ol,{})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto mb-12",children:b.map((N,y)=>e.jsxs("div",{className:"relative group overflow-hidden rounded-2xl",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${N.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),e.jsxs("div",{className:"relative p-6 bg-white dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 group-hover:border-transparent transition-colors duration-300",children:[e.jsx(N.icon,{className:"w-12 h-12 mb-4 text-[#00ffbd]"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:N.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:N.description})]})]},y))}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Ecosystem Integrations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(fs,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Liquidity & Trade"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"List your token on popular DEXes and create trading pairs"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("a",{href:"https://token-factory.xyz/trading",target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] bg-[#00ffbd]/10 px-3 py-1 rounded-full text-sm hover:bg-[#00ffbd]/20 transition-colors",children:"Token Factory Swap"}),e.jsx("a",{href:"https://app.uniswap.org/#/pools",target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 dark:text-pink-400 bg-pink-100 dark:bg-pink-900/20 px-3 py-1 rounded-full text-sm hover:bg-pink-200 dark:hover:bg-pink-900/30 transition-colors",children:"Uniswap"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-sm",children:"More coming soon"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(ka,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"NFT Marketplaces"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"List your NFTs on popular marketplaces instantly"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("a",{href:"https://opensea.io/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/20 px-3 py-1 rounded-full text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:"OpenSea"}),e.jsx("a",{href:"https://market.wilderworld.com/",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20 px-3 py-1 rounded-full text-sm hover:bg-orange-200 dark:hover:bg-orange-900/30 transition-colors",children:"WWMarket"}),e.jsx("a",{href:"https://rarible.com/",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 bg-purple-100 dark:bg-purple-900/20 px-3 py-1 rounded-full text-sm hover:bg-purple-200 dark:hover:bg-purple-900/30 transition-colors",children:"Rarible"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-sm",children:"More coming soon"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(eo,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Deployments"})]}),e.jsx("div",{className:"space-y-3",children:n.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tokens deployed yet"}):e.jsx("div",{className:"space-y-2",children:n.slice(0,5).map(N=>e.jsx(A,{deployment:N},N.timestamp))})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(to,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Token Analytics"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Track your token's performance and trading activity"}),e.jsxs("div",{className:"mt-4 h-[200px] bg-gray-50 dark:bg-[#1a1b1f] rounded-lg p-4 relative overflow-hidden border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ZFUN/POL"}),e.jsx("span",{className:"text-xs text-[#00ffbd]",children:"+2.45%"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-2 py-1 text-xs rounded bg-gray-200 dark:bg-[#2d2f36] text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-[#3d3f46]",children:"1H"}),e.jsx("button",{className:"px-2 py-1 text-xs rounded bg-[#00ffbd] text-black",children:"24H"}),e.jsx("button",{className:"px-2 py-1 text-xs rounded bg-gray-200 dark:bg-[#2d2f36] text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-[#3d3f46]",children:"7D"})]})]}),e.jsxs("div",{className:"relative h-[120px]",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00ffbd",stopOpacity:"0.1"}),e.jsx("stop",{offset:"100%",stopColor:"#00ffbd",stopOpacity:"0"})]})}),e.jsx("path",{d:"M0,100 C50,80 100,120 150,60 C200,0 250,40 300,20 L300,150 L0,150 Z",fill:"url(#gradient)",className:"transition-all duration-300"}),e.jsx("path",{d:"M0,100 C50,80 100,120 150,60 C200,0 250,40 300,20",fill:"none",stroke:"#00ffbd",strokeWidth:"2",className:"transition-all duration-300"})]})}),e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-gray-500 py-2",children:[e.jsx("span",{children:"$1.24"}),e.jsx("span",{children:"$1.12"}),e.jsx("span",{children:"$1.00"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Volume 24h"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:o?"Loading...":p(s.volume24h)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Liquidity"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:o?"Loading...":p(s.liquidity)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Holders"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:o?"Loading...":s.holders.toLocaleString()})]})]})]})]})]})]})}function il({children:n,className:a="",hideCorners:t=!1}){return e.jsxs("div",{className:"relative",children:[!t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 border-t-2 border-l-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 border-t-2 border-r-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 border-b-2 border-l-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"})]}),e.jsx("div",{className:`bg-white dark:bg-[#0a0b0f] rounded-xl p-6 ${a}`,children:n})]})}const rr={Art:{icon:io,label:"Art Collection"},gaming:{icon:Us,label:"Gaming Assets"},photography:{icon:lo,label:"Photography"},music:{icon:co,label:"Music"},video:{icon:uo,label:"Video Content"},collectibles:{icon:mo,label:"Collectibles"},sports:{icon:Us,label:"Sports"},other:{icon:Dt,label:"Other"}},ll={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},dl={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",bounce:.3}}},Ot=20;function Jc(){const[n,a]=l.useState([]),[t,s]=l.useState(!0),[r,o]=l.useState({network:"all",type:"all",sortBy:"newest"}),[i,d]=l.useState({}),[u,c]=l.useState(1),m=l.useRef(null);l.useEffect(()=>{(async()=>{try{s(!0);const v=await Di({network:r.network,type:r.type});a(v)}catch{G.error("Failed to load collections")}finally{s(!1)}})()},[r.network,r.type]);const x=l.useMemo(()=>n.filter(g=>r.network!=="all"?r.network==="unichain-mainnet"?g.chainId===130:r.network==="unichain"?g.chainId===1301:r.network==="sepolia"?g.network==="sepolia"||g.chainId===11155111:r.network==="polygon"?g.network==="polygon"||g.chainId===137:r.network==="moonwalker"?g.network==="moonwalker"||g.chainId===1828369849:r.network==="monad-testnet"?g.network==="monad-testnet"||g.chainId===10143:!1:!(r.type!=="all"&&g.type!==r.type)).sort((g,v)=>{switch(r.sortBy){case"newest":return new Date(v.createdAt)-new Date(g.createdAt);case"oldest":return new Date(g.createdAt)-new Date(v.createdAt);case"name":return g.name.localeCompare(v.name);default:return 0}}),[n,r]);l.useEffect(()=>{(async()=>{for(const v of x)if(v?.mintToken?.address)try{const S=await Ze(v.mintToken.address);S?.logo&&d(h=>({...h,[v.mintToken.address.toLowerCase()]:S.logo}))}catch{}})()},[x]);const f=()=>{const[g,v]=l.useState(!1),[S,h]=l.useState(!1),[T,C]=l.useState(!1),H=O=>{m.current&&clearTimeout(m.current),O(!0)},M=O=>{m.current=setTimeout(()=>{O(!1)},300)},j=[{value:"all",label:"All Networks"},{value:"sepolia",label:"Sepolia"},{value:"unichain-mainnet",label:"Unichain Mainnet"},{value:"unichain",label:"Unichain Testnet"},{value:"polygon",label:"Polygon"},{value:"moonwalker",label:"Moonwalker"},{value:"monad-testnet",label:"Monad Testnet"}],E=[{value:"all",label:"All Types"},{value:"ERC721",label:"ERC721"},{value:"ERC1155",label:"ERC1155"}],R=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"name",label:"Name A-Z"}];return e.jsxs("div",{className:"flex gap-4 mb-6 relative z-[100]",children:[e.jsxs("div",{className:"relative",onMouseEnter:()=>H(v),onMouseLeave:()=>M(v),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsx("span",{children:j.find(O=>O.value===r.network)?.label}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(m.current),onMouseLeave:()=>M(v),children:j.map(O=>e.jsx("button",{onClick:()=>{o(D=>({...D,network:O.value})),v(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 ${r.network===O.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:O.label},O.value))})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>H(h),onMouseLeave:()=>M(h),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsx("span",{children:E.find(O=>O.value===r.type)?.label}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${S?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),S&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(m.current),onMouseLeave:()=>M(h),children:E.map(O=>e.jsx("button",{onClick:()=>{o(D=>({...D,type:O.value})),h(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 ${r.type===O.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:O.label},O.value))})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>H(C),onMouseLeave:()=>M(C),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsx("span",{children:R.find(O=>O.value===r.sortBy)?.label}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(m.current),onMouseLeave:()=>M(C),children:R.map(O=>e.jsx("button",{onClick:()=>{o(D=>({...D,sortBy:O.value})),C(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 ${r.sortBy===O.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:O.label},O.value))})]})]})},p=g=>{const v=Date.now(),S=new Date(g.releaseDate),h=new Date(g.mintEndDate||Date.now()+864e5),T=S-v;return h-v<=0||!g.infiniteMint&&g.totalMinted>=g.maxSupply?{label:"Ended",color:"text-red-400 bg-red-400/10",icon:dt}:T>0?T<36e5?{label:`Starts in ${Math.ceil(T/6e4)}m`,color:"text-yellow-400 bg-yellow-400/10",icon:$a}:{label:"Coming Soon",color:"text-blue-400 bg-blue-400/10",icon:$a}:{label:"Live",color:"text-green-400 bg-green-400/10",icon:ro}},b=g=>{const v=(g||"other").toLowerCase(),S=rr[v]||rr.other;return e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-[#1a1b1f] p-2 rounded-lg border border-gray-200 dark:border-gray-800",children:e.jsx(S.icon,{className:"w-4 h-4 text-gray-700 dark:text-[#00ffbd]"})}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:g||"Other"})]})},A=g=>{const v=g?.mintToken?.address?.toLowerCase();if(!v||v==="0x0000000000000000000000000000000000000000")return g?.network==="moonwalker"||g?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"}):g?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}):g?.network==="monad-testnet"||g?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}):e.jsx(et,{className:"w-5 h-5 text-[#00ffbd]"});if(v==="0xf4a67fd6f54ff994b7df9013744a79281f88766e")return e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"});const h=i[v];return h?e.jsx("img",{src:h,alt:"Token",className:"w-5 h-5 rounded-full",onError:T=>{T.target.onerror=null,T.target.src="/token-default.png"}}):e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-5 h-5 rounded-full"})},N=()=>e.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(g=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${g*.2}s`}},g))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] h-[340px]",children:[e.jsx("div",{className:"h-[180px] w-full bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:"w-16 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:"w-20 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"h-6 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]})]})]})]})}),y=l.useMemo(()=>{const g=(u-1)*Ot,v=g+Ot;return x.slice(g,v)},[x,u]),k=Math.ceil(x.length/Ot),w=()=>e.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",(u-1)*Ot+1," to ",Math.min(u*Ot,x.length)," of ",x.length," collections"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(g=>Math.max(1,g-1)),disabled:u===1,className:`p-2 rounded-lg border border-gray-200 dark:border-gray-700 disabled:opacity-50 
            disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors`,children:e.jsx(no,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:k},(g,v)=>v+1).map(g=>e.jsx("button",{onClick:()=>c(g),className:`
                w-8 h-8 rounded-lg text-sm font-medium transition-colors
                ${u===g?"bg-[#00ffbd] text-gray-900":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
              `,children:g},g))}),e.jsx("button",{onClick:()=>c(g=>Math.min(k,g+1)),disabled:u===k,className:`p-2 rounded-lg border border-gray-200 dark:border-gray-700 disabled:opacity-50 
            disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors`,children:e.jsx(oo,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]});return e.jsxs("div",{className:"h-screen flex flex-col overflow-hidden pt-16",children:[e.jsx("div",{className:"max-w-7xl mx-auto w-full px-8 flex-shrink-0",children:e.jsxs(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col gap-2 py-2 bg-gray-50 dark:bg-[#0a0b0f] sticky top-16 z-[100]",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Collections"}),e.jsx(f,{})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-8 custom-scrollbar bg-white dark:bg-[#0a0b0f] relative z-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(B.div,{variants:ll,initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 pt-2",children:t?Array.from({length:Ot}).map((g,v)=>e.jsx(N,{},v)):y.map(g=>{const v=p(g);return e.jsx(B.div,{variants:dl,whileHover:{scale:1.02,transition:{duration:.2}},whileTap:{scale:.98},children:e.jsx(ut,{to:`/collection/${g.symbol}`,className:"block",children:e.jsxs("div",{className:"relative",children:[e.jsxs(B.div,{className:"absolute -top-[2px] -left-[2px] w-8 h-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(S=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${S*.2}s`}},S))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] h-[340px]",children:[e.jsx(B.div,{className:"relative h-[180px] w-full overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:g.artworkType==="video"?e.jsx("video",{src:g.previewUrl,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsx("img",{src:g.previewUrl,alt:g.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:"bg-[#0d0e12]/80 backdrop-blur-sm text-white px-2 py-0.5 rounded-full text-xs",children:g.type||"ERC721"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${v.color}`,children:[e.jsx(v.icon,{size:12}),e.jsx("span",{children:v.label})]})}),e.jsxs(B.div,{className:"flex flex-col flex-1 p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1 w-full",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white truncate flex-shrink min-w-0",children:g.name}),g.enableWhitelist&&e.jsxs("div",{className:"flex items-center gap-1 bg-[#00ffbd]/10 px-1.5 py-0.5 rounded-full flex-shrink-0 ml-auto",children:[e.jsx("span",{role:"img","aria-label":"crown",className:"text-[10px]",children:"👑"}),e.jsx("span",{className:"text-[10px] font-medium text-[#00ffbd]",children:"Whitelist Mint"})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs truncate",children:g.description})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[b(g.category),e.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-[#1a1b1f] px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-800",children:[A(g),e.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:g.mintPrice})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-[#1a1b1f] px-2 py-1 rounded-lg border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Supply"}),e.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:g.maxSupply||0})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-[#1a1b1f] px-2 py-1 rounded-lg border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Minted"}),e.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:g.totalMinted||0})]})})]})]})]})]})})},g.symbol)})}),!t&&x.length>Ot&&e.jsx(w,{})]})})]})}const nr=async(n,a=50)=>{try{const t=Be(es,Ie("collectionAddress","==",n),xt("timestamp","desc"),Ja(a));return(await Ue(t)).docs.map(r=>{const o=r.data();return{id:r.id,...o,tokenId:o.tokenId.toString().replace(/[^0-9]/g,""),timestamp:o.timestamp?.toDate()}})}catch{return[]}},cl=(n,a)=>{try{const t=Be(es,Ie("collectionAddress","==",n),xt("timestamp","desc"),Ja(50));return Aa(t,s=>{const r=s.docs.map(o=>{const i=o.data();return{id:o.id,...i,tokenId:i.tokenId?.toString()||"0",timestamp:i.timestamp?.toDate()}});a(r)})}catch{return a([]),()=>{}}};function ul(){const[n,a]=l.useState([]),[t,s]=l.useState(!0),[r,o]=l.useState(!1),[i,d]=l.useState(!0),{symbol:u}=Ns(),[c,m]=l.useState(null),[x,f]=l.useState({}),[p,b]=l.useState(50),A=l.useRef(null),N=l.useCallback(h=>{h[0].isIntersecting&&!r&&i&&y()},[r,i]);l.useEffect(()=>{const h={root:null,rootMargin:"20px",threshold:0},T=new IntersectionObserver(N,h);return A.current&&T.observe(A.current),()=>{A.current&&T.unobserve(A.current)}},[N]),l.useEffect(()=>{(async()=>{try{const T=await As(u);if(m(T),T?.contractAddress){const C=await nr(T.contractAddress,p);if(T.mintToken?.address){const M=T.mintToken.address,j=await Ze(M);j?.logo&&f(E=>({...E,[M]:j.logo}))}a(C.map(M=>({...M,artworkType:T.artworkType,tokenName:T.name,tokenId:M.tokenId}))),s(!1);const H=cl(T.contractAddress,M=>{a(j=>{const E=new Set(j.map(O=>O.id));return[...M.filter(O=>!E.has(O.id)),...j].slice(0,p)})});return()=>H()}}catch{s(!1)}})()},[u,p]);const y=async()=>{if(!(!c?.contractAddress||r||!i)){o(!0);try{const h=p+50,T=await nr(c.contractAddress,h);T.length===n.length?d(!1):(a(T.map(C=>({...C,artworkType:c.artworkType,tokenName:c.name,tokenId:C.tokenId}))),b(h))}catch{G.error("Failed to load more mints")}finally{o(!1)}}},k=h=>{try{if(!h)return"0";if(c?.mintToken?.type==="custom"||c?.mintToken?.type==="usdc"||c?.mintToken?.type==="usdt")return parseFloat(h).toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0});let T;if(typeof h=="string"){const M=h.replace(/,/g,"");try{T=Te(M,"wei")}catch{T=qt(M)}}else T=BigInt(h.toString());const C=Ve(T),H=parseFloat(C);return isNaN(H)?"0":H.toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}catch{return"0"}},w=h=>{const T=it(h.image);return h.artworkType==="video"?e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black",children:e.jsx("video",{src:T,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0})}):e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black",children:e.jsx("img",{src:T,alt:"NFT",className:"w-full h-full object-cover",onError:C=>{C.target.onerror=null,C.target.src="/placeholder.png"}})})},g=h=>{const T=h.network==="polygon"?"https://polygonscan.com":h.network==="unichain-mainnet"||h.chainId===130?"https://unichain.blockscout.com":h.network==="unichain"?"https://unichain-sepolia.blockscout.com":h.network==="moonwalker"||h.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":h.network==="monad-testnet"||h.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io";return e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:e.jsx("a",{href:`${T}/token/${h.collectionAddress}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#00ffbd] transition-colors",children:"token id"})})},v=h=>{const T=h.network==="polygon"?"https://polygonscan.com":h.network==="unichain-mainnet"||h.chainId===130?"https://unichain.blockscout.com":h.network==="unichain"?"https://unichain-sepolia.blockscout.com":h.network==="moonwalker"||h.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":h.network==="monad-testnet"||h.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io";return e.jsx("div",{className:"text-sm text-gray-400",children:e.jsx("a",{href:`${T}/tx/${h.hash}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#00ffbd] transition-colors",children:h.timestamp?Jr(h.timestamp,{addSuffix:!0}):"Just now"})})},S=h=>{const T=h?.paymentToken?.address?.toLowerCase();return!T||T==="0x0000000000000000000000000000000000000000"?h.network==="moonwalker"||h.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-6 h-6"}):h.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-6 h-6"}):h.network==="monad-testnet"||h.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-6 h-6"}):e.jsx(et,{className:"w-6 h-6 text-[#00ffbd]"}):T==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-6 h-6"}):T&&x[T]?e.jsx("img",{src:x[T],alt:h.paymentToken.symbol||"Token",className:"w-6 h-6 rounded-full",onError:H=>{H.target.onerror=null,H.target.src="/token-default.png"}}):h.paymentToken?.type==="custom"?e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-6 h-6 rounded-full"}):e.jsx(et,{className:"w-6 h-6 text-[#00ffbd]"})};return l.useEffect(()=>{(async()=>{for(const T of n)if(T?.paymentToken?.address&&!x[T.paymentToken.address.toLowerCase()])try{const C=await Ze(T.paymentToken.address);C?.logo&&f(H=>({...H,[T.paymentToken.address.toLowerCase()]:C.logo}))}catch(C){console.error("Error fetching token logo:",C)}})()},[n]),t?e.jsx("div",{className:"text-gray-400",children:"Loading..."}):n.length?e.jsx("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"overflow-y-auto",style:{height:"600px",paddingRight:"8px",scrollbarWidth:"thin",scrollbarColor:"#00ffbd transparent",marginBottom:"-16px"},css:`
            &::-webkit-scrollbar {
              width: 4px;
            }
            &::-webkit-scrollbar-track {
              background: transparent;
            }
            &::-webkit-scrollbar-thumb {
              background-color: #00ffbd;
              border-radius: 20px;
            }
          `,children:[n.map(h=>e.jsx("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800 min-h-[100px] hover:border-[#00ffbd] transition-colors duration-200 mb-4 last:mb-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[w(h),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-gray-800 dark:text-white font-medium",children:[h.quantity,"x ",h.tokenName||"Token"]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"by"}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(h.minterAddress),G.success("Address copied!")},className:"flex items-center gap-1 hover:text-[#00ffbd] transition-colors",children:[h.minterAddress.slice(0,6),"...",h.minterAddress.slice(-4),e.jsx(Ta,{size:14})]})]}),g(h)]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[#00ffbd]",children:[S(h),e.jsx("span",{className:"font-medium",children:k(h.value)})]}),v(h)]})]})},h.id)),e.jsx("div",{ref:A,className:"h-0 opacity-0","aria-hidden":"true"}),r&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})})]})})}):e.jsx("div",{className:"text-gray-400",children:"No mints yet"})}const or="Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",ml={ethereum:"https://eth-mainnet.g.alchemy.com/v2/",sepolia:"https://eth-sepolia.g.alchemy.com/v2/",polygon:"https://polygon-mainnet.g.alchemy.com/v2/",mumbai:"https://polygon-mumbai.g.alchemy.com/v2/",arbitrum:"https://arb-mainnet.g.alchemy.com/v2/",optimism:"https://opt-mainnet.g.alchemy.com/v2/",unichain:"https://unichain-sepolia.g.alchemy.com/v2/","unichain-mainnet":"https://unichain.blockscout.com/v2/"},ir={moonwalker:"https://moonwalker-rpc.eu-north-2.gateway.fm",unichain:"https://sepolia.unichain.org","unichain-mainnet":"https://unichain.blockscout.com","monad-testnet":"https://testnet-rpc.monad.xyz/"},lr=n=>{if(!n||typeof n!="string")return"Invalid Address";const a=n.startsWith("0x")?n:`0x${n}`;return`${a.substring(0,6)}...${a.substring(a.length-4)}`},xl=n=>{switch(n){case 0:return e.jsx(Ur,{className:"text-yellow-400",size:24});case 1:return e.jsx($s,{className:"text-gray-300",size:24});case 2:return e.jsx($s,{className:"text-amber-600",size:24});default:return null}},ds=({active:n,payload:a,type:t})=>n&&a&&a.length?e.jsx("div",{className:"bg-[#1a1b1f] p-2 rounded-lg border border-gray-800",children:t==="pie"?e.jsx("p",{className:"text-[#00ffbd] text-xs",children:`${a[0].name}: ${a[0].value} NFTs`}):t==="bar"?e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"text-white",children:a[0].payload.label}),e.jsxs("p",{className:"text-[#00ffbd]",children:[a[0].value," holders"]})]}):e.jsx("p",{className:"text-[#00ffbd] text-xs",children:`${a[0].value} NFTs`})}):null;function hl({collection:n}){const[a,t]=l.useState([]),[s,r]=l.useState(!0),[o,i]=l.useState(null);if(n?.network==="monad-testnet"||n?.chainId===10143)return e.jsx("div",{className:"flex items-center justify-center py-12 bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Top holders analytics for Monad Testnet are under development."})]})});l.useEffect(()=>{const f=async()=>{try{if(!n?.contractAddress)throw new Error("No contract address available");if(n.chainId===130||n.chainId===1301){await A(n.contractAddress);return}if(n.network==="moonwalker"||n.chainId===1828369849){await N(n.contractAddress);return}if(n.network==="monad-testnet"||n.chainId===10143){await y(n.contractAddress);return}const k=n.network==="polygon"?"polygon":"sepolia",w=ml[k];if(!w)throw new Error(`Unsupported network: ${n.network}`);const g=n.contractAddress;console.log("Using contract address:",g);const v=`${w}${or}/getOwnersForCollection?contractAddress=${g}&withTokenBalances=true`,S=await fetch(v);if(!S.ok){const C=await S.text();throw new Error(`Alchemy API error (${S.status}): ${C}`)}const h=await S.json();if(!h?.ownerAddresses)throw new Error("Invalid response format from Alchemy API");const T=h.ownerAddresses.filter(C=>C&&typeof C=="object"&&C.ownerAddress).map(C=>({holderAddress:C.ownerAddress,quantity:Array.isArray(C.tokenBalances)?C.tokenBalances.reduce((H,M)=>H+Number(M.balance||0),0):0})).filter(C=>C.quantity>0).sort((C,H)=>H.quantity-C.quantity);t(T),i(null)}catch(k){console.error("Error loading holders:",k),i(k.message),G.error(`Failed to load top holders: ${k.message}`)}finally{r(!1)}},p=async(k,w)=>{const g=["event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"],S=await new _(k,g,w).queryFilter("Transfer",0,"latest"),h=new Map;for(const C of S){const{to:H,tokenId:M}=C.args;h.set(M.toString(),H)}const T=new Map;for(const C of h.values())if(C!=="0x0000000000000000000000000000000000000000"){const H=T.get(C)||0;T.set(C,H+1)}return Array.from(T.entries()).map(([C,H])=>({holderAddress:C,quantity:H})).filter(C=>C.quantity>0&&C.holderAddress!=="0x0000000000000000000000000000000000000000").sort((C,H)=>H.quantity-C.quantity)},b=async(k,w)=>{const g=["event TransferSingle(address indexed operator, address indexed from, address indexed to, uint256 id, uint256 value)","event TransferBatch(address indexed operator, address indexed from, address indexed to, uint256[] ids, uint256[] values)"],v=new _(k,g,w),S=new Map,h=await v.queryFilter("TransferSingle",0,"latest");for(const C of h){const{from:H,to:M,value:j}=C.args;if(H!=="0x0000000000000000000000000000000000000000"){const E=S.get(H)||0;S.set(H,Math.max(0,E-Number(j)))}if(M!=="0x0000000000000000000000000000000000000000"){const E=S.get(M)||0;S.set(M,E+Number(j))}}const T=await v.queryFilter("TransferBatch",0,"latest");for(const C of T){const{from:H,to:M,values:j}=C.args;for(let E=0;E<j.length;E++){if(H!=="0x0000000000000000000000000000000000000000"){const R=S.get(H)||0;S.set(H,Math.max(0,R-Number(j[E])))}if(M!=="0x0000000000000000000000000000000000000000"){const R=S.get(M)||0;S.set(M,R+Number(j[E]))}}}return Array.from(S.entries()).map(([C,H])=>({holderAddress:C,quantity:H})).filter(C=>C.quantity>0&&C.holderAddress!=="0x0000000000000000000000000000000000000000").sort((C,H)=>H.quantity-C.quantity)},A=async k=>{try{const w=new wt(n.chainId===130?"https://mainnet.unichain.org":"https://sepolia.unichain.org"),g=n.type?.toUpperCase().replace("-","")==="ERC1155"||n.tokenType?.toUpperCase().replace("-","")==="ERC1155"||n.contractType?.toUpperCase().replace("-","")==="ERC1155";let v;g?v=await b(k,w):v=await p(k,w),t(v),i(null)}catch(w){console.error("Error loading Unichain holders:",w),i(w.message),G.error(`Failed to load holders: ${w.message}`)}},N=async k=>{try{const w=new wt(ir.moonwalker),g=n.type?.toUpperCase().replace("-","")==="ERC1155"||n.tokenType?.toUpperCase().replace("-","")==="ERC1155"||n.contractType?.toUpperCase().replace("-","")==="ERC1155";let v;g?v=await b(k,w):v=await p(k,w),t(v),i(null)}catch(w){console.error("Error loading Moonwalker holders:",w),i(w.message),G.error(`Failed to load holders: ${w.message}`)}},y=async k=>{try{const w=new wt(ir["monad-testnet"]),g=n.type?.toUpperCase().replace("-","")==="ERC1155"||n.tokenType?.toUpperCase().replace("-","")==="ERC1155"||n.contractType?.toUpperCase().replace("-","")==="ERC1155";let v;g?v=await b(k,w):v=await p(k,w),t(v),i(null)}catch(w){console.error("Error loading Monad holders:",w),i(w.message),G.error(`Failed to load holders: ${w.message}`)}};n&&f()},[n]);const d=f=>{f.reduce((w,g)=>w+g.quantity,0);const p=Math.max(...f.map(w=>w.quantity)),N=(w=>{if(w<=5)return[{min:1,max:1,label:"1 NFT"},{min:2,max:3,label:"2-3 NFTs"},{min:4,max:5,label:"4-5 NFTs"}];if(w<=10)return[{min:1,max:2,label:"1-2 NFTs"},{min:3,max:5,label:"3-5 NFTs"},{min:6,max:10,label:"6-10 NFTs"}];if(w<=20)return[{min:1,max:5,label:"1-5 NFTs"},{min:6,max:10,label:"6-10 NFTs"},{min:11,max:20,label:"11-20 NFTs"}];{const g=Math.ceil(w/4);return[{min:1,max:g,label:`1-${g} NFTs`},{min:g+1,max:g*2,label:`${g+1}-${g*2} NFTs`},{min:g*2+1,max:g*3,label:`${g*2+1}-${g*3} NFTs`},{min:g*3+1,max:w,label:`${g*3+1}+ NFTs`}]}})(p).map(w=>({name:w.label,label:w.label,value:f.filter(g=>g.quantity>=w.min&&g.quantity<=w.max).length})).filter(w=>w.value>0),y=f.slice(0,10).map(w=>({name:lr(w.holderAddress),value:w.quantity})),k=f.map((w,g)=>({name:g,value:f.slice(0,g+1).reduce((v,S)=>v+S.quantity,0)}));return{distributionData:N,top10Data:y,cumulativeData:k}};if(s)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})});if(o)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 dark:text-red-400 mb-2",children:"Error loading holders data"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o})]});const{distributionData:u,top10Data:c,cumulativeData:m}=d(a),x=a.reduce((f,p)=>f+p.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Unique Holders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:a.length}),e.jsx("div",{className:"h-32",children:e.jsx(Wa,{width:"100%",height:"100%",children:e.jsxs(ui,{data:u,barSize:24,margin:{top:5,right:5,bottom:5,left:5},children:[e.jsx(en,{dataKey:"name",tick:!1}),e.jsx(Ha,{content:f=>e.jsx(ds,{...f,type:"bar"}),cursor:{fill:"rgba(0, 255, 189, 0.1)"}}),e.jsx(mi,{dataKey:"value",fill:"#00ffbd",radius:[4,4,0,0]})]})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Holder distribution by NFT count"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Top 10 Hold"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:[x>0?(a.slice(0,10).reduce((f,p)=>f+p.quantity,0)/x*100).toFixed(1):"0","%"]}),e.jsx("div",{className:"h-32",children:e.jsx(Wa,{width:"100%",height:"100%",children:e.jsxs(xi,{children:[e.jsx(hi,{data:c,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:30,outerRadius:50,children:c.map((f,p)=>e.jsx(fi,{fill:`hsl(166, 100%, ${50+p*5}%)`},p))}),e.jsx(Ha,{content:f=>e.jsx(ds,{...f,type:"pie"})})]})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Top 10 holders by NFT count"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Avg. Per Holder"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:a.length>0?(x/a.length).toFixed(1):"0"}),e.jsx("div",{className:"h-32",children:e.jsx(Wa,{width:"100%",height:"100%",children:e.jsxs(tn,{data:m,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"avgGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#00ffbd",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#00ffbd",stopOpacity:0})]})}),e.jsx(Ha,{content:f=>e.jsx(ds,{...f})}),e.jsx(an,{type:"monotone",dataKey:"value",stroke:"#00ffbd",fill:"url(#avgGradient)"})]})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Cumulative NFT distribution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"Top Holders"}),e.jsx("div",{className:"space-y-4",children:a.length===0?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"No holders data yet"}):e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:a.length>5?"250px":"auto",paddingRight:a.length>5?"8px":"0",scrollbarWidth:"thin",scrollbarColor:"#00ffbd transparent"},css:`
                &::-webkit-scrollbar {
                  width: 4px;
                }
                &::-webkit-scrollbar-track {
                  background: transparent;
                }
                &::-webkit-scrollbar-thumb {
                  background-color: #00ffbd;
                  border-radius: 20px;
                }
              `,children:a.map((f,p)=>e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-gray-100 dark:border-gray-800 last:border-0 pb-3 last:pb-0 mb-3 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-[40px]",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["#",p+1]}),xl(p)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:lr(f.holderAddress)}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f.holderAddress),G.success("Address copied!")},className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(Ta,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[f.quantity," NFTs"]}),e.jsxs("span",{className:"text-[#00ffbd] w-16 text-right",children:[(f.quantity/x*100).toFixed(1),"%"]})]})]},f.holderAddress))})})]})]})}const Na=n=>n?`${n.slice(0,6)}...${n.slice(-4)}`:"",fl=async({text:n,sender:a,collectionAddress:t,replyTo:s=null})=>{try{const r=_e($e,"collections",t,"messages"),o={text:n.trim(),sender:a.toLowerCase(),timestamp:ca()};return s?(o.replyTo={messageId:s.messageId,text:s.text.substring(0,100),sender:s.sender.toLowerCase()},o.threadId=s.threadId||s.messageId,o.isThread=!0,o.threadDepth=s.threadDepth?s.threadDepth+1:0):(o.replyTo=null,o.threadId=null,o.isThread=!1,o.threadDepth=null),await Lt(r,o),!0}catch(r){return console.error("Error sending message:",r),!1}},pl=(n,a)=>{const t=_e($e,"collections",n,"messages"),s=Be(t,xt("timestamp","desc"),Ja(100));return Aa(s,r=>{const o=[];r.forEach(d=>{const u=d.data();o.push({id:d.id,...u,timestamp:u.timestamp instanceof Ko?u.timestamp.toDate():new Date})});const i=o.sort((d,u)=>{const c=d.timestamp-u.timestamp;return c!==0?c:d.threadId===u.id?1:u.threadId===d.id?-1:0});a(i)})},dr=async(n,a)=>{try{const t=Gt($e,"collections",n,"moderation","bannedUsers");return await Qo(t,{addresses:a,updatedAt:ca()}),!0}catch(t){throw console.error("Error updating banned users:",t),t}},gl=async n=>{try{const a=Gt($e,"collections",n,"moderation","bannedUsers"),t=await qa(a);return t.exists()?t.data().addresses||[]:[]}catch(a){return console.error("Error loading banned users:",a),[]}},bl=async(n,a)=>{try{const t=Gt($e,"collections",n,"messages",a);return await ei(t),!0}catch(t){throw console.error("Error deleting message:",t),t}},yl=n=>{const a=n.toLowerCase().slice(2,10),t=parseInt(a,16)%360;return{primary:`hsl(${t}, 90%, 65%)`,secondary:`hsl(${(t+40)%360}, 85%, 60%)`,accent:`hsl(${(t+180)%360}, 80%, 65%)`,highlight:`hsl(${(t+150)%360}, 85%, 75%)`,background:"#22232b"}},wl=({address:n,size:a=32})=>{const t=yl(n),s=Array.from({length:6},(i,d)=>parseInt(n.slice(2+d*2,4+d*2),16)),r=i=>{const d=s[0]%360*(Math.PI/180),u=15+s[1]%10,c=40+Math.cos(d+i)*u,m=40+Math.sin(d+i)*u;return{x:c,y:m}},o=Array.from({length:6},(i,d)=>r(d*Math.PI/3));return e.jsxs("svg",{width:a,height:a,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"40",cy:"40",r:"40",fill:t.background}),e.jsx("path",{d:`
          M ${o[0].x} ${o[0].y}
          C ${o[1].x} ${o[1].y},
            ${o[2].x} ${o[2].y},
            ${o[3].x} ${o[3].y}
          S ${o[4].x} ${o[4].y},
            ${o[5].x} ${o[5].y}
          Z
        `,fill:t.primary,opacity:"0.7"}),o.map((i,d)=>e.jsx("circle",{cx:i.x,cy:i.y,r:3+s[d]%4,fill:d%2?t.secondary:t.accent,opacity:"0.9"},d)),e.jsx("path",{d:`
          M ${40-s[2]%15} ${40-s[3]%15}
          Q 40 ${40-s[4]%20},
            ${40+s[5]%15} ${40+s[0]%15}
        `,stroke:t.highlight,strokeWidth:"3",fill:"none"}),e.jsx("circle",{cx:"40",cy:"40",r:5+s[1]%5,fill:t.secondary,opacity:"0.8"}),Array.from({length:3}).map((i,d)=>e.jsx("line",{x1:40+Math.cos(s[d]*Math.PI/12)*20,y1:40+Math.sin(s[d]*Math.PI/12)*20,x2:40+Math.cos((s[d]+2)*Math.PI/12)*25,y2:40+Math.sin((s[d]+2)*Math.PI/12)*25,stroke:t.accent,strokeWidth:"1.5",opacity:"0.6"},d))]})},cs={dark:{bg:"bg-[#1a1b1f]",header:"bg-gray-800",messageBubble:{sent:"bg-[#00ffbd] text-gray-900",received:"bg-gray-700/90 text-white"},input:{bg:"bg-gray-700",text:"text-white",placeholder:"text-gray-400"},address:{bg:"bg-gray-800/50",text:"text-[#00ffbd]"},time:"text-gray-500",link:"text-[#00ffbd]",linkPreview:"bg-black/20"},light:{bg:"bg-gray-100",header:"bg-white",messageBubble:{sent:"bg-[#00ffbd] text-gray-900",received:"bg-gray-200 text-gray-900"},input:{bg:"bg-gray-100",text:"text-gray-900",placeholder:"text-gray-500"},address:{bg:"bg-gray-200/50",text:"text-gray-700"},time:"text-gray-500"},midnight:{bg:"bg-gradient-to-br from-blue-900 via-gray-900 to-purple-900",header:"bg-black/40",messageBubble:{sent:"bg-blue-500/90 text-white",received:"bg-gray-700/90 text-white"},input:{bg:"bg-gray-800/60",text:"text-blue-100",placeholder:"text-gray-400"},address:{bg:"bg-blue-900/30",text:"text-blue-400"},time:"text-blue-300/70"},sunset:{bg:"bg-gradient-to-br from-orange-500 via-red-500 to-pink-500",header:"bg-black/40",messageBubble:{sent:"bg-yellow-400 text-gray-900",received:"bg-white/90 text-gray-900"},input:{bg:"bg-red-900/30",text:"text-white",placeholder:"text-gray-300"},address:{bg:"bg-orange-900/30",text:"text-orange-200"},time:"text-orange-200/70",link:"text-yellow-400",linkPreview:"bg-black/20"},forest:{bg:"bg-gradient-to-br from-green-700 via-green-800 to-green-900",header:"bg-black/40",messageBubble:{sent:"bg-green-400 text-gray-900",received:"bg-gray-200 text-gray-900"},input:{bg:"bg-green-900/30",text:"text-green-100",placeholder:"text-gray-400"},address:{bg:"bg-green-900/30",text:"text-green-400"},time:"text-green-300/70"},sepia:{bg:"bg-gradient-to-br from-[#704214] via-[#8B5E34] to-[#A0522D]",header:"bg-[#3E1F0A]/60",messageBubble:{sent:"bg-[#DEB887] text-[#3E1F0A]",received:"bg-[#F5DEB3] text-[#3E1F0A]"},input:{bg:"bg-[#3E1F0A]/30",text:"text-[#DEB887]",placeholder:"text-[#DEB887]/60"},address:{bg:"bg-[#3E1F0A]/40",text:"text-[#DEB887]"},time:"text-[#DEB887]/70"},ocean:{bg:"bg-gradient-to-br from-cyan-600 via-blue-700 to-blue-900",header:"bg-black/40",messageBubble:{sent:"bg-cyan-400 text-gray-900",received:"bg-white/90 text-gray-900"},input:{bg:"bg-blue-900/30",text:"text-cyan-100",placeholder:"text-gray-400"},address:{bg:"bg-cyan-900/30",text:"text-cyan-400"},time:"text-cyan-200/70"},cosmic:{bg:"bg-gradient-to-br from-purple-900 via-violet-800 to-indigo-900",header:"bg-black/40",messageBubble:{sent:"bg-violet-400 text-gray-900",received:"bg-indigo-200 text-gray-900"},input:{bg:"bg-purple-900/30",text:"text-violet-100",placeholder:"text-gray-400"},address:{bg:"bg-violet-900/30",text:"text-violet-400"},time:"text-violet-200/70"},matrix:{bg:"bg-gradient-to-br from-gray-900 to-gray-800",header:"bg-black/40",messageBubble:{sent:"bg-[#00ff00] text-gray-900",received:"bg-gray-800 text-[#00ff00] border border-[#00ff00]/30"},input:{bg:"bg-gray-900",text:"text-[#00ff00]",placeholder:"text-[#00ff00]/60"},address:{bg:"bg-gray-900/50",text:"text-[#00ff00]"},time:"text-[#00ff00]/70"}},kl=({replyTo:n,onClose:a})=>e.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-lg mb-2 overflow-hidden",children:[e.jsx("div",{className:"w-1 h-full bg-[#00ffbd] self-stretch"}),e.jsxs("div",{className:"flex-1 min-w-0 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs mb-0.5",children:[e.jsx(gs,{className:"w-3 h-3 text-[#00ffbd]"}),e.jsxs("span",{className:"font-medium text-[#00ffbd]",children:["Replying to ",Na(n.sender)]})]}),e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-[300px]",children:n.text})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-black/20 transition-colors",children:e.jsx(Ca,{className:"w-4 h-4 text-gray-400 hover:text-gray-300"})})]}),ys=({message:n,isMyMessage:a,isCreatorMessage:t,onReply:s,currentTheme:r,getTheme:o,isCreator:i,handleModeration:d,address:u})=>{const c=!n.threadDepth||n.threadDepth<3,m=f=>{const p=document.getElementById(`message-${f}`);p&&(p.scrollIntoView({behavior:"smooth",block:"center"}),p.classList.add("highlight-message"),setTimeout(()=>p.classList.remove("highlight-message"),2e3))},x=n.text.match(/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g)||[];return e.jsxs("div",{className:"relative group",id:`message-${n.id}`,children:[n.replyTo&&e.jsxs("button",{onClick:()=>m(n.replyTo.messageId),className:`flex items-center mb-1 max-w-[256px] bg-black/20 rounded-lg 
            hover:bg-black/30 transition-colors overflow-hidden cursor-pointer`,children:[e.jsx("div",{className:"w-1 h-full bg-[#00ffbd] self-stretch"}),e.jsxs("div",{className:"px-3 py-1.5 text-left",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(gs,{className:"w-3 h-3 text-[#00ffbd]"}),e.jsx("span",{className:"font-medium text-[#00ffbd]",children:Na(n.replyTo.sender)})]}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:n.replyTo.text})]})]}),e.jsx("div",{className:`
        flex
        ${a?"justify-end":"justify-start"}
        min-w-[60px] max-w-[85%]
      `,children:e.jsx("div",{className:`
          relative group flex flex-col
          ${a?"items-end":"items-start"}
        `,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`
              px-4 py-2 rounded-2xl break-words relative
              ${a?"rounded-tr-sm":"rounded-tl-sm"}
              ${t?"!bg-gradient-to-r from-yellow-500 to-yellow-600 !text-white":a?o(r).messageBubble.sent:o(r).messageBubble.received}
            `,children:[e.jsx("div",{className:"whitespace-pre-wrap inline-block",children:jl(n.text)}),x.map((f,p)=>e.jsx(Nl,{url:f,currentTheme:r,getTheme:o},p))]}),e.jsxs("div",{className:`absolute -right-20 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 
              flex items-center gap-2 transition-opacity`,children:[c&&e.jsx("button",{onClick:()=>s(n),className:"p-1 rounded-full hover:bg-gray-700/50 transition-all",title:"Reply",children:e.jsx(gs,{className:"w-3.5 h-3.5 text-[#00ffbd]"})}),i(u)&&(a||!a)&&e.jsx("button",{onClick:()=>d("delete",n.sender,n.id),className:"p-1 rounded hover:bg-red-500/10 text-red-400",title:"Delete Message",children:e.jsx(po,{className:"w-3.5 h-3.5"})}),i(u)&&!a&&e.jsx("button",{onClick:()=>d("ban",n.sender),className:"p-1 rounded hover:bg-red-500/10 text-red-400",title:"Ban User",children:e.jsx($r,{className:"w-3.5 h-3.5"})})]})]})})}),n.threadId&&!n.replyTo&&e.jsx("div",{className:"pl-4 border-l-2 border-gray-700 mt-2",children:messages.filter(f=>f.threadId===n.threadId&&f.id!==n.id).map(f=>e.jsx(ys,{message:f,isMyMessage:f.sender.toLowerCase()===u?.toLowerCase(),isCreatorMessage:i(f.sender),onReply:handleReply,currentTheme:r,getTheme:o,isCreator:i,handleModeration:d,address:u},f.id))})]})},vl=({show:n,onClose:a,bannedAddresses:t,onUnban:s})=>n?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-[#1a1b1f] rounded-lg p-6 w-96 max-w-[90vw]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Banned Users"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Ca,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:t.length===0?e.jsx("p",{className:"text-gray-400 text-center py-4",children:"No banned users"}):t.map(r=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-800",children:[e.jsx("span",{className:"text-gray-300",children:Na(r)}),e.jsx("button",{onClick:()=>s(r),className:"text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded hover:bg-red-500/30 transition-colors",children:"Unban"})]},r))})]})}):null,jl=n=>{const a=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return ti.sanitize(n).split(a).map((s,r)=>s.match(a)?e.jsx("a",{href:s,target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:underline break-all",onClick:o=>o.stopPropagation(),children:s},r):s)},Nl=({url:n,currentTheme:a,getTheme:t})=>{try{const s=new URL(n),r=/\.(jpg|jpeg|png|gif|webp)$/i.test(s.pathname),o=s.hostname==="twitter.com"||s.hostname==="x.com",i=t(a);if(o){const d=n.split("/").pop().split("?")[0];return e.jsx("div",{className:`mt-2 rounded-lg overflow-hidden ${i.linkPreview}`,children:e.jsx("div",{className:"custom-twitter-embed",children:e.jsx("iframe",{src:`https://platform.twitter.com/embed/Tweet.html?id=${d}&theme=dark&cards=hidden`,className:"w-full min-h-[300px] border-0",allowFullScreen:!0})})})}return r?e.jsxs("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:`block mt-2 rounded-lg overflow-hidden ${i.linkPreview} hover:bg-black/30 transition-colors`,onClick:d=>d.stopPropagation(),children:[e.jsx("div",{className:"relative w-full pt-[56.25%]",children:e.jsx("img",{src:n,alt:"Preview",className:"absolute top-0 left-0 w-full h-full object-contain bg-black/40",onError:d=>d.target.parentElement.parentElement.style.display="none"})}),e.jsxs("div",{className:"flex items-center gap-2 p-2 border-t border-white/10",children:[e.jsx("img",{src:`https://www.google.com/s2/favicons?domain=${s.hostname}`,alt:"",className:"w-4 h-4"}),e.jsx("span",{className:`text-sm ${i.link}`,truncate:!0,children:s.hostname})]})]}):e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:`block mt-2 rounded-lg overflow-hidden ${i.linkPreview} hover:bg-black/30 transition-colors`,onClick:d=>d.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx("img",{src:`https://www.google.com/s2/favicons?domain=${s.hostname}`,alt:"",className:"w-4 h-4"}),e.jsx("span",{className:`text-sm ${i.link}`,truncate:!0,children:s.hostname})]})})}catch{return null}},Tl=({collection:n})=>{const[a,t]=l.useState([]),[s,r]=l.useState(""),[o,i]=l.useState(!1),[d,u]=l.useState(!1),{address:c}=Le(),m=l.useRef(null),x=l.useRef(null),f=l.useRef(null),[p,b]=l.useState("dark"),[A,N]=l.useState(null),y=l.useRef(null),[k,w]=l.useState(!0),[g,v]=l.useState([]),[S,h]=l.useState(!1),T=ot.useMemo(()=>!n?.creator&&!n?.creatorAddress?null:(n.creator||n.creatorAddress)?.toLowerCase(),[n?.creator,n?.creatorAddress]),C=ot.useCallback(I=>!T||!I?!1:T===I.toLowerCase(),[T]);l.useEffect(()=>{if(!n?.contractAddress)return;const I=pl(n.contractAddress,V=>{t(V)});return()=>I()},[n?.contractAddress]);const H=()=>{m.current?.scrollIntoView({behavior:"smooth"})};l.useEffect(()=>{H()},[a]);const M=I=>{N({messageId:I.id,text:I.text,sender:I.sender,threadId:I.threadId||I.id,threadDepth:I.threadDepth||0}),f.current?.focus()},j=async I=>{if(I.preventDefault(),!(!s.trim()||d||!k)){if(g.some(V=>V.toLowerCase()===c?.toLowerCase())){G.error("You have been banned from this chat");return}u(!0);try{await fl({text:s,sender:c,collectionAddress:n.contractAddress,replyTo:A}),r(""),N(null),f.current?.focus()}catch(V){console.error("Error sending message:",V),G.error("Failed to send message")}u(!1),setTimeout(()=>{f.current?.focus()},100)}},E=I=>{s.length+2<=500&&r(V=>V+I.emoji)},R=I=>!I||!(I instanceof Date)?"":new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(I),O=()=>{const I=f.current;I&&(I.style.height="auto",I.style.height=Math.min(I.scrollHeight,150)+"px")},D=I=>I.reduce((V,W,X)=>{const ae=I[X-1],le=ae&&ae.sender.toLowerCase()===W.sender.toLowerCase(),xe=ae&&(W.timestamp-ae.timestamp)/(1e3*60)<5;return le&&xe?(V[V.length-1].messages.push(W),V):(V.push({id:W.id,sender:W.sender,messages:[W]}),V)},[]),Z=()=>e.jsxs("div",{className:"relative group z-20",children:[e.jsxs("button",{className:"p-1.5 rounded-lg bg-gray-700/80 hover:bg-gray-600 transition-colors flex items-center gap-2",title:"Select Theme",children:[e.jsx(go,{className:"w-4 h-4 text-[#00ffbd]"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Theme"})]}),e.jsx("div",{className:"absolute right-0 top-[120%] mt-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:e.jsxs("div",{className:"bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-xl p-3 border border-gray-700 min-w-[180px]",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Select Theme"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(cs).map(([I,V])=>e.jsx("button",{onClick:W=>{W.preventDefault(),W.stopPropagation(),b(I)},className:`
                  w-8 h-8 rounded-full border-2 transition-all transform hover:scale-110
                  ${p===I?"border-[#00ffbd] scale-110 shadow-lg shadow-[#00ffbd]/20":"border-transparent hover:border-gray-500"}
                  ${V.bg}
                `,title:I.charAt(0).toUpperCase()+I.slice(1)},I))})]})})]}),F=I=>cs[I]||cs.dark;l.useEffect(()=>{const I=V=>{y.current&&!y.current.contains(V.target)&&i(!1)};return document.addEventListener("mousedown",I),()=>{document.removeEventListener("mousedown",I)}},[]);const L=async(I,V,W=null)=>{try{switch(I){case"ban":const X=[...g,V.toLowerCase()];await dr(n.contractAddress,X),G.success(`User ${Na(V)} banned successfully`);break;case"delete":W&&(await bl(n.contractAddress,W),G.success("Message deleted"));break}}catch(X){console.error("Error in moderation:",X),G.error("Failed to perform moderation action")}};return l.useEffect(()=>{if(n?.contractAddress){(async()=>{try{const W=await gl(n.contractAddress);v(W)}catch(W){console.error("Error loading banned users:",W)}})();const V=Aa(Gt($e,"collections",n.contractAddress,"moderation","bannedUsers"),W=>{W.exists()?v(W.data().addresses||[]):v([])});return()=>V()}},[n?.contractAddress]),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`w-full h-full rounded-lg shadow-xl overflow-hidden transition-all duration-300 ${F(p).bg}`,children:[e.jsxs("div",{className:`p-6 border-b border-gray-200 dark:border-gray-700 ${F(p).header}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Collection Chat"}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-300",children:"Join the conversation"}),e.jsxs("div",{className:"flex items-center gap-3",children:[C(c)&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>h(!0),className:"p-2 rounded-lg hover:bg-gray-700/50 transition-colors relative",title:"Manage Banned Users",children:[e.jsx($r,{className:"w-5 h-5 text-gray-400 hover:text-red-400"}),g.length>0&&e.jsx("span",{className:`absolute -top-1 -right-1 w-4 h-4 bg-red-500 
                      rounded-full text-[10px] text-white flex items-center justify-center`,children:g.length})]})}),e.jsx(Z,{})]})]})]}),e.jsxs("div",{ref:x,className:`h-[calc(100%-10rem)] overflow-y-auto overflow-x-hidden p-4 space-y-4 
          custom-scrollbar`,children:[e.jsx(Je,{children:D(a).map(I=>{const V=I.sender.toLowerCase()===c?.toLowerCase(),W=C(I.sender);return e.jsx(B.div,{initial:{opacity:0,x:V?20:-20},animate:{opacity:1,x:0},exit:{opacity:0},className:`flex w-full ${V?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"flex gap-2 max-w-[60%]",children:[e.jsx("div",{className:`
                    flex-shrink-0 self-start mt-1
                    ${V?"order-2":""}
                  `,children:e.jsxs("div",{className:"relative",children:[e.jsx(wl,{address:I.sender,size:32}),W&&e.jsxs("div",{className:"group absolute -top-1 -left-1",children:[e.jsx(Ur,{className:"text-yellow-400 w-4 h-4 cursor-help"}),e.jsx("span",{className:`absolute -top-6 left-0 
                            scale-0 transition-all group-hover:scale-100
                            px-2 py-1 text-xs rounded bg-gray-800 text-yellow-400 whitespace-nowrap z-10`,children:"Creator"})]})]})}),e.jsxs("div",{className:"flex flex-col flex-grow gap-1",children:[I.messages.map((X,ae)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx(ys,{message:X,isMyMessage:V,isCreatorMessage:W,onReply:M,currentTheme:p,getTheme:F,isCreator:C,handleModeration:L,address:c}),X.threadId&&!X.replyTo&&e.jsx("div",{className:"pl-4 border-l-2 border-gray-700 mt-2",children:a.filter(le=>le.threadId===X.threadId&&le.id!==X.id).map(le=>e.jsx(ys,{message:le,isMyMessage:le.sender.toLowerCase()===c?.toLowerCase(),isCreatorMessage:C(le.sender),onReply:M,currentTheme:p,getTheme:F,isCreator:C,handleModeration:L,address:c},le.id))})]},X.id)),e.jsxs("div",{className:`
                      flex items-center mt-1 gap-2 text-xs
                      ${V?"justify-end":"justify-start"}
                    `,children:[e.jsx("div",{className:"flex items-center gap-1",children:!W&&e.jsx("span",{className:`
                            px-2 py-0.5 rounded-full
                            ${F(p).address.bg}
                            ${F(p).address.text}
                          `,children:Na(I.sender)})}),e.jsx("span",{className:F(p).time,children:R(I.messages[I.messages.length-1].timestamp)})]})]})]})},I.id)})}),e.jsx("div",{ref:m})]}),e.jsxs("form",{onSubmit:j,className:`
          sticky bottom-0
          relative p-4 border-t border-gray-200 dark:border-gray-700 
          ${F(p).header}
          ${A?"pt-2 pb-3":"py-4"}
          transition-all duration-200
          bg-inherit
        `,children:[A&&e.jsx(kl,{replyTo:A,onClose:()=>N(null)}),e.jsxs("div",{className:"relative flex items-start",children:[e.jsxs("div",{ref:y,className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>i(!o),className:`
                p-2 transition-colors self-start
                ${F(p).input.text} 
                hover:text-[#00ffbd]
              `,disabled:d,children:e.jsx(xo,{className:"w-5 h-5"})}),e.jsx(Je,{children:o&&e.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-full mb-2 left-0",children:e.jsx("div",{className:"bg-gray-800 rounded-lg shadow-xl border border-gray-700",children:e.jsx("div",{className:"relative",onClick:I=>I.stopPropagation(),children:e.jsx(ho,{onEmojiClick:E,theme:"dark",width:280,height:350,lazyLoadEmojis:!0,searchPlaceHolder:"Search emoji...",previewConfig:{showPreview:!1},skinTonesDisabled:!0,categories:["smileys_people","animals_nature","food_drink","travel_places","activities","objects","symbols","flags"],style:{"--epr-bg-color":"#1a1b1f","--epr-category-label-bg-color":"#2d2e35","--epr-hover-bg-color":"#2d2e35","--epr-search-border-color":"#2d2e35","--epr-border-radius":"0.5rem","--epr-category-label-text-color":"#ffffff80","--epr-scrollbar-width":"8px","--epr-scrollbar-track-color":"transparent","--epr-scrollbar-thumb-color":"rgba(255, 255, 255, 0.2)","--epr-scrollbar-thumb-hover-color":"rgba(255, 255, 255, 0.3)"}})})})})})]}),e.jsx("textarea",{ref:f,rows:"1",value:s,onChange:I=>{r(I.target.value.slice(0,500)),O()},onKeyDown:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),j(I))},autoFocus:!0,onFocus:I=>I.target.select(),placeholder:d?"Sending...":"Type a message...",className:`
              flex-1 rounded-lg px-4 py-2 ml-2 
              focus:outline-none focus:ring-2 focus:ring-[#00ffbd] 
              resize-none overflow-hidden min-h-[40px] max-h-[150px]
              custom-scrollbar transition-all duration-200
              ${F(p).input.bg}
              ${F(p).input.text}
              placeholder:${F(p).input.placeholder}
            `,disabled:d}),e.jsx("button",{type:"submit",className:`
              p-2 ml-2 transition-colors self-start mt-1
              ${F(p).input.text}
              hover:text-[#00ffbd]
              disabled:opacity-50 disabled:cursor-not-allowed
            `,disabled:!s.trim()||d,children:e.jsx(fo,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:`
          mt-1 text-xs text-right
          ${F(p).time}
        `,children:[s.length,"/500"]})]}),e.jsx(vl,{show:S,onClose:()=>h(!1),bannedAddresses:g,onUnban:async I=>{try{const V=g.filter(W=>W!==I);await dr(n.contractAddress,V),v(V),G.success("User unbanned successfully")}catch(V){console.error("Error unbanning user:",V),G.error("Failed to unban user")}}})]})},Cl=[{label:"24h",value:"24h"},{label:"7d",value:"7d"},{label:"30d",value:"30d"},{label:"All",value:"all"}],El=["event TransferSingle(address indexed operator, address indexed from, address indexed to, uint256 id, uint256 value)","event TransferBatch(address indexed operator, address indexed from, address indexed to, uint256[] ids, uint256[] values)"],cr={moonwalker:"https://moonwalker-rpc.eu-north-2.gateway.fm",unichain:"https://sepolia.unichain.org","unichain-mainnet":"https://unichain.blockscout.com","monad-testnet":"testnet-rpc.monad.xyz"},Sl=(n,a)=>a===130?new wt("https://unichain.blockscout.com"):a===1301?new wt("https://sepolia.unichain.org"):n==="moonwalker"||a===1828369849?new wt(cr.moonwalker):n==="monad-testnet"||a===10143?new wt(cr["monad-testnet"]):new ne(window.ethereum),Al=(n,a)=>a===130?"https://unichain.blockscout.com":a===1301?"https://unichain-sepolia.blockscout.com":n==="moonwalker"||a===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":n==="monad-testnet"||a===10143?"https://monad-testnet.socialscan.io":n==="polygon"||a===137?"https://polygon.blockscout.com":"https://sepolia.etherscan.io",Ml=async(n,a,t)=>{try{const s=Sl(a,t),r=new _(n,El,s),o=await s.getBlockNumber(),i=Math.max(0,o-1e4);console.log("Fetching transfer events:",{network:a,chainId:t,address:n,fromBlock:i,currentBlock:o});const d=r.filters.TransferSingle(),u=r.filters.TransferBatch(),[c,m]=await Promise.all([r.queryFilter(d,i),r.queryFilter(u,i)]),x=c.map(y=>({timestamp:null,type:"ERC-1155",value:y.args.value.toString(),blockNumber:y.blockNumber})),f=m.flatMap(y=>y.args.values.map((k,w)=>({timestamp:null,type:"ERC-1155",value:k.toString(),blockNumber:y.blockNumber}))),p=[...x,...f],b=[...new Set(p.map(y=>y.blockNumber))],A=await Promise.all(b.map(y=>s.getBlock(y))),N=Object.fromEntries(A.map(y=>[y.number,y.timestamp*1e3]));return p.map(y=>({...y,timestamp:new Date(N[y.blockNumber])}))}catch(s){throw console.error("Error fetching transfer events:",s),s}},Il=async(n,a,t)=>{try{const s=Al(a,t);console.log("Using Blockscout URL:",s);const r=n?.toLowerCase(),o=`/api/v2/tokens/${r}`;console.log("Fetching token info from:",`${s}${o}`);const d=(await Ft.get(`${s}${o}`)).data;if(d.type==="ERC-1155")return{transfers:await Ml(n,a,t),tokenData:d};const u=`/api/v2/tokens/${r}/transfers`;return console.log("Fetching transfers from:",`${s}${u}`),{transfers:(await Ft.get(`${s}${u}`)).data.items||[],tokenData:d}}catch(s){return console.error(`Error fetching ${a} data:`,s),{transfers:[],tokenData:null}}},Fl=(n,a)=>{try{if(!n||n==="0")return"0";if(a?.type==="custom"||a?.type==="usdc"||a?.type==="usdt"){const r=Number(n);return isNaN(r)?"0":r.toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}const t=typeof n=="string"?n.replace(/[^0-9.]/g,""):n;return!t||isNaN(Number(t))?"0":parseFloat(t).toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}catch(t){return console.error("Error formatting value:",t,typeof n,n),"0"}},Ll=(n,a,t)=>{const s=new Date;let r;switch(a){case"24h":r=ai(s,24);break;case"7d":r=Xs(s,7);break;case"30d":r=Xs(s,30);break;default:r=new Date(0)}const o=new Map;return(Array.isArray(n)?n:[]).forEach(d=>{const u=si(new Date(d.timestamp));let c=0,m=0;try{if(d.type==="ERC-1155"?(c=Number(d.value),m=c*(t?.mintPrice?Number(t.mintPrice):0)):d.token?.type==="ERC-721"&&(c=1,m=t?.mintPrice?Number(t.mintPrice):0),ri(u,{start:r,end:s})){const x=o.get(u.getTime())||{volume:0,transactions:0,ethVolume:0};o.set(u.getTime(),{volume:x.volume+c,transactions:x.transactions+1,ethVolume:x.ethVolume+m})}}catch(x){console.error("Error processing transfer:",x,d)}}),Array.from(o.entries()).map(([d,u])=>({date:new Date(d),volume:u.volume,transactions:u.transactions,ethVolume:Fl(u.ethVolume,t?.mintToken)})).sort((d,u)=>d.date-u.date)},Pl=({active:n,payload:a,label:t,collection:s,tokenLogo:r})=>{if(n&&a&&a.length){const o=()=>{const d=s?.mintToken?.address?.toLowerCase();return d==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):!d||d==="0x0000000000000000000000000000000000000000"?s?.network==="moonwalker"||s?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):s?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"inline-block w-4 h-4 mr-1"}):s?.network==="monad-testnet"||s?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"inline-block w-4 h-4 mr-1"}):e.jsx(et,{className:"inline mr-1"}):s?.mintToken?.type==="custom"&&r?e.jsx("img",{src:r,alt:"Token",className:"inline-block w-4 h-4 mr-1 rounded-full",onError:c=>{c.target.onerror=null,c.target.src="/placeholder.png"}}):e.jsx(et,{className:"inline mr-1"})},i=()=>{const d=s?.mintToken?.address?.toLowerCase();return d==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?"ZERO":!d||d==="0x0000000000000000000000000000000000000000"?s?.network==="moonwalker"||s?.chainId===1828369849?"ZERO":s?.network==="polygon"?"POL":s?.network==="monad-testnet"||s?.chainId===10143?"MON":"ETH":s?.mintToken?.type==="custom"?s.mintToken.symbol:"ETH"};return e.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-[#1a1b1f] border border-gray-700 rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"text-white font-medium mb-1",children:Kr(new Date(t),"MMM dd, yyyy")}),e.jsxs("p",{className:"text-[#00ffbd] text-sm",children:["Volume: ",a[0].value.toLocaleString()," NFTs"]}),e.jsxs("p",{className:"text-gray-400 text-sm flex items-center",children:[o(),a[0].payload.ethVolume," ",i()]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Transactions: ",a[0].payload.transactions]})]})}return null};function Dl({contractAddress:n,network:a}){const[t,s]=l.useState([]),[r,o]=l.useState(!0),[i,d]=l.useState(null),[u,c]=l.useState("24h");mn();const{symbol:m}=Ns(),[x,f]=l.useState(null),[p,b]=l.useState(null);l.useEffect(()=>{n&&m&&(async()=>{try{o(!0),d(null);const v=await As(m);f(v);const S=v?.chainId;console.log("Loading volume data for:",{network:a,chainId:S,contractAddress:n});const{transfers:h,tokenData:T}=await Il(n,a,S);if(h&&h.length>0){const C=Ll(h,u,v);s(C)}else s([]);if(v?.mintToken?.address){const C=await Ze(v.mintToken.address);C?.logo&&b(C.logo)}}catch(v){console.error("Error loading volume metrics:",v),d(v.message)}finally{o(!1)}})()},[n,a,u,m]);const A=()=>{const g=x?.mintToken?.address?.toLowerCase();return g==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):!g||g==="0x0000000000000000000000000000000000000000"?x?.network==="moonwalker"||x?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):x?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"inline-block w-4 h-4 mr-1"}):x?.network==="monad-testnet"||x?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"inline-block w-4 h-4 mr-1"}):e.jsx(et,{className:"inline mr-1"}):x?.mintToken?.type==="custom"&&p?e.jsx("img",{src:p,alt:"Token",className:"inline-block w-4 h-4 mr-1 rounded-full",onError:S=>{S.target.onerror=null,S.target.src="/placeholder.png"}}):e.jsx(et,{className:"inline mr-1"})},N=t.reduce((g,v)=>g+v.volume,0),y=t.reduce((g,v)=>g+Number(v.ethVolume.replace(/,/g,"")),0),k=t.reduce((g,v)=>g+v.transactions,0),w=k>0?N/k:0;return a==="monad-testnet"||x?.chainId===10143?e.jsx("div",{className:"flex items-center justify-center py-12 bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Volume metrics for Monad Testnet are under development."})]})}):r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end space-x-2",children:Cl.map(g=>e.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(g.value),className:`px-3 py-1 rounded-lg text-sm transition-colors ${u===g.value?"bg-[#00ffbd] text-black font-medium":"bg-white/10 dark:bg-[#1a1b1f] text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:g.label},g.value))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Market Cap"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[A(),x?.mintPrice&&N?(N*Number(x.mintPrice)).toFixed(4):"0.0000"]})]}),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Total Volume"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[N.toLocaleString()," NFTs"]})]}),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsxs("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:[(()=>{const g=x?.mintToken?.address?.toLowerCase();return g==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?"ZERO":!g||g==="0x0000000000000000000000000000000000000000"?x?.network==="moonwalker"||x?.chainId===1828369849?"ZERO":x?.network==="polygon"?"POL":x?.network==="monad-testnet"||x?.chainId===10143?"MON":"ETH":x?.mintToken?.type==="custom"?x.mintToken.symbol:"ETH"})()," Volume"]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[A(),y.toFixed(4)]})]}),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.toLocaleString()})]}),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Avg. Per Transaction"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[w.toFixed(2)," NFTs"]})]})]}),e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-4",children:"Volume"}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Wa,{width:"100%",height:"100%",children:e.jsxs(tn,{data:t,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"volumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#00ffbd",stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:"#00ffbd",stopOpacity:0})]})}),e.jsx(pi,{strokeDasharray:"3 3",stroke:"#2d2f36"}),e.jsx(en,{dataKey:"date",tickFormatter:g=>Kr(g,u==="24h"?"HH:mm":"MMM dd"),stroke:"#4b5563",tick:{fill:"#4b5563"}}),e.jsx(gi,{stroke:"#4b5563",tickFormatter:g=>`${g} NFTs`,tick:{fill:"#4b5563"}}),e.jsx(Ha,{content:e.jsx(Pl,{collection:x,tokenLogo:p})}),e.jsx(an,{type:"monotone",dataKey:"volume",stroke:"#00ffbd",strokeWidth:2,fill:"url(#volumeGradient)",animationDuration:1e3,animationBegin:0})]})})})]}),t.length===0&&e.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No volume data available"})})]})}const Bl=[{id:"recent",label:"🔥 Recent Mints"},{id:"holders",label:"👑 Top Holders"},{id:"chat",label:"💬 Chat"},{id:"volume",label:"📈 Volume"}],xn=document.createElement("style");xn.textContent=`
  @keyframes float {
    0%, 100% { transform: translate(-50%, -50%) translateY(0px); }
    50% { transform: translate(-50%, -50%) translateY(-10px); }
  }
  @keyframes blink {
    0%, 95%, 100% { transform: scaleY(1); }
    97.5% { transform: scaleY(0); }
  }
  @keyframes tailWag {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(20deg); }
    75% { transform: rotate(-20deg); }
  }
  @keyframes legSwing {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(15deg); }
  }
  @keyframes whiskerMove {
    0%, 100% { transform: rotate(var(--rotate, 0deg)); }
    50% { transform: rotate(calc(var(--rotate, 0deg) + 5deg)); }
  }
  @keyframes earTwitch {
    0%, 90%, 100% { transform: rotate(var(--rotate, 0deg)); }
    95% { transform: rotate(calc(var(--rotate, 0deg) + 5deg)); }
  }
`;document.head.appendChild(xn);function Rl({collection:n}){const[a,t]=l.useState("recent");return n?.contractAddress&&(window.collectionData=n),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto hide-scrollbar",children:Bl.map(s=>e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>t(s.id),className:`
                px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap
                transition-all duration-200 relative group
                ${a===s.id?"text-[#00ffbd] bg-[#00ffbd]/10":"text-gray-500 dark:text-gray-400 bg-white dark:bg-[#1a1b1f] hover:bg-gray-50 dark:hover:bg-[#1a1b1f]/80"}
                border border-gray-100 dark:border-gray-800
              `,children:[a===s.id&&e.jsx("div",{className:"absolute inset-0 rounded-lg bg-[#00ffbd]/5 blur-xl -z-10"}),e.jsx("span",{className:"relative z-10",children:s.label}),e.jsx("div",{className:`
                absolute bottom-0 left-0 right-0 h-0.5 rounded-full
                transition-all duration-200
                ${a===s.id?"bg-[#00ffbd]":"bg-transparent group-hover:bg-[#00ffbd]/30"}
              `})]}),s.comingSoon&&e.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:["Coming Soon",e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-full w-2 h-2 bg-gray-900 rotate-45"})]})]},s.id))}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(s=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${s*.2}s`}},s))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#1a1b1f] rounded-xl",children:e.jsxs("div",{className:"p-6 h-[400px] md:h-[600px]",children:[a==="recent"&&e.jsx(ul,{}),a==="holders"&&e.jsx(hl,{collection:n}),a==="chat"&&e.jsx(Tl,{collection:{...n,creator:n.creator||n.creatorAddress,contractAddress:n.contractAddress}}),a==="volume"&&e.jsx(Dl,{contractAddress:n?.contractAddress,network:n?.network})]})})]})]})}const us=n=>/^0x[a-fA-F0-9]{40}$/.test(n);function Ol({targetDate:n}){const[a,t]=l.useState(s());function s(){const r=+new Date(n)-+new Date;let o={};return r>0&&(o={days:Math.floor(r/(1e3*60*60*24)),hours:Math.floor(r/(1e3*60*60)%24),minutes:Math.floor(r/1e3/60%60),seconds:Math.floor(r/1e3%60)}),o}return l.useEffect(()=>{const r=setInterval(()=>{t(s())},1e3);return()=>clearInterval(r)},[n]),Object.keys(a).length===0?null:e.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:Object.entries(a).map(([r,o])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-xl font-bold text-[#00ffbd]",children:String(o).padStart(2,"0")}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:r})]},r))})}function _l({endDate:n,infiniteMint:a}){const[t,s]=l.useState(r());function r(){if(a)return null;const o=new Date().getTime(),d=new Date(n).getTime()-o;return d<=0?null:{days:Math.floor(d/(1e3*60*60*24)),hours:Math.floor(d/(1e3*60*60)%24),minutes:Math.floor(d/1e3/60%60),seconds:Math.floor(d/1e3%60)}}return l.useEffect(()=>{if(a)return;const o=setInterval(()=>{s(r())},1e3);return()=>clearInterval(o)},[n,a]),a||!t?null:e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Mint Ends In"})}),e.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:Object.entries(t).map(([o,i])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-xl font-bold text-[#00ffbd]",children:String(i).padStart(2,"0")}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:o})]},o))})]})}function Wl({userMintedAmount:n,maxPerWallet:a}){const t=a-n;return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:["You can mint ",t," more NFT",t!==1?"s":""]})}const pa={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingMetadata:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),Minting:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},Hl=({isOpen:n,onClose:a,currentStep:t,error:s})=>{const r=[{key:"preparing",label:"Preparing Transaction",icon:pa.Preparing},{key:"uploading",label:"Preparing Mint",icon:pa.UploadingMetadata},{key:"minting",label:"Minting NFT",icon:pa.Minting},{key:"completed",label:"Minting Completed",icon:pa.Completed}],o=r.findIndex(u=>u.key===t),i=!!s,d=u=>u?.includes("user rejected action")?"Transaction was rejected. Please try again.":u?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":u?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:i?"Error Minting NFT":"Minting NFT"}),e.jsx("div",{className:"space-y-4",children:r.map((u,c)=>{const m=u.icon,x=c===o,f=!i&&c<o,p=i&&c===o;return e.jsxs("div",{className:Et("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":x&&!p,"text-[#00ffbd]":f,"bg-red-500/10 text-red-500":p,"text-gray-400":!x&&!f&&!p}),children:[e.jsx(m,{}),e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.label})}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},u.key)})}),i&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pa.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:d(s)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-[#00ffbd] font-medium",children:"NFT minted successfully!"})})]})})})})]})})},Ul=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Minting Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4,5].map(d=>e.jsx("button",{onMouseEnter:()=>i(d),onMouseLeave:()=>i(0),onClick:()=>{r(d),t(d),setTimeout(a,500)},className:"p-1 transition-transform hover:scale-110",children:e.jsx("svg",{className:`w-8 h-8 ${d<=(o||s)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"} transition-colors`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},d))}),e.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:[o===1&&"Could be better",o===2&&"It's okay",o===3&&"Good",o===4&&"Great",o===5&&"Excellent!"]})]})})})})]})})};function Kc(){const{symbol:n}=Ns(),a=ua(),[t,s]=l.useState(1),[r,o]=l.useState(null),[i,d]=l.useState(!0),[u,c]=l.useState("");l.useState(null);const[m,x]=l.useState(null);l.useState(0);const[f,p]=l.useState(0),[b,A]=l.useState(0),[N,y]=l.useState(0),[k,w]=l.useState(null),[g,v]=l.useState(!1),[S,h]=l.useState(!1),[T,C]=l.useState(null),[H,M]=l.useState(null),[j,E]=l.useState({}),[R,O]=l.useState(null),[D,Z]=l.useState(!1),[F,L]=l.useState(null),[I,V]=l.useState(null),[W,X]=l.useState(!1),[ae,le]=l.useState(!1),[xe,be]=l.useState({width:window.innerWidth,height:window.innerHeight});l.useEffect(()=>{(async()=>{if(window.ethereum){const de=await window.ethereum.request({method:"eth_chainId"}),fe=parseInt(de,16);console.log("Current Chain ID:",fe),console.log("Current Network:",r?.network),O(fe)}})();const ue=de=>{O(parseInt(de,16))};return window.ethereum?.on("chainChanged",ue),()=>{window.ethereum?.removeListener("chainChanged",ue)}},[]),l.useEffect(()=>{r?.contractAddress&&m?(async()=>{try{const ue=new ne(window.ethereum),de=new _(r.contractAddress,r.type==="ERC1155"?yt.ERC1155Royalty:yt.ERC721Royalty,ue);if(r.type==="ERC1155"){const[fe,he]=await Promise.all([de.totalSupply(),de.mintedPerWallet(m)]);y(Number(fe)),A(Number(he))}else{const fe=r.network==="unichain-mainnet"||r.network==="unichain"?{gasLimit:1e6}:r.network==="monad-testnet"?{gasLimit:5e6}:{},[he,Se]=await Promise.all([de.totalSupply(fe),de.mintedPerWallet(m,fe)]);y(Number(he)),A(Number(Se))}}catch(ue){console.error("Error loading contract data:",ue),A(0)}})():A(0)},[m,r?.contractAddress]),l.useEffect(()=>{m||A(0)},[m]);const ge=f>0?N/f*100:0;l.useEffect(()=>{(async()=>{try{const ue=await As(n);if(!ue){Pe.error("Collection not found"),a("/");return}o(ue),d(!1)}catch(ue){console.error("Error loading collection:",ue),Pe.error("Error loading collection data")}})()},[n,a]),l.useEffect(()=>{(async()=>{if(window.ethereum){const fe=await(await new ne(window.ethereum).getSigner()).getAddress();x(fe)}})()},[]),l.useEffect(()=>{if(!n)return;const te=Ri(n,ue=>{o(ue),y(ue.totalMinted||0)});return()=>te()},[n]),l.useEffect(()=>{if(!r){p(0);return}if(r.network==="unichain-mainnet"||r.network==="unichain"||r.network==="moonwalker"){p(Number(r.maxSupply)||0);return}r.contractAddress?(async()=>{try{const ue=new ne(window.ethereum),fe=await new _(r.contractAddress,r.type==="ERC1155"?yt.ERC1155Royalty:yt.ERC721Royalty,ue).config();p(Number(fe.maxSupply)||0)}catch{p(Number(r.maxSupply)||0)}})():p(Number(r.maxSupply)||0)},[r]),l.useEffect(()=>{if(window.ethereum){const te=new ne(window.ethereum);w(te)}},[]),l.useEffect(()=>{(async()=>{if(r?.contractAddress&&window.ethereum)try{const ue=r.mintToken;ue&&ue.type==="custom"?M({address:ue.address,symbol:ue.symbol||r.customTokenSymbol||"TOKEN",decimals:18,isNative:!1}):M({address:va,symbol:r.network==="polygon"?"POL":r.network==="moonwalker"?"ZERO":"ETH",decimals:18,isNative:!0})}catch{}})()},[r?.contractAddress,r?.network]),l.useEffect(()=>{(async()=>{if(r?.mintToken?.address)try{const ue=await Ze(r.mintToken.address);console.log("Token Deployment Result:",ue),ue?.logo&&E(de=>({...de,[r.mintToken.address.toLowerCase()]:ue.logo}))}catch(ue){console.error("Error fetching token logo:",ue)}})()},[r?.mintToken?.address]);const ve=()=>{const te=r?.mintToken?.address?.toLowerCase();if(!te||te==="0x0000000000000000000000000000000000000000")return r?.network==="moonwalker"||r?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"}):r?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}):r?.network==="monad-testnet"||r?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}):r?.network==="unichain-mainnet"||r?.network==="unichain"?e.jsx(et,{className:"w-5 h-5 text-[#00ffbd]"}):e.jsx(et,{className:"w-5 h-5 text-[#00ffbd]"});if(te==="0xf4a67fd6f54ff994b7df9013744a79281f88766e")return e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"});const de=j[te];return de?e.jsx("img",{src:de,alt:r.mintToken.symbol||"Token",className:"w-5 h-5 rounded-full",onError:fe=>{fe.target.onerror=null,fe.target.src="/token-default.png"}}):e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-5 h-5 rounded-full"})};if(l.useEffect(()=>{const te=()=>{be({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]),i||!r)return e.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"min-h-screen bg-inherit",children:[e.jsx("div",{className:"relative h-[300px] sm:h-[400px] bg-gradient-to-br from-gray-100/5 to-gray-200/5 dark:from-gray-800/10 dark:to-gray-700/10",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-50 dark:from-[#0a0b0f] to-transparent"})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-32 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white dark:bg-[#0a0b0f] p-6 rounded-lg border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-8 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-1/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-5/6 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-4/6 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(te=>e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"},te))})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white dark:bg-[#0a0b0f] p-6 rounded-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"h-12 w-full bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse mb-6"}),e.jsx("div",{className:"h-48 w-full bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse mb-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-2 w-full bg-gray-200 dark:bg-gray-800 rounded-full animate-pulse"})]})]})})]})})]});const P=async()=>{try{if(!m){L("error"),Z(!0),V("Please connect your wallet first");return}L("preparing"),Z(!0),V(null),L("preparing");const ue=await(await fetch(r.previewUrl)).blob(),de=new File([ue],"artwork.png",{type:"image/png"}),{metadataUrl:fe}=await dn({...r,name:r.name,description:r.description,attributes:r.attributes||[],website:r.website,background_color:r.background_color},de),he=fe.replace("ipfs://","").trim(),Se=await k.getSigner();let $;try{r.mintToken?.type==="custom"?$=BigInt(Math.floor(Number(r.mintPrice)*Math.pow(10,r.mintToken.decimals||18))):$=qt(r.mintPrice.toString())}catch{$=BigInt(0)}const K=$*BigInt(t);L("minting");const ce=new _(r.contractAddress,r.type==="ERC1155"?yt.ERC1155Royalty:yt.ERC721Royalty,Se);let ye;r.type==="ERC1155"?r.mintToken?.type==="custom"?(await(await new _(r.mintToken.address,["function approve(address spender, uint256 amount) public returns (bool)"],Se).approve(r.contractAddress,K)).wait(),ye=await ce.mint(0,t,he)):ye=await ce.mint(0,t,he,{value:K}):r.mintToken?.type==="custom"?(await(await new _(r.mintToken.address,["function approve(address spender, uint256 amount) public returns (bool)"],Se).approve(r.contractAddress,K)).wait(),ye=await ce.mint(t,he)):ye=await ce.mint(t,he,{value:K,gasLimit:r.network==="unichain"?1e6*t:5e5*t});const Ne=await ye.wait(),[z,me]=await Promise.all([ce.totalSupply(),ce.mintedPerWallet(m)]);y(Number(z)),A(Number(me)),await Bi(n,Number(z));let pe="0",Fe="0";try{if(r.mintPrice){Fe=parseFloat(r.mintPrice).toFixed(6);const Ae=Ve(K);pe=parseFloat(Ae).toFixed(6)}}catch{}const Ee=await k.getNetwork(),Ce=Number(Ee.chainId);await Oi({collectionAddress:r.contractAddress,minterAddress:m,tokenId:r.type==="ERC1155"?"0":String(z),quantity:String(t),hash:Ne.hash,image:r.previewUrl,value:pe,type:r.type,name:r.name,symbol:r.symbol,artworkType:r.artworkType||"image",network:Ce===130?"unichain-mainnet":Ce===1301?"unichain":Ce===137?"polygon":Ce===1828369849?"moonwalker":Ce===10143?"monad-testnet":"sepolia",mintPrice:Fe,paymentToken:r.mintToken||null}),L("completed"),X(!0),setTimeout(()=>{Z(!1),L(null),V(null),setTimeout(()=>{le(!0)},1e3),setTimeout(()=>{X(!1)},3e4)},2e3)}catch(te){console.error("Minting error:",te),L("error"),V(te.message||"Transaction failed")}},J=Date.now(),re=new Date(r.releaseDate),U=J>=re,q=async()=>{if(!us(u)){Pe.error("Invalid wallet address");return}try{const te=r.whitelistAddresses||[],ue=u.toLowerCase(),de=te.find(Se=>{if(!Se)return!1;const $=typeof Se=="object"?Se.address:Se;return $&&$.toLowerCase()===ue}),fe=!!de,he=de&&typeof de=="object"?de.maxMint:1;if(v(!0),h(fe),C(de),fe?Pe.success(`Address is whitelisted! Can mint up to ${he} NFTs`):Pe.error("Address is not whitelisted"),r.contractAddress&&k){const Se=new _(r.contractAddress,r.type==="ERC1155"?yt.ERC1155Royalty:yt.ERC721Royalty,k);try{const[$,K]=await Promise.all([Se.whitelist(u),Se.whitelistMintLimit(u)]);console.log("On-chain whitelist status:",{isWhitelisted:$,mintLimit:K.toString()}),$!==fe&&console.warn("Whitelist status mismatch between local and contract"),K.toString()!==he.toString()&&console.warn("Whitelist mint limit mismatch between local and contract")}catch($){console.warn("Contract whitelist check failed:",$)}}}catch(te){console.error("Error checking whitelist:",te),Pe.error("Error checking whitelist status")}},ee=()=>r?.mintPrice?e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[ve(),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.mintPrice})]})]}):null,ke=()=>{const te=Date.now(),ue=new Date(r.releaseDate),de=r.mintEndDate?new Date(r.mintEndDate):null,fe=!r.infiniteMint&&de&&te>=de,he=te<ue,Se=r.network==="unichain-mainnet"||r.chainId===130?130:r.network==="unichain"?1301:r.network==="sepolia"?11155111:r.network==="moonwalker"||r.chainId===1828369849?1828369849:r.network==="monad-testnet"||r.chainId===10143?10143:r.network==="polygon"?137:null,$=R&&R!==Se,K=r.network==="unichain-mainnet"||r.chainId===130?"Unichain Mainnet":r.network==="unichain"?"Unichain Testnet":r.network==="sepolia"?"Sepolia":r.network==="moonwalker"||r.chainId===1828369849?"MoonWalker":r.network==="monad-testnet"||r.chainId===10143?"Monad Testnet":r.network==="polygon"?"Polygon":"Unknown Network";return e.jsxs("div",{className:"flex flex-col gap-2",children:[he&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Minting Starts In"})}),e.jsx(Ol,{targetDate:ue})]}),!r.infiniteMint&&U&&!fe&&e.jsx(_l,{endDate:r.mintEndDate,infiniteMint:r.infiniteMint}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-4 border border-gray-200 dark:border-gray-800",children:[e.jsx("button",{onClick:()=>s(Math.max(1,t-1)),className:"p-2 rounded-lg bg-white dark:bg-[#1a1b1f] text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!U||t<=1||r.enableWhitelist&&(!g||!S),children:e.jsx(yo,{size:24})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white min-w-[60px] text-center",children:t}),e.jsx("button",{onClick:()=>{const ye=(r.enableWhitelist&&T?T.maxMint||1:r.maxPerWallet)-b;s(Math.min(ye,t+1))},className:"p-2 rounded-lg bg-white dark:bg-[#1a1b1f] text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!U||(r.enableWhitelist?!g||!S||b>=(T?.maxMint||1)||t>=(T?.maxMint||1)-b:b>=r.maxPerWallet||t>=r.maxPerWallet-b),children:e.jsx(wo,{size:24})})]}),m&&e.jsx(Wl,{userMintedAmount:b,maxPerWallet:r.enableWhitelist?T?.maxMint||1:r.maxPerWallet}),e.jsx("button",{onClick:P,disabled:he||fe||$||(r.enableWhitelist?!g||!S||b>=(T?.maxMint||1):b>=r.maxPerWallet)||t===0,className:`w-full py-3 ${he||fe?"bg-gray-400 cursor-not-allowed":$?"bg-yellow-500 hover:bg-yellow-600 text-black":r.enableWhitelist&&(!g||!S)?"bg-gray-200 dark:bg-[#1a1b1f] text-gray-900 dark:text-white":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"} disabled:opacity-50 disabled:cursor-not-allowed font-bold rounded-lg text-lg transition-colors`,children:m?he?"Minting Not Live Yet":fe?"Minting Ended":$?`Switch to ${K} Network`:r.enableWhitelist&&!g?"Check Whitelist Status":r.enableWhitelist&&!S?"Not Whitelisted":"Mint Now":"Connect Wallet"})]})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] overflow-x-hidden",children:[e.jsxs("div",{className:"relative h-[300px] sm:h-[400px] bg-gradient-to-br from-[#00ffbd]/5 to-[#00e6a9]/5 dark:from-[#00ffbd]/10 dark:to-[#00e6a9]/10",children:[r.artworkType==="video"?e.jsx("video",{src:r.previewUrl||it(r.imageIpfsUrl),className:"w-full h-full object-cover opacity-20 dark:opacity-30",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsx("img",{src:r.previewUrl||it(r.imageIpfsUrl),alt:r.name,className:"w-full h-full object-cover opacity-20 dark:opacity-30"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-50 dark:from-[#0a0b0f] to-transparent"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-32 relative z-10 pb-12",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(te=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${te*.2}s`}},te))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[e.jsxs("div",{className:"flex gap-6 mb-6",children:[e.jsx("div",{className:"flex-1",children:r.artworkType==="video"?e.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden border-2 border-[#00ffbd]",children:e.jsx("video",{src:r.previewUrl||it(r.imageIpfsUrl),className:"w-full h-full object-cover",controls:!0,playsInline:!0})}):e.jsx("img",{src:r.previewUrl||it(r.imageIpfsUrl),alt:r.name,className:"w-full aspect-square rounded-xl object-cover border-2 border-[#00ffbd]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-4",children:[e.jsx("span",{children:r.symbol}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.symbol),Pe.success("Symbol copied!")},className:"hover:text-[#00ffbd] transition-colors",children:e.jsx(Ta,{size:16})})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:r.description})]})]}),e.jsx("div",{className:"mb-6 pt-4 border-t border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex gap-4",children:[r.website&&e.jsx("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(bo,{size:20})}),r.socials?.twitter&&e.jsx("a",{href:`https://twitter.com/${r.socials.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(Br,{size:20})}),r.socials?.discord&&e.jsx("a",{href:r.socials.discord,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(Rr,{size:20})}),r.socials?.telegram&&e.jsx("a",{href:r.socials.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(Dr,{size:20})})]})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:r.attributes?.map((te,ue)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-2.5 border border-gray-200 dark:border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-0.5",children:te.trait_type}),e.jsx("p",{className:"text-sm font-medium text-[#00ffbd]",children:typeof te.value=="number"?te.value.toString():te.value})]},ue))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(te=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${te*.2}s`}},te))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[ee(),r.enableWhitelist&&e.jsxs("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-[#0d0e12] rounded-lg border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-semibold",children:"Whitelist Checker"}),g&&S&&e.jsx("span",{className:"text-xs bg-[#00ffbd]/10 text-[#00ffbd] px-2 py-1 rounded-full",children:"Whitelisted"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter your wallet address",value:u,onChange:te=>c(te.target.value),className:"flex-1 bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 rounded-lg px-3 py-2 text-gray-900 dark:text-white text-sm focus:outline-none focus:border-[#00ffbd]"}),e.jsx("button",{onClick:q,disabled:!u||!us(u),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-colors ${u&&us(u)?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-200 dark:bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:"Check"})]}),g&&e.jsx("div",{className:`mt-3 p-3 rounded-lg ${S?"bg-[#00ffbd]/10 border border-[#00ffbd]/20":"bg-red-500/10 border border-red-500/20"}`,children:S?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-[#00ffbd]",children:[e.jsx("span",{className:"mr-2",children:"✓"}),"Address is whitelisted"]}),T&&typeof T=="object"&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["You can mint up to ",T.maxMint," NFTs during the whitelist phase"]})]}):e.jsxs("div",{className:"flex items-center text-sm text-red-500",children:[e.jsx("span",{className:"mr-2",children:"✗"}),"Address is not whitelisted"]})})]}),ke(),e.jsxs("div",{className:"flex items-center justify-between text-center mt-4",children:[r.creatorAddress&&e.jsxs("div",{className:"group relative",children:[e.jsx("a",{href:`${r.network==="polygon"?"https://polygonscan.com":r.network==="unichain-mainnet"||r.chainId===130?"https://unichain.blockscout.com":r.network==="unichain"?"https://unichain-sepolia.blockscout.com":r.network==="moonwalker"||r.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":r.network==="monad-testnet"||r.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io"}/address/${r.creatorAddress}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-600 hover:text-[#00ffbd] dark:text-gray-400 dark:hover:text-[#00ffbd] transition-colors",children:"Creator Address"}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:r.creatorAddress})]}),e.jsxs("div",{className:"group relative",children:[e.jsx("a",{href:`${r.network==="polygon"?"https://polygonscan.com":r.network==="unichain-mainnet"||r.chainId===130?"https://unichain.blockscout.com":r.network==="unichain"?"https://unichain-sepolia.blockscout.com":r.network==="moonwalker"||r.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":r.network==="monad-testnet"||r.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io"}/address/${r.contractAddress}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-600 hover:text-[#00ffbd] dark:text-gray-400 dark:hover:text-[#00ffbd] transition-colors",children:"Contract Address"}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:r.contractAddress})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[N,"/",f," Minted"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-[#0d0e12] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#00ffbd] transition-all duration-500",style:{width:`${Math.min(ge,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-4 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Max Per Wallet"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.enableWhitelist?e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check your mint cap in whitelist checker above"}):r.maxPerWallet})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-4 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Supply"}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f})]})]})]})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Collection Analytics"}),e.jsx(il,{children:e.jsx(Rl,{collection:r})})]})]}),W&&e.jsx(pt,{width:xe.width,height:xe.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(Hl,{isOpen:D,onClose:()=>{Z(!1),L(null)},currentStep:F,error:I}),e.jsx(Ul,{isOpen:ae,onClose:()=>le(!1),onRate:te=>{console.log("User rated minting experience:",te)}})]})}const hn=[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:oe.WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:oe.USDC,symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:oe.USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],$l=`
  .token-list-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .token-list-scrollbar::-webkit-scrollbar-track {
    background: #2d2f36;
    border-radius: 3px;
  }
  .token-list-scrollbar::-webkit-scrollbar-thumb {
    background: #00ffbd;
    border-radius: 3px;
  }
  .token-list-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #00ffbd #2d2f36;
  }
`;function ur({token:n,userAddress:a,onSelect:t,isSelected:s}){const[r,o]=l.useState("0");l.useEffect(()=>{(async()=>{if(!(!a||!n))try{const u=new ne(window.ethereum);let c,m;if(n.address==="ETH")c=await u.getBalance(a),m=18;else{const p=new _(n.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],u);try{m=await p.decimals()}catch{m=18}const b=p.interface.encodeFunctionData("balanceOf",[a]),A=await u.call({to:n.address,data:b});c=Qr(A)}const x=Number(Y(c,m)),f=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:n.symbol==="USDC"?2:6}).format(x);o(f)}catch(u){console.error(`Error fetching balance for ${n.symbol}:`,u),o("0")}})()},[n,a]);const i=()=>{const d=hn.find(c=>c.address===n.address);if(d)return e.jsx("img",{src:d.logo,alt:d.symbol,className:"w-8 h-8 rounded-full"});const u=n.logo||(n.logoIpfs?it(n.logoIpfs):null);return u?e.jsx("img",{src:u,alt:n.symbol,className:"w-8 h-8 rounded-full",onError:c=>{c.target.onerror=null,c.target.src="/token-default.png"}}):e.jsx("img",{src:"/token-default.png",alt:n.symbol||"Unknown",className:"w-8 h-8 rounded-full"})};return e.jsxs("button",{onClick:()=>t(n),className:`w-full flex items-center justify-between p-3 hover:bg-gray-100 dark:hover:bg-[#2d2f36] rounded-xl transition-colors ${s?"bg-[#00ffbd]/10 border-[#00ffbd] border":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i(),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:n.symbol||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:n.name||"Unknown Token"})]})]}),e.jsx("div",{className:"text-right text-sm text-gray-900 dark:text-white",children:r})]})}function za({isOpen:n,onClose:a,onSelect:t,selectedTokenAddress:s}){const{address:r}=Le();Bt();const[o,i]=l.useState(""),[d,u]=l.useState(null),[c,m]=l.useState(!1),[x,f]=l.useState(""),[p,b]=l.useState(0),[A,N]=l.useState([]),[y,k]=l.useState([]);l.useEffect(()=>{(async()=>{if(!(!n||!r))try{m(!0);const S=await _i();console.log("Fetched deployed tokens:",S);const h=S.map(j=>({address:j.address,symbol:j.symbol,name:j.name,decimals:j.decimals||18,logo:j.logo,logoIpfs:j.logoIpfs,artworkType:j.artworkType,verified:!0}));N(h);const T=new ne(window.ethereum),C=async j=>{try{if(j.address==="ETH"){const F=await T.getBalance(r),L=Y(F,18);return{...j,formattedBalance:L}}if(await T.getCode(j.address)==="0x")return null;const R=new _(j.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)"],T),[O,D]=await Promise.all([R.balanceOf(r),R.decimals().catch(()=>18)]),Z=Y(O,D);return{...j,formattedBalance:Z}}catch(E){return console.error(`Error checking token ${j.symbol}:`,E),{...j,formattedBalance:"0"}}},M=(await Promise.all([...hn,...h].map(C))).filter(j=>j!==null);console.log("All tokens with balances:",M),k(M)}catch(S){console.error("Error fetching deployed tokens:",S)}finally{m(!1)}})()},[n,r]),l.useEffect(()=>{n&&(i(""),u(null),f(""),b(v=>v+1))},[n]),l.useEffect(()=>{const S=setTimeout(async()=>{if(!o||o.length<42){u(null),f("");return}if(!mt(o)){u(null),o.startsWith("0x")&&f("Invalid token address");return}m(!0),f("");try{const h=await Ze(o);if(h){console.log("Found custom token in Firebase:",h),u({address:o,symbol:h.symbol,name:h.name,decimals:h.decimals||18,logo:h.logo,logoIpfs:h.logoIpfs,artworkType:h.artworkType,verified:!0}),f(""),m(!1);return}const T=new ne(window.ethereum),C=new _(o,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"],T),[H,M,j]=await Promise.all([C.symbol(),C.name(),C.decimals()]);u({address:o,symbol:H,name:M,decimals:j,logo:null,logoIpfs:null,artworkType:null,verified:!0}),f("")}catch(h){console.error("Error loading token:",h),f("Could not load token information. Make sure this is a valid ERC20 token."),u(null)}finally{m(!1)}},500);return()=>clearTimeout(S)},[o]);const w=l.useMemo(()=>{const v=o.toLowerCase();return y.filter(S=>S.symbol?.toLowerCase().includes(v)||S.name?.toLowerCase().includes(v)||S.address?.toLowerCase().includes(v))},[o,y]),g=async v=>{try{let S;if(v.symbol==="ETH")S={...v,address:oe.WETH};else{const h=await Ze(v.address);h?S={...v,symbol:v.symbol||h.symbol,name:v.name||h.name,decimals:v.decimals||h.decimals||18,logo:v.logo||h.logo,logoIpfs:v.logoIpfs||h.logoIpfs,artworkType:v.artworkType||h.artworkType,verified:!0}:S={...v,decimals:v.decimals||18,verified:!0}}t(S),a()}catch(S){console.error("Error in handleTokenSelect:",S),f("Failed to process token selection")}};return e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("style",{children:$l}),e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(Q.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Select Token"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ea,{className:"text-gray-400"})}),e.jsx("input",{type:"text",value:o,onChange:v=>i(v.target.value),placeholder:"Search by name or paste address",className:"w-full pl-10 pr-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500"}),x&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x})]}),e.jsx("div",{className:"token-list-scrollbar overflow-y-auto max-h-[60vh] pr-2",children:c?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Your Tokens"}),e.jsx("div",{className:"space-y-2",children:w.map(v=>e.jsx(ur,{token:v,userAddress:r,onSelect:g,isSelected:s===(v.symbol==="ETH"?oe.WETH:v.address)},`${v.address}-${p}`))})]}),d&&!x&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Custom Token"}),e.jsx(ur,{token:d,userAddress:r,onSelect:g,isSelected:s===d.address})]}),w.length===0&&!d&&!x&&e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No tokens found with balance"})]})})]})})]})}const Va=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];function Qc(){const{address:n}=Le(),a=Bt(),[t,s]=l.useState(null),[r,o]=l.useState(null),[i,d]=l.useState(""),[u,c]=l.useState(""),[m,x]=l.useState(!1),[f,p]=l.useState(null),[b,A]=l.useState(!1),[N,y]=l.useState(!1),[k,w]=l.useState("0"),[g,v]=l.useState("0"),[S,h]=l.useState(2),[T,C]=l.useState(""),[H,M]=l.useState(!1),[j,E]=l.useState(0),[R,O]=l.useState(!1),[D,Z]=l.useState(null),[F,L]=l.useState(null),[I,V]=l.useState(null),W=l.useCallback(()=>{if(!i||!u||!t||!r){Z(null),V(null);return}try{const P=Number(i),re=Number(u)/P,U=P*.003;Z(U),V(re),L("~0.003 ETH")}catch(P){console.error("Error calculating trade details:",P)}},[i,u,t,r]);l.useEffect(()=>{W()},[W,i,u]),l.useEffect(()=>{async function P(){if(!a||!t||!r||!i||i==="0"){c(""),p(null);return}try{const J=await a.getPoolInfo(t.address,r.address);if(console.log("Pool info:",J),!J?.token0){console.log("No liquidity pool exists for this pair"),c(""),p("No liquidity pool exists");return}const re=Te(i,t.decimals),U=[t.address,r.address],q=await a.getAmountOut(re,U),ee=Y(q,r.decimals);c(ee),p(`${t.symbol} → ${r.symbol}`)}catch(J){console.error("Error in getQuote:",J),c(""),p("Error: "+(J.reason||"Failed to get quote"))}}P()},[a,t,r,i]);const X=async()=>{if(!(!n||!t||!r))try{const P=new ne(window.ethereum);if(t.symbol==="ETH"){const J=await P.getBalance(n);w(Ve(J))}else{const re=await new _(t.address,Va,P).balanceOf(n);w(Y(re,t.decimals))}if(r.symbol==="ETH"){const J=await P.getBalance(n);v(Ve(J))}else{const re=await new _(r.address,Va,P).balanceOf(n);v(Y(re,r.decimals))}}catch(P){console.error("Error updating balances:",P)}};l.useEffect(()=>{X()},[n,t,r,j]);const ae=async()=>{if(!n){G.error("Please connect your wallet");return}if(!t||!r||!i){G.error("Please fill in all fields");return}x(!0);try{const J=await new ne(window.ethereum).getSigner(),re=Te(i,t.decimals),U=Te(u,r.decimals),q=BigInt(Math.floor((100-S)*100)),ee=U*q/10000n,ke=[t.address,r.address],te=BigInt(Math.floor(Date.now()/1e3)+60*20),ue=new _(oe.router,["function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)"],J);console.log("Swap parameters:",{amountIn:re.toString(),amountOutMin:ee.toString(),path:ke,to:n,deadline:te.toString()});let de;if(t.symbol==="ETH")de=await ue.swapExactETHForTokens(ee,ke,n,te,{value:re,gasLimit:3e5});else if(r.symbol==="ETH")de=await ue.swapExactTokensForETH(re,ee,ke,n,te,{gasLimit:3e5});else{if(t.symbol!=="ETH"){const he=new _(t.address,["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)"],J);await he.allowance(n,oe.router)<re&&(console.log("Approving tokens..."),await(await he.approve(oe.router,re)).wait(),console.log("Tokens approved"))}de=await ue.swapExactTokensForTokens(re,ee,ke,n,te,{gasLimit:3e5})}console.log("Swap transaction sent:",de.hash);const fe=await de.wait();console.log("Swap receipt:",fe),await X(),G.success("Swap successful!"),d(""),c(""),E(he=>he+1)}catch(P){console.error("Swap error:",P),P.message.includes("insufficient")?G.error("Insufficient balance for swap"):P.message.includes("INSUFFICIENT_OUTPUT_AMOUNT")?G.error("Price impact too high, try a smaller amount"):P.message.includes("EXCESSIVE_INPUT_AMOUNT")?G.error("Insufficient liquidity for this trade"):P.message.includes("user rejected")?G.error("Transaction rejected"):G.error(P.reason||"Failed to swap tokens")}finally{x(!1)}},le=async P=>{if(P.symbol==="ETH")s({...P,address:oe.WETH,decimals:18});else{const J=await a.getTokenInfo(P.address);s({...P,...J,name:P.name||J.name,symbol:P.symbol||J.symbol,logo:P.logo||J.logo,logoIpfs:P.logoIpfs||J.logoIpfs})}A(!1)},xe=async P=>{if(P.symbol==="ETH")o({...P,address:oe.WETH,decimals:18});else{const J=await a.getTokenInfo(P.address);o({...P,...J,name:P.name||J.name,symbol:P.symbol||J.symbol,logo:P.logo||J.logo,logoIpfs:P.logoIpfs||J.logoIpfs})}y(!1)};l.useEffect(()=>{async function P(){if(!(!t||!r))try{const J=t.address.toLowerCase(),re=r.address.toLowerCase(),U=await Ft.get(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=${J},${re}&vs_currencies=usd`);let q=U.data[J]?.usd,ee=U.data[re]?.usd;if(t.address.toLowerCase()===oe.WETH.toLowerCase()&&(q=(await Ft.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd")).data.ethereum.usd),r.address.toLowerCase()===oe.WETH.toLowerCase()&&(ee=(await Ft.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd")).data.ethereum.usd),!q||!ee){console.log("Could not fetch prices for tokens");return}const ke=q/ee;console.log("Price ratio:",ke),setPoolCreationState(te=>({...te,priceRatio:ke}))}catch(J){console.error("Error fetching prices:",J),setPoolCreationState(re=>({...re,error:"Failed to fetch token prices"}))}}f==="No liquidity pool exists"&&P()},[t,r,f]),l.useEffect(()=>{j>0&&X()},[j]);const be=({token:P})=>{const{address:J}=Le(),[re,U]=ot.useState(null),[q,ee]=ot.useState(!0),[ke,te]=ot.useState(null);if(ot.useEffect(()=>{(async()=>{if(!(!J||!P))try{ee(!0),te(null);const fe=new ne(window.ethereum);let he,Se;if(P.symbol==="ETH")he=await fe.getBalance(J),Se=18;else{const $=new _(P.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],fe);[he,Se]=await Promise.all([$.balanceOf(J),$.decimals()])}console.log(`Balance for ${P.symbol}:`,{raw:he.toString(),decimals:Se,formatted:Y(he,Se)}),U({value:he,decimals:Se})}catch(fe){console.error("Error fetching balance:",fe),te(fe.message)}finally{ee(!1)}})()},[P,J]),ke)return e.jsxs("div",{className:"text-sm text-red-500 mt-1",children:["Error: ",ke]});if(q)return e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Loading balance..."});const ue=de=>{if(!de?.value)return"0";const fe=Number(Y(de.value,de.decimals));return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:P.symbol==="USDC"?2:6,useGrouping:!0}).format(fe)};return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",ue(re)," ",P.symbol]})},ge=P=>{P==="custom"?M(!0):(h(parseFloat(P)),M(!1),C(""))},ve=P=>{const J=P.target.value;(J===""||/^\d*\.?\d*$/.test(J)&&parseFloat(J)<=100)&&(C(J),J!==""&&h(parseFloat(J)))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"From"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i,onChange:P=>{const J=P.target.value;(J===""||/^\d*\.?\d*$/.test(J))&&d(J)},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>A(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:t.logo,alt:t.symbol,className:"w-5 h-5"}),e.jsx("span",{children:t.symbol})]}):"Select Token"})]}),t&&e.jsx(be,{token:t})]}),e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("button",{onClick:()=>{const P=t,J=i;s(r),d(u),o(P),c(J)},className:"p-2.5 rounded-xl bg-[#00ffbd]/10 text-[#00ffbd] hover:bg-[#00ffbd]/20 transition-colors border border-[#00ffbd]/20",children:e.jsx(Ts,{size:16})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"To"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:u,readOnly:!0,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>y(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r.logo,alt:r.symbol,className:"w-5 h-5"}),e.jsx("span",{children:r.symbol})]}):"Select Token"})]}),r&&e.jsx(be,{token:r})]}),e.jsxs("div",{className:"mt-4 p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"space-y-2 text-sm mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Fee (0.3%)"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"A portion of each trade (0.3%) goes to liquidity providers as a protocol incentive.",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:i?`${(Number(i)*.003).toFixed(6)} ${t?.symbol}`:"--"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Network cost"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"Estimated cost of the transaction on Ethereum",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:F||"~0.003 ETH"})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-2"}),e.jsxs("button",{onClick:()=>O(!R),className:"flex items-center justify-between w-full text-sm text-gray-500 hover:text-gray-400",children:[R?"Hide Details":"Show Details",e.jsx("svg",{className:`w-4 h-4 transition-transform ${R?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),R&&e.jsxs("div",{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Expected Output"}),e.jsxs("span",{className:"text-gray-200",children:[u," ",r?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Minimum received after slippage (",S,"%)"]}),e.jsxs("span",{className:"text-gray-200",children:[u&&Number(u*(1-S/100)).toFixed(6)," ",r?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Route"}),e.jsx("span",{className:"text-gray-200",children:f||"--"})]}),I&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Rate"}),e.jsxs("span",{className:"text-gray-200",children:["1 ",t?.symbol," = ",I.toFixed(6)," ",r?.symbol]})]})]})]})]}),e.jsx("div",{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-4 border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Slippage Tolerance"}),e.jsxs("div",{className:"flex space-x-2",children:[[.5,1,2].map(P=>e.jsxs("button",{onClick:()=>ge(P.toString()),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                      ${S===P&&!H?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:[P,"%"]},P)),e.jsx("button",{onClick:()=>ge("custom"),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                    ${H?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:"Custom"})]})]}),H&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("input",{type:"text",value:T,onChange:ve,placeholder:"Enter slippage %",className:"w-full px-3 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 pr-2",children:"%"})]})]})}),e.jsx("button",{onClick:ae,disabled:m||!t||!r||!i||!u,className:`
            w-full px-4 py-4 rounded-xl font-medium text-black text-lg
            ${m||!t||!r||!i||!u?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
          `,children:m?"Swapping...":"Swap"})]}),e.jsx(za,{isOpen:b,onClose:()=>A(!1),onSelect:le,selectedTokenAddress:t?.address}),e.jsx(za,{isOpen:N,onClose:()=>y(!1),onSelect:xe,selectedTokenAddress:r?.address})]})}const ie={10143:{router:"0xfb8e1c3b833f9e67a71c859a132cf783b645e436",factory:"0x733e88f248b742db6c14c0b1713af5ad7fdd59d0",WETH:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",USDT:"0x88b8E2161DEDC77EF4ab7585569D2415a1C1055D"},1301:{router:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",factory:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",WETH:"0x4200000000000000000000000000000000000006",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"},130:{router:"0x284F11109359a7e1306C3e447ef14D38400063FF",factory:"0x1F98400000000000000000000000000000000002",WETH:"0x4200000000000000000000000000000000000006",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"}},_t=["function approve(address spender, uint value) external returns (bool)","function allowance(address owner, address spender) external view returns (uint)","function balanceOf(address owner) external view returns (uint)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)"],ql=["function factory() external pure returns (address)","function WETH() external pure returns (address)","function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)","function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function removeLiquidityETH(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountToken, uint amountETH)","function removeLiquidityWithPermit(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline, bool approveMax, uint8 v, bytes32 r, bytes32 s) external returns (uint amountA, uint amountB)","function removeLiquidityETHWithPermit(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline, bool approveMax, uint8 v, bytes32 r, bytes32 s) external returns (uint amountToken, uint amountETH)","function removeLiquidityETHSupportingFeeOnTransferTokens(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountETH)","function removeLiquidityETHWithPermitSupportingFeeOnTransferTokens(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline, bool approveMax, uint8 v, bytes32 r, bytes32 s) external returns (uint amountETH)","function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapTokensForExactTokens(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapTokensForExactETH(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapETHForExactTokens(uint amountOut, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapExactTokensForTokensSupportingFeeOnTransferTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external","function swapExactETHForTokensSupportingFeeOnTransferTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable","function swapExactTokensForETHSupportingFeeOnTransferTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external","function quote(uint amountA, uint reserveA, uint reserveB) external pure returns (uint amountB)","function getAmountOut(uint amountIn, uint reserveIn, uint reserveOut) external pure returns (uint amountOut)","function getAmountIn(uint amountOut, uint reserveIn, uint reserveOut) external pure returns (uint amountIn)","function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)","function getAmountsIn(uint amountOut, address[] calldata path) external view returns (uint[] memory amounts)"],Wt=["function getPair(address tokenA, address tokenB) external view returns (address)","function createPair(address tokenA, address tokenB) external returns (address)","function allPairs(uint) external view returns (address)","function allPairsLength() external view returns (uint)","function feeTo() external view returns (address)","function feeToSetter() external view returns (address)"],ga=["function token0() external view returns (address)","function token1() external view returns (address)","function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)"],ms=["function deposit() external payable","function withdraw(uint) external","function balanceOf(address) external view returns (uint)","function approve(address spender, uint value) external returns (bool)"],mr={"ETH/USD":"0x13e3ee699d1909e989722e753853ae30b17e08c5","USDT/USD":"0xECef79E109e997bCA29c1c0897ec9d7b03647F5E"},zl=["function latestRoundData() external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)","function decimals() external view returns (uint8)"];class Vl{constructor(){this.provider=null,this.signer=null,this.router=null,this.chainId=null,this.poolCache=new Map,this.poolInfoCache=new Map,this.lastCacheUpdate=0,this.CACHE_DURATION=15*60*1e3,this.loadCacheFromStorage()}loadCacheFromStorage(){try{const a=localStorage.getItem("unichainPoolCache");if(a){const{pools:t,poolInfo:s,timestamp:r}=JSON.parse(a);Date.now()-r<60*60*1e3&&(this.poolCache=new Map(t),this.poolInfoCache=new Map(s),this.lastCacheUpdate=r)}}catch{}}saveCacheToStorage(){try{const a={pools:Array.from(this.poolCache.entries()),poolInfo:Array.from(this.poolInfoCache.entries()),timestamp:Date.now()};localStorage.setItem("unichainPoolCache",JSON.stringify(a))}catch{}}clearCache(){this.poolCache.clear(),this.poolInfoCache.clear(),this.lastCacheUpdate=0,localStorage.removeItem("unichainPoolCache")}isCacheValid(){return Date.now()-this.lastCacheUpdate<this.CACHE_DURATION}async init(){if(!window.ethereum)throw new Error("No Web3 Provider found");this.provider=new ne(window.ethereum),this.signer=await this.provider.getSigner();const a=await this.provider.getNetwork();this.chainId=Number(a.chainId);const t=ie[this.chainId];if(!t)throw new Error("Unsupported network");this.router=new _(t.router,ql,this.signer)}async approveToken(a,t){try{const s=new _(a,_t,this.signer),r=await this.signer.getAddress(),o=await this.signer.provider.getNetwork().then(u=>u.chainId),i=ie[o];if(!i)throw new Error("Network not supported");await s.allowance(r,i.router)<t&&await(await s.approve(i.router,lt)).wait()}catch(s){throw s}}async getTokenInfo(a){try{if(a==="ETH")return{symbol:"ETH",name:"Ethereum",decimals:18};const t=new ne(window.ethereum),s=new _(a,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"],t),[r,o,i]=await Promise.all([s.symbol().catch(()=>"Unknown"),s.name().catch(()=>"Unknown Token"),s.decimals().catch(()=>18)]);return{symbol:r,name:o,decimals:i,address:a}}catch(t){return console.error("Error in getTokenInfo:",t),{symbol:"Unknown",name:"Unknown Token",decimals:18,address:a}}}calculateInitialPoolPrice(a,t,s,r){try{const o=Number(Y(a,s)),i=Number(Y(t,r)),d=i/o,u=o/i;return{token0Price:d.toFixed(6),token1Price:u.toFixed(6)}}catch(o){return console.error("Error calculating initial pool price:",o),{token0Price:"0",token1Price:"0"}}}async createPool(a,t,s,r){try{this.router||await this.init();const o=await this.signer.getAddress(),i=await this.signer.provider.getNetwork().then(N=>N.chainId),d=ie[i];if(!d)throw new Error("Network not supported");const u=Math.floor(Date.now()/1e3)+60*20,c=a.toLowerCase()===d.WETH.toLowerCase(),m=t.toLowerCase()===d.WETH.toLowerCase(),x=c||m,f=await this.router.factory(),p=new _(f,Wt,this.signer),b=await p.getPair(a,t),A=b==="0x0000000000000000000000000000000000000000";if(x){const N=c?t:a,y=c?s:r,k=c?r:s;A&&await(await p.createPair(d.WETH,N)).wait(),await this.approveToken(N,k);const w=k*990n/1000n,g=y*990n/1000n;return{receipt:await(await this.router.addLiquidityETH(N,k,w,g,o,u,{value:y,gasLimit:tt(1e6)})).wait(),priceInfo:{token0Price:(Number(y)/Number(k)).toFixed(6),token1Price:(Number(k)/Number(y)).toFixed(6)}}}else{let N=BigInt(s),y=BigInt(r);if(A)await(await p.createPair(a,t)).wait();else{const M=new _(b,ga,this.provider),[j,E]=await M.getReserves(),R=await M.token0();if(a.toLowerCase()!==R.toLowerCase()&&([N,y]=[y,N],[a,t]=[t,a]),j>0n&&E>0n)try{y=await this.router.quote(N,j,E)}catch{throw new Error("Failed to calculate optimal amounts for the pool ratio")}}const[k,w]=await Promise.all([new _(a,_t,this.provider),new _(t,_t,this.provider)]),[g,v]=await Promise.all([k.decimals(),w.decimals()]),S=this.calculateInitialPoolPrice(N,y,g,v);await Promise.all([this.approveToken(a,N),this.approveToken(t,y)]);const h=N*990n/1000n,T=y*990n/1000n;return{receipt:await(await this.router.addLiquidity(a,t,N,y,h,T,o,u,{gasLimit:tt(1e6)})).wait(),priceInfo:S}}}catch(o){throw o}}async addLiquidityETH(a,t,s,r){try{this.router||await this.init();const o=await this.signer.provider.getNetwork().then(f=>f.chainId),i=ie[o];if(!i)throw new Error("Network not supported");const d=BigInt(Math.floor(Date.now()/1e3)+60*20);await this.approveToken(a,t);const u=t*990n/1000n,c=s*990n/1000n,m=a.toLowerCase()===i.WETH.toLowerCase()?i.WETH:a;return await this.router.addLiquidityETH(m,t,u,c,r,d,{value:s,gasLimit:tt(1e6)})}catch(o){throw o}}async addLiquidity(a,t,s,r,o){try{this.router||await this.init();const i=BigInt(Math.floor(Date.now()/1e3)+60*20);await Promise.all([this.approveToken(a,s),this.approveToken(t,r)]);const d=s*990n/1000n,u=r*990n/1000n,c=o||await this.signer.getAddress();return await this.router.addLiquidity(a,t,s,r,d,u,c,i,{gasLimit:tt(1e6)})}catch(i){throw i}}async checkPoolExists(a,t){try{if(this.router||await this.init(),await this.provider.getNetwork().then(d=>Number(d.chainId))===10143){const d=ie[10143].factory,u=zt.defaultAbiCoder().encode(["address","address"],[a,t]).slice(2);return await window.ethereum.request({method:"eth_call",params:[{to:d,data:"0xe6a43905"+u},"latest"]})!=="0x0000000000000000000000000000000000000000000000000000000000000000"}const r=await this.router.factory();return await new _(r,Wt,this.provider).getPair(a,t)!=="0x0000000000000000000000000000000000000000"}catch(s){return console.error("Error checking pool exists:",s),!1}}roundAmount(a,t=18){try{const s=Y(a,t),r=Number(s).toFixed(4);return Te(r,t)}catch(s){return console.error("Error rounding amount:",s),a}}async swap(a,t,s,r,o,i){try{this.router||await this.init();const d=await this.signer.getAddress(),u=a.symbol==="ETH"||a.symbol==="MON",c=t.symbol==="ETH"||t.symbol==="MON";u||await this.approveToken(a.address,s);const m=0n;let x;return u?x=await this.router.swapExactETHForTokens(m,o,d,i,{value:s,gasLimit:tt(1e6)}):c?x=await this.router.swapExactTokensForETH(s,m,o,d,i,{gasLimit:tt(1e6)}):x=await this.router.swapExactTokensForTokens(s,m,o,d,i,{gasLimit:tt(1e6)}),x}catch(d){throw d.data?new Error("Transaction failed: "+d.data):d}}async getAmountOut(a,t){try{if(this.router||await this.init(),!a||!t||t.length<2)return"0";const s=await this.router.getAmountsOut(a,t);return s[s.length-1]}catch(s){throw s}}async updateRoute(a,t,s){try{if(this.router||await this.init(),!a||!t||!s)return{route:null,toAmount:"0"};const r=await this.provider.getNetwork().then(y=>y.chainId),o=ie[r];if(!o)throw new Error("Network not supported");const i=a.symbol==="MON"||a.symbol==="ETH"?o.WETH:a.address,d=t.symbol==="MON"||t.symbol==="ETH"?o.WETH:t.address,u=Te(s,a.symbol==="MON"||a.symbol==="ETH"?18:a.decimals),c=`${i}_${d}_${s}`;if(this.routeCache&&this.routeCache[c]&&Date.now()-this.routeCache[c].timestamp<3e4)return this.routeCache[c].route;const m=[o.WETH,o.USDC,o.USDT].filter(y=>y&&y!==i&&y!==d),x=[];i!==d&&x.push(this.tryRoute([i,d],u).then(y=>({...y,path:[i,d]})).catch(()=>null));for(const y of m)x.push(this.tryRoute([i,y,d],u).then(k=>({...k,path:[i,y,d]})).catch(()=>null));if(r!==10143)for(let y=0;y<m.length;y++)for(let k=y+1;k<m.length;k++){const w=[i,m[y],m[k],d];x.push(this.tryRoute(w,u).then(g=>({...g,path:w})).catch(()=>null))}const f=(await Promise.all(x)).filter(Boolean);let p=null,b=Te("0",t.decimals);for(const y of f)y.amountOut>b&&(b=y.amountOut,p=y);if(!p)return{route:null,toAmount:"0",error:"No valid route found"};const N={route:p.path.map(y=>y===o.WETH?a.symbol==="MON"||t.symbol==="MON"?"WMONAD":(a.symbol==="ETH"||t.symbol==="ETH","WETH"):y===i?a.symbol:y===d?t.symbol:y===o.USDC?"USDC":y===o.USDT?"USDT":"Unknown").join(" → "),toAmount:Y(p.amountOut,t.decimals),path:p.path};return this.routeCache||(this.routeCache={}),this.routeCache[c]={route:N,timestamp:Date.now()},N}catch(r){throw console.error("Error in updateRoute:",r),r}}async tryRoute(a,t){if(a.length<2)return null;if(await this.provider.getNetwork().then(s=>s.chainId)===10143)try{const s=zt.defaultAbiCoder().encode(["uint256","address[]"],[t,a]).slice(2),r=await window.ethereum.request({method:"eth_call",params:[{to:ie[10143].router,data:"0xd06ca61f"+s},"latest"]}),o=zt.defaultAbiCoder().decode(["uint256[]"],r)[0];return{amountOut:o[o.length-1]}}catch{throw new Error("Failed to get amounts for route")}try{const s=await this.router.getAmountsOut(t,a);return{amountOut:s[s.length-1]}}catch{throw new Error("Failed to get amounts for route")}}async getTokenBalance(a,t){try{if(this.provider||await this.init(),a==="ETH"){const i=await this.provider.getBalance(t);return Ve(i)}const s=new _(a,_t,this.provider),[r,o]=await Promise.all([s.balanceOf(t),s.decimals()]);return Y(r,o)}catch(s){throw s}}async wrapETH(a){try{this.signer||await this.init();const t=await this.provider.getNetwork().then(i=>i.chainId),s=ie[t];if(!s)throw new Error("Network not supported");return await new _(s.WETH,ms,this.signer).deposit({value:a,gasLimit:tt(1e5)})}catch(t){throw t}}async unwrapWETH(a){try{this.signer||await this.init();const t=await this.provider.getNetwork().then(i=>i.chainId),s=ie[t];if(!s)throw new Error("Network not supported");return await new _(s.WETH,ms,this.signer).withdraw(a)}catch(t){throw t}}async getWETHBalance(a){try{this.provider||await this.init();const t=await this.provider.getNetwork().then(i=>i.chainId),s=ie[t];if(!s)throw new Error("Network not supported");return await new _(s.WETH,ms,this.provider).balanceOf(a)}catch(t){throw t}}async getUserPools(a){try{this.provider||await this.init();const t=new _(addresses.factory,Wt,this.provider),s=await t.allPairsLength(),r=await Promise.all(Array.from({length:Number(s)},(d,u)=>t.allPairs(u)));return(await Promise.all(r.map(async d=>{try{const u=new _(d,["function balanceOf(address) view returns (uint256)","function token0() view returns (address)","function token1() view returns (address)"],this.provider),c=await u.balanceOf(a);if(c>0){const[m,x]=await Promise.all([u.token0(),u.token1()]);return{pairAddress:d,token0:m,token1:x,balance:c}}return null}catch{return null}}))).filter(d=>d!==null).map(d=>d.pairAddress)}catch(t){throw t}}async getPoolInfo(a,t){try{const s=`${a}-${t}`;if(this.isCacheValid()&&this.poolInfoCache.has(s))return this.poolInfoCache.get(s);this.provider||await this.init();const r=await this.router.factory(),i=await new _(r,Wt,this.provider).getPair(a,t);if(i==="0x0000000000000000000000000000000000000000")return null;const d=new _(i,ga,this.provider),[u,c,m]=await Promise.all([d.token0(),d.token1(),d.getReserves()]),[x,f]=await Promise.all([a==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(u),t==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(c)]),p={token0:{address:a,...x},token1:{address:t,...f},reserves:{reserve0:m[0],reserve1:m[1],blockTimestampLast:m[2]},pairAddress:i};return this.poolInfoCache.set(s,p),this.saveCacheToStorage(),p}catch(s){throw s}}async getPoolInfoByAddress(a){try{this.provider||await this.init();const t=new _(a,["function token0() view returns (address)","function token1() view returns (address)","function getReserves() view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)","function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],this.provider),[s,r,o]=await Promise.all([t.token0(),t.token1(),t.getReserves()]),[i,d]=await Promise.all([this.getTokenInfo(s),this.getTokenInfo(r)]);return{token0:{...i,address:s},token1:{...d,address:r},reserves:{reserve0:o[0],reserve1:o[1],blockTimestampLast:o[2]},pairAddress:a}}catch(t){throw t}}async getPriceFromChainlink(a){try{let t;if(a==="ETH"||a==="WETH"?t=mr["ETH/USD"]:a==="USDT"&&(t=mr["USDT/USD"]),!t)return null;const s=new _(t,zl,this.provider),[r,o]=await Promise.all([s.latestRoundData().then(i=>i.answer),s.decimals()]);return Number(Y(r,o))}catch(t){throw t}}async getPriceFromPool(a,t=addresses.USDT){try{const r=await new _(addresses.factory,Wt,this.provider).getPair(a,t);if(r==="0x0000000000000000000000000000000000000000")return null;const o=new _(r,ga,this.provider),[i,d]=await Promise.all([o.getReserves(),o.token0()]),[u,c]=i,m=a.toLowerCase()===d.toLowerCase(),x=new _(a,_t,this.provider),f=new _(t,_t,this.provider),[p,b]=await Promise.all([x.decimals(),f.decimals()]);return m?Number(Y(c,b))/Number(Y(u,p)):Number(Y(u,b))/Number(Y(c,p))}catch(s){throw s}}async getPools(a){if(!a)throw new Error("tokenAddress is required");try{if(this.isCacheValid()&&this.poolCache.has(a))return this.poolCache.get(a);this.provider||await this.init();const t=await this.provider.getNetwork().then(x=>x.chainId),s=ie[t];if(!s)throw new Error("Network not supported");const r=new _(s.factory,Wt,this.provider),o=await r.allPairsLength(),i=await this.signer.getAddress(),d=new Set,u=[],c=40,m=Math.min(Number(o),200);for(let x=0;x<m;x+=c){const f=Math.min(c,m-x),p=Array.from({length:f},(w,g)=>x+g),b=await Promise.all(p.map(w=>r.allPairs(w))),N=b.map(w=>new _(w,[...ga,"function balanceOf(address) view returns (uint256)"],this.provider)).map(async(w,g)=>{try{const v=b[g];if(d.has(v))return null;const[S,h,T,C]=await Promise.all([w.balanceOf(i),w.token0(),w.token1(),w.getReserves()]);if(h.toLowerCase()===a.toLowerCase()||T.toLowerCase()===a.toLowerCase()){const[H,M]=await Promise.all([this.getTokenInfo(h),this.getTokenInfo(T)]);return{address:v,token0:{address:h,...H},token1:{address:T,...M},reserves:C,owned:S>0}}return null}catch{return null}}),k=(await Promise.all(N)).filter(w=>w!==null);for(const w of k)d.has(w.address)||(d.add(w.address),u.push(w));if(u.length>=40)break}return u.sort((x,f)=>x.owned===f.owned?0:x.owned?-1:1),this.poolCache.set(a,u),this.lastCacheUpdate=Date.now(),this.saveCacheToStorage(),u}catch(t){throw t}}async getTokenBalance(a,t){try{if(this.provider||await this.init(),a==="ETH"){const i=await this.provider.getBalance(t);return Ve(i)}const s=new _(a,_t,this.provider),[r,o]=await Promise.all([s.balanceOf(t),s.decimals()]);return Y(r,o)}catch(s){throw s}}async getPoolInfo(a,t){try{const s=`${a}-${t}`;if(this.isCacheValid()&&this.poolInfoCache.has(s))return this.poolInfoCache.get(s);this.provider||await this.init();const r=await this.router.factory(),i=await new _(r,Wt,this.provider).getPair(a,t);if(i==="0x0000000000000000000000000000000000000000")return null;const d=new _(i,ga,this.provider),[u,c,m]=await Promise.all([d.token0(),d.token1(),d.getReserves()]),[x,f]=await Promise.all([a==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(u),t==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(c)]),p={token0:{address:a,...x},token1:{address:t,...f},reserves:{reserve0:m[0],reserve1:m[1],blockTimestampLast:m[2]},pairAddress:i};return this.poolInfoCache.set(s,p),this.saveCacheToStorage(),p}catch(s){throw s}}async removeLiquidity(a,t,s,r,o,i){try{this.router||await this.init();const d=BigInt(Math.floor(Date.now()/1e3)+60*20),u=a.toLowerCase()===addresses.WETH.toLowerCase(),c=t.toLowerCase()===addresses.WETH.toLowerCase();let m;if(u||c){const x=u?t:a,f=u?o:r,p=u?r:o;m=await this.router.removeLiquidityETH(x,s,f,p,i,d,{gasLimit:tt(1e6)})}else m=await this.router.removeLiquidity(a,t,s,r,o,i,d,{gasLimit:tt(1e6)});return m}catch(d){throw d}}async swapExactTokensForETHSupportingFeeOnTransferTokens(a,t,s,r,o){return this.router||await this.init(),this.router.swapExactTokensForETHSupportingFeeOnTransferTokens(a,t,s,r,o)}async swapExactETHForTokensSupportingFeeOnTransferTokens(a,t,s,r,o){return this.router||await this.init(),this.router.swapExactETHForTokensSupportingFeeOnTransferTokens(a,t,s,r,o)}async swapExactTokensForETH(a,t,s,r,o){return this.router||await this.init(),this.router.swapExactTokensForETH(a,t,s,r,o)}async swapExactETHForTokens(a,t,s,r,o){return this.router||await this.init(),this.router.swapExactETHForTokens(a,t,s,r,o)}async swapExactTokensForTokensSupportingFeeOnTransferTokens(a,t,s,r,o){return this.router||await this.init(),this.router.swapExactTokensForTokensSupportingFeeOnTransferTokens(a,t,s,r,o,{gasLimit:tt(1e6)})}}function ct(){const n=Es(),{data:a}=Yt();return l.useMemo(()=>!n||!a?null:new Vl(n,a),[n,a])}const Gl=[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:oe.WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/logos/eth.png"},{address:oe.USDC,symbol:"USDC",name:"USD Coin",decimals:6,logo:"/logos/usdc.png"},{address:oe.USDT,symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}],Yl=[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xc60A9A0E7F3cBea1852B945EdB35Be52c2c8954e",symbol:"PYRO",name:"PYRO",decimals:18,logo:"/pyro.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}],Ms=n=>{switch(n){case 10143:return Yl;case 1301:return[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/logos/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/logos/usdc.png"},{address:"0x70262e266E50603AcFc5D58997eF73e5a8775844",symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}];default:return Gl.filter(a=>!a.chainId||a.chainId===n)}},oa=async(n,a)=>{if(!n)return{address:"",symbol:"Unknown",name:"Unknown Token",decimals:18,logo:"/token-default.png",verified:!1};const t=typeof n=="string"?n:n.address;if(!t)return{address:"",symbol:"Unknown",name:"Unknown Token",decimals:18,logo:"/token-default.png",verified:!1};const r=Ms(a).find(o=>!o.address||!t?!1:o.address.toLowerCase()===t.toLowerCase());if(r)return{...n,...r,verified:!0};try{const o=await Ze(t);if(o)return{...n,name:o.name,symbol:o.symbol||"ERC20 Token",decimals:o.decimals||18,logo:o.logo,logoIpfs:o.logoIpfs,artworkType:o.artworkType,verified:!0}}catch(o){console.error("Error fetching token from Firebase:",o)}return{...n,name:n.name||"ERC20 Token",symbol:n.symbol||"ERC20",decimals:n.decimals||18,logo:n.logo||"/token-default.png",verified:!1}},je=(n,a)=>{if(!n)return xr("??");const s=Ms(a).find(r=>!r.address||!n.address?!1:r.address.toLowerCase()===n.address.toLowerCase());if(s)return s.logo;if(n.logo||n.logoIpfs){const r=n.logo||it(n.logoIpfs);if(!r.includes("token-default.png"))return r}return xr(n.symbol||"??")},xr=n=>{const a=document.createElement("canvas");a.width=40,a.height=40;const t=a.getContext("2d");return t.fillStyle="#1a1b1f",t.beginPath(),t.arc(20,20,20,0,Math.PI*2),t.fill(),t.fillStyle="#00ffbd",t.font="bold 16px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(n.slice(0,2).toUpperCase(),20,20),a.toDataURL("image/png")},Xl={10143:[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}],1301:[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:ie[1301].WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:ie[1301].USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],130:[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:ie[130].WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:ie[130].USDT,symbol:"USDT",name:"USDT",decimals:6,logo:"/usdt.png"}]},Zl=`
  .token-list-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .token-list-scrollbar::-webkit-scrollbar-track {
    background: #2d2f36;
    border-radius: 3px;
  }
  .token-list-scrollbar::-webkit-scrollbar-thumb {
    background: #00ffbd;
    border-radius: 3px;
  }
  .token-list-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #00ffbd #2d2f36;
  }
`,hr=new Map,Jl=3e4,Kl={1301:"https://unichain-sepolia.blockscout.com/api/v2/addresses",130:"https://unichain.blockscout.com/api/v2/addresses"};function Ga({isOpen:n,onClose:a,onSelect:t,selectedTokenAddress:s}){const{address:r}=Le(),[o,i]=l.useState("");l.useState(null);const[d,u]=l.useState(!1),[c,m]=l.useState(""),[x,f]=l.useState(0),[p,b]=l.useState({});l.useState([]);const[A,N]=l.useState([]),[y,k]=l.useState(null),w=async()=>{u(!0),m("");try{if(!window.ethereum){console.warn("No ethereum provider found"),m("Please install a Web3 wallet like MetaMask"),u(!1);return}let j=0;for(;!window.ethereum.request&&j<10;)await new Promise(W=>setTimeout(W,500)),j++;if(!window.ethereum.request)throw new Error("Ethereum provider not initialized");const E=await window.ethereum.request({method:"eth_chainId"}).catch(W=>{throw console.error("Error getting chainId:",W),new Error("Could not get network information")}),R=parseInt(E,16);console.log("Current chain ID:",R),k(R);const O=`${r}-${R}`,D=hr.get(O);if(D&&Date.now()-D.timestamp<Jl){console.log("Using cached balances:",D),b(D.balances),N(D.tokensWithBalance),u(!1);return}let Z=Ms(R);const F={};if(R===1301||R===130)try{const W=Kl[R];console.log("Fetching tokens from Blockscout:",`${W}/${r}/token-balances`);const X=await fetch(`${W}/${r}/token-balances`,{headers:{Accept:"application/json"}});if(console.log("Blockscout response status:",X.status),X.ok){const ae=await X.json();console.log("Blockscout tokens data:",ae);const le=ae.filter(xe=>{const be=xe.token?.type==="ERC-20"&&mt(xe.token?.address)&&!xe.token?.symbol?.includes("LP")&&!xe.token?.symbol?.includes("UNI-V2"),ge=J=>{if(!J)return!1;const re=J.toLowerCase();return re.includes("temp")||re.includes("tmp")||re.includes("temporary")},ve=!ge(xe.token?.symbol)&&!ge(xe.token?.name),P=Z.some(J=>J.address?.toLowerCase()===xe.token?.address?.toLowerCase());return be&&ve&&!P}).map(xe=>({address:xe.token.address,symbol:xe.token.symbol||"Unknown",name:xe.token.name||"Unknown Token",decimals:parseInt(xe.token.decimals||"18"),logo:xe.token.icon_url||"/token-default.png",balance:xe.value||"0"}));console.log("Processed Blockscout tokens:",le),Z=[...Z,...le]}}catch(W){console.warn("Error fetching Blockscout tokens:",W)}try{console.log("Fetching native token balance...");const W=await window.ethereum.request({method:"eth_getBalance",params:[r,"latest"]});console.log("Raw native balance:",W);const X=BigInt(W),ae=R===10143?"MON":"ETH",le=Ve(X);console.log("Formatted native balance:",{symbol:ae,balance:le}),F[ae]={raw:X.toString(),formatted:le}}catch(W){console.error("Error fetching native balance:",W);const X=R===10143?"MON":"ETH";F[X]={raw:"0",formatted:"0"}}console.log("Starting ERC20 token balance fetching for all tokens:",Z);const L=Z.filter(W=>!W.isNative&&W.address&&W.address!=="ETH").map(async W=>{try{console.log("Fetching balance for token:",W);const le="0x70a08231"+zt.defaultAbiCoder().encode(["address"],[r]).slice(2);console.log("Making RPC call with data:",{to:W.address,data:le});const xe=await window.ethereum.request({method:"eth_call",params:[{to:W.address,data:le},"latest"]});console.log("Raw balance result:",xe);const be=BigInt(xe||"0"),ge=Y(be,W.decimals||18);return console.log("Token balance fetched:",{token:W.symbol,balance:be.toString(),formatted:ge}),{token:W,balance:be.toString(),formatted:ge}}catch(X){return console.error(`Error fetching balance for token ${W.symbol}:`,X),{token:W,balance:"0",formatted:"0"}}});console.log("Waiting for all token balances...");const I=await Promise.all(L);console.log("All token balances received:",I),I.forEach(({token:W,balance:X,formatted:ae})=>{F[W.address]={raw:X,formatted:ae}});const V=Z.map(W=>{let X;return W.isNative||W.address==="ETH"?X=F[R===10143?"MON":"ETH"]?.formatted||"0":W.symbol==="WETH"&&R===1301?X=F[ie[1301].WETH]?.formatted||"0":X=F[W.address]?.formatted||"0",console.log("Mapping token balance:",{token:W.symbol,isNative:W.isNative,address:W.address,balance:X}),{...W,balance:X}});console.log("Final balances:",{newBalances:F,tokensWithBalances:V}),hr.set(O,{timestamp:Date.now(),balances:F,tokensWithBalance:V}),b(F),N(V)}catch(j){console.error("Error in fetchTokensAndBalances:",j),m("Failed to fetch tokens. Please try again.")}finally{u(!1)}};l.useEffect(()=>{const j=async()=>{if(!window.ethereum?.request){console.warn("Ethereum provider not ready");return}try{const R=await window.ethereum.request({method:"eth_chainId"}),O=parseInt(R,16);k(O)}catch(R){console.error("Error getting chain ID:",R)}},E=setInterval(()=>{window.ethereum?.request&&(j(),clearInterval(E))},1e3);return()=>{clearInterval(E)}},[]),l.useEffect(()=>{w()},[n,r,x,o]);const g=l.useMemo(()=>{if(!A)return[];if(mt(o)){const E=A.find(R=>R.address?.toLowerCase()===o.toLowerCase());return E?[E]:[]}const j=o.toLowerCase();return A.filter(E=>E?E.symbol?.toLowerCase().includes(j)||E.name?.toLowerCase().includes(j)||E.address?.toLowerCase().includes(j):!1)},[o,A]);l.useEffect(()=>{(async()=>{if(!(!mt(o)||!window.ethereum))try{const E=new ne(window.ethereum);if(await E.getNetwork().then(O=>Number(O.chainId))===10143){const O=new _(o,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)"],E),[D,Z,F,L]=await Promise.all([window.ethereum.request({method:"eth_call",params:[{to:o,data:O.interface.encodeFunctionData("symbol")},"latest"]}).then(V=>O.interface.decodeFunctionResult("symbol",V)[0]),window.ethereum.request({method:"eth_call",params:[{to:o,data:O.interface.encodeFunctionData("name")},"latest"]}).then(V=>O.interface.decodeFunctionResult("name",V)[0]),window.ethereum.request({method:"eth_call",params:[{to:o,data:O.interface.encodeFunctionData("decimals")},"latest"]}).then(V=>O.interface.decodeFunctionResult("decimals",V)[0]),window.ethereum.request({method:"eth_call",params:[{to:o,data:O.interface.encodeFunctionData("balanceOf",[r])},"latest"]}).then(V=>O.interface.decodeFunctionResult("balanceOf",V)[0])]),I={address:o,symbol:D,name:Z,decimals:F,balance:Y(L,F)};N([I]),b({[o]:{raw:L.toString(),formatted:Y(L,F)}})}else{const O=new _(o,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)"],E),[D,Z,F,L]=await Promise.all([O.symbol().catch(()=>"Unknown"),O.name().catch(()=>"Unknown Token"),O.decimals().catch(()=>18),O.balanceOf(r).catch(()=>"0")]),I={address:o,symbol:D,name:Z,decimals:F,balance:Y(L,F)};N([I]),b({[o]:{raw:L.toString(),formatted:Y(L,F)}})}m("")}catch(E){console.error("Error fetching custom token:",E),m("Could not fetch token information. Please verify the contract address.")}})()},[o,r]);const v=({token:j,onSelect:E,isSelected:R})=>{const O=j.isNative?p.MON?.formatted||"0":p[j.address]?.formatted||"0",D=j.isNative?!p.MON:!p[j.address];return e.jsxs(B.button,{onClick:()=>E(j),className:`w-full flex items-center justify-between p-3 hover:bg-gray-100 dark:hover:bg-[#2d2f36] rounded-xl transition-colors ${R?"bg-[#00ffbd]/10 border-[#00ffbd] border":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[h(j),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:j.symbol||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:j.name||"Unknown Token"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:D?e.jsx(B.div,{className:"w-12 h-4 bg-gray-200 dark:bg-gray-700 rounded",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0}}):O})})]})},S=j=>{const E=j.isNative?p.MON?.formatted||"0":p[j.address]?.formatted||"0";return parseFloat(E)>0},h=j=>{const E=Xl[y]?.find(O=>O.address===j.address);if(E?.logo)return e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("img",{src:E.logo,alt:E.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:y===10143?"/monad.png":"/unichain-logo.png",alt:"Chain Logo",className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full ring-1 ring-black"})]});const R=j.logo||(j.logoIpfs?it(j.logoIpfs):null);return R&&!R.includes("token-default.png")?e.jsx("div",{className:"relative w-8 h-8",children:e.jsx("img",{src:R,alt:j.symbol,className:"w-8 h-8 rounded-full",onError:O=>{O.target.onerror=null,O.target.parentElement.innerHTML=`
                <div class="w-8 h-8 rounded-full bg-[#1a1b1f] flex items-center justify-center relative">
                  <span class="text-[#00ffbd] font-bold text-sm">${j.symbol?.slice(0,2).toUpperCase()||"??"}</span>
                  <img 
                    src="${y===10143?"/monad.png":"/unichain-logo.png"}" 
                    alt="Chain Logo" 
                    class="absolute -bottom-1 -right-1 w-4 h-4 rounded-full ring-1 ring-black"
                  />
                </div>
              `}})}):e.jsxs("div",{className:"w-8 h-8 rounded-full bg-[#1a1b1f] flex items-center justify-center relative",children:[e.jsx("span",{className:"text-[#00ffbd] font-bold text-sm",children:j.symbol?.slice(0,2).toUpperCase()||"??"}),e.jsx("img",{src:y===10143?"/monad.png":"/unichain-logo.png",alt:"Chain Logo",className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full ring-1 ring-black"})]})},T=async j=>{try{if(!j){console.error("No token provided to handleTokenSelect"),m("Invalid token selection");return}let E;if(j.isNative&&j.symbol==="MON")E={...j,address:"MON",decimals:18,verified:!0};else if(j.symbol==="ETH"){if(!y||!ie[y]?.WETH){console.error("No WETH address found for current chain"),m("WETH address not configured for this chain");return}E={...j,address:ie[y].WETH}}else if(mt(o))try{const R=new ne(window.ethereum),O=new _(o,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"],R),[D,Z,F]=await Promise.all([O.symbol().catch(()=>"Unknown"),O.name().catch(()=>"Unknown Token"),O.decimals().catch(()=>18)]);E={address:o,symbol:D,name:Z,decimals:F,verified:!0}}catch(R){console.error("Error fetching custom token info:",R),m("Invalid token address or token not found");return}else{if(!j.address){console.error("Token has no address:",j),m("Invalid token: no address found");return}E={...j,decimals:j.decimals||18,verified:!0}}if(!E.address||E.address!=="MON"&&!mt(E.address)){console.error("Invalid final token address:",E),m("Invalid token address");return}t(E),a()}catch(E){console.error("Error in handleTokenSelect:",E),m("Error selecting token: "+E.message)}},C={hidden:{opacity:0},visible:{opacity:1}},H={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",duration:.5}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.3}}},M={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return e.jsx(Je,{children:n&&e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("style",{children:Zl}),e.jsx(B.div,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true",variants:C,initial:"hidden",animate:"visible",exit:"hidden"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(B.div,{variants:H,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(Q.Panel,{className:"mx-auto w-[448px] rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Select Token"}),e.jsxs(B.div,{className:"relative mb-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ea,{className:"text-gray-400"})}),e.jsx("input",{type:"text",value:o,onChange:j=>i(j.target.value),placeholder:"Search by name or paste address",className:"w-full pl-10 pr-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500"}),e.jsx(Je,{children:c&&e.jsx(B.p,{className:"mt-2 text-sm text-red-500",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:c})})]}),e.jsx("div",{className:"token-list-scrollbar overflow-y-auto overflow-x-hidden h-[60vh]",children:e.jsx(Je,{mode:"wait",children:d?e.jsx(B.div,{className:"space-y-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(B.div,{className:"w-full flex items-center justify-between p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-20 rounded bg-gray-200 dark:bg-gray-700"}),e.jsx("div",{className:"h-3 w-24 rounded bg-gray-200 dark:bg-gray-700"})]})]}),e.jsx("div",{className:"h-4 w-16 rounded bg-gray-200 dark:bg-gray-700"})]})}):e.jsx(B.div,{variants:M,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:mt(o)?e.jsx(B.div,{className:"space-y-2",children:g.map(j=>e.jsx(v,{token:j,onSelect:T,isSelected:s===j.address},j.address||j.symbol))}):e.jsxs(e.Fragment,{children:[e.jsxs(B.div,{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Wr,{className:"text-[#00ffbd] w-4 h-4"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Your Tokens"})]}),e.jsx(B.div,{className:"space-y-2",children:g.filter(S).map(j=>e.jsx(v,{token:j,onSelect:T,isSelected:s===j.address},j.address||j.symbol))})]}),e.jsx(B.div,{className:"my-4 border-t border-gray-200 dark:border-gray-700",initial:{scaleX:0},animate:{scaleX:1}}),e.jsxs(B.div,{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Other Tokens"}),e.jsx(B.div,{className:"space-y-2",children:g.filter(j=>!S(j)).map(j=>e.jsx(v,{token:j,onSelect:T,isSelected:s===j.address},j.address||j.symbol))})]})]})})})})]})})})]})})}function fn({isOpen:n,onClose:a,onSelect:t,selectedTokenAddress:s,excludeToken:r}){return e.jsx(Ga,{isOpen:n,onClose:a,onSelect:t,selectedTokenAddress:s,excludeToken:r})}const fr={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,y:-20,transition:{duration:.3}}},jt={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0,transition:{duration:.2}}},xs={hover:{scale:1.02,transition:{duration:.2}},tap:{scale:.98}},$t={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Swapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"origin-center animate-[slideRight_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9h8l-2.5-2.5M6 9l2.5 2.5M6 9",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("path",{className:"origin-center animate-[slideLeft_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M18 15h-8l2.5-2.5M18 15l-2.5 2.5M18 15",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"18",cy:"9",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"6",cy:"15",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite_0.75s]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},ba={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Wrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"1s",fill:"freeze"})}),e.jsx("path",{className:"origin-center animate-[spin_3s_linear_infinite]",strokeLinecap:"round",d:"M12 3v18M5 7l14 8M19 7l-14 8",strokeDasharray:"4 4"}),e.jsx("circle",{cx:"12",cy:"12",r:"1",className:"animate-[pulse_2s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"r",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})})]})}),Unwrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"origin-bottom animate-[openBox_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",children:e.jsx("animate",{attributeName:"d",values:"M12 3l7 4v10l-7 4-7-4V7l7-4z;M12 3l7 0v14l-7 4-7-4V3l7 0z",dur:"1.5s",repeatCount:"indefinite"})}),e.jsxs("g",{className:"animate-[float_2s_ease-in-out_infinite]",children:[e.jsx("circle",{cx:"12",cy:"12",r:"0.5"}),e.jsx("circle",{cx:"14",cy:"10",r:"0.5"}),e.jsx("circle",{cx:"10",cy:"10",r:"0.5"}),e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})]})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})})},Ql=({isOpen:n,onClose:a,currentStep:t,tokenIn:s,tokenOut:r,error:o})=>{const i=[{id:"preparing",title:"Preparing",icon:e.jsx($t.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx($t.Approval,{})},{id:"swapping",title:"Swapping",icon:e.jsx($t.Swapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx($t.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx($t.Completed,{})}],d=!!o,u=c=>c?.includes("user rejected")?"Transaction was rejected. Please try again.":c?.includes("insufficient")?"Insufficient balance for swap.":c?.includes("INSUFFICIENT_OUTPUT_AMOUNT")?"Price impact too high, try a smaller amount.":c?.includes("EXCESSIVE_INPUT_AMOUNT")?"Insufficient liquidity for this trade.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[d?"Error Swapping Tokens":"Swapping Tokens",!d&&s&&r&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:[s.symbol," → ",r.symbol]})]}),e.jsx("div",{className:"space-y-4",children:i.map((c,m)=>{const x=t===c.id,f=!d&&i.findIndex(b=>b.id===t)>m,p=d&&t===c.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${x&&!p?"bg-[#00ffbd]/10 text-[#00ffbd]":f?"text-[#00ffbd]":p?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[c.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.title}),x&&!d&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.id==="preparing"&&"Preparing transaction...",c.id==="approval"&&`Approving ${s?.symbol}`,c.id==="swapping"&&`Swapping ${s?.symbol} for ${r?.symbol}`,c.id==="confirming"&&"Waiting for confirmation...",c.id==="completed"&&`Successfully swapped ${s?.symbol} for ${r?.symbol}!`]})]}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},c.id)})}),d&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($t.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u(o)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},ed=({isOpen:n,onClose:a,currentStep:t,fromToken:s,toToken:r,error:o})=>{const i=new ne(window.ethereum),[d,u]=l.useState(null);l.useEffect(()=>{(async()=>{const A=await i.getNetwork();u(Number(A.chainId))})()},[i]);const c=s?.symbol===(d===10143?"MON":"ETH"),m=[{id:"preparing",title:"Preparing",icon:e.jsx(ba.Preparing,{})},{id:"wrapping",title:c?"Wrapping":"Unwrapping",icon:c?e.jsx(ba.Wrapping,{}):e.jsx(ba.Unwrapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx(ba.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(ba.Completed,{})}],x=!!o,f=b=>b?b.includes("user rejected")?"Transaction was rejected. Please try again.":b.includes("insufficient funds")?"Insufficient balance for the operation.":b:"",p=()=>d===10143?c?"MON to WMONAD":"WMONAD to MON":c?"ETH to WETH":"WETH to ETH";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:x?"Error Processing Transaction":c?`Wrapping ${p()}`:`Unwrapping ${p()}`}),e.jsx("div",{className:"space-y-4",children:m.map(b=>{const A=t===b.id,N=!x&&m.findIndex(k=>k.id===t)>m.findIndex(k=>k.id===b.id),y=x&&t===b.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${A&&!y?"bg-[#00ffbd]/10 text-[#00ffbd]":N?"text-[#00ffbd]":y?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[b.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b.title}),A&&!x&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[b.id==="preparing"&&"Preparing transaction...",b.id==="wrapping"&&(c?`Converting ${d===10143?"MON to WMONAD":"ETH to WETH"}...`:`Converting ${d===10143?"WMONAD to MON":"WETH to ETH"}...`),b.id==="confirming"&&"Waiting for confirmation...",b.id==="completed"&&(c?`Successfully wrapped ${d===10143?"MON to WMONAD":"ETH to WETH"}!`:`Successfully unwrapped ${d===10143?"WMONAD to MON":"WETH to ETH"}!`)]})]}),N&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},b.id)})}),x&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx($t.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:f(o)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},td=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-[99998]",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Swap Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(9)].map((d,u)=>{const c=u+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>i(c),onMouseLeave:()=>i(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(o||s)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s===0?"Select a rating":`You rated: ${s} star${s!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{s>0&&(t(s),a())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${s>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},ad=[130,1301,10143],pr=n=>n?ad.includes(n)?null:"Please switch to Unichain network or Monad Testnet":"Please connect your wallet",sd=["function deposit() external payable","function withdraw(uint256 amount) external","function balanceOf(address) view returns (uint256)","function approve(address spender, uint256 amount) external returns (bool)"];function e0(){const{address:n,isConnected:a}=Le(),t=ct(),[s,r]=l.useState(null),[o,i]=l.useState(null),[d,u]=l.useState(""),[c,m]=l.useState(""),[x,f]=l.useState(!1),[p,b]=l.useState(null),[A,N]=l.useState(!1),[y,k]=l.useState(null),[w,g]=l.useState(!1);l.useState(null),l.useState(null);const[v,S]=l.useState(null),[h,T]=l.useState(2),[C,H]=l.useState(""),[M,j]=l.useState(!1),[E,R]=l.useState(null),[O,D]=l.useState(!1),[Z,F]=l.useState(null),[L,I]=l.useState(!1),[V,W]=l.useState({width:window.innerWidth,height:window.innerHeight}),[X,ae]=l.useState(!1),[le,xe]=l.useState(null),[be,ge]=l.useState(null),[ve,P]=l.useState(null),[J,re]=l.useState(!1);l.useEffect(()=>((async()=>{if(window.ethereum)try{const K=await window.ethereum.request({method:"eth_chainId"}),ce=parseInt(K,16);if(ge(ce),ce!==10143){const ye=pr(ce);P(ye)}else P(null)}catch(K){console.error("Error validating network:",K)}})(),window.ethereum&&window.ethereum.on("chainChanged",K=>{const ce=parseInt(K,16);if(ge(ce),ce!==10143){const ye=pr(ce);P(ye)}else P(null)}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",()=>{})}),[]),l.useEffect(()=>{const $=()=>{W({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]),l.useEffect(()=>{if(L){const $=setTimeout(()=>{I(!1)},5e3);return()=>clearTimeout($)}},[L]);const U=({token:$})=>{const{address:K}=Le(),[ce,ye]=l.useState("0"),[Ne,z]=l.useState(!1);return l.useEffect(()=>{(async()=>{if(!(!K||!$))try{if(z(!0),$.isNative&&$.symbol==="MON"){const Ce=await window.ethereum.request({method:"eth_getBalance",params:[K,"latest"]}),Ae=Ve(BigInt(Ce));ye(Ae);return}const pe=new ne(window.ethereum),Ee=await new _($.address,["function balanceOf(address) view returns (uint256)"],pe).balanceOf(K);ye(Y(Ee,$.decimals||18))}catch(pe){console.error("Error fetching balance:",pe),ye("0")}finally{z(!1)}})()},[$,K]),$?e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",Ne?"Loading...":Number(ce).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:6})," ",$.symbol]}):null};l.useEffect(()=>{(async()=>{if(!s||!o||!d){m(""),b(null),R(null);return}if(de()){m(d),b(null),R(null);return}re(!0);try{const{route:K,toAmount:ce,path:ye}=await t.updateRoute(s,o,d);if(!K||!ce||ce==="0"){m(""),b(null),R("No valid route found");return}b(K),m(ce),R(null)}catch{m(""),b(null),R("Error finding route")}finally{re(!1)}})()},[s,o,d,t]);const q=$=>{y==="from"?r($):i($),N(!1)},ee=async()=>{if(!n){G.error("Please connect your wallet");return}if(!s||!o||!d){G.error("Please fill in all fields");return}if(E){D(!0),F("preparing"),xe("No valid route found for this swap. Please try a different amount or token pair.");return}f(!0),D(!0),F("preparing"),xe(null);try{const K=await new ne(window.ethereum).getSigner(),ce=await t.updateRoute(s,o,d);if(!ce||!ce.path)throw new Error("No valid route found");const ye=Te(d,s.decimals),Ne=Te(c,o.decimals),z=BigInt(Math.floor((100-h)*100)),me=Ne*z/10000n;let pe=s;const Fe=s.symbol==="ETH"||s.symbol==="MON",Ee=o.symbol==="ETH"||o.symbol==="MON";Fe&&ce.path[0]===ie[be]?.WETH&&await t.getWETHBalance(n)<ye&&(F("wrapping"),await t.wrapETH(ye),pe={...s,symbol:"WETH",address:ie[be].WETH,decimals:18});const Ce=BigInt(Math.floor(Date.now()/1e3)+60*20);if(Fe){F("swapping");const Ae=new _(o.address,["function burnFee() view returns (uint256)","function marketingFee() view returns (uint256)","function liquidityFee() view returns (uint256)"],K);let Me=!1;try{const[We,Ge,Oe]=await Promise.all([Ae.burnFee().catch(()=>0),Ae.marketingFee().catch(()=>0),Ae.liquidityFee().catch(()=>0)]);Me=We>0||Ge>0||Oe>0}catch{Me=!1}Me?await(await t.swapExactETHForTokensSupportingFeeOnTransferTokens(me,ce.path,n,Ce,{value:ye})).wait():await(await t.swapExactETHForTokens(me,ce.path,n,Ce,{value:ye})).wait()}else{F("approval");const Ae=ie[be]?.router;if(!Ae)throw new Error("Router address not found for current chain");const Me=new _(pe.address,["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function balanceOf(address) view returns (uint256)","function burnFee() view returns (uint256)","function marketingFee() view returns (uint256)","function liquidityFee() view returns (uint256)"],K);await Me.allowance(n,Ae)<ye&&(console.log("Approving tokens..."),await(await Me.approve(Ae,ye)).wait());let Ge=!1,Oe=!1;try{const[Re,Qe,ma]=await Promise.all([Me.burnFee().catch(()=>0),Me.marketingFee().catch(()=>0),Me.liquidityFee().catch(()=>0)]);Ge=Re>0||Qe>0||ma>0}catch{Ge=!1}const Ke=new _(o.address,["function burnFee() view returns (uint256)","function marketingFee() view returns (uint256)","function liquidityFee() view returns (uint256)"],K);try{const[Re,Qe,ma]=await Promise.all([Ke.burnFee().catch(()=>0),Ke.marketingFee().catch(()=>0),Ke.liquidityFee().catch(()=>0)]);Oe=Re>0||Qe>0||ma>0}catch{Oe=!1}F("swapping"),Ge||Oe?Ee?await(await t.swapExactTokensForETHSupportingFeeOnTransferTokens(ye,me,ce.path,n,Ce)).wait():await(await t.swapExactTokensForTokensSupportingFeeOnTransferTokens(ye,me,ce.path,n,Ce)).wait():Ee?await(await t.swapExactTokensForETH(ye,me,ce.path,n,Ce)).wait():await(await t.swapExactTokensForTokens(ye,me,ce.path,n,Ce)).wait()}u(""),F("completed"),setTimeout(()=>{D(!1),F(null),I(!0),setTimeout(()=>{ae(!0)},1e3),setTimeout(()=>{u(""),m(""),I(!1)},3e4)},1e3)}catch($){console.error("Swap error:",$);let K="Failed to swap tokens";$.code==="CALL_EXCEPTION"?K="Transaction failed - insufficient gas or contract error":$.code==="UNPREDICTABLE_GAS_LIMIT"?K="Unable to estimate gas - the transaction may fail":$.reason&&(K=$.reason),xe(K),F("error")}finally{f(!1)}},ke=$=>{$==="custom"?j(!0):(T(parseFloat($)),j(!1),H(""))},te=$=>{const K=$.target.value;(K===""||/^\d*\.?\d*$/.test(K)&&parseFloat(K)<=100)&&(H(K),K!==""&&T(parseFloat(K)))},ue=async()=>{if(!n){G.error("Please connect your wallet");return}if(!s||!o||!d){G.error("Please fill in all fields");return}f(!0),D(!0),F("preparing"),xe(null);try{const $=new ne(window.ethereum),K=await $.getSigner(),ce=await $.getNetwork().then(Ne=>Number(Ne.chainId)),ye=Te(d,18);if(ce===10143){const Ne=new _("0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",sd,K);if(s.symbol==="MON"){F("wrapping");const z=await Ne.deposit({value:ye});F("confirming"),await z.wait()}else{F("unwrapping");const z=await Ne.withdraw(ye);F("confirming"),await z.wait()}}else if(s.symbol==="ETH"){F("wrapping");const Ne=await t.wrapETH(ye);F("confirming"),await Ne.wait()}else{F("unwrapping");const Ne=await t.unwrapWETH(ye);F("confirming"),await Ne.wait()}F("completed"),setTimeout(()=>{D(!1),F(null),I(!0),setTimeout(()=>{ae(!0)},1e3),setTimeout(()=>{u(""),m(""),I(!1)},3e4)},1e3)}catch($){console.error("Wrap/Unwrap error:",$),xe($.message||"Transaction failed. Please try again."),F("error")}finally{f(!1)}},de=()=>be===10143?s?.symbol==="MON"&&o?.symbol==="WMONAD"||s?.symbol==="WMONAD"&&o?.symbol==="MON":s?.symbol==="ETH"&&o?.symbol==="WETH"||s?.symbol==="WETH"&&o?.symbol==="ETH",fe=()=>{if(x)return"Processing...";if(J)return"Finding best route...";if(!s||!o)return"Select Tokens";if(!d)return"Enter Amount";if(E&&!de())return"No Route Available";if(be===10143){if(s?.symbol==="MON"&&o?.symbol==="WMONAD")return"Wrap MON to WMONAD";if(s?.symbol==="WMONAD"&&o?.symbol==="MON")return"Unwrap WMONAD to MON"}return s?.symbol==="ETH"&&o?.symbol==="WETH"?"Wrap ETH to WETH":s?.symbol==="WETH"&&o?.symbol==="ETH"?"Unwrap WETH to ETH":"Swap"},he=document.createElement("style");he.textContent=`
    @keyframes slideRight {
      0% { transform: translateX(-4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(4px); opacity: 0; }
    }
    @keyframes slideLeft {
      0% { transform: translateX(4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(-4px); opacity: 0; }
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }
  `,document.head.appendChild(he);const Se=$=>{console.log("User rated:",$)};return e.jsxs(B.div,{className:"space-y-6 max-w-lg mx-auto",variants:fr,initial:"hidden",animate:"visible",exit:"exit",children:[L&&e.jsx(pt,{width:V.width,height:V.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(B.div,{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",variants:jt,children:ve?e.jsxs(B.div,{className:"text-center py-8",variants:jt,children:[e.jsx(B.div,{className:"mb-4",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:e.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-16 h-16 mx-auto mb-4"})}),e.jsx(B.h2,{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",variants:jt,children:ve}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Trading is available on Unichain networks and Monad Testnet"})]}):e.jsx(Je,{mode:"wait",children:e.jsxs(B.div,{className:"space-y-4",variants:fr,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs(B.div,{className:"space-y-2",variants:jt,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"From"}),e.jsxs(B.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:d,onChange:$=>{const K=$.target.value;(K===""||/^\d*\.?\d*$/.test(K))&&u(K)},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(B.button,{onClick:()=>{k("from"),N(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:xs,whileHover:"hover",whileTap:"tap",children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(s),alt:s.symbol,className:"w-5 h-5"}),e.jsx("span",{children:s.symbol})]}):"Select Token"})]}),s&&e.jsx(U,{token:s})]}),e.jsx(B.div,{className:"flex justify-center my-4",variants:jt,children:e.jsx(B.button,{onClick:()=>{const $=s,K=d;r(o),u(c),i($),m(K)},className:"p-2.5 rounded-xl bg-[#00ffbd]/10 text-[#00ffbd] hover:bg-[#00ffbd]/20 transition-colors border border-[#00ffbd]/20",whileHover:{rotate:180},transition:{type:"spring",stiffness:200,damping:10},children:e.jsx(Ts,{size:16})})}),e.jsxs(B.div,{className:"space-y-2",variants:jt,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"To"}),e.jsxs(B.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:c,readOnly:!0,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(B.button,{onClick:()=>{k("to"),N(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:xs,whileHover:"hover",whileTap:"tap",children:o?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(o),alt:o.symbol,className:"w-5 h-5"}),e.jsx("span",{children:o.symbol})]}):"Select Token"})]}),o&&e.jsx(U,{token:o})]}),e.jsx(Je,{children:e.jsxs(B.div,{className:"mt-4 p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",variants:jt,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"space-y-2 text-sm mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Fee (0.3%)"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"A portion of each trade (0.3%) goes to liquidity providers as a protocol incentive.",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:d?`${(Number(d)*.003).toFixed(6)} ${s?.symbol}`:"--"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Network cost"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"Estimated cost of the transaction on Ethereum",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:"Check wallet for gas cost"})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-2"}),e.jsxs("button",{onClick:()=>g(!w),className:"flex items-center justify-between w-full text-sm text-gray-500 hover:text-gray-400",children:[w?"Hide Details":"Show Details",e.jsx("svg",{className:`w-4 h-4 transition-transform ${w?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),w&&e.jsxs("div",{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Expected Output"}),e.jsxs("span",{className:"text-gray-200",children:[c," ",o?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Minimum received after slippage (",h,"%)"]}),e.jsxs("span",{className:"text-gray-200",children:[c&&Number(c*(1-h/100)).toFixed(6)," ",o?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Route"}),e.jsx("span",{className:"text-gray-200",children:p||"--"})]}),v&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Rate"}),e.jsxs("span",{className:"text-gray-200",children:["1 ",s?.symbol," = ",v.toFixed(6)," ",o?.symbol]})]})]})]})})]})})}),e.jsx(B.div,{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-4 border border-gray-200 dark:border-gray-800",variants:jt,children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Slippage Tolerance"}),e.jsxs("div",{className:"flex space-x-2",children:[[.5,1,2].map($=>e.jsxs("button",{onClick:()=>ke($.toString()),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                    ${h===$&&!M?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:[$,"%"]},$)),e.jsx("button",{onClick:()=>ke("custom"),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                  ${M?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:"Custom"})]})]}),M&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("input",{type:"text",value:C,onChange:te,placeholder:"Enter slippage %",className:"w-full px-3 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 pr-2",children:"%"})]})]})}),e.jsx(B.button,{onClick:de()?ue:ee,disabled:x||!s||!o||!d||!c&&!de(),className:`
          w-full px-4 py-4 rounded-xl font-medium text-lg
          ${x||!s||!o||!d||!c&&!de()?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black"}
        `,variants:xs,whileHover:"hover",whileTap:"tap",children:fe()}),e.jsx(fn,{isOpen:A,onClose:()=>N(!1),onSelect:q,excludeToken:y==="from"?o:s}),de()?e.jsx(ed,{isOpen:O,onClose:()=>{D(!1),F(null),xe(null)},currentStep:Z,fromToken:s,toToken:o,error:le}):e.jsx(Ql,{isOpen:O,onClose:()=>{D(!1),F(null)},currentStep:Z,tokenIn:s,tokenOut:o,error:le}),e.jsx(td,{isOpen:X,onClose:()=>ae(!1),onRate:Se})]})}const De={swapRouter:"0xd1AAE39293221B77B0C71fBD6dCb7Ea29Bb5B166",quoter:"0x6Dd37329A1A225a6Fca658265D460423DCafBF89",WETH:"0x4200000000000000000000000000000000000006",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"},rd=["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function balanceOf(address owner) external view returns (uint256)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)"],nd=["function quoteExactInput(bytes path, uint256 amountIn) external returns (uint256 amountOut, uint160[] sqrtPriceX96AfterList, uint32[] initializedTicksCrossedList, uint256 gasEstimate)","function quoteExactInputSingle(tuple(address tokenIn, address tokenOut, uint256 amountIn, uint24 fee, uint160 sqrtPriceLimitX96) params) external returns (uint256 amountOut, uint160 sqrtPriceX96After, uint32 initializedTicksCrossed, uint256 gasEstimate)"],od=["function exactInput(tuple(bytes path, address recipient, uint256 amountIn, uint256 amountOutMinimum) params) external payable returns (uint256 amountOut)","function exactInputSingle(tuple(address tokenIn, address tokenOut, uint24 fee, address recipient, uint256 amountIn, uint256 amountOutMinimum, uint160 sqrtPriceLimitX96) params) external payable returns (uint256 amountOut)","function exactOutput(tuple(bytes path, address recipient, uint256 amountOut, uint256 amountInMaximum) params) external payable returns (uint256 amountIn)","function exactOutputSingle(tuple(address tokenIn, address tokenOut, uint24 fee, address recipient, uint256 amountOut, uint256 amountInMaximum, uint160 sqrtPriceLimitX96) params) external payable returns (uint256 amountIn)","function multicall(bytes[] data) external payable returns (bytes[] results)","function wrapETH(uint256 value) external payable","function unwrapWETH9(uint256 amountMinimum, address recipient) external payable","function WETH9() external view returns (address)","function refundETH() external payable","function selfPermit(address token, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s) external payable","function sweepToken(address token, uint256 amountMinimum, address recipient) external payable"],Ct={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Swapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"origin-center animate-[slideRight_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9h8l-2.5-2.5M6 9l2.5 2.5M6 9",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("path",{className:"origin-center animate-[slideLeft_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M18 15h-8l2.5-2.5M18 15l-2.5 2.5M18 15",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"18",cy:"9",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"6",cy:"15",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite_0.75s]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},Pa={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Wrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"1s",fill:"freeze"})}),e.jsx("path",{className:"origin-center animate-[spin_3s_linear_infinite]",strokeLinecap:"round",d:"M12 3v18M5 7l14 8M19 7l-14 8",strokeDasharray:"4 4"}),e.jsx("circle",{cx:"12",cy:"12",r:"1",className:"animate-[pulse_2s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"r",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})})]})}),Unwrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"origin-bottom animate-[openBox_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",children:e.jsx("animate",{attributeName:"d",values:"M12 3l7 4v10l-7 4-7-4V7l7-4z;M12 3l7 0v14l-7 4-7-4V3l7 0z",dur:"1.5s",repeatCount:"indefinite"})}),e.jsxs("g",{className:"animate-[float_2s_ease-in-out_infinite]",children:[e.jsx("circle",{cx:"12",cy:"12",r:"0.5"}),e.jsx("circle",{cx:"14",cy:"10",r:"0.5"}),e.jsx("circle",{cx:"10",cy:"10",r:"0.5"}),e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})]})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})})},Ht={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},gr=({token:n})=>{const{address:a}=Le(),t=ct(),[s,r]=l.useState("0"),[o,i]=l.useState(!1);return l.useEffect(()=>{(async()=>{if(!(!a||!n||!t))try{i(!0);const u=await t.getTokenBalance(n.symbol==="ETH"?"ETH":n.address,a);r(u)}catch(u){console.error("Error fetching balance:",u),r("0")}finally{i(!1)}})()},[n,a,t]),n?e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",o?"Loading...":s," ",n.symbol]}):null};function Ut(n,a){if(n.length!==a.length+1)throw new Error("path/fee lengths do not match");let t="0x";for(let s=0;s<a.length;s++)t+=n[s].slice(2).padStart(40,"0"),t+=a[s].toString(16).padStart(6,"0");return t+=n[n.length-1].slice(2).padStart(40,"0"),t}const id=({isOpen:n,onClose:a,currentStep:t,tokenIn:s,tokenOut:r,error:o})=>{const i=[{id:"preparing",title:"Preparing",icon:e.jsx(Ct.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(Ct.Approval,{})},{id:"swapping",title:"Swapping",icon:e.jsx(Ct.Swapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Ct.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Ct.Completed,{})}],d=!!o,u=c=>c?.includes("user rejected")?"Transaction was rejected. Please try again.":c?.includes("insufficient")?"Insufficient balance for swap.":c?.includes("INSUFFICIENT_OUTPUT_AMOUNT")?"Price impact too high, try a smaller amount.":c?.includes("EXCESSIVE_INPUT_AMOUNT")?"Insufficient liquidity for this trade.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[d?"Error Swapping Tokens":"Swapping Tokens",!d&&s&&r&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:[s.symbol," → ",r.symbol]})]}),e.jsx("div",{className:"space-y-4",children:i.map((c,m)=>{const x=t===c.id,f=!d&&i.findIndex(b=>b.id===t)>m,p=d&&t===c.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${x&&!p?"bg-[#00ffbd]/10 text-[#00ffbd]":f?"text-[#00ffbd]":p?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[c.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.title}),x&&!d&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.id==="preparing"&&"Preparing transaction...",c.id==="approval"&&`Approving ${s?.symbol}`,c.id==="swapping"&&`Swapping ${s?.symbol} for ${r?.symbol}`,c.id==="confirming"&&"Waiting for confirmation...",c.id==="completed"&&`Successfully swapped ${s?.symbol} for ${r?.symbol}!`]})]}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},c.id)})}),d&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ct.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u(o)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},ld=({isOpen:n,onClose:a,currentStep:t,fromToken:s,toToken:r,error:o})=>{const i=s?.symbol==="ETH",d=[{id:"preparing",title:"Preparing",icon:e.jsx(Pa.Preparing,{})},{id:"wrapping",title:i?"Wrapping ETH":"Unwrapping WETH",icon:i?e.jsx(Pa.Wrapping,{}):e.jsx(Pa.Unwrapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Pa.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Ct.Completed,{})}],u=!!o,c=m=>m?.includes("user rejected")?"Transaction was rejected. Please try again.":m?.includes("insufficient")?`Insufficient ${i?"ETH":"WETH"} balance.`:m?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:u?"Error Processing Transaction":i?"Wrapping ETH":"Unwrapping WETH"}),e.jsx("div",{className:"space-y-4",children:d.map((m,x)=>{const f=t===m.id,p=!u&&d.findIndex(A=>A.id===t)>x,b=u&&t===m.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${f&&!b?"bg-[#00ffbd]/10 text-[#00ffbd]":p?"text-[#00ffbd]":b?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[m.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m.title}),f&&!u&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[m.id==="preparing"&&"Preparing transaction...",m.id==="wrapping"&&(i?"Converting ETH to WETH...":"Converting WETH to ETH..."),m.id==="confirming"&&"Waiting for confirmation...",m.id==="completed"&&(i?"Successfully wrapped ETH to WETH!":"Successfully unwrapped WETH to ETH!")]})]}),p&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},m.id)})}),u&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ct.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:c(o)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})};function t0(){const{address:n}=Le(),{chain:a}=Sa(),t=l.useRef(null),s=l.useRef(null);l.useEffect(()=>{window.ethereum&&(t.current=new ne(window.ethereum),s.current=new _(De.quoter,nd,t.current))},[]);const[r,o]=l.useState(null),[i,d]=l.useState(null),[u,c]=l.useState(""),[m,x]=l.useState(""),[f,p]=l.useState(!1),[b,A]=l.useState(!1),[N,y]=l.useState("from"),[k,w]=l.useState(!1),[g,v]=l.useState(!1),[S,h]=l.useState(!1),[T,C]=l.useState(null),[H,M]=l.useState(null),[j,E]=l.useState({width:window.innerWidth,height:window.innerHeight}),[R,O]=l.useState(!1),[D,Z]=l.useState(.5),[F,L]=l.useState(!1),[I,V]=l.useState(null),[W,X]=l.useState(null),[ae,le]=l.useState(null),[xe,be]=l.useState(!1);l.useEffect(()=>{const $=()=>{E({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]);const ge=l.useRef(null);l.useCallback(async($,K,ce)=>{if(!s.current)return null;const ye=Ut([$.address,K.address],[Ht.MEDIUM]);try{const[Ne]=await s.current.quoteExactInput(ye,ce);return{path:[$.address,K.address],fees:[Ht.MEDIUM],quote:Ne,isDirectRoute:!0}}catch{if(K.address.toLowerCase()===De.USDT.toLowerCase())try{const z=Ut([$.address,De.WETH],[Ht.MEDIUM]),[me]=await s.current.quoteExactInput(z,ce),pe=Ut([De.WETH,De.USDT],[Ht.MEDIUM]),[Fe]=await s.current.quoteExactInput(pe,me);return{path:[$.address,De.WETH,De.USDT],fees:[Ht.MEDIUM,Ht.MEDIUM],quote:Fe,isDirectRoute:!1}}catch(z){return console.error("Failed to route through WETH:",z),null}return null}},[]);const ve=l.useCallback(()=>r?.symbol==="ETH"&&i?.symbol==="WETH"||r?.symbol==="WETH"&&i?.symbol==="ETH",[r?.symbol,i?.symbol]),P=l.useCallback(async()=>{if(!(!r||!i||!u||!a?.id||!s.current))try{be(!0),le(null),ge.current&&ge.current.abort(),ge.current=new AbortController;const $=Te(u,r.decimals),K=r.symbol==="ETH"?De.WETH:r.address,ce=i.symbol==="ETH"?De.WETH:i.address,ye=[{path:[K,ce],fees:[3e3]},{path:[K,ce],fees:[500]},{path:[K,ce],fees:[1e4]}];ye[0].path.includes(De.WETH)||ye.push({path:[K,De.WETH,ce],fees:[3e3,3e3]},{path:[K,De.WETH,ce],fees:[500,500]},{path:[K,De.WETH,ce],fees:[3e3,500]},{path:[K,De.WETH,ce],fees:[500,3e3]});let Ne=0n,z=null;for(const Ce of ye)try{const Ae=Ut(Ce.path,Ce.fees),[Me]=await s.current.quoteExactInput.staticCall(Ae,$);Me>Ne&&(Ne=Me,z=Ce)}catch{continue}if(Ne===0n||!z){x(""),V(null),u&&u.length>0&&setTimeout(()=>{xe||le("No liquidity found")},500);return}const me=Y(Ne,i.decimals);x(me),le(null);const pe={path:z.path.map((Ce,Ae)=>({symbol:Ce.toLowerCase()===De.WETH.toLowerCase()?"WETH":Ce.toLowerCase()===r.address?.toLowerCase()?r.symbol:Ce.toLowerCase()===i.address?.toLowerCase()?i.symbol:"Unknown"})),expectedOutput:me,priceImpact:0,fees:z.fees};i.symbol==="ETH"&&pe.path.push({symbol:"ETH"}),r.symbol==="ETH"&&pe.path.unshift({symbol:"ETH"});const Ee=await(async()=>{try{const Ce=Te("1",r.decimals),Ae=Ut(z.path,z.fees),[Me]=await s.current.quoteExactInput.staticCall(Ae,Ce),We=$*Me/Ce,Ge=(We-Ne)*10000n/We;return Number(Ge)/100}catch(Ce){return console.error("Error calculating price impact:",Ce),0}})();pe.priceImpact=Ee,V(pe),X(Ee)}catch($){if($.name==="AbortError")return;console.error("Error getting quote:",$),u&&u.length>0&&setTimeout(()=>{xe||le("Error finding route")},500)}finally{be(!1)}},[r,i,u,a?.id]);l.useEffect(()=>{r&&i&&u?ve()?(x(u),V(null),le(null),X(null)):P():(x(""),X(null))},[r,i,u,P,ve]);const J=async($,K)=>{if(!$||$.symbol==="ETH"||!t.current)return!0;try{const ce=await t.current.getSigner(),ye=new _($.address,rd,ce),[Ne]=await Promise.all([ye.allowance(n,De.swapRouter)]);if(Ne<K){const z=lt;await(await ye.approve(De.swapRouter,z)).wait()}return!0}catch(ce){return console.error("Error in checkAndSetAllowance:",ce),!1}},re=async()=>{if(!n||!r||!i||!u||!a?.id||!t.current){G.error("Please fill in all fields");return}p(!0),v(!0),C("preparing"),M(null);try{const $=await t.current.getSigner(),K=Te(u,r.decimals);if(ve()){const ce=new _(De.WETH,["function deposit() external payable","function withdraw(uint256) external","function approve(address spender, uint256 amount) external returns (bool)"],$);C("wrapping");let ye;r.symbol==="ETH"&&i.symbol==="WETH"?ye=await ce.deposit({value:K}):ye=await ce.withdraw(K),C("confirming"),await ye.wait(),C("completed"),setTimeout(()=>{v(!1),C(null),setTimeout(()=>{w(!0),setTimeout(()=>{h(!0)},1e3),setTimeout(()=>{c(""),x(""),w(!1)},3e4)},100)},1e3);return}if(!ve()){if(r.symbol!=="ETH"&&(C("approval"),!await J(r,K))){M("Failed to approve token"),C("error");return}const ce=Te(m,i.decimals),ye=BigInt(Math.floor((100-D)*100)),Ne=ce*ye/10000n;C("swapping");const z=new _(De.swapRouter,od,$),me=Math.floor(Date.now()/1e3)+1200;let pe;if(r.symbol==="ETH"||i.symbol==="ETH"){const Fe=r.symbol==="ETH"?De.WETH:r.address,Ee=i.symbol==="ETH"?De.WETH:i.address,Ce=Ut([Fe,Ee],[Ht.MEDIUM]),Me=await z.exactInput.estimateGas({path:Ce,recipient:i.symbol==="ETH"?De.swapRouter:n,deadline:me,amountIn:K,amountOutMinimum:Ne},{value:r.symbol==="ETH"?K:0})*120n/100n;if(i.symbol==="ETH"){const We=z.interface.encodeFunctionData("exactInput",[params]),Ge=z.interface.encodeFunctionData("unwrapWETH9",[Ne,n]),Oe=z.interface.encodeFunctionData("refundETH");pe=await z.multicall([We,Ge,Oe],{value:r.symbol==="ETH"?K:0,gasLimit:Me})}else pe=await z.exactInput({path:Ce,recipient:n,deadline:me,amountIn:K,amountOutMinimum:Ne},{value:r.symbol==="ETH"?K:0,gasLimit:Me})}else{const Fe=Ut(I.path.map(Ae=>Ae.symbol==="WETH"?De.WETH:Ae.symbol===r.symbol?r.address:i.address),I.fees),Ce=await z.exactInput.estimateGas({path:Fe,recipient:n,deadline:me,amountIn:K,amountOutMinimum:Ne})*120n/100n;pe=await z.exactInput({path:Fe,recipient:n,deadline:me,amountIn:K,amountOutMinimum:Ne},{gasLimit:Ce})}C("confirming"),await pe.wait(),C("completed"),setTimeout(()=>{v(!1),C(null),setTimeout(()=>{w(!0),setTimeout(()=>{h(!0)},1e3),setTimeout(()=>{c(""),x(""),w(!1)},3e4)},100)},1e3)}}catch($){console.error("Swap error:",$);let K="Failed to swap tokens";$.code==="CALL_EXCEPTION"?K="Transaction failed - insufficient gas or contract error":$.code==="UNPREDICTABLE_GAS_LIMIT"?K="Unable to estimate gas - the transaction may fail":$.reason&&(K=$.reason),M(K),C("error")}finally{p(!1)}},U=$=>{$==="custom"?L(!0):(L(!1),Z(parseFloat($)))},q=()=>n?f?"Processing...":!r||!i?"Select Tokens":u?xe&&!ve()?"Finding best route...":ae&&!ve()&&!xe?"No Route Available":r.symbol==="ETH"&&i?.symbol==="WETH"?"Wrap ETH":r.symbol==="WETH"&&i?.symbol==="ETH"?"Unwrap WETH":"Swap":"Enter Amount":"Connect Wallet",ee=document.createElement("style");ee.textContent=`
    @keyframes slideRight {
      0% { transform: translateX(-4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(4px); opacity: 0; }
    }
    @keyframes slideLeft {
      0% { transform: translateX(4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(-4px); opacity: 0; }
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }
  `,document.head.appendChild(ee);const ke=$=>{h(!1)},te=$=>{N==="from"?o($):d($),A(!1)},ue=async()=>{if(!n||!r||!u){G.error("Please fill in all fields");return}p(!0),v(!0),C("preparing"),M(null);try{console.log("Starting wrap/unwrap operation:",{fromToken:r.symbol,toToken:i?.symbol,amount:u,address:n});const K=await(t.current||new ne(window.ethereum)).getSigner();console.log("Got signer:",await K.getAddress());const ce=Te(u,18);console.log("Parsed amount:",ce.toString());const ye=new _(De.WETH,["function deposit() external payable","function withdraw(uint256) external","function approve(address spender, uint256 amount) external returns (bool)","function balanceOf(address) external view returns (uint256)"],K);if(r.symbol==="WETH"){const me=await ye.balanceOf(n);if(console.log("Current WETH balance:",me.toString()),me<ce)throw new Error(`Insufficient WETH balance. Required: ${Y(ce,18)}, Available: ${Y(me,18)}`)}C("wrapping");let Ne;r.symbol==="ETH"&&i?.symbol==="WETH"?(console.log("Wrapping ETH to WETH..."),Ne=await ye.deposit({value:ce})):r.symbol==="WETH"&&i?.symbol==="ETH"&&(console.log("Unwrapping WETH to ETH..."),Ne=await ye.withdraw(ce)),console.log("Transaction sent:",Ne.hash),C("confirming");const z=await Ne.wait();console.log("Transaction confirmed:",z),C("completed"),setTimeout(()=>{v(!1),C(null),setTimeout(()=>{w(!0),setTimeout(()=>{h(!0)},1e3),setTimeout(()=>{c(""),x(""),w(!1)},3e4)},100)},1e3)}catch($){console.error("Wrap/Unwrap error:",$);const K=$.reason||$.message||"Failed to wrap/unwrap";console.error("Error details:",{code:$.code,message:$.message,reason:$.reason,data:$.data}),M(K),C("error"),G.error(K)}finally{p(!1)}},de={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,y:-20,transition:{duration:.3}}},fe={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0,transition:{duration:.2}}},he={hover:{scale:1.02,transition:{duration:.2}},tap:{scale:.98}},Se={hover:{scale:1.1,rotate:180,transition:{duration:.2}},tap:{scale:.95}};return e.jsxs(B.div,{className:"space-y-6 max-w-lg mx-auto",variants:de,initial:"hidden",animate:"visible",exit:"exit",children:[k&&e.jsx(pt,{width:j.width,height:j.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(B.div,{className:"bg-white dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",variants:fe,children:e.jsx(Je,{mode:"wait",children:n?e.jsxs(B.div,{className:"space-y-4",variants:de,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs(B.div,{className:"space-y-2",variants:fe,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"From"}),e.jsxs(B.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:u,onChange:$=>{const K=$.target.value;(K===""||/^\d*\.?\d*$/.test(K))&&(c(K),le(null),be(!0))},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(B.button,{onClick:()=>{y("from"),A(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:he,whileHover:"hover",whileTap:"tap",children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(r),alt:r.symbol,className:"w-5 h-5"}),e.jsx("span",{children:r.symbol})]}):"Select Token"})]}),r&&e.jsx(gr,{token:r})]}),e.jsx("div",{className:"flex justify-center my-4",children:e.jsx(B.button,{onClick:()=>{const $=r,K=u;o(i),c(m),d($),x(K)},className:"p-2.5 rounded-xl bg-[#00ffbd]/10 text-[#00ffbd] hover:bg-[#00ffbd]/20 transition-colors border border-[#00ffbd]/20",variants:Se,whileHover:"hover",whileTap:"tap",children:e.jsx(Ts,{size:16})})}),e.jsxs(B.div,{className:"space-y-2",variants:fe,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"To"}),e.jsxs(B.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:m,readOnly:!0,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(B.button,{onClick:()=>{y("to"),A(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:he,whileHover:"hover",whileTap:"tap",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(i),alt:i.symbol,className:"w-5 h-5"}),e.jsx("span",{children:i.symbol})]}):"Select Token"})]}),i&&e.jsx(gr,{token:i})]}),e.jsx(Je,{children:e.jsxs(B.div,{className:"mt-4 p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",variants:fe,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"space-y-2 text-sm mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["Fee (",I?I.fees.map($=>($/1e4).toFixed(2)).join("% + "):"--","%)"]}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"A portion of each trade goes to liquidity providers as a protocol incentive.",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:I&&u?`${(u*(I.fees.reduce(($,K)=>$+K,0)/1e6)).toFixed(6)} ${r?.symbol}`:"--"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Network cost"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"Estimated cost of the transaction on Ethereum",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:"Check wallet for gas cost"})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-2"}),e.jsxs("button",{onClick:()=>O(!R),className:"flex items-center justify-between w-full text-sm text-gray-500 hover:text-gray-400",children:[R?"Hide Details":"Show Details",e.jsx(B.svg,{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:R?180:0},transition:{duration:.3},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx(Je,{children:R&&e.jsxs(B.div,{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-800",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Expected Output"}),e.jsxs("span",{className:"text-gray-200",children:[ve()?u:m," ",i?.symbol]})]}),!ve()&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Minimum received after slippage (",D,"%)"]}),e.jsxs("span",{className:"text-gray-200",children:[m&&Number(m*(1-D/100)).toFixed(6)," ",i?.symbol]})]}),I&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Route"}),e.jsx("span",{className:"text-gray-200",children:I.path.map(($,K)=>e.jsxs(ot.Fragment,{children:[K>0&&" → ",$.symbol]},K))})]}),W!==null&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Price Impact"}),e.jsxs("span",{className:`${W>15?"text-red-500":W>5?"text-yellow-500":"text-gray-200"}`,children:[W.toFixed(2),"%"]})]})]})]})})]})})]}):e.jsxs(B.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(B.div,{className:"mb-4",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:e.jsx(nt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx(B.h3,{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",variants:fe,children:"Connect Your Wallet"}),e.jsx(B.p,{className:"text-gray-500 dark:text-gray-400 mb-6",variants:fe,children:"Please connect your wallet to start swapping tokens"}),e.jsx(B.button,{onClick:openConnectModal,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",variants:he,whileHover:"hover",whileTap:"tap",children:"Connect Wallet"})]})})}),e.jsx(B.div,{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-4 border border-gray-200 dark:border-gray-800",variants:fe,children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Slippage Tolerance"}),e.jsxs("div",{className:"flex space-x-2",children:[[.5,1,2].map($=>e.jsxs("button",{onClick:()=>U($.toString()),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                    ${D===$&&!F?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:[$,"%"]},$)),e.jsx("button",{onClick:()=>U("custom"),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                  ${F?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:"Custom"})]})]}),F&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:D,onChange:$=>{const K=parseFloat($.target.value);!isNaN(K)&&K>=0&&K<=100&&Z(K)},className:"w-24 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Custom %"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-400",children:"%"})]})]})}),e.jsx(B.button,{onClick:ve()?ue:re,disabled:f||!r||!i||!u||!m&&!ve(),className:`
          w-full px-4 py-4 rounded-xl font-medium text-lg
          ${f||!r||!i||!u||!m&&!ve()?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black"}
        `,variants:he,whileHover:"hover",whileTap:"tap",children:q()}),ae&&!ve()&&e.jsx("div",{className:"text-sm text-red-500 mt-2 text-center",children:ae}),e.jsx(fn,{isOpen:b,onClose:()=>A(!1),onSelect:te,selectedToken:N==="from"?r:i,excludeToken:N==="from"?i:r}),ve()?e.jsx(ld,{isOpen:g,onClose:()=>{v(!1),C(null)},currentStep:T,fromToken:r,toToken:i,error:H}):e.jsx(id,{isOpen:g,onClose:()=>{v(!1),C(null)},currentStep:T,tokenIn:r,tokenOut:i,error:H}),e.jsx(se,{appear:!0,show:S,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:()=>h(!1),children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center",children:"How was your experience?"}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map($=>e.jsx("button",{onClick:()=>ke(),className:"p-2 hover:bg-[#00ffbd]/10 rounded-full transition-colors",children:e.jsx(Dt,{size:24,className:$<=3?"text-yellow-500":"text-[#00ffbd]"})},$))})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>h(!1),className:"w-full py-2 bg-[#00ffbd] text-black rounded-lg",children:"Close"})})]})})})})]})})]})}function a0(){const{address:n,isConnected:a}=Le(),{open:t}=useWeb3Modal(),[s,r]=l.useState(null),o=Bt(),[i,d]=l.useState(null),[u,c]=l.useState(null),[m,x]=l.useState(""),[f,p]=l.useState(""),[b,A]=l.useState("0.3"),[N,y]=l.useState(!1),[k,w]=l.useState(!1),[g,v]=l.useState(!1),[S,h]=l.useState(null);l.useEffect(()=>{(async()=>{if(window.ethereum){const R=await window.ethereum.request({method:"eth_chainId"});r(parseInt(R,16))}})(),window.ethereum?.on("chainChanged",R=>{r(parseInt(R,16))})},[]);const T=async E=>{if(E.symbol==="ETH")d({...E,address:oe.WETH,decimals:18});else{const R=await Ze(E.address);if(R)d({...E,name:R.name,symbol:R.symbol,decimals:R.decimals||18,logo:R.logo,logoIpfs:R.logoIpfs});else{const O=await o.getTokenInfo(E.address);d({...E,...O,name:E.name||O.name,symbol:E.symbol||O.symbol})}}w(!1)},C=async E=>{if(E.symbol==="ETH")c({...E,address:oe.WETH,decimals:18});else{const R=await Ze(E.address);if(R)c({...E,name:R.name,symbol:R.symbol,decimals:R.decimals||18,logo:R.logo,logoIpfs:R.logoIpfs});else{const O=await o.getTokenInfo(E.address);c({...E,...O,name:E.name||O.name,symbol:E.symbol||O.symbol})}}v(!1)},H=E=>{(E===""||/^\d*\.?\d*$/.test(E))&&x(E)},M=E=>{(E===""||/^\d*\.?\d*$/.test(E))&&p(E)},j=async()=>{if(!a){t();return}if(!i||!u){G.error("Please select both tokens");return}if(!m||!f){G.error("Please enter both amounts");return}y(!0);try{if(await o.checkPoolExists(i.address,u.address)){G.error("This pool already exists. Please use the Add Liquidity feature instead."),y(!1);return}const R=Te(m,i.decimals),O=Te(f,u.decimals);G.loading("Creating pool and adding liquidity...",{id:"pool-create"});const D=await o.createPool(i.address,u.address,R,O);console.log("Pool created at:",D.pairAddress),G.success("Pool created and liquidity added successfully!",{id:"pool-create"}),x(""),p(""),d(null),c(null)}catch(E){console.error("Error creating pool:",E),G.error(E.message.includes("insufficient")?"Insufficient balance for transaction":E.message.includes("chain")?"Please switch to a supported network":E.message.includes("approve")?E.message:`Failed to create pool: ${E.message}`,{id:"pool-create"})}finally{y(!1)}};return l.useEffect(()=>{async function E(){if(!(!i||!u))try{setPriceRatio(1),useAutoPrice&&(m?p(calculateOtherAmount(m,!0)):f&&x(calculateOtherAmount(f,!1)))}catch(R){console.error("Error fetching prices:",R),setPriceRatio(1)}}E()},[i,u]),l.useEffect(()=>{async function E(){if(!i||!u||!m||!f){h(null);return}try{const R=Te(m,i.decimals),O=Te(f,u.decimals),D=o.calculateInitialPoolPrice(R,O,i.decimals,u.decimals);h({token0Price:D.token0Price,token1Price:D.token1Price})}catch(R){console.error("Error calculating price:",R),h(null)}}E()},[i,u,m,f]),e.jsxs("div",{className:"space-y-6 max-w-lg mx-auto",children:[e.jsx("div",{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 1"}),e.jsx("div",{className:"space-y-2",children:e.jsx("button",{onClick:()=>w(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:i?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:i.logo,alt:i.symbol,className:"w-5 h-5"}),e.jsx("span",{children:i.symbol})]}):"Select Token"})}),i&&e.jsx("input",{type:"text",value:m,onChange:E=>H(E.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 2"}),e.jsx("div",{className:"space-y-2",children:e.jsx("button",{onClick:()=>v(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:u?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:u.logo,alt:u.symbol,className:"w-5 h-5"}),e.jsx("span",{children:u.symbol})]}):"Select Token"})}),u&&e.jsx("input",{type:"text",value:f,onChange:E=>M(E.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),S&&i&&u&&e.jsxs("div",{className:"mt-6 p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Initial Pool Price"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["1 ",i.symbol," ="]}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(S.token0Price).toLocaleString(void 0,{maximumFractionDigits:6})," ",u.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["1 ",u.symbol," ="]}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(S.token1Price).toLocaleString(void 0,{maximumFractionDigits:6})," ",i.symbol]})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Fee Tier"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["0.01","0.05","0.3","1"].map(E=>e.jsxs("button",{onClick:()=>A(E),className:`
                      px-4 py-2 rounded-xl text-sm font-medium
                      ${b===E?"bg-[#00ffbd] text-black":"bg-white/10 dark:bg-[#2d2f36] text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80"}
                      transition-colors
                    `,children:[E,"%"]},E))})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-500/5 dark:bg-blue-500/10 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"About Pool Creation"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Creating a new liquidity pool allows you to be the first liquidity provider. The ratio of tokens you add will set the initial price. Make sure to add sufficient liquidity to minimize price impact from trades."})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(nt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create a liquidity pool"}),e.jsx("button",{onClick:t,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]})}),e.jsx("button",{onClick:j,disabled:N||!i||!u||!m||!f,className:`
          w-full px-4 py-4 rounded-xl font-medium text-black text-lg
          ${N||!i||!u||!m||!f?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
        `,children:N?"Creating Pool...":"Create Pool"}),e.jsx(za,{isOpen:k,onClose:()=>w(!1),onSelect:T,selectedTokenAddress:i?.address}),e.jsx(za,{isOpen:g,onClose:()=>v(!1),onSelect:C,selectedTokenAddress:u?.address})]})}const pn=document.createElement("style");pn.textContent=`
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(0.8);
      opacity: 0.5;
    }
  }
`;document.head.appendChild(pn);ie.WETH,ie.USDT;const Qt={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Creating:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-pulse",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"animate-[spin_3s_linear_infinite]",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Info:()=>e.jsx("svg",{className:"w-6 h-6 text-blue-500",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},dd=({isOpen:n,onClose:a,currentStep:t,token0:s,token1:r,isNewPool:o,error:i,poolExists:d,setActiveTab:u})=>{const c=[{id:"preparing",title:"Preparing",icon:e.jsx(Qt.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(Qt.Approval,{})},...o?[{id:"creating",title:"Creating Pool",icon:e.jsx(Qt.Creating,{})}]:[],{id:"adding",title:"Adding Liquidity",icon:e.jsx(Qt.Adding,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Qt.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Qt.Completed,{})}],m=!!i,x=i==="pool exists";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:x?"Pool Already Exists":o?"Creating New Pool":"Adding Initial Liquidity"}),x&&d?e.jsx(ud,{token0:s,token1:r,poolAddress:d.address,onClose:a,setActiveTab:u}):e.jsx("div",{className:"space-y-4",children:c.map((f,p)=>{const b=t===f.id,A=!m&&c.findIndex(y=>y.id===t)>p,N=m&&t===f.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${b&&!N?"bg-[#00ffbd]/10 text-[#00ffbd]":A?"text-[#00ffbd]":N?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[f.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:f.title}),b&&!m&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[f.id==="preparing"&&"Preparing transaction...",f.id==="approval"&&`Approving ${s?.symbol} and ${r?.symbol}`,f.id==="creating"&&"Creating new liquidity pool...",f.id==="adding"&&"Adding initial liquidity...",f.id==="confirming"&&"Waiting for confirmation...",f.id==="completed"&&"Transaction completed!"]})]}),A&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},f.id)})})]})})})})]})})},cd=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-[99998]",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Pool Creation Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(9)].map((d,u)=>{const c=u+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>i(c),onMouseLeave:()=>i(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(o||s)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s===0?"Select a rating":`You rated: ${s} star${s!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{s>0&&(t(s),a())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${s>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},ud=({token0:n,token1:a,poolAddress:t,onClose:s,setActiveTab:r})=>{ua();const o=()=>{s(),r("liquidity",{selectedTokens:{token0:n,token1:a},poolAddress:t})},i=()=>{navigator.clipboard.writeText(t),G.success("Pool address copied to clipboard!",{style:{borderRadius:"10px",background:"#333",color:"#fff"}})};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 rounded-xl bg-[#00ffbd]/5 dark:bg-[#00ffbd]/10 border border-[#00ffbd]/10 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd] mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Pool Already Exists"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:["A liquidity pool for ",n?.symbol,"/",a?.symbol," already exists."]}),e.jsx("div",{className:"mt-2 p-2 bg-white/50 dark:bg-black/50 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"Pool Address:"}),e.jsxs("button",{onClick:i,className:"text-xs text-[#00ffbd] hover:text-[#00ffbd]/80 transition-colors truncate",title:t,children:[t.slice(0,6),"...",t.slice(-4)," (Click to Copy)"]})]})})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:o,className:"px-4 py-2 text-sm font-medium text-black dark:text-black bg-[#00ffbd] rounded-lg hover:bg-[#00ffbd]/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#00ffbd] focus-visible:ring-offset-2 transition-colors",children:"Add Liquidity"})]})]})})},md=async(n,a,t,s)=>{if(!n||!a||!t||!s)return null;try{return parseFloat(s)/parseFloat(t)}catch(r){return console.error("Error calculating price ratio:",r),null}},xd={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},rt={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},Da={hover:{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}},tap:{scale:.98}},hd=({currentChainId:n})=>{const t=(()=>{switch(n){case 1301:return{name:"Unichain Testnet",status:"supported",className:"bg-green-500/10 text-green-500 border-green-500/20"};case 130:return{name:"Unichain Mainnet",status:"supported",className:"bg-blue-500/10 text-blue-500 border-blue-500/20"};case 10143:return{name:"Monad Testnet",status:"supported",className:"bg-purple-500/10 text-purple-500 border-purple-500/20"};default:return{name:"Unsupported Network",status:"unsupported",className:"bg-red-500/10 text-red-500 border-red-500/20"}}})();return e.jsxs("div",{className:`px-4 py-2 rounded-xl text-sm font-medium ${t.className} border mb-4`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.status==="supported"?"bg-current":"bg-red-500"}`}),e.jsx("span",{children:t.name})]}),t.status==="unsupported"&&e.jsx("p",{className:"text-xs mt-1",children:"Please switch to Unichain network (Testnet or Mainnet) or Monad Testnet to create pools"})]})},fd=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)"],br=({token:n})=>{const[a,t]=l.useState("0"),[s,r]=l.useState(!1),{address:o}=Le();return l.useEffect(()=>{async function i(){if(!(!n||!o||!window.ethereum))try{r(!0);const d=new ne(window.ethereum),u=await d.getNetwork().then(c=>Number(c.chainId));if(n.isNative||n.symbol==="ETH"||n.symbol==="MON"){const c=await d.getBalance(o);t(Ve(c));return}try{const c=new _(n.address,fd,d),[m,x]=await Promise.all([c.balanceOf(o),c.decimals()]);t(Y(m,x))}catch(c){if(console.error("Error fetching ERC20 balance:",c),u===10143){const m=zt.defaultAbiCoder().encode(["address"],[o]).slice(2),x=await window.ethereum.request({method:"eth_call",params:[{to:n.address,data:"0x70a08231"+m},"latest"]}),f=BigInt(x);t(Y(f,n.decimals||18))}else throw c}}catch(d){console.error("Error fetching balance:",d),t("0")}finally{r(!1)}}i()},[n,o]),!n||!o?null:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Balance:"}),s?e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 w-20 rounded"}):e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(a).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:6})," ",n.symbol]})]})};function s0({setActiveTab:n}){const{address:a}=Le();ua();const[t,s]=l.useState(null),r=ct(),[o,i]=l.useState(null),[d,u]=l.useState(null),[c,m]=l.useState(""),[x,f]=l.useState("");l.useState("0.3");const[p,b]=l.useState(!1),[A,N]=l.useState(!1),[y,k]=l.useState(!1),[w,g]=l.useState(null),[v,S]=l.useState(null),[h,T]=l.useState(!1),[C,H]=l.useState(null),[M,j]=l.useState(!1),[E,R]=l.useState(!1),[O,D]=l.useState(!1),[Z,F]=l.useState(null),[L,I]=l.useState(null),[V,W]=l.useState({width:window.innerWidth,height:window.innerHeight});l.useEffect(()=>{let P=!0;const J=async()=>{if(!(!window.ethereum||!P))try{const U=await window.ethereum.request({method:"eth_chainId"});P&&s(parseInt(U,16))}catch(U){console.error("Error checking chain:",U)}},re=U=>{P&&s(parseInt(U,16))};return J(),window.ethereum&&window.ethereum.on("chainChanged",re),()=>{P=!1,window.ethereum&&window.ethereum.removeListener("chainChanged",re)}},[]);const X=t===1301||t===130||t===10143,ae=async P=>{try{if(!X){G.error("Please switch to Unichain network (Testnet or Mainnet) or Monad Testnet");return}if(P.symbol==="WETH"&&t!==10143){G.error("Please use ETH instead of WETH. The router will automatically convert ETH to WETH.",{duration:6e3,style:{borderRadius:"10px",background:"#333",color:"#fff"}});return}let J;if(P.symbol==="ETH"||P.symbol==="MON")J={...P,address:ie[t]?.WETH,decimals:18,isNative:!0};else try{const re=await Ze(P.address);if(re)J={...P,name:re.name,symbol:re.symbol,decimals:re.decimals||18,logo:re.logo,logoIpfs:re.logoIpfs};else{const U=await r.getTokenInfo(P.address);J={...P,...U,name:P.name||U.name,symbol:P.symbol||U.symbol,logo:P.logo||"/token-placeholder.png"}}}catch{const U=await r.getTokenInfo(P.address);J={...P,...U,name:P.name||U.name,symbol:P.symbol||U.symbol,logo:P.logo||"/token-placeholder.png"}}if(i(J),N(!1),d){const re=new ne(window.ethereum),U=ie[t]?.factory;if(!U)throw new Error("Invalid network configuration");if(t===10143){const q=zt.defaultAbiCoder().encode(["address","address"],[J.address,d.address]).slice(2),ee=await window.ethereum.request({method:"eth_call",params:[{to:U,data:"0xe6a43905"+q},"latest"]});if(ee&&ee!=="0x0000000000000000000000000000000000000000000000000000000000000000"){const ke="0x"+ee.slice(26);I({address:ke}),F("pool exists"),T(!0),H("preparing")}else I(null),F(null)}else{const ee=await new _(U,["function getPair(address tokenA, address tokenB) external view returns (address pair)"],re).getPair(J.address,d.address);ee&&ee!==va?(I({address:ee}),F("pool exists"),T(!0),H("preparing")):(I(null),F(null))}}}catch(J){console.error("Error selecting token0:",J),G.error("Failed to load token information. Please try again.")}},le=async P=>{try{if(!X){G.error("Please switch to Unichain network (Testnet or Mainnet) or Monad Testnet");return}if(P.symbol==="WETH"&&t!==10143){G.error("Please use ETH instead of WETH. The router will automatically convert ETH to WETH.",{duration:6e3,style:{borderRadius:"10px",background:"#333",color:"#fff"}});return}let J;if(P.symbol==="ETH"||P.symbol==="MON")J={...P,address:ie[t]?.WETH,decimals:18,isNative:!0};else try{const re=await Ze(P.address);if(re)J={...P,name:re.name,symbol:re.symbol,decimals:re.decimals||18,logo:re.logo,logoIpfs:re.logoIpfs};else{const U=await r.getTokenInfo(P.address);J={...P,...U,name:P.name||U.name,symbol:P.symbol||U.symbol,logo:P.logo||"/token-placeholder.png"}}}catch(re){console.warn("Firebase fetch failed, falling back to contract:",re);const U=await r.getTokenInfo(P.address);J={...P,...U,name:P.name||U.name,symbol:P.symbol||U.symbol,logo:P.logo||"/token-placeholder.png"}}if(u(J),k(!1),o){const re=new ne(window.ethereum),U=ie[t]?.factory;if(!U)throw new Error("Invalid network configuration");const ee=await new _(U,["function getPair(address tokenA, address tokenB) external view returns (address pair)"],re).getPair(o.address,J.address);ee&&ee!==va?(I({address:ee}),F("pool exists"),T(!0),H("preparing")):(I(null),F(null))}}catch(J){console.error("Error selecting token1:",J),G.error("Failed to load token information. Please try again.")}},xe=P=>{if(m(P),P&&o&&d){const J=x||P;g({token0Price:parseFloat(J)/parseFloat(P),token1Price:parseFloat(P)/parseFloat(J)})}},be=P=>{f(P),P&&o&&d&&c&&g({token0Price:parseFloat(P)/parseFloat(c),token1Price:parseFloat(c)/parseFloat(P)})};l.useEffect(()=>{const P=()=>{W({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]);const ge=P=>{console.log("User rated pool creation:",P)},ve=async()=>{if(!a){openConnectModal();return}if(!X){G.error("Please switch to a supported network (Unichain or Monad Testnet)");return}if(!o||!d){F("Please select both tokens"),T(!0),H("preparing");return}if(!c||!x){F("Please enter both amounts"),T(!0),H("preparing");return}b(!0),T(!0),H("preparing"),F(null);try{const P=new ne(window.ethereum),J=ie[t]?.factory;if(!J)throw new Error("Invalid network configuration");let re;if(t===10143){const ke=new Pt(["function getPair(address tokenA, address tokenB) external view returns (address pair)"]).encodeFunctionData("getPair",[o.address,d.address]),te=await P.call({to:J,data:ke});re=ja(ni(te,12))}else re=await new _(J,["function getPair(address tokenA, address tokenB) external view returns (address pair)"],P).getPair(o.address,d.address);if(re&&re!==va){I({address:re}),F("pool exists"),H("preparing"),b(!1);return}j(!0),H("approval");const U=Te(c,o.decimals),q=Te(x,d.decimals);if(t===10143){const ee=ie[t].router,ke=new Pt(["function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)"]),te=await P.getSigner(),ue=Math.floor(Date.now()/1e3)+60*20;if(o.isNative||d.isNative){const de=o.isNative?d.address:o.address,fe=o.isNative?q:U,he=o.isNative?U:q;o.isNative?d.isNative||await new _(d.address,["function approve(address spender, uint256 amount) external returns (bool)"],te).approve(ee,q):await new _(o.address,["function approve(address spender, uint256 amount) external returns (bool)"],te).approve(ee,U),await(await te.sendTransaction({to:ee,data:ke.encodeFunctionData("addLiquidityETH",[de,fe,fe,he,await te.getAddress(),ue]),value:he})).wait()}else{const de=new _(o.address,["function approve(address spender, uint256 amount) external returns (bool)"],te),fe=new _(d.address,["function approve(address spender, uint256 amount) external returns (bool)"],te);await de.approve(ee,U),await fe.approve(ee,q),await(await te.sendTransaction({to:ee,data:ke.encodeFunctionData("addLiquidity",[o.address,d.address,U,q,U,q,await te.getAddress(),ue])})).wait()}}else await r.createPool(o.address,d.address,U,q);H("completed"),setTimeout(()=>{T(!1),H(null),R(!0),setTimeout(()=>{D(!0)},1e3),setTimeout(()=>{m(""),f(""),R(!1)},3e4)},1e3)}catch(P){console.error("Pool creation error:",P),F(P.message)}finally{b(!1)}};return l.useEffect(()=>{(async()=>{if(o&&d&&c&&x){const J=await md(o,d,c,x);S(J),g({token0Price:parseFloat(x)/parseFloat(c),token1Price:parseFloat(c)/parseFloat(x)})}else S(null),g(null)})()},[o,d,c,x]),e.jsxs(B.div,{variants:xd,initial:"hidden",animate:"show",className:"space-y-6 max-w-lg mx-auto",children:[E&&e.jsx(pt,{width:V.width,height:V.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs(B.div,{variants:rt,className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsx(hd,{currentChainId:t}),a?e.jsx(Je,{mode:"wait",children:e.jsxs(B.div,{variants:rt,className:"space-y-4",children:[e.jsxs(B.div,{variants:rt,className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 1"}),e.jsx(B.button,{variants:Da,whileHover:"hover",whileTap:"tap",onClick:()=>N(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:o?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:o.logo,alt:o.symbol,className:"w-5 h-5"}),e.jsx("span",{children:o.symbol})]}),e.jsx(br,{token:o})]}):"Select Token"}),o&&e.jsx(B.input,{variants:rt,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},type:"text",value:c,onChange:P=>xe(P.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),e.jsxs(B.div,{variants:rt,className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 2"}),e.jsx(B.button,{variants:Da,whileHover:"hover",whileTap:"tap",onClick:()=>k(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:d?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:d.logo,alt:d.symbol,className:"w-5 h-5"}),e.jsx("span",{children:d.symbol})]}),e.jsx(br,{token:d})]}):"Select Token"}),d&&e.jsx(B.input,{variants:rt,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},type:"text",value:x,onChange:P=>be(P.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),w&&o&&d&&c&&x&&e.jsxs(B.div,{variants:rt,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 p-4 bg-white/5 dark:bg-[#2d2f36]/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Initial Prices"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"The ratio of tokens you add will set the initial price of the pool."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white/5 dark:bg-black/20 p-2 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["1 ",o.symbol," ="]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[w.token0Price.toFixed(6)," ",d.symbol]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/5 dark:bg-black/20 p-2 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["1 ",d.symbol," ="]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[w.token1Price.toFixed(6)," ",o.symbol]})]})]})]}),e.jsxs(B.div,{variants:rt,className:"mt-6 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Fee Tier"}),e.jsx(B.div,{variants:rt,className:"w-full",children:e.jsx("div",{className:"px-4 py-3 bg-[#00ffbd]/10 rounded-xl text-sm font-medium text-[#00ffbd] flex items-center justify-center",children:"0.3% (Fixed Fee Tier)"})})]}),e.jsxs(B.div,{variants:rt,className:"mt-6 p-4 bg-blue-500/5 dark:bg-blue-500/10 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"About Pool Creation"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Creating a new liquidity pool allows you to be the first liquidity provider. The ratio of tokens you add will set the initial price. Make sure to add sufficient liquidity to minimize price impact from trades."})]})]})}):e.jsxs(B.div,{variants:rt,className:"text-center py-8",children:[e.jsx(B.div,{className:"mb-4",animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(nt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx(B.h3,{variants:rt,className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx(B.p,{variants:rt,className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create a liquidity pool"}),e.jsx(B.button,{variants:Da,whileHover:"hover",whileTap:"tap",onClick:openConnectModal,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]})]}),!L&&e.jsx(B.button,{variants:Da,whileHover:"hover",whileTap:"tap",onClick:ve,disabled:p||!o||!d||!c||!x||!X,className:`
            w-full px-4 py-4 rounded-xl font-medium text-black text-lg
            ${p||!o||!d||!c||!x||!X?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
          `,children:p?"Creating Pool...":X?"Create Pool":"Switch to Unichain Network"}),e.jsx(Ga,{isOpen:A,onClose:()=>N(!1),onSelect:ae,selectedTokenAddress:o?.address,currentChainId:t}),e.jsx(Ga,{isOpen:y,onClose:()=>k(!1),onSelect:le,selectedTokenAddress:d?.address,currentChainId:t}),e.jsx(dd,{isOpen:h,onClose:()=>{T(!1),H(null),F(null)},currentStep:C,token0:o,token1:d,isNewPool:M,error:Z,poolExists:L,setActiveTab:n}),e.jsx(cd,{isOpen:O,onClose:()=>D(!1),onRate:ge})]})}const yr=["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)"],hs="0xb7610f9b733e7d45184be3a1bc8a847be6ec4f0b",pd=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH9",type:"address"},{internalType:"address",name:"_tokenDescriptor_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Collect",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"DecreaseLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"IncreaseLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"WETH9",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint128",name:"amount0Max",type:"uint128"},{internalType:"uint128",name:"amount1Max",type:"uint128"}],internalType:"struct INonfungiblePositionManager.CollectParams",name:"params",type:"tuple"}],name:"collect",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceX96",type:"uint160"}],name:"createAndInitializePoolIfNecessary",outputs:[{internalType:"address",name:"pool",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct INonfungiblePositionManager.DecreaseLiquidityParams",name:"params",type:"tuple"}],name:"decreaseLiquidity",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount0Desired",type:"uint256"},{internalType:"uint256",name:"amount1Desired",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct INonfungiblePositionManager.IncreaseLiquidityParams",name:"params",type:"tuple"}],name:"increaseLiquidity",outputs:[{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256",name:"amount0Desired",type:"uint256"},{internalType:"uint256",name:"amount1Desired",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct INonfungiblePositionManager.MintParams",name:"params",type:"tuple"}],name:"mint",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"positions",outputs:[{internalType:"uint96",name:"nonce",type:"uint96"},{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"refundETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowed",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowedIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount0Owed",type:"uint256"},{internalType:"uint256",name:"amount1Owed",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"uniswapV3MintCallback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],Mt={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},ia={[Mt.LOWEST]:1,[Mt.LOW]:10,[Mt.MEDIUM]:60,[Mt.HIGH]:200},gd="0x1f984000000000000000000000000000000000003",bd=["function slot0() external view returns (uint160 sqrtPriceX96, int24 tick, uint16 observationIndex, uint16 observationCardinality, uint16 observationCardinalityNext, uint8 feeProtocol, bool unlocked)","function liquidity() external view returns (uint128)","function token0() external view returns (address)","function token1() external view returns (address)"];class ft{constructor(a){if(!a)throw new Error("Signer or provider is required");a.provider?(this.provider=a.provider,this.signer=a):a.getSigner?(this.provider=a,this.signer=a.getSigner()):(this.provider=a,this.signer=null),this.contract=new _(hs,pd,this.signer||this.provider)}async checkTokenAllowance(a,t){try{return await new _(a,yr,this.provider).allowance(t,hs)}catch(s){throw console.error("Error checking token allowance:",s),s}}async approveToken(a,t){if(!this.signer)throw new Error("Signer is required for approving tokens");try{return await(await new _(a,yr,this.signer).approve(hs,t)).wait()}catch(s){throw console.error("Error approving token:",s),s}}async ensureTokenApprovals(a){const{token0:t,token1:s,amount0Desired:r,amount1Desired:o,ownerAddress:i}=a;try{const d=await this.checkTokenAllowance(t,i),u=await this.checkTokenAllowance(s,i),c=tt(r.toString()),m=tt(o.toString()),x=tt(d.toString()),f=tt(u.toString());x<c&&await this.approveToken(t,lt),f<m&&await this.approveToken(s,lt)}catch(d){throw console.error("Error ensuring token approvals:",d),d}}async createAndInitializePool(a,t,s,r){if(!this.signer)throw new Error("Signer is required for creating pool");try{let o=a,i=t,d=r;BigInt(a)>BigInt(t)&&(o=t,i=a,r&&(d=2n**192n/BigInt(r))),d||(d=Qr("79228162514264337593543950336"));const c=await(await this.contract.createAndInitializePoolIfNecessary(o,i,s,d,{gasLimit:5e6})).wait(),x=c.logs.map(f=>{try{return this.contract.interface.parseLog(f)}catch{return null}}).filter(Boolean).find(f=>f.name==="PoolCreated"||f.name==="Pool"||f.fragment?.name==="PoolCreated");if(!x){const f=await this.contract.factory(),b=await new _(f,["function getPool(address,address,uint24) view returns (address)"],this.provider).getPool(o,i,s);if(b==="0x0000000000000000000000000000000000000000")throw new Error("Failed to create or find pool");return{pool:b,token0:o,token1:i,fee:s,receipt:c}}return{pool:x.args.pool,token0:o,token1:i,fee:s,receipt:c}}catch(o){throw console.error("Error creating pool:",o),o}}async mint(a){if(!this.signer)throw new Error("Signer is required for minting");try{const{token0:t,token1:s,fee:r,tickLower:o,tickUpper:i,amount0Desired:d,amount1Desired:u,amount0Min:c=0,amount1Min:m=0,recipient:x,deadline:f=Math.floor(Date.now()/1e3)+1200}=a;let p=t,b=s,A=d,N=u,y=c,k=m,w=o,g=i;BigInt(t)>BigInt(s)&&(p=s,b=t,A=u,N=d,y=m,k=c,w=-i,g=-o);const v=ia[r];w=Math.floor(w/v)*v,g=Math.floor(g/v)*v;const S=await this.signer.getAddress();await this.ensureTokenApprovals({token0:p,token1:b,amount0Desired:A,amount1Desired:N,ownerAddress:S});const h={token0:p,token1:b,fee:r,tickLower:w,tickUpper:g,amount0Desired:A,amount1Desired:N,amount0Min:y,amount1Min:k,recipient:x||S,deadline:f},C=await(await this.contract.mint(h,{gasLimit:1e6})).wait(),H=C.logs.map(E=>{try{return this.contract.interface.parseLog(E)}catch{return null}}).filter(Boolean),M=H.find(E=>E.name==="Transfer"),j=H.find(E=>E.name==="IncreaseLiquidity"||E.fragment?.name==="IncreaseLiquidity");if(!M||!j)throw new Error("Required events not found in transaction receipt");return{tokenId:M.args.tokenId||M.args.id,liquidity:j.args.liquidity,amount0:j.args.amount0,amount1:j.args.amount1,receipt:C}}catch(t){throw console.error("Error minting position:",t),t}}async increaseLiquidity(a){try{return await this.ensureTokenApprovals(a),await(await this.contract.increaseLiquidity(a)).wait()}catch(t){throw console.error("Error increasing liquidity:",t),t}}async decreaseLiquidity(a){try{return await(await this.contract.decreaseLiquidity(a)).wait()}catch(t){throw console.error("Error decreasing liquidity:",t),t}}async collect(a){try{return await(await this.contract.collect(a)).wait()}catch(t){throw console.error("Error collecting fees:",t),t}}async burn(a){try{return await(await this.contract.burn(a)).wait()}catch(t){throw console.error("Error burning position:",t),t}}async getPosition(a){try{const t=await this.contract.positions(a);return{nonce:t.nonce,operator:t.operator,token0:t.token0,token1:t.token1,fee:t.fee,tickLower:t.tickLower,tickUpper:t.tickUpper,liquidity:t.liquidity,feeGrowthInside0LastX128:t.feeGrowthInside0LastX128,feeGrowthInside1LastX128:t.feeGrowthInside1LastX128,tokensOwed0:t.tokensOwed0,tokensOwed1:t.tokensOwed1}}catch(t){throw console.error("Error getting position:",t),t}}async getPositionsForOwner(a){try{const t=await this.contract.balanceOf(a),s=[];for(let r=0;r<t;r++){const o=await this.contract.tokenOfOwnerByIndex(a,r),i=await this.getPosition(o);s.push({tokenId:o,...i})}return s}catch(t){throw console.error("Error getting positions for owner:",t),t}}static formatMintParams({token0:a,token1:t,fee:s,tickLower:r,tickUpper:o,amount0Desired:i,amount1Desired:d,amount0Min:u,amount1Min:c,recipient:m,deadline:x}){return{token0:a,token1:t,fee:s,tickLower:r,tickUpper:o,amount0Desired:i,amount1Desired:d,amount0Min:u||0,amount1Min:c||0,recipient:m,deadline:x||Math.floor(Date.now()/1e3)+1200}}static formatIncreaseLiquidityParams({tokenId:a,amount0Desired:t,amount1Desired:s,amount0Min:r,amount1Min:o,deadline:i}){return{tokenId:a,amount0Desired:t,amount1Desired:s,amount0Min:r||0,amount1Min:o||0,deadline:i||Math.floor(Date.now()/1e3)+1200}}static formatDecreaseLiquidityParams({tokenId:a,liquidity:t,amount0Min:s,amount1Min:r,deadline:o}){return{tokenId:a,liquidity:t,amount0Min:s||0,amount1Min:r||0,deadline:o||Math.floor(Date.now()/1e3)+1200}}static formatCollectParams({tokenId:a,recipient:t,amount0Max:s,amount1Max:r}){return{tokenId:a,recipient:t,amount0Max:s||void 0,amount1Max:r||void 0}}static getPriceFromTick(a,t,s){return 1.0001**a*10**(s-t)}static getTickFromPrice(a,t,s){const r=a/10**(s-t);return Math.floor(Math.log(r)/Math.log(1.0001))}static getNearestValidTick(a,t){const s=ia[t];return Math.round(a/s)*s}static getFullRangeTicks(a){return{tickLower:-887272,tickUpper:887272}}static getPriceRangeTicks({basePrice:a,lowerPricePercent:t,upperPricePercent:s,decimals0:r,decimals1:o,feeAmount:i}){const d=a*(1-t/100),u=a*(1+s/100);let c=this.getTickFromPrice(d,r,o),m=this.getTickFromPrice(u,r,o);return c=this.getNearestValidTick(c,i),m=this.getNearestValidTick(m,i),{tickLower:c,tickUpper:m}}static getAmountsWithSlippage(a,t,s){const r=1-s/100;return{amount0Min:BigInt(Math.floor(Number(a)*r)),amount1Min:BigInt(Math.floor(Number(t)*r))}}async addLiquidityPreview({token0:a,token1:t,fee:s,amount0Desired:r,amount1Desired:o,tickLower:i,tickUpper:d,slippagePercent:u=.5,recipient:c,deadline:m}){try{const{amount0Min:x,amount1Min:f}=this.constructor.getAmountsWithSlippage(r,o,u);return this.constructor.formatMintParams({token0:a,token1:t,fee:s,tickLower:i,tickUpper:d,amount0Desired:r,amount1Desired:o,amount0Min:x,amount1Min:f,recipient:c,deadline:m})}catch(x){throw console.error("Error previewing add liquidity:",x),x}}async removeLiquidityPreview({tokenId:a,liquidity:t,slippagePercent:s=.5,deadline:r}){try{const o=await this.getPosition(a),i=o.tokensOwed0,d=o.tokensOwed1,{amount0Min:u,amount1Min:c}=this.constructor.getAmountsWithSlippage(i,d,s);return{params:this.constructor.formatDecreaseLiquidityParams({tokenId:a,liquidity:t,amount0Min:u,amount1Min:c,deadline:r}),expectedAmounts:{amount0:i,amount1:d}}}catch(o){throw console.error("Error previewing remove liquidity:",o),o}}static formatPositionDisplay(a){return{tokenId:a.tokenId,token0Symbol:a.token0Symbol,token1Symbol:a.token1Symbol,fee:a.fee/1e4,tickLower:a.tickLower,tickUpper:a.tickUpper,priceLower:this.getPriceFromTick(a.tickLower,a.decimals0,a.decimals1),priceUpper:this.getPriceFromTick(a.tickUpper,a.decimals0,a.decimals1),liquidity:a.liquidity.toString(),tokensOwed0:a.tokensOwed0.toString(),tokensOwed1:a.tokensOwed1.toString()}}static getFeeTierOptions(){return[{value:Mt.LOWEST,label:"0.01%",description:"Best for very stable pairs"},{value:Mt.LOW,label:"0.05%",description:"Best for stable pairs"},{value:Mt.MEDIUM,label:"0.3%",description:"Best for most pairs"},{value:Mt.HIGH,label:"1%",description:"Best for volatile pairs"}]}static getPriceRangePresets(){return[{label:"Full Range",value:"full",description:"Provides liquidity across all price ranges"},{label:"Safe",value:"safe",lowerPricePercent:10,upperPricePercent:10,description:"±10% from current price"},{label:"Moderate",value:"moderate",lowerPricePercent:20,upperPricePercent:20,description:"±20% from current price"},{label:"Wide",value:"wide",lowerPricePercent:50,upperPricePercent:50,description:"±50% from current price"}]}async multicall(a,t={}){if(!this.signer)throw new Error("Signer is required for multicall");try{const s=this.contract.interface.encodeFunctionData("multicall",[a]),r={to:this.contract.address,data:s,...t,value:t.value?t.value:0n},i=await(await this.signer.sendTransaction(r)).wait(),d=i.logs.map(u=>{try{return this.contract.interface.parseLog(u)}catch{return null}}).filter(Boolean);return{receipt:i,results:d}}catch(s){throw console.error("Error in multicall:",s),s}}encodeFunctionData(a,t){return this.contract.interface.encodeFunctionData(a,t)}async quoteExactInputSingle(a){try{const t=Y(a.amountIn,18);return console.log("Quoting:",t,"of token:",a.tokenIn,"to token:",a.tokenOut),{amountOut:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountOut:"0",isNewPool:!0}}catch(t){return console.error("Error getting quote:",t),{amountOut:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountOut:"0",isNewPool:!0,error:t.message}}}async quoteExactOutputSingle(a){try{const t=Y(a.amount,18);return console.log("Quoting for desired output:",t,"of token:",a.tokenOut),{amountIn:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountIn:"0",isNewPool:!0}}catch(t){return console.error("Error getting quote:",t),{amountIn:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountIn:"0",isNewPool:!0,error:t.message}}}async getPoolData(a,t,s){try{const o=await new _(gd,["function getPool(address tokenA, address tokenB, uint24 fee) external view returns (address pool)"],this.provider).getPool(a,t,s);if(o===va)return{exists:!1,sqrtPriceX96:0n,tick:0,liquidity:0n,token0:a,token1:t,poolAddress:null};const i=new _(o,bd,this.provider),[d,u,c,m]=await Promise.all([i.slot0(),i.liquidity(),i.token0(),i.token1()]);return console.log("Pool data:",{address:o,sqrtPriceX96:d.sqrtPriceX96.toString(),tick:d.tick,token0:c,token1:m}),{exists:!0,sqrtPriceX96:d.sqrtPriceX96,tick:d.tick,liquidity:u,token0:c,token1:m,poolAddress:o}}catch(r){return console.error("Error getting pool data:",r),{exists:!1,sqrtPriceX96:0n,tick:0,liquidity:0n,token0:a,token1:t,poolAddress:null}}}}const Ba=ie.WETH,gt={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},yd={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Creating:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-pulse",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"animate-[spin_3s_linear_infinite]",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},qe=n=>n?.symbol==="ETH"?"WETH":n?.symbol;function r0(){const{address:n}=Le(),[a,t]=l.useState(null),[s,r]=l.useState(null),[o,i]=l.useState(""),[d,u]=l.useState(""),[c,m]=l.useState(gt.MEDIUM),[x,f]=l.useState(!1),[p,b]=l.useState(!1),[A,N]=l.useState(!1),[y,k]=l.useState(null),[w,g]=l.useState("select-pair"),[v,S]=l.useState(null),[h,T]=l.useState(!1),[C,H]=l.useState(!1);l.useState(!0),l.useState({width:window.innerWidth,height:window.innerHeight});const[M,j]=l.useState("");l.useState("full");const[E,R]=l.useState(null),[O,D]=l.useState(null),[Z,F]=l.useState(!1),[L,I]=l.useState("full"),[V,W]=l.useState({min:0,max:0}),[X,ae]=l.useState(!0),[le,xe]=l.useState(!1),[be,ge]=l.useState("0"),[ve,P]=l.useState("0");ct();const[J,re]=l.useState(null),[U,q]=l.useState(!1),ee=(z,me=!1)=>{if(!z||z===0)return"0";if(!Number.isFinite(z))return"∞";let pe=me?1/z:z;return pe===0?"0":Number.isFinite(pe)?Math.abs(pe)<1e-4?"< 0.0001":pe<1e12?pe.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}):pe.toExponential(4).replace("e+","E"):"∞"},ke=()=>{if(U)return e.jsx("div",{className:"mb-4 text-sm text-gray-500 dark:text-[#98A1C0]",children:"Loading pool data..."});if(!J?.exists)return e.jsx("div",{className:"mt-4 p-4 rounded-lg bg-gray-100 dark:bg-[#131A2A] text-gray-500 dark:text-[#98A1C0]",children:"This pool does not exist yet. You will be the first liquidity provider."});const z=J.price,me=1/z;return e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-100 dark:bg-[#131A2A] text-gray-900 dark:text-white",children:[e.jsx("div",{className:"text-lg mb-2",children:"Current price:"}),e.jsxs("div",{className:"text-2xl font-bold mb-4",children:["1 ",qe(a)," = ",ee(z)," ",qe(s)]}),e.jsxs("div",{className:"text-base text-gray-500 dark:text-[#98A1C0]",children:["1 ",qe(s)," = ",ee(me)," ",qe(a)]})]})},te=async()=>{if(!(!a||!s||!c)){q(!0);try{const z=new ne(window.ethereum),me=new ft(z),pe=a.symbol==="ETH"?Ba:a.address,Fe=s.symbol==="ETH"?Ba:s.address,Ee=await me.getPoolData(pe,Fe,c);if(Ee.exists&&Ee.sqrtPriceX96){const Ce=Ee.token0.toLowerCase()===pe.toLowerCase(),Ae=BigInt(Ee.sqrtPriceX96),Me=BigInt(2)**BigInt(96),We=Number(Ae)/Number(Me),Ge=We*We,Oe=Ce?a.decimals:s.decimals,Ke=Ce?s.decimals:a.decimals,Re=Math.pow(10,Oe-Ke);let Qe=Ge*Re;Ce||(Qe=1/Qe),console.log("Price calculation:",{sqrtPriceX96:Ae.toString(),Q96:Me.toString(),price:We,squaredPrice:Ge,decimalAdjustment:Re,adjustedPrice:Qe,poolAddress:Ee.poolAddress,token0:{address:pe,decimals:a.decimals,isPoolToken0:Ce},token1:{address:Fe,decimals:s.decimals,isPoolToken1:!Ce}}),Ee.price=Qe}if(re(Ee),Ee?.exists&&Ee?.price){const Ce=ee(Ee.price);j(Ce)}}catch(z){console.error("Error fetching pool data:",z),re(null)}finally{q(!1)}}};l.useEffect(()=>{te()},[a?.address,s?.address,c]),l.useEffect(()=>{if(J)if(J.exists&&J.price){const z=ee(J.price);j(z)}else j("")},[J]);const ue=z=>{if(z===""||/^\d*\.?\d*$/.test(z))if(i(z),z){const me=J?.price||Number(M),pe=parseFloat(z)*me;u(pe.toString())}else u("")},de=z=>{if(z===""||/^\d*\.?\d*$/.test(z))if(u(z),z){const me=J?.price||Number(M),pe=parseFloat(z)/me;i(pe.toString())}else i("")},fe=z=>{if(z===""||/^\d*\.?\d*$/.test(z)){if(j(z),o&&z){const me=parseFloat(o)*parseFloat(z);u(me.toString())}else if(d&&z){const me=parseFloat(d)/parseFloat(z);i(me.toString())}}},he=()=>{w==="select-pair"&&a&&s&&c?g("set-price"):w==="set-price"&&M&&g("deposit-amounts")},Se=()=>{w==="set-price"?g("select-pair"):w==="deposit-amounts"&&g("set-price")},$=z=>{y==="token0"?t(z):r(z),N(!1)},K=async()=>{if(!n){G.error("Please connect your wallet");return}if(!a||!s||!o||!d||!M){G.error("Please fill in all fields");return}f(!0),T(!0),g("preparing"),S(null);try{const me=await new ne(window.ethereum).getSigner(),pe=new ft(me),Fe=Te(Number(o).toFixed(a.decimals),a.decimals),Ee=Te(Number(d).toFixed(s.decimals),s.decimals);g("approval"),await pe.ensureTokenApprovals({token0:a.address,token1:s.address,amount0Desired:Fe,amount1Desired:Ee,ownerAddress:n}),g("creating");const Ce=a.symbol==="ETH",Ae=s.symbol==="ETH",Me=Ce?Ba:a.address,We=Ae?Ba:s.address,Ge=Ce?Fe:Ae?Ee:0n,Oe=await pe.getPoolData(Me,We,c),Ke=Me.toLowerCase()>We.toLowerCase(),Re=Oe.exists?Me.toLowerCase()===Oe.token0.toLowerCase()?a:s:Ke?s:a,Qe=Oe.exists?Me.toLowerCase()===Oe.token0.toLowerCase()?s:a:Ke?a:s,ma=Re.address===a.address?Fe:Ee,kn=Re.address===a.address?Ee:Fe,Ps=Re.decimals,Ds=Qe.decimals;let Xt;if(Oe.exists)Xt=BigInt(Oe.sqrtPriceX96),console.log("Using existing pool price:",{sqrtPriceX96:Xt.toString(),poolData:Oe});else{let ze;if(typeof M=="string"&&M.startsWith("< ")?ze=1e-12:ze=parseFloat(M.toString()),isNaN(ze)||ze<=0)throw console.error("Invalid initial price:",{initialPrice:M,rawPrice:ze,type:typeof M}),new Error("Invalid initial price: must be a positive number");const ha=10**(Ds-Ps),Tn=Ke?1/(ze*ha):ze*ha,Cn=Math.sqrt(Tn),En=BigInt("79228162514264337593543950336");Xt=BigInt(Math.floor(Cn*Number(En)))}if(console.log("Price calculation:",{sqrtPriceX96:Xt.toString(),token0:{address:Re.address,decimals:Ps,isPoolToken0:Re.address===(Oe.exists?Oe.token0:Re.address)},token1:{address:Qe.address,decimals:Ds,isPoolToken1:Qe.address===(Oe.exists?Oe.token1:Qe.address)}}),Xt<=0n)throw new Error("Invalid price: must be greater than 0");let ts,as;if(L==="full"){const ze=ft.getFullRangeTicks(c);ts=ze.tickLower,as=ze.tickUpper}else{const{tickLower:ze,tickUpper:ha}=ft.getPriceRangeTicks({basePrice:finalInitialPrice,lowerPricePercent:Number(V.min||0),upperPricePercent:Number(V.max||0),decimals0:Re.decimals,decimals1:Qe.decimals,feeAmount:c});ts=ze,as=ha}const xa=[],vn=pe.contract.interface.encodeFunctionData("createAndInitializePoolIfNecessary",[Re.address,Qe.address,c,Xt]);xa.push(vn);const jn=pe.contract.interface.encodeFunctionData("mint",[{token0:Re.address,token1:Qe.address,fee:c,tickLower:Math.ceil(ts/ia[c])*ia[c],tickUpper:Math.floor(as/ia[c])*ia[c],amount0Desired:ma,amount1Desired:kn,amount0Min:0,amount1Min:0,recipient:n,deadline:Math.floor(Date.now()/1e3)+1200}]);xa.push(jn),Ge>0n&&(xa.push(pe.contract.interface.encodeFunctionData("refundETH")),xa.push(pe.contract.interface.encodeFunctionData("unwrapWETH9",[0,n])));const Nn=await pe.contract.multicall(xa,{value:Ge,gasLimit:Ge>0n?12e6:1e7});g("confirming");const Bs=(await Nn.wait()).logs.map(ze=>{try{return pe.contract.interface.parseLog(ze)}catch{return null}}).filter(Boolean),Rs=Bs.find(ze=>ze.name==="Transfer"),Cc=Rs?.args?.tokenId||Rs?.args?.id,Ec=Bs.find(ze=>ze.name==="IncreaseLiquidity"||ze.fragment?.name==="IncreaseLiquidity");g("completed"),setTimeout(()=>{T(!1),g(null),setTimeout(()=>{b(!0),setTimeout(()=>{H(!0)},1e3),setTimeout(()=>{i(""),u(""),b(!1)},3e4)},100)},1e3)}catch(z){console.error("Pool creation error:",z),S(z.message),g("error"),G.error("Failed to create pool. Please try again.")}finally{f(!1)}},ce=async()=>{if(!(!n||!a||!s))try{const z=new ne(window.ethereum),me=await z.getSigner();if(a.symbol==="ETH"){const pe=await z.getBalance(n);ge(Ve(pe))}else{const Fe=await new _(a.address,Va,me).balanceOf(n);ge(Y(Fe,a.decimals))}if(s.symbol==="ETH"){const pe=await z.getBalance(n);P(Ve(pe))}else{const Fe=await new _(s.address,Va,me).balanceOf(n);P(Y(Fe,s.decimals))}}catch(z){console.error("Error reading balances:",z)}};l.useEffect(()=>{ce()},[a,s,n]);const ye=async z=>{if(!n||!z)return"0";try{const me=new ne(window.ethereum);if(z.symbol==="ETH"){const pe=await me.getBalance(n);return Ve(pe)}else{const pe=new _(z.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],me),[Fe,Ee]=await Promise.all([pe.balanceOf(n),pe.decimals().catch(()=>18)]);return Y(Fe,Ee)}}catch(me){return console.error("Error fetching balance:",me),"0"}};l.useEffect(()=>{(async()=>{if(a){const me=await ye(a);ge(me)}if(s){const me=await ye(s);P(me)}})()},[a,s,n]);const Ne=z=>{if(!z)return"0";const me=parseFloat(z);return me===0?"0":me<1e-4?"< 0.0001":me.toFixed(4)};return e.jsxs("div",{className:"max-w-[1000px] mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"New position"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{!a&&!s||(t(null),r(null),i(""),u(""),j(""),g("select-pair"))},className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium ${a||s?"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black":"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed"}`,disabled:!a&&!s,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M2 12c0 5.523 4.477 10 10 10s10-4.477 10-10S17.523 2 12 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M8 12h8M11 9l-3 3 3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Reset"]}),e.jsx("button",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-sm font-medium text-black",children:"v3 position"})]})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("div",{className:"w-[240px] h-fit rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20 p-4 sticky top-4",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("button",{onClick:()=>g("select-pair"),className:`flex items-start gap-3 ${w==="select-pair"?"text-[#00ffbd]":"text-gray-500 dark:text-[#5D6785] hover:text-[#00ffbd]/70"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00ffbd] text-black flex items-center justify-center font-medium",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Step 1"}),e.jsx("div",{className:"text-sm",children:"Select token pair and fees"})]})]}),e.jsxs("button",{onClick:()=>a&&s&&g("set-price"),className:`flex items-start gap-3 ${!a||!s?"opacity-50 cursor-not-allowed":""} ${w==="set-price"?"text-[#00ffbd]":"text-gray-500 dark:text-[#5D6785] hover:text-[#00ffbd]/70"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00ffbd] text-black flex items-center justify-center font-medium",children:"2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Step 2"}),e.jsx("div",{className:"text-sm",children:"Set price range"})]})]}),e.jsxs("button",{onClick:()=>M&&g("deposit-amounts"),className:`flex items-start gap-3 ${M?"":"opacity-50 cursor-not-allowed"} ${w==="deposit-amounts"?"text-[#00ffbd]":"text-gray-500 dark:text-[#5D6785] hover:text-[#00ffbd]/70"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00ffbd] text-black flex items-center justify-center font-medium",children:"3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Step 3"}),e.jsx("div",{className:"text-sm",children:"Enter deposit amounts"})]})]})]})}),e.jsxs("div",{className:"flex-1 max-w-[700px]",children:[w==="select-pair"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:a&&s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd] flex items-center justify-center text-xs font-medium text-black",children:a.symbol.slice(0,3)}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[a.symbol," / ",s.symbol]}),e.jsx("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:"v3"}),e.jsxs("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:[c/1e4,"%"]})]})}),e.jsx("button",{onClick:()=>N(!1),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>{k("token0"),N(!0)},className:"p-4 rounded-xl bg-[#00ffbd] dark:bg-[#131A2A] hover:bg-[#00ffbd]/90 dark:hover:bg-[#1c2433] text-left text-black dark:text-white",children:a?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(a),alt:a.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium",children:a.symbol})]}):e.jsx("div",{className:"text-gray-500 dark:text-[#98A1C0]",children:"Select token"})}),e.jsx("button",{onClick:()=>{k("token1"),N(!0)},className:"p-4 rounded-xl bg-[#00ffbd] dark:bg-[#131A2A] hover:bg-[#00ffbd]/90 dark:hover:bg-[#1c2433] text-left text-black dark:text-white",children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(s),alt:s.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium",children:s.symbol})]}):e.jsx("div",{className:"text-gray-500 dark:text-[#98A1C0]",children:"Select token"})})]})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Fee tier"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:"The amount earned providing liquidity. Choose an amount that suits your risk tolerance and strategy."})]}),e.jsx("button",{onClick:()=>ae(!X),className:"px-4 py-2 rounded-xl bg-[#00ffbd] dark:bg-[#131A2A] hover:bg-[#00ffbd]/90 dark:hover:bg-[#1c2433] text-sm font-medium text-black dark:text-white",children:X?e.jsxs(e.Fragment,{children:["Less",e.jsx("span",{className:"ml-1 inline-block transform rotate-180",children:"▼"})]}):e.jsxs(e.Fragment,{children:["More",e.jsx("span",{className:"ml-1 inline-block",children:"▼"})]})})]}),X?e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[{value:gt.LOWEST,label:"0.01%",description:"Best for very stable pairs."},{value:gt.LOW,label:"0.05%",description:"Best for stable pairs."},{value:gt.MEDIUM,label:"0.3%",description:"Best for most pairs."},{value:gt.HIGH,label:"1%",description:"Best for exotic pairs."}].map(z=>e.jsxs("button",{onClick:()=>m(z.value),className:`p-4 rounded-xl text-left transition-colors ${c===z.value?"bg-[#00ffbd] dark:bg-[#131A2A] border border-[#00ffbd] text-black dark:text-[#00ffbd]":"bg-white dark:bg-[#0a0b0f] hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white"}`,children:[e.jsxs("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:[z.label," fee tier"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:z.description}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:"0 TVL"})]},z.value))}):e.jsx("div",{className:"p-4 bg-[#00ffbd] dark:bg-[#131A2A] rounded-xl mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:[(c/1e4).toFixed(2),"% fee tier"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:[c===gt.LOWEST&&"Best for very stable pairs.",c===gt.LOW&&"Best for stable pairs.",c===gt.MEDIUM&&"Best for most pairs.",c===gt.HIGH&&"Best for exotic pairs."]})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:"0 TVL"})]})})]}),a&&s&&e.jsx("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1 rounded-full bg-[#00ffbd] dark:bg-[#131A2A]",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 16v-4m0-4h.01M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Creating new pool"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:"Your selections will create a new liquidity pool which may result in lower initial liquidity and increased volatility. Consider adding to an existing pool to minimize these risks."})]})]})}),e.jsx("button",{onClick:he,disabled:!a||!s||!c,className:`w-full p-4 rounded-xl font-medium text-center ${!a||!s||!c?"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black"}`,children:"Continue"})]}),w==="set-price"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd] flex items-center justify-center text-xs font-medium text-black",children:qe(a).slice(0,3)}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[qe(a)," / ",qe(s)]}),e.jsx("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:"v3"}),e.jsxs("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:[c/1e4,"%"]})]}),e.jsx("button",{onClick:()=>N(!1),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]})}),(!J?.exists||U)&&e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Initial price"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>xe(!1),className:`px-3 py-1 rounded-lg text-sm font-medium ${le?"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white":"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white"}`,children:a.symbol}),e.jsx("button",{onClick:()=>xe(!0),className:`px-3 py-1 rounded-lg text-sm font-medium ${le?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white"}`,children:s.symbol})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:"Set the starting exchange rate between the two tokens you are providing."}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:M,onChange:z=>fe(z.target.value),placeholder:"0",className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none focus:ring-2 focus:ring-[#00ffbd]"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-[#98A1C0]",children:le?`${s.symbol} per ${a.symbol}`:`${a.symbol} per ${s.symbol}`})]}),M&&e.jsxs("div",{className:"mt-2 text-sm text-gray-500 dark:text-[#98A1C0]",children:["1 ",le?s.symbol:a.symbol," = ",M," ",le?a.symbol:s.symbol]})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Set price range"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>xe(!1),className:`px-3 py-1 rounded-lg text-sm font-medium ${le?"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white":"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white"}`,children:a.symbol}),e.jsx("button",{onClick:()=>xe(!0),className:`px-3 py-1 rounded-lg text-sm font-medium ${le?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white"}`,children:s.symbol})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>I("full"),className:`p-4 rounded-xl text-center transition-colors ${L==="full"?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"bg-white dark:bg-[#0a0b0f] text-gray-500 dark:text-[#98A1C0] hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A]"}`,children:"Full range"}),e.jsx("button",{onClick:()=>I("custom"),className:`p-4 rounded-xl text-center transition-colors ${L==="custom"?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"bg-white dark:bg-[#0a0b0f] text-gray-500 dark:text-[#98A1C0] hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A]"}`,children:"Custom range"})]}),L==="full"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:"Providing full range liquidity ensures continuous market participation across all possible prices, offering simplicity but with potential for higher impermanent loss."}),ke(),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Min Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"0"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[qe(s)," per ",qe(a)]})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Max Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"∞"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[qe(s)," per ",qe(a)]})]})]})]}),L==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-[#98A1C0] mb-2",children:"Min price"}),e.jsx("input",{type:"text",value:V.min,onChange:z=>W(me=>({...me,min:z.target.value})),placeholder:"0",className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl text-lg font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none focus:ring-2 focus:ring-[#00ffbd]"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-500 dark:text-[#98A1C0]",children:[s.symbol," per ",a.symbol]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-[#98A1C0] mb-2",children:"Max price"}),e.jsx("input",{type:"text",value:V.max,onChange:z=>W(me=>({...me,max:z.target.value})),placeholder:"∞",className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl text-lg font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none focus:ring-2 focus:ring-[#00ffbd]"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-500 dark:text-[#98A1C0]",children:[s.symbol," per ",a.symbol]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Se,className:"flex-1 p-4 rounded-xl font-medium text-center border border-[#00ffbd] text-[#00ffbd] hover:bg-[#00ffbd]/10 bg-white dark:bg-transparent",children:"Back"}),e.jsx("button",{onClick:he,disabled:!M,className:`flex-1 p-4 rounded-xl font-medium text-center ${M?"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black":"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed"}`,children:"Continue"})]})]}),w==="deposit-amounts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd] flex items-center justify-center text-xs font-medium text-black",children:qe(a).slice(0,3)}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[qe(a)," / ",qe(s)]}),e.jsx("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:"v3"}),e.jsxs("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:[c/1e4,"%"]})]}),e.jsx("button",{onClick:()=>N(!1),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]})}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Full range"}),e.jsx("button",{onClick:()=>g("set-price"),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]}),L==="full"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:["The price of ",qe(a)," can go from 0 to ∞ relative to ",qe(s)]}),ke(),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Min Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"0"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[qe(s)," per ",qe(a)]})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Max Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"∞"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[qe(s)," per ",qe(a)]})]})]})]})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Deposit tokens"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:"Specify the token amounts for your liquidity contribution."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl border border-[#00ffbd]/10",children:[e.jsx("input",{type:"text",value:o,onChange:z=>ue(z.target.value),placeholder:"0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(a),alt:a.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.symbol})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:["Balance: ",Ne(be)," ",a.symbol]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl border border-[#00ffbd]/10",children:[e.jsx("input",{type:"text",value:d,onChange:z=>de(z.target.value),placeholder:"0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(s),alt:s.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.symbol})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:["Balance: ",Ne(ve)," ",s.symbol]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Se,className:"flex-1 p-4 rounded-xl font-medium text-center border border-[#00ffbd] text-[#00ffbd] hover:bg-[#00ffbd]/10 bg-white dark:bg-transparent",children:"Back"}),e.jsx("button",{onClick:K,disabled:!o||!d,className:`flex-1 p-4 rounded-xl font-medium text-center ${!o||!d?"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black"}`,children:"Create Pool"})]})]})]})]}),e.jsx(Ga,{isOpen:A,onClose:()=>N(!1),onSelect:$,selectedToken:y==="token0"?a:s,excludeToken:y==="token0"?s:a}),e.jsx(se,{appear:!0,show:h,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:()=>{(w==="completed"||w==="error")&&T(!1)},children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[v?"Error Creating Pool":"Creating Pool",!v&&a&&s&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[a.symbol,"/",s.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[["preparing","approval","creating","confirming","completed"].map(z=>{const me=w===z,pe=w==="completed"||["completed","confirming","creating","approval"].indexOf(w)>["completed","confirming","creating","approval"].indexOf(z);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${me&&!v?"bg-[#00ffbd]/10 text-[#00ffbd]":pe?"text-[#00ffbd]":v&&w===z?"bg-red-500/10 text-red-500":"text-gray-500 dark:text-[#5D6785]"}`,children:[yd[z.charAt(0).toUpperCase()+z.slice(1)]?.(),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:z}),me&&!v&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[z==="preparing"&&"Preparing transaction...",z==="approval"&&`Approving ${a?.symbol} and ${s?.symbol}`,z==="creating"&&`Creating ${a?.symbol}/${s?.symbol} pool`,z==="confirming"&&"Waiting for confirmation...",z==="completed"&&`Successfully created ${a?.symbol}/${s?.symbol} pool!`]})]})]},z)}),v&&e.jsx("div",{className:"p-4 bg-red-500/10 rounded-xl text-red-500 text-sm",children:v})]}),(w==="completed"||v)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>T(!1),className:"w-full p-4 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black rounded-xl font-medium",children:"Close"})})]})})})})]})}),e.jsx(se,{appear:!0,show:C,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:()=>H(!1),children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-[#00ffbd]/20",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-white text-center",children:"How was your experience?"}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(z=>e.jsx("button",{onClick:()=>{console.log("User rated:",z),H(!1)},className:"p-2 hover:bg-[#00ffbd]/10 rounded-full transition-colors",children:e.jsx(Dt,{size:24,className:z<=3?"text-yellow-500":"text-[#00ffbd]"})},z))})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>H(!1),className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-gray-900 dark:text-white rounded-xl font-medium",children:"Close"})})]})})})})]})}),e.jsx(se,{appear:!0,show:Z,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:()=>F(!1),children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-[#00ffbd]/20",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-white",children:"Set Price Range"}),e.jsx("div",{className:"mt-4 space-y-4",children:ft.getPriceRangePresets().map(z=>e.jsxs("button",{onClick:()=>{if(z.value==="full"){const{tickLower:me,tickUpper:pe}=ft.getFullRangeTicks(c);R(me),D(pe)}else{const{tickLower:me,tickUpper:pe}=ft.getPriceRangeTicks({basePrice:Number(d)/Number(o),lowerPricePercent:z.lowerPricePercent,upperPricePercent:z.upperPricePercent,decimals0:a?.decimals,decimals1:s?.decimals,feeAmount:c});R(me),D(pe)}F(!1)},className:"w-full p-4 text-left rounded-xl bg-[#131A2A] hover:bg-[#1c2433] border border-[#00ffbd]/10 transition-colors",children:[e.jsx("div",{className:"text-base font-semibold text-white",children:z.label}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:z.description})]},z.value))})]})})})})]})})]})}function gn({isOpen:n,onClose:a,onSelect:t}){const s=Bt(),[r,o]=l.useState([]),[i,d]=l.useState(!1),[u,c]=l.useState(""),[m,x]=l.useState("");l.useEffect(()=>{(async()=>{if(n){d(!0),c("");try{const b=await s.getAllPools();if(console.log("Factory pools:",b),b&&b.length>0){const N=(await Promise.all(b.map(async y=>{try{console.log("Fetching data for pool:",y);const k=await s.getPoolInfoByAddress(y);if(!k)return console.log("No pool info found for:",y),null;const[w,g]=await Promise.all([oa(k.token0),oa(k.token1)]);return console.log("Pool info found:",{token0:w?.symbol,token1:g?.symbol,reserves:k.reserves}),{...k,token0:w,token1:g,pairAddress:y,reserves:{...k.reserves,reserve0Formatted:Y(k.reserves?.reserve0||"0",w?.decimals||18),reserve1Formatted:Y(k.reserves?.reserve1||"0",g?.decimals||18)}}}catch(k){return console.error("Error fetching pool data:",k),null}}))).filter(y=>y!==null);console.log("Setting pools:",N),o(N)}}catch(b){console.error("Error loading pools:",b),c("Failed to load pools")}finally{d(!1)}}})()},[n,s]);const f=r.filter(p=>{const b=m.toLowerCase();return p.token0?.symbol?.toLowerCase().includes(b)||p.token1?.symbol?.toLowerCase().includes(b)||p.pairAddress.toLowerCase().includes(b)});return e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(Q.Panel,{className:"w-full max-w-2xl rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Select Pool"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ea,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by token symbol or pool address...",value:m,onChange:p=>x(p.target.value),className:"w-full px-4 py-2 pl-10 bg-white/5 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-800 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white"})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh] space-y-2 pr-2 custom-scrollbar",children:i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#00ffbd] mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading pools..."})]}):u?e.jsx("div",{className:"text-center py-8 text-red-500",children:u}):f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:r.length===0?"No pools found":"No pools match your search"}),r.length>0&&e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Try searching with a different term"})]}):f.map(p=>e.jsxs("button",{onClick:()=>t(p),className:"w-full p-6 bg-white/5 dark:bg-[#2d2f36] hover:bg-gray-50 dark:hover:bg-[#2d2f36]/80 rounded-xl border border-gray-200 dark:border-gray-800 transition-colors text-left",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-3",children:[e.jsx("img",{src:je(p.token0),alt:p.token0?.symbol||"ERC20 Token",className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:b=>{b.target.onerror=null,b.target.src="/token-default.png"}}),e.jsx("img",{src:je(p.token1),alt:p.token1?.symbol||"ERC20 Token",className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:b=>{b.target.onerror=null,b.target.src="/token-default.png"}})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white text-lg",children:[p.token0?.symbol||"ERC20 Token","/",p.token1?.symbol||"ERC20 Token"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.token0?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:p.reserves.reserve0Formatted})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.token1?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:p.reserves.reserve1Formatted})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 truncate",children:p.pairAddress})]},p.pairAddress))})]})})]})}const wd=[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:oe.WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:oe.USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],Ra=n=>{const a=wd.find(t=>t.address?.toLowerCase()===n?.address?.toLowerCase());return a?a.logo:n?.logo||n?.logoIpfs?n.logo||it(n.logoIpfs):"/token-default.png"},wr=({token:n})=>{const{address:a}=Le(),[t,s]=l.useState("0"),[r,o]=l.useState(!0);if(l.useEffect(()=>{(async()=>{if(!(!a||!n?.address)){o(!0);try{const u=new ne(window.ethereum),c=new _(n.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],u),[m,x]=await Promise.all([c.balanceOf(a),c.decimals()]),f=Y(m,x);console.log(`Balance loaded for ${n.symbol}:`,{raw:m.toString(),formatted:f,decimals:x}),s(f)}catch(u){console.error(`Error loading ${n.symbol} balance:`,u)}finally{o(!1)}}})()},[a,n]),r)return e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Loading balance..."});const i=Number(t).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:n.symbol==="USDC"?2:6});return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",i," ",n.symbol]})};function kd(){const{address:n}=Le(),a=Bt(),[t,s]=l.useState(null),[r,o]=l.useState(""),[i,d]=l.useState(""),[u,c]=l.useState(!1),[m,x]=l.useState(!1),[f,p]=l.useState(null),b=ot.useRef(null);ot.useEffect(()=>{const k=async()=>{if(!(!t||!f))try{const w=await a.getPoolInfo(t.token0.address,t.token1.address);if(!w||!w.reserve0||!w.reserve1)return;if(f==="token0"&&r&&r!=="0"){const v=Te(r,t.token0.decimals)*w.reserve1/w.reserve0,S=Y(v,t.token1.decimals);d(S)}else if(f==="token1"&&i&&i!=="0"){const v=Te(i,t.token1.decimals)*w.reserve0/w.reserve1,S=Y(v,t.token0.decimals);o(S)}}catch(w){console.error("Error calculating amounts:",w)}};return b.current&&clearTimeout(b.current),b.current=setTimeout(k,500),()=>{b.current&&clearTimeout(b.current)}},[t,r,i,f,a]);const A=k=>{p("token0"),o(k.target.value),(!k.target.value||k.target.value==="0")&&d("")},N=k=>{p("token1"),d(k.target.value),(!k.target.value||k.target.value==="0")&&o("")},y=async()=>{if(!n){G.error("Please connect your wallet");return}if(!t||!r||!i){G.error("Please fill in all fields");return}c(!0);try{const k=Te(r,t.token0.decimals),w=Te(i,t.token1.decimals),v=await new ne(window.ethereum).getSigner(),S=new _(t.token0.address,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)"],v),h=new _(t.token1.address,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)"],v),T=await S.allowance(n,a.router.address),C=await h.allowance(n,a.router.address);if(T<k)try{G.loading("Approving "+t.token0.symbol+"...",{id:"approve0"}),await(await S.approve(a.router.address,lt)).wait(),G.success(t.token0.symbol+" approved successfully",{id:"approve0"})}catch{G.error("Failed to approve "+t.token0.symbol,{id:"approve0"}),c(!1);return}if(C<w)try{G.loading("Approving "+t.token1.symbol+"...",{id:"approve1"}),await(await h.approve(a.router.address,lt)).wait(),G.success(t.token1.symbol+" approved successfully",{id:"approve1"})}catch{G.error("Failed to approve "+t.token1.symbol,{id:"approve1"}),c(!1);return}const H=await S.allowance(n,a.router.address),M=await h.allowance(n,a.router.address);if(H<k||M<w){G.error("Approval process incomplete. Please try again."),c(!1);return}await new Promise(O=>setTimeout(O,2e3));const j=k*99n/100n,E=w*99n/100n;G.loading("Adding liquidity...",{id:"add-liquidity"});const R=await a.addLiquidity(t.token0.address,t.token1.address,k,w,j,E,n);console.log("Liquidity added:",R),G.success("Liquidity added successfully!",{id:"add-liquidity"}),o(""),d(""),s(null)}catch(k){console.error("Add liquidity error:",k),G.error(k.message.includes("insufficient")?"Insufficient balance for transaction":k.message.includes("chain")?"Please switch to a supported network":`Failed to add liquidity: ${k.message}`,{id:"add-liquidity"})}finally{c(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Add Liquidity"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Ra(t.token0),alt:t.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Ra(t.token1),alt:t.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.token0.symbol,"/",t.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Ra(t.token0),alt:t.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.token0.symbol})]}),e.jsx(wr,{token:t.token0})]}),e.jsx("input",{type:"number",value:r,onChange:A,onFocus:()=>p("token0"),placeholder:"0.0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-white/5 dark:bg-[#2d2f36] rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})}),e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Ra(t.token1),alt:t.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.token1.symbol})]}),e.jsx(wr,{token:t.token1})]}),e.jsx("input",{type:"number",value:i,onChange:N,onFocus:()=>p("token1"),placeholder:"0.0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none"})]})]}),e.jsx("button",{onClick:y,disabled:u||!r||!i,className:"w-full mt-6 px-6 py-3 bg-[#00ffbd] hover:bg-[#00e6a9] disabled:bg-gray-400 text-black font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Adding Liquidity..."]}):"Add Liquidity"})]}),e.jsx(gn,{isOpen:m,onClose:()=>x(!1),onSelect:k=>{s(k),x(!1),o(""),d("")}})]})}function vd(){const{address:n}=Le(),a=Bt(),[t,s]=l.useState(null),[r,o]=l.useState("0"),[i,d]=l.useState(""),[u,c]=l.useState(!1),[m,x]=l.useState(!1),[f,p]=l.useState("0"),[b,A]=l.useState("0");l.useEffect(()=>{let y=!0;return(async()=>{if(!(!t||!n||!t.pairAddress))try{const w=new ne(window.ethereum),g=new _(t.pairAddress,["function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function allowance(address, address) view returns (uint256)"],w),v=await a.getPoolInfo(t.token0.address,t.token1.address),[S,h]=await Promise.all([g.balanceOf(n),g.totalSupply()]);if(!y)return;const T=S*BigInt(1e4)/h,C=Number(T)/100,H=v.reserve0*S/h,M=v.reserve1*S/h;o(Ve(S)),p(Y(H,t.token0.decimals)),A(Y(M,t.token1.decimals)),s(j=>({...j,totalSupply:Ve(h),userShare:C}))}catch(w){if(!y)return;console.error("Error fetching pool info:",w),G.error("Failed to fetch pool information")}})(),()=>{y=!1}},[t?.pairAddress,n,a]),l.useEffect(()=>{if(!(!t||!r||!i||!f||!b))try{const y=parseFloat(i);if(isNaN(y)||y<=0||y>100)return;const k=parseFloat(f),w=parseFloat(b),g=k*y/100,v=w*y/100;p(g.toFixed(t.token0.decimals)),A(v.toFixed(t.token1.decimals))}catch(y){console.error("Error calculating token amounts:",y)}},[i,r,t?.token0?.decimals]);const N=async()=>{if(!n){G.error("Please connect your wallet");return}if(!t||!i){G.error("Please select a pool and enter amount to remove");return}c(!0);try{const k=await new ne(window.ethereum).getSigner(),g=qt(r)*BigInt(Math.floor(parseFloat(i)))/100n,v=Te(f,t.token0.decimals)*99n/100n,S=Te(b,t.token1.decimals)*99n/100n;console.log("Remove Liquidity Params:",{lpTokensToRemove:g.toString(),amount0Min:v.toString(),amount1Min:S.toString()});const h=new _(t.pairAddress,["function approve(address, uint256) returns (bool)","function allowance(address, address) view returns (uint256)"],k);await h.allowance(n,a.router.address)<g&&(G.loading("Approving LP tokens...",{id:"approve-lp"}),await(await h.approve(a.router.address,lt)).wait(),G.success("LP tokens approved",{id:"approve-lp"})),G.loading("Removing liquidity...",{id:"remove-liquidity"});const C=await a.removeLiquidity(t.token0.address,t.token1.address,g,v,S,n);console.log("Liquidity removed:",C),G.success("Liquidity removed successfully!",{id:"remove-liquidity"}),d("");const H=await a.getPoolInfo(t.token0.address,t.token1.address);s(M=>({...M,...H}))}catch(y){console.error("Remove liquidity error:",y),G.error(y.message.includes("insufficient")?"Insufficient balance for transaction":y.message.includes("chain")?"Please switch to a supported network":`Failed to remove liquidity: ${y.message}`,{id:"remove-liquidity"})}finally{c(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(t.token0),alt:t.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:je(t.token1),alt:t.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.token0.symbol,"/",t.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Your Pool Tokens"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[parseFloat(r).toFixed(6)," LP Tokens"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Your Pool Share"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.userShare?`${t.userShare.toFixed(2)}%`:"0%"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount to Remove"}),e.jsx("div",{className:"flex gap-2",children:[25,50,75,100].map(y=>e.jsxs("button",{onClick:()=>d(y.toString()),className:`flex-1 px-3 py-2 rounded-xl text-sm font-medium transition-all
                    ${i===y.toString()?"bg-[#00ffbd] text-black":"bg-white/5 dark:bg-[#2d2f36] text-gray-700 dark:text-gray-300 hover:bg-[#00ffbd]/10"}
                  `,children:[y,"%"]},y))}),e.jsx("input",{type:"number",value:i,onChange:y=>{const k=y.target.value;(k===""||parseFloat(k)>=0&&parseFloat(k)<=100)&&d(k)},placeholder:"Enter percentage (0-100)",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white placeholder-gray-500"})]}),e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"You Will Receive"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t.token0),alt:t.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.token0.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:parseFloat(f).toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t.token1),alt:t.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.token1.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:parseFloat(b).toFixed(6)})]})]})]}),e.jsx("button",{onClick:N,disabled:u||!i||parseFloat(i)<=0,className:`
              w-full px-4 py-3 rounded-xl font-medium text-black
              ${u||!i||parseFloat(i)<=0?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
            `,children:u?"Removing Liquidity...":"Remove Liquidity"})]}),e.jsx(gn,{isOpen:m,onClose:()=>x(!1),onSelect:y=>{s(y),x(!1),d("")}})]})}function n0(){const[n,a]=l.useState("add");return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Manage Liquidity"}),e.jsxs("div",{className:"flex space-x-1 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-1 mb-6",children:[e.jsx("button",{onClick:()=>a("add"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${n==="add"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Add Liquidity"}),e.jsx("button",{onClick:()=>a("remove"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${n==="remove"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Remove Liquidity"})]}),e.jsx("div",{className:"mt-4",children:n==="add"?e.jsx(kd,{}):e.jsx(vd,{})})]})}const St={UNICHAIN_TESTNET:{id:1301,name:"Unichain Testnet",blockscoutUrl:"https://unichain-sepolia.blockscout.com"},UNICHAIN_MAINNET:{id:130,name:"Unichain Mainnet",blockscoutUrl:"https://unichain.blockscout.com"},MONAD_TESTNET:{id:10143,name:"Monad Testnet",blockscoutUrl:"https://explorer.monad.network"}},ws={10143:[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/weth.png"},{address:"0xf817257fed379853cDe0fa4F97AB987181B1E5Ea",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:"0x88b8E2161DEDC77EF4ab7585569D2415a1C1055D",symbol:"USDT",name:"Tether USD",decimals:6,logo:"/usdt.png"}],1301:[{address:ie[1301].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:ie[1301].USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],130:[{address:ie[130].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:ie[130].USDT,symbol:"USDT",name:"USDT",decimals:6,logo:"/usdt.png"}]},bt="uniswap_pools_cache_v1",jd=30*60*1e3,Oa=async(n,a,t)=>{try{if(!n)return console.warn("Token address is undefined in getEnhancedTokenMetadata"),a;const s=ws[t]?.find(i=>i.address?.toLowerCase()===n?.toLowerCase());if(s)return console.log("Found common token:",s),{...a,...s,address:n,logo:s.logo,verified:!0,decimals:s.decimals||a?.decimals||18};const r=ie[t]?.WETH?.toLowerCase();if(n?.toLowerCase()===r)return{...a,symbol:t===10143?"MON":"ETH",name:t===10143?"Monad":"Ethereum",decimals:18,logo:t===10143?"/monad.png":"/eth.png",verified:!0,address:n};const o=t===St.UNICHAIN_TESTNET.id?St.UNICHAIN_TESTNET.blockscoutUrl:t===St.UNICHAIN_MAINNET.id?St.UNICHAIN_MAINNET.blockscoutUrl:St.MONAD_TESTNET.blockscoutUrl;try{const i=await Ze(n);if(i){const d=i.logo||je({...i,address:n},t);return{...a,name:i.name||a?.name,symbol:i.symbol||a?.symbol,decimals:i.decimals||a?.decimals||18,logo:d,logoIpfs:i.logoIpfs,address:n,verified:!0}}}catch(i){console.log("Firebase fetch failed:",i)}try{const i=await fetch(`${o}/api/v2/tokens/${n}`);if(i.ok){const d=await i.json();return{...a,name:d.name||a?.name,symbol:d.symbol||a?.symbol,decimals:parseInt(d.decimals)||a?.decimals||18,logo:d.logo||je({address:n},t),address:n,verified:!0}}}catch{console.log("Blockscout API fetch failed, falling back to existing metadata")}return{...a,logo:a?.logo||je({address:n},t),address:n,verified:!1}}catch(s){return console.error("Error in enhanced token metadata:",s),a}},kr={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Nd={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},Td={hidden:{opacity:0,y:-20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},Cd={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Ed={hidden:{opacity:0,x:-10},show:{opacity:1,x:0,transition:{type:"spring",stiffness:100,damping:15}}},Sd=({pool:n,onSelect:a})=>e.jsxs(B.button,{variants:Nd,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(n),className:"w-full px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx(B.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},src:n.token0.logo,alt:n.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx(B.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},src:n.token1.logo,alt:n.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs(B.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"font-medium text-gray-900 dark:text-white",children:[n.token0.symbol,"/",n.token1.symbol]}),e.jsxs(B.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-sm text-gray-500 dark:text-gray-400",children:[n.token0.name,"/",n.token1.name]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.tvl&&e.jsxs(B.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm text-gray-500 dark:text-gray-400",children:["TVL: $",Number(n.tvl).toLocaleString()]}),e.jsx(B.svg,{whileHover:{x:5},className:"w-5 h-5 text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),Ad=()=>e.jsxs(B.div,{variants:Ed,className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"w-32 h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),Md=async n=>{try{const a=new ne(window.ethereum),t=await a.getNetwork().then(p=>Number(p.chainId));if(t===St.MONAD_TESTNET.id){const p=typeof n=="string"?n:n.address;if(!mt(p))return console.warn("Invalid pool address:",p),null;const b=new Pt(["function token0() external view returns (address)","function token1() external view returns (address)","function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)"]);try{const[A,N,y]=await Promise.all([a.call({to:p,data:b.encodeFunctionData("token0")}),a.call({to:p,data:b.encodeFunctionData("token1")}),a.call({to:p,data:b.encodeFunctionData("getReserves")})]),k=ja("0x"+A.slice(26)),w=ja("0x"+N.slice(26)),[g,v]=b.decodeFunctionResult("getReserves",y),[S,h]=await Promise.all([Oa(k,null,t),Oa(w,null,t)]),T=ie[t]?.WETH?.toLowerCase(),C=k.toLowerCase()===T,H=w.toLowerCase()===T,M=C?{...S,symbol:"MON",name:"Monad",logo:"/monad.png",isWETH:!0,originalSymbol:"WMONAD"}:S,j=H?{...h,symbol:"MON",name:"Monad",logo:"/monad.png",isWETH:!0,originalSymbol:"WMONAD"}:h;return{token0:{...M,address:k,isWETH:C},token1:{...j,address:w,isWETH:H},pairAddress:p,chainId:t,reserves:{reserve0:g.toString(),reserve1:v.toString(),reserve0Formatted:Y(g,M?.decimals||18),reserve1Formatted:Y(v,j?.decimals||18)}}}catch(A){return console.error("Error fetching pair data:",A),null}}const[s,r]=await Promise.all([Oa(n.token0.address,n.token0,n.chainId),Oa(n.token1.address,n.token1,n.chainId)]),o=ie[n.chainId]?.USDT,i=s?.address?.toLowerCase()===o?.toLowerCase(),d=r?.address?.toLowerCase()===o?.toLowerCase(),u=ie[n.chainId]?.WETH,c=s?.address?.toLowerCase()===u?.toLowerCase(),m=r?.address?.toLowerCase()===u?.toLowerCase(),x=c?{...s,symbol:"ETH",name:"Ethereum",logo:"/eth.png",isWETH:!0,originalSymbol:"WETH"}:i?{...s,logo:"/usdt.png"}:{...s,logo:s?.logo||je(s)},f=m?{...r,symbol:"ETH",name:"Ethereum",logo:"/eth.png",isWETH:!0,originalSymbol:"WETH"}:d?{...r,logo:"/usdt.png"}:{...r,logo:r?.logo||je(r)};return{token0:{...x,address:n.token0.address,isWETH:c},token1:{...f,address:n.token1.address,isWETH:m},pairAddress:n.address,chainId:n.chainId,reserves:{...n.reserves,reserve0Formatted:Y(n.reserves?.reserve0||"0",x?.decimals||18),reserve1Formatted:Y(n.reserves?.reserve1||"0",f?.decimals||18)}}}catch(a){return console.error("Error processing pool data:",a),null}};function bn({isOpen:n,onClose:a,onSelect:t}){const s=ct();Le();const[r,o]=l.useState([]),[i,d]=l.useState(!1),[u,c]=l.useState(""),[m,x]=l.useState(""),[f,p]=l.useState([]),[b,A]=l.useState(null),[N,y]=l.useState(0),[k,w]=l.useState(0);l.useEffect(()=>{const T=()=>{if(document.visibilityState==="visible"){const C=v(b);C&&(o(C.pools),w(C.totalPairs),y(C.pools.length))}};return document.addEventListener("visibilitychange",T),window.addEventListener("focus",T),()=>{document.removeEventListener("visibilitychange",T),window.removeEventListener("focus",T)}},[b]);const g=(T,C)=>{try{if(!T||!C)return;const H={pools:T,chainId:C,timestamp:Date.now(),totalPairs:k,version:"1.0"};localStorage.setItem(bt,JSON.stringify(H)),sessionStorage.setItem(bt,JSON.stringify(H)),console.log("Saved pools to cache:",T.length)}catch(H){console.warn("Failed to save pools to cache:",H)}},v=T=>{try{if(!T)return null;const C=localStorage.getItem(bt),H=sessionStorage.getItem(bt),M=JSON.parse(C||H);return M?M.version==="1.0"&&M.chainId===T&&M.timestamp>Date.now()-jd&&Array.isArray(M.pools)&&M.pools.length>0?(M.pools.length>0&&g(M.pools,T),console.log("Retrieved pools from cache:",M.pools.length),{pools:M.pools,totalPairs:M.totalPairs}):(localStorage.removeItem(bt),sessionStorage.removeItem(bt),null):null}catch(C){return console.warn("Failed to get pools from cache:",C),localStorage.removeItem(bt),sessionStorage.removeItem(bt),null}};l.useEffect(()=>((async()=>{if(window.ethereum)try{const C=await window.ethereum.request({method:"eth_chainId"});A(parseInt(C,16))}catch(C){console.error("Error getting chain ID:",C)}})(),window.ethereum&&window.ethereum.on("chainChanged",C=>{A(parseInt(C,16))}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",()=>{})}),[]),l.useEffect(()=>{(async()=>{if(!(!n||!window.ethereum)){d(!0),c("");try{const C=new ne(window.ethereum),H=await C.getNetwork().then(j=>Number(j.chainId)),M=v(H);if(M){o(M.pools),w(M.totalPairs),y(M.pools.length),d(!1),Date.now()-JSON.parse(localStorage.getItem(bt)||"{}").timestamp>3e5&&S(H,C);return}await S(H,C)}catch(C){console.error("Error loading pools:",C),c(C.message||"Failed to load pools. Please try again.")}finally{d(!1)}}})()},[n]);const S=async(T,C)=>{o([]),y(0);const H=ie[T]?.factory;if(!H)throw new Error("Factory address not found for current network");const M=new _(H,["function allPairsLength() view returns (uint)","function allPairs(uint) view returns (address)"],C),j=await M.allPairsLength();w(Number(j)),console.log("Total pairs:",j.toString());const E=0n,R=j,O=Array.from({length:Number(R-E)},(V,W)=>E+BigInt(W)),D=5,Z=[];for(let V=0;V<O.length;V+=D)Z.push(O.slice(V,V+D));const F=new Pt(["function token0() view returns (address)","function token1() view returns (address)","function getReserves() view returns (uint112, uint112, uint32)"]),L=new Pt(["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"]),I=[];for(const V of Z)try{const W=await Promise.all(V.map(X=>M.allPairs(X)));for(const X of W)try{const[ae,le,xe]=await Promise.all([C.call({to:X,data:F.encodeFunctionData("token0")}),C.call({to:X,data:F.encodeFunctionData("token1")}),C.call({to:X,data:F.encodeFunctionData("getReserves")})]),be=ja("0x"+ae.slice(26)),ge=ja("0x"+le.slice(26)),[ve,P]=F.decodeFunctionResult("getReserves",xe),J=ie[T]?.WETH?.toLowerCase(),re=be.toLowerCase()===J,U=ge.toLowerCase()===J,[q,ee,ke,te]=await Promise.all([re?Promise.resolve("MON"):C.call({to:be,data:L.encodeFunctionData("symbol")}).then(he=>L.decodeFunctionResult("symbol",he)[0]).catch(()=>"Unknown"),U?Promise.resolve("MON"):C.call({to:ge,data:L.encodeFunctionData("symbol")}).then(he=>L.decodeFunctionResult("symbol",he)[0]).catch(()=>"Unknown"),re?Promise.resolve("Monad"):C.call({to:be,data:L.encodeFunctionData("name")}).then(he=>L.decodeFunctionResult("name",he)[0]).catch(()=>"Unknown Token"),U?Promise.resolve("Monad"):C.call({to:ge,data:L.encodeFunctionData("name")}).then(he=>L.decodeFunctionResult("name",he)[0]).catch(()=>"Unknown Token")]),ue=ws[T]?.find(he=>he.address?.toLowerCase()===be?.toLowerCase()),de=ws[T]?.find(he=>he.address?.toLowerCase()===ge?.toLowerCase()),fe={token0:{address:be,symbol:q,name:ke,decimals:ue?.decimals||18,logo:ue?.logo||(re?"/monad.png":"/token-default.png"),isWETH:re},token1:{address:ge,symbol:ee,name:te,decimals:de?.decimals||18,logo:de?.logo||(U?"/monad.png":"/token-default.png"),isWETH:U},pairAddress:X,chainId:T,reserves:{reserve0:ve.toString(),reserve1:P.toString(),reserve0Formatted:Y(ve,ue?.decimals||18),reserve1Formatted:Y(P,de?.decimals||18)}};I.push(fe),o([...I]),y(I.length)}catch(ae){console.warn(`Error processing pair ${X}:`,ae);continue}}catch(W){console.warn("Error processing batch:",W);continue}I.length===0&&c("No valid pools found. Please try again."),I.length>0&&g(I,T)};l.useEffect(()=>{const C=setTimeout(async()=>{if(!m){p([]);return}if(m.length>=42&&mt(m))try{d(!0);const M=await s.getPoolInfoByAddress(m);if(M){const[j,E]=await Promise.all([Ze(M.token0.address).catch(()=>null),Ze(M.token1.address).catch(()=>null)]);j&&(M.token0={...M.token0,name:j.name,symbol:j.symbol,decimals:j.decimals||18,logo:j.logo,logoIpfs:j.logoIpfs}),E&&(M.token1={...M.token1,name:E.name,symbol:E.symbol,decimals:E.decimals||18,logo:E.logo,logoIpfs:E.logoIpfs});const R=await Md({...M,address:m});if(R){console.log("Found pool by address:",R),p([R]),d(!1);return}}}catch(M){console.error("Error fetching specific pool:",M)}finally{d(!1)}const H=r.filter(M=>{if(!M?.token0?.symbol||!M?.token1?.symbol||!M?.pairAddress)return!1;const j=m.toLowerCase();return M.token0.symbol.toLowerCase().includes(j)||M.token1.symbol.toLowerCase().includes(j)||M.pairAddress.toLowerCase().includes(j)});p(H)},300);return()=>clearTimeout(C)},[m,r,s]);const h=m?f:r;return e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(Q.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-[#1a1b1f] rounded-2xl shadow-xl",children:e.jsxs(B.div,{variants:kr,initial:"hidden",animate:"show",className:"p-6",children:[e.jsxs(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center justify-between",children:[e.jsx("span",{children:"Select a Pool"}),N>0&&k>0&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Loaded ",N,"/",k]})]}),b&&e.jsxs(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4",children:[Object.values(St).map(T=>b===T.id?e.jsxs("div",{className:"px-4 py-2 rounded-xl bg-[#00ffbd]/10 border border-[#00ffbd]/20 text-[#00ffbd] text-sm inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#00ffbd] animate-pulse"}),T.name]},T.id):null),!Object.values(St).some(T=>T.id===b)&&e.jsx("div",{className:"px-4 py-2 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 text-sm",children:"Please switch to a supported network (Unichain or Monad Testnet)"})]}),u&&e.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/30 text-red-700 dark:text-red-400",children:u}),e.jsxs(B.div,{variants:Td,className:"relative mb-4",children:[e.jsx("input",{type:"text",value:m,onChange:T=>x(T.target.value),placeholder:"Search by token name or address...",className:"w-full px-4 py-3 pl-10 bg-white/10 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-[#00ffbd]/50 focus:border-[#00ffbd] outline-none transition-colors font-mono",style:{WebkitAppearance:"none",MozAppearance:"none"}}),e.jsx(Ea,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none"})]}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto overflow-x-hidden pr-2 custom-scrollbar",style:{scrollbarWidth:"thin",scrollbarColor:"#00ffbd #2d2f36"},children:[e.jsx("style",{children:`
                  .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                  }
                  .custom-scrollbar::-webkit-scrollbar-track {
                    background: #2d2f36;
                    border-radius: 3px;
                  }
                  .custom-scrollbar::-webkit-scrollbar-thumb {
                    background-color: #00ffbd;
                    border-radius: 3px;
                  }
                `}),e.jsx(Je,{mode:"wait",children:i&&r.length===0?e.jsx(B.div,{variants:Cd,initial:"hidden",animate:"show",className:"space-y-2",children:[...Array(5)].map((T,C)=>e.jsx(Ad,{},C))}):u&&r.length===0?e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center py-12 text-red-500",children:u}):h.length===0?e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center py-12 text-gray-500 dark:text-gray-400",children:i?"Loading pools...":"No pools found"}):e.jsx(B.div,{variants:kr,initial:"hidden",animate:"show",className:"space-y-2",children:h.map((T,C)=>e.jsx(Sd,{pool:T,onSelect:t},`${T.pairAddress}-${C}`))})})]}),i&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-[#00ffbd] h-1.5 rounded-full transition-all duration-300",style:{width:`${N/(k||1)*100}%`}})}),e.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:["Loading pools... ",Math.floor(N/(k||1)*100),"%"]})]})]})})})]})}const yn=n=>{switch(n){case 10143:return[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}];case 1301:return[];case 130:return[];default:return[]}},la=(n,a)=>{if(!n)return"/token-default.png";const t=yn(a);if(!t)return"/token-default.png";const s=t.find(r=>r.address?.toLowerCase()===n?.address?.toLowerCase()||a&&ie[a]?.WETH?.toLowerCase()===n?.address?.toLowerCase());return s?s.logo:n?.logo||n?.logoIpfs?n.logo||it(n.logoIpfs):"/token-default.png"},vr=({token:n,chainId:a})=>{const{address:t}=Le(),[s,r]=l.useState("0"),[o,i]=l.useState(!1),d=ct();if(l.useEffect(()=>{(async()=>{if(!(!t||!n))try{if(i(!0),a===10143){const m=new ne(window.ethereum);if(n.isNative||n.isWETH){const x=await m.getBalance(t);r(Ve(x))}else{const f=await new _(n.address,["function balanceOf(address) view returns (uint256)"],m).balanceOf(t);r(Y(f,n.decimals))}}else{const m=await d.getTokenBalance(n.symbol==="ETH"?"ETH":n.address,t);r(m)}}catch(m){console.error("Error fetching balance:",m),r("0")}finally{i(!1)}})()},[n,t,d,a]),!n||!t||!a)return null;const u=a===10143&&(n.isWETH||n.isNative)?"MON":n.symbol;return e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Balance:"}),o?e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 w-20 rounded"}):e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(s).toLocaleString()," ",u]})]})},Id=["function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)","function quote(uint amountA, uint reserveA, uint reserveB) external pure returns (uint amountB)","function getAmountOut(uint amountIn, uint reserveIn, uint reserveOut) external view returns (uint amountOut)"],ea={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite",opacity:.2}})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})})},Fd=({isOpen:n,onClose:a,currentStep:t,pool:s,error:r,chainId:o})=>{const i=[{id:"preparing",title:"Preparing",icon:e.jsx(ea.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(ea.Approval,{})},{id:"adding",title:"Adding Liquidity",icon:e.jsx(ea.Adding,{})},{id:"confirming",title:"Confirming",icon:e.jsx(ea.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(ea.Completed,{})}],d=!!r,u=m=>m?typeof m=="string"?m:m.message||"An unknown error occurred":"",c=()=>{if(!s)return"";const m={...s.token0,symbol:o&&s.token0.address?.toLowerCase()===ie[o]?.WETH?.toLowerCase()?"ETH":s.token0.symbol,name:o&&s.token0.address?.toLowerCase()===ie[o]?.WETH?.toLowerCase()?"Ethereum":s.token0.name},x={...s.token1,symbol:o&&s.token1.address?.toLowerCase()===ie[o]?.WETH?.toLowerCase()?"ETH":s.token1.symbol,name:o&&s.token1.address?.toLowerCase()===ie[o]?.WETH?.toLowerCase()?"Ethereum":s.token1.name};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:la(m,o),alt:m.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:la(x,o),alt:x.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{children:[m.symbol," ",x.symbol]})]})};return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[d?"Error Adding Liquidity":"Adding Liquidity",!d&&s&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:c()})]}),e.jsx("div",{className:"space-y-4",children:i.map((m,x)=>{const f=t===m.id,p=!d&&i.findIndex(A=>A.id===t)>x,b=d&&t===m.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${f&&!b?"bg-[#00ffbd]/10 text-[#00ffbd]":p?"text-[#00ffbd]":b?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[m.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m.title}),f&&!d&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[m.id==="preparing"&&"Preparing transaction...",m.id==="approval"&&`Approving ${s?.token0?.symbol} and ${s?.token1?.symbol}`,m.id==="adding"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Adding liquidity to ",c()," pool"]}),m.id==="confirming"&&"Waiting for confirmation...",m.id==="completed"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully added liquidity to ",c()," pool!"]})]})]}),p&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},m.id)})}),d&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ea.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},Ld=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center space-x-2 mb-6 flex-wrap",children:[1,2,3,4,5,6,7,8,9].map(d=>e.jsx("button",{className:`text-3xl transition-colors ${(o||s)>=d?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,onClick:()=>{r(d),t(d),setTimeout(()=>a(),500)},onMouseEnter:()=>i(d),onMouseLeave:()=>i(0),children:"★"},d))}),e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"How was your experience adding liquidity?"})]})})})})]})})};function Pd(){const{address:n}=Le(),a=ct(),[t,s]=l.useState(null),[r,o]=l.useState(""),[i,d]=l.useState(""),[u,c]=l.useState(!1),[m,x]=l.useState(!1),[f,p]=l.useState(null),[b,A]=l.useState(null),N=ot.useRef(null),[y,k]=l.useState(!1),[w,g]=l.useState(null),[v,S]=l.useState(!1),[h,T]=l.useState(!1),[C,H]=l.useState({width:window.innerWidth,height:window.innerHeight}),[M,j]=l.useState(null);l.useState(null),ua(),l.useEffect(()=>{const Z=async()=>{if(window.ethereum){const L=await new ne(window.ethereum).getNetwork();A(Number(L.chainId))}};return Z(),window.ethereum&&window.ethereum.on("chainChanged",()=>{Z()}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",Z)}},[]),l.useEffect(()=>{const Z=()=>{H({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[]);const E=Z=>{console.log("User rated liquidity addition:",Z)};l.useEffect(()=>{(async()=>{if(!(!t||!a))try{const F=await a.getPoolInfo(t.token0.address,t.token1.address);F&&s(L=>({...L,...F,token0:{...L.token0,...F.token0},token1:{...L.token1,...F.token1}}))}catch(F){console.error("Error loading pool info:",F)}})()},[t?.pairAddress,a]),ot.useEffect(()=>{const Z=async()=>{if(!(!t||!f))try{const F=await a.getPoolInfo(t.token0.address,t.token1.address);if(!F||!F.reserves){console.log("No pool info or reserves found");return}const L=BigInt(F.reserves.reserve0.toString()),I=BigInt(F.reserves.reserve1.toString());if(console.log("Reserves:",{reserve0:L.toString(),reserve1:I.toString()}),f==="token0"&&r&&r!=="0"){console.log("Calculating token1 amount based on token0 input:",r);const V=Te(r,t.token0.decimals);console.log("Parsed amount0:",V.toString());const W=V*I/L;console.log("Calculated amount1:",W.toString());const X=Y(W,t.token1.decimals);console.log("Formatted amount1:",X),d(X)}else if(f==="token1"&&i&&i!=="0"){console.log("Calculating token0 amount based on token1 input:",i);const V=Te(i,t.token1.decimals);console.log("Parsed amount1:",V.toString());const W=V*L/I;console.log("Calculated amount0:",W.toString());const X=Y(W,t.token0.decimals);console.log("Formatted amount0:",X),o(X)}}catch(F){console.error("Error calculating amounts:",F)}};return N.current&&clearTimeout(N.current),N.current=setTimeout(Z,500),()=>{N.current&&clearTimeout(N.current)}},[t,r,i,f,a]);const R=Z=>{const F=Z.target.value;(F===""||/^\d*\.?\d*$/.test(F))&&(p("token0"),o(F),(!F||F==="0")&&d(""))},O=Z=>{const F=Z.target.value;(F===""||/^\d*\.?\d*$/.test(F))&&(p("token1"),d(F),(!F||F==="0")&&o(""))},D=async()=>{if(!n){G.error("Please connect your wallet");return}if(!t||!r||!i||!b){G.error("Please fill in all fields");return}c(!0),k(!0),g("preparing"),j(null);try{const Z=new ne(window.ethereum),F=await Z.getNetwork().then(L=>Number(L.chainId));if(F===10143){const L=await Z.getSigner(),I=ie[10143].router,V=new Pt(["function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)"]),W=Math.floor(Date.now()/1e3)+60*20,X=Te(r,t.token0.decimals),ae=Te(i,t.token1.decimals);g("approval");const le=t.token0.isWETH||t.token0.isNative,xe=t.token1.isWETH||t.token1.isNative;if(le||xe){const be=le?t.token1.address:t.token0.address,ge=le?ae:X,ve=le?X:ae;le?xe||await new _(t.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],L).approve(I,ae):await new _(t.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],L).approve(I,X),g("adding");const P=await L.sendTransaction({to:I,data:V.encodeFunctionData("addLiquidityETH",[be,ge,ge*99n/100n,ve*99n/100n,await L.getAddress(),W]),value:ve});g("confirming"),await P.wait()}else{const be=new _(t.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],L),ge=new _(t.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],L);await be.approve(I,X),await ge.approve(I,ae),g("adding");const ve=await L.sendTransaction({to:I,data:V.encodeFunctionData("addLiquidity",[t.token0.address,t.token1.address,X,ae,X*99n/100n,ae*99n/100n,await L.getAddress(),W])});g("confirming"),await ve.wait()}}else{const L=await Z.getSigner(),I=new _(ie[F].router,Id,L),V=Math.floor(Date.now()/1e3)+60*20,W=Te(r,t.token0.decimals),X=Te(i,t.token1.decimals);g("approval");const ae=t.token0.isWETH,le=t.token1.isWETH;if(ae||le){const xe=ae?t.token1.address:t.token0.address,be=ae?X:W,ge=ae?W:X;ae?le||await new _(t.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],L).approve(ie[F].router,X):await new _(t.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],L).approve(ie[F].router,W),g("adding");const ve=await I.addLiquidityETH(xe,be,be*99n/100n,ge*99n/100n,n,V,{value:ge});g("confirming"),await ve.wait()}else{const xe=new _(t.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],L),be=new _(t.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],L);await xe.approve(ie[F].router,W),await be.approve(ie[F].router,X),g("adding");const ge=await I.addLiquidity(t.token0.address,t.token1.address,W,X,W*99n/100n,X*99n/100n,n,V);g("confirming"),await ge.wait()}}g("completed"),S(!0),setTimeout(()=>S(!1),5e3)}catch(Z){console.error("Error adding liquidity:",Z),j(Z.message||"Failed to add liquidity"),g("error")}finally{c(!1)}};return e.jsxs("div",{className:"space-y-6",children:[v&&e.jsx(pt,{width:C.width,height:C.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:la(t.token0,b),alt:t.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:la(t.token1,b),alt:t.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(()=>{if(!b)return`${t.token0.symbol}/${t.token1.symbol}`;const F=yn(b).find(V=>V.symbol==="WETH");if(!F)return`${t.token0.symbol}/${t.token1.symbol}`;const L=t.token0.address?.toLowerCase()===F.address?.toLowerCase()?"ETH":t.token0.symbol,I=t.token1.address?.toLowerCase()===F.address?.toLowerCase()?"ETH":t.token1.symbol;return`${L}/${I}`})()})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[b===10143&&(t.token0.isWETH||t.token0.isNative)?"MON":t.token0.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:R,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:b===10143&&(t.token0.isWETH||t.token0.isNative)?"/monad.png":la(t.token0,b),alt:b===10143&&(t.token0.isWETH||t.token0.isNative)?"MON":t.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b===10143&&(t.token0.isWETH||t.token0.isNative)?"MON":t.token0.symbol})]})]}),e.jsx(vr,{token:t.token0,chainId:b})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[b===10143&&(t.token1.isWETH||t.token1.isNative)?"MON":t.token1.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i,onChange:O,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:b===10143&&(t.token1.isWETH||t.token1.isNative)?"/monad.png":la(t.token1,b),alt:b===10143&&(t.token1.isWETH||t.token1.isNative)?"MON":t.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b===10143&&(t.token1.isWETH||t.token1.isNative)?"MON":t.token1.symbol})]})]}),e.jsx(vr,{token:t.token1,chainId:b})]}),e.jsx("button",{onClick:D,disabled:u||!r||!i,className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
              ${u||!r||!i?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
            `,children:u?"Adding Liquidity...":"Add Liquidity"})]}),e.jsx(bn,{isOpen:m,onClose:()=>x(!1),onSelect:Z=>{s(Z),x(!1),o(""),d("")}}),e.jsx(Fd,{isOpen:y,onClose:()=>{k(!1),g(null),j(null)},currentStep:w,pool:t,error:M,chainId:b}),e.jsx(Ld,{isOpen:h,onClose:()=>T(!1),onRate:E})]})}const It={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},ta={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite",opacity:.2}})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})})},Dd={[It.LOWEST]:1,[It.LOW]:10,[It.MEDIUM]:60,[It.HIGH]:200},Bd={factory:"0x1f984000000000000000000000000000000000003",quoter:"0x385a5cf5f83e99f7bb2852b6a19c3538b9f7658",router:"0x73855d06de49d0fe49c42638ba8d4d3638a9c62a",nftPositionManage:"0xb7610f9b733e7d45184be3a1bc8a847be6ec4f0b"},Rd="0xcA11bde05977b3631167028862bE2a173976CA11",Od=["function aggregate(tuple(address target, bytes callData)[] calls) view returns (uint256 blockNumber, bytes[] returnData)","function tryAggregate(bool requireSuccess, tuple(address target, bytes callData)[] calls) view returns (tuple(bool success, bytes returnData)[])"],_a=new Pt(["function symbol() view returns (string)","function decimals() view returns (uint8)"]),jr=({token:n})=>{const[a,t]=l.useState("0"),[s,r]=l.useState(!1),o=ct(),{address:i}=Le();if(l.useEffect(()=>{(async()=>{if(!(!i||!n||!o))try{if(r(!0),n.address?.toLowerCase()===ie.WETH.toLowerCase()){const m=await new ne(window.ethereum).getBalance(i);t(Ve(m))}else{const c=await o.getTokenBalance(n.address,i);t(c)}}catch(c){console.error("Error fetching balance:",c),t("0")}finally{r(!1)}})()},[n,i,o]),!n)return null;const d=n.address?.toLowerCase()===ie.WETH.toLowerCase()?"ETH":n.symbol;return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",s?"Loading...":a," ",d]})},_d=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-[99998]",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(9)].map((d,u)=>{const c=u+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>i(c),onMouseLeave:()=>i(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(o||s)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s===0?"Select a rating":`You rated: ${s} star${s!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{s>0&&(t(s),a())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${s>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},Wd=()=>{const[n,a]=l.useState(!1),[t,s]=l.useState([]),[r,o]=l.useState(null),{address:i}=Le(),d=l.useCallback(async(c,m)=>{try{const x=new _(Rd,Od,c),f=m.flatMap(A=>[{target:A,callData:_a.encodeFunctionData("symbol")},{target:A,callData:_a.encodeFunctionData("decimals")}]),{returnData:p}=await x.aggregate(f),b={};for(let A=0;A<m.length;A++){const N=m[A].toLowerCase();try{const y=_a.decodeFunctionResult("symbol",p[A*2])[0],k=_a.decodeFunctionResult("decimals",p[A*2+1])[0];b[N]={symbol:y,decimals:k}}catch(y){console.warn(`Error decoding token info for ${N}:`,y),b[N]={symbol:"Unknown",decimals:18}}}return b}catch(x){return console.warn("Error in multicall:",x),m.reduce((f,p)=>(f[p.toLowerCase()]={symbol:"Unknown",decimals:18},f),{})}},[]),u=l.useCallback(async()=>{if(i)try{a(!0),o(null);const c=new ne(window.ethereum),m=new _(Bd.factory,["event PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)"],c),x=await c.getBlockNumber(),f=Math.max(0,x-7200*30),p=m.filters.PoolCreated(),b=await m.queryFilter(p,f),A=[...new Set(b.flatMap(k=>[k.args[0],k.args[1]]))],N=await d(c,A),y=b.map(k=>{const w=k.args[0].toLowerCase(),g=k.args[1].toLowerCase(),v=k.args[2];return{poolAddress:k.args[4],fee:v.toString(),token0:{address:k.args[0],symbol:N[w]?.symbol||"Unknown",decimals:N[w]?.decimals||18,isWETH:w===ie.WETH.toLowerCase()},token1:{address:k.args[1],symbol:N[g]?.symbol||"Unknown",decimals:N[g]?.decimals||18,isWETH:g===ie.WETH.toLowerCase()}}});s(y)}catch(c){console.error("Error fetching pools:",c),o(c.message||"Failed to fetch pools")}finally{a(!1)}},[i,d]);return l.useEffect(()=>{u()},[u]),{pools:t,loading:n,error:r,refetch:u}},Hd=({isOpen:n,onClose:a,onSelect:t})=>{const{pools:s,loading:r,error:o}=Wd();return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:"Select a Pool"}),e.jsx("div",{className:"mt-4 space-y-2 max-h-[60vh] overflow-y-auto",children:r?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})}):o?e.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading pools: ",o]}):s.length>0?s.map(i=>e.jsx("button",{onClick:()=>t(i),className:"w-full p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(i.token0),alt:i.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:je(i.token1),alt:i.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[i.token0.isWETH?"ETH":i.token0.symbol,"/",i.token1.isWETH?"ETH":i.token1.symbol]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[(Number(i.fee)/1e4).toFixed(2),"% fee tier"]})]})]})},i.poolAddress)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pools available"})})]})})})})]})})},Ud=({isOpen:n,onClose:a,currentStep:t,pool:s,error:r})=>{const o=[{id:"preparing",title:"Preparing",icon:e.jsx(ta.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(ta.Approval,{})},{id:"adding",title:"Adding Liquidity",icon:e.jsx(ta.Adding,{})},{id:"confirming",title:"Confirming",icon:e.jsx(ta.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(ta.Completed,{})}],i=!!r,d=c=>c?.includes("user rejected")?"Transaction was rejected. Please try again.":c?.includes("insufficient")?"Insufficient balance for adding liquidity.":c?.includes("INSUFFICIENT_OUTPUT_AMOUNT")?"Price impact too high, try a smaller amount.":c?.includes("EXCESSIVE_INPUT_AMOUNT")?"Insufficient liquidity for this trade.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred",u=()=>{if(!s)return"";const c={...s.token0,symbol:s.token0.address?.toLowerCase()===ie.WETH.toLowerCase()?"ETH":s.token0.symbol,name:s.token0.address?.toLowerCase()===ie.WETH.toLowerCase()?"Ethereum":s.token0.name},m={...s.token1,symbol:s.token1.address?.toLowerCase()===ie.WETH.toLowerCase()?"ETH":s.token1.symbol,name:s.token1.address?.toLowerCase()===ie.WETH.toLowerCase()?"Ethereum":s.token1.name};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(c),alt:c.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:je(m),alt:m.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{children:[c.symbol," ",m.symbol]})]})};return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[i?"Error Adding Liquidity":"Adding Liquidity",!i&&s&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:u()})]}),e.jsx("div",{className:"space-y-4",children:o.map((c,m)=>{const x=t===c.id,f=!i&&o.findIndex(b=>b.id===t)>m,p=i&&t===c.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${x&&!p?"bg-[#00ffbd]/10 text-[#00ffbd]":f?"text-[#00ffbd]":p?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[c.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.title}),x&&!i&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.id==="preparing"&&"Preparing transaction...",c.id==="approval"&&`Approving ${s?.token0?.symbol} and ${s?.token1?.symbol}`,c.id==="adding"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Adding liquidity to ",u()," pool"]}),c.id==="confirming"&&"Waiting for confirmation...",c.id==="completed"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully added liquidity to ",u()," pool!"]})]})]}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},c.id)})}),i&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ta.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:d(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})};function $d(){const{address:n}=Le();ct();const[a,t]=l.useState(null),[s,r]=l.useState(""),[o,i]=l.useState(""),[d,u]=l.useState(!1),[c,m]=l.useState(!1),[x,f]=l.useState(null);ot.useRef(null);const[p,b]=l.useState(!1),[A,N]=l.useState(null),[y,k]=l.useState(!1),[w,g]=l.useState(!1),[v,S]=l.useState({width:window.innerWidth,height:window.innerHeight}),[h,T]=l.useState(null),[C,H]=l.useState("full"),[M,j]=l.useState(null),[E,R]=l.useState({min:"",max:""});l.useEffect(()=>{const L=()=>{S({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]);const O=L=>{r(L.target.value),f("token0")},D=L=>{i(L.target.value),f("token1")},Z=async()=>{try{u(!0),b(!0),N("preparing"),T(null);const I=await new ne(window.ethereum).getSigner(),V=new ft(I),W=a.token0.address?.toLowerCase()===ie.WETH.toLowerCase()?ie.WETH:a.token0.address,X=a.token1.address?.toLowerCase()===ie.WETH.toLowerCase()?ie.WETH:a.token1.address,ae=Te(s,a.token0.decimals),le=Te(o,a.token1.decimals),xe={.01:It.LOWEST,.05:It.LOW,.3:It.MEDIUM,1:It.HIGH}[M];let be,ge;if(C==="full")be=-887272,ge=887272;else{const q=await V.getCurrentPrice(W,X,xe),ee=(100-parseFloat(E.min))/100,ke=(100+parseFloat(E.max))/100;be=await V.priceToTick(q*ee,a.token0.decimals,a.token1.decimals),ge=await V.priceToTick(q*ke,a.token0.decimals,a.token1.decimals);const te=Dd[xe];be=Math.ceil(be/te)*te,ge=Math.floor(ge/te)*te}N("approval"),await V.ensureTokenApprovals({token0:W,token1:X,amount0Desired:ae,amount1Desired:le,ownerAddress:n}),N("adding");const ve=a.token0.address?.toLowerCase()===ie.WETH.toLowerCase()?ae:a.token1.address?.toLowerCase()===ie.WETH.toLowerCase()?le:0n,{tokenId:P,liquidity:J,amount0:re,amount1:U}=await V.mint({token0:W,token1:X,fee:xe,tickLower:be,tickUpper:ge,amount0Desired:ae,amount1Desired:le,amount0Min:0,amount1Min:0,recipient:n,deadline:Math.floor(Date.now()/1e3)+1200,value:ve});console.log("Position Created:",{tokenId:P.toString(),liquidity:J.toString(),amount0:Y(re,a.token0.decimals),amount1:Y(U,a.token1.decimals)}),N("completed"),setTimeout(()=>{b(!1),N(null),setTimeout(()=>{k(!0),setTimeout(()=>{g(!0)},1e3),setTimeout(()=>{r(""),i(""),k(!1)},3e4)},100)},1e3)}catch(L){console.error("Add liquidity error:",L),T(L.message),N("error")}finally{u(!1)}},F=async L=>{console.log("User rating:",L)};return e.jsxs("div",{className:"space-y-6",children:[y&&e.jsx(pt,{width:v.width,height:v.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>m(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[a?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(a.token0),alt:a.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:je(a.token1),alt:a.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[a.token0.address?.toLowerCase()===ie.WETH.toLowerCase()?"ETH":a.token0.symbol,"/",a.token1.address?.toLowerCase()===ie.WETH.toLowerCase()?"ETH":a.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fee Tier"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[.01,.05,.3,1].map(L=>e.jsxs("button",{onClick:()=>j(L),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors
                    ${M===L?"bg-[#00ffbd] text-black":"bg-white/5 dark:bg-[#2d2f36] text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
                  `,children:[L,"%"]},L))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[a.token0.isWETH?"ETH":a.token0.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:O,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:a.token0.logo,alt:a.token0.isWETH?"ETH":a.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.token0.isWETH?"ETH":a.token0.symbol})]})]}),e.jsx(jr,{token:a.token0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[a.token1.isWETH?"ETH":a.token1.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:o,onChange:D,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:a.token1.logo,alt:a.token1.isWETH?"ETH":a.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.token1.isWETH?"ETH":a.token1.symbol})]})]}),e.jsx(jr,{token:a.token1})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Set price range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>H("full"),className:`p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border transition-colors ${C==="full"?"border-[#00ffbd] text-[#00ffbd] dark:text-[#00ffbd]":"border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:border-[#00ffbd] dark:hover:border-[#00ffbd]"}`,children:"Full range"}),e.jsx("button",{onClick:()=>H("custom"),className:`p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border transition-colors ${C==="custom"?"border-[#00ffbd] text-[#00ffbd] dark:text-[#00ffbd]":"border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:border-[#00ffbd] dark:hover:border-[#00ffbd]"}`,children:"Custom range"})]}),C==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Min Price"}),e.jsx("input",{type:"text",value:E.min,onChange:L=>R(I=>({...I,min:L.target.value})),placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Max Price"}),e.jsx("input",{type:"text",value:E.max,onChange:L=>R(I=>({...I,max:L.target.value})),placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:C==="full"?"Providing full range liquidity ensures continuous market participation across all possible prices, offering simplicity but with potential for higher impermanent loss.":"Custom range allows you to concentrate your liquidity within specific price bounds, enhancing capital efficiency and fee earnings but requiring more active management."})})]}),e.jsx("button",{onClick:Z,disabled:d||!s||!o||!M||!E.min||!E.max,className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
              ${d||!s||!o||!M||!E.min||!E.max?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
            `,children:d?"Adding Liquidity...":"Add Liquidity"})]}),e.jsx(Ud,{isOpen:p,onClose:()=>{b(!1),N(null),T(null)},currentStep:A,pool:a,error:h}),e.jsx(_d,{isOpen:w,onClose:()=>g(!1),onRate:F}),e.jsx(Hd,{isOpen:c,onClose:()=>m(!1),onSelect:L=>{t(L),m(!1),r(""),i(""),j(null),R({min:"",max:""})}})]})}const aa={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_1s_ease-in-out_infinite]",style:{strokeDasharray:20,strokeDashoffset:20,animation:"draw 1s ease-in-out forwards"}})]})}),Removing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8M8 12h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[spin_2s_linear_infinite]",transform:"rotate(45 12 12)"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v6l4 4",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[spin_2s_linear_infinite]"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20,animation:"draw 0.5s ease-in-out forwards"}})]})})},wn=document.createElement("style");wn.textContent=`
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
`;document.head.appendChild(wn);const qd=({isOpen:n,onClose:a,currentStep:t,pool:s,error:r})=>{const o=[{key:"preparing",label:"Preparing Transaction",icon:aa.Preparing},{key:"approval",label:"Awaiting Approval",icon:aa.Approval},{key:"removing",label:"Removing Liquidity",icon:aa.Removing},{key:"confirming",label:"Confirming Transaction",icon:aa.Confirming},{key:"completed",label:"Liquidity Removed Successfully",icon:aa.Completed}],i=o.findIndex(c=>c.key===t),d=c=>c?c.includes("user rejected")?"Transaction was rejected by user":c.includes("insufficient funds")?"Insufficient funds for transaction":c:"",u=()=>s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:s.token0.logo,alt:s.token0.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:s.token1.logo,alt:s.token1.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"text-gray-900 dark:text-white",children:[s.token0.symbol,"/",s.token1.symbol]})]}):"";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsxs(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Remove Liquidity Status",s&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:u()})]}),e.jsxs("div",{className:"space-y-4",children:[o.map((c,m)=>{const x=c.icon,f=m===i,p=m<i;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${f?"bg-[#00ffbd]/10 text-[#00ffbd]":p?"text-[#00ffbd]":"text-gray-400"}`,children:[e.jsx(x,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.label}),f&&c.key==="removing"&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Removing liquidity for ",u()]})]})]},c.key)}),r&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-red-500/10",children:[e.jsx(aa.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"block font-medium text-red-500",children:"Transaction Failed"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:d(r)})]})]})]}),t==="completed"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-[#00ffbd] font-medium",children:"Liquidity removed successfully!"})}),r&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium text-lg bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Close"})})]})})})})]})})},zd=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(Q.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[...Array(9)].map((d,u)=>e.jsx("button",{onMouseEnter:()=>i(u+1),onMouseLeave:()=>i(0),onClick:()=>{r(u+1),t(u+1),a()},className:"focus:outline-none",children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${u+1<=(o||s)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},u))})]})})})})]})})},Vd=["function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function removeLiquidityETH(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountToken, uint amountETH)"];function Gd(){const{address:n}=Le(),a=ct(),[t,s]=l.useState(null),[r,o]=l.useState(!1),[i,d]=l.useState(""),[u,c]=l.useState("0"),[m,x]=l.useState(null),[f,p]=l.useState(!1),[b,A]=l.useState(!1),[N,y]=l.useState("0"),[k,w]=l.useState("0"),[g,v]=l.useState(!1),[S,h]=l.useState(null),[T,C]=l.useState(!1),[H,M]=l.useState(!1),[j,E]=l.useState({width:window.innerWidth,height:window.innerHeight}),[R,O]=l.useState(null);l.useEffect(()=>{const L=()=>{E({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]),l.useEffect(()=>{(async()=>{if(!(!t||!n||!a)){A(!0);try{const I=await a.getTokenBalance(t.pairAddress,n);c(I)}catch(I){console.error("Error loading pool info:",I),c("0")}finally{A(!1)}}})()},[t?.pairAddress,n,a]),l.useEffect(()=>{if(!m||!u)return;const L=m,V=parseFloat(u)*L/100;d(V.toString())},[m,u]),l.useEffect(()=>{(async()=>{if(!(!t||!i||!n))try{const I=new ne(window.ethereum),V=new _(t.pairAddress,["function getReserves() view returns (uint112, uint112, uint32)","function totalSupply() view returns (uint256)"],I),[W,X]=await Promise.all([V.getReserves(),V.totalSupply()]),ae=Te(i,18),le=W[0]*ae/X,xe=W[1]*ae/X;y(Y(le,t.token0.decimals||18)),w(Y(xe,t.token1.decimals||18))}catch(I){console.error("Error calculating amounts:",I)}})()},[t,i,n]);const D=async()=>{if(!n){G.error("Please connect your wallet");return}if(!t||!i){G.error("Please enter a valid amount");return}p(!0),v(!0),h("preparing"),O(null);try{const L=new ne(window.ethereum),I=await L.getNetwork().then(ae=>Number(ae.chainId)),V=await L.getSigner(),W=Te(i,18);if(I===10143){const ae=ie[10143].router,le=new Pt(["function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function removeLiquidityETH(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountToken, uint amountETH)"]),xe=new _(t.pairAddress,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function getReserves() view returns (uint112, uint112, uint32)"],V);await xe.allowance(n,ae)<W&&(h("approval"),await(await xe.approve(ae,lt)).wait());const ge=Te(N,t.token0.decimals)*99n/100n,ve=Te(k,t.token1.decimals)*99n/100n,P=BigInt(Math.floor(Date.now()/1e3)+60*20),J=t.token0.isNative,re=t.token1.isNative;h("removing");let U;if(J||re){const q=J?t.token1.address:t.token0.address,ee=J?ve:ge,ke=J?ge:ve;U=await V.sendTransaction({to:ae,data:le.encodeFunctionData("removeLiquidityETH",[q,W,ee,ke,await V.getAddress(),P])})}else U=await V.sendTransaction({to:ae,data:le.encodeFunctionData("removeLiquidity",[t.token0.address,t.token1.address,W,ge,ve,await V.getAddress(),P])});h("confirming"),await U.wait()}else{const ae=new _(ie[I].router,Vd,V),le=new _(t.pairAddress,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function getReserves() view returns (uint112, uint112, uint32)"],V);await le.allowance(n,ie[I].router)<W&&(h("approval"),await(await le.approve(ie[I].router,lt)).wait());const be=Te(N,t.token0.decimals||18)*99n/100n,ge=Te(k,t.token1.decimals||18)*99n/100n,ve=BigInt(Math.floor(Date.now()/1e3)+60*20),P=t.token0.address.toLowerCase()===ie[I].WETH.toLowerCase(),J=t.token1.address.toLowerCase()===ie[I].WETH.toLowerCase();h("removing");let re;if(P||J){const U=P?t.token1.address:t.token0.address,q=P?ge:be,ee=P?be:ge;re=await ae.removeLiquidityETH(U,W,q,ee,n,ve,{gasLimit:1000000n})}else re=await ae.removeLiquidity(t.token0.address,t.token1.address,W,be,ge,n,ve,{gasLimit:1000000n});h("confirming"),await re.wait()}h("completed"),C(!0),setTimeout(()=>{v(!1),h(null),M(!0)},1e3),setTimeout(()=>{C(!1)},3e4);const X=await pairContract.balanceOf(n);c(Y(X,18))}catch(L){console.error("Remove liquidity error:",L),O(L.message||"Failed to remove liquidity"),h(null),C(!1)}finally{p(!1)}},Z=()=>{d(u),x(100)},F=L=>{L.token0.address?.toLowerCase()==="0x70262e266E50603AcFc5D58997eF73e5a8775844".toLowerCase()&&(L.token0.logo="/logos/usdt.png"),L.token1.address?.toLowerCase()==="0x70262e266E50603AcFc5D58997eF73e5a8775844".toLowerCase()&&(L.token1.logo="/logos/usdt.png"),s(L),o(!1),d(""),x(null)};return e.jsxs("div",{className:"space-y-6",children:[T&&e.jsx(pt,{width:j.width,height:j.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Pool"}),e.jsxs("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 flex items-center justify-between hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors",children:[t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:t.token0.logo,alt:t.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:t.token1.logo,alt:t.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.token0.symbol,"/",t.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx(ko,{className:"w-5 h-5 text-gray-400"})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Percentage"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(L=>e.jsxs("button",{onClick:()=>x(L),className:`px-4 py-2 rounded-xl font-medium transition-colors ${m===L?"bg-[#00ffbd] text-black":"bg-white/5 dark:bg-[#2d2f36] text-gray-700 dark:text-gray-300 hover:bg-[#00ffbd]/10"}`,children:[L,"%"]},L))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LP Token Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:i,onChange:L=>{d(L.target.value),x(null)},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 pr-16 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:Z,className:"absolute right-3 top-1/2 -translate-y-1/2 px-2 py-1 text-sm font-medium text-[#00ffbd] hover:text-[#00e6a9] transition-colors",children:"MAX"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Balance: ",b?"Loading...":u," LP Tokens"]})]}),e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"You Will Receive"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:t.token0.logo,alt:t.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.token0.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Number(N).toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:t.token1.logo,alt:t.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:t.token1.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Number(k).toFixed(6)})]})]})]})]}),e.jsx("button",{onClick:D,disabled:f||!i,className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
          ${f||!i?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
        `,children:f?"Removing Liquidity...":"Remove Liquidity"}),e.jsx(bn,{isOpen:r,onClose:()=>o(!1),onSelect:F}),e.jsx(qd,{isOpen:g,onClose:()=>{v(!1),h(null),O(null)},currentStep:S,pool:t,error:R}),e.jsx(zd,{isOpen:H,onClose:()=>M(!1),onRate:L=>{console.log("User rated liquidity removal:",L)}})]})}const sa={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Removing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]"})]})})},Yd=({isOpen:n,onClose:a,onRate:t})=>{const[s,r]=l.useState(0),[o,i]=l.useState(0);return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-[99998]",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(5)].map((d,u)=>{const c=u+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>i(c),onMouseLeave:()=>i(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(o||s)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s===0?"Select a rating":`You rated: ${s} star${s!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{s>0&&(t(s),a())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${s>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},Xd=({isOpen:n,onClose:a,currentStep:t,position:s,error:r})=>{const o=[{id:"preparing",title:"Preparing",icon:e.jsx(sa.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(sa.Approval,{})},{id:"removing",title:"Removing Liquidity",icon:e.jsx(sa.Removing,{})},{id:"confirming",title:"Confirming",icon:e.jsx(sa.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(sa.Completed,{})}],i=!!r,d=u=>u?.includes("user rejected")?"Transaction was rejected. Please try again.":u?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(se,{appear:!0,show:n,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:a,children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:i?"Error Removing Liquidity":"Removing Liquidity"}),e.jsx("div",{className:"space-y-4",children:o.map((u,c)=>{const m=t===u.id,x=!i&&o.findIndex(p=>p.id===t)>c,f=i&&t===u.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${m&&!f?"bg-[#00ffbd]/10 text-[#00ffbd]":x?"text-[#00ffbd]":f?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[u.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.title}),m&&!i&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[u.id==="preparing"&&"Preparing transaction...",u.id==="approval"&&"Approving removal...",u.id==="removing"&&"Removing your liquidity...",u.id==="confirming"&&"Waiting for confirmation...",u.id==="completed"&&"Successfully removed liquidity!"]})]}),x&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},u.id)})}),i&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(sa.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:d(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),t==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})};function Zd(){const{address:n}=Le(),[a,t]=l.useState(null),[s,r]=l.useState("0.0"),[o,i]=l.useState(!1),[d,u]=l.useState(!1),[c,m]=l.useState(null),[x,f]=l.useState(!1),[p,b]=l.useState(!1),[A,N]=l.useState(null),[y,k]=l.useState({width:window.innerWidth,height:window.innerHeight});l.useEffect(()=>{const h=()=>{k({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const w=async()=>{try{i(!0),u(!0),m("preparing"),N(null);const T=await new ne(window.ethereum).getSigner(),C=new ft(T);if(!a?.tokenId)throw new Error("No position selected");const H=parseFloat(s)/100,M=BigInt(Math.floor(Number(a.liquidity)*H));m("removing");const{amount0:j,amount1:E}=await C.decreaseLiquidity({tokenId:a.tokenId,liquidity:M,amount0Min:0,amount1Min:0,deadline:Math.floor(Date.now()/1e3)+1200});m("collecting"),await C.collect({tokenId:a.tokenId,recipient:n,amount0Max:j,amount1Max:E}),H===1&&(m("burning"),await C.burn(a.tokenId)),console.log("Liquidity Removed:",{tokenId:a.tokenId.toString(),liquidityRemoved:M.toString(),amount0:Y(j,a.token0.decimals),amount1:Y(E,a.token1.decimals)}),m("completed"),setTimeout(()=>{u(!1),m(null),setTimeout(()=>{f(!0),setTimeout(()=>{b(!0)},1e3),setTimeout(()=>{t(null),r("0.0"),f(!1)},3e4)},100)},1e3)}catch(h){console.error("Remove liquidity error:",h),N(h.message),m("error")}finally{i(!1)}},g=async h=>{console.log("User rating:",h)},v=()=>{r("0.0")},S=h=>{r((0*h/100).toFixed(6))};return e.jsxs("div",{className:"space-y-6",children:[x&&e.jsx(pt,{width:y.width,height:y.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Pool"}),e.jsxs("button",{onClick:()=>{},className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[a?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(a.token0),alt:a.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:je(a.token1),alt:a.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[a.token0.symbol,"/",a.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select Pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Percentage"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(h=>e.jsxs("button",{onClick:()=>S(h),className:"px-4 py-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors text-gray-900 dark:text-white font-medium",children:[h,"%"]},h))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LP Token Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:s,onChange:h=>r(h.target.value),placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 pr-20"}),e.jsx("button",{onClick:v,className:"absolute right-3 top-1/2 -translate-y-1/2 px-3 py-1 bg-[#00ffbd] hover:bg-[#00e6a9] text-black rounded-lg font-medium transition-colors text-sm",children:"MAX"})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Balance: 0.0 LP Tokens"})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"You Will Receive"}),e.jsx("div",{className:"space-y-2",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(a.token0),alt:a.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:a.token0.symbol})]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"0.000000"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(a.token1),alt:a.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:a.token1.symbol})]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"0.000000"})]})]})})]}),e.jsx("button",{onClick:w,disabled:o||!a||!s||s==="0.0",className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
              ${o||!a||!s||s==="0.0"?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
            `,children:o?"Removing Liquidity...":"Remove Liquidity"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(nt,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to remove liquidity"}),e.jsx("button",{onClick:open,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]}),e.jsx(Xd,{isOpen:d,onClose:()=>{u(!1),m(null),N(null)},currentStep:c,position:a,error:A}),e.jsx(Yd,{isOpen:p,onClose:()=>b(!1),onRate:g})]})}const Jd="Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",Nr=5*60*1e3,ya={data:null,timestamp:0,isValid(){return this.data&&Date.now()-this.timestamp<Nr},set(n){this.data=n,this.timestamp=Date.now();try{const a=JSON.stringify(n,(t,s)=>typeof s=="bigint"?`bigint:${s.toString()}`:s);localStorage.setItem("myPoolsCache",JSON.stringify({data:a,timestamp:this.timestamp}))}catch(a){console.warn("Error saving to localStorage:",a)}},load(){try{const n=localStorage.getItem("myPoolsCache");if(n){const{data:a,timestamp:t}=JSON.parse(n);if(Date.now()-t<Nr)return this.data=JSON.parse(a,(s,r)=>typeof r=="string"&&r.startsWith("bigint:")?BigInt(r.slice(7)):r),this.timestamp=t,!0}}catch(n){console.warn("Error loading from localStorage:",n)}return!1},clear(){this.data=null,this.timestamp=0,localStorage.removeItem("myPoolsCache")}},ks={data:new Map,load(){try{const n=localStorage.getItem("tokenMetadataCache");if(n){const a=JSON.parse(n,(t,s)=>typeof s=="string"&&s.startsWith("bigint:")?BigInt(s.slice(7)):s);this.data=new Map(a)}}catch(n){console.warn("Error loading token metadata cache:",n)}},set(n,a){this.data.set(n.toLowerCase(),a);try{const t=JSON.stringify([...this.data],(s,r)=>typeof r=="bigint"?`bigint:${r.toString()}`:r);localStorage.setItem("tokenMetadataCache",t)}catch(t){console.warn("Error saving token metadata cache:",t)}},get(n){return this.data.get(n.toLowerCase())}};ks.load();ya.load();function o0(){const{address:n}=Le(),a=Bt(),[t,s]=l.useState([]),[r,o]=l.useState(!1),[i,d]=l.useState("");l.useEffect(()=>{(async()=>{if(!n){console.log("No wallet address found");return}o(!0);try{if(console.log("Connected wallet address:",n),console.log("Starting to load pools..."),ya.isValid()&&ya.data){console.log("Returning pools from cache"),s(ya.data),o(!1);return}const m=`https://eth-sepolia.g.alchemy.com/v2/${Jd}`,f=await(await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"alchemy_getTokenBalances",params:[n,"erc20"]})})).json();if(console.log("Token balances:",f),f.result?.tokenBalances){const p=f.result.tokenBalances.filter(N=>N.tokenBalance!=="0x0").map(async N=>{const y=ks.get(N.contractAddress);if(y)return{result:y};const w=await(await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"alchemy_getTokenMetadata",params:[N.contractAddress]})})).json();return w.result&&ks.set(N.contractAddress,w.result),w}),b=await Promise.all(p);console.log("Token metadata:",b);const A=f.result.tokenBalances.filter((N,y)=>b[y]?.result?.symbol?.includes("UNI-V2"));if(console.log("LP tokens found:",A),A.length>0){const y=(await Promise.all(A.map(async k=>{try{const w=k.contractAddress;console.log("Fetching data for pool:",w);const g=await a.getPoolInfoByAddress(w);if(!g)return console.log("No pool info found for:",w),null;const[v,S]=await Promise.all([oa(g.token0),oa(g.token1)]);return console.log("Pool info found:",{token0:v?.symbol,token1:S?.symbol,reserves:g.reserves}),{...g,token0:v,token1:S,pairAddress:w,lpBalance:k.tokenBalance,createdAt:new Date,reserves:{...g.reserves,reserve0Formatted:Y(g.reserves?.reserve0||"0",v?.decimals||18),reserve1Formatted:Y(g.reserves?.reserve1||"0",S?.decimals||18)}}}catch(w){return console.error("Error fetching pool data:",w),null}}))).filter(k=>k!==null);console.log("Setting pools:",y),s(y),ya.set(y)}}}catch(m){console.error("Error loading pools:",m),G.error("Failed to load pools: "+m.message)}finally{o(!1)}})()},[n,a]);const u=async()=>{if(!mt(i)){G.error("Please enter a valid pool address");return}o(!0);try{const c=await a.getPoolInfoByAddress(i);if(!c){G.error("No pool found at this address");return}const[m,x]=await Promise.all([oa(c.token0),oa(c.token1)]);s(f=>{if(!f.some(p=>p.pairAddress.toLowerCase()===i.toLowerCase())){const p={...c,token0:m,token1:x,pairAddress:i,reserves:{...c.reserves,reserve0Formatted:Y(c.reserves?.reserve0||"0",m?.decimals||18),reserve1Formatted:Y(c.reserves?.reserve1||"0",x?.decimals||18)}};return[...f,p]}return f}),G.success("Pool found!")}catch(c){console.error("Error searching pool:",c),G.error("Failed to fetch pool information")}finally{o(!1)}};return n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:c=>d(c.target.value),placeholder:"Enter pool address...",className:"flex-1 px-4 py-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent"}),e.jsx("button",{onClick:u,disabled:r,className:"px-4 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black rounded-xl font-medium transition-colors disabled:opacity-50",children:"Search"})]}),r?e.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#00ffbd]"})}):t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"No pools found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Search for a pool by address or create a new one"})]}):t.map(c=>e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(c.token0),alt:c.token0?.symbol||"ERC20 Token",className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:m=>{m.target.onerror=null,m.target.src="/token-default.png"}}),e.jsx("img",{src:je(c.token1),alt:c.token1?.symbol||"ERC20 Token",className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:m=>{m.target.onerror=null,m.target.src="/token-default.png"}})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[c.token0?.symbol||"ERC20 Token","/",c.token1?.symbol||"ERC20 Token"]})]}),c.createdAt&&e.jsxs("span",{className:"text-sm text-gray-500",children:["Created ",new Date(c.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[e.jsx("span",{className:"truncate",children:c.pairAddress}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.pairAddress),G.success("Address copied to clipboard!")},className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors",title:"Copy address",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),c.reserves&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.token0?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c.reserves.reserve0Formatted})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.token1?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c.reserves.reserve1Formatted})]})]}),c.lpBalance&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Your LP Balance"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[Y(c.lpBalance||"0",18)," LP Tokens"]})]})]},c.pairAddress))]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Please connect your wallet to view your pools"})})}const Tr=5*60*1e3,Nt={TESTNET:{id:1301,name:"Unichain Testnet",blockscoutUrl:"https://unichain-sepolia.blockscout.com"},MAINNET:{id:130,name:"Unichain Mainnet",blockscoutUrl:"https://unichain.blockscout.com"}},Kd={1301:[{address:ie[1301].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/logos/usdc.png"},{address:ie[1301].USDT,symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}],130:[{address:ie[130].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:ie[130].USDT,symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}]},Cr=(n,a)=>{const t=Kd[a]?.find(s=>s.address?.toLowerCase()===n.address?.toLowerCase());return t?{...n,...t,logo:t.logo}:n},wa={data:null,timestamp:0,isValid(){return this.data&&Date.now()-this.timestamp<Tr},set(n){this.data=n,this.timestamp=Date.now();try{const a=JSON.stringify(n,(t,s)=>typeof s=="bigint"?`bigint:${s.toString()}`:s);localStorage.setItem("myPoolsCache_unichain",JSON.stringify({data:a,timestamp:this.timestamp}))}catch(a){console.warn("Error saving to localStorage:",a)}},load(){try{const n=localStorage.getItem("myPoolsCache_unichain");if(n){const{data:a,timestamp:t}=JSON.parse(n);if(Date.now()-t<Tr)return this.data=JSON.parse(a,(s,r)=>typeof r=="string"&&r.startsWith("bigint:")?BigInt(r.slice(7)):r),this.timestamp=t,!0}}catch(n){console.warn("Error loading from localStorage:",n)}return!1},clear(){this.data=null,this.timestamp=0,localStorage.removeItem("myPoolsCache_unichain")}},Qd={data:new Map,load(){try{const n=localStorage.getItem("tokenMetadataCache_unichain");if(n){const a=JSON.parse(n,(t,s)=>typeof s=="string"&&s.startsWith("bigint:")?BigInt(s.slice(7)):s);this.data=new Map(a)}}catch(n){console.warn("Error loading token metadata cache:",n)}},set(n,a){this.data.set(n.toLowerCase(),a);try{const t=JSON.stringify([...this.data],(s,r)=>typeof r=="bigint"?`bigint:${r.toString()}`:r);localStorage.setItem("tokenMetadataCache_unichain",t)}catch(t){console.warn("Error saving token metadata cache:",t)}},get(n){return this.data.get(n.toLowerCase())}};Qd.load();wa.load();const ec=()=>e.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white/5 dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800 w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-800 animate-pulse"})]}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:e.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})})]});function i0(){const{address:n}=Le(),a=ct(),[t,s]=l.useState([]),[r,o]=l.useState(!1),[i,d]=l.useState(""),[u,c]=l.useState(null),[m,x]=l.useState(""),f={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},p={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}},hover:{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}}};return l.useEffect(()=>((async()=>{if(window.ethereum)try{const A=await window.ethereum.request({method:"eth_chainId"});c(parseInt(A,16))}catch(A){console.error("Error getting chain ID:",A)}})(),window.ethereum&&window.ethereum.on("chainChanged",A=>{c(parseInt(A,16))}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",()=>{})}),[]),l.useEffect(()=>{(async()=>{if(!n||!a||!u)return;if(!(u===Nt.TESTNET.id||u===Nt.MAINNET.id)){x("Please switch to Unichain network (Testnet or Mainnet)"),s([]);return}o(!0),x("");try{if(wa.isValid()&&wa.data){s(wa.data),o(!1);return}const N=u===Nt.TESTNET.id?Nt.TESTNET.blockscoutUrl:Nt.MAINNET.blockscoutUrl,y=await fetch(`${N}/api/v2/addresses/${n}/token-balances`);if(!y.ok)throw new Error("Failed to fetch token balances from Blockscout");const w=(await y.json()).filter(S=>S.token?.type==="ERC-20"&&S.value&&S.token.address&&(S.token.symbol==="UNI-V2"||S.token.name?.includes("Uniswap V2"))).map(S=>S.token.address);if(!w||w.length===0){s([]);return}const v=(await Promise.all(w.map(async S=>{try{const h=await a.getPoolInfoByAddress(S);if(!h)return null;const[T,C]=await Promise.all([Ze(h.token0.address),Ze(h.token1.address)]),H=Cr({...h.token0,name:T?.name||h.token0.name,symbol:T?.symbol||h.token0.symbol,decimals:T?.decimals||h.token0.decimals,logo:T?.logo||"/token-default.png",logoIpfs:T?.logoIpfs},u),M=Cr({...h.token1,name:C?.name||h.token1.name,symbol:C?.symbol||h.token1.symbol,decimals:C?.decimals||h.token1.decimals,logo:C?.logo||"/token-default.png",logoIpfs:C?.logoIpfs},u);return{pairAddress:S,token0:H,token1:M,reserves:h.reserves,createdAt:h.createdAt||Math.floor(Date.now()/1e3),volumes:{oneDay:0,sevenDay:0,thirtyDay:0,oneDayTxCount:0,sevenDayTxCount:0,thirtyDayTxCount:0}}}catch(h){return console.error("Error fetching pool info:",h),null}}))).filter(S=>S!==null).sort((S,h)=>(h.tvl||0)-(S.tvl||0));s(v),wa.set(v)}catch(N){console.error("Error loading pools:",N),G.error("Failed to load pools: "+N.message)}finally{o(!1)}})()},[a,n,u]),t.filter(b=>{const A=i.toLowerCase();return b.token0?.symbol?.toLowerCase().includes(A)||b.token1?.symbol?.toLowerCase().includes(A)||b.pairAddress.toLowerCase().includes(A)}),n?r?e.jsx(B.div,{variants:f,initial:"hidden",animate:"show",className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 max-w-full",children:[1,2,3,4,5,6].map(b=>e.jsx(ec,{},b))}):t.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pools found. Create a pool to get started!"}):e.jsxs(B.div,{initial:"hidden",animate:"show",variants:f,className:"space-y-6 overflow-x-hidden overflow-y-auto",children:[m&&e.jsx(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/30 text-red-700 dark:text-red-400",children:m}),u&&(Nt.TESTNET.id===u||Nt.MAINNET.id===u)&&e.jsxs(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"px-4 py-2 rounded-xl bg-[#00ffbd]/10 border border-[#00ffbd]/20 text-[#00ffbd] text-sm inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#00ffbd] animate-pulse"}),u===Nt.TESTNET.id?"Unichain Testnet":"Unichain Mainnet"]}),e.jsxs(B.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by token symbol or pool address...",value:i,onChange:b=>d(b.target.value),className:"w-full px-4 py-2 pl-10 bg-white/5 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-800 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white"}),e.jsx(Ea,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),r?e.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#00ffbd]"})}):t.length===0?e.jsx(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No pools found"}):e.jsx(B.div,{variants:f,className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 max-w-full",children:e.jsx(Je,{children:t.map(b=>e.jsxs(B.div,{variants:p,whileHover:"hover",layout:!0,className:"bg-white/5 dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800 w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(b.token0),alt:b.token0?.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:je(b.token1),alt:b.token1?.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[b.token0?.symbol,"/",b.token1?.symbol]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Token 0 Reserve:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Y(b.reserves?.reserve0||"0",b.token0?.decimals||18)," ",b.token0?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Token 1 Reserve:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Y(b.reserves?.reserve1||"0",b.token1?.decimals||18)," ",b.token1?.symbol]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:b.pairAddress})})]},b.pairAddress))})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Please connect your wallet to view your pools"})}const tc=[{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"positions",outputs:[{internalType:"uint96",name:"nonce",type:"uint96"},{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"}],Is="0x1f984000000000000000000000000000000000003",Vt="0xb7610f9b733e7d45184be3a1bc8a847be6ec4f0b",Fs=["function getPool(address tokenA, address tokenB, uint24 fee) view returns (address pool)"],Ls=["function slot0() external view returns (uint160 sqrtPriceX96, int24 tick, uint16 observationIndex, uint16 observationCardinality, uint16 observationCardinalityNext, uint8 feeProtocol, bool unlocked)","function liquidity() external view returns (uint128)","function positions(bytes32 key) external view returns (uint128 liquidity, uint256 feeGrowthInside0LastX128, uint256 feeGrowthInside1LastX128, uint128 tokensOwed0, uint128 tokensOwed1)","function ticks(int24 tick) external view returns (uint128 liquidityGross, int128 liquidityNet, uint256 feeGrowthOutside0X128, uint256 feeGrowthOutside1X128, int56 tickCumulativeOutside, uint160 secondsPerLiquidityOutsideX128, uint32 secondsOutside, bool initialized)"],ac=["function tokenURI(uint256 tokenId) view returns (string)"],Ya=BigInt(2)**BigInt(96),Er=BigInt(2)**BigInt(32),Xa=n=>{const a=n<0?n*-1:n;let t=BigInt(1001)*Er/BigInt(1e3);return a&1&&(t=t*BigInt(1001)/BigInt(1e3)),a&2&&(t=t*BigInt(1002)/BigInt(1e3)),a&4&&(t=t*BigInt(1005)/BigInt(1e3)),a&8&&(t=t*BigInt(1010)/BigInt(1e3)),a&16&&(t=t*BigInt(1020)/BigInt(1e3)),a&32&&(t=t*BigInt(1040)/BigInt(1e3)),a&64&&(t=t*BigInt(1080)/BigInt(1e3)),a&128&&(t=t*BigInt(1160)/BigInt(1e3)),a&256&&(t=t*BigInt(1340)/BigInt(1e3)),a&512&&(t=t*BigInt(1800)/BigInt(1e3)),a&1024&&(t=t*BigInt(3240)/BigInt(1e3)),a&2048&&(t=t*BigInt(10500)/BigInt(1e3)),a&4096&&(t=t*BigInt(11e4)/BigInt(1e3)),a&8192&&(t=t*BigInt(121e5)/BigInt(1e3)),n>0&&(t=BigInt("0xffffffffffffffffffffffffffffffff")/t),t*Er},sc=(n,a,t,s)=>{try{const r=BigInt(n.toString()),o=Xa(Number(a)),i=Xa(Number(t)),d=BigInt(s.toString());return r<=o?d*Ya*(i-o)/(o*i):r<i?d*Ya*(i-r)/(r*i):BigInt(0)}catch(r){return console.error("Error in getAmount0FromTick:",r),BigInt(0)}},rc=(n,a,t,s)=>{try{const r=BigInt(n.toString()),o=Xa(Number(a)),i=Xa(Number(t)),d=BigInt(s.toString());return r<=o?BigInt(0):r<i?d*(r-o)/Ya:d*(i-o)/Ya}catch(r){return console.error("Error in getAmount1FromTick:",r),BigInt(0)}},st=(n,a=18)=>{if(!n)return"0";try{const t=n.toString(),s=Number(oi(t,a));return s<1e-4?"< 0.0001":s<1?s.toFixed(4):s<1e3?s.toFixed(2):s<1e6?s.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):s>=1e9?(s/1e9).toFixed(2)+"B":s>=1e6?(s/1e6).toFixed(2)+"M":(s/1e3).toFixed(2)+"K"}catch(t){return console.error("Error formatting BigInt:",t),"0"}},vs=(n,a)=>a>=n.tickLower&&a<=n.tickUpper,we={PREPARING:"preparing",APPROVAL:"approval",ADDING:"adding",CONFIRMING:"confirming",COMPLETED:"completed",ERROR:"error"},at={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-pulse",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"animate-[spin_3s_linear_infinite]",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 8v5M12 16.5v.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})};function nc({position:n,onAction:a}){const[t,s]=l.useState(null),{data:r}=Yt(),[o,i]=l.useState(null);return l.useEffect(()=>{const u=async()=>{try{const c=new ne(r.transport),x=await new _(Vt,ac,c).tokenURI(n.tokenId).catch(()=>null);if(!x)return;let f;if(x.startsWith("data:application/json;base64,")){const p=x.split(",")[1];if(!p)return;try{const b=atob(p);f=JSON.parse(b)}catch{return}}else try{const p=await fetch(x);if(!p.ok)return;f=await p.json()}catch{return}f?.image&&s(f.image)}catch{}};n?.tokenId&&r&&u()},[n?.tokenId,r]),l.useEffect(()=>{n&&r&&(async()=>{try{const c=new ne(r.transport),x=await new _(Is,Fs,c).getPool(n.token0.address,n.token1.address,n.fee),p=await new _(x,Ls,c).slot0();i(p.tick)}catch{}})()},[n,r]),(()=>{const u=Math.pow(1.0001,n.tickLower),c=Math.pow(1.0001,n.tickUpper);return{min:u<.01?"< 0.01":u.toFixed(2),max:c>999999?"∞":c.toFixed(2)}})(),e.jsx("div",{className:"p-3 rounded-xl bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("a",{href:`https://app.uniswap.org/#/pool/${n.tokenId}`,target:"_blank",rel:"noopener noreferrer",className:"relative w-[140px] h-full rounded-lg overflow-hidden flex-shrink-0 hover:ring-2 hover:ring-[#00ffbd] transition-all",children:t?e.jsx("img",{src:t,alt:`Position #${n.tokenId}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:je(n.token0),alt:n.token0.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:je(n.token1),alt:n.token1.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[n.token0.symbol,"/",n.token1.symbol]}),e.jsx("div",{className:"flex items-center gap-2",children:o!==null&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${vs(n,o)?"bg-[#00ffbd] shadow-[0_0_8px_#00ffbd]":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-[#00ffbd]",children:vs(n,o)?"In range":"Out of range"})]})})]})]}),e.jsxs(Zt,{as:"div",className:"relative",children:[e.jsx(Zt.Button,{className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-[#1c2433] transition-colors",children:e.jsx(jo,{className:"w-5 h-5 text-[#00ffbd]"})}),e.jsx(se,{as:l.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(Zt.Items,{className:"absolute right-0 mt-1 w-60 origin-top-right rounded-2xl bg-white dark:bg-[#1a1b1f] shadow-lg border border-gray-200 dark:border-gray-800 focus:outline-none",children:e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx(Zt.Item,{children:({active:u})=>e.jsxs("button",{onClick:()=>a("add",n),className:`${u?"bg-gray-100 dark:bg-[#2d2f36]":""} group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm text-gray-900 dark:text-white`,children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-[#00ffbd]/10",children:e.jsx("span",{className:"text-lg text-[#00ffbd]",children:"+"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Add liquidity"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Add more liquidity to this position"})]})]})}),e.jsx(Zt.Item,{children:({active:u})=>e.jsxs("button",{onClick:()=>a("remove",n),className:`${u?"bg-gray-100 dark:bg-[#2d2f36]":""} group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm text-gray-900 dark:text-white`,children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-[#00ffbd]/10",children:e.jsx("span",{className:"text-lg text-[#00ffbd]",children:"-"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Remove liquidity"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Remove liquidity from this position"})]})]})}),e.jsx(Zt.Item,{children:({active:u})=>e.jsxs("button",{onClick:()=>a("collect",n),className:`${u?"bg-gray-100 dark:bg-[#2d2f36]":""} group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm text-gray-900 dark:text-white`,children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-[#00ffbd]/10",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Collect fees"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Collect accumulated fees"})]})]})})]})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-2 rounded-lg bg-[#00ffbd]",children:[e.jsx("div",{className:"text-xs text-black mb-0.5",children:"Pool Share"}),e.jsxs("div",{className:"font-medium text-sm text-black",children:[(n.positionShare*100).toFixed(4),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-[#1c2433]",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:n.token0.symbol}),e.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:st(n.amount0,n.token0.decimals)})]}),e.jsxs("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-[#1c2433]",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:n.token1.symbol}),e.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:st(n.amount1,n.token1.decimals)})]})]}),e.jsxs("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-[#1c2433]",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Unclaimed fees"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[st(n.fees0,n.token0.decimals)," ",n.token0.symbol]}),e.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[st(n.fees1,n.token1.decimals)," ",n.token1.symbol]})]})]})]})]})]})})}function oc({isOpen:n,onClose:a,position:t}){const[s,r]=l.useState(""),[o,i]=l.useState(""),[d,u]=l.useState(!1),[c,m]=l.useState("0"),[x,f]=l.useState("0"),[p,b]=l.useState(null),[A,N]=l.useState(null),{data:y}=Yt(),{address:k}=Le(),[w,g]=l.useState(we.PREPARING),[v,S]=l.useState(null),h=j=>j?Number(j)*Number(j)*10**(t?.token0?.decimals-t?.token1?.decimals)/2**192:0,T=(j,E)=>{if(!A||!t)return"0";const R=h(A);return E?(Number(j)*R).toFixed(t.token1.decimals):(Number(j)/R).toFixed(t.token0.decimals)},C=j=>{r(j),j&&!isNaN(j)?i(T(j,!0)):i("")},H=j=>{i(j),j&&!isNaN(j)?r(T(j,!1)):r("")};l.useEffect(()=>{(async()=>{if(!(!y||!t))try{const E=new ne(y.transport),O=await new _(Is,Fs,E).getPool(t.token0.address,t.token1.address,t.fee),Z=await new _(O,Ls,E).slot0();b(Z.tick),N(Z.sqrtPriceX96)}catch(E){console.error("Error fetching pool data:",E)}})()},[y,t]);const M=async()=>{if(!y||!t){G.error("Wallet not connected or position not found");return}u(!0),g(we.PREPARING),S(null);try{const E=await new ne(window.ethereum).getSigner(),R=new ft(E),O=Te(Number(s).toFixed(t.token0.decimals),t.token0.decimals),D=Te(Number(o).toFixed(t.token1.decimals),t.token1.decimals);g(we.APPROVAL);const Z=new _(t.token0.address,["function approve(address spender, uint256 amount) public returns (bool)"],E),F=new _(t.token1.address,["function approve(address spender, uint256 amount) public returns (bool)"],E);await(await Z.approve(Vt,lt)).wait(),await(await F.approve(Vt,lt)).wait(),g(we.ADDING);const V={tokenId:t.tokenId,amount0Desired:O,amount1Desired:D,amount0Min:0,amount1Min:0,deadline:Math.floor(Date.now()/1e3)+1200},X=await new _(Vt,["function increaseLiquidity((uint256 tokenId, uint256 amount0Desired, uint256 amount1Desired, uint256 amount0Min, uint256 amount1Min, uint256 deadline)) external payable returns (uint128 liquidity, uint256 amount0, uint256 amount1)"],E).increaseLiquidity(V);g(we.CONFIRMING),await X.wait(),g(we.COMPLETED),G.success("Successfully added liquidity"),a()}catch(j){console.error("Error adding liquidity:",j),S(j.message),g(we.ERROR),G.error("Failed to add liquidity: "+j.message)}finally{u(!1)}};return l.useEffect(()=>{(async()=>{if(!(!y||!t||!k))try{const E=new ne(y.transport),R=new _(t.token0.address,["function balanceOf(address) view returns (uint256)"],E),O=new _(t.token1.address,["function balanceOf(address) view returns (uint256)"],E),[D,Z]=await Promise.all([R.balanceOf(k),O.balanceOf(k)]);m(st(D,t.token0.decimals)),f(st(Z,t.token1.decimals))}catch(E){console.error("Error fetching balances:",E)}})()},[y,t,k]),e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(Q.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#0D0D0D] p-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:a,className:"p-1 hover:opacity-80",children:e.jsx(Ca,{className:"h-6 w-6 text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex -space-x-1",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-8 h-8 rounded-full"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:[t?.token0?.symbol,"/",t?.token1?.symbol]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[p!==null&&e.jsx("span",{className:"text-xs text-[#00ffbd]",children:vs(t,p)?"In range":"Out of range"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["v3 ",(t?.fee/1e4).toFixed(2),"%"]})]})]})]})]}),e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#2D2D2D]",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-900 dark:text-white",children:[e.jsx("path",{d:"M12 13.75C12.9665 13.75 13.75 12.9665 13.75 12C13.75 11.0335 12.9665 10.25 12 10.25C11.0335 10.25 10.25 11.0335 10.25 12C10.25 12.9665 11.0335 13.75 12 13.75Z",fill:"currentColor"}),e.jsx("path",{d:"M19 13.75C19.9665 13.75 20.75 12.9665 20.75 12C20.75 11.0335 19.9665 10.25 19 10.25C18.0335 10.25 17.25 11.0335 17.25 12C17.25 12.9665 18.0335 13.75 19 13.75Z",fill:"currentColor"}),e.jsx("path",{d:"M5 13.75C5.9665 13.75 6.75 12.9665 6.75 12C6.75 11.0335 5.9665 10.25 5 10.25C4.0335 10.25 3.25 11.0335 3.25 12C3.25 12.9665 4.0335 13.75 5 13.75Z",fill:"currentColor"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-100 dark:bg-[#1c1c1c]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t?.token0?.symbol})]}),e.jsxs("button",{onClick:()=>C(c),className:"text-sm text-[#00ffbd] hover:text-[#00ffbd]/80",children:["Balance: ",c]})]}),e.jsx("input",{type:"number",value:s,onChange:j=>C(j.target.value),className:"w-full bg-transparent text-2xl text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 outline-none",placeholder:"0"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"$0"})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-100 dark:bg-[#1c1c1c]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:t?.token1?.symbol})]}),e.jsxs("button",{onClick:()=>H(x),className:"text-sm text-[#00ffbd] hover:text-[#00ffbd]/80",children:["Balance: ",x]})]}),e.jsx("input",{type:"number",value:o,onChange:j=>H(j.target.value),className:"w-full bg-transparent text-2xl text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 outline-none",placeholder:"0"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"$0"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Position"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pool Share"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(t?.positionShare*100).toFixed(4),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",t?.token0?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:st(t?.amount0,t?.token0?.decimals)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",t?.token1?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:st(t?.amount1,t?.token1?.decimals)})]})]})]}),e.jsx("button",{onClick:M,disabled:!s||!o||d,className:`w-full mt-4 px-4 py-3 text-base font-medium rounded-2xl ${!s||!o?"bg-gray-200 dark:bg-[#2D2D2D] text-gray-400 cursor-not-allowed":"bg-[#00ffbd] text-black hover:bg-[#00ffbd]/90"}`,children:d?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}),e.jsx("span",{children:"Adding..."})]}):"Add"}),e.jsx(se,{appear:!0,show:d,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:()=>{(w===we.COMPLETED||w===we.ERROR)&&u(!1)},children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[v?"Error Adding Liquidity":"Adding Liquidity",!v&&t&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[t.token0.symbol,"/",t.token1.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[[{step:we.PREPARING,title:"Preparing",icon:at.Preparing},{step:we.APPROVAL,title:"Token Approval",icon:at.Approval},{step:we.ADDING,title:"Adding Liquidity",icon:at.Adding},{step:we.CONFIRMING,title:"Confirming",icon:at.Confirming},{step:we.COMPLETED,title:"Completed",icon:at.Completed}].map(({step:j,title:E,icon:R})=>{const O=w===j,D=!v&&Object.values(we).indexOf(w)>Object.values(we).indexOf(j),Z=v&&w===j;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${O?"bg-[#00ffbd]/10 text-[#00ffbd]":D?"text-[#00ffbd]":Z?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[e.jsx(R,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:E}),O&&!v&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[j===we.PREPARING&&"Preparing transaction...",j===we.APPROVAL&&`Approving ${t?.token0?.symbol} and ${t?.token1?.symbol}`,j===we.ADDING&&e.jsxs("span",{className:"flex items-center gap-2",children:["Adding liquidity to ",t?.token0?.symbol,"/",t?.token1?.symbol," pool"]}),j===we.CONFIRMING&&"Waiting for confirmation...",j===we.COMPLETED&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully added liquidity to ",t?.token0?.symbol,"/",t?.token1?.symbol," pool!"]})]})]}),D&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},j)}),v&&e.jsx("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(at.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:v})]})]})})]}),(w===we.COMPLETED||v)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>u(!1),className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})]})})]})}function ic({isOpen:n,onClose:a,position:t}){const[s,r]=l.useState(0),[o,i]=l.useState(!1),{data:d}=Yt(),[u,c]=l.useState(we.PREPARING),[m,x]=l.useState(null),[f,p]=l.useState("0"),[b,A]=l.useState("0");l.useEffect(()=>{if(t&&s){const y=BigInt(t.amount0)*BigInt(s)/BigInt(100),k=BigInt(t.amount1)*BigInt(s)/BigInt(100);p(st(y,t.token0.decimals)),A(st(k,t.token1.decimals))}else p("0"),A("0")},[s,t]);const N=async()=>{if(!d||!t){G.error("Wallet not connected or position not found");return}i(!0),c(we.PREPARING),x(null);try{const k=await new ne(window.ethereum).getSigner(),w=BigInt(t.liquidity)*BigInt(s)/BigInt(100);c(we.ADDING);const g=new _(Vt,["function decreaseLiquidity((uint256 tokenId, uint128 liquidity, uint256 amount0Min, uint256 amount1Min, uint256 deadline)) external payable returns (uint256 amount0, uint256 amount1)"],k),v={tokenId:t.tokenId,liquidity:w,amount0Min:0,amount1Min:0,deadline:Math.floor(Date.now()/1e3)+1200},S=await g.decreaseLiquidity(v);c(we.CONFIRMING),await S.wait(),c(we.COMPLETED),G.success("Successfully removed liquidity"),a()}catch(y){console.error("Error removing liquidity:",y),x(y.message),c(we.ERROR),G.error("Failed to remove liquidity: "+y.message)}finally{i(!1)}};return e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(Q.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#0D0D0D] p-4 shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:a,className:"p-1 hover:opacity-80",children:e.jsx(Ca,{className:"h-6 w-6 text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex -space-x-1",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-8 h-8 rounded-full"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:[t?.token0?.symbol,"/",t?.token1?.symbol]})}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["v3 ",(t?.fee/1e4).toFixed(2),"%"]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Amount to remove"}),e.jsxs("span",{className:"text-sm text-[#00ffbd]",children:[s,"%"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(y=>e.jsxs("button",{onClick:()=>r(y),className:`p-2 text-sm font-medium rounded-xl transition-colors ${s===y?"bg-[#00ffbd] text-black":"bg-gray-100 dark:bg-[#1c1c1c] text-gray-900 dark:text-white hover:bg-[#00ffbd]/10 dark:hover:bg-[#00ffbd]/10"}`,children:[y,"%"]},y))})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Position"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pool Share"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(t?.positionShare*100).toFixed(4),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",t?.token0?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:st(t?.amount0,t?.token0?.decimals)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",t?.token1?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:st(t?.amount1,t?.token1?.decimals)})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You will receive:"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t?.token0?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:f})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t?.token1?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:b})]})]}),e.jsx("button",{onClick:N,disabled:!s||o,className:`w-full mt-2 px-4 py-3 text-base font-medium rounded-xl transition-colors ${s?"bg-[#00ffbd] text-black hover:bg-[#00ffbd]/90":"bg-gray-100 dark:bg-[#1c1c1c] text-gray-400 cursor-not-allowed"}`,children:o?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}),e.jsx("span",{children:"Removing..."})]}):"Remove"})]}),e.jsx(se,{appear:!0,show:o,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:()=>{(u===we.COMPLETED||u===we.ERROR)&&i(!1)},children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[m?"Error Removing Liquidity":"Removing Liquidity",!m&&t&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[t.token0.symbol,"/",t.token1.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[[{step:we.PREPARING,title:"Preparing",icon:at.Preparing},{step:we.ADDING,title:"Removing Liquidity",icon:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M8 12h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})})},{step:we.CONFIRMING,title:"Confirming",icon:at.Confirming},{step:we.COMPLETED,title:"Completed",icon:at.Completed}].map(({step:y,title:k,icon:w})=>{const g=u===y,v=!m&&Object.values(we).indexOf(u)>Object.values(we).indexOf(y),S=m&&u===y;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${g&&!S?"bg-[#00ffbd]/10 text-[#00ffbd]":v?"text-[#00ffbd]":S?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[e.jsx(w,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:k}),g&&!m&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[y===we.PREPARING&&"Preparing transaction...",y===we.ADDING&&e.jsxs("span",{className:"flex items-center gap-2",children:["Removing ",s,"% liquidity from ",t?.token0?.symbol,"/",t?.token1?.symbol," pool"]}),y===we.CONFIRMING&&"Waiting for confirmation...",y===we.COMPLETED&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully removed liquidity from ",t?.token0?.symbol,"/",t?.token1?.symbol," pool!"]})]})]}),v&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},y)}),m&&e.jsx("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(at.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m})]})]})})]}),(u===we.COMPLETED||m)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>i(!1),className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})]})})]})}function lc({isOpen:n,onClose:a,position:t}){const[s,r]=l.useState(!1),{data:o}=Yt(),[i,d]=l.useState(we.PREPARING),[u,c]=l.useState(null),m=async()=>{if(!o||!t){G.error("Wallet not connected or position not found");return}r(!0),d(we.PREPARING),c(null);try{const f=await new ne(window.ethereum).getSigner();d(we.ADDING);const p=new _(Vt,["function collect((uint256 tokenId, address recipient, uint128 amount0Max, uint128 amount1Max)) external payable returns (uint256 amount0, uint256 amount1)"],f),b={tokenId:t.tokenId,recipient:await f.getAddress(),amount0Max:t.fees0,amount1Max:t.fees1},A=await p.collect(b);d(we.CONFIRMING),await A.wait(),d(we.COMPLETED),G.success("Successfully collected fees"),a()}catch(x){console.error("Error collecting fees:",x),c(x.message),d(we.ERROR),G.error("Failed to collect fees: "+x.message)}finally{r(!1)}};return e.jsxs(Q,{open:n,onClose:a,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(Q.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#0D0D0D] p-4 shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:a,className:"p-1 hover:opacity-80",children:e.jsx(Ca,{className:"h-6 w-6 text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex -space-x-1",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-8 h-8 rounded-full"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:"Collect Fees"})}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t?.token0?.symbol,"/",t?.token1?.symbol," • ",(t?.fee/1e4).toFixed(2),"%"]})]})]})]})}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Uncollected fees"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token0),alt:t?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?.token0?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:st(t?.fees0,t?.token0?.decimals)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:je(t?.token1),alt:t?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:t?.token1?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:st(t?.fees1,t?.token1?.decimals)})]})]}),e.jsx("button",{onClick:m,disabled:!t?.fees0&&!t?.fees1||s,className:`w-full mt-4 px-4 py-3 text-base font-medium rounded-xl transition-colors ${!t?.fees0&&!t?.fees1?"bg-gray-100 dark:bg-[#1c1c1c] text-gray-400 cursor-not-allowed":"bg-[#00ffbd] text-black hover:bg-[#00ffbd]/90"}`,children:s?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}),e.jsx("span",{children:"Collecting..."})]}):"Collect"}),e.jsx(se,{appear:!0,show:s,as:l.Fragment,children:e.jsxs(Q,{as:"div",className:"relative z-50",onClose:()=>{(i===we.COMPLETED||i===we.ERROR)&&r(!1)},children:[e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(se.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(Q.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(Q.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[u?"Error Collecting Fees":"Collecting Fees",!u&&t&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[t.token0.symbol,"/",t.token1.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[[{step:we.PREPARING,title:"Preparing",icon:at.Preparing},{step:we.ADDING,title:"Collecting Fees",icon:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 6v6l4 2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})})},{step:we.CONFIRMING,title:"Confirming",icon:at.Confirming},{step:we.COMPLETED,title:"Completed",icon:at.Completed}].map(({step:x,title:f,icon:p})=>{const b=i===x,A=!u&&Object.values(we).indexOf(i)>Object.values(we).indexOf(x),N=u&&i===x;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${b&&!N?"bg-[#00ffbd]/10 text-[#00ffbd]":A?"text-[#00ffbd]":N?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[e.jsx(p,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:f}),b&&!u&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[x===we.PREPARING&&"Preparing transaction...",x===we.ADDING&&e.jsxs("span",{className:"flex items-center gap-2",children:["Collecting fees from ",t?.token0?.symbol,"/",t?.token1?.symbol," position"]}),x===we.CONFIRMING&&"Waiting for confirmation...",x===we.COMPLETED&&e.jsx("span",{className:"flex items-center gap-2",children:"Successfully collected fees!"})]})]}),A&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},x)}),u&&e.jsx("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(at.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u})]})]})})]}),(i===we.COMPLETED||u)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>r(!1),className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})]})})]})}const dc={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},Sr={hidden:{opacity:0,y:10,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",mass:.8,stiffness:100,damping:15}},exit:{opacity:0,scale:.96,transition:{duration:.2,ease:"easeOut"}}},cc=()=>e.jsx(B.div,{className:"p-3 rounded-xl bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"relative w-[140px] h-[140px] rounded-lg overflow-hidden flex-shrink-0 bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-2/3 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:[1,2,3].map(n=>e.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"},n))})]})]})});function l0(){const{address:n,isConnected:a}=Le(),t=Es(),{data:s}=Yt(),[r,o]=l.useState([]),[i,d]=l.useState(!1),[u,c]=l.useState(!1),[m,x]=l.useState(!1),[f,p]=l.useState(!1),[b,A]=l.useState(null);l.useEffect(()=>{n&&t&&N()},[n,t]);const N=async()=>{try{if(d(!0),!n||!s)throw new Error("Wallet not connected");const k=new ne(s.transport),w=new _(Vt,tc,k),g=new _(Is,Fs,k),v=await w.balanceOf(n);if(Number(v)===0){o([]);return}const S=["function symbol() view returns (string)","function decimals() view returns (uint8)"],h=Array.from({length:Number(v)},async(H,M)=>{try{const j=await w.tokenOfOwnerByIndex(n,M),E=await w.positions(j),R=await g.getPool(E.token0,E.token1,E.fee),O=new _(R,Ls,k),[D,Z]=await Promise.all([O.slot0(),O.liquidity()]),F=new _(E.token0,S,k),L=new _(E.token1,S,k),[I,V,W,X]=await Promise.all([F.symbol(),F.decimals(),L.symbol(),L.decimals()]),ae=sc(D.sqrtPriceX96,E.tickLower,E.tickUpper,E.liquidity),le=rc(D.sqrtPriceX96,E.tickLower,E.tickUpper,E.liquidity),xe=Number(E.liquidity)/Number(Z);return{id:j.toString(),tokenId:j.toString(),token0:{address:E.token0,symbol:I,decimals:Number(V)},token1:{address:E.token1,symbol:W,decimals:Number(X)},fee:Number(E.fee),tickLower:Number(E.tickLower),tickUpper:Number(E.tickUpper),liquidity:E.liquidity.toString(),amount0:ae.toString(),amount1:le.toString(),fees0:E.tokensOwed0.toString(),fees1:E.tokensOwed1.toString(),positionShare:xe}}catch(j){return console.error(`Error fetching position ${M}:`,j),null}}),C=(await Promise.all(h)).filter(H=>H!==null);o(C)}catch(k){console.error("Error fetching positions:",k),G.error("Failed to fetch positions: "+k.message)}finally{d(!1)}},y=(k,w)=>{switch(A(w),k){case"add":c(!0);break;case"remove":x(!0);break;case"collect":p(!0);break}};return a?i?e.jsx(B.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},children:[1,2,3].map(k=>e.jsx(cc,{},k))}):e.jsxs(B.div,{className:"space-y-4",variants:dc,initial:"hidden",animate:"visible",children:[r.length>0?e.jsx(Je,{children:r.map(k=>e.jsx(B.div,{variants:Sr,initial:"hidden",animate:"visible",exit:"exit",layout:"position",layoutId:k.id,children:e.jsx(nc,{position:k,onAction:y})},k.id))}):e.jsxs(B.div,{className:"text-center py-12",variants:Sr,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx(vo,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx(B.h3,{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"No positions found"}),e.jsx(B.p,{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Create a position to provide liquidity and earn fees"})]}),e.jsx(oc,{isOpen:u,onClose:()=>c(!1),position:b}),e.jsx(ic,{isOpen:m,onClose:()=>x(!1),position:b}),e.jsx(lc,{isOpen:f,onClose:()=>p(!1),position:b})]}):e.jsxs(B.div,{className:"flex flex-col items-center justify-center min-h-[400px]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[e.jsx(nt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx(B.h3,{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"No positions"}),e.jsx(B.p,{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Connect your wallet to view your positions"}),e.jsx(B.div,{className:"mt-6",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:e.jsx("button",{onClick:open,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-lg text-black bg-[#00ffbd] hover:bg-[#00ffbd]/90",children:"Connect Wallet"})})]})}const uc=ii(n=>({version:"v2",setVersion:a=>n({version:a})}));function d0(){const{version:n,setVersion:a}=uc();return e.jsxs("div",{className:"flex items-center justify-center space-x-2 p-1.5 bg-white/10 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("button",{onClick:()=>a("v2"),className:`px-4 py-1.5 rounded-lg font-medium text-sm transition-all duration-200 ${n==="v2"?"bg-[#00ffbd] text-black shadow-[0_0_10px_#00ffbd]":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"V2"}),e.jsx("button",{onClick:()=>a("v3"),className:`px-4 py-1.5 rounded-lg font-medium text-sm transition-all duration-200 ${n==="v3"?"bg-[#00ffbd] text-black shadow-[0_0_10px_#00ffbd]":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"V3"})]})}function c0({initialTokens:n,poolAddress:a}){const[t,s]=l.useState("add"),[r,o]=l.useState(null),i=ct();return l.useEffect(()=>{(async()=>{if(a)try{const u=await i.getPoolDetails(a);o(u),s("add")}catch(u){console.error("Error fetching pool details:",u)}})()},[a,i]),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Add/Remove Liquidity"}),r&&e.jsxs("div",{className:"mb-6 p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Pool Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tokens"}),e.jsxs("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:[r.token0Symbol,"/",r.token1Symbol]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Liquidity"}),e.jsxs("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:["$",r.totalLiquidity?.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex space-x-1 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-1 mb-6",children:[e.jsx("button",{onClick:()=>s("add"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${t==="add"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Add Liquidity"}),e.jsx("button",{onClick:()=>s("remove"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${t==="remove"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Remove Liquidity"})]}),e.jsx("div",{className:"mt-4",children:t==="add"?e.jsx(Pd,{initialTokens:n,poolAddress:a,poolDetails:r}):e.jsx(Gd,{initialTokens:n,poolAddress:a,poolDetails:r})})]})}function u0(){const[n,a]=l.useState("add");return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Manage Liquidity"}),e.jsxs("div",{className:"flex space-x-1 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-1 mb-6",children:[e.jsx("button",{onClick:()=>a("add"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${n==="add"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Add Liquidity"}),e.jsx("button",{onClick:()=>a("remove"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${n==="remove"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Remove Liquidity"})]}),e.jsx("div",{className:"mt-4",children:n==="add"?e.jsx($d,{}):e.jsx(Zd,{})})]})}const mc="hh-sol-artifact-1",xc="MemeToken",hc="contracts/MemeToken.sol",fc=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"}],name:"Snapshot",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"uint256",name:"ethAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"TokensPurchased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEAD_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEV_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LIQUIDITY_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARKETING_WALLET",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TREASURY_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"automatedMarketMakerPairs",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"snapshotId",type:"uint256"}],name:"balanceOfAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"burnFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"totalSupply_",type:"uint256"},{internalType:"address",name:"treasuryAddress_",type:"address"},{internalType:"address",name:"devAddress_",type:"address"},{internalType:"address",name:"marketingWallet_",type:"address"},{internalType:"address",name:"liquidityAddress_",type:"address"},{internalType:"uint256",name:"burnFee_",type:"uint256"},{internalType:"uint256",name:"treasuryFee_",type:"uint256"},{internalType:"uint256",name:"devFee_",type:"uint256"},{internalType:"uint256",name:"marketingFee_",type:"uint256"},{internalType:"uint256",name:"liquidityFee_",type:"uint256"},{internalType:"uint256",name:"buyFees_",type:"uint256"},{internalType:"uint256",name:"sellFees_",type:"uint256"},{internalType:"address",name:"router_",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isBlacklisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidityFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"marketingFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"sellFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pair",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setAutomatedMarketMakerPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"bool[]",name:"states",type:"bool[]"}],name:"setBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"snapshot",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"snapshotId",type:"uint256"}],name:"totalSupplyAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tradingActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tradingEnabledTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasuryFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"uniswapV2Pair",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"uniswapV2Router",outputs:[{internalType:"contract IUniswapV2Router02",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],da={_format:mc,contractName:xc,sourceName:hc,abi:fc},pc={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},ra={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.5}}},Ar={11155111:{name:"Uniswap V2",network:"Sepolia",getTradeUrl:n=>`https://app.uniswap.org/#/swap?outputCurrency=${n}&chain=sepolia`},137:{name:"QuickSwap",network:"Polygon",getTradeUrl:n=>`https://quickswap.exchange/#/swap?outputCurrency=${n}`},1301:{name:"Uniswap V2",network:"Unichain",getTradeUrl:n=>`https://app.uniswap.org/#/swap?outputCurrency=${n}&chain=unichain`},1828369849:{name:"Uniswap V2",network:"Moonwalker",getTradeUrl:n=>`https://app.uniswap.org/#/swap?outputCurrency=${n}&chain=moonwalker`},10143:{name:"Uniswap V2",network:"Monad Testnet",getTradeUrl:n=>`https://app.uniswap.org/#/swap?outputCurrency=${n}&chain=monad-testnet`}},gc={QuickSwap:"/quickswap.png","Uniswap V2":"/uniswap.png"},bc={11155111:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",137:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",1301:"0x08a58b1628Fb449635078355Be83e181EFBe3948",130:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",1828369849:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",10143:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426"},yc=()=>{const n=window.ethereum?.networkVersion?parseInt(window.ethereum.networkVersion):null,a=bc[n];return a||console.error(`No factory address found for chain ID ${n}`),a},m0=()=>{const[n,a]=l.useState(""),[t,s]=l.useState(null),[r,o]=l.useState(!1),[i,d]=l.useState("");Sa(),Gr({address:n,abi:da.abi,functionName:"totalSupply",watch:!0});const u=async()=>{if(n){o(!0),d("");try{const m=new ne(window.ethereum),x=new _(n,da.abi,m),[f,p,b,A,N,y,k,w,g,v,S,h,T,C,H,M,j,E,R,O,D,Z,F,L]=await Promise.all([x.name(),x.symbol(),x.totalSupply(),x.TREASURY_ADDRESS(),x.DEV_ADDRESS(),x.MARKETING_WALLET(),x.LIQUIDITY_ADDRESS(),x.burnFee(),x.treasuryFee(),x.devFee(),x.marketingFee(),x.liquidityFee(),x.buyFees(),x.sellFees(),x.uniswapV2Router(),x.balanceOf("0x000000000000000000000000000000000000dEaD"),x.balanceOf(await x.TREASURY_ADDRESS()),x.balanceOf(await x.DEV_ADDRESS()),x.balanceOf(await x.MARKETING_WALLET()),x.balanceOf(await x.LIQUIDITY_ADDRESS()),x.balanceOf(n),x.uniswapV2Pair(),x.tradingActive(),x.owner()]);s({name:f,symbol:p,totalSupply:Y(b,18),owner:L,addresses:{treasury:A,dev:N,marketing:y,liquidity:k},fees:{burn:Number(w)/100,treasury:Number(g)/100,dev:Number(v)/100,marketing:Number(S)/100,liquidity:Number(h)/100,buy:Number(T)/100,sell:Number(C)/100},balances:{dead:Y(M,18),treasury:Y(j,18),dev:Y(E,18),marketing:Y(R,18),liquidity:Y(O,18),contract:Y(D,18)},router:H,pair:Z,features:{tradingEnabled:F}})}catch(m){console.error("Error fetching token info:",m),d("Failed to fetch token info. Is this a valid meme token?")}finally{o(!1)}}},c=async m=>{try{await navigator.clipboard.writeText(m),Pe.success("Copied to clipboard! 📋")}catch{Pe.error("Failed to copy 😢")}};return e.jsxs("div",{className:"p-6 h-full bg-white dark:bg-[#1a1b1f] rounded-xl transition-colors duration-200",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"meme-title text-3xl mb-4 text-[#00ffbd]",children:"Check Token Info"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-base",children:"Enter any meme token address to view stats"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:m=>a(m.target.value),placeholder:"Enter token address",className:"flex-1 bg-gray-50 dark:bg-[#2d2f36] text-gray-900 dark:text-white rounded-lg px-3 py-2 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200"}),e.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,disabled:r,className:"px-4 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-lg transition-colors flex items-center gap-2 shadow-lg shadow-[#00ffbd]/10",children:[r?e.jsx(bs,{className:"animate-spin"}):e.jsx(Hr,{className:"animate-bounce"}),r?"Loading...":"Check"]})]})}),i&&e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-3 mb-4 rounded-lg bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 text-red-600 dark:text-red-400 text-sm",children:i}),!t&&!i&&!r&&e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-6 text-sm",children:e.jsx("p",{children:"Enter a token address to view information"})}),t&&e.jsxs(B.div,{variants:pc,initial:"hidden",animate:"visible",className:"space-y-4",children:[e.jsxs(B.div,{variants:ra,className:"p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#2d2f36] dark:to-[#24262b] border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[t.name," (",t.symbol,") 🚀"]}),e.jsx("div",{className:"flex items-center gap-2",children:t.features?.tradingEnabled?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:"Trading Enabled"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Trading Disabled"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Supply:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:Number(t.totalSupply).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Contract:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-white truncate text-sm",children:n}),e.jsx("button",{onClick:()=>c(n),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors",children:e.jsx(Ta,{className:"text-gray-500 dark:text-gray-400"})})]})]})]}),e.jsxs(B.div,{variants:ra,className:"p-4 rounded-xl bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{children:"🍯"})," Honeypot Detection"]}),t.features?.tradingEnabled?e.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Safe to Trade"]}):e.jsxs("span",{className:"flex items-center gap-1 text-yellow-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Caution"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Buy Tax:"}),e.jsxs("span",{className:"text-sm font-medium text-green-500",children:[t.fees.buy,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sell Tax:"}),e.jsxs("span",{className:"text-sm font-medium text-red-500",children:[t.fees.sell,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Renounced:"}),t.owner==="0x0000000000000000000000000000000000000000"?e.jsx("span",{className:"text-sm font-medium text-green-500",children:"✓"}):e.jsx("span",{className:"text-sm font-medium text-red-500",children:"✗"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mintable:"}),e.jsx("span",{className:"text-sm font-medium text-red-500",children:"✗"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-100 dark:border-yellow-900/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-400",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," Always test with a small amount first and check the contract on a blockchain explorer before making large trades."]})})]}),e.jsxs(B.div,{variants:ra,className:"col-span-3 p-6 rounded-2xl bg-gradient-to-r from-[#2d2f36] via-[#1a1b1f] to-[#2d2f36] border border-gray-800",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"💰"})," Trading Fees Distribution"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-gray-800/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Buy Fee"}),e.jsxs("span",{className:"text-[#00ffbd] font-bold",children:[t.fees.buy,"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Distribution of ",t.fees.buy,"% buy fee:"]}),Object.entries({Burn:t.fees.burn,Treasury:t.fees.treasury,Dev:t.fees.dev,Marketing:t.fees.marketing,Liquidity:t.fees.liquidity}).map(([m,x])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500",children:m}),e.jsxs("span",{className:"text-gray-300",children:[x,"%"]})]},m))]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-800/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Sell Fee"}),e.jsxs("span",{className:"text-[#00ffbd] font-bold",children:[t.fees.sell,"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Distribution of ",t.fees.sell,"% sell fee:"]}),Object.entries({Burn:t.fees.burn,Treasury:t.fees.treasury,Dev:t.fees.dev,Marketing:t.fees.marketing,Liquidity:t.fees.liquidity}).map(([m,x])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500",children:m}),e.jsxs("span",{className:"text-gray-300",children:[x,"%"]})]},m))]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-800/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-400",children:[e.jsx("span",{className:"text-[#00ffbd] font-medium",children:"Note:"})," The percentages shown for each fee type represent their share of the total buy/sell fee."]})})]}),e.jsx(B.div,{variants:ra,className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-red-900/20 to-orange-900/20 border border-red-500/20",children:e.jsxs("div",{className:"relative z-10 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(No,{className:"text-2xl text-red-500 animate-pulse"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Burn Stats"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Burn Fee"}),e.jsxs("span",{className:"text-red-400 font-bold",children:[t.fees.burn,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Burned"}),e.jsx("span",{className:"text-red-400 font-mono",children:Number(t.balances.dead).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Burn Rate"}),e.jsxs("span",{className:"text-red-400 font-mono",children:[(Number(t.balances.dead)/Number(t.totalSupply)*100).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-red-500/20 to-transparent animate-flame"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-orange-500/20 to-transparent animate-flame-slow"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-yellow-500/20 to-transparent animate-flame-slower"})]})]})}),e.jsxs(B.div,{variants:ra,className:"rounded-2xl bg-gradient-to-br from-blue-900/20 to-purple-900/20 border border-blue-500/20 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(To,{className:"text-2xl text-blue-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Treasury & Dev"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Treasury Fee"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:[t.fees.treasury,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Dev Fee"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:[t.fees.dev,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Treasury Balance"}),e.jsx("span",{className:"text-blue-400 font-mono",children:Number(t.balances.treasury).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Dev Balance"}),e.jsx("span",{className:"text-blue-400 font-mono",children:Number(t.balances.dev).toLocaleString()})]})]})]}),e.jsxs(B.div,{variants:ra,className:"rounded-2xl bg-gradient-to-br from-green-900/20 to-teal-900/20 border border-green-500/20 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(fs,{className:"text-2xl text-green-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Marketing & Liquidity"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Marketing Fee"}),e.jsxs("span",{className:"text-green-400 font-bold",children:[t.fees.marketing,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Liquidity Fee"}),e.jsxs("span",{className:"text-green-400 font-bold",children:[t.fees.liquidity,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Marketing Balance"}),e.jsx("span",{className:"text-green-400 font-mono",children:Number(t.balances.marketing).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Liquidity Balance"}),e.jsx("span",{className:"text-green-400 font-mono",children:Number(t.balances.liquidity).toLocaleString()})]})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700",children:e.jsx(wc,{})})]})},wc=()=>{const[n,a]=l.useState([]),[t,s]=l.useState(!0),{chain:r}=Sa(),[o,i]=l.useState(1),d=10;l.useEffect(()=>{const x=async()=>{try{s(!0);const f=new ne(window.ethereum),p=yc();if(!p){console.error("Factory address not found for this chain");return}const b=new _(p,sn.abi,f),A=await f.getBlockNumber();let N=[];const y=r?.id===10143?100:5e3;let k=Math.max(0,A-1e4);for(;k<A;){const g=Math.min(k+y,A);try{const v=b.filters.TokenCreated(),S=await b.queryFilter(v,k,g);N=[...N,...S]}catch(v){console.error(`Error fetching events for blocks ${k} to ${g}:`,v)}k=g+1}const w=await Promise.all(N.map(async g=>{const v=Number(g.args[4]),S=g.args[5].toString();let h;return S.length<=v?h=S:h=Y(S,v),{creator:g.args[0],address:g.args[1],name:g.args[2],symbol:g.args[3],decimals:v,totalSupply:h,logoURI:g.args[6],isMeme:g.args[7],timestamp:(await g.getBlock()).timestamp}}));w.sort((g,v)=>v.timestamp-g.timestamp),a(w)}catch(f){console.error("Error fetching recent tokens:",f)}finally{s(!1)}};r?.id&&x()},[r?.id]);const u=l.useMemo(()=>n.slice((o-1)*d,o*d),[n,o]),c=(x,f)=>{const p=Ar[f];return p?p.getTradeUrl(x):"#"},m=x=>Ar[x]||{name:"Unknown DEX",network:"Unknown"};return t?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"meme-title text-2xl mb-4 text-[#00ffbd]",children:"Recently Created Meme Tokens 🚀"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})})]}):u.length?e.jsxs("div",{children:[e.jsx("h3",{className:"meme-title text-2xl mb-6 text-center text-[#00ffbd]",children:"Recently Created Meme Tokens 🚀"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(x=>e.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#2d2f36] dark:to-[#24262b] border border-gray-200 dark:border-gray-700 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:x.name}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:x.symbol})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r?.id&&gc[m(r.id).name]||"/token-default.png",alt:r?.id?m(r.id).name:"Unknown DEX",className:"w-6 h-6 rounded-full",onError:f=>{f.target.onerror=null,f.target.src="/token-default.png"}}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r?.id?m(r.id).network:"Unknown Network"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Supply: ",Number(x.totalSupply).toLocaleString()]}),e.jsxs("a",{href:r?.id?c(x.address,r.id):"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-1 bg-[#00ffbd] hover:bg-[#00e6a9] text-black text-sm font-medium rounded-lg transition-colors",children:["Trade ",e.jsx(Co,{})]})]})]},x.address))}),n.length>d&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>i(x=>Math.max(1,x-1)),disabled:o===1,className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-gray-600 dark:text-gray-400",children:["Page ",o," of ",Math.ceil(n.length/d)]}),e.jsx("button",{onClick:()=>i(x=>x+1),disabled:o>=Math.ceil(n.length/d),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"Next"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"meme-title text-2xl mb-4 text-[#00ffbd]",children:"Recently Created Meme Tokens 🚀"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No meme tokens created yet. Be the first! 🎉"})]})},Tt={style:{background:"#333",color:"white",padding:"12px",borderRadius:"8px"},success:{style:{background:"#10B981"}},error:{style:{background:"#EF4444"}},position:"top-center",duration:3e3},x0=({onClose:n})=>{const[a,t]=l.useState(""),[s,r]=l.useState(""),[o,i]=l.useState(null),[d,u]=l.useState([]),[c,m]=l.useState(null),[x,f]=l.useState([]),[p,b]=l.useState(!1),[A,N]=l.useState(!1),[y,k]=l.useState(""),{address:w}=Le(),[g,v]=l.useState(!1),{data:S}=Gr({address:s||void 0,abi:da.abi,functionName:"owner",watch:!0,enabled:!!s}),h=w&&S&&w.toLowerCase()===S.toLowerCase(),{write:T,data:C}=Uo({address:s||void 0,abi:da.abi,functionName:"snapshot",enabled:!!s,onError(){v(!1)}}),{isLoading:H}=$o({hash:C?.hash,onSuccess(){G.success("Snapshot taken successfully!",Tt),setTimeout(()=>{G(D=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"font-medium",children:"Important: Refresh Required 🔄"}),e.jsx("p",{className:"text-sm",children:"Please refresh the page and paste the contract address again to see the new snapshot data."})]}),{...Tt,duration:6e3,style:{...Tt.style,maxWidth:"400px"}})},1e3),v(!1),fetchSnapshots()},onError(){G.error("Failed to take snapshot",Tt),v(!1)}}),M=async()=>{if(!a){G.error("Please enter a token address",Tt);return}N(!0),k("");try{if(!mt(a))throw new Error("Invalid token address format");const Z=new ne(window.ethereum);if(await Z.getNetwork().then(L=>Number(L.chainId))===10143){const L=new _(a,da.abi,Z);try{await Promise.all([L.name(),L.symbol(),L.owner(),L.snapshot()]),r(a),i(L),G.success("Token contract verified",Tt)}catch(I){I.message.includes("snapshot")?k("This token does not support snapshots. Make sure you are using the correct token contract."):k("Invalid token contract. Please check the address and try again."),r(""),i(null)}}else{const L=new _(a,da.abi,Z);await Promise.all([L.name(),L.symbol(),L.owner()]),r(a),i(L),G.success("Token contract verified",Tt)}}catch(D){console.error("Error verifying token:",D),k("Invalid token contract. Please check the address and try again."),r(""),i(null)}finally{N(!1)}};l.useEffect(()=>{o&&(async()=>{try{b(!0);const Z=new ne(window.ethereum),F=await Z.getNetwork().then(W=>Number(W.chainId)),L=o.filters.Snapshot(),V=(await o.queryFilter(L)).map(W=>({id:W.args.id.toString(),blockNumber:W.blockNumber,timestamp:new Date().toLocaleString()}));try{const W=await Promise.all(V.map(async X=>{try{const ae=await Z.getBlock(X.blockNumber);return{...X,timestamp:ae?new Date(ae.timestamp*1e3).toLocaleString():X.timestamp}}catch(ae){return console.warn(`Could not fetch block data for snapshot ${X.id}`,ae),X}}));W.sort((X,ae)=>ae.blockNumber-X.blockNumber),u(W)}catch(W){console.warn("Error fetching block timestamps:",W),V.sort((X,ae)=>ae.blockNumber-X.blockNumber),u(V)}b(!1)}catch(Z){console.error("Error fetching snapshots:",Z),k("Failed to load snapshots. This may not be supported on the current network."),b(!1)}})()},[o]);const j=async D=>{b(!0),k("");try{const Z=o.filters.Transfer(),F=await o.queryFilter(Z),L=new Set;F.forEach(W=>{L.add(W.args.from),L.add(W.args.to)}),L.delete("0x0000000000000000000000000000000000000000"),L.delete("0x000000000000000000000000000000000000dEaD");const V=(await Promise.all(Array.from(L).map(async W=>{const X=await o.balanceOfAt(W,D);return{address:W,balance:Ve(X)}}))).filter(W=>parseFloat(W.balance)>0).sort((W,X)=>parseFloat(X.balance)-parseFloat(W.balance));f(V)}catch(Z){console.error("Error fetching holder data:",Z),k("Failed to load holder data")}b(!1)},E=()=>{if(!x.length)return;const D=`data:text/csv;charset=utf-8,Address,Balance
`+x.map(L=>`${L.address},${L.balance}`).join(`
`),Z=encodeURI(D),F=document.createElement("a");F.setAttribute("href",Z),F.setAttribute("download",`snapshot_${c}_${Date.now()}.csv`),document.body.appendChild(F),F.click(),document.body.removeChild(F)},R=async()=>{try{if(!w){G.error("Please connect your wallet first",Tt);return}if(!h)return;v(!0),T&&await T()}catch(D){console.error("Error taking snapshot:",D),v(!1)}},O=D=>{m(D.id),j(D.id)};return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg relative",children:[e.jsx(qr,{position:"top-center",toastOptions:{className:"",style:{zIndex:9999999,background:"#333",color:"white"}}}),e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-3 mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Token Snapshots"}),e.jsx("button",{onClick:n,className:"p-2 rounded-lg bg-gray-800/50 hover:bg-gray-800 text-white transition-colors",children:e.jsx(dt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:D=>t(D.target.value),placeholder:"Enter token contract address",disabled:A,className:"flex-1 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white rounded-lg px-3 py-2 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200"}),e.jsxs(ns,{onClick:M,disabled:A||!a,className:"bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium px-4 py-2 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[A?e.jsx(Ia,{size:"sm"}):e.jsx(Eo,{className:"w-4 h-4"}),A?"Verifying...":"Verify"]})]}),y&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:y})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.length>0?`${d.length} snapshot${d.length===1?"":"s"} available`:"No snapshots taken yet"}),h&&w&&e.jsx(ns,{onClick:R,disabled:H||g,className:"bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium px-3 py-1.5 rounded-lg transition-colors duration-200 flex items-center text-sm",children:H||g?e.jsxs(e.Fragment,{children:[e.jsx(Ia,{size:"sm",className:"mr-2"}),g?"Confirm in Wallet...":"Taking Snapshot..."]}):e.jsxs(e.Fragment,{children:[e.jsx(So,{className:"mr-1.5 h-4 w-4"}),"Take Snapshot"]})})]}),d.length>0&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," After taking a new snapshot, please refresh the page and paste the contract address again to see the updated data."]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 shadow-sm",children:[e.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Available Snapshots"}),e.jsx("div",{className:"space-y-2 custom-scrollbar max-h-[300px] overflow-y-auto pr-2",children:p?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(Ia,{size:"md",className:"text-[#00ffbd]"})}):d.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No snapshots available"}):d.map(D=>e.jsxs("button",{onClick:()=>O(D),className:`w-full text-left px-3 py-2 rounded-lg transition-colors duration-200 flex justify-between items-center text-sm ${c===D.id?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-white"}`,children:[e.jsxs("span",{className:"font-medium",children:["Snapshot #",D.id]}),e.jsx("span",{className:"text-xs opacity-70",children:D.timestamp})]},D.id))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 border-b border-gray-200 dark:border-gray-700 pb-2",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:c?`Snapshot #${c} Data`:"Select a snapshot"}),x.length>0&&e.jsxs(ns,{onClick:E,size:"xs",className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white transition-colors duration-200 px-2 py-1",children:[e.jsx(Ao,{className:"mr-1 h-3 w-3"}),"Export"]})]}),p?e.jsx("div",{className:"flex justify-center items-center h-[250px]",children:e.jsx(Ia,{size:"md",className:"text-[#00ffbd]"})}):e.jsx("div",{className:"overflow-x-auto custom-scrollbar rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs(kt,{className:"w-full text-sm",children:[e.jsxs(kt.Head,{children:[e.jsx(kt.HeadCell,{className:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-medium py-2 px-3",children:"Address"}),e.jsx(kt.HeadCell,{className:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-medium py-2 px-3",children:"Balance"})]}),e.jsx(kt.Body,{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.map((D,Z)=>e.jsxs(kt.Row,{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-150",children:[e.jsxs(kt.Cell,{className:"font-mono text-gray-900 dark:text-gray-300 py-2 px-3 text-xs",children:[D.address.slice(0,6),"...",D.address.slice(-4)]}),e.jsxs(kt.Cell,{className:"text-gray-900 dark:text-gray-300 font-medium py-2 px-3 text-xs",children:[parseFloat(D.balance).toLocaleString()," tokens"]})]},Z))})]})})]})]})]})]})};function h0({children:n}){const{user:a,loading:t}=Za();return t?e.jsx("div",{className:"min-h-screen bg-[#FFF5F7] flex items-center justify-center",children:e.jsx(B.div,{animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},className:"w-12 h-12 rounded-full border-4 border-[#FF1B6B] border-t-transparent"})}):a?n:e.jsx(Mo,{to:"/login",replace:!0})}const f0=()=>{const{logout:n,user:a,cartCount:t}=Za(),{isDarkMode:s,toggleTheme:r}=Cs();ua();const o=js(),[i,d]=l.useState(!1),[u,c]=l.useState(null),[m,x]=l.useState(0);l.useEffect(()=>{a?.sellerId&&(async()=>{const k=await qa(Gt(At,"sellers",a.sellerId));if(k.exists()){const w=k.data();c({...w,isVerified:w.verificationStatus==="approved"})}})()},[a]),l.useEffect(()=>{if(!a)return;const y=Be(_e(At,"conversations"),Ie("participants","array-contains",a.isSeller?a.sellerId:a.uid)),k=Aa(y,w=>{const g=w.docs.reduce((v,S)=>{const h=S.data(),T=a.isSeller?a.sellerId:a.uid;return v+(h.unreadCount?.[T]||0)},0);x(g)});return()=>k()},[a]);const f=async()=>{try{await n()}catch{G.error("Failed to logout")}},p=[{to:"/merch-store",icon:Gs,label:"Browse",exact:!0},{to:"/merch-store/cart",icon:Lo,label:"Cart",count:t},{to:"/merch-store/orders",icon:zr,label:"My Orders"},{to:"/merch-store/my-refunds",icon:bs,label:"My Refunds"},{to:"/merch-store/inbox",icon:Ys,label:"Inbox",count:m},{to:"/merch-store/settings",icon:ps,label:"Settings"}],b=[{to:"/merch-store/dashboard",icon:Gs,label:"Dashboard"},{to:"/merch-store/products",icon:ka,label:"My Products"},{to:"/merch-store/add-product",icon:Po,label:"Add Product"},{to:"/merch-store/sales",icon:Do,label:"Sales"},{to:"/merch-store/orders-received",icon:Pr,label:"Orders"},{to:"/merch-store/refunds",icon:bs,label:"Buyers Refunds"},{to:"/merch-store/seller/inbox",icon:Ys,label:"Inbox",count:m},{to:"/merch-store/settings",icon:ps,label:"Settings"}],A=[{to:"/merch-store/terms",icon:Ua,label:"Terms & Conditions"}],N=[...a?.isSeller?b:p,...A];return e.jsxs("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-white"}`,children:[e.jsx(qr,{position:"top-right",toastOptions:{duration:3e3,style:{background:s?"#1F2937":"#333",color:"#fff"},success:{iconTheme:{primary:"#FF1B6B",secondary:"#fff"}}}}),e.jsx("nav",{className:`fixed top-0 right-0 left-0 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-sm z-50 border-b`,children:e.jsx("div",{className:"w-full px-0",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center pl-4",children:[a&&e.jsx("button",{onClick:()=>d(!i),className:`lg:hidden p-2 ${s?"text-gray-400 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mr-2`,children:i?e.jsx(dt,{className:"w-6 h-6"}):e.jsx(Io,{className:"w-6 h-6"})}),e.jsxs(ut,{to:"/merch-store",className:"flex items-center gap-2",children:[e.jsx(ka,{className:"w-8 h-8 text-[#FF1B6B]"}),e.jsx("span",{className:"text-xl font-bold text-[#FF1B6B] hidden sm:inline",children:"MerchStore"})]}),e.jsx("div",{className:"ml-4 px-3 py-1 bg-red-100 border border-red-200 rounded-full",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:"Development Mode - No Real Transactions"})})]}),e.jsxs(B.div,{className:"flex items-center gap-2 sm:gap-4 pr-4",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${s?"bg-gray-700 text-yellow-400 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"Toggle theme",children:s?e.jsx(Mr,{className:"w-5 h-5"}):e.jsx(Ir,{className:"w-5 h-5"})}),a?e.jsx(e.Fragment,{children:!a.isSeller&&e.jsx(ut,{to:"/merch-store/become-seller",className:"hidden sm:flex items-center gap-2 px-4 py-2 rounded-full border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-[#FF1B6B] hover:text-white transition-all duration-300",children:"Become a Seller"})}):e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx(ut,{to:"/merch-store/login",className:`px-3 sm:px-4 py-2 ${s?"text-gray-300 hover:text-[#FF1B6B]":"text-[#FF1B6B] hover:text-[#D4145A]"} transition-colors text-sm sm:text-base`,children:"Login"}),e.jsx(ut,{to:"/merch-store/signup",className:"px-3 sm:px-4 py-2 rounded-full bg-[#FF1B6B] text-white hover:bg-[#D4145A] transition-all duration-300 text-sm sm:text-base",children:"Sign Up"})]}),e.jsxs(ut,{to:"/",className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-full border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-[#FF1B6B] hover:text-white transition-all duration-300 group text-sm sm:text-base",children:[e.jsx(Fo,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform duration-300"}),e.jsx("span",{className:"font-medium hidden sm:inline",children:"Back to Token Factory"}),e.jsx("span",{className:"font-medium sm:hidden",children:"Back"})]})]})]})})}),e.jsx(Je,{children:a&&i&&e.jsxs(e.Fragment,{children:[e.jsx(B.div,{initial:{opacity:0},animate:{opacity:.3},exit:{opacity:0},className:"fixed inset-0 bg-black/30 backdrop-blur-sm lg:hidden z-40",onClick:()=>d(!1)}),e.jsx(B.aside,{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] w-72 ${s?"bg-gray-800":"bg-white"} shadow-lg z-50 lg:hidden overflow-y-auto`,initial:{x:-288},animate:{x:0},exit:{x:-288},transition:{type:"spring",stiffness:100},children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:`p-6 border-b ${s?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Welcome,"}),e.jsx("p",{className:`font-medium ${s?"text-white":"text-gray-900"} text-lg`,children:a.name}),e.jsxs("div",{className:`mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs ${a.isSeller?"bg-pink-50 text-[#FF1B6B]":s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[e.jsx(qs,{className:"w-4 h-4"}),e.jsx("span",{children:a.isSeller?"Seller Account":"Buyer Account"}),a.isSeller&&u?.isVerified&&e.jsx(Zs,{className:"w-4 h-4 text-[#FF1B6B]"})]})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:N.map(y=>e.jsx("li",{children:e.jsxs(zs,{to:y.to,end:y.exact,onClick:()=>d(!1),className:({isActive:k})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${k?"bg-[#FF1B6B] text-white":s?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"}`,children:[e.jsx(y.icon,{className:"text-xl"}),e.jsx("span",{children:y.label}),y.count>0&&e.jsx("span",{className:`ml-auto text-xs font-medium px-2 py-1 rounded-full ${o.pathname===y.to?"bg-white text-[#FF1B6B]":"bg-[#FF1B6B] text-white"}`,children:y.count})]})},y.to))})}),e.jsx("div",{className:`p-4 border-t ${s?"border-gray-700":"border-gray-100"}`,children:e.jsxs("button",{onClick:()=>{d(!1),f()},className:`flex items-center gap-3 w-full px-4 py-3 ${s?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"} rounded-lg transition-colors`,children:[e.jsx(Vs,{className:"text-xl"}),e.jsx("span",{children:"Logout"})]})})]})})]})}),a&&e.jsx(B.aside,{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] w-64 ${s?"bg-gray-800":"bg-white"} shadow-lg z-50 hidden lg:block`,initial:{x:-64},animate:{x:0},transition:{type:"spring",stiffness:100},children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Welcome,"}),e.jsx("p",{className:`font-medium ${s?"text-white":"text-gray-900"}`,children:a.name}),e.jsxs("div",{className:`mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs ${a.isSeller?"bg-pink-50 text-[#FF1B6B]":s?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[e.jsx(qs,{className:"w-4 h-4"}),e.jsx("span",{children:a.isSeller?"Seller Account":"Buyer Account"}),a.isSeller&&u?.isVerified&&e.jsx(Zs,{className:"w-4 h-4 text-[#FF1B6B]"})]})]})}),e.jsx("nav",{className:"flex-1 px-4",children:e.jsx("ul",{className:"space-y-2",children:N.map(y=>e.jsx("li",{children:e.jsxs(zs,{to:y.to,end:y.exact,className:({isActive:k})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${k?"bg-[#FF1B6B] text-white":s?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"}`,children:[e.jsx(y.icon,{className:"text-xl"}),e.jsx("span",{children:y.label}),y.count>0&&e.jsx("span",{className:`ml-auto text-xs font-medium px-2 py-1 rounded-full ${o.pathname===y.to?"bg-white text-[#FF1B6B]":"bg-[#FF1B6B] text-white"}`,children:y.count})]})},y.to))})}),e.jsx("div",{className:`p-4 border-t ${s?"border-gray-700":"border-gray-100"}`,children:e.jsxs("button",{onClick:f,className:`flex items-center gap-3 w-full px-4 py-3 ${s?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"} rounded-lg transition-colors`,children:[e.jsx(Vs,{className:"text-xl"}),e.jsx("span",{children:"Logout"})]})})]})}),e.jsx("main",{className:`min-h-screen pt-16 ${a?"lg:pl-64":""} ${s?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"h-full",children:e.jsx(Fr,{})})}),e.jsx("footer",{className:`${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} border-t py-6 ${a?"lg:pl-64":""}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ka,{className:"w-6 h-6 text-[#FF1B6B]"}),e.jsx("span",{className:`${s?"text-gray-300":"text-gray-600"} font-medium`,children:"MerchStore"})]}),e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs(ut,{to:"/merch-store/terms",className:`${s?"text-gray-300 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} transition-colors text-sm flex items-center gap-2`,children:[e.jsx(Ua,{className:"w-4 h-4"}),"Terms & Conditions"]})}),e.jsxs("div",{className:`text-sm ${s?"text-gray-400":"text-gray-500"}`,children:["© ",new Date().getFullYear()," MerchStore. All rights reserved."]})]})})]})},p0=({isOpen:n,onClose:a,onAccept:t,token:s})=>{const[r,o]=l.useState(!1),[i,d]=l.useState(!1),u=async()=>{if(r){d(!0);try{await t()}finally{d(!1),a()}}};return e.jsx(Je,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(B.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},className:"fixed inset-0 bg-black z-50",onClick:a}),e.jsx(B.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Withdrawal Terms & Conditions"}),e.jsx("button",{onClick:a,disabled:i,className:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(dt,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:i?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nt,{className:"w-12 h-12 text-[#FF1B6B]"}),e.jsx(B.div,{className:"absolute inset-0 border-2 border-[#FF1B6B] rounded-lg",animate:{scale:[1,1.2,1],opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),e.jsx("p",{className:"text-gray-900 font-medium text-center",children:"Please confirm the withdrawal request in your wallet"}),e.jsx("p",{className:"text-gray-500 text-sm text-center",children:"Waiting for wallet confirmation..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg",children:e.jsx(zr,{className:"w-6 h-6 text-[#FF1B6B]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Order Processing"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"When an order is placed, you have 3 days to confirm shipping. The order amount will be held in escrow during this period."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg",children:e.jsx($a,{className:"w-6 h-6 text-[#FF1B6B]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Funds Release"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"After shipping confirmation, funds will be held for 14 days to ensure successful delivery. This amount will then be added to your available balance."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg",children:e.jsx(Bo,{className:"w-6 h-6 text-[#FF1B6B]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Withdrawal Processing"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Your ",s," withdrawal will be processed after the 14-day holding period from the shipping confirmation date."]})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:c=>o(c.target.checked),className:"mt-1 h-4 w-4 text-[#FF1B6B] focus:ring-[#FF1B6B] rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"I understand that funds from orders are released to my available balance only after: 1) Confirming shipping within 3 days of order placement 2) A 14-day holding period after shipping confirmation I also understand that withdrawal requests will be processed after these conditions are met."})]})})]})}),e.jsx("div",{className:"p-6 border-t",children:e.jsx("button",{onClick:u,disabled:!r||i,className:`w-full px-4 py-2 rounded-lg text-white font-medium transition-colors flex items-center justify-center gap-2 ${r&&!i?"bg-[#FF1B6B] hover:bg-[#D4145A]":"bg-gray-300 cursor-not-allowed"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx(B.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Waiting for Confirmation..."})]}):"Accept & Request Withdrawal"})})]})})]})})},kc=({endsAt:n})=>{const[a,t]=l.useState("");return l.useEffect(()=>{const s=()=>{const o=new Date().getTime(),d=new Date(n).getTime()-o;if(d<=0)return"Ended";const u=Math.floor(d/(1e3*60*60*24)),c=Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),m=Math.floor(d%(1e3*60*60)/(1e3*60)),x=Math.floor(d%(1e3*60)/1e3);return u>0?`${u}d ${c}h`:c>0?`${c}h ${m}m`:m>0?`${m}m ${x}s`:`${x}s`};t(s());const r=setInterval(()=>{const o=s();t(o),o==="Ended"&&clearInterval(r)},1e3);return()=>clearInterval(r)},[n]),e.jsx("span",{className:"font-medium",children:a})},g0=({products:n})=>{const[a,t]=l.useState(0),s=n.filter(r=>r.hasDiscount&&r.discountEndsAt&&new Date(r.discountEndsAt)>new Date).sort((r,o)=>new Date(r.discountEndsAt)-new Date(o.discountEndsAt));return l.useEffect(()=>{if(s.length<=4)return;const r=setInterval(()=>{t(o=>{const i=o+4;return i>=s.length?0:i})},5e3);return()=>clearInterval(r)},[s.length]),s.length===0?null:e.jsxs("div",{className:"bg-gradient-to-r from-pink-500/5 via-pink-500/10 to-purple-500/5 rounded-2xl p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[#FF1B6B] text-white rounded-full",children:[e.jsx(Ro,{className:"text-xl animate-pulse"}),e.jsx("span",{className:"font-bold",children:"HOT DEALS"})]}),e.jsx("div",{className:"h-[2px] flex-1 bg-gradient-to-r from-pink-500/20 to-transparent rounded-full"})]}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(Je,{initial:!1,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:s.slice(a,a+4).map((r,o)=>e.jsx(B.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.5,delay:o*.1},className:"group",children:e.jsxs(ut,{to:`/merch-store/product/${r.id}`,className:"block bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500/0 via-pink-500/10 to-purple-500/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[e.jsx("img",{src:r.images[0],alt:r.name,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 p-3 bg-gradient-to-b from-black/50 to-transparent",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-[#FF1B6B] text-white rounded-full text-sm font-bold",children:e.jsxs("span",{children:[r.discountPercent,"% OFF"]})}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-black/50 backdrop-blur-sm text-white rounded-full text-sm",children:[e.jsx($a,{className:"text-base animate-pulse"}),e.jsx(kc,{endsAt:r.discountEndsAt})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/50 to-transparent",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium line-clamp-1",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-[#FF1B6B] font-bold",children:["$",r.discountedPrice.toFixed(2)]}),e.jsxs("span",{className:"text-gray-300 text-sm line-through",children:["$",r.price.toFixed(2)]})]}),e.jsx("img",{src:r.tokenLogo,alt:r.acceptedToken,className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-white/10 backdrop-blur-sm rounded-full",children:[e.jsx("img",{src:r.network==="polygon"?"/polygon.png":"/unichain-logo.png",alt:r.network,className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium text-white capitalize",children:r.network})]})]})})]})]})},r.id))})}),s.length>4&&e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:Array.from({length:Math.ceil(s.length/4)}).map((r,o)=>e.jsx("button",{onClick:()=>t(o*4),className:`w-2 h-2 rounded-full transition-all duration-300 ${Math.floor(a/4)===o?"bg-[#FF1B6B] w-4":"bg-gray-300 hover:bg-gray-400"}`},o))})]})]})},vc=({rating:n,setRating:a,isInteractive:t=!0})=>e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(s=>e.jsx("button",{onClick:()=>t&&a(s),className:`${t?"cursor-pointer":"cursor-default"}`,disabled:!t,children:e.jsx(Dt,{className:`w-6 h-6 ${s<=n?"text-[#FF1B6B]":"text-gray-300"}`})},s))}),jc=({isOpen:n,onClose:a,productId:t,onReviewAdded:s})=>{const[r,o]=l.useState(0),[i,d]=l.useState(""),[u,c]=l.useState(null),[m,x]=l.useState(""),[f,p]=l.useState(!1),{user:b}=Za(),A=y=>{const k=y.target.files[0];if(k){if(k.size>2*1024*1024){G.error("Image must be less than 2MB");return}c(k);const w=new FileReader;w.onloadend=()=>{x(w.result)},w.readAsDataURL(k)}},N=async y=>{if(y.preventDefault(),!r){G.error("Please select a rating");return}p(!0);try{const k=Be(_e(At,"orders"),Ie("buyerId","==",b.uid),Ie("status","==","delivered")),g=(await Ue(k)).docs.find(M=>M.data().items.some(j=>j.productId===t));if(!g){G.error("You can only review products you have purchased and received"),p(!1);return}const v=await qa(Gt(At,"products",t));if(!v.exists()){G.error("Product not found"),p(!1);return}const S=v.data();let h="";if(u){const M=li(ki,`reviews/${t}/${b.uid}_${Date.now()}`);await di(M,u),h=await ci(M)}const T={productId:t,userId:b.uid,sellerId:S.sellerId,rating:r,review:i.trim(),image:h,createdAt:new Date,userName:b.displayName||b.email?.split("@")[0]||"Anonymous",productName:S.name,orderDate:g.data().createdAt,verificationStatus:"pending"};await Lt(_e(At,"reviews"),T);const C=Gt(At,"sellers",S.sellerId),H=await qa(C);if(H.exists()){const M=H.data(),j=M.statistics?.rating||0,E=M.statistics?.totalReviews||0,R=(j*E+r)/(E+1);await Ss(C,{"statistics.rating":R,"statistics.totalReviews":E+1,updatedAt:new Date})}G.success("Review submitted successfully"),s(),a()}catch(k){console.error("Error submitting review:",k),G.error("Failed to submit review. Please try again.")}finally{p(!1)}};return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:a}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs(B.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Write a Review"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:e.jsx(dt,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating"}),e.jsx(vc,{rating:r,setRating:o})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Review"}),e.jsx("textarea",{value:i,onChange:y=>d(y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B]",rows:"4",placeholder:"Share your experience with this product..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(Oo,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Choose Image"})]})]}),m&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Preview",className:"w-16 h-16 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{c(null),x("")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(dt,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!r,className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] rounded-lg disabled:opacity-50",children:f?"Submitting...":"Submit Review"})]})]})]})})]}):null},Nc=({isOpen:n,onClose:a,imageUrl:t})=>n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50",onClick:a}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative max-w-4xl w-full",children:[e.jsx("button",{onClick:a,className:"absolute -top-10 right-0 text-white hover:text-gray-300",children:e.jsx(dt,{className:"w-8 h-8"})}),e.jsx("img",{src:t,alt:"Review",className:"w-full h-auto rounded-lg"})]})})]}):null,b0=({productId:n})=>{const[a,t]=l.useState([]),[s,r]=l.useState(!0),[o,i]=l.useState(!1),{user:d}=Za(),[u,c]=l.useState(0),[m,x]=l.useState(!1),[f,p]=l.useState(null),[b,A]=l.useState(1),N=10,{isDarkMode:y}=Cs(),k=async()=>{try{const T=Be(_e(At,"reviews"),Ie("productId","==",n),xt("createdAt","desc")),H=(await Ue(T)).docs.map(M=>({id:M.id,...M.data(),createdAt:M.data().createdAt?.toDate()}));if(t(H),H.length>0){const M=H.reduce((j,E)=>j+E.rating,0)/H.length;c(M)}if(d){const M=Be(_e(At,"orders"),Ie("buyerId","==",d.uid),Ie("status","==","delivered")),E=(await Ue(M)).docs.some(O=>O.data().items.some(D=>D.productId===n)),R=H.some(O=>O.userId===d.uid);x(E&&!R)}}catch(T){console.error("Error fetching reviews:",T),G.error("Failed to load reviews")}finally{r(!1)}};l.useEffect(()=>{k()},[n,d]);const w=Math.ceil(a.length/N),g=b*N,v=g-N,S=a.slice(v,g),h=T=>{A(T),window.scrollTo({top:document.getElementById("reviews-section").offsetTop-100,behavior:"smooth"})};return s?e.jsx("div",{className:"animate-pulse",children:"Loading reviews..."}):e.jsxs("div",{className:"mt-8",id:"reviews-section",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${y?"text-gray-100":"text-gray-800"}`,children:"Customer Reviews"}),a.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(T=>e.jsx("svg",{className:"w-5 h-5 text-[#FF1B6B]",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},T))}),e.jsx("span",{className:`${y?"text-gray-200":"text-gray-700"} font-medium`,children:u.toFixed(1)}),e.jsxs("span",{className:`${y?"text-gray-400":"text-gray-500"}`,children:["(",a.length," ",a.length===1?"review":"reviews",")"]})]})]}),m&&e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] rounded-lg",children:"Write a Review"})]}),a.length===0?e.jsx("div",{className:`text-center py-8 ${y?"text-gray-400":"text-gray-500"}`,children:"No reviews yet"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:S.map(T=>e.jsxs("div",{className:`${y?"border-gray-700":"border-gray-200"} border-b pb-6 last:border-b-0 last:pb-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${y?"text-gray-200":"text-gray-800"}`,children:T.userName}),e.jsxs("span",{className:`text-sm ${y?"text-gray-400":"text-gray-500"}`,children:["· ",T.createdAt.toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(C=>e.jsx("svg",{className:`w-4 h-4 ${C<=T.rating?"text-[#FF1B6B]":y?"text-gray-600":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},C))})]}),e.jsx("p",{className:`${y?"text-gray-300":"text-gray-600"}`,children:T.review}),T.image&&e.jsx("button",{onClick:()=>p(T.image),className:"mt-3 block",children:e.jsx("img",{src:T.image,alt:"Review",className:"rounded-lg w-32 h-32 object-cover hover:opacity-90 transition-opacity"})})]},T.id))}),w>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>h(b-1),disabled:b===1,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),[...Array(w)].map((T,C)=>e.jsx("button",{onClick:()=>h(C+1),className:`w-8 h-8 rounded-lg text-sm font-medium ${b===C+1?"bg-[#FF1B6B] text-white":"text-gray-600 hover:bg-gray-100"}`,children:C+1},C+1)),e.jsx("button",{onClick:()=>h(b+1),disabled:b===w,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.jsx(jc,{isOpen:o,onClose:()=>i(!1),productId:n,onReviewAdded:k}),e.jsx(Nc,{isOpen:!!f,onClose:()=>p(null),imageUrl:f})]})},y0=({isOpen:n,onClose:a,trackingNumber:t,carrier:s})=>{const[r,o]=l.useState(!1);return l.useEffect(()=>{const i={log:console.log,warn:console.warn,error:console.error},d=u=>(...c)=>{c.some(x=>typeof x=="string"&&x.includes("Error initializing tracking widget:"))&&i[u](...c)};return console.log=d("log"),console.warn=d("warn"),console.error=d("error"),()=>{console.log=i.log,console.warn=i.warn,console.error=i.error}},[]),l.useEffect(()=>{if(!n)return;const i=document.getElementById("tracking-container");if(!i)return;const d=()=>{try{i.innerHTML="";const c=document.createElement("div");c.id="YQContainer",c.className="rounded-lg border border-pink-100 shadow-sm",i.appendChild(c),window.YQV5&&(window.YQV5.trackSingle({YQ_ContainerId:"YQContainer",YQ_Height:560,YQ_Fc:s||"0",YQ_Lang:"en",YQ_Num:t}),o(!0))}catch(c){console.error("Error initializing tracking widget:",c)}};if(!document.getElementById("YQScript")){const c=document.createElement("script");c.id="YQScript",c.src="https://www.17track.net/externalcall.js",c.async=!0,document.head.appendChild(c)}const u=setInterval(()=>{window.YQV5&&(clearInterval(u),d())},100);return()=>{clearInterval(u),o(!1),i&&(i.innerHTML="")}},[n,t,s]),n?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90",onClick:a}),e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 p-4 relative z-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-[#FF1B6B]",children:"Tracking Details"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-[#FF1B6B] transition-colors",children:e.jsx(_o,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mb-4 p-3 bg-pink-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Tracking Number:"}),e.jsx("span",{className:"font-medium text-gray-900",children:t}),e.jsx("span",{className:"mx-2 text-gray-300",children:"|"}),e.jsx("span",{className:"font-medium text-gray-500",children:"Carrier:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s||"Auto-detect"})]})}),r?null:e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#FF1B6B]"})}),e.jsx("div",{id:"tracking-container",className:"w-full min-h-[560px] rounded-lg bg-gradient-to-br from-pink-50 to-white"})]})]}):null};export{h0 as $,Qc as A,ct as B,m0 as C,sn as D,$c as E,da as F,ki as G,g0 as H,kc as I,b0 as J,y0 as K,Dc as L,i0 as M,Bc as N,Zc as O,s0 as P,Jc as Q,Kc as R,x0 as S,e0 as T,Pc as U,Zs as V,p0 as W,Vc as X,Gc as Y,Yc as Z,f0 as _,wi as a,_i as b,_c as c,At as d,Oc as e,qc as f,vi as g,zc as h,Di as i,Hc as j,Wc as k,Xc as l,it as m,Uc as n,Ze as o,d0 as p,l0 as q,o0 as r,Rc as s,c0 as t,uc as u,u0 as v,n0 as w,r0 as x,a0 as y,t0 as z};
