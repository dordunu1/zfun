import{r as i,j as e,n as M,u as fs,R as Ct,F as Di,f as Mi,L as Ge,O as Pi,g as Mr,h as Ka,i as xl,k as es,l as gl,m as $i,o as Li,N as Ta,p as Ca,q as er,s as Zr,t as hl,v as ia,w as Ri,_ as Le,x as pl,y as Dt,z as Sa,A as jn,B as Jr,C as fl,H as yl,D as bl,E as wl,T as vn,G as jl,I as Ds,J as vl,K as Nl,M as Kr,P as Oi,Q as _i,S as Ui,U as kl,V as Tl,W as mt,X as it,Y as en,Z as qt,$ as ys,a0 as rt,a as tn,a1 as Ls,a2 as Cl,a3 as Sl,a4 as Fl,a5 as El,a6 as Al,a7 as ct,a8 as tr,a9 as Il,aa as Nn,ab as wr,ac as jr,ad as kn,ae as Bl,af as Dl,ag as Wi,ah as Pr,ai as Ml,aj as Pl,ak as oa,al as Hi,am as $r,an as $l,ao as Ll,ap as hs,aq as Rs,ar as Rl,as as Tn,at as Ol,au as _l,av as Ul,aw as Wl,ax as Os,ay as Xa,az as Hl,aA as qi,aB as Za,aC as ql,aD as zl,aE as Vl,aF as Gl,aG as zi,aH as Vi,aI as Cn,aJ as Gi,aK as Yi,aL as Yl,aM as Ql,aN as Xl,aO as Zl,aP as Jl,aQ as Kl,aR as ed,aS as sn,aT as cr,aU as Ba,aV as Fa,aW as td,aX as sd,aY as Sn,aZ as Fn,a_ as ad,a$ as an,b0 as rd,b1 as Lr,b2 as nd,b3 as id,b4 as od,b5 as rn,b6 as nn,b7 as Qi,b8 as ld,b9 as dd,ba as Xi,bb as cd,bc as Et,bd as Rr,be as Or,bf as Zi,bg as ta,bh as Ji,bi as sr,bj as Ki,bk as la,bl as eo,bm as md,bn as to,bo as da,bp as En,bq as An,br as In,bs as so,bt as _s,bu as Ea,bv as ud,bw as Aa,bx as xd,by as Kt,bz as gd,bA as hd,bB as pd,bC as fd,bD as ao,bE as yd,bF as bd,bG as ro,bH as wd,bI as jd,bJ as vd,bK as Bn,bL as Nd,bM as kd,bN as Td,bO as Cd,bP as Dn,bQ as Mn,bR as Pn,bS as Sd,bT as $n,bU as Fd,bV as Ed,bW as Ad,bX as Id,bY as Bd,bZ as Dd,b_ as Md,b$ as Pd,c0 as $d,c1 as Ld,c2 as Rd,c3 as Od,c4 as _d,c5 as Ud,c6 as no,c7 as Wd,c8 as Hd,c9 as io,ca as qd,cb as zd,cc as Vd,cd as Gd,ce as Yd,cf as Qd,cg as Xd,ch as Zd,ci as Jd,cj as Kd,ck as ec,cl as tc,cm as sc,cn as ac,co as oo,cp as lo,cq as ar,cr as rc,cs as nc,ct as ic,cu as oc}from"./vendor-r-C9Te4mx-.js";import{u as Oe,a as Ft,e as mr,k as bs,l as lc,m as co,n as dc,o as cc,p as mo,w as uo,q as mc,g as uc}from"./web3-wagmi-BvzjG269.js";import{i as xo,g as xc,a as go,b as gc,c as ho,G as hc,o as pc,d as ge,e as De,f as fc,s as ts,h as Ln,j as yc,k as bc,l as wc,q as Te,m as be,w as fe,n as Ae,p as Ue,t as Ht,u as jc,v as $e,x as _t,y as We,z as et,T as _r,A as Us,B as ca,C as ur,D as xr,E as po,F as on,H as vc,I as Nc}from"./vendor-firebase-BLtHRE7a.js";import{m as R,A as Ze,B as vr,S as Ma,T as as}from"./vendor-f-Cth8Ya-u.js";import{a as ss}from"./vendor-metamask-CzA8xFY6.js";import{C as kc,u as ua,R as Tc,d as Cc,l as Sc}from"./rainbow-utils-BNXFv0tM.js";import{b as Wt}from"./vendor-a-DTa6tF4e.js";import{a as Rt,C as Fc,d as Ec,e as Ac,P as Ic,f as Bc,p as Dc,g as Mc,h as Pc,i as $c,A as Lc}from"./vendor-c-Cp8dGTsr.js";import{i as gt,C as J,p as Ie,B as he,a as Ut,b as ln,J as Ot,f as ze,A as Ms,c as de,M as Mt,Z as ka,t as fo,g as bt,I as ps,d as $s,e as yo,h as Rc}from"./web3-ethers-3qTiM2V5.js";import{_ as le,q as me,$ as js,a as Hs}from"./vendor-headlessui-CFrf-L9r.js";import{r as Oc,u as Ja,w as _c}from"./vendor-x-D1rEFg7f.js";import"./vendor-p-CyOive9t.js";import{k as Uc}from"./web3-viem-CeBRBLCK.js";import{aa as gr,ab as Wc,ac as bo,ad as Rn,ae as Hc,af as qc,ag as zc}from"./vendor-d-0o7eJBx7.js";import{F as Vc,a as Gc,b as Ur,c as xa,d as Yc,e as On,f as Qc,g as Xc,h as Zc,i as Jc}from"./vendor-heroicons-Dt2n0SRu.js";import{f as Kc}from"./vendor-e-BAzhHmIV.js";import{b as e0}from"./vendor-z-77ZvVjaQ.js";import"./vendor-t-BWxlVkay.js";import"./vendor-i-QmFmXgsK.js";import"./vendor-l-CfR6lwhX.js";import"./vendor-lit-DqIZwSbB.js";import"./vendor-m-BMrh0xrN.js";import"./vendor-motionone-LitJTNCD.js";import"./vendor-b-DuUIYwKf.js";import"./vendor-u-C_I5LO-p.js";import"./vendor-g-B1d7-Lle.js";import"./vendor-v-B02KbSm8.js";import"./vendor-floating-ui-B5G1yjMd.js";import"./vendor-babel-4x0MBR-3.js";import"./vendor-emotion-CSGYLLlb.js";import"./vendor-h-z9nc5KY6.js";import"./vendor-s-TuUARqME.js";import"./vendor-walletconnect-CoZ724CP.js";import"./vendor-stablelib-CqeRPt7t.js";import"./vendor-q-DQjQg5mj.js";import"./vendor-tanstack-DyjL1WzW.js";import"./vendor-vanilla-extract-DLxAaWrr.js";import"./vendor-kurkle-D8fDXNIl.js";import"./vendor-noble-B-w6EAyq.js";import"./vendor-adraffy--FYt1KqO.js";import"./vendor-j-CAPY2oEB.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}})();const wo=i.createContext();function t0({children:a}){const[t,s]=i.useState(()=>{const l=localStorage.getItem("darkMode");return l!==null?JSON.parse(l):window.matchMedia("(prefers-color-scheme: dark)").matches});i.useEffect(()=>{t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode",JSON.stringify(t))},[t]);const r={isDarkMode:t,toggleTheme:()=>{s(!t)}};return e.jsx(wo.Provider,{value:r,children:a})}function Se(){const a=i.useContext(wo);if(a===void 0)throw new Error("useTheme must be used within a ThemeProvider");return a}const s0=window.location.hostname==="localhost",a0={apiKey:"AIzaSyADTuh7W2jR3iCVo3nmDXUEVcCoM92szTg",authDomain:s0?"merch-store-581c9.firebaseapp.com":"auth.token-factory.xyz",projectId:"merch-store-581c9",storageBucket:"merch-store-581c9.firebasestorage.app",messagingSenderId:"946488133747",appId:"1:946488133747:web:1cefa3eab5250023218206",measurementId:"G-JKNYX3PJWDP\0R\0I\0V\0A\0T\0E\0_\0K\0E\0Y\0=\0y\0o\0u\0r\0_\0p\0r\0i\0v\0a\0t\0e\0_\0k\0e\0y\0"},hr=xo(a0,"merchStore"),Gt=xc(hr),ae=go(hr),ma=gc(hr);ho(hr);const jo=new hc;jo.setCustomParameters({prompt:"select_account",auth_type:"reauthenticate"});Gt.useDeviceLanguage();const vo=i.createContext();function r0({children:a}){const[t,s]=i.useState(null),[n,r]=i.useState(!0),[l,d]=i.useState(!1);i.useState(!0);const[o,m]=i.useState(0);i.useEffect(()=>{const w=pc(Gt,async p=>{if(p){const y=ge(ae,"users",p.uid),g=await De(y),j=g.exists()?g.data():{},T={uid:p.uid,email:p.email,name:j.name||null,isSeller:j.isSeller||!1,sellerId:j.sellerId||null,walletAddress:j.walletAddress||null,createdAt:j.createdAt||new Date,updatedAt:new Date};s(T),d(j.isAdmin||!1),r(!1)}else s(null),d(!1),r(!1)});return()=>w()},[]);const c=async w=>{try{const p=Te(be(ae,"cart"),fe("userId","==",w)),y=await Ae(p);m(y.size)}catch(p){console.error("Error fetching cart count:",p),m(0)}},E={user:t,loading:n,signup:async(w,p,y)=>{try{const{user:g}=await fc(Gt,w,p);return await ts(ge(ae,"users",g.uid),{...y,email:w,createdAt:new Date().toISOString(),isSeller:!1,isBuyer:!0}),await Ln(Gt),g}catch(g){throw console.error("Signup error:",g),new Error(g.message)}},login:async(w,p)=>{try{const{user:y}=await yc(Gt,w,p);return y}catch(y){throw console.error("Login error:",y),new Error(y.message)}},loginWithGoogle:async()=>{try{const{user:w}=await bc(Gt,jo);return(await De(ge(ae,"users",w.uid))).exists()||await ts(ge(ae,"users",w.uid),{email:w.email,name:w.displayName,photoURL:w.photoURL,createdAt:new Date().toISOString(),isSeller:!1,isBuyer:!0,shippingAddress:{street:"",city:"",state:"",country:"",postalCode:""}}),w}catch(w){throw console.error("Google login error:",w),w.code==="auth/popup-closed-by-user"?new Error("Sign in cancelled"):new Error(w.message)}},logout:async()=>{try{await Ln(Gt),M.success("Logged out successfully")}catch(w){throw console.error("Logout error:",w),new Error(w.message)}},resetPassword:async w=>{try{await wc(Gt,w),M.success("Password reset email sent! Please check your inbox.")}catch(p){throw console.error("Password reset error:",p),new Error(p.message)}},isAdmin:l,cartCount:o,updateCartCount:async w=>{await c(w)}};return e.jsx(vo.Provider,{value:E,children:!n&&a})}function Ve(){return i.useContext(vo)}function No(){const a=fs(),[t,s]=Ct.useState(localStorage.getItem("admin-theme")||"light");i.useEffect(()=>{document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(t),localStorage.setItem("admin-theme",t)},[t]);const n=()=>{s(t==="light"?"dark":"light")},r=d=>a.pathname===d,l=[{path:"/admin",icon:e.jsx(Mr,{}),label:"Dashboard"},{path:"/admin/withdrawals",icon:e.jsx(Ka,{}),label:"Withdrawals"},{path:"/admin/refunds",icon:e.jsx(xl,{}),label:"Refunds"},{path:"/admin/sales",icon:e.jsx(es,{}),label:"Sales"},{path:"/admin/stores-revenue",icon:e.jsx(gl,{}),label:"Stores Revenue"},{path:"/admin/store-verification",icon:e.jsx($i,{}),label:"Store Verification"},{path:"/admin/settings",icon:e.jsx(Li,{}),label:"Settings"}];return e.jsxs("div",{className:`min-h-screen ${t==="dark"?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("header",{className:`${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-sm border-b`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16 items-center",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-xl font-bold text-[#FF1B6B]",children:"Admin Panel"})}),e.jsx("button",{onClick:n,className:`p-2 rounded-lg ${t==="dark"?"bg-gray-700 text-yellow-400 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"} transition-colors duration-200`,"aria-label":"Toggle theme",children:t==="dark"?e.jsx(Di,{className:"w-5 h-5"}):e.jsx(Mi,{className:"w-5 h-5"})})]})})}),e.jsx("nav",{className:`${t==="dark"?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-sm border-b`,children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-8 h-14",children:l.map(d=>e.jsxs(Ge,{to:d.path,className:`inline-flex items-center px-1 pt-1 text-sm font-medium border-b-2 ${r(d.path)?"border-[#FF1B6B] text-[#FF1B6B]":`border-transparent ${t==="dark"?"text-gray-400 hover:border-gray-600 hover:text-gray-300":"text-gray-500 hover:border-gray-300 hover:text-gray-700"}`}`,children:[e.jsx("span",{className:"mr-2",children:d.icon}),d.label]},d.path))})})}),e.jsx("main",{className:`max-w-7xl mx-auto py-6 sm:px-6 lg:px-8 ${t==="dark"?"text-white":"text-gray-900"}`,children:e.jsx(Pi,{})})]})}const fa="0x5828D525fe00902AE22f2270Ac714616651894fF";function ko(){const{isAdmin:a}=Ve(),[t,s]=i.useState(!0),[n,r]=i.useState(!1),[l,d]=i.useState(""),[o,m]=i.useState(""),[c,u]=i.useState("all"),[x,f]=i.useState({totalSales:0,currentSales:0,totalRefunds:0,activeSellers:0,pendingWithdrawals:0,platformBalance:0,totalOrders:0,totalProducts:0,totalCustomers:0,platformFee:0,totalPlatformFees:0,withdrawnFees:0,totalEarnings:0,recentOrders:[],topSellers:[],salesByNetwork:{unichain:0,polygon:0}});i.useState([]);const[N,v]=i.useState("list");i.useState("");const[C,E]=i.useState(1),[w,p]=i.useState(!0),[y,g]=i.useState(!1),j=50,T=()=>{const h=x.recentOrders?.map(I=>I.sellerName)||[];return["all",...new Set(h)]},b=i.useMemo(()=>x.recentOrders?.filter(h=>{const I=h.id.toLowerCase().includes(o.toLowerCase())||(h.buyerInfo?.name||"").toLowerCase().includes(o.toLowerCase()),O=c==="all"||h.sellerName===c;return I&&O}),[x.recentOrders,o,c]),$=async()=>{if(!(y||!w)){g(!0);try{const h=x.recentOrders[x.recentOrders.length-1],I=Te(be(ae,"orders"),Ue("createdAt","desc"),jc(h.createdAt),Ht(j)),O=await Ae(I),F=await Promise.all(O.docs.map(async U=>{const V={id:U.id,...U.data()};if(V.sellerId){const P=Te(be(ae,"sellers"),fe("uid","==",V.sellerId)),B=await Ae(P);if(!B.empty){const k=B.docs[0].data();V.sellerName=k.storeName||k.name||"Unknown Seller",V.sellerFlag=k.country?.flag||null}}return V}));F.length<j&&p(!1),f(U=>({...U,recentOrders:[...U.recentOrders,...F]})),E(U=>U+1)}catch(h){console.error("Error loading more orders:",h),M.error("Failed to load more orders")}finally{g(!1)}}},L=h=>{const{scrollTop:I,clientHeight:O,scrollHeight:F}=h.target;F-I<=O*1.5&&$()};i.useEffect(()=>{(async()=>{try{const I=await ss();if(I){const O=await I.request({method:"eth_accounts"});O.length>0&&O[0].toLowerCase()===fa.toLowerCase()&&(d(O[0]),r(!0))}}catch(I){console.error("Error checking wallet connection:",I)}})()},[]),i.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",h=>{h.length===0||h[0].toLowerCase()!==fa.toLowerCase()?(r(!1),d("")):(d(h[0]),r(!0))})},[]);const S=async()=>{try{if(!await ss()){M.error("Please install MetaMask to connect your wallet");return}const I=await window.ethereum.request({method:"eth_requestAccounts"});if(I.length===0){M.error("Please connect your wallet");return}const O=I[0];O.toLowerCase()===fa.toLowerCase()?(d(O),r(!0),M.success("Wallet connected successfully")):(M.error("This wallet does not have admin privileges"),r(!1),d(""))}catch(h){console.error("Failed to connect wallet:",h),h.code===4001?M.error("You rejected the connection request"):M.error("Failed to connect wallet")}};i.useEffect(()=>{n&&l.toLowerCase()===fa.toLowerCase()&&A()},[n,l]);const A=async()=>{try{s(!0);const h=Te(be(ae,"sellers")),I=await Ae(h),O=Te(be(ae,"withdrawals"),fe("status","in",["completed","pending"])),F=await Ae(O),U=Te(be(ae,"orders"),Ue("createdAt","desc"),Ht(j)),V=await Ae(U),P={};I.docs.forEach(ne=>{const K=ne.data();P[ne.id]={id:ne.id,name:K.storeName||K.name||"Unknown Store",flag:K.country?.flag||null}});const B=await Promise.all(V.docs.map(async ne=>{const K={id:ne.id,...ne.data()};if(K.sellerId&&P[K.sellerId]){const xe=P[K.sellerId];K.sellerName=xe.name,K.sellerFlag=xe.flag}return K}));p(B.length===j);const k=B.filter(ne=>ne.status!=="cancelled"),D=k.filter(ne=>ne.status==="shipped"||ne.status==="processing"||ne.status==="completed"||ne.status==="delivered"),_=k.filter(ne=>ne.status==="refunded"),H=D.reduce((ne,K)=>ne+(Number(K.total)||0),0),X=_.reduce((ne,K)=>ne+(Number(K.total)||0)*.95,0),z=H*.05,se=[...D,..._].reduce((ne,K)=>ne+Number(K.total)*.05,0),ee=F.docs.filter(ne=>ne.data().status==="approved"&&ne.data().type==="platform_fee").reduce((ne,K)=>ne+K.data().amount,0),te={};F.docs.forEach(ne=>{const K=ne.data(),xe=K.sellerId;te[xe]||(te[xe]={completed:0,pending:0}),K.status==="completed"?te[xe].completed+=K.amount||0:K.status==="pending"&&(te[xe].pending+=K.amount||0)});const Y={};D.forEach(ne=>{const K=ne.sellerId,xe=P[K]?.name||"Unknown Store";Y[K]||(Y[K]={id:K,name:xe,flag:P[K]?.flag||null,totalSales:0,netRevenue:0,ordersCount:0}),Y[K].totalSales+=Number(ne.total)||0,Y[K].ordersCount+=1}),Object.keys(Y).forEach(ne=>{const K=te[ne]||{completed:0,pending:0};Y[ne].netRevenue=Math.max(0,Y[ne].totalSales-K.completed)});const W=Object.values(Y).reduce((ne,K)=>ne+K.netRevenue,0),Q=Object.values(Y).sort((ne,K)=>K.netRevenue-ne.netRevenue).slice(0,5).map(ne=>({id:ne.id,name:ne.name,flag:ne.flag,total:Math.max(0,ne.netRevenue),orders:ne.ordersCount})),G=Te(be(ae,"products")),Z=(await Ae(G)).size;let ie={unichain:0,polygon:0};D.forEach(ne=>{ne.paymentMethod?.network===1301?ie.unichain+=Number(ne.total)||0:ne.paymentMethod?.network===137&&(ie.polygon+=Number(ne.total)||0)}),f({totalSales:H,currentSales:W,totalRefunds:X,activeSellers:I.size,pendingWithdrawals:F.docs.filter(ne=>ne.data().status==="pending").length,platformBalance:z,totalOrders:B.length,totalProducts:Z,totalCustomers:new Set([...D,..._].map(ne=>ne.buyerId)).size,platformFee:z,totalPlatformFees:se,withdrawnFees:ee,totalEarnings:se+ee,recentOrders:B,topSellers:Q,salesByNetwork:ie})}catch(h){console.error("Error fetching dashboard data:",h),M.error("Failed to load dashboard data")}finally{s(!1)}};return a?!n||l.toLowerCase()!==fa.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#FF1B6B] mb-4",children:"Admin Authentication Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Please connect your admin wallet to access the dashboard"}),e.jsx("button",{onClick:S,className:"px-6 py-3 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:"Connect Wallet"})]}):t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All-time Sales"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",x.totalSales.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Total volume (excl. refunds)"})]}),e.jsx(Ca,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Sales"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",Math.max(0,x.currentSales).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Available for withdrawal"})]}),e.jsx(es,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Refunds"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",x.totalRefunds.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Refunded amount (excl. platform fees)"})]}),e.jsx(Ka,{className:"text-3xl text-red-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All-time Platform Fees"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",x.totalPlatformFees.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Total platform fees (incl. withdrawn)"})]}),e.jsx(Ca,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Platform Fees"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",x.platformFee.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Available for withdrawal"})]}),e.jsx(es,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Sellers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.activeSellers}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[x.totalProducts," products listed"]})]}),e.jsx(er,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.totalOrders}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"All-time orders"})]}),e.jsx(Zr,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.totalProducts}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Listed products"})]}),e.jsx(Mr,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:x.totalCustomers}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Unique buyers"})]}),e.jsx(er,{className:"text-3xl text-[#FF1B6B]"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sales by Network"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-6 h-6 object-contain"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Unichain"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",x.salesByNetwork.unichain.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/polygon.png",alt:"Polygon",className:"w-6 h-6 object-contain"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Polygon"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",x.salesByNetwork.polygon.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Top Sellers"}),e.jsx("div",{className:"space-y-4",children:x.topSellers.map((h,I)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-[#FF1B6B] flex items-center justify-center text-white text-sm",children:I+1}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:h.name}),h.flag&&e.jsx("img",{src:h.flag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",h.total.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[h.orders," orders"]})]})]},h.id))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Recent Orders"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("select",{value:c,onChange:h=>u(h.target.value),className:"px-3 py-2 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF1B6B]",children:T().map(h=>e.jsx("option",{value:h,children:h==="all"?"All Stores":h},h))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by Order ID or Customer",value:o,onChange:h=>m(h.target.value),className:"pl-10 pr-4 py-2 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] w-64"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v("list"),className:`p-2 rounded-lg transition-colors ${N==="list"?"bg-[#FF1B6B] text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:e.jsx(hl,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>v("grid"),className:`p-2 rounded-lg transition-colors ${N==="grid"?"bg-[#FF1B6B] text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:e.jsx(Mr,{className:"w-5 h-5"})})]})]})]}),N==="list"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Seller"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b?.map(h=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:h.id.slice(-6)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:h.sellerName}),h.sellerFlag&&e.jsx("img",{src:h.sellerFlag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:h.buyerInfo?.name||"Anonymous"}),h.flag&&e.jsx("img",{src:h.flag,alt:typeof h.shippingAddress?.country=="object"?h.shippingAddress?.country.name:h.shippingAddress?.country,className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",h.total?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.status==="completed"||h.status==="shipped"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":h.status==="processing"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":h.status==="cancelled"?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":h.status==="refunded"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":h.status==="delivered"?"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-200":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:h.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:h.createdAt?.toDate?new Date(h.createdAt.toDate()).toLocaleString():new Date(h.createdAt).toLocaleString()})]},h.id))})]})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4 overflow-y-auto",style:{maxHeight:"600px"},onScroll:L,children:[b?.map(h=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:["Order #",h.id.slice(-6)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:h.createdAt?.toDate?new Date(h.createdAt.toDate()).toLocaleString():new Date(h.createdAt).toLocaleString()})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h.status==="completed"||h.status==="shipped"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":h.status==="processing"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":h.status==="cancelled"?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":h.status==="refunded"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":h.status==="delivered"?"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-200":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:h.status})]}),e.jsxs("div",{className:"border-t border-b border-gray-200 dark:border-gray-600 py-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:h.buyerInfo?.name||"Anonymous"}),h.flag&&e.jsx("img",{src:h.flag,alt:"Buyer country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seller"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:h.sellerName}),h.sellerFlag&&e.jsx("img",{src:h.sellerFlag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Total Amount"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["$",h.total?.toFixed(2)]})]})]},h.id)),y&&e.jsx("div",{className:"col-span-full flex justify-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})})]})]})]}):e.jsx(Ta,{to:"/merch-store",replace:!0})}function n0(){const{address:a,isConnected:t}=Oe(),{chain:s}=Ft(),n=mr(),{data:r}=bs();return{account:a,isConnected:t,chain:s,provider:n,signer:r}}const i0={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_17TRACK_API_KEY:"90E44878A5030837C5293798DC6081CD",VITE_ADMIN_WALLET:"0x5828D525fe00902AE22f2270Ac714616651894fF",VITE_ALCHEMY_API_KEY:"Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",VITE_CHAIN_FEES:"0.02,0.05,0.01,369",VITE_ETHERSCAN_API_KEY:"JE5C1JTK2C629S4T8XVWD125CE37QZ83QS",VITE_FACTORY_ADDRESS_10143:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426",VITE_FACTORY_ADDRESS_11155111:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",VITE_FACTORY_ADDRESS_130:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_FACTORY_ADDRESS_1301:"0x08a58b1628Fb449635078355Be83e181EFBe3948",VITE_FACTORY_ADDRESS_137:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",VITE_FACTORY_ADDRESS_1828369849:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",VITE_FIREBASE_API_KEY:"AIzaSyDlfQMHiTf2vlpOdQA7gsiPK9PcITwBCc8",VITE_FIREBASE_APP_ID:"1:235589319121:web:05d9cd3aeaed3d62d748f0",VITE_FIREBASE_AUTH_DOMAIN:"tokenfactory-bbe1a.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-SJ14LLN724",VITE_FIREBASE_MESSAGING_SENDER_ID:"235589319121",VITE_FIREBASE_PROJECT_ID:"tokenfactory-bbe1a",VITE_FIREBASE_STORAGE_BUCKET:"tokenfactory-bbe1a.firebasestorage.app",VITE_MAILJET_API_KEY:"12622e0080c3a1c247990785dd1d0691",VITE_MAILJET_SECRET_KEY:"d9870d511fd1850d97b702f5f43247e6",VITE_MERCH_FIREBASE_API_KEY:"AIzaSyADTuh7W2jR3iCVo3nmDXUEVcCoM92szTg",VITE_MERCH_FIREBASE_APP_ID:"1:946488133747:web:1cefa3eab5250023218206",VITE_MERCH_FIREBASE_AUTH_DOMAIN:"merch-store-581c9.firebaseapp.com",VITE_MERCH_FIREBASE_MEASUREMENT_ID:"G-JKNYX3PJWDP\0R\0I\0V\0A\0T\0E\0_\0K\0E\0Y\0=\0y\0o\0u\0r\0_\0p\0r\0i\0v\0a\0t\0e\0_\0k\0e\0y\0",VITE_MERCH_FIREBASE_MESSAGING_SENDER_ID:"946488133747",VITE_MERCH_FIREBASE_PROJECT_ID:"merch-store-581c9",VITE_MERCH_FIREBASE_STORAGE_BUCKET:"merch-store-581c9.firebasestorage.app",VITE_MERCH_PLATFORM_ADDRESS_1301:"0xCCc38F4174BfE412e8e05Ae666037A70349ea36B",VITE_MERCH_PLATFORM_ADDRESS_137:"0x2571F240AA2Ca27Af06e5848f891efceB27d1626",VITE_NFT1155_IMPLEMENTATION_MONAD_TESTNET:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_NFT1155_IMPLEMENTATION_MOONWALKER:"0xBE339Ee485dD54375949Eb51CA4b80bCC994dee0",VITE_NFT1155_IMPLEMENTATION_POLYGON:"0x2Bab33d0D290f952BeBF50d44f8B015058a76A52",VITE_NFT1155_IMPLEMENTATION_SEPOLIA:"0xc558f0e1d3b0676abba36027642819e0351fbcb5",VITE_NFT1155_IMPLEMENTATION_UNICHAIN:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_MAINNET:"0xfA4e5A906F03A1a2522CbAA32346aD8B8Db0EAE2",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_TESTNET:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT721_IMPLEMENTATION_MONAD_TESTNET:"0xBF098eDe4264fd46Dc2da4b6E87d1dF39271e7C9",VITE_NFT721_IMPLEMENTATION_MOONWALKER:"0xF4815EF47E2fe9479485Ac00f2D904eB358DA7c1",VITE_NFT721_IMPLEMENTATION_POLYGON:"0x4f227F5f8e4659AB79bF3993ce547BE929f60185",VITE_NFT721_IMPLEMENTATION_SEPOLIA:"0x725f7a6eda7216f11f2c1ac6e382f05f947378e8",VITE_NFT721_IMPLEMENTATION_UNICHAIN:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT721_IMPLEMENTATION_UNICHAIN_MAINNET:"0x15433E7Ebdd06d56eD6FEC60132cB8DBceC42245",VITE_NFT721_IMPLEMENTATION_UNICHAIN_TESTNET:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT_FACTORY_MONAD_TESTNET:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02",VITE_NFT_FACTORY_MOONWALKER:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",VITE_NFT_FACTORY_POLYGON:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",VITE_NFT_FACTORY_SEPOLIA:"0xfb9c2ebfacb84cc5843a4c01fd8cf3d1a9e3423d",VITE_NFT_FACTORY_UNICHAIN:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_NFT_FACTORY_UNICHAIN_MAINNET:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",VITE_NFT_FACTORY_UNICHAIN_TESTNET:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_PAYSTACK_PUBLIC_KEY:"pk_live_6c4619b6e6f7db500ee33c96d03c3db3adf197ae",VITE_PINATA_JWT:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M",VITE_POLYGONSCAN_API_KEY:"264JGIIIMW61H1F8J33BZFQWJNSGPDR9S9",VITE_ROUTER_ADDRESS_11155111:"0xeE567Fe1712Faf6149d80dA1E6934E354124CfE3",VITE_ROUTER_ADDRESS_1301:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_ROUTER_ADDRESS_137:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",VITE_ROUTER_ADDRESS_UNICHAIN:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_SUPPORTED_CHAINS:"11155111,137,1301,1828369849,10143",VITE_UNICHAIN_EXPLORER_API_KEY:"F2STYRDMGGEY6NY3H2FXCYKBD971WSX5DX",VITE_UNICHAIN_EXPLORER_URL:"https://unichain-sepolia.blockscout.com",VITE_UNICHAIN_RPC_URL:"https://sepolia.unichain.org",VITE_UNICHAIN_USDC_ADDRESS:"0x31d0220469e10c4E71834a79b1f276d740d3768F",VITE_UNICHAIN_USDT_ADDRESS:"0x70262e266E50603AcFc5D58997eF73e5a8775844",VITE_USDC_ADDRESS_POLYGON:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",VITE_USDC_ADDRESS_SEPOLIA:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",VITE_USDT_ADDRESS_POLYGON:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",VITE_USDT_ADDRESS_SEPOLIA:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0",VITE_WALLET_CONNECT_PROJECT_ID:"3f6cfb67c10d3242035f4bd4580e9bf9"},_n={1301:"Unichain Sepolia",137:"Polygon Mainnet"},dn={1301:{USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844",USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F"},137:{USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359"}},o0=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!0,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OrderCreated",type:"event"},{inputs:[{internalType:"address",name:"_seller",type:"address"},{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"createOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"requestWithdrawal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_seller",type:"address"},{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"approveWithdrawal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_orderId",type:"uint256"},{internalType:"address",name:"_buyer",type:"address"},{internalType:"address",name:"_seller",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"processRefund",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"sellerBalances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"orders",outputs:[{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"address",name:"buyer",type:"address"},{internalType:"address",name:"seller",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bool",name:"isCompleted",type:"bool"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isRefunded",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdrawPlatformFees",outputs:[],stateMutability:"nonpayable",type:"function"}],l0=a=>{const t=`VITE_MERCH_PLATFORM_ADDRESS_${a}`,s=i0[t];return s||(console.warn(`No contract address found for chain ${a}. Make sure ${t} is set in your .env file.`),null)},Bs=(a,t)=>{try{const s=l0(t);if(!s)return null;if(!gt(s))return console.warn(`Invalid contract address for chain ${t}: ${s}`),null;const n=new J(s,o0,a);return Object.defineProperty(n,"address",{value:s,writable:!1,configurable:!1}),n}catch(s){return console.warn(`Error creating contract instance for chain ${t}:`,s),null}},Un=(a,t,s)=>{const n=dn[t]?.[s];if(!n)throw new Error(`Unsupported token ${s} on chain ${t}`);if(!gt(n))throw new Error(`Invalid token address: ${n}`);const r=["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function balanceOf(address account) external view returns (uint256)"],l=new J(n,r,a);return Object.defineProperty(l,"address",{value:n,writable:!1,configurable:!1}),l},d0=(a,t=6)=>Ie(a.toString(),t),Pa="0x5828D525fe00902AE22f2270Ac714616651894fF";function To(){const[a,t]=i.useState({totalRevenue:0,totalRefunds:0,totalOrders:0,averageOrderValue:0,uniqueCustomers:0,tokenSales:{USDT:{total:0,refunds:0},USDC:{total:0,refunds:0}}}),[s,n]=i.useState([]),[r,l]=i.useState("all"),[d,o]=i.useState(!0),{theme:m}=Se(),[c,u]=i.useState(!1),[x,f]=i.useState("");Ve();const[N,v]=i.useState(""),[C,E]=i.useState("all");i.useEffect(()=>{(async()=>{try{const j=await ss();if(j){const T=await j.request({method:"eth_accounts"});T.length>0&&T[0].toLowerCase()===Pa.toLowerCase()&&(f(T[0]),u(!0))}}catch(j){console.error("Error checking wallet connection:",j)}finally{o(!1)}})()},[]),i.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",g=>{g.length===0||g[0].toLowerCase()!==Pa.toLowerCase()?(u(!1),f("")):(f(g[0]),u(!0))})},[]),i.useEffect(()=>{c&&x.toLowerCase()===Pa.toLowerCase()&&w()},[c,x]);const w=async()=>{try{o(!0);const g=Te(be(ae,"orders"),Ue("createdAt","desc")),T=(await Ae(g)).docs.map(F=>({id:F.id,...F.data(),createdAt:F.data().createdAt?.toDate()||new Date,flag:F.data().flag||null,shippingAddress:F.data().shippingAddress||{}})),b={};T.forEach(F=>{F.sellerId&&!b[F.sellerId]&&(b[F.sellerId]={id:F.sellerId,name:F.sellerName||"Unknown Seller"})});const $=T.filter(F=>F.status!=="cancelled"),L=$.filter(F=>F.status==="shipped"||F.status==="processing"||F.status==="completed"||F.status==="delivered"),S=$.filter(F=>F.status==="refunded"),A=L.reduce((F,U)=>F+(Number(U.total)||0),0),h=S.reduce((F,U)=>F+(Number(U.total)||0)*.95,0),I={USDT:{total:0,refunds:0,net:0},USDC:{total:0,refunds:0,net:0}};L.forEach(F=>{const U=F.paymentMethod?.token||"USDT",V=Number(F.total)||0;I[U]&&(I[U].total+=V,I[U].net=I[U].total)}),S.forEach(F=>{const U=F.paymentMethod?.token||"USDT",P=(Number(F.total)||0)*.95;I[U]&&(I[U].refunds+=P)}),t({totalRevenue:Math.max(0,A),totalRefunds:h,totalOrders:L.length,averageOrderValue:L.length?A/L.length:0,uniqueCustomers:new Set(L.map(F=>F.buyerId)).size,tokenSales:I,recentOrders:await Promise.all(T.slice(0,10).map(async F=>{const U=await De(ge(ae,"sellers",F.sellerId)),V=U.exists()?U.data():{};return{id:F.id||"",buyerInfo:F.buyerInfo||{},total:Number(F.total)||0,status:F.status||"unknown",createdAt:F.createdAt||new Date,sellerId:F.sellerId||"",sellerName:F.sellerName||"Unknown Seller",sellerFlag:V.country?.flag||null,flag:F.flag||null,shippingAddress:F.shippingAddress||{}}}))});const O=await Promise.all(Object.values(b).map(async F=>{const V=(await De(ge(ae,"sellers",F.id))).data()||{},P=V.country?.flag||null,B=V.country||null,k=Number(V.balance?.available||0),D=$.filter(te=>te.sellerId===F.id),_=D.filter(te=>te.status!=="refunded"),H=D.filter(te=>te.status==="refunded"),X=D.filter(te=>(te.status==="shipped"||te.status==="processing"||te.status==="completed")&&te.status!=="refunded").reduce((te,Y)=>te+(Number(Y.total)||0),0),z=H.reduce((te,Y)=>te+(Number(Y.total)||0)*.95,0),se=te=>{const Y=new Date,W=new Date(Y);return W.setHours(0,0,0,0),W.setDate(W.getDate()-te),D.filter(Q=>{if(!Q.createdAt)return!1;const G=new Date(Q.createdAt);G.setHours(0,0,0,0);const q=G>=W,Z=(Q.status==="shipped"||Q.status==="processing"||Q.status==="completed"||Q.status==="delivered")&&Q.status!=="refunded";return q&&Z}).reduce((Q,G)=>Q+(Number(G.total)||0),0)},ee=k;return{id:F.id,name:F.name,flag:P,country:B,totalOrders:_.length||0,totalBalance:X||0,totalRefunds:z||0,sales:{"1d":se(1)||0,all:D.filter(te=>(te.status==="shipped"||te.status==="processing"||te.status==="completed")&&te.status!=="refunded").reduce((te,Y)=>te+(Number(Y.total)||0),0)},availableToWithdraw:ee}}));n(O)}catch(g){console.error("Error fetching sales data:",g),M.error("Failed to load sales data")}finally{o(!1)}},p=()=>{const g=a.recentOrders?.map(j=>j.sellerName)||[];return["all",...new Set(g)]},y=a.recentOrders?.filter(g=>{const j=g.id.toLowerCase().includes(N.toLowerCase())||(g.buyerInfo?.name||"").toLowerCase().includes(N.toLowerCase()),T=C==="all"||g.sellerName===C;return j&&T});return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):!c||x.toLowerCase()!==Pa.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(ia,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:`text-2xl font-bold ${m==="dark"?"text-white":"text-gray-800"} mb-2`,children:"Access Denied"}),e.jsx("p",{className:`${m==="dark"?"text-gray-300":"text-gray-600"} text-center mb-6`,children:"Please connect your admin wallet to access the sales analytics."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Sales Analytics"}),e.jsxs("button",{onClick:w,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#FF1B6B]/90 flex items-center gap-2 transition-colors",children:[e.jsx(Ri,{className:"w-4 h-4"}),"Refresh Data"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",a.totalRevenue.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a.totalOrders," orders"]}),a.totalRefunds>0&&e.jsxs("p",{className:"text-xs text-red-500",children:["Refunds: $",a.totalRefunds.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(es,{className:"text-3xl text-[#FF1B6B]"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.totalOrders}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active orders"})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(Zr,{className:"text-3xl text-[#FF1B6B]"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average Order Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",a.averageOrderValue.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Per order average"})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(Ca,{className:"text-3xl text-[#FF1B6B]"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unique Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.uniqueCustomers}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total buyers"})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(er,{className:"text-3xl text-[#FF1B6B]"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Orders"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("select",{value:C,onChange:g=>E(g.target.value),className:"px-3 py-2 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-[#FF1B6B]",children:p().map(g=>e.jsx("option",{value:g,children:g==="all"?"All Stores":g},g))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by Order ID or Customer",value:N,onChange:g=>v(g.target.value),className:"pl-10 pr-4 py-2 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-[#FF1B6B] w-64"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Seller"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:y?.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:g.id.slice(-6)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:g.sellerName}),g.sellerFlag&&e.jsx("img",{src:g.sellerFlag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:g.buyerInfo?.name||"Anonymous"}),g.flag&&e.jsx("img",{src:g.flag,alt:typeof g.shippingAddress?.country=="object"?g.shippingAddress?.country.name:g.shippingAddress?.country,className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",g.total?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g.status==="completed"||g.status==="shipped"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":g.status==="processing"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":g.status==="cancelled"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300":g.status==="refunded"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300":g.status==="delivered"?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"}`,children:g.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:new Date(g.createdAt).toLocaleString()})]},g.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Sales Overview"}),e.jsx("div",{className:"flex space-x-2",children:["1d","all"].map(g=>e.jsx("button",{onClick:()=>l(g),className:`px-3 py-1 rounded-lg text-sm ${r===g?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:g==="1d"?"24h":"All Time"},g))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Token Sales Summary"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4",children:Object.entries(a.tokenSales||{}).map(([g,j])=>{const T={net:j?.net||0,refunds:j?.refunds||0};return e.jsxs("div",{className:"flex justify-between items-center mb-2 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g==="USDC"?e.jsx("img",{src:"/logos/usdc.png",alt:"USDC",className:"w-5 h-5"}):e.jsx("img",{src:"/logos/usdt.png",alt:"USDT",className:"w-5 h-5"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:g})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",T.net.toFixed(2)]}),T.refunds>0&&e.jsxs("p",{className:"text-xs text-red-500",children:["Refunds: $",T.refunds.toFixed(2)]})]})]},g)})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Seller"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"24h"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"All Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Available to Withdraw"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:s.map(g=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g.name}),g.country?.flag&&e.jsx("img",{src:g.country.flag,alt:g.country.name||"Country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[g.totalOrders," orders"]})]})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",g.sales["1d"].toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",g.sales.all.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-[#FF1B6B]",children:["$",Number(g.availableToWithdraw||0).toFixed(2)]})})]},g.id))})]})})]})]})}const Qt=()=>e.jsxs("svg",{className:"w-7 h-7",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L17.196 4.804L20 10L17.196 15.196L12 18L6.804 15.196L4 10L6.804 4.804L12 2Z",fill:"#FF1B6B",filter:"drop-shadow(0px 2px 3px rgba(0, 0, 0, 0.15))"}),e.jsx("path",{d:"M12 4L15.696 6.104L17.8 9.8L15.696 13.496L12 15.6L8.304 13.496L6.2 9.8L8.304 6.104L12 4Z",fill:"#FF1B6B",className:"brightness-110"}),e.jsx("path",{d:"M8.5 10L11 12.5L15.5 8",stroke:"white",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",className:"drop-shadow-sm"})]}),c0=()=>e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-3"}),e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((a,t)=>e.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"},t)),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-16 ml-2"})]})]}),e.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded-full"})]})}),Wn=()=>e.jsxs(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"border-b border-gray-100 dark:border-gray-700 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-24"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"})]}),e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((a,t)=>e.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"},t))})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-32"})]})]}),Co=()=>{const[a,t]=i.useState([]),[s,n]=i.useState(!0),[r,l]=i.useState(""),[d,o]=i.useState(null),[m,c]=i.useState([]),[u,x]=i.useState(""),[f,N]=i.useState(!1),[v,C]=i.useState(null),[E,w]=i.useState("pending"),[p,y]=i.useState(!1);i.useEffect(()=>{j(),o(null),c([])},[E]);const g=S=>S?S.seconds?new Date(S.seconds*1e3).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):(S instanceof Date?S:new Date(S)).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",j=async()=>{try{n(!0);const S=be(ae,"sellers"),A=Te(S,fe("verificationStatus","==",E),Ue("storeName","asc")),h=await Ae(A),I=h.docs.map(B=>B.id),O=be(ae,"reviews"),F=Te(O,fe("sellerId","in",I.length?I:["dummy"]),Ue("createdAt","desc")),U=await Ae(F),V={};U.docs.forEach(B=>{const k={id:B.id,...B.data()};V[k.sellerId]||(V[k.sellerId]=[]),V[k.sellerId].push(k)});const P=h.docs.map(B=>{const k={id:B.id,...B.data()},D=V[B.id]||[],_=D.reduce((X,z)=>X+z.rating,0),H=D.length>0?_/D.length:0;return{...k,reviewCount:D.length,averageRating:H,reviews:D}});t(P)}catch(S){console.error("Error fetching sellers:",S),Le.error("Failed to load sellers")}finally{n(!1)}},T=async S=>{try{y(!0);const A=a.find(U=>U.id===S);if(A&&A.reviews){c(A.reviews);return}const h=be(ae,"reviews"),I=Te(h,fe("sellerId","==",S),Ue("createdAt","desc")),F=(await Ae(I)).docs.map(U=>({id:U.id,...U.data()}));c(F)}catch(A){console.error("Error fetching reviews:",A),Le.error("Failed to load reviews")}finally{y(!1)}},b=async(S,A)=>{try{if(A)await $e(ge(ae,"sellers",S),{verificationStatus:"approved",verificationDate:new Date().toISOString(),rejectedAt:null,rejectionReason:null});else{C(S),N(!0);return}t(a.map(h=>h.id===S?{...h,verificationStatus:A?"approved":"rejected",rejectionReason:A?null:u}:h)),Le.success(`Store ${A?"verified":"rejected"} successfully`)}catch(h){console.error("Error updating store verification:",h),Le.error("Failed to update store verification")}},$=async()=>{if(!v||!u.trim()){Le.error("Please provide a reason for rejection");return}try{await $e(ge(ae,"sellers",v),{verificationStatus:"rejected",verificationDate:new Date().toISOString(),rejectedAt:new Date,rejectionReason:u.trim(),rejectionCooldown:72}),t(a.map(S=>S.id===v?{...S,verificationStatus:"rejected",rejectionReason:u.trim()}:S)),N(!1),x(""),C(null),Le.success("Store verification rejected")}catch(S){console.error("Error rejecting store:",S),Le.error("Failed to reject store verification")}},L=a.filter(S=>S.storeName?.toLowerCase().includes(r.toLowerCase())||S.email?.toLowerCase().includes(r.toLowerCase()));return s?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64"}),e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:["Pending","Verified","Rejected"].map(S=>e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"w-24 h-9 bg-gray-200 dark:bg-gray-700 rounded-md mx-1"},S))})]}),e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"w-48 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-4"}),e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((S,A)=>e.jsx(c0,{},A))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((S,A)=>e.jsx(Wn,{},A))})]})]})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:E==="pending"?"Store Verification Requests":E==="approved"?"Verified Stores":"Rejected Stores"}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>w("pending"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${E==="pending"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Pending"}),e.jsx("button",{onClick:()=>w("approved"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${E==="approved"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Verified"}),e.jsx("button",{onClick:()=>w("rejected"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${E==="rejected"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Rejected"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search stores...",value:r,onChange:S=>l(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(pl,{className:"absolute left-3 top-3 text-gray-400 dark:text-gray-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:E==="pending"?"Pending Requests":E==="approved"?"Verified Stores":"Rejected Stores"}),e.jsxs("div",{className:"space-y-4",children:[L.map(S=>e.jsx("div",{onClick:()=>{o(S),T(S.id)},className:`p-4 rounded-lg border cursor-pointer transition-colors ${d?.id===S.id?"border-[#FF1B6B] bg-pink-50 dark:bg-pink-900/20":"border-gray-200 dark:border-gray-700 hover:border-[#FF1B6B] hover:bg-pink-50 dark:hover:bg-pink-900/20"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:S.storeName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:S.email}),E==="approved"&&S.verificationDate&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Verified on ",g(S.verificationDate)]}),E==="rejected"&&S.rejectedAt&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Rejected on ",g(S.rejectedAt)]}),S.rejectionReason&&e.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 mt-0.5",children:["Reason: ",S.rejectionReason]})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(A=>e.jsx(Dt,{className:`w-4 h-4 ${A<=S.averageRating?"text-[#FF1B6B]":"text-gray-300 dark:text-gray-600"}`},A))}),e.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:["(",S.reviewCount," reviews)"]})]})]}),E==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:A=>{A.stopPropagation(),b(S.id,!0)},className:"hover:opacity-80",children:e.jsx(Qt,{})}),e.jsx("button",{onClick:A=>{A.stopPropagation(),b(S.id,!1)},className:"p-1.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(Sa,{className:"w-5 h-5"})})]}),E==="approved"&&e.jsx(Qt,{}),E==="rejected"&&e.jsx(Sa,{className:"w-6 h-6 text-red-500 dark:text-red-400"})]})},S.id)),L.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:E==="pending"?"No verification requests found":"No verified stores found"})]})]}),d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:d.storeName}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(S=>e.jsx(Dt,{className:`w-5 h-5 ${S<=d.averageRating?"text-[#FF1B6B]":"text-gray-300 dark:text-gray-600"}`},S))}),e.jsx("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:d.averageRating.toFixed(1)}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",d.reviewCount," reviews)"]})]})]}),p?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((S,A)=>e.jsx(Wn,{},A))}):e.jsxs("div",{className:"space-y-4",children:[m.map(S=>e.jsxs("div",{className:"border-b border-gray-100 dark:border-gray-700 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:S.userName}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(S.createdAt?.seconds*1e3).toLocaleDateString()})]}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(A=>e.jsx(Dt,{className:`w-4 h-4 ${A<=S.rating?"text-[#FF1B6B]":"text-gray-300 dark:text-gray-600"}`},A))})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:S.review}),S.image&&e.jsx("img",{src:S.image,alt:"Review",className:"mt-2 rounded-lg w-24 h-24 object-cover cursor-pointer",onClick:()=>window.open(S.image,"_blank")}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("img",{src:S.productImage,alt:S.productName,className:"w-10 h-10 rounded object-cover"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:S.productName})]})]},S.id)),m.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reviews yet"})]})]})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Reject Verification Request"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rejection Reason"}),e.jsx("textarea",{value:u,onChange:S=>x(S.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"4",placeholder:"Please provide a reason for rejection..."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{N(!1),x(""),C(null)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!u.trim(),children:"Reject"})]})]})})]})};function m0({onOpenModal:a,onOpenNFTModal:t}){const[s,n]=i.useState(!1),[r,l]=i.useState(!1),d=fs(),o=x=>d.pathname===x,m=[{icon:Jr,label:"Create Token",action:a,primary:!0},{icon:fl,label:"Create NFT",action:t},{type:"divider"},{icon:yl,label:"Dashboard",to:"/",isRouterLink:!0},{icon:bl,label:"Collections",to:"/collections",isRouterLink:!0,noDefaultHighlight:!0},{icon:wl,label:"Meme Factory",to:"/memefactory",isRouterLink:!0},{type:"divider"},{icon:vn,label:"Trading",to:"/trading",isRouterLink:!0},{icon:jl,label:"Bridge",to:"/bridge",isRouterLink:!0},{icon:Ds,label:"MerchStore",to:"/merch-store",isRouterLink:!0},{icon:vn,label:"Trending Tokens",to:"#",isRouterLink:!0,comingSoon:!0},{icon:vl,label:"Recent Tokens",to:"#",isRouterLink:!0,comingSoon:!0},{type:"divider"},{icon:Nl,label:"Account",to:"/account",isRouterLink:!0,noDefaultHighlight:!0},{icon:Kr,label:"History",to:"/history",isRouterLink:!0}],c=[{icon:Oi,href:"https://t.me/tokenfactorry",label:"Telegram"},{icon:_i,href:"https://x.com/TokenFac",label:"X (Twitter)"},{icon:Ui,href:"https://discord.com/users/chriswilder",label:"Discord"}],u=(x,f)=>{if(x.type==="divider")return e.jsx("div",{className:"my-2 border-b border-gray-200 dark:border-gray-800"},`divider-${f}`);const N=`w-full flex items-center gap-3 px-4 py-2.5 rounded-lg transition-all duration-200 relative group
      ${x.primary?"text-gray-800 dark:text-gray-200 hover:text-black dark:hover:text-black hover:bg-[#00ffbd] font-semibold":`text-gray-800 dark:text-gray-200 ${x.comingSoon?"cursor-default opacity-50":"hover:text-black dark:hover:text-black hover:bg-[#00ffbd]"} 
           ${x.isRouterLink&&o(x.to)&&!x.noDefaultHighlight?"text-[#00ffbd]":""}`}
      ${s?"justify-center":""}
    `;return x.isRouterLink?e.jsxs(Ge,{to:x.to,className:N,onClick:x.comingSoon?v=>v.preventDefault():void 0,children:[e.jsx(x.icon,{size:20,className:`flex-shrink-0 ${x.isRouterLink&&o(x.to)&&!x.noDefaultHighlight?"text-[#00ffbd]":""}`}),!s&&e.jsx("span",{className:"truncate",children:x.label}),x.comingSoon&&!s&&e.jsx("span",{className:"absolute right-0 top-1/2 -translate-y-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Coming Soon"})]},f):e.jsxs("button",{onClick:x.action||(()=>{}),className:N,children:[e.jsx(x.icon,{size:20,className:"flex-shrink-0"}),!s&&e.jsx("div",{className:"flex items-center justify-between w-full min-w-0 transition-opacity duration-200",children:e.jsx("span",{className:"truncate",children:x.label})})]},f)};return e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden transition-opacity duration-300",onClick:()=>l(!1)}),e.jsx("button",{onClick:()=>l(!r),className:`fixed top-8 -left-3 p-1.5 rounded-full bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 lg:hidden z-30 transition-all duration-300 ${r?"opacity-0 -translate-x-4":"opacity-100 translate-x-0"}`,children:e.jsx(jn,{size:12,className:`transform transition-transform duration-200 text-gray-600 dark:text-gray-400
            ${r?"":"rotate-180"}
          `})}),e.jsxs("aside",{className:`fixed top-0 left-0 h-full bg-white dark:bg-[#0d0e12] border-r border-gray-200 dark:border-gray-800 transition-all duration-300 z-20 flex flex-col
          ${s?"w-20":"w-64"} 
          lg:translate-x-0
          ${r?"translate-x-0":"-translate-x-full"}
        `,children:[e.jsxs("div",{className:"p-6 relative",children:[e.jsx("button",{onClick:()=>n(!s),className:"absolute -right-3 top-8 p-1.5 rounded-full bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 hidden lg:flex items-center justify-center hover:bg-gray-100 dark:hover:bg-[#2d2f36] transition-all duration-200 z-50",children:e.jsx(jn,{size:12,className:`transform transition-transform duration-200 text-gray-600 dark:text-gray-400
                ${s?"rotate-180":""}
              `})}),e.jsx("div",{className:"flex items-center mb-8",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/tf1.svg",alt:"Token Factory Logo",className:"w-10 h-10 text-[#00ffbd]"}),!s&&e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white transition-opacity duration-200",children:"Token Factory"})]})}),e.jsx("div",{className:"space-y-2",children:m.map((x,f)=>u(x,f))})]}),e.jsx("div",{className:`mt-auto p-6 transition-all duration-200 ${s?"flex flex-col items-center":""}`,children:e.jsx("div",{className:`flex gap-3 ${s?"flex-col":""}`,children:c.map((x,f)=>e.jsx("a",{href:x.href,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",title:x.label,children:e.jsx(x.icon,{size:20})},f))})})]})]})}function u0(){const{isLoading:a,chain:t,chains:s}=Ft(),{isConnected:n}=Oe(),[r,l]=i.useState(!1);return i.useEffect(()=>{const d=o=>{o.message?.includes("Internal JSON-RPC error")&&(l(!1),M.error("Network switch failed. Please try again."))};return window.ethereum&&window.ethereum.on("error",d),()=>{window.ethereum&&window.ethereum.removeListener("error",d)}},[]),i.useEffect(()=>{n&&t&&l(!1)},[t,n]),e.jsx("div",{className:"relative",style:{zIndex:99999},children:e.jsx(kc,{chainStatus:a||r?"loading":"icon",showBalance:!1,accountStatus:"address",onClick:()=>{!a&&!r&&l(!0)}})})}const Hn={bitcoin:"BTC",ethereum:"ETH",binancecoin:"BNB",ripple:"XRP",cardano:"ADA",solana:"SOL",polkadot:"DOT",dogecoin:"DOGE","avalanche-2":"AVAX",chainlink:"LINK",polygon:"POL",uniswap:"UNI",stellar:"XLM",cosmos:"ATOM","internet-computer":"ICP",filecoin:"FIL","ethereum-classic":"ETC",monero:"XMR","bitcoin-cash":"BCH",litecoin:"LTC"};function x0(){const[a,t]=i.useState([]),[s,n]=i.useState(!0);return i.useEffect(()=>{const r=async()=>{try{const d=await Wt.get("https://api.coingecko.com/api/v3/simple/price",{params:{ids:Object.keys(Hn).join(","),vs_currencies:"usd",include_24hr_change:!0}}),o=Object.entries(d.data).map(([m,c])=>({id:m,symbol:Hn[m],price:c.usd,change24h:c.usd_24h_change}));t(o),n(!1)}catch(d){console.error("Error fetching prices:",d),n(!1)}};r();const l=setInterval(r,3e4);return()=>clearInterval(l)},[]),s?null:e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"relative flex items-center",children:e.jsx("div",{className:"animate-ticker flex items-center gap-6 whitespace-nowrap",children:[...a,...a].map((r,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:r.symbol}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",r.price.toLocaleString(void 0,{maximumFractionDigits:2})]}),e.jsxs("span",{className:`text-xs ${r.change24h>=0?"text-green-500":"text-red-500"}`,children:[r.change24h.toFixed(2),"%"]})]},`${r.id}-${l}`))})})})}function g0(){const{isDarkMode:a,toggleTheme:t}=Se();return Oe(),e.jsxs("header",{className:"fixed top-0 right-0 lg:left-64 left-0 h-16 bg-white dark:bg-[#0d0e12] border-b border-gray-200 dark:border-gray-800 px-6 flex items-center justify-between z-10 transition-all duration-300",children:[e.jsx(x0,{}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u0,{}),e.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#1a1b1f] text-gray-600 dark:text-gray-300",children:a?e.jsx(kl,{size:20}):e.jsx(Tl,{size:20})})]})]})}const h0="hh-sol-artifact-1",p0="TokenFactory",f0="contracts/TokenFactory.sol",y0=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"chainId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newFee",type:"uint256"}],name:"FeeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"FeeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"polAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"liquidityAmount",type:"uint256"}],name:"LiquidityAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"polAmount",type:"uint256"}],name:"LiquidityAdditionFailed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"oldOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"address",name:"tokenAddress",type:"address"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"symbol",type:"string"},{indexed:!1,internalType:"uint8",name:"decimals",type:"uint8"},{indexed:!1,internalType:"uint256",name:"initialSupply",type:"uint256"},{indexed:!1,internalType:"string",name:"logoURI",type:"string"},{indexed:!1,internalType:"bool",name:"isMeme",type:"bool"}],name:"TokenCreated",type:"event"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"chainFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint256",name:"totalSupply",type:"uint256"},{internalType:"address",name:"marketingWallet",type:"address"},{internalType:"address",name:"treasuryAddress",type:"address"},{internalType:"address",name:"devAddress",type:"address"},{internalType:"address",name:"liquidityAddress",type:"address"},{internalType:"uint256",name:"burnFee",type:"uint256"},{internalType:"uint256",name:"treasuryFee",type:"uint256"},{internalType:"uint256",name:"devFee",type:"uint256"},{internalType:"uint256",name:"marketingFee",type:"uint256"},{internalType:"uint256",name:"liquidityFee",type:"uint256"},{internalType:"uint256",name:"buyFees",type:"uint256"},{internalType:"uint256",name:"sellFees",type:"uint256"},{internalType:"address",name:"router",type:"address"},{internalType:"string",name:"logoURI",type:"string"}],internalType:"struct TokenFactory.MemeTokenParams",name:"params",type:"tuple"}],name:"createMemeToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"uint8",name:"decimals",type:"uint8"},{internalType:"uint256",name:"initialSupply",type:"uint256"},{internalType:"string",name:"logoURI",type:"string"}],name:"createToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[],name:"defaultDex",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"dexConfigs",outputs:[{internalType:"address",name:"router",type:"address"},{internalType:"address",name:"factory",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"bool",name:"isActive",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"getChainFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"memeImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"uint256",name:"fee",type:"uint256"}],name:"setChainFee",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bool",name:"_paused",type:"bool"}],name:"setPaused",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"standardImplementation",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"tokenLogos",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"chainId",type:"uint256"},{internalType:"address",name:"router",type:"address"},{internalType:"address",name:"factory",type:"address"},{internalType:"string",name:"name",type:"string"},{internalType:"bool",name:"isActive",type:"bool"}],name:"updateDexConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"withdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],cn={_format:h0,contractName:p0,sourceName:f0,abi:y0},b0=5*1024*1024,w0=["image/jpeg","image/jpg","image/png","image/webp"],j0=a=>{if(!a||!(a instanceof File||a instanceof Blob))throw new Error("Invalid file object");let t=a.type;if(!t&&a.name)switch(a.name.split(".").pop()?.toLowerCase()){case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"webp":t="image/webp";break;default:throw new Error("Unsupported file type. Please use .jpg, .jpeg, .png, or .webp")}if(!t||!w0.includes(t.toLowerCase()))throw new Error("File must be .jpg, .jpeg, .png, or .webp");if(!a.size||a.size>b0)throw new Error("File size must be less than 5MB");if(a.size===0)throw new Error("File is empty")};async function v0(a){try{j0(a);const t=new FormData;t.append("file",a);const s=await fetch("https://api.pinata.cloud/pinning/pinFileToIPFS",{method:"POST",headers:{Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M"},body:t});if(!s.ok){const d=await s.json().catch(()=>({}));throw new Error(d.message||`Upload failed with status ${s.status}`)}const n=await s.json();if(!n.IpfsHash)throw new Error("No IPFS hash returned from Pinata");const r=`ipfs://${n.IpfsHash}`,l=`https://gateway.pinata.cloud/ipfs/${n.IpfsHash}`;return{ipfsUrl:r,httpUrl:l}}catch(t){throw console.error("Upload Error:",t),t.message.includes("401")?new Error("Invalid Pinata API key. Please check your configuration."):t.message.includes("413")?new Error("File size too large. Please use a smaller image."):t}}const Jt={ERC721:[{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"setTokenURI",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"uint256[]",name:"limits",type:"uint256[]"}],name:"setWhitelist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_paymentToken",type:"address"}],name:"setPaymentToken",outputs:[],stateMutability:"nonpayable",type:"function"},"error MaxSupplyExceeded()","error InsufficientPayment()","error MintingNotStarted()","error MaxPerWalletExceeded()","error InvalidMintAmount()"],ERC1155:[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"initialized",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"message",type:"string"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Debug",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!1,internalType:"string",name:"name",type:"string"},{indexed:!1,internalType:"string",name:"symbol",type:"string"},{indexed:!1,internalType:"string",name:"baseURI",type:"string"}],name:"Initialized",type:"event"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_paymentToken",type:"address"}],name:"setPaymentToken",outputs:[],stateMutability:"nonpayable",type:"function"}],ERC721Royalty:[{inputs:[{internalType:"uint256",name:"quantity",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"}],ERC1155Royalty:[{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"string",name:"_tokenURI",type:"string"}],name:"mint",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"mintedPerWallet",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"config",outputs:[{components:[{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"}],internalType:"struct ICollectionTypes.CollectionConfig",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"salePrice",type:"uint256"}],name:"royaltyInfo",outputs:[{internalType:"address",name:"receiver",type:"address"},{internalType:"uint256",name:"royaltyAmount",type:"uint256"}],stateMutability:"view",type:"function"}]},N0={apiKey:"AIzaSyDlfQMHiTf2vlpOdQA7gsiPK9PcITwBCc8",authDomain:"tokenfactory-bbe1a.firebaseapp.com",projectId:"tokenfactory-bbe1a",storageBucket:"tokenfactory-bbe1a.firebasestorage.app",messagingSenderId:"235589319121",appId:"1:235589319121:web:05d9cd3aeaed3d62d748f0",measurementId:"G-SJ14LLN724"},So=xo(N0);ho(So);const tt=go(So),Da=be(tt,"collections"),pr=be(tt,"tokenDeployments"),fr=be(tt,"mints"),qn=be(tt,"holders");be(tt,"minters");be(tt,"volume");be(tt,"tokenTransfers");be(tt,"pools");be(tt,"userPools");const k0=async a=>{try{const{artwork:t,...s}=a,n={...s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return(await et(Da,n)).id}catch(t){throw t}},mn=async a=>{try{const t=Te(Da,fe("symbol","==",a)),s=await Ae(t);if(!s.empty){const n=s.docs[0];return{id:n.id,...n.data()}}return null}catch(t){throw t}},Fo=async(a={})=>{try{let t=be(tt,"collections");const s=[];return a.network&&a.network!=="all"&&(a.network==="unichain-mainnet"?s.push(fe("chainId","==",130)):a.network==="unichain"?s.push(fe("chainId","==",1301)):s.push(fe("network","==",a.network))),a.type&&a.type!=="all"&&s.push(fe("type","==",a.type)),a.isRandomMint&&s.push(fe("isRandomMint","==",!0)),s.push(Ue("createdAt","desc")),t=Te(t,...s),(await Ae(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error in getAllCollections:",t),t}},T0=async(a,t)=>{try{const s=Te(Da,fe("symbol","==",a)),n=await Ae(s);if(!n.empty){const r=n.docs[0].ref;return await $e(r,{totalMinted:t,updatedAt:We()}),{...n.docs[0].data(),totalMinted:t}}}catch(s){throw s}},C0=(a,t)=>{const s=Te(Da,fe("symbol","==",a));return _t(s,n=>{n.empty||t(n.docs[0].data())})},S0=async(a,t)=>{try{if(!a.chainId||!a.chainName)throw new Error("chainId and chainName are required for token deployment");await et(pr,{...a,creatorAddress:t.toLowerCase(),createdAt:Date.now(),type:"token",chainId:a.chainId,chainName:a.chainName})}catch(s){throw s}},F0=async a=>{try{const t=Te(pr,fe("creatorAddress","==",a.toLowerCase()));return(await Ae(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,l)=>l.createdAt-r.createdAt)}catch(t){throw t}},Eo=async a=>{try{const t=Te(Da,fe("creatorAddress","==",a.toLowerCase()));return(await Ae(t)).docs.map(r=>({id:r.id,...r.data()})).sort((r,l)=>l.createdAt-r.createdAt)}catch(t){throw t}},E0=async a=>{try{const t=Te(fr,fe("collectionAddress","==",a),Ue("timestamp","desc"),Ht(50));return(await Ae(t)).docs.map(n=>({id:n.id,...n.data(),timestamp:n.data().timestamp?.toDate()}))}catch{return[]}},A0=async a=>{try{const{metadataUrl:t,...s}=a,n={collectionAddress:s.collectionAddress||"",minterAddress:s.minterAddress?s.minterAddress.toLowerCase():"",tokenId:String(s.tokenId||"0"),quantity:String(s.quantity||"1"),hash:String(s.hash||""),image:String(s.image||""),value:String(s.value||"0"),type:String(s.type||"ERC1155"),name:s.name||"",symbol:s.symbol||"",artworkType:s.artworkType||"image",network:s.network||"sepolia",mintPrice:s.mintPrice||"0",paymentToken:s.paymentToken||null,timestamp:We()};if(!n.collectionAddress||!n.minterAddress)throw new Error("Missing required fields in mint data");const r=await et(fr,n),l=Te(qn,fe("collectionAddress","==",n.collectionAddress),fe("holderAddress","==",n.minterAddress)),d=await Ae(l),o=Number(n.quantity);if(d.empty)await et(qn,{collectionAddress:n.collectionAddress,holderAddress:n.minterAddress,quantity:o,lastUpdated:We()});else{const m=d.docs[0],c=Number(m.data().quantity)||0;await $e(m.ref,{quantity:c+o,lastUpdated:We()})}return r.id}catch(t){throw t}},at=async a=>{try{const t=Te(pr,fe("address","==",a)),s=await Ae(t);return s.empty?null:s.docs[0].data()}catch{return null}},I0=async a=>{try{return await at(a)}catch{return null}},B0=async a=>{try{const t=Te(be(tt,"mints"),fe("minterAddress","==",a.toLowerCase())),n=(await Ae(t)).docs.map(m=>({id:m.id,...m.data(),mintedAt:m.data().timestamp?.toDate()||new Date})),r=await Ae(be(tt,"collections")),l=new Map;r.docs.forEach(m=>{const c=m.data();c.contractAddress&&l.set(c.contractAddress.toLowerCase(),c)});const d=[],o=new Set;for(const m of n){const c=l.get(m.collectionAddress?.toLowerCase());if(c||m.type==="ERC1155"){const u={...m,...c||{},tokenId:m.tokenId||1,name:m.name||c?.name||"Unknown Collection",collectionName:c?.name||m.name,type:m.type||c?.type||"ERC721",symbol:c?.symbol||m.symbol,artworkType:c?.artworkType||m.artworkType||"image",network:c?.network||m.network||"sepolia",value:m.value||c?.mintPrice||"0",paymentToken:m.paymentToken||c?.paymentToken||null},x=`${u.collectionAddress}-${u.tokenId}`;if(!o.has(x))if(o.add(x),m.type==="ERC1155"&&m.balance>1)for(let f=0;f<m.balance;f++)d.push({...u,balance:1,uniqueId:`${x}-${f}`});else d.push({...u,balance:m.balance||1,uniqueId:x})}}return d}catch{return[]}},Wr=async()=>{try{const a=Te(pr,fe("type","==","token"),Ue("createdAt","desc"));return(await Ae(a)).docs.map(s=>({id:s.id,...s.data()}))}catch{return[]}},Ao=i.createContext();function D0({children:a}){const{address:t}=Oe(),[s,n]=i.useState([]),[r,l]=i.useState([]);i.useEffect(()=>{(async()=>{try{const c=await Wr();if(n(c),t){const x=(await Eo(t)).map(f=>({...f,type:"nft",logo:f.previewUrl,logoIpfs:f.imageIpfsUrl,totalSupply:f.maxSupply,timestamp:f.createdAt,chainName:f.network==="polygon"?"Polygon":f.network==="monad-testnet"?"Monad Testnet":f.network==="unichain-mainnet"||f.chainId===130?"Unichain Mainnet":f.network==="sepolia"?"Sepolia":f.network}));l(x)}else l([])}catch(c){console.error("Error loading deployments:",c),n([]),l([])}})()},[t]);const d=async m=>{if(t)try{await S0(m,t);const c=await Wr();n(c)}catch(c){throw c}},o=[...s,...r].sort((m,c)=>{const u=m.timestamp||m.createdAt;return(c.timestamp||c.createdAt)-u}).slice(0,10);return e.jsx(Ao.Provider,{value:{deployments:o,addDeployment:d},children:a})}const un=()=>{const a=i.useContext(Ao);if(!a)throw new Error("useDeployments must be used within a DeploymentsProvider");return a},Io="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M",Bo="https://api.pinata.cloud/pinning",M0="https://ipfs.io/ipfs/";async function P0(a){const t=new FormData;return t.append("file",a),`ipfs://${(await Wt.post(`${Bo}/pinFileToIPFS`,t,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${Io}`},maxBodyLength:1/0})).data.IpfsHash}`}async function $0(a){const t={...a};return`ipfs://${(await Wt.post(`${Bo}/pinJSONToIPFS`,t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${Io}`}})).data.IpfsHash}`}function wt(a){return a?a.startsWith("http")?a:a.replace("ipfs://",M0):""}const sa=be(tt,"tokenTransfers"),L0=["event Transfer(address indexed from, address indexed to, uint256 value)"],zn=new Map,$a=new Set,R0=async(a,t)=>{try{if(zn.has(a))return;const s=new J(a,L0,t),n=await t.getBlockNumber(),l=(await t.getNetwork()).chainId,d=s.filters.Transfer(),o=Math.max(0,n-1e4),m=await s.queryFilter(d,o,n);for(const u of m){const x=`${u.transactionHash}-${u.args[0]}-${u.args[1]}-${u.args[2]}`;if($a.has(x))continue;const f=await t.getBlock(u.blockNumber),N={tokenAddress:a,fromAddress:u.args[0].toLowerCase(),toAddress:u.args[1].toLowerCase(),amount:u.args[2].toString(),transactionHash:u.transactionHash,blockNumber:u.blockNumber,timestamp:f.timestamp*1e3,chainId:Number(l)},v=Te(sa,fe("transactionHash","==",N.transactionHash),fe("fromAddress","==",N.fromAddress),fe("toAddress","==",N.toAddress));(await Ae(v)).empty&&await et(sa,N),$a.add(x)}const c=s.on("Transfer",async(u,x,f,N)=>{const v=`${N.transactionHash}-${u}-${x}-${f}`;if($a.has(v))return;const C=await t.getBlock(N.blockNumber),E={tokenAddress:a,fromAddress:u.toLowerCase(),toAddress:x.toLowerCase(),amount:f.toString(),transactionHash:N.transactionHash,blockNumber:N.blockNumber,timestamp:C.timestamp*1e3,chainId:Number(l)},w=Te(sa,fe("transactionHash","==",E.transactionHash),fe("fromAddress","==",E.fromAddress),fe("toAddress","==",E.toAddress));(await Ae(w)).empty&&await et(sa,E),$a.add(v)});zn.set(a,c)}catch(s){throw s}},O0=async a=>{try{const t=Te(sa,fe("fromAddress","==",a.toLowerCase()),Ue("timestamp","desc")),s=Te(sa,fe("toAddress","==",a.toLowerCase()),Ue("timestamp","desc")),[n,r]=await Promise.all([Ae(t),Ae(s)]),l=n.docs.map(m=>{const c=m.data();return{id:m.id,...c,type:"sent",timestamp:new Date(c.timestamp)}}),d=r.docs.map(m=>{const c=m.data();return{id:m.id,...c,type:"received",timestamp:new Date(c.timestamp)}});return[...l,...d].sort((m,c)=>c.timestamp.getTime()-m.timestamp.getTime())}catch{return[]}},_0=async a=>{try{const t=Te(be(tt,"nftTransfers"),fe("fromAddress","==",a.toLowerCase()),Ue("timestamp","desc")),s=Te(be(tt,"nftTransfers"),fe("toAddress","==",a.toLowerCase()),Ue("timestamp","desc")),[n,r]=await Promise.all([Ae(t),Ae(s)]),l=n.docs.map(m=>{const c=m.data();return{id:m.id,...c,type:"sent",timestamp:new Date(c.timestamp)}}),d=r.docs.map(m=>{const c=m.data();return{id:m.id,...c,type:"received",timestamp:new Date(c.timestamp)}});return[...l,...d].sort((m,c)=>c.timestamp.getTime()-m.timestamp.getTime())}catch{return[]}},Do=document.createElement("style");Do.textContent=`
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-3px);
    }
  }
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-2px);
    }
    75% {
      transform: translateX(2px);
    }
  }
`;document.head.appendChild(Do);const ya={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingLogo:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),CreatingToken:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},Ke={SEPOLIA:11155111,POLYGON:137,UNICHAIN_MAINNET:130,UNICHAIN:1301,MOONWALKER:1828369849,MONAD_TESTNET:10143},U0={[Ke.SEPOLIA]:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",[Ke.POLYGON]:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",[Ke.UNICHAIN_MAINNET]:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",[Ke.UNICHAIN]:"0x08a58b1628Fb449635078355Be83e181EFBe3948",[Ke.MOONWALKER]:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",[Ke.MONAD_TESTNET]:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426"},Nr={[Ke.SEPOLIA]:"0.01",[Ke.POLYGON]:"20",[Ke.UNICHAIN_MAINNET]:"0.01",[Ke.UNICHAIN]:"0.01",[Ke.MOONWALKER]:"369",[Ke.MONAD_TESTNET]:"0.01"},W0={[Ke.SEPOLIA]:"ETH",[Ke.POLYGON]:"POL",[Ke.UNICHAIN_MAINNET]:"ETH",[Ke.UNICHAIN]:"ETH",[Ke.MOONWALKER]:"ZERO",[Ke.MONAD_TESTNET]:"MON"},H0=({isOpen:a,onClose:t,currentStep:s,tokenName:n,error:r,deployedAddress:l})=>{const d=[{key:"preparing",label:"Preparing Transaction",icon:ya.Preparing},{key:"uploading",label:"Uploading Logo",icon:ya.UploadingLogo},{key:"creating",label:"Creating Token",icon:ya.CreatingToken},{key:"completed",label:"Token Created Successfully",icon:ya.Completed}],o=d.findIndex(u=>u.key===s),m=u=>u?.includes("user rejected action")?"Transaction was rejected. Please try again.":u?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":u?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred",c=async u=>{try{await navigator.clipboard.writeText(u),Le.success("Address copied to clipboard!")}catch{Le.error("Failed to copy address")}};return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-[99999]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm z-[99999]"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-[99999]",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[r?"Error Creating Token":"Creating Token",n&&!r&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:n})]}),e.jsx("div",{className:"space-y-4",children:d.map((u,x)=>{const f=u.icon,N=x===o,v=!r&&x<o,C=r&&x===o;return e.jsxs("div",{className:Rt("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":N&&!C,"text-[#00ffbd]":v,"bg-red-500/10 text-red-500":C,"text-gray-400":!N&&!v&&!C}),children:[e.jsx(f,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.label}),N&&u.key==="creating"&&!r&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Creating token ",n]})]})]},u.key)})}),r&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ya.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#00ffbd] font-medium text-lg",children:"Token created successfully! 🎉"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Your token has been deployed and is ready for use"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Token Contract Address"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("code",{className:"text-sm text-gray-800 dark:text-gray-200 flex-1 break-all",children:l}),e.jsx("button",{onClick:()=>c(l),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md transition-colors",title:"Copy address",children:e.jsx(ys,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ℹ️ Copy this address to import your token in your wallet"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Next Steps"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Import Token"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add the token to your wallet using the contract address above"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Add Liquidity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Provide liquidity to enable trading of your token"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Start Trading"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Use TokenFactory Swap to trade your token"})]})]})]})]})]})]})})})})]})})},q0=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[...Array(9)].map((o,m)=>e.jsx("button",{onMouseEnter:()=>d(m+1),onMouseLeave:()=>d(0),onClick:()=>{r(m+1),s(m+1),t()},className:"focus:outline-none",children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${m+1<=(l||n)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},m))})]})})})})]})})};function z0({isOpen:a,onClose:t}){const{account:s}=n0(),[n,r]=i.useState(null),[l,d]=i.useState(null),[o,m]=i.useState({name:"",symbol:"",totalSupply:"",description:"",logo:null}),[c,u]=i.useState(null),{addDeployment:x}=un(),[f,N]=i.useState(!1),[v,C]=i.useState(null),[E,w]=i.useState(null),[p,y]=i.useState(!1),[g,j]=i.useState(!1),[T,b]=i.useState({width:window.innerWidth,height:window.innerHeight});i.useEffect(()=>{(async()=>{if(window.ethereum){const F=await window.ethereum.request({method:"eth_chainId"});r(parseInt(F,16))}})(),window.ethereum?.on("chainChanged",F=>{r(parseInt(F,16))})},[]);const $=O=>{m({...o,[O.target.name]:O.target.value})},L=O=>{const F=O.target.files[0];F&&(m({...o,logo:F}),u(URL.createObjectURL(F)))},S=()=>U0[n],A=()=>{const O=Nr[n],F=W0[n]||"ETH";return`${O} ${F}`},h=async(O,F,U)=>{try{const V=P=>{switch(P){case 137:return"Polygon";case 11155111:return"Sepolia";case 130:return"Unichain Mainnet";case 1301:return"Unichain Testnet";case 1828369849:return"Moonwalker";case 10143:return"Monad Testnet";default:return"Unknown"}};O&&d(O);try{const P=await getNetwork().then(k=>k.chainId),B={address:O,name:o.name,symbol:o.symbol,decimals:18,totalSupply:o.totalSupply,logo:U?.logo,logoIpfs:U?.logoIpfs,timestamp:Date.now(),chainId:P,chainName:V(P),type:"token"};await x(B)}catch(P){console.warn("Error saving deployment:",P)}C("completed"),w(null)}catch(V){console.error("Error in handleSuccess:",V),w(V.message)}},I=async O=>{if(O.preventDefault(),!s){Le.error("Please connect your wallet first");return}N(!0),C("preparing"),w(null);try{let F={ipfsUrl:"",httpUrl:""};if(o.logo){C("uploading");try{F=await v0(o.logo)}catch(ee){C("error"),w(`Logo upload failed: ${ee.message}`);return}}else{C("error"),w("Please upload a logo");return}const V=await new he(window.ethereum).getSigner(),P=S();if(!P){C("error"),w("Factory address not found for this network");return}const B=new J(P,cn.abi,V);let k;n===Ke.MONAD_TESTNET?(k=Ut(Nr[n]),Le.success("Creating token with MON as fee on Monad Testnet")):n===Ke.MOONWALKER?(k=Ut("0.01"),Le.success("Note: 369 ZERO fee will be implemented in the next contract update")):k=Ut(Nr[n]?.toString()||"0.01"),C("creating");const D=n===Ke.MONAD_TESTNET?{gasLimit:5e6}:{gasLimit:3e6},H=await(await B.createToken(o.name,o.symbol,18,Ie(o.totalSupply,18),F.ipfsUrl,{value:k,...D})).wait(),X=H.logs.find(ee=>{if(ee.address.toLowerCase()!==P.toLowerCase())return!1;try{const te=ln("TokenCreated(address,address,string,string,uint8,uint256,string,bool)");return ee.topics[0].toLowerCase()===te.toLowerCase()}catch(te){return console.error("Error checking event signature:",te),!1}});let z;if(X)z=B.interface.parseLog({topics:X.topics,data:X.data}).args[1];else{const te=H.logs.map(Y=>{try{return B.interface.parseLog(Y)}catch{return null}}).filter(Boolean).find(Y=>Y.name==="TokenCreated");if(te)z=te.args[1];else throw console.error("Available logs:",H.logs),new Error("Could not find token address in transaction events")}if(z)d(z),C("completed");else throw new Error("Failed to get token address from transaction");const se={name:o.name,symbol:o.symbol,decimals:18,supply:Ie(o.totalSupply,18),logo:F.ipfsUrl};await h(z,se,F),C("completed"),y(!0),setTimeout(()=>{N(!1),C(null),w(null),setTimeout(()=>{j(!0)},1e3),setTimeout(()=>{y(!1)},3e4)},8e3),t(),m({name:"",symbol:"",totalSupply:"",description:"",logo:null}),u(null)}catch(F){console.error("Token Creation error:",F),C("error"),w(F.message.includes("chain")?"Please switch to a supported network":`Failed to create token: ${F.message}`)}};return i.useEffect(()=>{const O=()=>{b({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(le,{open:a,onClose:t,className:"relative z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999]","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-[9999]",children:e.jsx(le.Panel,{className:"relative w-full max-w-2xl transform overflow-hidden rounded-lg bg-white dark:bg-[#0a0b0f] p-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(O=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${O*.2}s`}},O))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(le.Title,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create New Token"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx(mt,{size:24})})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:["Launch your own token. Fee: ",A()||"..."]}),s?e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsx("div",{className:`w-full h-full rounded-full border-2 border-dashed ${c?"border-[#00ffbd]":"border-gray-300"} flex items-center justify-center overflow-hidden`,children:c?e.jsx("img",{src:c,alt:"Token Logo",className:"w-full h-full object-cover"}):e.jsx(en,{size:32,className:"text-gray-400"})}),e.jsx("input",{type:"file",onChange:L,accept:"image/*",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Token Name"}),e.jsx("input",{type:"text",name:"name",value:o.name,onChange:$,className:`w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200
                  autofill:bg-gray-50 dark:autofill:bg-[#1a1b1f] 
                  [-webkit-autofill]:!bg-gray-50 dark:[-webkit-autofill]:!bg-[#1a1b1f]
                  [-webkit-autofill]:!text-gray-900 dark:[-webkit-autofill]:!text-white
                  [-webkit-autofill_selected]:!bg-gray-50 dark:[-webkit-autofill_selected]:!bg-[#1a1b1f]`,placeholder:"My Token",required:!0,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Token Symbol"}),e.jsx("input",{type:"text",name:"symbol",value:o.symbol,onChange:$,className:`w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200
                  autofill:bg-gray-50 dark:autofill:bg-[#1a1b1f] 
                  [-webkit-autofill]:!bg-gray-50 dark:[-webkit-autofill]:!bg-[#1a1b1f]
                  [-webkit-autofill]:!text-gray-900 dark:[-webkit-autofill]:!text-white
                  [-webkit-autofill_selected]:!bg-gray-50 dark:[-webkit-autofill_selected]:!bg-[#1a1b1f]`,placeholder:"MTK",required:!0,autoComplete:"off"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Decimals"}),e.jsx("input",{type:"number",name:"decimals",value:"18",disabled:!0,className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 cursor-not-allowed opacity-75"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Standard ERC20 decimal places (non-modifiable)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Total Supply"}),e.jsx("input",{type:"text",name:"totalSupply",value:o.totalSupply,onChange:$,className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200",placeholder:"1000000",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Description"}),e.jsx("textarea",{name:"description",value:o.description,onChange:$,className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none resize-none transition-all duration-200",placeholder:"Describe your token...",rows:"3"})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2.5 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2.5 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",disabled:!s,children:"Create Token"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(it,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create a token"}),e.jsx("w3m-button",{})]})]})]})})})]}),e.jsx(H0,{isOpen:f,onClose:()=>{N(!1),C(null)},currentStep:v,tokenName:o.name,error:E,deployedAddress:l}),e.jsx(q0,{isOpen:g,onClose:()=>j(!1),onRate:O=>{console.log("User rated token creation:",O)}}),p&&e.jsx(qt,{width:T.width,height:T.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}})]})}const V0={11155111:{USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",USDT:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0",WETH:"0xfff9976782d46cc05630d1f6ebab18b2324d6b14"},137:{USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",WMATIC:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270"},1301:{USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844",WETH:"0x4E6F7372696F00000000000000000000000000FF"},1828369849:{USDC:void 0,USDT:void 0,WZERO:void 0}},G0=[{inputs:[{components:[{internalType:"string",name:"collectionType",type:"string"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"symbol",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"uint256",name:"maxSupply",type:"uint256"},{internalType:"uint256",name:"mintPrice",type:"uint256"},{internalType:"uint256",name:"maxPerWallet",type:"uint256"},{internalType:"uint256",name:"releaseDate",type:"uint256"},{internalType:"uint256",name:"mintEndDate",type:"uint256"},{internalType:"bool",name:"infiniteMint",type:"bool"},{internalType:"address",name:"paymentToken",type:"address"},{internalType:"bool",name:"enableWhitelist",type:"bool"},{internalType:"address",name:"royaltyReceiver",type:"address"},{internalType:"uint96",name:"royaltyFeeNumerator",type:"uint96"}],internalType:"struct NFTFactory.CreateNFTCollectionParams",name:"params",type:"tuple"}],name:"createNFTCollection",outputs:[],stateMutability:"payable",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!1,internalType:"address",name:"collection",type:"address"},{indexed:!1,internalType:"string",name:"collectionType",type:"string"}],name:"CollectionCreated",type:"event"}],Y0=["level","strength","power","speed","health","mana","stamina"];async function Mo(a,t,s){try{const n=await P0(t),r=wt(n),l=a.attributes?.map(m=>{const c=m.value?.toString()||"",u=Number(c),x=!isNaN(u)&&c!=="",f=m.trait_type?.toLowerCase();return{trait_type:m.trait_type,value:x?u:c,display_type:x&&Y0.includes(f)?"number":void 0}}).filter(m=>m.trait_type&&m.value!=="")||[],d={name:a.name+(s?` #${s}`:""),description:a.description||"",image:n,external_url:a.website||"",attributes:l,background_color:a.background_color||"000000"};return{metadataUrl:await $0(d),imageHttpUrl:r,imageIpfsUrl:n}}catch{throw new Error("Failed to prepare and upload metadata")}}const dt={SEPOLIA:11155111,POLYGON:137,UNICHAIN_MAINNET:130,UNICHAIN:1301,MOONWALKER:1828369849,MONAD_TESTNET:10143},Q0={[dt.SEPOLIA]:"0xfb9c2ebfacb84cc5843a4c01fd8cf3d1a9e3423d",[dt.POLYGON]:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",[dt.UNICHAIN_MAINNET]:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",[dt.UNICHAIN]:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",[dt.MOONWALKER]:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",[dt.MONAD_TESTNET]:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02"},X0={[dt.SEPOLIA]:"ETH",[dt.POLYGON]:"POL",[dt.UNICHAIN_MAINNET]:"ETH",[dt.UNICHAIN]:"ETH",[dt.MOONWALKER]:"ZERO",[dt.MONAD_TESTNET]:"MON"},Po=document.createElement("style");Po.textContent=`
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-3px);
    }
  }
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-2px);
    }
    75% {
      transform: translateX(2px);
    }
  }
`;document.head.appendChild(Po);const qs={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingMetadata:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),CreatingCollection:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("path",{d:"M9 6l6 12M15 6l-6 12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"1s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),SettingWhitelist:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 8v8",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M8 12h8",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.3s"}}),e.jsx("path",{d:"M7 7l2 2 2-2M13 15l2 2 2-2",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 2s ease-in-out infinite",animationDelay:"0.6s"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},Z0=({isOpen:a,onClose:t,currentStep:s,collectionName:n,error:r})=>{const l=[{key:"preparing",label:"Preparing Transaction",icon:qs.Preparing},{key:"uploading",label:"Uploading Metadata",icon:qs.UploadingMetadata},{key:"creating",label:"Creating Collection",icon:qs.CreatingCollection},{key:"whitelist",label:"Setting Whitelist",icon:qs.SettingWhitelist},{key:"completed",label:"Collection Created Successfully",icon:qs.Completed}],d=l.findIndex(c=>c.key===s),o=!!r,m=c=>c?.includes("user rejected action")?"Transaction was rejected. Please try again.":c?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return tn.createPortal(e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"fixed inset-0 z-[10000]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsxs(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[o?"Error Creating Collection":"Creating NFT Collection",n&&!o&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:n})]}),e.jsx("div",{className:"space-y-4",children:l.map((c,u)=>{const x=c.icon,f=u===d,N=!o&&u<d,v=o&&u===d;return e.jsxs("div",{className:Rt("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":f&&!v,"text-[#00ffbd]":N,"bg-red-500/10 text-red-500":v,"text-gray-400":!f&&!N&&!v}),children:[e.jsx(x,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.label}),f&&c.key==="creating"&&!o&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Creating collection ",n]})]})]},c.key)})}),o&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qs.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-[#00ffbd] font-medium",children:"Collection created successfully!"})})]})})})})]})}),document.body)},J0=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[...Array(9)].map((o,m)=>e.jsx("button",{onMouseEnter:()=>d(m+1),onMouseLeave:()=>d(0),onClick:()=>{r(m+1),s(m+1),t()},className:"focus:outline-none",children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${m+1<=(l||n)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},m))})]})})})})]})})},rs=[{id:"type",title:"Collection Type"},{id:"basics",title:"Basic Info"},{id:"artwork",title:"Artwork"},{id:"properties",title:"Properties"},{id:"minting",title:"Minting"}],kr={137:"2 POL",11155111:"0.015 ETH",1:"0.015 ETH",1301:"0.015 ETH",1828369849:"369 ZERO",10143:"0.01 MON"},K0=({isOpen:a,onClose:t,addresses:s,onRemoveAddress:n,onUpdateAddress:r})=>{if(!a)return null;const l=o=>{o.stopPropagation()},d=(o,m)=>{m.preventDefault(),m.stopPropagation();const c=m.target.value,u=[...s],x=c===""?"":parseInt(c)||"";typeof u[o]=="string"?u[o]={address:u[o],maxMint:x}:u[o]={...u[o],maxMint:x},r({whitelistAddresses:u})};return tn.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[100]",onClick:l,children:[e.jsx("div",{className:"fixed inset-0 bg-black/70"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl transform rounded-lg bg-white dark:bg-[#0a0b0f] p-6 relative",onClick:l,children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("button",{type:"button",onClick:o=>{o.stopPropagation(),t()},className:"absolute top-6 right-6 w-8 h-8 flex items-center justify-center bg-white dark:bg-[#0a0b0f] border border-[#00ffbd] rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors z-50",children:e.jsx(mt,{size:20,className:"text-[#00ffbd]"})}),e.jsxs("div",{className:"mt-2",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Whitelist Addresses"}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-scrollbar [&::-webkit-scrollbar-thumb]:bg-[#00ffbd] hover:[&::-webkit-scrollbar-thumb]:bg-[#00e6a9]",children:s.length>0?e.jsx("div",{className:"grid grid-cols-1 gap-2",children:s.map((o,m)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-[#1a1b1f] rounded-lg hover:bg-gray-100 dark:hover:bg-[#2a2b2f] transition-colors",children:[e.jsx("span",{className:"text-sm font-mono text-gray-700 dark:text-gray-300 flex-1",children:typeof o=="object"?o.address:o}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mint limit:"}),e.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",value:typeof o=="object"?o.maxMint===""?"":o.maxMint:1,onChange:c=>d(m,c),onBlur:c=>{const u=c.target.value,x=[...s],f=u===""||parseInt(u)<1?1:parseInt(u);typeof x[m]=="string"?x[m]={address:x[m],maxMint:f}:x[m]={...x[m],maxMint:f},r({whitelistAddresses:x})},onKeyDown:c=>{c.stopPropagation(),!(c.key==="Backspace"||c.key==="Delete"||c.key==="ArrowLeft"||c.key==="ArrowRight"||c.key==="Tab")&&!/[0-9]/.test(c.key)&&!c.ctrlKey&&!c.metaKey&&c.preventDefault()},className:"w-16 px-2 py-1 bg-white dark:bg-[#0d0e12] text-gray-900 dark:text-white border border-gray-200 dark:border-gray-700 rounded text-sm focus:border-[#00ffbd] focus:ring-1 focus:ring-[#00ffbd] focus:outline-none",onClick:c=>{c.stopPropagation(),c.target.select()}})]}),e.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),n(m)},className:"p-2 text-red-500 hover:bg-red-500/10 dark:hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(Ls,{size:18})})]})]},m))}):e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No addresses added yet"})})]})]})})]}),document.body)};function em({isOpen:a,onClose:t}){const s=rt(),{address:n}=Oe(),{openConnectModal:r}=ua();Ft();const[l,d]=i.useState("type"),[o,m]=i.useState(""),[c,u]=i.useState(null),[x,f]=i.useState(!1),[N,v]=i.useState(null),[C,E]=i.useState(null),[w,p]=i.useState(!1),[y,g]=i.useState(!1),[j,T]=i.useState(!1),[b,$]=i.useState({type:"",name:"",symbol:"",description:"",website:"",category:"",socials:{twitter:"",discord:"",telegram:"",zos:""},artwork:null,previewUrl:null,artworkType:null,attributes:[],mintPrice:"",maxSupply:"",maxPerWallet:"",releaseDate:"",mintEndDate:"",infiniteMint:!1,enableWhitelist:!1,whitelistAddresses:[],mintingToken:"native",customTokenAddress:"",customTokenSymbol:"",royaltyFeePercent:"",royaltyFeeNumerator:0,royaltyReceiver:""}),[L,S]=i.useState({width:window.innerWidth,height:window.innerHeight}),[A,h]=i.useState(null);i.useEffect(()=>((async()=>{if(window.ethereum)try{const Z=await window.ethereum.request({method:"eth_chainId"});h(parseInt(Z,16))}catch(Z){console.error("Error getting chain ID:",Z)}})(),window.ethereum&&window.ethereum.on("chainChanged",Z=>h(parseInt(Z,16))),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",Z=>h(parseInt(Z,16)))}),[]);const I=()=>A===130?[{id:"native",name:"Native Token (ETH)",icon:e.jsx(ct,{className:"text-[#00ffbd]"}),address:"",symbol:"ETH"},{id:"custom",name:"Custom Token",icon:e.jsx(it,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:A===1301?[{id:"native",name:"Native Token (ETH)",icon:e.jsx(ct,{className:"text-[#00ffbd]"}),address:"",symbol:"ETH"},{id:"custom",name:"Custom Token",icon:e.jsx(it,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:A===137?[{id:"native",name:"Native Token (POL)",icon:e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}),address:"",symbol:"POL"},{id:"custom",name:"Custom Token",icon:e.jsx(it,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:A===10143?[{id:"native",name:"Native Token (MON)",icon:e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}),address:"",symbol:"MON"},{id:"custom",name:"Custom Token",icon:e.jsx(it,{className:"text-[#00ffbd]"}),address:"",symbol:""}]:[{id:"custom",name:"Custom Token",icon:e.jsx(it,{className:"text-[#00ffbd]"}),address:"",symbol:""}],O=()=>{const q=I(),Z=q.find(ie=>ie.id===b.mintingToken)||q[0];return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>T(!j),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[Z.icon,e.jsx("span",{children:b.mintingToken==="custom"&&b.customTokenSymbol?b.customTokenSymbol:Z.name})]}),e.jsx(tr,{className:`transition-transform ${j?"rotate-180":""}`})]}),j&&e.jsx("div",{className:"absolute z-10 mt-1 w-full bg-white dark:bg-[#1a1b1f] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1",children:q.map(ie=>e.jsxs("button",{onClick:()=>{U({mintingToken:ie.id,customTokenAddress:ie.address,customTokenSymbol:ie.symbol}),T(!1)},className:"w-full px-4 py-2 text-left text-gray-900 dark:text-white hover:bg-[#00ffbd]/10 flex items-center gap-2",children:[ie.icon,e.jsx("span",{children:ie.name})]},ie.id))})]})},F=async()=>{try{let q;if(window.ethereum&&(q=await window.ethereum.request({method:"eth_chainId"}),q=parseInt(q,16)),!q)return console.error("Chain ID not available"),null;if(kr[q])return kr[q];const Z=Q0[q];if(!Z)return console.error("Factory address not found for chain:",q),null;const ie=new Ot(q===dt.POLYGON?"https://polygon-rpc.com":q===dt.UNICHAIN?"https://sepolia.unichain.org":q===dt.UNICHAIN_MAINNET?"https://mainnet.unichain.org":q===dt.MONAD_TESTNET?"https://testnet-rpc.monad.xyz/":"https://polygon-rpc.com"),K=await new J(Z,["function chainFees(uint256) view returns (uint256)"],ie).chainFees(q),xe=ze(K),pe=X0[q]||"ETH";return`${xe} ${pe}`}catch(q){return console.error("Error getting creation fee:",q),kr[A]||null}};i.useEffect(()=>{(async()=>{await F().then(Z=>{$(ie=>({...ie,fee:Z}))})})()},[]);const U=q=>{$(Z=>({...Z,...q}))},V=q=>{const Z=q.target.files[0];if(Z){const ie=Z.type==="video/mp4",ne=Z.type.startsWith("image/");if(!ie&&!ne){Le.error("Please upload an image or MP4 video file");return}const K=ie?5*1024*1024:2*1024*1024;if(Z.size>K){Le.error(`File size must be less than ${ie?"5MB":"2MB"}`);return}const xe=URL.createObjectURL(Z);U({artwork:Z,previewUrl:xe,artworkType:ie?"video":"image"})}},P=q=>/^0x[a-fA-F0-9]{40}$/.test(q),B=async()=>{try{if(Le.dismiss("whitelist-info"),!n){Le.error("Please connect your wallet first");return}if(!b.type||!b.name||!b.symbol||!b.artwork){Le.error("Please fill in all required fields");return}const q=new he(window.ethereum),Z=await window.ethereum.request({method:"eth_chainId"}),ie=parseInt(Z,16);let ne;if(ie===137?ne="0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66":ie===130?ne="0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73":ie===1301?ne="0x5B63598728e1cE2041d2aDbA14B81d668f766857":ie===1828369849?ne="0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8":ie===10143&&(ne="0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02"),!ne){Le.error(`Factory address not found for network with chain ID ${ie}`);return}f(!0),v("preparing"),E(null);const K=await q.getSigner(),xe=await F();if(!xe){Le.error("Failed to get creation fee from contract");return}const[pe]=xe.split(" "),ke=Ut(pe);console.log("Setting fee:",ke.toString());try{v("uploading");const{metadataUrl:we,imageHttpUrl:Me,imageIpfsUrl:re}=await Mo(b,b.artwork);v("creating");const ce=new J(ne,G0,K),ye=H(ie);console.log("Payment Token being set:",{type:b.mintingToken,address:ye,customAddress:b.customTokenAddress});const ue=b.enableWhitelist?BigInt(1e6):BigInt(b.maxPerWallet||1),Fe=Number(ze(ke)),oe=Number(pe);if(Fe!==oe)throw new Error(`Invalid fee amount: ${Fe}. Expected: ${oe}`);let Ne={};ie===dt.MONAD_TESTNET&&(Ne={gasLimit:8e6,maxFeePerGas:Ie("100","gwei"),maxPriorityFeePerGas:Ie("10","gwei")},Le("Using higher gas limit for Monad Testnet",{duration:4e3,icon:"ℹ️"}));const _e=await(await ce.createNFTCollection({collectionType:b.type==="ERC721"?"ERC721":"ERC1155",name:b.name,symbol:b.symbol,metadataURI:"ipfs://",maxSupply:BigInt(b.maxSupply||1e4),mintPrice:Uc(b.mintPrice||"0"),maxPerWallet:ue,releaseDate:BigInt(b.releaseDate?Math.floor(new Date(b.releaseDate).getTime()/1e3):Math.floor(Date.now()/1e3)),mintEndDate:BigInt(b.mintEndDate?Math.floor(new Date(b.mintEndDate).getTime()/1e3):0),infiniteMint:!!b.infiniteMint,paymentToken:b.mintingToken==="native"?"0x0000000000000000000000000000000000000000":b.mintingToken==="custom"?b.customTokenAddress:ye||"0x0000000000000000000000000000000000000000",enableWhitelist:!!b.enableWhitelist,royaltyReceiver:b.royaltyReceiver||n,royaltyFeeNumerator:BigInt(b.royaltyFeeNumerator||0)},{value:ke,...Ne})).wait();let Re;const Pe=_e.logs.find(qe=>qe.topics[0]==="0xaf1866185e64615f1cfc5b81e7bf1ff8beafdc402920eb36641743d8fe5f7757");if(Pe&&(Re=Ms.defaultAbiCoder().decode(["tuple(address creator, address collection, string collectionType, string name, string symbol, uint256 maxSupply, uint256 mintPrice, uint256 maxPerWallet, uint256 releaseDate, uint256 mintEndDate, bool infiniteMint)"],Pe.data)[0].collection),Re||(Re=_e.logs.find(Je=>Je.topics[0]==="0x82dfd53401a55bb491abcb3e7a97c99da1ed7eaffd89721d3e96e8e8ad4a692d")?.address),!Re){v("error"),E("Failed to get collection address from transaction");return}if(ie===dt.MONAD_TESTNET&&!Re)throw new Error("Collection deployment failed on Monad Testnet. Please check your MON balance.");if(b.enableWhitelist&&b.whitelistAddresses.length>0){v("whitelist");const qe=new J(Re,Jt.ERC721,K),Je=b.whitelistAddresses.map(ht=>typeof ht=="string"?ht:ht.address),ot=b.whitelistAddresses.map(ht=>BigInt(typeof ht=="string"?1:ht.maxMint));await(await qe.setWhitelist(Je,ot)).wait()}const He={...b,contractAddress:Re,network:ie===1301?"unichain":ie===11155111?"sepolia":ie===137?"polygon":ie===1828369849?"moonwalker":ie===10143?"monad-testnet":"unknown",chainId:ie,previewUrl:Me,imageIpfsUrl:re,metadataUrl:we,mintToken:{type:b.mintingToken||"native",symbol:b.mintingToken==="usdc"?"USDC":b.mintingToken==="usdt"?"USDT":b.mintingToken==="custom"?b.customTokenSymbol:(b.mintingToken==="native",ie===137?"POL":ie===10143?"MON":"ETH"),address:b.mintingToken==="native"?"0x0000000000000000000000000000000000000000":b.mintingToken==="custom"?b.customTokenAddress:ye||"0x0000000000000000000000000000000000000000"},whitelistAddresses:b.whitelistAddresses,createdAt:Date.now(),totalMinted:0,creatorAddress:n.toLowerCase()};await k0(He),v("completed"),p(!0),setTimeout(()=>{f(!1),v(null),E(null),setTimeout(()=>{g(!0)},1e3),setTimeout(()=>{p(!1)},3e4)},2e3),t(),s(`/collection/${b.symbol}`)}catch(we){console.error("Error in collection creation process:",we),v("error"),E(we.message||"Failed to create collection. Please try again.")}}catch(q){console.error("Error in form submission:",q),v("error"),E("Failed to start collection creation. Please check your inputs and try again.")}},k=q=>{const Z=document.createElement("input");Z.type="file",Z.accept=q==="csv"?".csv":q==="excel"?".xlsx,.xls":".json",Z.onchange=async ie=>{const ne=ie.target.files[0];if(ne)try{let K=[];if(q==="json"){const pe=await ne.text();let ke;try{ke=JSON.parse(pe)}catch(ce){console.error("JSON parse error:",ce),Le.error("Invalid JSON format");return}const we=ce=>{if(typeof ce!="string")return null;const ye=ce.match(/0x[a-fA-F0-9]{40}/);return ye?ye[0]:null},re=(ce=>{const ye=new Set,ue=Fe=>{if(typeof Fe=="string"){const oe=we(Fe);oe&&ye.add(oe);return}if(Array.isArray(Fe)){Fe.forEach(ue);return}Fe&&typeof Fe=="object"&&Object.values(Fe).forEach(ue)};return ue(ce),Array.from(ye)})(ke);console.log("Found addresses:",re),K=re.map(ce=>({address:ce,maxMint:1}))}else if(q==="csv")K=(await ne.text()).split(/[\r\n,]+/).map(we=>we.trim()).filter(we=>we.length>0).map(we=>({address:we.replace(/['"]/g,""),maxMint:1}));else if(q==="excel"){const pe=await ne.arrayBuffer(),ke=Oc(pe),we=ke.Sheets[ke.SheetNames[0]];K=Ja.sheet_to_json(we,{header:1,raw:!1}).flatMap(re=>Array.isArray(re)?re.map(ce=>{if(!ce)return null;const ye=String(ce).trim();return ye.startsWith("0x")?{address:ye,maxMint:1}:null}).filter(Boolean):[])}const xe=[...new Set(K.filter(pe=>pe&&pe.address&&P(pe.address)).map(pe=>pe.address))].map(pe=>({address:pe,maxMint:1}));if(console.log("Valid addresses:",xe),xe.length===0){Le.error("No valid addresses found in file");return}U({whitelistAddresses:xe}),Le.success(e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:["Imported ",xe.length," addresses"]}),e.jsx("span",{className:"text-sm text-gray-400 mt-1",children:"Click the counter to view the list"})]}))}catch(K){console.error("Error importing file:",K),Le.error(`Failed to import ${q} file. Please check the format.`)}},Z.click()},D=()=>{const q=()=>e.jsxs("div",{className:"flex justify-between items-center gap-3 mt-6",children:[l!=="type"&&e.jsx("button",{onClick:()=>{const Z=rs.findIndex(ie=>ie.id===l);d(rs[Z-1].id)},className:"px-6 py-2 border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-[#1a1b1f] text-gray-700 dark:text-gray-300 font-semibold rounded-lg transition-colors",children:"Back"}),l!=="minting"&&e.jsx("button",{onClick:_,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors ml-auto",children:"Continue"}),l==="minting"&&e.jsx("button",{onClick:B,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors ml-auto",children:"Create Collection"})]});switch(l){case"type":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Create NFT Collection"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Choose your collection type. Creation fee: ",b.fee||"Loading..."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>{U({type:"ERC721"}),d("basics")},className:Rt("p-4 rounded-lg border-2 text-left","hover:border-[#00ffbd] transition-colors",b.type==="ERC721"?"border-[#00ffbd]":"border-gray-200 dark:border-gray-800"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ct,{size:24,className:"text-[#00ffbd]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ERC-721"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Traditional NFTs, unique and non-divisible"})]})]})}),e.jsx("button",{onClick:()=>{U({type:"ERC1155"}),d("basics")},className:Rt("p-4 rounded-lg border-2","hover:border-[#00ffbd] transition-colors",b.type==="ERC1155"?"border-[#00ffbd]":"border-gray-200 dark:border-gray-800"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ct,{size:24,className:"text-[#00ffbd]"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"ERC-1155"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Multi-token standard, semi-fungible"})]})]})})]}),q()]})]});case"basics":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Collection Name *"}),e.jsx("input",{type:"text",value:b.name,onChange:Z=>U({name:Z.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"My NFT Collection"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Symbol *"}),e.jsx("input",{type:"text",value:b.symbol,onChange:Z=>U({symbol:Z.target.value.toUpperCase()}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"MYNFT"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:Z=>U({description:Z.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none h-24",placeholder:"Describe your collection..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Website"}),e.jsx("input",{type:"url",value:b.website,onChange:Z=>U({website:Z.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"https://"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:b.category,onChange:Z=>U({category:Z.target.value}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"collectibles",children:"Collectibles"}),e.jsx("option",{value:"gaming",children:"Gaming"}),e.jsx("option",{value:"music",children:"Music"}),e.jsx("option",{value:"photography",children:"Photography"}),e.jsx("option",{value:"sports",children:"Sports"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Social Links"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Twitter Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"@"}),e.jsx("input",{type:"text",value:b.socials.twitter,onChange:Z=>U({socials:{...b.socials,twitter:Z.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg pl-8 p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"username"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Discord Server"}),e.jsx("input",{type:"url",value:b.socials.discord,onChange:Z=>U({socials:{...b.socials,discord:Z.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"https://discord.gg/..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Telegram Group"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",children:"t.me/"}),e.jsx("input",{type:"text",value:b.socials.telegram,onChange:Z=>U({socials:{...b.socials,telegram:Z.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg pl-12 p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"groupname"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-400 mb-1",children:"ZOS Profile"}),e.jsx("input",{type:"url",value:b.socials.zos,onChange:Z=>U({socials:{...b.socials,zos:Z.target.value}}),className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"https://zos.zero.tech/..."})]})]})]}),q()]})]});case"artwork":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"w-64 h-64 relative",children:[e.jsx("div",{className:Rt("w-full h-full rounded-lg border-2 border-dashed flex items-center justify-center overflow-hidden",b.previewUrl?"border-[#00ffbd]":"border-gray-300 dark:border-gray-700"),children:b.previewUrl?b.artworkType==="video"?e.jsx("video",{src:b.previewUrl,className:"w-full h-full object-cover",controls:!0}):e.jsx("img",{src:b.previewUrl,alt:"Preview",className:"w-full h-full object-cover"}):e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex justify-center gap-4 mb-2",children:[e.jsx(en,{size:24,className:"text-gray-400"}),e.jsx(Al,{size:24,className:"text-gray-400"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Drop your file here, or click to browse"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supported: Images (2MB) or MP4 Videos (5MB)"})]})}),e.jsx("input",{type:"file",onChange:V,accept:"image/*,video/mp4",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]})}),b.previewUrl&&e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>U({artwork:null,previewUrl:null,artworkType:null}),className:"text-sm text-red-500 hover:text-red-600",children:"Remove File"})}),q()]})]});case"properties":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Attributes/traits"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Add traits that make your NFTs unique"})]}),e.jsx("button",{onClick:()=>U({attributes:[...b.attributes,{trait_type:"",value:""}]}),className:"px-3 py-1.5 text-sm bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-lg",children:"Add Attribute"})]}),b.attributes.length===0?e.jsx("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No attributes added yet"})}):e.jsx("div",{className:"space-y-3",children:b.attributes.map((Z,ie)=>e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"flex-1",children:e.jsx("input",{placeholder:"Attribute name",value:Z.trait_type,onChange:ne=>{const K=[...b.attributes];K[ie].trait_type=ne.target.value,U({attributes:K})},className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none text-sm"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{placeholder:"Value",value:Z.value,onChange:ne=>{const K=[...b.attributes];K[ie].value=ne.target.value,U({attributes:K})},className:"w-full bg-gray-50 dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none text-sm"})}),e.jsx("button",{onClick:()=>{const ne=b.attributes.filter((K,xe)=>xe!==ie);U({attributes:ne})},className:"p-2.5 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(mt,{size:20})})]},ie))}),q()]})]});case"minting":return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Minting Currency *"}),O()]}),b.mintingToken==="custom"&&e.jsxs("div",{className:"mt-4 space-y-4 animate-[fadeIn_0.3s_ease-in-out]",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Custom Token Address *"}),e.jsx("input",{type:"text",value:b.customTokenAddress,onChange:Z=>U({customTokenAddress:Z.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter token contract address",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Custom Token Symbol *"}),e.jsx("input",{type:"text",value:b.customTokenSymbol,onChange:Z=>U({customTokenSymbol:Z.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter token symbol",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Mint Price *"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",step:"0.000000000000000001",value:b.mintPrice,onChange:Z=>U({mintPrice:Z.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg pl-16 p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"0.00",required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Royalty Fee (%)"}),e.jsx("input",{type:"number",value:b.royaltyFeePercent,onChange:Z=>U({royaltyFeePercent:Z.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter royalty percentage (0-100) (Optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Royalty Receiver Address"}),e.jsx("input",{type:"text",value:b.royaltyReceiver,onChange:Z=>U({royaltyReceiver:Z.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter address (Optional)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Max Supply *"}),e.jsx("input",{type:"number",value:b.maxSupply,onChange:Z=>U({maxSupply:Z.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:"Enter max supply",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Max Per Wallet *"}),e.jsx("input",{type:"number",min:"1",value:b.maxPerWallet,onChange:Z=>U({maxPerWallet:Z.target.value}),placeholder:"Enter max per wallet",className:`w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white border border-gray-200 dark:border-gray-800 rounded-lg px-3 py-2 focus:outline-none focus:border-[#00ffbd] ${b.enableWhitelist?"cursor-not-allowed bg-gray-100 dark:bg-[#1a1b1f] opacity-75":""}`,disabled:b.enableWhitelist,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Release Date *"}),e.jsx("input",{type:"datetime-local",value:b.releaseDate,onChange:Z=>U({releaseDate:Z.target.value}),className:"w-full bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",required:!0})]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:b.enableWhitelist,onChange:Z=>G(Z.target.checked),className:"w-4 h-4 text-[#00ffbd] border-gray-300 rounded focus:ring-[#00ffbd]"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Enable whitelist for early minting"})]})}),b.enableWhitelist&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Import Whitelist"}),e.jsxs("button",{onClick:()=>se(!0),className:"text-xs text-[#00ffbd] hover:text-[#00e6a9] transition-colors flex items-center gap-1",children:[e.jsxs("span",{children:[b.whitelistAddresses.length," Addresses"]}),e.jsx(Cl,{size:16})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter wallet address (0x...)",value:o,onChange:Z=>m(Z.target.value),className:"flex-1 bg-white dark:bg-[#0d0e12] text-gray-900 dark:text-white rounded-lg px-3 py-2 text-sm border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none"}),e.jsx("button",{onClick:te,className:"px-3 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-lg text-sm",children:"Add"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>k("csv"),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-[#1a1b1f]",children:[e.jsx(Sl,{size:16}),"Import CSV"]}),e.jsxs("button",{onClick:()=>k("excel"),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-[#1a1b1f]",children:[e.jsx(Fl,{size:16}),"Import EXCEL"]}),e.jsxs("button",{onClick:()=>k("json"),className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-700 dark:text-gray-300 bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-[#1a1b1f]",children:[e.jsx(El,{size:16}),"Import JSON"]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1.5",children:"Mint End Date *"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"datetime-local",value:b.mintEndDate,onChange:Z=>U({mintEndDate:Z.target.value}),className:`flex-1 bg-white dark:bg-[#1a1b1f] text-gray-900 dark:text-white rounded-lg p-2.5 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none ${b.infiniteMint?"cursor-not-allowed opacity-50":""}`,disabled:b.infiniteMint,required:!b.infiniteMint}),e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b.infiniteMint,onChange:Z=>U({infiniteMint:Z.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-[#00ffbd]/20 dark:peer-focus:ring-[#00ffbd]/30 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#00ffbd]"}),e.jsx("span",{className:"ms-3 text-sm font-medium text-gray-700 dark:text-gray-300",children:"Infinite Mint"})]})]})]}),q()]})]})}},_=()=>{if(l==="minting")B();else{const q=rs.findIndex(Z=>Z.id===l);d(rs[q+1].id)}},H=q=>{if(!b.mintingToken||b.mintingToken==="native")return q===137?"0x0000000000000000000000000000000000001010":"0x0000000000000000000000000000000000000000";const Z=V0[q];if(!Z)return console.warn("Token addresses not configured for this network"),"0x0000000000000000000000000000000000000000";switch(b.mintingToken){case"usdc":return Z.USDC;case"usdt":return Z.USDT;case"custom":return b.customTokenAddress||"0x0000000000000000000000000000000000000000";default:return"0x0000000000000000000000000000000000000000"}},X=()=>e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(it,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create an NFT collection"}),e.jsx("button",{onClick:r,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]});i.useEffect(()=>{(async()=>{if(window.ethereum){const Z=await window.ethereum.request({method:"eth_chainId"});u(parseInt(Z,16))}})(),window.ethereum?.on("chainChanged",Z=>{u(parseInt(Z,16))})},[]);const[z,se]=i.useState(!1),ee=q=>{const Z=b.whitelistAddresses.filter((ie,ne)=>ne!==q);U({whitelistAddresses:Z})},te=q=>{q.stopPropagation(),P(o)?(U({whitelistAddresses:[...b.whitelistAddresses,{address:o,maxMint:1}]}),m("")):Le.error("Invalid wallet address")},Y=q=>{$(Z=>({...Z,whitelistAddresses:q.whitelistAddresses}))};i.useState(!1);const[W,Q]=i.useState("");i.useEffect(()=>{b.enableWhitelist&&Q("1000000")},[b.enableWhitelist]);const G=q=>{q?(U({enableWhitelist:q,maxPerWallet:"1000000"}),Le("When whitelist is enabled, max per wallet is set high to allow individual whitelist limits to control minting. You can set specific mint limits for each address when adding them to the whitelist.",{duration:1/0,id:"whitelist-info"})):(U({enableWhitelist:q,maxPerWallet:""}),Le.dismiss("whitelist-info"))};return i.useEffect(()=>{const q=()=>{S({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",q),()=>window.removeEventListener("resize",q)},[]),e.jsxs(e.Fragment,{children:[e.jsxs(le,{open:a,onClose:t,className:"relative z-[9999]",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 z-[9999]","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4 z-[9999]",children:e.jsx(le.Panel,{className:"relative w-full max-w-2xl transform overflow-hidden rounded-lg bg-white dark:bg-[#0a0b0f] p-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(q=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${q*.2}s`}},q))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(le.Title,{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Create NFT Collection"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx(mt,{size:24})})]}),n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex justify-between",children:rs.map((q,Z)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:Rt("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium",l===q.id||rs.findIndex(ie=>ie.id===l)>Z?"bg-[#00ffbd] text-black":"bg-gray-100 dark:bg-[#1a1b1f] text-gray-400"),children:Z+1}),Z!==rs.length-1&&e.jsx("div",{className:Rt("h-0.5 w-full mx-2",rs.findIndex(ie=>ie.id===l)>Z?"bg-[#00ffbd]":"bg-gray-100 dark:bg-[#1a1b1f]")})]},q.id))})}),D()]}):X()]})]})})})]}),e.jsx(K0,{isOpen:z,onClose:()=>se(!1),addresses:b.whitelistAddresses,onRemoveAddress:ee,onUpdateAddress:Y}),w&&e.jsx(qt,{width:L.width,height:L.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(Z0,{isOpen:x,onClose:()=>{f(!1),v(null)},currentStep:N,collectionName:b.name,error:C}),e.jsx(J0,{isOpen:y,onClose:()=>g(!1),onRate:q=>{console.log("User rated NFT creation:",q)}})]})}const tm=[{question:"What security measures are in place?",answer:"The contract includes initialization protection, ownership controls via OpenZeppelin's Ownable, and ReentrancyGuard protection. Each token can only be initialized once and has input validation for names, symbols, and decimals. Learn more about OpenZeppelin's security features here: ",link:"https://docs.openzeppelin.com/contracts/4.x/api/security"},{question:"What can token creators do?",answer:"Token creators can set the initial supply, name, symbol, and decimals (up to 18) of their token. They receive full ownership of their created token and the initial supply is minted to their address. Read more about ERC20 implementation here: ",link:"https://docs.openzeppelin.com/contracts/4.x/erc20"},{question:"What are the limitations?",answer:"Tokens are non-upgradeable once deployed. There's no built-in burning mechanism, no additional minting after initial supply, no pausing functionality, and no token recovery mechanism."},{question:"What's the creation fee and how is it used?",answer:"The creation fee is 0.02 ETH. This fee helps cover operational costs including server maintenance, IPFS hosting, Firebase services, and most importantly, contributes to my audit fund. My goal is to undergo a comprehensive smart contract audit to ensure maximum security for our users."},{question:"Are the tokens standard ERC20?",answer:"Yes, all created tokens are standard ERC20 tokens using OpenZeppelin's implementation, ensuring compatibility with all ERC20-supporting platforms and wallets. Learn more about the standard here: ",link:"https://eips.ethereum.org/EIPS/eip-20"}],sm=[{question:"What security features protect NFT creators and collectors?",answer:"Our NFT contracts implement multiple security layers including OpenZeppelin's ReentrancyGuard to prevent reentrancy attacks, Ownable for secure ownership management, and Pausable for emergency stops. We use ERC721Enumerable and ERC1155Supply for accurate token tracking. Learn more about these security features: ",link:"https://docs.openzeppelin.com/contracts/4.x/api/security"},{question:"How are NFT metadata and assets stored?",answer:"All NFT metadata and assets are stored on IPFS, ensuring decentralized and permanent storage. The IPFS hashes are immutably recorded on-chain. We use Pinata for reliable pinning services to ensure your NFT assets remain accessible."},{question:"What anti-bot measures are in place?",answer:"Our contracts include multiple bot prevention mechanisms: configurable mint limits per wallet, optional whitelist functionality, and transaction rate limiting. For whitelisted sales, we use Merkle trees for efficient and secure verification."},{question:"How does the whitelist system work?",answer:"Our whitelist implementation uses Merkle trees (via OpenZeppelin's MerkleProof) for gas-efficient and secure verification. Whitelisted addresses can have custom mint limits and pricing. Learn more about Merkle proofs: ",link:"https://docs.openzeppelin.com/contracts/4.x/api/utils#MerkleProof"},{question:"What royalty standards are supported?",answer:"We implement EIP-2981 for on-chain royalties, compatible with major marketplaces. Creators can set royalty percentages (up to 10%) that are enforced at the contract level. Read about the standard: ",link:"https://eips.ethereum.org/EIPS/eip-2981"},{question:"Can the contracts be upgraded after deployment?",answer:"No, our contracts are purposely non-upgradeable to ensure immutability and security. All parameters (baseURI, royalties, etc.) are set at deployment and cannot be changed unless specifically allowed through controlled functions."},{question:"What's the creation fee and how is it used?",answer:"The creation fee (0.02 ETH for ERC721, 0.025 ETH for ERC1155) supports our infrastructure costs including IPFS hosting, Firebase services, and server maintenance. A portion is allocated to our audit fund - we're actively working towards a comprehensive audit by a reputable firm."},{question:"What's the difference between ERC721 and ERC1155?",answer:"ERC721 tokens are unique, ideal for 1/1 artwork or unique collectibles. ERC1155 supports both fungible and non-fungible tokens, perfect for editions or collections with multiple copies. Learn more: ",link:"https://docs.openzeppelin.com/contracts/4.x/erc721"},{question:"How are gas costs optimized?",answer:"We implement several gas optimizations: efficient storage packing, minimal storage operations, optimized metadata handling, and batch minting support for ERC1155. Our contracts are thoroughly tested for gas efficiency."},{question:"What happens if something goes wrong?",answer:"Contracts include emergency pause functionality (for admins only) and clear error messages. While we can't modify or upgrade contracts, the pause feature provides a safety mechanism in extreme situations."}];function am({isOpen:a,onClose:t}){return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 bg-[#00ffbd] hover:bg-[#00e6a9] text-black p-3 rounded-full shadow-lg",children:e.jsx(Il,{size:24})}),e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/70","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(le.Panel,{className:"relative bg-[#0a0b0f] rounded-lg p-6 max-w-md w-full",children:[e.jsxs("div",{className:"absolute -top-px -left-px w-24 h-24",children:[e.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[1px] h-full bg-gradient-to-b from-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-[1px] bg-gradient-to-r from-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-px -right-px w-24 h-24",children:[e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[1px] h-full bg-gradient-to-b from-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-full h-[1px] bg-gradient-to-r to-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-px -left-px w-24 h-24",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[1px] h-full bg-gradient-to-t from-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[1px] bg-gradient-to-r from-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-px -right-px w-24 h-24",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[1px] h-full bg-gradient-to-t from-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[1px] bg-gradient-to-r to-[#00ffbd]"})]}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1",children:[1,2,3].map(s=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${s*.2}s`}},s))}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(le.Title,{className:"text-xl font-semibold text-white",children:"Frequently Asked Questions"}),e.jsx("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-300",children:e.jsx(mt,{size:24})})]}),e.jsxs(js.Group,{children:[e.jsxs(js.List,{className:"flex space-x-1 rounded-xl bg-[#1a1b1f] p-1 mb-6",children:[e.jsx(js,{className:({selected:s})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5
                     ${s?"bg-[#00ffbd] text-black shadow":"text-gray-400 hover:bg-[#2a2b2f] hover:text-white"}`,children:"Tokens"}),e.jsx(js,{className:({selected:s})=>`w-full rounded-lg py-2.5 text-sm font-medium leading-5
                     ${s?"bg-[#00ffbd] text-black shadow":"text-gray-400 hover:bg-[#2a2b2f] hover:text-white"}`,children:"NFTs"})]}),e.jsxs("div",{className:"overflow-y-auto pr-2 custom-scrollbar",style:{maxHeight:"calc(80vh - 140px)",scrollbarWidth:"thin",scrollbarColor:"#00ffbd #1a1b1f"},children:[e.jsx("style",{jsx:!0,children:`
                    .custom-scrollbar::-webkit-scrollbar {
                      width: 4px;
                    }
                    
                    .custom-scrollbar::-webkit-scrollbar-track {
                      background: #1a1b1f;
                      border-radius: 2px;
                    }
                    
                    .custom-scrollbar::-webkit-scrollbar-thumb {
                      background: #00ffbd;
                      border-radius: 2px;
                    }
                    
                    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                      background: #00e6a9;
                    }
                  `}),e.jsxs(js.Panels,{children:[e.jsx(js.Panel,{children:e.jsx("div",{className:"space-y-6",children:tm.map((s,n)=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4 last:border-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:s.question}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[s.answer,s.link&&e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:underline ml-1",children:"Read more"})]})]},n))})}),e.jsx(js.Panel,{children:e.jsx("div",{className:"space-y-6",children:sm.map((s,n)=>e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-800 pb-4 last:border-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white mb-2",children:s.question}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[s.answer,s.link&&e.jsx("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:underline ml-1",children:"Read more"})]})]},n))})})]})]})]})]})]})})]})]})}const rm=i.createContext();function nm({children:a}){const[t,s]=i.useState("v2");return e.jsx(rm.Provider,{value:{version:t,setVersion:s},children:a})}const Vn={1:"https://etherscan.io",11155111:"https://sepolia.etherscan.io",137:"https://polygonscan.com",80001:"https://mumbai.polygonscan.com",130:"https://unichain.blockscout.com",1301:"https://unichain-sepolia.blockscout.com",1828369849:"https://moonwalker-blockscout.eu-north-2.gateway.fm"},im=(a,t="tx",s)=>{const n=Vn[a]||Vn[1];switch(t){case"tx":return`${n}/tx/${s}`;case"address":return`${n}/address/${s}`;case"token":return`${n}/token/${s}`;case"api":return n;default:return`${n}/tx/${s}`}},Gn=30*1e3;class om{constructor(){this.volumeCache=new Map,this.lastCacheUpdate=0,this.lastKnownBlock=0,this.loadCacheFromStorage(),this.setupSwapListener()}async setupSwapListener(){try{const t=new he(window.ethereum);this.lastKnownBlock=await t.getBlockNumber(),t.on("block",s=>{s>this.lastKnownBlock&&(this.lastKnownBlock=s,this.invalidateCache())})}catch(t){console.warn("Error setting up swap listener:",t)}}invalidateCache(){this.volumeCache.clear(),this.lastCacheUpdate=0,localStorage.removeItem("volumeCache")}loadCacheFromStorage(){try{const t=localStorage.getItem("volumeCache");if(t){const{volumes:s,timestamp:n,lastBlock:r}=JSON.parse(t);Date.now()-n<Gn&&r===this.lastKnownBlock&&(this.volumeCache=new Map(Object.entries(s)),this.lastCacheUpdate=n)}}catch(t){console.warn("Error loading volume cache:",t)}}saveCacheToStorage(){try{const t=Object.fromEntries(this.volumeCache);localStorage.setItem("volumeCache",JSON.stringify({volumes:t,timestamp:Date.now(),lastBlock:this.lastKnownBlock}))}catch(t){console.warn("Error saving volume cache:",t)}}isStablecoin(t){return[je.USDC.toLowerCase(),je.USDT.toLowerCase()].includes(t.toLowerCase())}getTokenPrice(t,s,n,r,l){const d=Number(de(t[0],r)),o=Number(de(t[1],l));return this.isStablecoin(s)?d/o:this.isStablecoin(n)?o/d:0}async getPoolVolumes(t,s,n,r){try{const l=t.toLowerCase(),d=this.volumeCache.get(l),o=Date.now();if(d&&o-d.timestamp<Gn)return console.log("Returning volume data from cache for:",t),d;const m=new he(window.ethereum),c=await m.getBlockNumber(),u=await m.getBlock(c),[x,f]=await Promise.all([s.token0(),s.token1()]),N=7200,v=N,C=N*7,E=N*30,w=s.filters.Swap(),[p,y,g,j]=await Promise.all([s.queryFilter(w,c-v,c),s.queryFilter(w,c-C,c),s.queryFilter(w,c-E,c),s.getReserves()]),T=this.getTokenPrice(j,x,f,n,r),b=L=>{let S=0;for(const A of L){let h=0;const I=Number(de(A.args.amount0In,n)),O=Number(de(A.args.amount0Out,n)),F=Number(de(A.args.amount1In,r)),U=Number(de(A.args.amount1Out,r));if(this.isStablecoin(x))h=I+O;else if(this.isStablecoin(f))h=F+U;else if(T>0)h=(I+O)*T;else continue;S+=h}return S},$={oneDayVolume:b(p),sevenDayVolume:b(y),thirtyDayVolume:b(g),oneDayTxCount:p.length,sevenDayTxCount:y.length,thirtyDayTxCount:g.length,timestamp:o};return this.volumeCache.set(l,$),this.saveCacheToStorage(),console.log("Volume data for pool:",t,$),$}catch(l){return console.error("Error calculating pool volumes:",l),{oneDayVolume:0,sevenDayVolume:0,thirtyDayVolume:0,oneDayTxCount:0,sevenDayTxCount:0,thirtyDayTxCount:0,timestamp:Date.now()}}}}const je={factory:"0xF62c03E08ada871A0bEb309762E260a7a6a880E6",router:"0xeE567Fe1712Faf6149d80dA1E6934E354124CfE3",WETH:"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",USDT:"0x148b1aB3e2321d79027C4b71B6118e70434B4784",USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238"},zs=["function createPair(address tokenA, address tokenB) external returns (address pair)","function getPair(address tokenA, address tokenB) external view returns (address pair)","function allPairs(uint) external view returns (address pair)","function allPairsLength() external view returns (uint)","function feeTo() external view returns (address)","function feeToSetter() external view returns (address)","event PairCreated(address indexed token0, address indexed token1, address pair, uint)"],zt=["function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapTokensForExactTokens(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapETHForExactTokens(uint amountOut, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapTokensForExactETH(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function quote(uint amountA, uint reserveA, uint reserveB) external pure returns (uint amountB)","function getAmountOut(uint amountIn, uint reserveIn, uint reserveOut) external pure returns (uint amountOut)","function getAmountIn(uint amountOut, uint reserveIn, uint reserveOut) external pure returns (uint amountIn)","function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)","function getAmountsIn(uint amountOut, address[] calldata path) external view returns (uint[] memory amounts)"],La=["function token0() external view returns (address)","function token1() external view returns (address)","function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)","function price0CumulativeLast() external view returns (uint)","function price1CumulativeLast() external view returns (uint)","event Swap(address indexed sender, uint amount0In, uint amount1In, uint amount0Out, uint amount1Out, address indexed to)"],lt=["function approve(address spender, uint value) external returns (bool)","function balanceOf(address owner) external view returns (uint)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)","function totalSupply() external view returns (uint256)","function transfer(address to, uint value) external returns (bool)","function transferFrom(address from, address to, uint value) external returns (bool)","function allowance(address owner, address spender) external view returns (uint)"];class $o{constructor(t,s){this.publicClient=t,this.walletClient=s,this.factory={address:je.factory,abi:zs},this.router={address:je.router,abi:zt},this.poolCache=new Map,this.poolInfoCache=new Map,this.lastCacheUpdate=0,this.CACHE_DURATION=15*60*1e3,this.volumeTracker=new om,this.loadCacheFromStorage()}loadCacheFromStorage(){try{const t=localStorage.getItem("uniswapPoolCache");if(t){const{pools:s,poolInfo:n,timestamp:r}=JSON.parse(t);Date.now()-r<60*60*1e3&&(this.poolCache=new Map(s),this.poolInfoCache=new Map(n),this.lastCacheUpdate=r)}}catch(t){console.warn("Error loading cache from storage:",t)}}saveCacheToStorage(){try{const t={pools:Array.from(this.poolCache.entries()),poolInfo:Array.from(this.poolInfoCache.entries()),timestamp:Date.now()};localStorage.setItem("uniswapPoolCache",JSON.stringify(t))}catch(t){console.warn("Error saving cache to storage:",t)}}clearCache(){this.poolCache.clear(),this.poolInfoCache.clear(),this.lastCacheUpdate=0,localStorage.removeItem("uniswapPoolCache")}isCacheValid(){return Date.now()-this.lastCacheUpdate<this.CACHE_DURATION}async getPools(t){if(!t)throw console.error("tokenAddress is required for getPools"),new Error("tokenAddress is required");try{console.log("Getting pools for token:",t);const s=new J(je.factory,zs,new he(window.ethereum)),n=await s.allPairsLength();console.log("Total pairs:",n.toString());const r=[];for(let l=0;l<n;l++)try{const d=await s.allPairs(l);console.log(`Checking pair ${l}:`,d);const o=new J(d,La,new he(window.ethereum)),[m,c,u]=await Promise.all([o.token0(),o.token1(),o.getReserves()]);console.log(`Pair ${l} tokens:`,m,c),(m.toLowerCase()===t.toLowerCase()||c.toLowerCase()===t.toLowerCase())&&(r.push({address:d,token0:m,token1:c,reserves:u}),console.log("Found matching pair:",d))}catch(d){console.error(`Error processing pair ${l}:`,d);continue}return console.log("Found pairs:",r.length),r}catch(s){throw console.error("Error getting pools:",s),s}}async checkPoolExists(t,s){try{const n=new he(window.ethereum);return await new J(je.factory,zs,n).getPair(t,s)!=="0x0000000000000000000000000000000000000000"}catch(n){throw console.error("Error checking pool existence:",n),n}}async createPool(t,s,n,r){try{const l=new he(window.ethereum),d=await l.getSigner(),o=await d.getAddress(),m=t.toLowerCase()==="eth",c=s.toLowerCase()==="eth",u=m?je.WETH:t,x=c?je.WETH:s,[f,N]=u.toLowerCase()<x.toLowerCase()?[u,x]:[x,u],[v,C]=u.toLowerCase()<x.toLowerCase()?[n,r]:[r,n],E=new J(je.factory,zs,d),w=new J(je.router,zt,d),p=m?null:new J(f,lt,d),y=c?null:new J(N,lt,d);console.log("Checking if pair exists...");const g=await E.getPair(f,N);if(console.log("Existing pair address:",g),g!=="0x0000000000000000000000000000000000000000")throw new Error("Pool already exists");const T=(await l.getFeeData()).gasPrice*105n/100n,b=Mt,$=[];if(!m&&!c){const[k,D]=await Promise.all([p.allowance(o,je.router),y.allowance(o,je.router)]),[_,H]=await Promise.all([p.approve.estimateGas(je.router,b),y.approve.estimateGas(je.router,b)]).catch(X=>[100000n,100000n]);k<v&&(console.log("Approving token0..."),M.loading("Approving first token...",{id:"approve0"}),$.push(p.approve(je.router,b,{gasLimit:_*120n/100n,gasPrice:T}).then(X=>X.wait()).then(()=>{M.success("First token approved",{id:"approve0"})}).catch(X=>{throw M.error("Failed to approve first token: "+X.message,{id:"approve0"}),X}))),D<C&&(console.log("Approving token1..."),M.loading("Approving second token...",{id:"approve1"}),$.push(y.approve(je.router,b,{gasLimit:H*120n/100n,gasPrice:T}).then(X=>X.wait()).then(()=>{M.success("Second token approved",{id:"approve1"})}).catch(X=>{throw M.error("Failed to approve second token: "+X.message,{id:"approve1"}),X})))}else if(m){if(!c){const k=await y.allowance(o,je.router),D=await y.approve.estimateGas(je.router,b).catch(()=>100000n);k<C&&(console.log("Approving token1..."),M.loading("Approving token...",{id:"approve1"}),$.push(y.approve(je.router,b,{gasLimit:D*120n/100n,gasPrice:T}).then(_=>_.wait()).then(()=>{M.success("Token approved",{id:"approve1"})}).catch(_=>{throw M.error("Failed to approve token: "+_.message,{id:"approve1"}),_})))}}else{const k=await p.allowance(o,je.router),D=await p.approve.estimateGas(je.router,b).catch(()=>100000n);k<v&&(console.log("Approving token0..."),M.loading("Approving token...",{id:"approve0"}),$.push(p.approve(je.router,b,{gasLimit:D*120n/100n,gasPrice:T}).then(_=>_.wait()).then(()=>{M.success("Token approved",{id:"approve0"})}).catch(_=>{throw M.error("Failed to approve token: "+_.message,{id:"approve0"}),_})))}if($.length>0){await Promise.all($),console.log("All tokens approved");const k=await Promise.all([m?b:p.allowance(o,je.router),c?b:y.allowance(o,je.router)]);if(k[0]<v||k[1]<C)throw new Error("Approval process failed. Please try again.")}console.log("Creating pair..."),M.loading("Creating liquidity pool...",{id:"create-pool"});const L=await E.createPair.estimateGas(f,N).catch(()=>3000000n),S=await E.createPair(f,N,{gasLimit:L*120n/100n,gasPrice:T});console.log("Create pair transaction sent:",S.hash);const A=await S.wait();console.log("Create pair transaction confirmed"),M.success("Pool created successfully!",{id:"create-pool"});const h=A.logs.find(k=>{try{return E.interface.parseLog({topics:k.topics,data:k.data}).name==="PairCreated"}catch{return!1}});if(!h)throw new Error("Failed to get pair address from transaction receipt");const O=E.interface.parseLog({topics:h.topics,data:h.data}).args[2];console.log("Created pair address:",O),await new Promise(k=>setTimeout(k,2e3));const F=v*99n/100n,U=C*99n/100n,V=BigInt(Math.floor(Date.now()/1e3)+60*20);let P;if(M.loading("Adding initial liquidity...",{id:"add-liquidity"}),m||c){const k=m?N:f,D=m?v:C,_=m?C:v,H=m?F:U,X=m?U:F;console.log("Adding ETH liquidity with params:",{token:k,ethAmount:D.toString(),tokenAmount:_.toString(),ethAmountMin:H.toString(),tokenAmountMin:X.toString()}),P=await w.addLiquidityETH(k,_,X,H,o,V,{value:D,gasLimit:5e5,gasPrice:T})}else P=await w.addLiquidity(f,N,v,C,F,U,o,V,{gasLimit:5e5,gasPrice:T});console.log("Add liquidity transaction sent:",P.hash);const B=await P.wait();return console.log("Add liquidity transaction confirmed"),M.success("Initial liquidity added successfully!",{id:"add-liquidity"}),{pairAddress:O,createPairReceipt:A,addLiquidityReceipt:B}}catch(l){throw console.error("Error in pool creation:",l),l.message.includes("INSUFFICIENT_A_AMOUNT")?(M.error("Insufficient amount for token A. Try increasing the amount."),new Error("Insufficient amount for token A. Try increasing the amount.")):l.message.includes("INSUFFICIENT_B_AMOUNT")?(M.error("Insufficient amount for token B. Try increasing the amount."),new Error("Insufficient amount for token B. Try increasing the amount.")):l.message.includes("TRANSFER_FROM_FAILED")?(M.error("Transfer failed. Please check your token balances and approvals."),new Error("Transfer failed. Please check your token balances and approvals.")):(M.error(l.message),l)}}async swapExactTokensForTokens(t,s,n,r,l=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const o=await new he(window.ethereum).getSigner().catch(N=>{throw console.error("Error getting signer:",N),N.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):N}),m=new J(je.router,zt,o),c=new J(n[0],lt,o),u=await c.balanceOf(r);if(u<t)throw new Error(`Insufficient token balance. Required: ${de(t,await c.decimals())}, Available: ${de(u,await c.decimals())}`);const x=await c.allowance(r,je.router);if(console.log("Current allowance:",x.toString()),console.log("Required amount:",t.toString()),x<t){console.log("Approving token for swap...");try{x>0&&await(await c.approve(je.router,0)).wait(),await(await c.approve(je.router,t)).wait(),console.log("Token approved")}catch(N){throw console.error("Error approving token:",N),N.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):N}}else console.log("Sufficient allowance exists, skipping approval");if(await c.allowance(r,je.router)<t)throw new Error("Failed to approve token transfer");console.log("Executing swap with params:",{amountIn:t.toString(),amountOutMin:s.toString(),path:n,to:r,deadline:l.toString()});try{const N=await m.swapExactTokensForTokens(t,s,n,r,l,{gasLimit:3e6});console.log("Swap transaction:",N.hash);const v=await N.wait();return console.log("Swap receipt:",v),v}catch(N){throw console.error("Error executing swap:",N),N.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):N}}catch(d){throw console.error("Error swapping tokens:",d),d}}async addLiquidity(t,s,n,r,l,d,o,m=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{const c=new he(window.ethereum),u=await c.getSigner(),f=(await c.getFeeData()).gasPrice*110n/100n,N=new J(je.router,zt,u),v=new J(t,lt,u),C=new J(s,lt,u),[E,w]=await Promise.all([v.decimals(),C.decimals()]);console.log("Token details:",{tokenA:{address:t,decimals:E,amountDesired:de(n,E)},tokenB:{address:s,decimals:w,amountDesired:de(r,w)}}),console.log("Checking pool info...");const p=await this.getPoolInfo(t,s);let y=n,g=r;if(p){const U=p.reserve0,V=p.reserve1;if(U>0&&V>0)if(console.log("Current pool reserves:",{reserve0:de(U,p.token0.decimals),reserve1:de(V,p.token1.decimals),ratio:Number(V)/Number(U)}),t.toLowerCase()===p.token0.address.toLowerCase()){const P=n*V/U;console.log("Calculated optimal amounts (A is token0):",{optimalB:de(P,w),providedB:de(r,w)}),P>r?(g=r,y=r*U/V,console.log("Adjusting token A amount to match ratio")):(g=P,console.log("Using calculated optimal amount for token B"))}else{const P=n*U/V;console.log("Calculated optimal amounts (A is token1):",{optimalB:de(P,w),providedB:de(r,w)}),P>r?(g=r,y=r*V/U,console.log("Adjusting token A amount to match ratio")):(g=P,console.log("Using calculated optimal amount for token B"))}}const[j,T]=await Promise.all([v.balanceOf(o),C.balanceOf(o)]);if(console.log("Token balances:",{tokenA:de(j,E),tokenB:de(T,w)}),j<y)throw new Error(`Insufficient balance for token A. Required: ${de(y,E)}, Available: ${de(j,E)}`);if(T<g)throw new Error(`Insufficient balance for token B. Required: ${de(g,w)}, Available: ${de(T,w)}`);const b=99n,$=y*b/100n,L=g*b/100n;console.log("Final amounts:",{tokenA:{desired:de(y,E),minimum:de($,E)},tokenB:{desired:de(g,w),minimum:de(L,w)}}),console.log("Checking allowances...");const[S,A]=await Promise.all([v.allowance(o,je.router),C.allowance(o,je.router)]);console.log("Current allowances:",{tokenA:de(S,E),tokenB:de(A,w)});const h=Mt,I=[];if(S<y&&(console.log("Approving token A..."),M.loading("Approving first token...",{id:"approve-a"}),I.push(v.approve(je.router,h,{gasLimit:6e4,gasPrice:f}).then(U=>U.wait()).then(()=>{M.success("First token approved",{id:"approve-a"})}).catch(U=>{throw M.error("Failed to approve first token",{id:"approve-a"}),U}))),A<g&&(console.log("Approving token B..."),M.loading("Approving second token...",{id:"approve-b"}),I.push(C.approve(je.router,h,{gasLimit:6e4,gasPrice:f}).then(U=>U.wait()).then(()=>{M.success("Second token approved",{id:"approve-b"})}).catch(U=>{throw M.error("Failed to approve second token",{id:"approve-b"}),U}))),I.length>0){await Promise.all(I),console.log("All approvals completed");const[U,V]=await Promise.all([v.allowance(o,je.router),C.allowance(o,je.router)]);if(console.log("Final allowances:",{tokenA:de(U,E),tokenB:de(V,w)}),U<y||V<g)throw new Error("Approval process failed. Please try again.")}console.log("Adding liquidity with parameters:",{tokenA:t,tokenB:s,amountADesired:de(y,E),amountBDesired:de(g,w),amountAMin:de($,E),amountBMin:de(L,w)});const O=await N.addLiquidity(t,s,y,g,$,L,o,m,{gasLimit:5e5,gasPrice:f});console.log("Add liquidity transaction:",O.hash);const F=await O.wait();return console.log("Add liquidity receipt:",F),F}catch(c){if(console.error("Error adding liquidity:",c),c.message.includes("INSUFFICIENT_A_AMOUNT")){const u="The amount of first token is too low for the current pool ratio. Try increasing the amount or adjusting the ratio.";throw M.error(u),new Error(u)}else if(c.message.includes("INSUFFICIENT_B_AMOUNT")){const u="The amount of second token is too low for the current pool ratio. Try increasing the amount or adjusting the ratio.";throw M.error(u),new Error(u)}else if(c.message.includes("TRANSFER_FROM_FAILED")){const u="Transfer failed. Please check your token balances and approvals.";throw M.error(u),new Error(u)}throw M.error(c.message),c}}async getPoolInfo(t,s){try{const n=new he(window.ethereum),l=await new J(je.factory,zs,n).getPair(t,s);if(l==="0x0000000000000000000000000000000000000000")return null;const d=new J(l,La,n),[o,m,c]=await Promise.all([d.token0(),d.token1(),d.getReserves()]),u=new J(o,lt,n),x=new J(m,lt,n),[f,N,v,C]=await Promise.all([u.symbol(),u.decimals(),x.symbol(),x.decimals()]);return{pairAddress:l,token0:{address:o,symbol:f,decimals:N},token1:{address:m,symbol:v,decimals:C},reserve0:c[0],reserve1:c[1]}}catch(n){throw console.error("Error getting pool info:",n),n}}async getAmountOut(t,s){try{const n=new he(window.ethereum),r=new J(je.router,zt,n),l=[...s];l[0].toLowerCase()==="ETH"&&(l[0]=je.WETH);const d=await r.getAmountsOut(t,l);return d[d.length-1]}catch(n){throw console.error("Error getting amount out:",n),n}}async getTokenInfo(t){try{const s=new he(window.ethereum),n=new J(t,lt,s),[r,l,d]=await Promise.all([n.symbol().catch(()=>"Unknown"),n.name().catch(()=>"Unknown Token"),n.decimals().catch(()=>18)]);return t.toLowerCase()===je.WETH.toLowerCase()?{symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}:t.toLowerCase()===je.USDT.toLowerCase()?{symbol:"tUSDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}:t.toLowerCase()===je.USDC.toLowerCase()?{symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"}:{symbol:r||"Unknown",name:l||"Unknown Token",decimals:d||18}}catch(s){return console.error("Error getting token info:",s),{symbol:"Unknown",name:"Unknown Token",decimals:18}}}async getPoolInfoByAddress(t){try{const s=new he(window.ethereum),n=new J(t,La,s),[r,l]=await Promise.all([n.token0(),n.token1()]),d=new J(r,lt,s),o=new J(l,lt,s),[m,c,u,x,f]=await Promise.all([d.symbol(),o.symbol(),d.decimals(),o.decimals(),n.getReserves()]),N=await this.volumeTracker.getPoolVolumes(t,n,u,x);return console.log("Pool info volumes:",N),{pairAddress:t,token0:{address:r,symbol:m,decimals:u},token1:{address:l,symbol:c,decimals:x},reserves:{reserve0:f[0],reserve1:f[1],blockTimestampLast:f[2]},volumes:N}}catch(s){throw console.error("Error getting pool info:",s),s}}async swapExactETHForTokens(t,s,n,r,l=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const o=await new he(window.ethereum).getSigner().catch(x=>{throw console.error("Error getting signer:",x),x.message.includes("Ledger")?new Error("Please make sure your Ledger is connected and the Ethereum app is open"):x});if(n[0].toLowerCase()!==je.WETH.toLowerCase())throw new Error("Path must start with WETH for ETH swaps");const m=new J(je.router,zt,o);console.log("Executing ETH swap with params:",{amountIn:t.toString(),amountOutMin:s.toString(),path:n,to:r,deadline:l.toString()});const c=await m.swapExactETHForTokens(s,n,r,l,{value:t,gasLimit:3e6});console.log("Swap transaction:",c.hash);const u=await c.wait();return console.log("Swap receipt:",u),u}catch(d){throw console.error("Error swapping ETH for tokens:",d),d}}async swapExactTokensForTokens(t,s,n,r,l=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const d=new he(window.ethereum),o=await d.getSigner(),m=new J(je.router,zt,o),c=new J(n[0],lt,o),x=(await d.getFeeData()).gasPrice*110n/100n;return await c.allowance(r,je.router)<t&&await(await c.approve(je.router,t,{gasLimit:6e4,gasPrice:x})).wait(),await(await m.swapExactTokensForTokens(t,s,n,r,l,{gasLimit:15e4,gasPrice:x})).wait()}catch(d){throw console.error("Error swapping tokens:",d),d}}async addLiquidity(t,s,n,r,l,d,o,m=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{const c=new he(window.ethereum),u=await c.getSigner(),f=(await c.getFeeData()).gasPrice*110n/100n,N=new J(je.router,zt,u),v=new J(t,lt,u),C=new J(s,lt,u),E={gasLimit:6e4,gasPrice:f},w={gasLimit:6e4,gasPrice:f},p=await v.allowance(o,je.router),y=await C.allowance(o,je.router);return p<n&&await(await v.approve(je.router,n,E)).wait(),y<r&&await(await C.approve(je.router,r,w)).wait(),await(await N.addLiquidity(t,s,n,r,l,d,o,m,{gasLimit:25e4,gasPrice:f})).wait()}catch(c){throw console.error("Error adding liquidity:",c),c}}async swapExactTokensForETH(t,s,n,r,l=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{await window.ethereum.request({method:"eth_requestAccounts"});const d=new he(window.ethereum),o=await d.getSigner();if(n[n.length-1].toLowerCase()!==je.WETH.toLowerCase())throw new Error("Path must end with WETH for ETH swaps");const m=new J(je.router,zt,o),c=new J(n[0],lt,o);await c.allowance(r,je.router)<t&&(console.log("Approving token for swap..."),await(await c.approve(je.router,t)).wait(),console.log("Token approved")),console.log("Executing token to ETH swap with params:",{amountIn:t.toString(),amountOutMin:s.toString(),path:n,to:r,deadline:l.toString()});const f=(await d.getFeeData()).gasPrice*110n/100n,N=await m.swapExactTokensForETH(t,s,n,r,l,{gasLimit:25e4,gasPrice:f});console.log("Swap transaction:",N.hash);const v=await N.wait();return console.log("Swap receipt:",v),v}catch(d){throw console.error("Error swapping tokens for ETH:",d),d}}async getAllPools(){try{if(console.log("Getting all pools from factory"),this.isCacheValid()&&this.poolCache.size>0)return console.log("Returning pools from cache"),Array.from(this.poolCache.values());const t=new he(window.ethereum),s=new J(je.factory,zs,t),n=await s.allPairsLength();console.log("Total pairs:",n.toString());const r=20,l=[];for(let m=0;m<n;m+=r){const c=[];for(let u=0;u<r&&m+u<n;u++)c.push(s.allPairs(m+u));l.push(Promise.all(c))}const o=(await Promise.all(l)).flat();return o.forEach(m=>{this.poolCache.set(m.toLowerCase(),m)}),console.log("Found pairs:",o.length),this.lastCacheUpdate=Date.now(),this.saveCacheToStorage(),o}catch(t){if(console.error("Error getting all pools:",t),this.poolCache.size>0)return console.log("Returning cached pools due to error"),Array.from(this.poolCache.values());throw t}}async batchLoadPoolInfo(t){const s=t.filter(o=>!this.isCacheValid()||!this.poolInfoCache.has(o.toLowerCase()));if(s.length===0)return console.log("All pool info available in cache"),t.map(o=>this.poolInfoCache.get(o.toLowerCase()));console.log(`Loading info for ${s.length} uncached pools`);const n=10,r=[],l=[];for(let o=0;o<s.length;o+=n){const m=s.slice(o,o+n);l.push(Promise.all(m.map(c=>this.getPoolInfoByAddress(c))))}const d=await Promise.all(l);return r.push(...d.flat()),r.forEach(o=>{o&&this.poolInfoCache.set(o.pairAddress.toLowerCase(),o)}),this.saveCacheToStorage(),t.map(o=>this.poolInfoCache.get(o.toLowerCase())||null)}async calculateLiquidityAmounts(t,s,n){try{const r=await this.getPoolInfo(t,s);if(!r)return console.log("No existing pool - amounts will set initial price"),{amountA:n,amountB:n,priceRatio:"1",isNewPool:!0,estimatedPrice:"1"};const{reserve0:l,reserve1:d}=r,o=t.toLowerCase()===r.token0.address.toLowerCase(),m=new he(window.ethereum),c=new J(t,lt,m),u=new J(s,lt,m),[x,f]=await Promise.all([c.decimals(),u.decimals()]);let N,v,C;o?(N=n*d/l,v=de(d,f)/de(l,x),C=de(l,x)/de(d,f)):(N=n*l/d,v=de(l,f)/de(d,x),C=de(d,x)/de(l,f));const E=de(n,x),w=de(N,f);return console.log("Calculated liquidity amounts:",{amountA:E,amountB:w,priceRatio:v.toString(),estimatedPrice:C.toString(),poolReserves:{reserve0:de(l,r.token0.decimals),reserve1:de(d,r.token1.decimals)}}),{amountA:n,amountB:N,priceRatio:v.toString(),isNewPool:!1,estimatedPrice:C.toString(),token0IsTokenA:o}}catch(r){throw console.error("Error calculating liquidity amounts:",r),r}}calculateInitialPoolPrice(t,s,n,r){try{const l=de(t,n),d=de(s,r),o=Number(d)/Number(l),m=Number(l)/Number(d);return{token0Price:o.toString(),token1Price:m.toString()}}catch(l){throw console.error("Error calculating initial pool price:",l),l}}async removeLiquidity(t,s,n,r,l,d,o=BigInt(Math.floor(Date.now()/1e3)+60*20)){try{const m=new he(window.ethereum),c=await m.getSigner(),x=(await m.getFeeData()).gasPrice*110n/100n;return await(await new J(je.router,zt,c).removeLiquidity(t,s,n,r,l,d,o,{gasLimit:25e4,gasPrice:x})).wait()}catch(m){throw console.error("Error removing liquidity:",m),m}}async getPoolVolumes(t){try{const s=new he(window.ethereum),n=new J(t,La,s),[r,l]=await Promise.all([n.token0(),n.token1()]),d=new J(r,lt,s),o=new J(l,lt,s),[m,c]=await Promise.all([d.decimals(),o.decimals()]);return await this.volumeTracker.getPoolVolumes(t,n,m,c)}catch(s){return console.error("Error getting pool volumes:",s),{oneDayVolume:0,sevenDayVolume:0,thirtyDayVolume:0,oneDayTxCount:0,sevenDayTxCount:0,thirtyDayTxCount:0,poolCreatedAt:0}}}}const Tr={11155111:{ETH_USD:"0x694AA1769357215DE4FAC081bf1f309aDC325306",USDC_USD:"0xA2F78ab2355fe2f984D808B5CeE7FD0A93D5270E",USDT_USD:"0xA2F78ab2355fe2f984D808B5CeE7FD0A93D5270E"},1:{ETH_USD:"0x5f4eC3Df9cbd43714FE2740f5E3616155c5b8419",USDC_USD:"0x8fFfFfd4AfB6115b954Bd326cbe7B4BA576818f6",USDT_USD:"0x3E7d1eAB13ad0104d2750B8863b489D65364e32D"},137:{ETH_USD:"0xF9680D99D6C9589e2a93a78A04A279e509205945",USDC_USD:"0xfE4A8cc5b5B2366C1B58Bea3858e81843581b2F7",USDT_USD:"0x0A6513e40db6EB1b165753AD52E80663aeA50545"},1301:{ETH_USD:"0x13e3Ee699D1909E989722E753853AE30b17e08c5",USDC_USD:"0x16a9FA2FDa030272Ce99B29CF780dFA30361E0f3",USDT_USD:"0xECef79E109e997bCA29c1c0897ec9d7b03647F5E"}},Yn={11155111:{USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",USDT:"0x148b1ab3e2321d79027c4b71b6118e70434b4784"},137:{USDC:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174",USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F"},1301:{USDC:"0x9c891326Fd8b1a713982003a9733F03707103837",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"}},lm=["function decimals() external view returns (uint8)","function description() external view returns (string)","function version() external view returns (uint256)","function getRoundData(uint80 _roundId) external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)","function latestRoundData() external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)"];class Qn{constructor(){this.provider=new he(window.ethereum),this.uniswap=new $o,this.chainId=null}async init(){if(!this.chainId){const t=await this.provider.getNetwork();this.chainId=Number(t.chainId)}}async getLatestPrice(t){try{const s=new Ot("https://mainnet.optimism.io"),n=new J(t,lm,s),[r]=await Promise.all([n.latestRoundData()]);return Number(r.answer)/1e8}catch{return null}}async getETHPrice(){await this.init();const t=Tr[this.chainId];return t?.ETH_USD?this.getLatestPrice(t.ETH_USD):null}async getUSDCPrice(){await this.init();const t=Tr[this.chainId];return t?.USDC_USD?this.getLatestPrice(t.USDC_USD):1}async getUSDTPrice(){await this.init();const t=Tr[this.chainId];return t?.USDT_USD?this.getLatestPrice(t.USDT_USD):1}async getPriceFromStablePair(t){await this.init();const s=Yn[this.chainId];if(!s)return null;try{const n=await this.uniswap.getPoolInfo(t,s.USDC);if(n&&n.reserve0&&n.reserve1){const{reserve0:r,reserve1:l,token0:d,token1:o}=n,m=t.toLowerCase()===d.address.toLowerCase(),c=m?r:l,u=m?l:r,x=m?d.decimals:o.decimals,f=m?o.decimals:d.decimals,N=Number(de(c,x));return Number(de(u,f))/N}}catch{}try{const n=await this.uniswap.getPoolInfo(t,s.USDT);if(n&&n.reserve0&&n.reserve1){const{reserve0:r,reserve1:l,token0:d,token1:o}=n,m=t.toLowerCase()===d.address.toLowerCase(),c=m?r:l,u=m?l:r,x=m?d.decimals:o.decimals,f=m?o.decimals:d.decimals,N=Number(de(c,x));return Number(de(u,f))/N}}catch{}return null}async calculateUSDValue(t,s,n){try{if(await this.init(),!t||!s||n===void 0)return null;let r;const l=Yn[this.chainId];if(!l)return null;switch(t.toLowerCase()){case"eth":case"0xfff9976782d46cc05630d1f6ebab18b2324d6b14":r=await this.getETHPrice();break;case l.USDC.toLowerCase():r=1;break;case l.USDT.toLowerCase():r=1;break;default:r=await this.getPriceFromStablePair(t)}return r?Number(de(s,n))*r:null}catch{return null}}}function Lo(){const[a,t]=i.useState({ETH:null,USDC:null,USDT:null});return i.useEffect(()=>{const r=new Qn;let l=!0;async function d(){try{const[m,c,u]=await Promise.all([r.getETHPrice(),r.getUSDCPrice(),r.getUSDTPrice()]);l&&t({ETH:m,USDC:c,USDT:u})}catch(m){console.error("Error fetching token prices:",m)}}d();const o=setInterval(d,3e4);return()=>{l=!1,clearInterval(o)}},[]),{prices:a,calculateUSDValue:async(r,l)=>{try{return new Qn().calculateUSDValue(r.address,l,r.decimals)}catch(d){return console.error("Error calculating USD value:",d),null}},formatUSD:r=>r==null?"---":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}}function ws(){const a=mr(),{data:t}=bs();return i.useMemo(()=>!a||!t?null:new $o(a,t),[a,t])}const dm=()=>{const a=[{Icon:ct,delay:0,y:-10,x:-70,scale:.9,static:!0},{Icon:wr,delay:.2,y:-12,x:-68,scale:.85,static:!0},{Icon:jr,delay:.4,y:-8,x:-72,scale:.8,static:!0},{Icon:ct,delay:0,y:-10,x:-70,scale:1},{Icon:wr,delay:.4,y:-12,x:-70,scale:.95},{Icon:jr,delay:.8,y:-8,x:-70,scale:.9},{Icon:kn,delay:1.2,y:-14,x:-70,scale:1},{Icon:Bl,delay:1.6,y:-10,x:-70,scale:.95},{Icon:Dl,delay:2,y:-12,x:-70,scale:1},{Icon:Wi,delay:2.4,y:-8,x:-70,scale:.9},{Icon:wr,delay:0,y:-10,x:65,scale:.8,static:!0},{Icon:jr,delay:.2,y:-14,x:68,scale:.75,static:!0},{Icon:ct,delay:.4,y:-12,x:62,scale:.85,static:!0},{Icon:kn,delay:.6,y:-8,x:70,scale:.7,static:!0}],t={initial:{opacity:0,scale:.95},animate:{opacity:[.15,.2,.15],scale:[.95,1,.95],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}},s={initial:{rotate:0,opacity:.4},animate:{rotate:360,opacity:[.4,.7,.4],transition:{duration:8,repeat:1/0,ease:"linear"}}},n={initial:{opacity:0,scale:0},animate:d=>({opacity:[.4,.5,.4],scale:d.scale,transition:{opacity:{duration:2,repeat:1/0,ease:"easeInOut"},scale:{duration:.5,delay:d.delay}}})},r={initial:{opacity:0,scale:0,x:-70,y:d=>d.y,rotate:0},animate:d=>({opacity:[0,1,1,1,0],scale:[0,d.scale,d.scale*1.1,d.scale,0],rotate:[0,180,360,540,720],y:[d.y,d.y-20,d.y-25,d.y-15,d.y],x:[-70,-20,0,40,65],transition:{duration:3,delay:d.delay,repeat:1/0,ease:[.4,0,.2,1]}})},l={initial:{opacity:0,y:0},animate:{opacity:[0,.5,0],y:[-10,10],transition:{duration:2,repeat:1/0,ease:"easeInOut"}}};return e.jsxs(R.div,{className:"relative w-[480px] h-48",initial:"initial",animate:"animate",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-[#00ffbd]/5 to-transparent",style:{backgroundSize:"20px 20px",backgroundImage:"linear-gradient(to right, #00ffbd05 1px, transparent 1px), linear-gradient(to bottom, #00ffbd05 1px, transparent 1px)"}}),e.jsx(R.div,{variants:t,className:"absolute left-4 top-1/2 -translate-y-1/2 w-28 h-28 rounded-lg border border-[#00ffbd]/20 bg-[#00ffbd]/5",style:{boxShadow:"0 0 20px rgba(0, 255, 189, 0.15)",backdropFilter:"blur(8px)"},children:[...Array(5)].map((d,o)=>e.jsx(R.div,{variants:l,className:"absolute w-1 h-1 rounded-full bg-[#00ffbd]/30",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},`particle-left-${o}`))}),e.jsx(R.div,{variants:t,className:"absolute right-4 top-1/2 -translate-y-1/2 w-28 h-28 rounded-lg border border-[#00ffbd]/20 bg-[#00ffbd]/5",style:{boxShadow:"0 0 20px rgba(0, 255, 189, 0.15)",backdropFilter:"blur(8px)"},children:[...Array(5)].map((d,o)=>e.jsx(R.div,{variants:l,className:"absolute w-1 h-1 rounded-full bg-[#00ffbd]/30",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},`particle-right-${o}`))}),e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-64 h-6",children:[e.jsx("div",{className:"absolute inset-0 bg-[#00ffbd]/5 rounded-full"}),e.jsx(R.div,{animate:{backgroundPosition:["0px 0px","20px 0px"],transition:{duration:1,repeat:1/0,ease:"linear"}},className:"absolute inset-0 rounded-full",style:{backgroundImage:"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0, 255, 189, 0.1) 10px, rgba(0, 255, 189, 0.1) 20px)"}})]}),e.jsx(R.div,{animate:{opacity:[.2,.4,.2],scale:[.95,1.05,.95]},transition:{duration:2,repeat:1/0},className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 w-12 h-20 bg-[#00ffbd]/10 rounded-full blur-md"}),e.jsx(R.div,{variants:s,className:"absolute left-24 top-1/2 -translate-y-1/2 w-8 h-8 text-[#00ffbd]",style:{filter:"drop-shadow(0 0 8px rgba(0, 255, 189, 0.5))"},children:e.jsx(Nn,{className:"w-full h-full"})}),e.jsx(R.div,{variants:s,className:"absolute right-24 top-1/2 -translate-y-1/2 w-8 h-8 text-[#00ffbd]",style:{filter:"drop-shadow(0 0 8px rgba(0, 255, 189, 0.5))"},children:e.jsx(Nn,{className:"w-full h-full"})}),a.filter(d=>d.static).map((d,o)=>e.jsx(R.div,{custom:d,variants:n,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",style:{transform:`translate(${d.x}px, ${d.y}px)`},children:e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(d.Icon,{className:"text-[#00ffbd]/50",style:{filter:"drop-shadow(0 0 8px rgba(0, 255, 189, 0.3))",width:"100%",height:"100%"}})})},`static-${o}`)),a.filter(d=>!d.static).map((d,o)=>e.jsxs(R.div,{custom:d,variants:r,className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[e.jsx(R.div,{className:"absolute w-full h-full",style:{background:"linear-gradient(90deg, transparent, #00ffbd20)",filter:"blur(4px)",width:"20px",height:"2px",transform:"translateX(-10px)"}}),e.jsx("div",{className:"w-8 h-8 flex items-center justify-center",children:e.jsx(d.Icon,{className:"text-[#00ffbd]",style:{filter:"drop-shadow(0 0 12px rgba(0, 255, 189, 0.5))",width:"100%",height:"100%"}})})]},`moving-${o}`)),e.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 w-64 flex justify-between items-center",children:[e.jsx(R.div,{animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0},className:"w-2 h-2 rounded-full bg-[#00ffbd]"}),e.jsx(R.div,{animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,delay:.6},className:"w-2 h-2 rounded-full bg-[#00ffbd]"}),e.jsx(R.div,{animate:{opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0,delay:1.2},className:"w-2 h-2 rounded-full bg-[#00ffbd]"})]})]})};function Ro(){const{deployments:a}=un(),{prices:t}=Lo(),s=ws(),[n,r]=i.useState({volume24h:369,liquidity:639,holders:420}),[l,d]=i.useState(!0),[o,m]=i.useState(!1),[c,u]=i.useState(-100),[x,f]=i.useState(!1);i.useEffect(()=>{const E=async()=>{if(s)try{d(!0);const w=await s.getAllPools();let p=0,y=0,g=new Set;for(const j of w){const T=await s.getPoolInfoByAddress(j);if(!T)continue;const b=T.reserves?.reserve0&&t.ETH?Number(ethers.formatUnits(T.reserves.reserve0,T.token0.decimals))*t.ETH:0,$=T.reserves?.reserve1&&t.ETH?Number(ethers.formatUnits(T.reserves.reserve1,T.token1.decimals))*t.ETH:0;p+=b+$;const L=await s.getPoolVolume(j,"24h");L&&(y+=L*t.ETH),(await s.getPoolHolders(j)).forEach(A=>g.add(A))}r({volume24h:y,liquidity:p,holders:g.size})}catch(w){console.error("Error loading pool stats:",w)}finally{d(!1)}};s&&t.ETH&&E()},[s,t.ETH]),i.useEffect(()=>{setTimeout(()=>{u(75),setTimeout(()=>{f(!0),m(!0)},1e3)},500)},[]);const N=E=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(E),v=[{icon:oa,title:"Security First",description:"Built with battle-tested OpenZeppelin and Uniswap V2 contracts.",gradient:"from-[#00ffbd] to-[#00e6a9]"},{icon:Jr,title:"Token Types",description:"Create immutable ERC20 tokens with fixed supply for enhanced security and trust.",gradient:"from-blue-500 to-blue-600"},{icon:Hi,title:"Launch in Minutes",description:"Create your own ERC20 tokens with just a few clicks. No coding required.",gradient:"from-purple-500 to-purple-600"},{icon:$r,title:"Full Control",description:"Transfer tokens, manage allowances, and track balances with standard ERC20 features.",gradient:"from-pink-500 to-pink-600"},{icon:Pr,title:"Liquidity Tools",description:"Easily add liquidity and create trading pairs on DEXes.",gradient:"from-yellow-500 to-yellow-600"},{icon:$l,title:"NFT Collections",description:"Launch your NFT collection with customizable traits and rarity.",gradient:"from-green-500 to-green-600"}];function C({deployment:E}){const w=E.type==="nft",p=`/collection/${E.symbol}`,g=(T=>{if(!T)return"unknown";const b=T.toLowerCase();switch(b){case"unknown":case"localhost":case"1828369849":return"moonwalker";case"sepolia":return"sepolia";case"130":case"unichain-mainnet":return"unichain-mainnet";case"1301":case"unichain":return"unichain";case"10143":case"monad-testnet":return"monad-testnet";default:return b}})(E.chainName||E.network),j=(T,b)=>{switch(T.toLowerCase()){case"sepolia":return`https://sepolia.etherscan.io/token/${b}`;case"polygon":return`https://polygonscan.com/token/${b}`;case"unichain-mainnet":return`https://unichain.blockscout.com/token/${b}`;case"unichain":return`https://unichain-sepolia.blockscout.com/token/${b}`;case"moonwalker":return`https://moonwalker-sepolia.blockscout.com/token/${b}`;case"monad-testnet":return`https://monad-testnet.socialscan.io/token/${b}`;default:return"#"}};return e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-800 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E.artworkType==="video"?e.jsx("div",{className:"w-8 h-8 rounded-full overflow-hidden border border-gray-200 dark:border-gray-800",children:e.jsx("video",{src:E.logo||wt(E.logoIpfs),className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0})}):e.jsx("img",{src:E.logo||wt(E.logoIpfs),alt:E.name,className:"w-8 h-8 rounded-full",onError:T=>{T.target.onerror=null,T.target.src="/token-default.png"}}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[E.name," (",E.symbol,")"]}),w?e.jsx(Ll,{className:"text-[#00ffbd]",size:16,title:"NFT Collection"}):e.jsx(oa,{className:"text-[#00ffbd]",size:16,title:"Non-Mintable Token"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["on ",g]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-gray-500",children:gr(E.timestamp,{addSuffix:!0})}),w?e.jsxs(Ge,{to:p,className:"text-xs text-[#00ffbd] hover:text-[#00e6a9] transition-colors group relative",children:["Supply: ",Number(E.totalSupply).toLocaleString(),e.jsx("span",{className:"absolute bottom-full right-0 mb-2 w-max px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"View Collection"})]}):e.jsxs("a",{href:j(g,E.address),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-[#00ffbd] hover:text-[#00e6a9] transition-colors",children:["Supply: ",Number(E.totalSupply).toLocaleString()]})]})]})}return e.jsxs("main",{className:"mt-16 p-8",children:[e.jsxs("div",{className:"text-center mb-12 relative h-32",children:[e.jsxs("div",{className:`transition-all duration-1000 ${o?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-10"}`,children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-gray-900 dark:text-white",children:"Welcome to Token Factory"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Launch your own tokens and NFTs on Unichain, Polygon and other EVM chains (coming soon). Create, trade, and manage your crypto assets with our powerful platform."})]}),e.jsx("div",{className:`absolute ${x?"top-4":"-top-4"} transition-all duration-1000 ease-out`,style:{left:`${c}%`,transform:"translate(-50%, 0)"},children:e.jsx(dm,{})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-7xl mx-auto mb-12",children:v.map((E,w)=>e.jsxs("div",{className:"relative group overflow-hidden rounded-2xl",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${E.gradient} opacity-0 group-hover:opacity-100 transition-opacity duration-300`}),e.jsxs("div",{className:"relative p-6 bg-white dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 group-hover:border-transparent transition-colors duration-300",children:[e.jsx(E.icon,{className:"w-12 h-12 mb-4 text-[#00ffbd]"}),e.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:E.title}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:E.description})]})]},w))}),e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900 dark:text-white",children:"Ecosystem Integrations"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Pr,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Add Liquidity & Trade"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"List your token on popular DEXes and create trading pairs"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("a",{href:"https://token-factory.xyz/trading",target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] bg-[#00ffbd]/10 px-3 py-1 rounded-full text-sm hover:bg-[#00ffbd]/20 transition-colors",children:"Token Factory Swap"}),e.jsx("a",{href:"https://app.uniswap.org/#/pools",target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 dark:text-pink-400 bg-pink-100 dark:bg-pink-900/20 px-3 py-1 rounded-full text-sm hover:bg-pink-200 dark:hover:bg-pink-900/30 transition-colors",children:"Uniswap"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-sm",children:"More coming soon"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ds,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"NFT Marketplaces"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"List your NFTs on popular marketplaces instantly"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx("a",{href:"https://opensea.io/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/20 px-3 py-1 rounded-full text-sm hover:bg-blue-200 dark:hover:bg-blue-900/30 transition-colors",children:"OpenSea"}),e.jsx("a",{href:"https://market.wilderworld.com/",target:"_blank",rel:"noopener noreferrer",className:"text-orange-600 dark:text-orange-400 bg-orange-100 dark:bg-orange-900/20 px-3 py-1 rounded-full text-sm hover:bg-orange-200 dark:hover:bg-orange-900/30 transition-colors",children:"WWMarket"}),e.jsx("a",{href:"https://rarible.com/",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 bg-purple-100 dark:bg-purple-900/20 px-3 py-1 rounded-full text-sm hover:bg-purple-200 dark:hover:bg-purple-900/30 transition-colors",children:"Rarible"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800 px-3 py-1 rounded-full text-sm",children:"More coming soon"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Ml,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Deployments"})]}),e.jsx("div",{className:"space-y-3",children:a.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No tokens deployed yet"}):e.jsx("div",{className:"space-y-2",children:a.slice(0,5).map(E=>e.jsx(C,{deployment:E},E.timestamp))})})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Pl,{className:"w-8 h-8 text-[#00ffbd]"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Token Analytics"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Track your token's performance and trading activity"}),e.jsxs("div",{className:"mt-4 h-[200px] bg-gray-50 dark:bg-[#1a1b1f] rounded-lg p-4 relative overflow-hidden border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"ZFUN/POL"}),e.jsx("span",{className:"text-xs text-[#00ffbd]",children:"+2.45%"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-2 py-1 text-xs rounded bg-gray-200 dark:bg-[#2d2f36] text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-[#3d3f46]",children:"1H"}),e.jsx("button",{className:"px-2 py-1 text-xs rounded bg-[#00ffbd] text-black",children:"24H"}),e.jsx("button",{className:"px-2 py-1 text-xs rounded bg-gray-200 dark:bg-[#2d2f36] text-gray-600 dark:text-gray-400 hover:bg-gray-300 dark:hover:bg-[#3d3f46]",children:"7D"})]})]}),e.jsxs("div",{className:"relative h-[120px]",children:[e.jsx("div",{className:"absolute inset-0",children:e.jsxs("svg",{className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#00ffbd",stopOpacity:"0.1"}),e.jsx("stop",{offset:"100%",stopColor:"#00ffbd",stopOpacity:"0"})]})}),e.jsx("path",{d:"M0,100 C50,80 100,120 150,60 C200,0 250,40 300,20 L300,150 L0,150 Z",fill:"url(#gradient)",className:"transition-all duration-300"}),e.jsx("path",{d:"M0,100 C50,80 100,120 150,60 C200,0 250,40 300,20",fill:"none",stroke:"#00ffbd",strokeWidth:"2",className:"transition-all duration-300"})]})}),e.jsxs("div",{className:"absolute left-0 top-0 bottom-0 flex flex-col justify-between text-xs text-gray-500 py-2",children:[e.jsx("span",{children:"$1.24"}),e.jsx("span",{children:"$1.12"}),e.jsx("span",{children:"$1.00"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Volume 24h"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:l?"Loading...":N(n.volume24h)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Liquidity"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:l?"Loading...":N(n.liquidity)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Holders"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:l?"Loading...":n.holders.toLocaleString()})]})]})]})]})]})]})}function cm({children:a,className:t="",hideCorners:s=!1}){return e.jsxs("div",{className:"relative",children:[!s&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 border-t-2 border-l-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 border-t-2 border-r-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 border-b-2 border-l-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 border-[#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"})]}),e.jsx("div",{className:`bg-white dark:bg-[#0a0b0f] rounded-xl p-6 ${t}`,children:a})]})}const Xn={Art:{icon:Rl,label:"Art Collection"},gaming:{icon:Tn,label:"Gaming Assets"},photography:{icon:Ol,label:"Photography"},music:{icon:_l,label:"Music"},video:{icon:Ul,label:"Video Content"},collectibles:{icon:Wl,label:"Collectibles"},sports:{icon:Tn,label:"Sports"},other:{icon:Dt,label:"Other"}},mm={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},um={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",bounce:.3}}},vs=20;function Oo(){const[a,t]=i.useState([]),[s,n]=i.useState(!0),[r,l]=i.useState({network:"all",type:"all",sortBy:"newest"}),[d,o]=i.useState({}),[m,c]=i.useState(1),u=i.useRef(null);i.useEffect(()=>{(async()=>{try{n(!0);const j=await Fo({network:r.network,type:r.type});t(j)}catch{M.error("Failed to load collections")}finally{n(!1)}})()},[r.network,r.type]);const x=i.useMemo(()=>a.filter(g=>r.network!=="all"?r.network==="unichain-mainnet"?g.chainId===130:r.network==="unichain"?g.chainId===1301:r.network==="sepolia"?g.network==="sepolia"||g.chainId===11155111:r.network==="polygon"?g.network==="polygon"||g.chainId===137:r.network==="moonwalker"?g.network==="moonwalker"||g.chainId===1828369849:r.network==="monad-testnet"?g.network==="monad-testnet"||g.chainId===10143:!1:!(r.type!=="all"&&g.type!==r.type)).sort((g,j)=>{switch(r.sortBy){case"newest":return new Date(j.createdAt)-new Date(g.createdAt);case"oldest":return new Date(g.createdAt)-new Date(j.createdAt);case"name":return g.name.localeCompare(j.name);default:return 0}}),[a,r]);i.useEffect(()=>{(async()=>{for(const j of x)if(j?.mintToken?.address)try{const T=await at(j.mintToken.address);T?.logo&&o(b=>({...b,[j.mintToken.address.toLowerCase()]:T.logo}))}catch{}})()},[x]);const f=()=>{const[g,j]=i.useState(!1),[T,b]=i.useState(!1),[$,L]=i.useState(!1),S=F=>{u.current&&clearTimeout(u.current),F(!0)},A=F=>{u.current=setTimeout(()=>{F(!1)},300)},h=[{value:"all",label:"All Networks"},{value:"sepolia",label:"Sepolia"},{value:"unichain-mainnet",label:"Unichain Mainnet"},{value:"unichain",label:"Unichain Testnet"},{value:"polygon",label:"Polygon"},{value:"moonwalker",label:"Moonwalker"},{value:"monad-testnet",label:"Monad Testnet"}],I=[{value:"all",label:"All Types"},{value:"ERC721",label:"ERC721"},{value:"ERC1155",label:"ERC1155"}],O=[{value:"newest",label:"Newest First"},{value:"oldest",label:"Oldest First"},{value:"name",label:"Name A-Z"}];return e.jsxs("div",{className:"flex gap-4 mb-6 relative z-[100]",children:[e.jsxs("div",{className:"relative",onMouseEnter:()=>S(j),onMouseLeave:()=>A(j),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsx("span",{children:h.find(F=>F.value===r.network)?.label}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(u.current),onMouseLeave:()=>A(j),children:h.map(F=>e.jsx("button",{onClick:()=>{l(U=>({...U,network:F.value})),j(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 ${r.network===F.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:F.label},F.value))})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>S(b),onMouseLeave:()=>A(b),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsx("span",{children:I.find(F=>F.value===r.type)?.label}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),T&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(u.current),onMouseLeave:()=>A(b),children:I.map(F=>e.jsx("button",{onClick:()=>{l(U=>({...U,type:F.value})),b(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 ${r.type===F.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:F.label},F.value))})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>S(L),onMouseLeave:()=>A(L),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsx("span",{children:O.find(F=>F.value===r.sortBy)?.label}),e.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform ${$?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),$&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(u.current),onMouseLeave:()=>A(L),children:O.map(F=>e.jsx("button",{onClick:()=>{l(U=>({...U,sortBy:F.value})),L(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 ${r.sortBy===F.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:F.label},F.value))})]})]})},N=g=>{const j=Date.now(),T=new Date(g.releaseDate),b=new Date(g.mintEndDate||Date.now()+864e5),$=T-j;return b-j<=0||!g.infiniteMint&&g.totalMinted>=g.maxSupply?{label:"Ended",color:"text-red-400 bg-red-400/10",icon:mt}:$>0?$<36e5?{label:`Starts in ${Math.ceil($/6e4)}m`,color:"text-yellow-400 bg-yellow-400/10",icon:hs}:{label:"Coming Soon",color:"text-blue-400 bg-blue-400/10",icon:hs}:{label:"Live",color:"text-green-400 bg-green-400/10",icon:Rs}},v=g=>{const j=(g||"other").toLowerCase(),T=Xn[j]||Xn.other;return e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-[#1a1b1f] p-2 rounded-lg border border-gray-200 dark:border-gray-800",children:e.jsx(T.icon,{className:"w-4 h-4 text-gray-700 dark:text-[#00ffbd]"})}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:g||"Other"})]})},C=g=>{const j=g?.mintToken?.address?.toLowerCase();if(!j||j==="0x0000000000000000000000000000000000000000")return g?.network==="moonwalker"||g?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"}):g?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}):g?.network==="monad-testnet"||g?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}):e.jsx(ct,{className:"w-5 h-5 text-[#00ffbd]"});if(j==="0xf4a67fd6f54ff994b7df9013744a79281f88766e")return e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"});const b=d[j];return b?e.jsx("img",{src:b,alt:"Token",className:"w-5 h-5 rounded-full",onError:$=>{$.target.onerror=null,$.target.src="/token-default.png"}}):e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-5 h-5 rounded-full"})},E=()=>e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(g=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${g*.2}s`}},g))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] h-[340px]",children:[e.jsx("div",{className:"h-[180px] w-full bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:"w-16 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:"w-20 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"h-6 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]})]})]})]})}),w=i.useMemo(()=>{const g=(m-1)*vs,j=g+vs;return x.slice(g,j)},[x,m]),p=Math.ceil(x.length/vs),y=()=>e.jsxs("div",{className:"flex items-center justify-between py-4 border-t border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",(m-1)*vs+1," to ",Math.min(m*vs,x.length)," of ",x.length," collections"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(g=>Math.max(1,g-1)),disabled:m===1,className:`p-2 rounded-lg border border-gray-200 dark:border-gray-700 disabled:opacity-50 
            disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors`,children:e.jsx(Vc,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:p},(g,j)=>j+1).map(g=>e.jsx("button",{onClick:()=>c(g),className:`
                w-8 h-8 rounded-lg text-sm font-medium transition-colors
                ${m===g?"bg-[#00ffbd] text-gray-900":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}
              `,children:g},g))}),e.jsx("button",{onClick:()=>c(g=>Math.min(p,g+1)),disabled:m===p,className:`p-2 rounded-lg border border-gray-200 dark:border-gray-700 disabled:opacity-50 
            disabled:cursor-not-allowed hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors`,children:e.jsx(Gc,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]});return e.jsxs("div",{className:"h-screen flex flex-col overflow-hidden pt-16",children:[e.jsx("div",{className:"max-w-7xl mx-auto w-full px-8 flex-shrink-0",children:e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex flex-col gap-2 py-2 bg-gray-50 dark:bg-[#0a0b0f] sticky top-16 z-[100]",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Collections"}),e.jsx(f,{})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-8 custom-scrollbar bg-white dark:bg-[#0a0b0f] relative z-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx(R.div,{variants:mm,initial:"hidden",animate:"show",className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6 pt-2",children:s?Array.from({length:vs}).map((g,j)=>e.jsx(E,{},j)):w.map(g=>{const j=N(g);return e.jsx(R.div,{variants:um,whileHover:{scale:1.02,transition:{duration:.2}},whileTap:{scale:.98},children:e.jsx(Ge,{to:`/collection/${g.symbol}`,className:"block",children:e.jsxs("div",{className:"relative",children:[e.jsxs(R.div,{className:"absolute -top-[2px] -left-[2px] w-8 h-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(T=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${T*.2}s`}},T))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] h-[340px]",children:[e.jsx(R.div,{className:"relative h-[180px] w-full overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:g.artworkType==="video"?e.jsx("video",{src:g.previewUrl,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsx("img",{src:g.previewUrl,alt:g.name,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:"bg-[#0d0e12]/80 backdrop-blur-sm text-white px-2 py-0.5 rounded-full text-xs",children:g.type||"ERC721"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${j.color}`,children:[e.jsx(j.icon,{size:12}),e.jsx("span",{children:j.label})]})}),e.jsxs(R.div,{className:"flex flex-col flex-1 p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1 w-full",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white truncate flex-shrink min-w-0",children:g.name}),g.enableWhitelist&&e.jsxs("div",{className:"flex items-center gap-1 bg-[#00ffbd]/10 px-1.5 py-0.5 rounded-full flex-shrink-0 ml-auto",children:[e.jsx("span",{role:"img","aria-label":"crown",className:"text-[10px]",children:"👑"}),e.jsx("span",{className:"text-[10px] font-medium text-[#00ffbd]",children:"Whitelist Mint"})]})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs truncate",children:g.description})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[v(g.category),e.jsxs("div",{className:"flex items-center gap-1.5 bg-gray-50 dark:bg-[#1a1b1f] px-3 py-1.5 rounded-lg border border-gray-200 dark:border-gray-800",children:[C(g),e.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:g.mintPrice})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-[#1a1b1f] px-2 py-1 rounded-lg border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Supply"}),e.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:g.maxSupply||0})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-[#1a1b1f] px-2 py-1 rounded-lg border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:"Minted"}),e.jsx("span",{className:"text-xs font-medium text-gray-900 dark:text-white",children:g.totalMinted||0})]})})]})]})]})]})})},g.symbol)})}),!s&&x.length>vs&&e.jsx(y,{})]})})]})}const Zn=async(a,t=50)=>{try{const s=Te(fr,fe("collectionAddress","==",a),Ue("timestamp","desc"),Ht(t));return(await Ae(s)).docs.map(r=>{const l=r.data();return{id:r.id,...l,tokenId:l.tokenId.toString().replace(/[^0-9]/g,""),timestamp:l.timestamp?.toDate()}})}catch{return[]}},xm=(a,t)=>{try{const s=Te(fr,fe("collectionAddress","==",a),Ue("timestamp","desc"),Ht(50));return _t(s,n=>{const r=n.docs.map(l=>{const d=l.data();return{id:l.id,...d,tokenId:d.tokenId?.toString()||"0",timestamp:d.timestamp?.toDate()}});t(r)})}catch{return t([]),()=>{}}};function gm(){const[a,t]=i.useState([]),[s,n]=i.useState(!0),[r,l]=i.useState(!1),[d,o]=i.useState(!0),{symbol:m}=Os(),[c,u]=i.useState(null),[x,f]=i.useState({}),[N,v]=i.useState(50),C=i.useRef(null),E=i.useCallback(b=>{b[0].isIntersecting&&!r&&d&&w()},[r,d]);i.useEffect(()=>{const b={root:null,rootMargin:"20px",threshold:0},$=new IntersectionObserver(E,b);return C.current&&$.observe(C.current),()=>{C.current&&$.unobserve(C.current)}},[E]),i.useEffect(()=>{(async()=>{try{const $=await mn(m);if(u($),$?.contractAddress){const L=await Zn($.contractAddress,N);if($.mintToken?.address){const A=$.mintToken.address,h=await at(A);h?.logo&&f(I=>({...I,[A]:h.logo}))}t(L.map(A=>({...A,artworkType:$.artworkType,tokenName:$.name,tokenId:A.tokenId}))),n(!1);const S=xm($.contractAddress,A=>{t(h=>{const I=new Set(h.map(F=>F.id));return[...A.filter(F=>!I.has(F.id)),...h].slice(0,N)})});return()=>S()}}catch{n(!1)}})()},[m,N]);const w=async()=>{if(!(!c?.contractAddress||r||!d)){l(!0);try{const b=N+50,$=await Zn(c.contractAddress,b);$.length===a.length?o(!1):(t($.map(L=>({...L,artworkType:c.artworkType,tokenName:c.name,tokenId:L.tokenId}))),v(b))}catch{M.error("Failed to load more mints")}finally{l(!1)}}},p=b=>{try{if(!b)return"0";if(c?.mintToken?.type==="custom"||c?.mintToken?.type==="usdc"||c?.mintToken?.type==="usdt")return parseFloat(b).toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0});let $;if(typeof b=="string"){const A=b.replace(/,/g,"");try{$=Ie(A,"wei")}catch{$=Ut(A)}}else $=BigInt(b.toString());const L=ze($),S=parseFloat(L);return isNaN(S)?"0":S.toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}catch{return"0"}},y=b=>{const $=wt(b.image);return b.artworkType==="video"?e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black",children:e.jsx("video",{src:$,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0})}):e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black",children:e.jsx("img",{src:$,alt:"NFT",className:"w-full h-full object-cover",onError:L=>{L.target.onerror=null,L.target.src="/placeholder.png"}})})},g=b=>{const $=b.network==="polygon"?"https://polygonscan.com":b.network==="unichain-mainnet"||b.chainId===130?"https://unichain.blockscout.com":b.network==="unichain"?"https://unichain-sepolia.blockscout.com":b.network==="moonwalker"||b.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":b.network==="monad-testnet"||b.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io";return e.jsx("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:e.jsx("a",{href:`${$}/token/${b.collectionAddress}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#00ffbd] transition-colors",children:"token id"})})},j=b=>{const $=b.network==="polygon"?"https://polygonscan.com":b.network==="unichain-mainnet"||b.chainId===130?"https://unichain.blockscout.com":b.network==="unichain"?"https://unichain-sepolia.blockscout.com":b.network==="moonwalker"||b.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":b.network==="monad-testnet"||b.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io";return e.jsx("div",{className:"text-sm text-gray-400",children:e.jsx("a",{href:`${$}/tx/${b.hash}`,target:"_blank",rel:"noopener noreferrer",className:"hover:text-[#00ffbd] transition-colors",children:b.timestamp?gr(b.timestamp,{addSuffix:!0}):"Just now"})})},T=b=>{const $=b?.paymentToken?.address?.toLowerCase();return!$||$==="0x0000000000000000000000000000000000000000"?b.network==="moonwalker"||b.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-6 h-6"}):b.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-6 h-6"}):b.network==="monad-testnet"||b.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-6 h-6"}):e.jsx(ct,{className:"w-6 h-6 text-[#00ffbd]"}):$==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-6 h-6"}):$&&x[$]?e.jsx("img",{src:x[$],alt:b.paymentToken.symbol||"Token",className:"w-6 h-6 rounded-full",onError:S=>{S.target.onerror=null,S.target.src="/token-default.png"}}):b.paymentToken?.type==="custom"?e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-6 h-6 rounded-full"}):e.jsx(ct,{className:"w-6 h-6 text-[#00ffbd]"})};return i.useEffect(()=>{(async()=>{for(const $ of a)if($?.paymentToken?.address&&!x[$.paymentToken.address.toLowerCase()])try{const L=await at($.paymentToken.address);L?.logo&&f(S=>({...S,[$.paymentToken.address.toLowerCase()]:L.logo}))}catch(L){console.error("Error fetching token logo:",L)}})()},[a]),s?e.jsx("div",{className:"text-gray-400",children:"Loading..."}):a.length?e.jsx("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"overflow-y-auto",style:{height:"600px",paddingRight:"8px",scrollbarWidth:"thin",scrollbarColor:"#00ffbd transparent",marginBottom:"-16px"},css:`
            &::-webkit-scrollbar {
              width: 4px;
            }
            &::-webkit-scrollbar-track {
              background: transparent;
            }
            &::-webkit-scrollbar-thumb {
              background-color: #00ffbd;
              border-radius: 20px;
            }
          `,children:[a.map(b=>e.jsx("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800 min-h-[100px] hover:border-[#00ffbd] transition-colors duration-200 mb-4 last:mb-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[y(b),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-gray-800 dark:text-white font-medium",children:[b.quantity,"x ",b.tokenName||"Token"]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"by"}),e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(b.minterAddress),M.success("Address copied!")},className:"flex items-center gap-1 hover:text-[#00ffbd] transition-colors",children:[b.minterAddress.slice(0,6),"...",b.minterAddress.slice(-4),e.jsx(ys,{size:14})]})]}),g(b)]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-[#00ffbd]",children:[T(b),e.jsx("span",{className:"font-medium",children:p(b.value)})]}),j(b)]})]})},b.id)),e.jsx("div",{ref:C,className:"h-0 opacity-0","aria-hidden":"true"}),r&&e.jsx("div",{className:"flex justify-center py-2",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})})]})})}):e.jsx("div",{className:"text-gray-400",children:"No mints yet"})}const Jn="Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",hm={ethereum:"https://eth-mainnet.g.alchemy.com/v2/",sepolia:"https://eth-sepolia.g.alchemy.com/v2/",polygon:"https://polygon-mainnet.g.alchemy.com/v2/",mumbai:"https://polygon-mumbai.g.alchemy.com/v2/",arbitrum:"https://arb-mainnet.g.alchemy.com/v2/",optimism:"https://opt-mainnet.g.alchemy.com/v2/",unichain:"https://unichain-sepolia.g.alchemy.com/v2/","unichain-mainnet":"https://unichain.blockscout.com/v2/"},Kn={moonwalker:"https://moonwalker-rpc.eu-north-2.gateway.fm",unichain:"https://sepolia.unichain.org","unichain-mainnet":"https://unichain.blockscout.com","monad-testnet":"https://testnet-rpc.monad.xyz/"},ei=a=>{if(!a||typeof a!="string")return"Invalid Address";const t=a.startsWith("0x")?a:`0x${a}`;return`${t.substring(0,6)}...${t.substring(t.length-4)}`},pm=a=>{switch(a){case 0:return e.jsx(Gi,{className:"text-yellow-400",size:24});case 1:return e.jsx(Cn,{className:"text-gray-300",size:24});case 2:return e.jsx(Cn,{className:"text-amber-600",size:24});default:return null}},Cr=({active:a,payload:t,type:s})=>a&&t&&t.length?e.jsx("div",{className:"bg-[#1a1b1f] p-2 rounded-lg border border-gray-800",children:s==="pie"?e.jsx("p",{className:"text-[#00ffbd] text-xs",children:`${t[0].name}: ${t[0].value} NFTs`}):s==="bar"?e.jsxs("div",{className:"text-xs",children:[e.jsx("p",{className:"text-white",children:t[0].payload.label}),e.jsxs("p",{className:"text-[#00ffbd]",children:[t[0].value," holders"]})]}):e.jsx("p",{className:"text-[#00ffbd] text-xs",children:`${t[0].value} NFTs`})}):null;function fm({collection:a}){const[t,s]=i.useState([]),[n,r]=i.useState(!0),[l,d]=i.useState(null);if(a?.network==="monad-testnet"||a?.chainId===10143)return e.jsx("div",{className:"flex items-center justify-center py-12 bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Top holders analytics for Monad Testnet are under development."})]})});i.useEffect(()=>{const f=async()=>{try{if(!a?.contractAddress)throw new Error("No contract address available");if(a.chainId===130||a.chainId===1301){await C(a.contractAddress);return}if(a.network==="moonwalker"||a.chainId===1828369849){await E(a.contractAddress);return}if(a.network==="monad-testnet"||a.chainId===10143){await w(a.contractAddress);return}const p=a.network==="polygon"?"polygon":"sepolia",y=hm[p];if(!y)throw new Error(`Unsupported network: ${a.network}`);const g=a.contractAddress;console.log("Using contract address:",g);const j=`${y}${Jn}/getOwnersForCollection?contractAddress=${g}&withTokenBalances=true`,T=await fetch(j);if(!T.ok){const L=await T.text();throw new Error(`Alchemy API error (${T.status}): ${L}`)}const b=await T.json();if(!b?.ownerAddresses)throw new Error("Invalid response format from Alchemy API");const $=b.ownerAddresses.filter(L=>L&&typeof L=="object"&&L.ownerAddress).map(L=>({holderAddress:L.ownerAddress,quantity:Array.isArray(L.tokenBalances)?L.tokenBalances.reduce((S,A)=>S+Number(A.balance||0),0):0})).filter(L=>L.quantity>0).sort((L,S)=>S.quantity-L.quantity);s($),d(null)}catch(p){console.error("Error loading holders:",p),d(p.message),M.error(`Failed to load top holders: ${p.message}`)}finally{r(!1)}},N=async(p,y)=>{const g=["event Transfer(address indexed from, address indexed to, uint256 indexed tokenId)"],T=await new J(p,g,y).queryFilter("Transfer",0,"latest"),b=new Map;for(const L of T){const{to:S,tokenId:A}=L.args;b.set(A.toString(),S)}const $=new Map;for(const L of b.values())if(L!=="0x0000000000000000000000000000000000000000"){const S=$.get(L)||0;$.set(L,S+1)}return Array.from($.entries()).map(([L,S])=>({holderAddress:L,quantity:S})).filter(L=>L.quantity>0&&L.holderAddress!=="0x0000000000000000000000000000000000000000").sort((L,S)=>S.quantity-L.quantity)},v=async(p,y)=>{const g=["event TransferSingle(address indexed operator, address indexed from, address indexed to, uint256 id, uint256 value)","event TransferBatch(address indexed operator, address indexed from, address indexed to, uint256[] ids, uint256[] values)"],j=new J(p,g,y),T=new Map,b=await j.queryFilter("TransferSingle",0,"latest");for(const L of b){const{from:S,to:A,value:h}=L.args;if(S!=="0x0000000000000000000000000000000000000000"){const I=T.get(S)||0;T.set(S,Math.max(0,I-Number(h)))}if(A!=="0x0000000000000000000000000000000000000000"){const I=T.get(A)||0;T.set(A,I+Number(h))}}const $=await j.queryFilter("TransferBatch",0,"latest");for(const L of $){const{from:S,to:A,values:h}=L.args;for(let I=0;I<h.length;I++){if(S!=="0x0000000000000000000000000000000000000000"){const O=T.get(S)||0;T.set(S,Math.max(0,O-Number(h[I])))}if(A!=="0x0000000000000000000000000000000000000000"){const O=T.get(A)||0;T.set(A,O+Number(h[I]))}}}return Array.from(T.entries()).map(([L,S])=>({holderAddress:L,quantity:S})).filter(L=>L.quantity>0&&L.holderAddress!=="0x0000000000000000000000000000000000000000").sort((L,S)=>S.quantity-L.quantity)},C=async p=>{try{const y=new Ot(a.chainId===130?"https://mainnet.unichain.org":"https://sepolia.unichain.org"),g=a.type?.toUpperCase().replace("-","")==="ERC1155"||a.tokenType?.toUpperCase().replace("-","")==="ERC1155"||a.contractType?.toUpperCase().replace("-","")==="ERC1155";let j;g?j=await v(p,y):j=await N(p,y),s(j),d(null)}catch(y){console.error("Error loading Unichain holders:",y),d(y.message),M.error(`Failed to load holders: ${y.message}`)}},E=async p=>{try{const y=new Ot(Kn.moonwalker),g=a.type?.toUpperCase().replace("-","")==="ERC1155"||a.tokenType?.toUpperCase().replace("-","")==="ERC1155"||a.contractType?.toUpperCase().replace("-","")==="ERC1155";let j;g?j=await v(p,y):j=await N(p,y),s(j),d(null)}catch(y){console.error("Error loading Moonwalker holders:",y),d(y.message),M.error(`Failed to load holders: ${y.message}`)}},w=async p=>{try{const y=new Ot(Kn["monad-testnet"]),g=a.type?.toUpperCase().replace("-","")==="ERC1155"||a.tokenType?.toUpperCase().replace("-","")==="ERC1155"||a.contractType?.toUpperCase().replace("-","")==="ERC1155";let j;g?j=await v(p,y):j=await N(p,y),s(j),d(null)}catch(y){console.error("Error loading Monad holders:",y),d(y.message),M.error(`Failed to load holders: ${y.message}`)}};a&&f()},[a]);const o=f=>{f.reduce((y,g)=>y+g.quantity,0);const N=Math.max(...f.map(y=>y.quantity)),E=(y=>{if(y<=5)return[{min:1,max:1,label:"1 NFT"},{min:2,max:3,label:"2-3 NFTs"},{min:4,max:5,label:"4-5 NFTs"}];if(y<=10)return[{min:1,max:2,label:"1-2 NFTs"},{min:3,max:5,label:"3-5 NFTs"},{min:6,max:10,label:"6-10 NFTs"}];if(y<=20)return[{min:1,max:5,label:"1-5 NFTs"},{min:6,max:10,label:"6-10 NFTs"},{min:11,max:20,label:"11-20 NFTs"}];{const g=Math.ceil(y/4);return[{min:1,max:g,label:`1-${g} NFTs`},{min:g+1,max:g*2,label:`${g+1}-${g*2} NFTs`},{min:g*2+1,max:g*3,label:`${g*2+1}-${g*3} NFTs`},{min:g*3+1,max:y,label:`${g*3+1}+ NFTs`}]}})(N).map(y=>({name:y.label,label:y.label,value:f.filter(g=>g.quantity>=y.min&&g.quantity<=y.max).length})).filter(y=>y.value>0),w=f.slice(0,10).map(y=>({name:ei(y.holderAddress),value:y.quantity})),p=f.map((y,g)=>({name:g,value:f.slice(0,g+1).reduce((j,T)=>j+T.quantity,0)}));return{distributionData:E,top10Data:w,cumulativeData:p}};if(n)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})});if(l)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 dark:text-red-400 mb-2",children:"Error loading holders data"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:l})]});const{distributionData:m,top10Data:c,cumulativeData:u}=o(t),x=t.reduce((f,N)=>f+N.quantity,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Unique Holders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t.length}),e.jsx("div",{className:"h-32",children:e.jsx(Xa,{width:"100%",height:"100%",children:e.jsxs(Hl,{data:m,barSize:24,margin:{top:5,right:5,bottom:5,left:5},children:[e.jsx(qi,{dataKey:"name",tick:!1}),e.jsx(Za,{content:f=>e.jsx(Cr,{...f,type:"bar"}),cursor:{fill:"rgba(0, 255, 189, 0.1)"}}),e.jsx(ql,{dataKey:"value",fill:"#00ffbd",radius:[4,4,0,0]})]})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Holder distribution by NFT count"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Top 10 Hold"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:[x>0?(t.slice(0,10).reduce((f,N)=>f+N.quantity,0)/x*100).toFixed(1):"0","%"]}),e.jsx("div",{className:"h-32",children:e.jsx(Xa,{width:"100%",height:"100%",children:e.jsxs(zl,{children:[e.jsx(Vl,{data:c,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:30,outerRadius:50,children:c.map((f,N)=>e.jsx(Gl,{fill:`hsl(166, 100%, ${50+N*5}%)`},N))}),e.jsx(Za,{content:f=>e.jsx(Cr,{...f,type:"pie"})})]})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Top 10 holders by NFT count"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Avg. Per Holder"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:t.length>0?(x/t.length).toFixed(1):"0"}),e.jsx("div",{className:"h-32",children:e.jsx(Xa,{width:"100%",height:"100%",children:e.jsxs(zi,{data:u,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"avgGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#00ffbd",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#00ffbd",stopOpacity:0})]})}),e.jsx(Za,{content:f=>e.jsx(Cr,{...f})}),e.jsx(Vi,{type:"monotone",dataKey:"value",stroke:"#00ffbd",fill:"url(#avgGradient)"})]})})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center",children:"Cumulative NFT distribution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-4",children:"Top Holders"}),e.jsx("div",{className:"space-y-4",children:t.length===0?e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"No holders data yet"}):e.jsx("div",{className:"overflow-y-auto",style:{maxHeight:t.length>5?"250px":"auto",paddingRight:t.length>5?"8px":"0",scrollbarWidth:"thin",scrollbarColor:"#00ffbd transparent"},css:`
                &::-webkit-scrollbar {
                  width: 4px;
                }
                &::-webkit-scrollbar-track {
                  background: transparent;
                }
                &::-webkit-scrollbar-thumb {
                  background-color: #00ffbd;
                  border-radius: 20px;
                }
              `,children:t.map((f,N)=>e.jsxs("div",{className:"flex items-center justify-between text-sm border-b border-gray-100 dark:border-gray-800 last:border-0 pb-3 last:pb-0 mb-3 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-[40px]",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["#",N+1]}),pm(N)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ei(f.holderAddress)}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(f.holderAddress),M.success("Address copied!")},className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(ys,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:[f.quantity," NFTs"]}),e.jsxs("span",{className:"text-[#00ffbd] w-16 text-right",children:[(f.quantity/x*100).toFixed(1),"%"]})]})]},f.holderAddress))})})]})]})}const Ia=a=>a?`${a.slice(0,6)}...${a.slice(-4)}`:"",ym=async({text:a,sender:t,collectionAddress:s,replyTo:n=null})=>{try{const r=be(tt,"collections",s,"messages"),l={text:a.trim(),sender:t.toLowerCase(),timestamp:We()};return n?(l.replyTo={messageId:n.messageId,text:n.text.substring(0,100),sender:n.sender.toLowerCase()},l.threadId=n.threadId||n.messageId,l.isThread=!0,l.threadDepth=n.threadDepth?n.threadDepth+1:0):(l.replyTo=null,l.threadId=null,l.isThread=!1,l.threadDepth=null),await et(r,l),!0}catch(r){return console.error("Error sending message:",r),!1}},bm=(a,t)=>{const s=be(tt,"collections",a,"messages"),n=Te(s,Ue("timestamp","desc"),Ht(100));return _t(n,r=>{const l=[];r.forEach(o=>{const m=o.data();l.push({id:o.id,...m,timestamp:m.timestamp instanceof _r?m.timestamp.toDate():new Date})});const d=l.sort((o,m)=>{const c=o.timestamp-m.timestamp;return c!==0?c:o.threadId===m.id?1:m.threadId===o.id?-1:0});t(d)})},ti=async(a,t)=>{try{const s=ge(tt,"collections",a,"moderation","bannedUsers");return await ts(s,{addresses:t,updatedAt:We()}),!0}catch(s){throw console.error("Error updating banned users:",s),s}},wm=async a=>{try{const t=ge(tt,"collections",a,"moderation","bannedUsers"),s=await De(t);return s.exists()?s.data().addresses||[]:[]}catch(t){return console.error("Error loading banned users:",t),[]}},jm=async(a,t)=>{try{const s=ge(tt,"collections",a,"messages",t);return await Us(s),!0}catch(s){throw console.error("Error deleting message:",s),s}},vm=a=>{const t=a.toLowerCase().slice(2,10),s=parseInt(t,16)%360;return{primary:`hsl(${s}, 90%, 65%)`,secondary:`hsl(${(s+40)%360}, 85%, 60%)`,accent:`hsl(${(s+180)%360}, 80%, 65%)`,highlight:`hsl(${(s+150)%360}, 85%, 75%)`,background:"#22232b"}},Nm=({address:a,size:t=32})=>{const s=vm(a),n=Array.from({length:6},(d,o)=>parseInt(a.slice(2+o*2,4+o*2),16)),r=d=>{const o=n[0]%360*(Math.PI/180),m=15+n[1]%10,c=40+Math.cos(o+d)*m,u=40+Math.sin(o+d)*m;return{x:c,y:u}},l=Array.from({length:6},(d,o)=>r(o*Math.PI/3));return e.jsxs("svg",{width:t,height:t,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("circle",{cx:"40",cy:"40",r:"40",fill:s.background}),e.jsx("path",{d:`
          M ${l[0].x} ${l[0].y}
          C ${l[1].x} ${l[1].y},
            ${l[2].x} ${l[2].y},
            ${l[3].x} ${l[3].y}
          S ${l[4].x} ${l[4].y},
            ${l[5].x} ${l[5].y}
          Z
        `,fill:s.primary,opacity:"0.7"}),l.map((d,o)=>e.jsx("circle",{cx:d.x,cy:d.y,r:3+n[o]%4,fill:o%2?s.secondary:s.accent,opacity:"0.9"},o)),e.jsx("path",{d:`
          M ${40-n[2]%15} ${40-n[3]%15}
          Q 40 ${40-n[4]%20},
            ${40+n[5]%15} ${40+n[0]%15}
        `,stroke:s.highlight,strokeWidth:"3",fill:"none"}),e.jsx("circle",{cx:"40",cy:"40",r:5+n[1]%5,fill:s.secondary,opacity:"0.8"}),Array.from({length:3}).map((d,o)=>e.jsx("line",{x1:40+Math.cos(n[o]*Math.PI/12)*20,y1:40+Math.sin(n[o]*Math.PI/12)*20,x2:40+Math.cos((n[o]+2)*Math.PI/12)*25,y2:40+Math.sin((n[o]+2)*Math.PI/12)*25,stroke:s.accent,strokeWidth:"1.5",opacity:"0.6"},o))]})},Sr={dark:{bg:"bg-[#1a1b1f]",header:"bg-gray-800",messageBubble:{sent:"bg-[#00ffbd] text-gray-900",received:"bg-gray-700/90 text-white"},input:{bg:"bg-gray-700",text:"text-white",placeholder:"text-gray-400"},address:{bg:"bg-gray-800/50",text:"text-[#00ffbd]"},time:"text-gray-500",link:"text-[#00ffbd]",linkPreview:"bg-black/20"},light:{bg:"bg-gray-100",header:"bg-white",messageBubble:{sent:"bg-[#00ffbd] text-gray-900",received:"bg-gray-200 text-gray-900"},input:{bg:"bg-gray-100",text:"text-gray-900",placeholder:"text-gray-500"},address:{bg:"bg-gray-200/50",text:"text-gray-700"},time:"text-gray-500"},midnight:{bg:"bg-gradient-to-br from-blue-900 via-gray-900 to-purple-900",header:"bg-black/40",messageBubble:{sent:"bg-blue-500/90 text-white",received:"bg-gray-700/90 text-white"},input:{bg:"bg-gray-800/60",text:"text-blue-100",placeholder:"text-gray-400"},address:{bg:"bg-blue-900/30",text:"text-blue-400"},time:"text-blue-300/70"},sunset:{bg:"bg-gradient-to-br from-orange-500 via-red-500 to-pink-500",header:"bg-black/40",messageBubble:{sent:"bg-yellow-400 text-gray-900",received:"bg-white/90 text-gray-900"},input:{bg:"bg-red-900/30",text:"text-white",placeholder:"text-gray-300"},address:{bg:"bg-orange-900/30",text:"text-orange-200"},time:"text-orange-200/70",link:"text-yellow-400",linkPreview:"bg-black/20"},forest:{bg:"bg-gradient-to-br from-green-700 via-green-800 to-green-900",header:"bg-black/40",messageBubble:{sent:"bg-green-400 text-gray-900",received:"bg-gray-200 text-gray-900"},input:{bg:"bg-green-900/30",text:"text-green-100",placeholder:"text-gray-400"},address:{bg:"bg-green-900/30",text:"text-green-400"},time:"text-green-300/70"},sepia:{bg:"bg-gradient-to-br from-[#704214] via-[#8B5E34] to-[#A0522D]",header:"bg-[#3E1F0A]/60",messageBubble:{sent:"bg-[#DEB887] text-[#3E1F0A]",received:"bg-[#F5DEB3] text-[#3E1F0A]"},input:{bg:"bg-[#3E1F0A]/30",text:"text-[#DEB887]",placeholder:"text-[#DEB887]/60"},address:{bg:"bg-[#3E1F0A]/40",text:"text-[#DEB887]"},time:"text-[#DEB887]/70"},ocean:{bg:"bg-gradient-to-br from-cyan-600 via-blue-700 to-blue-900",header:"bg-black/40",messageBubble:{sent:"bg-cyan-400 text-gray-900",received:"bg-white/90 text-gray-900"},input:{bg:"bg-blue-900/30",text:"text-cyan-100",placeholder:"text-gray-400"},address:{bg:"bg-cyan-900/30",text:"text-cyan-400"},time:"text-cyan-200/70"},cosmic:{bg:"bg-gradient-to-br from-purple-900 via-violet-800 to-indigo-900",header:"bg-black/40",messageBubble:{sent:"bg-violet-400 text-gray-900",received:"bg-indigo-200 text-gray-900"},input:{bg:"bg-purple-900/30",text:"text-violet-100",placeholder:"text-gray-400"},address:{bg:"bg-violet-900/30",text:"text-violet-400"},time:"text-violet-200/70"},matrix:{bg:"bg-gradient-to-br from-gray-900 to-gray-800",header:"bg-black/40",messageBubble:{sent:"bg-[#00ff00] text-gray-900",received:"bg-gray-800 text-[#00ff00] border border-[#00ff00]/30"},input:{bg:"bg-gray-900",text:"text-[#00ff00]",placeholder:"text-[#00ff00]/60"},address:{bg:"bg-gray-900/50",text:"text-[#00ff00]"},time:"text-[#00ff00]/70"}},km=({replyTo:a,onClose:t})=>e.jsxs("div",{className:"flex items-center gap-2 bg-black/20 rounded-lg mb-2 overflow-hidden",children:[e.jsx("div",{className:"w-1 h-full bg-[#00ffbd] self-stretch"}),e.jsxs("div",{className:"flex-1 min-w-0 px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs mb-0.5",children:[e.jsx(Ur,{className:"w-3 h-3 text-[#00ffbd]"}),e.jsxs("span",{className:"font-medium text-[#00ffbd]",children:["Replying to ",Ia(a.sender)]})]}),e.jsx("div",{className:"text-sm text-gray-400 truncate max-w-[300px]",children:a.text})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-black/20 transition-colors",children:e.jsx(xa,{className:"w-4 h-4 text-gray-400 hover:text-gray-300"})})]}),Hr=({message:a,isMyMessage:t,isCreatorMessage:s,onReply:n,currentTheme:r,getTheme:l,isCreator:d,handleModeration:o,address:m})=>{const c=!a.threadDepth||a.threadDepth<3,u=f=>{const N=document.getElementById(`message-${f}`);N&&(N.scrollIntoView({behavior:"smooth",block:"center"}),N.classList.add("highlight-message"),setTimeout(()=>N.classList.remove("highlight-message"),2e3))},x=a.text.match(/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g)||[];return e.jsxs("div",{className:"relative group",id:`message-${a.id}`,children:[a.replyTo&&e.jsxs("button",{onClick:()=>u(a.replyTo.messageId),className:`flex items-center mb-1 max-w-[256px] bg-black/20 rounded-lg 
            hover:bg-black/30 transition-colors overflow-hidden cursor-pointer`,children:[e.jsx("div",{className:"w-1 h-full bg-[#00ffbd] self-stretch"}),e.jsxs("div",{className:"px-3 py-1.5 text-left",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Ur,{className:"w-3 h-3 text-[#00ffbd]"}),e.jsx("span",{className:"font-medium text-[#00ffbd]",children:Ia(a.replyTo.sender)})]}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:a.replyTo.text})]})]}),e.jsx("div",{className:`
        flex
        ${t?"justify-end":"justify-start"}
        min-w-[60px] max-w-[85%]
      `,children:e.jsx("div",{className:`
          relative group flex flex-col
          ${t?"items-end":"items-start"}
        `,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`
              px-4 py-2 rounded-2xl break-words relative
              ${t?"rounded-tr-sm":"rounded-tl-sm"}
              ${s?"!bg-gradient-to-r from-yellow-500 to-yellow-600 !text-white":t?l(r).messageBubble.sent:l(r).messageBubble.received}
            `,children:[e.jsx("div",{className:"whitespace-pre-wrap inline-block",children:Cm(a.text)}),x.map((f,N)=>e.jsx(Sm,{url:f,currentTheme:r,getTheme:l},N))]}),e.jsxs("div",{className:`absolute -right-20 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 
              flex items-center gap-2 transition-opacity`,children:[c&&e.jsx("button",{onClick:()=>n(a),className:"p-1 rounded-full hover:bg-gray-700/50 transition-all",title:"Reply",children:e.jsx(Ur,{className:"w-3.5 h-3.5 text-[#00ffbd]"})}),d(m)&&(t||!t)&&e.jsx("button",{onClick:()=>o("delete",a.sender,a.id),className:"p-1 rounded hover:bg-red-500/10 text-red-400",title:"Delete Message",children:e.jsx(Xl,{className:"w-3.5 h-3.5"})}),d(m)&&!t&&e.jsx("button",{onClick:()=>o("ban",a.sender),className:"p-1 rounded hover:bg-red-500/10 text-red-400",title:"Ban User",children:e.jsx(Yi,{className:"w-3.5 h-3.5"})})]})]})})}),a.threadId&&!a.replyTo&&e.jsx("div",{className:"pl-4 border-l-2 border-gray-700 mt-2",children:messages.filter(f=>f.threadId===a.threadId&&f.id!==a.id).map(f=>e.jsx(Hr,{message:f,isMyMessage:f.sender.toLowerCase()===m?.toLowerCase(),isCreatorMessage:d(f.sender),onReply:handleReply,currentTheme:r,getTheme:l,isCreator:d,handleModeration:o,address:m},f.id))})]})},Tm=({show:a,onClose:t,bannedAddresses:s,onUnban:n})=>a?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-[#1a1b1f] rounded-lg p-6 w-96 max-w-[90vw]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:"Banned Users"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xa,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:s.length===0?e.jsx("p",{className:"text-gray-400 text-center py-4",children:"No banned users"}):s.map(r=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-800",children:[e.jsx("span",{className:"text-gray-300",children:Ia(r)}),e.jsx("button",{onClick:()=>n(r),className:"text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded hover:bg-red-500/30 transition-colors",children:"Unban"})]},r))})]})}):null,Cm=a=>{const t=/(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/g;return Wc.sanitize(a).split(t).map((n,r)=>n.match(t)?e.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:underline break-all",onClick:l=>l.stopPropagation(),children:n},r):n)},Sm=({url:a,currentTheme:t,getTheme:s})=>{try{const n=new URL(a),r=/\.(jpg|jpeg|png|gif|webp)$/i.test(n.pathname),l=n.hostname==="twitter.com"||n.hostname==="x.com",d=s(t);if(l){const o=a.split("/").pop().split("?")[0];return e.jsx("div",{className:`mt-2 rounded-lg overflow-hidden ${d.linkPreview}`,children:e.jsx("div",{className:"custom-twitter-embed",children:e.jsx("iframe",{src:`https://platform.twitter.com/embed/Tweet.html?id=${o}&theme=dark&cards=hidden`,className:"w-full min-h-[300px] border-0",allowFullScreen:!0})})})}return r?e.jsxs("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:`block mt-2 rounded-lg overflow-hidden ${d.linkPreview} hover:bg-black/30 transition-colors`,onClick:o=>o.stopPropagation(),children:[e.jsx("div",{className:"relative w-full pt-[56.25%]",children:e.jsx("img",{src:a,alt:"Preview",className:"absolute top-0 left-0 w-full h-full object-contain bg-black/40",onError:o=>o.target.parentElement.parentElement.style.display="none"})}),e.jsxs("div",{className:"flex items-center gap-2 p-2 border-t border-white/10",children:[e.jsx("img",{src:`https://www.google.com/s2/favicons?domain=${n.hostname}`,alt:"",className:"w-4 h-4"}),e.jsx("span",{className:`text-sm ${d.link}`,truncate:!0,children:n.hostname})]})]}):e.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:`block mt-2 rounded-lg overflow-hidden ${d.linkPreview} hover:bg-black/30 transition-colors`,onClick:o=>o.stopPropagation(),children:e.jsxs("div",{className:"flex items-center gap-2 p-2",children:[e.jsx("img",{src:`https://www.google.com/s2/favicons?domain=${n.hostname}`,alt:"",className:"w-4 h-4"}),e.jsx("span",{className:`text-sm ${d.link}`,truncate:!0,children:n.hostname})]})})}catch{return null}},Fm=({collection:a})=>{const[t,s]=i.useState([]),[n,r]=i.useState(""),[l,d]=i.useState(!1),[o,m]=i.useState(!1),{address:c}=Oe(),u=i.useRef(null),x=i.useRef(null),f=i.useRef(null),[N,v]=i.useState("dark"),[C,E]=i.useState(null),w=i.useRef(null),[p,y]=i.useState(!0),[g,j]=i.useState([]),[T,b]=i.useState(!1),$=Ct.useMemo(()=>!a?.creator&&!a?.creatorAddress?null:(a.creator||a.creatorAddress)?.toLowerCase(),[a?.creator,a?.creatorAddress]),L=Ct.useCallback(k=>!$||!k?!1:$===k.toLowerCase(),[$]);i.useEffect(()=>{if(!a?.contractAddress)return;const k=bm(a.contractAddress,D=>{s(D)});return()=>k()},[a?.contractAddress]);const S=()=>{u.current?.scrollIntoView({behavior:"smooth"})};i.useEffect(()=>{S()},[t]);const A=k=>{E({messageId:k.id,text:k.text,sender:k.sender,threadId:k.threadId||k.id,threadDepth:k.threadDepth||0}),f.current?.focus()},h=async k=>{if(k.preventDefault(),!(!n.trim()||o||!p)){if(g.some(D=>D.toLowerCase()===c?.toLowerCase())){M.error("You have been banned from this chat");return}m(!0);try{await ym({text:n,sender:c,collectionAddress:a.contractAddress,replyTo:C}),r(""),E(null),f.current?.focus()}catch(D){console.error("Error sending message:",D),M.error("Failed to send message")}m(!1),setTimeout(()=>{f.current?.focus()},100)}},I=k=>{n.length+2<=500&&r(D=>D+k.emoji)},O=k=>!k||!(k instanceof Date)?"":new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(k),F=()=>{const k=f.current;k&&(k.style.height="auto",k.style.height=Math.min(k.scrollHeight,150)+"px")},U=k=>k.reduce((D,_,H)=>{const X=k[H-1],z=X&&X.sender.toLowerCase()===_.sender.toLowerCase(),se=X&&(_.timestamp-X.timestamp)/(1e3*60)<5;return z&&se?(D[D.length-1].messages.push(_),D):(D.push({id:_.id,sender:_.sender,messages:[_]}),D)},[]),V=()=>e.jsxs("div",{className:"relative group z-20",children:[e.jsxs("button",{className:"p-1.5 rounded-lg bg-gray-700/80 hover:bg-gray-600 transition-colors flex items-center gap-2",title:"Select Theme",children:[e.jsx(Zl,{className:"w-4 h-4 text-[#00ffbd]"}),e.jsx("span",{className:"text-xs text-gray-300",children:"Theme"})]}),e.jsx("div",{className:"absolute right-0 top-[120%] mt-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:e.jsxs("div",{className:"bg-gray-800/95 backdrop-blur-sm rounded-lg shadow-xl p-3 border border-gray-700 min-w-[180px]",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Select Theme"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(Sr).map(([k,D])=>e.jsx("button",{onClick:_=>{_.preventDefault(),_.stopPropagation(),v(k)},className:`
                  w-8 h-8 rounded-full border-2 transition-all transform hover:scale-110
                  ${N===k?"border-[#00ffbd] scale-110 shadow-lg shadow-[#00ffbd]/20":"border-transparent hover:border-gray-500"}
                  ${D.bg}
                `,title:k.charAt(0).toUpperCase()+k.slice(1)},k))})]})})]}),P=k=>Sr[k]||Sr.dark;i.useEffect(()=>{const k=D=>{w.current&&!w.current.contains(D.target)&&d(!1)};return document.addEventListener("mousedown",k),()=>{document.removeEventListener("mousedown",k)}},[]);const B=async(k,D,_=null)=>{try{switch(k){case"ban":const H=[...g,D.toLowerCase()];await ti(a.contractAddress,H),M.success(`User ${Ia(D)} banned successfully`);break;case"delete":_&&(await jm(a.contractAddress,_),M.success("Message deleted"));break}}catch(H){console.error("Error in moderation:",H),M.error("Failed to perform moderation action")}};return i.useEffect(()=>{if(a?.contractAddress){(async()=>{try{const _=await wm(a.contractAddress);j(_)}catch(_){console.error("Error loading banned users:",_)}})();const D=_t(ge(tt,"collections",a.contractAddress,"moderation","bannedUsers"),_=>{_.exists()?j(_.data().addresses||[]):j([])});return()=>D()}},[a?.contractAddress]),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`w-full h-full rounded-lg shadow-xl overflow-hidden transition-all duration-300 ${P(N).bg}`,children:[e.jsxs("div",{className:`p-6 border-b border-gray-200 dark:border-gray-700 ${P(N).header}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Collection Chat"}),e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx("p",{className:"text-sm font-bold text-gray-300",children:"Join the conversation"}),e.jsxs("div",{className:"flex items-center gap-3",children:[L(c)&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("button",{onClick:()=>b(!0),className:"p-2 rounded-lg hover:bg-gray-700/50 transition-colors relative",title:"Manage Banned Users",children:[e.jsx(Yi,{className:"w-5 h-5 text-gray-400 hover:text-red-400"}),g.length>0&&e.jsx("span",{className:`absolute -top-1 -right-1 w-4 h-4 bg-red-500 
                      rounded-full text-[10px] text-white flex items-center justify-center`,children:g.length})]})}),e.jsx(V,{})]})]})]}),e.jsxs("div",{ref:x,className:`h-[calc(100%-10rem)] overflow-y-auto overflow-x-hidden p-4 space-y-4 
          custom-scrollbar`,children:[e.jsx(Ze,{children:U(t).map(k=>{const D=k.sender.toLowerCase()===c?.toLowerCase(),_=L(k.sender);return e.jsx(R.div,{initial:{opacity:0,x:D?20:-20},animate:{opacity:1,x:0},exit:{opacity:0},className:`flex w-full ${D?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:"flex gap-2 max-w-[60%]",children:[e.jsx("div",{className:`
                    flex-shrink-0 self-start mt-1
                    ${D?"order-2":""}
                  `,children:e.jsxs("div",{className:"relative",children:[e.jsx(Nm,{address:k.sender,size:32}),_&&e.jsxs("div",{className:"group absolute -top-1 -left-1",children:[e.jsx(Gi,{className:"text-yellow-400 w-4 h-4 cursor-help"}),e.jsx("span",{className:`absolute -top-6 left-0 
                            scale-0 transition-all group-hover:scale-100
                            px-2 py-1 text-xs rounded bg-gray-800 text-yellow-400 whitespace-nowrap z-10`,children:"Creator"})]})]})}),e.jsxs("div",{className:"flex flex-col flex-grow gap-1",children:[k.messages.map((H,X)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx(Hr,{message:H,isMyMessage:D,isCreatorMessage:_,onReply:A,currentTheme:N,getTheme:P,isCreator:L,handleModeration:B,address:c}),H.threadId&&!H.replyTo&&e.jsx("div",{className:"pl-4 border-l-2 border-gray-700 mt-2",children:t.filter(z=>z.threadId===H.threadId&&z.id!==H.id).map(z=>e.jsx(Hr,{message:z,isMyMessage:z.sender.toLowerCase()===c?.toLowerCase(),isCreatorMessage:L(z.sender),onReply:A,currentTheme:N,getTheme:P,isCreator:L,handleModeration:B,address:c},z.id))})]},H.id)),e.jsxs("div",{className:`
                      flex items-center mt-1 gap-2 text-xs
                      ${D?"justify-end":"justify-start"}
                    `,children:[e.jsx("div",{className:"flex items-center gap-1",children:!_&&e.jsx("span",{className:`
                            px-2 py-0.5 rounded-full
                            ${P(N).address.bg}
                            ${P(N).address.text}
                          `,children:Ia(k.sender)})}),e.jsx("span",{className:P(N).time,children:O(k.messages[k.messages.length-1].timestamp)})]})]})]})},k.id)})}),e.jsx("div",{ref:u})]}),e.jsxs("form",{onSubmit:h,className:`
          sticky bottom-0
          relative p-4 border-t border-gray-200 dark:border-gray-700 
          ${P(N).header}
          ${C?"pt-2 pb-3":"py-4"}
          transition-all duration-200
          bg-inherit
        `,children:[C&&e.jsx(km,{replyTo:C,onClose:()=>E(null)}),e.jsxs("div",{className:"relative flex items-start",children:[e.jsxs("div",{ref:w,className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>d(!l),className:`
                p-2 transition-colors self-start
                ${P(N).input.text} 
                hover:text-[#00ffbd]
              `,disabled:o,children:e.jsx(Yl,{className:"w-5 h-5"})}),e.jsx(Ze,{children:l&&e.jsx(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-full mb-2 left-0",children:e.jsx("div",{className:"bg-gray-800 rounded-lg shadow-xl border border-gray-700",children:e.jsx("div",{className:"relative",onClick:k=>k.stopPropagation(),children:e.jsx(Kc,{onEmojiClick:I,theme:"dark",width:280,height:350,lazyLoadEmojis:!0,searchPlaceHolder:"Search emoji...",previewConfig:{showPreview:!1},skinTonesDisabled:!0,categories:["smileys_people","animals_nature","food_drink","travel_places","activities","objects","symbols","flags"],style:{"--epr-bg-color":"#1a1b1f","--epr-category-label-bg-color":"#2d2e35","--epr-hover-bg-color":"#2d2e35","--epr-search-border-color":"#2d2e35","--epr-border-radius":"0.5rem","--epr-category-label-text-color":"#ffffff80","--epr-scrollbar-width":"8px","--epr-scrollbar-track-color":"transparent","--epr-scrollbar-thumb-color":"rgba(255, 255, 255, 0.2)","--epr-scrollbar-thumb-hover-color":"rgba(255, 255, 255, 0.3)"}})})})})})]}),e.jsx("textarea",{ref:f,rows:"1",value:n,onChange:k=>{r(k.target.value.slice(0,500)),F()},onKeyDown:k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),h(k))},autoFocus:!0,onFocus:k=>k.target.select(),placeholder:o?"Sending...":"Type a message...",className:`
              flex-1 rounded-lg px-4 py-2 ml-2 
              focus:outline-none focus:ring-2 focus:ring-[#00ffbd] 
              resize-none overflow-hidden min-h-[40px] max-h-[150px]
              custom-scrollbar transition-all duration-200
              ${P(N).input.bg}
              ${P(N).input.text}
              placeholder:${P(N).input.placeholder}
            `,disabled:o}),e.jsx("button",{type:"submit",className:`
              p-2 ml-2 transition-colors self-start mt-1
              ${P(N).input.text}
              hover:text-[#00ffbd]
              disabled:opacity-50 disabled:cursor-not-allowed
            `,disabled:!n.trim()||o,children:e.jsx(Ql,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:`
          mt-1 text-xs text-right
          ${P(N).time}
        `,children:[n.length,"/500"]})]}),e.jsx(Tm,{show:T,onClose:()=>b(!1),bannedAddresses:g,onUnban:async k=>{try{const D=g.filter(_=>_!==k);await ti(a.contractAddress,D),j(D),M.success("User unbanned successfully")}catch(D){console.error("Error unbanning user:",D),M.error("Failed to unban user")}}})]})},Em=[{label:"24h",value:"24h"},{label:"7d",value:"7d"},{label:"30d",value:"30d"},{label:"All",value:"all"}],Am=["event TransferSingle(address indexed operator, address indexed from, address indexed to, uint256 id, uint256 value)","event TransferBatch(address indexed operator, address indexed from, address indexed to, uint256[] ids, uint256[] values)"],si={moonwalker:"https://moonwalker-rpc.eu-north-2.gateway.fm",unichain:"https://sepolia.unichain.org","unichain-mainnet":"https://unichain.blockscout.com","monad-testnet":"testnet-rpc.monad.xyz"},Im=(a,t)=>t===130?new Ot("https://unichain.blockscout.com"):t===1301?new Ot("https://sepolia.unichain.org"):a==="moonwalker"||t===1828369849?new Ot(si.moonwalker):a==="monad-testnet"||t===10143?new Ot(si["monad-testnet"]):new he(window.ethereum),Bm=(a,t)=>t===130?"https://unichain.blockscout.com":t===1301?"https://unichain-sepolia.blockscout.com":a==="moonwalker"||t===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":a==="monad-testnet"||t===10143?"https://monad-testnet.socialscan.io":a==="polygon"||t===137?"https://polygon.blockscout.com":"https://sepolia.etherscan.io",Dm=async(a,t,s)=>{try{const n=Im(t,s),r=new J(a,Am,n),l=await n.getBlockNumber(),d=Math.max(0,l-1e4);console.log("Fetching transfer events:",{network:t,chainId:s,address:a,fromBlock:d,currentBlock:l});const o=r.filters.TransferSingle(),m=r.filters.TransferBatch(),[c,u]=await Promise.all([r.queryFilter(o,d),r.queryFilter(m,d)]),x=c.map(w=>({timestamp:null,type:"ERC-1155",value:w.args.value.toString(),blockNumber:w.blockNumber})),f=u.flatMap(w=>w.args.values.map((p,y)=>({timestamp:null,type:"ERC-1155",value:p.toString(),blockNumber:w.blockNumber}))),N=[...x,...f],v=[...new Set(N.map(w=>w.blockNumber))],C=await Promise.all(v.map(w=>n.getBlock(w))),E=Object.fromEntries(C.map(w=>[w.number,w.timestamp*1e3]));return N.map(w=>({...w,timestamp:new Date(E[w.blockNumber])}))}catch(n){throw console.error("Error fetching transfer events:",n),n}},Mm=async(a,t,s)=>{try{const n=Bm(t,s);console.log("Using Blockscout URL:",n);const r=a?.toLowerCase(),l=`/api/v2/tokens/${r}`;console.log("Fetching token info from:",`${n}${l}`);const o=(await Wt.get(`${n}${l}`)).data;if(o.type==="ERC-1155")return{transfers:await Dm(a,t,s),tokenData:o};const m=`/api/v2/tokens/${r}/transfers`;return console.log("Fetching transfers from:",`${n}${m}`),{transfers:(await Wt.get(`${n}${m}`)).data.items||[],tokenData:o}}catch(n){return console.error(`Error fetching ${t} data:`,n),{transfers:[],tokenData:null}}},Pm=(a,t)=>{try{if(!a||a==="0")return"0";if(t?.type==="custom"||t?.type==="usdc"||t?.type==="usdt"){const r=Number(a);return isNaN(r)?"0":r.toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}const s=typeof a=="string"?a.replace(/[^0-9.]/g,""):a;return!s||isNaN(Number(s))?"0":parseFloat(s).toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}catch(s){return console.error("Error formatting value:",s,typeof a,a),"0"}},$m=(a,t,s)=>{const n=new Date;let r;switch(t){case"24h":r=Hc(n,24);break;case"7d":r=Rn(n,7);break;case"30d":r=Rn(n,30);break;default:r=new Date(0)}const l=new Map;return(Array.isArray(a)?a:[]).forEach(o=>{const m=qc(new Date(o.timestamp));let c=0,u=0;try{if(o.type==="ERC-1155"?(c=Number(o.value),u=c*(s?.mintPrice?Number(s.mintPrice):0)):o.token?.type==="ERC-721"&&(c=1,u=s?.mintPrice?Number(s.mintPrice):0),zc(m,{start:r,end:n})){const x=l.get(m.getTime())||{volume:0,transactions:0,ethVolume:0};l.set(m.getTime(),{volume:x.volume+c,transactions:x.transactions+1,ethVolume:x.ethVolume+u})}}catch(x){console.error("Error processing transfer:",x,o)}}),Array.from(l.entries()).map(([o,m])=>({date:new Date(o),volume:m.volume,transactions:m.transactions,ethVolume:Pm(m.ethVolume,s?.mintToken)})).sort((o,m)=>o.date-m.date)},Lm=({active:a,payload:t,label:s,collection:n,tokenLogo:r})=>{if(a&&t&&t.length){const l=()=>{const o=n?.mintToken?.address?.toLowerCase();return o==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):!o||o==="0x0000000000000000000000000000000000000000"?n?.network==="moonwalker"||n?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):n?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"inline-block w-4 h-4 mr-1"}):n?.network==="monad-testnet"||n?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"inline-block w-4 h-4 mr-1"}):e.jsx(ct,{className:"inline mr-1"}):n?.mintToken?.type==="custom"&&r?e.jsx("img",{src:r,alt:"Token",className:"inline-block w-4 h-4 mr-1 rounded-full",onError:c=>{c.target.onerror=null,c.target.src="/placeholder.png"}}):e.jsx(ct,{className:"inline mr-1"})},d=()=>{const o=n?.mintToken?.address?.toLowerCase();return o==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?"ZERO":!o||o==="0x0000000000000000000000000000000000000000"?n?.network==="moonwalker"||n?.chainId===1828369849?"ZERO":n?.network==="polygon"?"POL":n?.network==="monad-testnet"||n?.chainId===10143?"MON":"ETH":n?.mintToken?.type==="custom"?n.mintToken.symbol:"ETH"};return e.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-[#1a1b1f] border border-gray-700 rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"text-white font-medium mb-1",children:bo(new Date(s),"MMM dd, yyyy")}),e.jsxs("p",{className:"text-[#00ffbd] text-sm",children:["Volume: ",t[0].value.toLocaleString()," NFTs"]}),e.jsxs("p",{className:"text-gray-400 text-sm flex items-center",children:[l(),t[0].payload.ethVolume," ",d()]}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["Transactions: ",t[0].payload.transactions]})]})}return null};function Rm({contractAddress:a,network:t}){const[s,n]=i.useState([]),[r,l]=i.useState(!0),[d,o]=i.useState(null),[m,c]=i.useState("24h");Lo();const{symbol:u}=Os(),[x,f]=i.useState(null),[N,v]=i.useState(null);i.useEffect(()=>{a&&u&&(async()=>{try{l(!0),o(null);const j=await mn(u);f(j);const T=j?.chainId;console.log("Loading volume data for:",{network:t,chainId:T,contractAddress:a});const{transfers:b,tokenData:$}=await Mm(a,t,T);if(b&&b.length>0){const L=$m(b,m,j);n(L)}else n([]);if(j?.mintToken?.address){const L=await at(j.mintToken.address);L?.logo&&v(L.logo)}}catch(j){console.error("Error loading volume metrics:",j),o(j.message)}finally{l(!1)}})()},[a,t,m,u]);const C=()=>{const g=x?.mintToken?.address?.toLowerCase();return g==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):!g||g==="0x0000000000000000000000000000000000000000"?x?.network==="moonwalker"||x?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"inline-block w-4 h-4 mr-1"}):x?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"inline-block w-4 h-4 mr-1"}):x?.network==="monad-testnet"||x?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"inline-block w-4 h-4 mr-1"}):e.jsx(ct,{className:"inline mr-1"}):x?.mintToken?.type==="custom"&&N?e.jsx("img",{src:N,alt:"Token",className:"inline-block w-4 h-4 mr-1 rounded-full",onError:T=>{T.target.onerror=null,T.target.src="/placeholder.png"}}):e.jsx(ct,{className:"inline mr-1"})},E=s.reduce((g,j)=>g+j.volume,0),w=s.reduce((g,j)=>g+Number(j.ethVolume.replace(/,/g,"")),0),p=s.reduce((g,j)=>g+j.transactions,0),y=p>0?E/p:0;return t==="monad-testnet"||x?.chainId===10143?e.jsx("div",{className:"flex items-center justify-center py-12 bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-900 dark:text-white mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Volume metrics for Monad Testnet are under development."})]})}):r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end space-x-2",children:Em.map(g=>e.jsx(R.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>c(g.value),className:`px-3 py-1 rounded-lg text-sm transition-colors ${m===g.value?"bg-[#00ffbd] text-black font-medium":"bg-white/10 dark:bg-[#1a1b1f] text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:g.label},g.value))}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Market Cap"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[C(),x?.mintPrice&&E?(E*Number(x.mintPrice)).toFixed(4):"0.0000"]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Total Volume"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[E.toLocaleString()," NFTs"]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsxs("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:[(()=>{const g=x?.mintToken?.address?.toLowerCase();return g==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?"ZERO":!g||g==="0x0000000000000000000000000000000000000000"?x?.network==="moonwalker"||x?.chainId===1828369849?"ZERO":x?.network==="polygon"?"POL":x?.network==="monad-testnet"||x?.chainId===10143?"MON":"ETH":x?.mintToken?.type==="custom"?x.mintToken.symbol:"ETH"})()," Volume"]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center",children:[C(),w.toFixed(4)]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:p.toLocaleString()})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-500 dark:text-gray-400 text-sm mb-2",children:"Avg. Per Transaction"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[y.toFixed(2)," NFTs"]})]})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-4 border border-gray-100 dark:border-gray-800",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-4",children:"Volume"}),e.jsx("div",{className:"h-[300px]",children:e.jsx(Xa,{width:"100%",height:"100%",children:e.jsxs(zi,{data:s,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"volumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#00ffbd",stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:"#00ffbd",stopOpacity:0})]})}),e.jsx(Jl,{strokeDasharray:"3 3",stroke:"#2d2f36"}),e.jsx(qi,{dataKey:"date",tickFormatter:g=>bo(g,m==="24h"?"HH:mm":"MMM dd"),stroke:"#4b5563",tick:{fill:"#4b5563"}}),e.jsx(Kl,{stroke:"#4b5563",tickFormatter:g=>`${g} NFTs`,tick:{fill:"#4b5563"}}),e.jsx(Za,{content:e.jsx(Lm,{collection:x,tokenLogo:N})}),e.jsx(Vi,{type:"monotone",dataKey:"volume",stroke:"#00ffbd",strokeWidth:2,fill:"url(#volumeGradient)",animationDuration:1e3,animationBegin:0})]})})})]}),s.length===0&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"No volume data available"})})]})}const Om=[{id:"recent",label:"🔥 Recent Mints"},{id:"holders",label:"👑 Top Holders"},{id:"chat",label:"💬 Chat"},{id:"volume",label:"📈 Volume"}],_o=document.createElement("style");_o.textContent=`
  @keyframes float {
    0%, 100% { transform: translate(-50%, -50%) translateY(0px); }
    50% { transform: translate(-50%, -50%) translateY(-10px); }
  }
  @keyframes blink {
    0%, 95%, 100% { transform: scaleY(1); }
    97.5% { transform: scaleY(0); }
  }
  @keyframes tailWag {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(20deg); }
    75% { transform: rotate(-20deg); }
  }
  @keyframes legSwing {
    0%, 100% { transform: rotate(0deg); }
    50% { transform: rotate(15deg); }
  }
  @keyframes whiskerMove {
    0%, 100% { transform: rotate(var(--rotate, 0deg)); }
    50% { transform: rotate(calc(var(--rotate, 0deg) + 5deg)); }
  }
  @keyframes earTwitch {
    0%, 90%, 100% { transform: rotate(var(--rotate, 0deg)); }
    95% { transform: rotate(calc(var(--rotate, 0deg) + 5deg)); }
  }
`;document.head.appendChild(_o);function _m({collection:a}){const[t,s]=i.useState("recent");return a?.contractAddress&&(window.collectionData=a),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto hide-scrollbar",children:Om.map(n=>e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:()=>s(n.id),className:`
                px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap
                transition-all duration-200 relative group
                ${t===n.id?"text-[#00ffbd] bg-[#00ffbd]/10":"text-gray-500 dark:text-gray-400 bg-white dark:bg-[#1a1b1f] hover:bg-gray-50 dark:hover:bg-[#1a1b1f]/80"}
                border border-gray-100 dark:border-gray-800
              `,children:[t===n.id&&e.jsx("div",{className:"absolute inset-0 rounded-lg bg-[#00ffbd]/5 blur-xl -z-10"}),e.jsx("span",{className:"relative z-10",children:n.label}),e.jsx("div",{className:`
                absolute bottom-0 left-0 right-0 h-0.5 rounded-full
                transition-all duration-200
                ${t===n.id?"bg-[#00ffbd]":"bg-transparent group-hover:bg-[#00ffbd]/30"}
              `})]}),n.comingSoon&&e.jsxs("div",{className:"absolute -top-8 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:["Coming Soon",e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-full w-2 h-2 bg-gray-900 rotate-45"})]})]},n.id))}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(n=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${n*.2}s`}},n))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#1a1b1f] rounded-xl",children:e.jsxs("div",{className:"p-6 h-[400px] md:h-[600px]",children:[t==="recent"&&e.jsx(gm,{}),t==="holders"&&e.jsx(fm,{collection:a}),t==="chat"&&e.jsx(Fm,{collection:{...a,creator:a.creator||a.creatorAddress,contractAddress:a.contractAddress}}),t==="volume"&&e.jsx(Rm,{contractAddress:a?.contractAddress,network:a?.network})]})})]})]})}const Fr=a=>/^0x[a-fA-F0-9]{40}$/.test(a);function Um({targetDate:a}){const[t,s]=i.useState(n());function n(){const r=+new Date(a)-+new Date;let l={};return r>0&&(l={days:Math.floor(r/(1e3*60*60*24)),hours:Math.floor(r/(1e3*60*60)%24),minutes:Math.floor(r/1e3/60%60),seconds:Math.floor(r/1e3%60)}),l}return i.useEffect(()=>{const r=setInterval(()=>{s(n())},1e3);return()=>clearInterval(r)},[a]),Object.keys(t).length===0?null:e.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:Object.entries(t).map(([r,l])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-xl font-bold text-[#00ffbd]",children:String(l).padStart(2,"0")}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:r})]},r))})}function Wm({endDate:a,infiniteMint:t}){const[s,n]=i.useState(r());function r(){if(t)return null;const l=new Date().getTime(),o=new Date(a).getTime()-l;return o<=0?null:{days:Math.floor(o/(1e3*60*60*24)),hours:Math.floor(o/(1e3*60*60)%24),minutes:Math.floor(o/1e3/60%60),seconds:Math.floor(o/1e3%60)}}return i.useEffect(()=>{if(t)return;const l=setInterval(()=>{n(r())},1e3);return()=>clearInterval(l)},[a,t]),t||!s?null:e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Mint Ends In"})}),e.jsx("div",{className:"grid grid-cols-4 gap-2 text-center",children:Object.entries(s).map(([l,d])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-xl font-bold text-[#00ffbd]",children:String(d).padStart(2,"0")}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:l})]},l))})]})}function Hm({userMintedAmount:a,maxPerWallet:t}){const s=t-a;return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center",children:["You can mint ",s," more NFT",s!==1?"s":""]})}const ba={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingMetadata:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),Minting:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},qm=({isOpen:a,onClose:t,currentStep:s,error:n})=>{const r=[{key:"preparing",label:"Preparing Transaction",icon:ba.Preparing},{key:"uploading",label:"Preparing Mint",icon:ba.UploadingMetadata},{key:"minting",label:"Minting NFT",icon:ba.Minting},{key:"completed",label:"Minting Completed",icon:ba.Completed}],l=r.findIndex(m=>m.key===s),d=!!n,o=m=>m?.includes("user rejected action")?"Transaction was rejected. Please try again.":m?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":m?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:d?"Error Minting NFT":"Minting NFT"}),e.jsx("div",{className:"space-y-4",children:r.map((m,c)=>{const u=m.icon,x=c===l,f=!d&&c<l,N=d&&c===l;return e.jsxs("div",{className:Rt("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":x&&!N,"text-[#00ffbd]":f,"bg-red-500/10 text-red-500":N,"text-gray-400":!x&&!f&&!N}),children:[e.jsx(u,{}),e.jsx("div",{className:"flex-1",children:e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m.label})}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},m.key)})}),d&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ba.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:o(n)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-[#00ffbd] font-medium",children:"NFT minted successfully!"})})]})})})})]})})},zm=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Minting Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[1,2,3,4,5].map(o=>e.jsx("button",{onMouseEnter:()=>d(o),onMouseLeave:()=>d(0),onClick:()=>{r(o),s(o),setTimeout(t,500)},className:"p-1 transition-transform hover:scale-110",children:e.jsx("svg",{className:`w-8 h-8 ${o<=(l||n)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"} transition-colors`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},o))}),e.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:[l===1&&"Could be better",l===2&&"It's okay",l===3&&"Good",l===4&&"Great",l===5&&"Excellent!"]})]})})})})]})})};function Uo(){const{symbol:a}=Os(),t=rt(),[s,n]=i.useState(1),[r,l]=i.useState(null),[d,o]=i.useState(!0),[m,c]=i.useState("");i.useState(null);const[u,x]=i.useState(null);i.useState(0);const[f,N]=i.useState(0),[v,C]=i.useState(0),[E,w]=i.useState(0),[p,y]=i.useState(null),[g,j]=i.useState(!1),[T,b]=i.useState(!1),[$,L]=i.useState(null),[S,A]=i.useState(null),[h,I]=i.useState({}),[O,F]=i.useState(null),[U,V]=i.useState(!1),[P,B]=i.useState(null),[k,D]=i.useState(null),[_,H]=i.useState(!1),[X,z]=i.useState(!1),[se,ee]=i.useState({width:window.innerWidth,height:window.innerHeight});i.useEffect(()=>{(async()=>{if(window.ethereum){const pe=await window.ethereum.request({method:"eth_chainId"}),ke=parseInt(pe,16);console.log("Current Chain ID:",ke),console.log("Current Network:",r?.network),F(ke)}})();const xe=pe=>{F(parseInt(pe,16))};return window.ethereum?.on("chainChanged",xe),()=>{window.ethereum?.removeListener("chainChanged",xe)}},[]),i.useEffect(()=>{r?.contractAddress&&u?(async()=>{try{const xe=new he(window.ethereum),pe=new J(r.contractAddress,r.type==="ERC1155"?Jt.ERC1155Royalty:Jt.ERC721Royalty,xe);if(r.type==="ERC1155"){const[ke,we]=await Promise.all([pe.totalSupply(),pe.mintedPerWallet(u)]);w(Number(ke)),C(Number(we))}else{const ke=r.network==="unichain-mainnet"||r.network==="unichain"?{gasLimit:1e6}:r.network==="monad-testnet"?{gasLimit:5e6}:{},[we,Me]=await Promise.all([pe.totalSupply(ke),pe.mintedPerWallet(u,ke)]);w(Number(we)),C(Number(Me))}}catch(xe){console.error("Error loading contract data:",xe),C(0)}})():C(0)},[u,r?.contractAddress]),i.useEffect(()=>{u||C(0)},[u]);const te=f>0?E/f*100:0;i.useEffect(()=>{(async()=>{try{const xe=await mn(a);if(!xe){Le.error("Collection not found"),t("/");return}l(xe),o(!1)}catch(xe){console.error("Error loading collection:",xe),Le.error("Error loading collection data")}})()},[a,t]),i.useEffect(()=>{(async()=>{if(window.ethereum){const ke=await(await new he(window.ethereum).getSigner()).getAddress();x(ke)}})()},[]),i.useEffect(()=>{if(!a)return;const K=C0(a,xe=>{l(xe),w(xe.totalMinted||0)});return()=>K()},[a]),i.useEffect(()=>{if(!r){N(0);return}if(r.network==="unichain-mainnet"||r.network==="unichain"||r.network==="moonwalker"){N(Number(r.maxSupply)||0);return}r.contractAddress?(async()=>{try{const xe=new he(window.ethereum),ke=await new J(r.contractAddress,r.type==="ERC1155"?Jt.ERC1155Royalty:Jt.ERC721Royalty,xe).config();N(Number(ke.maxSupply)||0)}catch{N(Number(r.maxSupply)||0)}})():N(Number(r.maxSupply)||0)},[r]),i.useEffect(()=>{if(window.ethereum){const K=new he(window.ethereum);y(K)}},[]),i.useEffect(()=>{(async()=>{if(r?.contractAddress&&window.ethereum)try{const xe=r.mintToken;xe&&xe.type==="custom"?A({address:xe.address,symbol:xe.symbol||r.customTokenSymbol||"TOKEN",decimals:18,isNative:!1}):A({address:ka,symbol:r.network==="polygon"?"POL":r.network==="moonwalker"?"ZERO":"ETH",decimals:18,isNative:!0})}catch{}})()},[r?.contractAddress,r?.network]),i.useEffect(()=>{(async()=>{if(r?.mintToken?.address)try{const xe=await at(r.mintToken.address);console.log("Token Deployment Result:",xe),xe?.logo&&I(pe=>({...pe,[r.mintToken.address.toLowerCase()]:xe.logo}))}catch(xe){console.error("Error fetching token logo:",xe)}})()},[r?.mintToken?.address]);const Y=()=>{const K=r?.mintToken?.address?.toLowerCase();if(!K||K==="0x0000000000000000000000000000000000000000")return r?.network==="moonwalker"||r?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"}):r?.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}):r?.network==="monad-testnet"||r?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}):r?.network==="unichain-mainnet"||r?.network==="unichain"?e.jsx(ct,{className:"w-5 h-5 text-[#00ffbd]"}):e.jsx(ct,{className:"w-5 h-5 text-[#00ffbd]"});if(K==="0xf4a67fd6f54ff994b7df9013744a79281f88766e")return e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"});const pe=h[K];return pe?e.jsx("img",{src:pe,alt:r.mintToken.symbol||"Token",className:"w-5 h-5 rounded-full",onError:ke=>{ke.target.onerror=null,ke.target.src="/token-default.png"}}):e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-5 h-5 rounded-full"})};if(i.useEffect(()=>{const K=()=>{ee({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),d||!r)return e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"min-h-screen bg-inherit",children:[e.jsx("div",{className:"relative h-[300px] sm:h-[400px] bg-gradient-to-br from-gray-100/5 to-gray-200/5 dark:from-gray-800/10 dark:to-gray-700/10",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-50 dark:from-[#0a0b0f] to-transparent"})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-32 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white dark:bg-[#0a0b0f] p-6 rounded-lg border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-8 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-1/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-2 mb-6",children:[e.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-5/6 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-4/6 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(K=>e.jsx("div",{className:"h-20 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"},K))})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white dark:bg-[#0a0b0f] p-6 rounded-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"h-12 w-full bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse mb-6"}),e.jsx("div",{className:"h-48 w-full bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse mb-6"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-2 w-full bg-gray-200 dark:bg-gray-800 rounded-full animate-pulse"})]})]})})]})})]});const W=async()=>{try{if(!u){B("error"),V(!0),D("Please connect your wallet first");return}B("preparing"),V(!0),D(null),B("preparing");const xe=await(await fetch(r.previewUrl)).blob(),pe=new File([xe],"artwork.png",{type:"image/png"}),{metadataUrl:ke}=await Mo({...r,name:r.name,description:r.description,attributes:r.attributes||[],website:r.website,background_color:r.background_color},pe),we=ke.replace("ipfs://","").trim(),Me=await p.getSigner();let re;try{r.mintToken?.type==="custom"?re=BigInt(Math.floor(Number(r.mintPrice)*Math.pow(10,r.mintToken.decimals||18))):re=Ut(r.mintPrice.toString())}catch{re=BigInt(0)}const ce=re*BigInt(s);B("minting");const ye=new J(r.contractAddress,r.type==="ERC1155"?Jt.ERC1155Royalty:Jt.ERC721Royalty,Me);let ue;r.type==="ERC1155"?r.mintToken?.type==="custom"?(await(await new J(r.mintToken.address,["function approve(address spender, uint256 amount) public returns (bool)"],Me).approve(r.contractAddress,ce)).wait(),ue=await ye.mint(0,s,we)):ue=await ye.mint(0,s,we,{value:ce}):r.mintToken?.type==="custom"?(await(await new J(r.mintToken.address,["function approve(address spender, uint256 amount) public returns (bool)"],Me).approve(r.contractAddress,ce)).wait(),ue=await ye.mint(s,we)):ue=await ye.mint(s,we,{value:ce,gasLimit:r.network==="unichain"?1e6*s:5e5*s});const Fe=await ue.wait(),[oe,Ne]=await Promise.all([ye.totalSupply(),ye.mintedPerWallet(u)]);w(Number(oe)),C(Number(Ne)),await T0(a,Number(oe));let Ce="0",_e="0";try{if(r.mintPrice){_e=parseFloat(r.mintPrice).toFixed(6);const He=ze(ce);Ce=parseFloat(He).toFixed(6)}}catch{}const Re=await p.getNetwork(),Pe=Number(Re.chainId);await A0({collectionAddress:r.contractAddress,minterAddress:u,tokenId:r.type==="ERC1155"?"0":String(oe),quantity:String(s),hash:Fe.hash,image:r.previewUrl,value:Ce,type:r.type,name:r.name,symbol:r.symbol,artworkType:r.artworkType||"image",network:Pe===130?"unichain-mainnet":Pe===1301?"unichain":Pe===137?"polygon":Pe===1828369849?"moonwalker":Pe===10143?"monad-testnet":"sepolia",mintPrice:_e,paymentToken:r.mintToken||null}),B("completed"),H(!0),setTimeout(()=>{V(!1),B(null),D(null),setTimeout(()=>{z(!0)},1e3),setTimeout(()=>{H(!1)},3e4)},2e3)}catch(K){console.error("Minting error:",K),B("error"),D(K.message||"Transaction failed")}},Q=Date.now(),G=new Date(r.releaseDate),q=Q>=G,Z=async()=>{if(!Fr(m)){Le.error("Invalid wallet address");return}try{const K=r.whitelistAddresses||[],xe=m.toLowerCase(),pe=K.find(Me=>{if(!Me)return!1;const re=typeof Me=="object"?Me.address:Me;return re&&re.toLowerCase()===xe}),ke=!!pe,we=pe&&typeof pe=="object"?pe.maxMint:1;if(j(!0),b(ke),L(pe),ke?Le.success(`Address is whitelisted! Can mint up to ${we} NFTs`):Le.error("Address is not whitelisted"),r.contractAddress&&p){const Me=new J(r.contractAddress,r.type==="ERC1155"?Jt.ERC1155Royalty:Jt.ERC721Royalty,p);try{const[re,ce]=await Promise.all([Me.whitelist(m),Me.whitelistMintLimit(m)]);console.log("On-chain whitelist status:",{isWhitelisted:re,mintLimit:ce.toString()}),re!==ke&&console.warn("Whitelist status mismatch between local and contract"),ce.toString()!==we.toString()&&console.warn("Whitelist mint limit mismatch between local and contract")}catch(re){console.warn("Contract whitelist check failed:",re)}}}catch(K){console.error("Error checking whitelist:",K),Le.error("Error checking whitelist status")}},ie=()=>r?.mintPrice?e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Price"}),e.jsxs("div",{className:"flex items-center gap-1",children:[Y(),e.jsx("span",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.mintPrice})]})]}):null,ne=()=>{const K=Date.now(),xe=new Date(r.releaseDate),pe=r.mintEndDate?new Date(r.mintEndDate):null,ke=!r.infiniteMint&&pe&&K>=pe,we=K<xe,Me=r.network==="unichain-mainnet"||r.chainId===130?130:r.network==="unichain"?1301:r.network==="sepolia"?11155111:r.network==="moonwalker"||r.chainId===1828369849?1828369849:r.network==="monad-testnet"||r.chainId===10143?10143:r.network==="polygon"?137:null,re=O&&O!==Me,ce=r.network==="unichain-mainnet"||r.chainId===130?"Unichain Mainnet":r.network==="unichain"?"Unichain Testnet":r.network==="sepolia"?"Sepolia":r.network==="moonwalker"||r.chainId===1828369849?"MoonWalker":r.network==="monad-testnet"||r.chainId===10143?"Monad Testnet":r.network==="polygon"?"Polygon":"Unknown Network";return e.jsxs("div",{className:"flex flex-col gap-2",children:[we&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Minting Starts In"})}),e.jsx(Um,{targetDate:xe})]}),!r.infiniteMint&&q&&!ke&&e.jsx(Wm,{endDate:r.mintEndDate,infiniteMint:r.infiniteMint}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-4 border border-gray-200 dark:border-gray-800",children:[e.jsx("button",{onClick:()=>n(Math.max(1,s-1)),className:"p-2 rounded-lg bg-white dark:bg-[#1a1b1f] text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!q||s<=1||r.enableWhitelist&&(!g||!T),children:e.jsx(sn,{size:24})}),e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white min-w-[60px] text-center",children:s}),e.jsx("button",{onClick:()=>{const ue=(r.enableWhitelist&&$?$.maxMint||1:r.maxPerWallet)-v;n(Math.min(ue,s+1))},className:"p-2 rounded-lg bg-white dark:bg-[#1a1b1f] text-gray-400 hover:text-gray-600 dark:hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!q||(r.enableWhitelist?!g||!T||v>=($?.maxMint||1)||s>=($?.maxMint||1)-v:v>=r.maxPerWallet||s>=r.maxPerWallet-v),children:e.jsx(cr,{size:24})})]}),u&&e.jsx(Hm,{userMintedAmount:v,maxPerWallet:r.enableWhitelist?$?.maxMint||1:r.maxPerWallet}),e.jsx("button",{onClick:W,disabled:we||ke||re||(r.enableWhitelist?!g||!T||v>=($?.maxMint||1):v>=r.maxPerWallet)||s===0,className:`w-full py-3 ${we||ke?"bg-gray-400 cursor-not-allowed":re?"bg-yellow-500 hover:bg-yellow-600 text-black":r.enableWhitelist&&(!g||!T)?"bg-gray-200 dark:bg-[#1a1b1f] text-gray-900 dark:text-white":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"} disabled:opacity-50 disabled:cursor-not-allowed font-bold rounded-lg text-lg transition-colors`,children:u?we?"Minting Not Live Yet":ke?"Minting Ended":re?`Switch to ${ce} Network`:r.enableWhitelist&&!g?"Check Whitelist Status":r.enableWhitelist&&!T?"Not Whitelisted":"Mint Now":"Connect Wallet"})]})};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] overflow-x-hidden",children:[e.jsxs("div",{className:"relative h-[300px] sm:h-[400px] bg-gradient-to-br from-[#00ffbd]/5 to-[#00e6a9]/5 dark:from-[#00ffbd]/10 dark:to-[#00e6a9]/10",children:[r.artworkType==="video"?e.jsx("video",{src:r.previewUrl||wt(r.imageIpfsUrl),className:"w-full h-full object-cover opacity-20 dark:opacity-30",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsx("img",{src:r.previewUrl||wt(r.imageIpfsUrl),alt:r.name,className:"w-full h-full object-cover opacity-20 dark:opacity-30"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-50 dark:from-[#0a0b0f] to-transparent"})]}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-32 relative z-10 pb-12",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(K=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${K*.2}s`}},K))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[e.jsxs("div",{className:"flex gap-6 mb-6",children:[e.jsx("div",{className:"flex-1",children:r.artworkType==="video"?e.jsx("div",{className:"w-full aspect-square rounded-xl overflow-hidden border-2 border-[#00ffbd]",children:e.jsx("video",{src:r.previewUrl||wt(r.imageIpfsUrl),className:"w-full h-full object-cover",controls:!0,playsInline:!0})}):e.jsx("img",{src:r.previewUrl||wt(r.imageIpfsUrl),alt:r.name,className:"w-full aspect-square rounded-xl object-cover border-2 border-[#00ffbd]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 dark:text-gray-400 mb-4",children:[e.jsx("span",{children:r.symbol}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.symbol),Le.success("Symbol copied!")},className:"hover:text-[#00ffbd] transition-colors",children:e.jsx(ys,{size:16})})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 leading-relaxed",children:r.description})]})]}),e.jsx("div",{className:"mb-6 pt-4 border-t border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex gap-4",children:[r.website&&e.jsx("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(ed,{size:20})}),r.socials?.twitter&&e.jsx("a",{href:`https://twitter.com/${r.socials.twitter}`,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(_i,{size:20})}),r.socials?.discord&&e.jsx("a",{href:r.socials.discord,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(Ui,{size:20})}),r.socials?.telegram&&e.jsx("a",{href:r.socials.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-[#00ffbd] transition-colors",children:e.jsx(Oi,{size:20})})]})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:r.attributes?.map((K,xe)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-2.5 border border-gray-200 dark:border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-0.5",children:K.trait_type}),e.jsx("p",{className:"text-sm font-medium text-[#00ffbd]",children:typeof K.value=="number"?K.value.toString():K.value})]},xe))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(K=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${K*.2}s`}},K))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6",children:[ie(),r.enableWhitelist&&e.jsxs("div",{className:"mb-8 p-4 bg-gray-50 dark:bg-[#0d0e12] rounded-lg border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-semibold",children:"Whitelist Checker"}),g&&T&&e.jsx("span",{className:"text-xs bg-[#00ffbd]/10 text-[#00ffbd] px-2 py-1 rounded-full",children:"Whitelisted"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"Enter your wallet address",value:m,onChange:K=>c(K.target.value),className:"flex-1 bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 rounded-lg px-3 py-2 text-gray-900 dark:text-white text-sm focus:outline-none focus:border-[#00ffbd]"}),e.jsx("button",{onClick:Z,disabled:!m||!Fr(m),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-colors ${m&&Fr(m)?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-200 dark:bg-gray-800 text-gray-500 cursor-not-allowed"}`,children:"Check"})]}),g&&e.jsx("div",{className:`mt-3 p-3 rounded-lg ${T?"bg-[#00ffbd]/10 border border-[#00ffbd]/20":"bg-red-500/10 border border-red-500/20"}`,children:T?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center text-sm text-[#00ffbd]",children:[e.jsx("span",{className:"mr-2",children:"✓"}),"Address is whitelisted"]}),$&&typeof $=="object"&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["You can mint up to ",$.maxMint," NFTs during the whitelist phase"]})]}):e.jsxs("div",{className:"flex items-center text-sm text-red-500",children:[e.jsx("span",{className:"mr-2",children:"✗"}),"Address is not whitelisted"]})})]}),ne(),e.jsxs("div",{className:"flex items-center justify-between text-center mt-4",children:[r.creatorAddress&&e.jsxs("div",{className:"group relative",children:[e.jsx("a",{href:`${r.network==="polygon"?"https://polygonscan.com":r.network==="unichain-mainnet"||r.chainId===130?"https://unichain.blockscout.com":r.network==="unichain"?"https://unichain-sepolia.blockscout.com":r.network==="moonwalker"||r.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":r.network==="monad-testnet"||r.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io"}/address/${r.creatorAddress}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-600 hover:text-[#00ffbd] dark:text-gray-400 dark:hover:text-[#00ffbd] transition-colors",children:"Creator Address"}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:r.creatorAddress})]}),e.jsxs("div",{className:"group relative",children:[e.jsx("a",{href:`${r.network==="polygon"?"https://polygonscan.com":r.network==="unichain-mainnet"||r.chainId===130?"https://unichain.blockscout.com":r.network==="unichain"?"https://unichain-sepolia.blockscout.com":r.network==="moonwalker"||r.chainId===1828369849?"https://moonwalker-blockscout.eu-north-2.gateway.fm":r.network==="monad-testnet"||r.chainId===10143?"https://monad-testnet.socialscan.io":"https://sepolia.etherscan.io"}/address/${r.contractAddress}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-600 hover:text-[#00ffbd] dark:text-gray-400 dark:hover:text-[#00ffbd] transition-colors",children:"Contract Address"}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-2 py-1 bg-gray-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap pointer-events-none",children:r.contractAddress})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{children:[E,"/",f," Minted"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 dark:bg-[#0d0e12] rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[#00ffbd] transition-all duration-500",style:{width:`${Math.min(te,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-4 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Max Per Wallet"}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:r.enableWhitelist?e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check your mint cap in whitelist checker above"}):r.maxPerWallet})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#0d0e12] rounded-lg p-4 border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Total Supply"}),e.jsx("div",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f})]})]})]})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Collection Analytics"}),e.jsx(cm,{children:e.jsx(_m,{collection:r})})]})]}),_&&e.jsx(qt,{width:se.width,height:se.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(qm,{isOpen:U,onClose:()=>{V(!1),B(null)},currentStep:P,error:k}),e.jsx(zm,{isOpen:X,onClose:()=>z(!1),onRate:K=>{console.log("User rated minting experience:",K)}})]})}const ai=3e4,qr=new Map,Vm=(a,t)=>{const s=`${a}-${t}`,n=qr.get(s);if(n){const{timestamp:l,data:d}=n;if(Date.now()-l<ai)return d;qr.delete(s)}const r=localStorage.getItem(s);if(r)try{const{timestamp:l,data:d}=JSON.parse(r);if(Date.now()-l<ai)return d;localStorage.removeItem(s)}catch{localStorage.removeItem(s)}return null},Gm=(a,t,s)=>{const n=`${a}-${t}`,r={timestamp:Date.now(),data:s};qr.set(n,r);try{localStorage.setItem(n,JSON.stringify(r))}catch(l){console.error("Error saving to localStorage:",l)}},Ym={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},Qm={hidden:{opacity:0,x:-20},show:{opacity:1,x:0,transition:{type:"spring",bounce:.3}}};function Wo(){i.useState([]);const[a,t]=i.useState(!0),{address:s,isConnected:n}=Oe(),{chain:r}=Ft(),[l,d]=i.useState([]),[o,m]=i.useState("all");i.useRef(null);const{openConnectModal:c}=ua(),[u,x]=i.useState(!1),f=()=>{const w=[{id:"all",label:"All Networks"},{id:"sepolia",label:"Sepolia"},{id:"unichain-mainnet",label:"Unichain Mainnet"},{id:"unichain",label:"Unichain Testnet"},{id:"polygon",label:"Polygon"},{id:"moonwalker",label:"Moonwalker"},{id:"monad-testnet",label:"Monad Testnet"}],p={all:l.length,sepolia:l.filter(y=>y.network==="sepolia"||y.chainId===11155111).length,"unichain-mainnet":l.filter(y=>y.network==="unichain-mainnet"||y.chainId===130).length,unichain:l.filter(y=>y.network==="unichain"||y.chainId===1301).length,polygon:l.filter(y=>y.network==="polygon"||y.chainId===137).length,moonwalker:l.filter(y=>y.network==="moonwalker"||y.chainId===1828369849).length,"monad-testnet":l.filter(y=>y.network==="monad-testnet"||y.chainId===10143).length};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>x(!u),className:"bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 rounded-xl px-4 py-2 text-gray-900 dark:text-white focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsxs("span",{children:[w.find(y=>y.id===o)?.label," (",p[o],")"]}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${u?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),u&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-[#1a1b1f] rounded-xl shadow-lg border border-gray-200 dark:border-gray-800",children:w.map(y=>e.jsxs("button",{onClick:()=>{m(y.id),x(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-xl last:rounded-b-xl transition-colors duration-150 ${o===y.id?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:[y.label," (",p[y.id],")"]},y.id))})]})},N=i.useMemo(()=>l.filter(w=>o==="all"?!0:w.network===o||o==="sepolia"&&w.chainId===11155111||o==="unichain-mainnet"&&w.chainId===130||o==="unichain"&&w.chainId===1301||o==="polygon"&&w.chainId===137||o==="moonwalker"&&w.chainId===1828369849||o==="monad-testnet"&&w.chainId===10143),[l,o]);i.useEffect(()=>{const w=async()=>{if(!s){d([]),t(!1);return}try{const y=Vm(s,r?.id);if(y){d(y),t(!1),p();return}await p()}catch{t(!1),M.error("Error loading history")}},p=async()=>{try{const[y,g,j,T,b]=await Promise.all([F0(s),O0(s),_0(s),Eo(s),Fo()]),$=y.reduce((P,B)=>(P[B.address.toLowerCase()]={name:B.name,symbol:B.symbol,logo:B.logo,decimals:B.decimals||18},P),{}),L=await Promise.all(g.map(async P=>{let B=$[P.tokenAddress.toLowerCase()];if(!B){const H=await I0(P.tokenAddress);H&&(B={name:H.name,symbol:H.symbol,logo:H.logo,decimals:H.decimals||18})}B=B||{name:"Unknown Token",symbol:"TOKEN",decimals:18};const k=de(P.amount,B.decimals);let D="sepolia",_=P.chainId;return _===137||P.network==="polygon"?(D="polygon",_=137):_===130||P.network==="unichain-mainnet"?(D="unichain-mainnet",_=130):_===1301||P.network==="unichain"?(D="unichain",_=1301):_===1828369849||P.network==="moonwalker"?(D="moonwalker",_=1828369849):_===10143||P.network==="monad-testnet"?(D="monad-testnet",_=10143):(_===11155111||P.network==="sepolia")&&(D="sepolia",_=11155111),{id:P.transactionHash,activityType:"token_transaction",timestamp:P.timestamp,image:B.logo,title:P.type==="sent"?`Sent ${k} ${B.symbol}`:`Received ${k} ${B.symbol}`,subtitle:P.type==="sent"?`To ${P.toAddress.slice(0,6)}...${P.toAddress.slice(-4)}`:`From ${P.fromAddress.slice(0,6)}...${P.fromAddress.slice(-4)}`,address:P.tokenAddress,network:D,chainId:_,transactionHash:P.transactionHash,amount:k,tokenSymbol:B.symbol,fromAddress:P.fromAddress,toAddress:P.toAddress}})),S=y.map(P=>{let B="sepolia",k=P.chainId;return k===137||P.chainName?.toLowerCase().includes("polygon")?(B="polygon",k=137):k===130?(B="unichain-mainnet",k=130):k===1301?(B="unichain",k=1301):k===1828369849?(B="moonwalker",k=1828369849):k===11155111&&(B="sepolia",k=11155111),{id:P.address,activityType:"token_creation",timestamp:P.createdAt,image:P.logo,title:`Created ${P.name}`,subtitle:"Token Creation",address:P.address,network:B,chainId:k}}),A=new Set([...y.map(P=>P.address.toLowerCase()),...g.map(P=>P.tokenAddress.toLowerCase())]),h=new Map(T.map(P=>[P.contractAddress.toLowerCase(),P])),I=j.map(P=>{const B=h.get(P.contractAddress.toLowerCase());let k=B?.network||"sepolia",D=B?.chainId;return B?.chainId===137||P.chainId===137?(k="polygon",D=137):B?.chainId===130||P.chainId===130?(k="unichain-mainnet",D=130):B?.chainId===1301||P.chainId===1301?(k="unichain",D=1301):B?.chainId===1828369849||P.chainId===1828369849?(k="moonwalker",D=1828369849):B?.chainId===10143||P.chainId===10143?(k="monad-testnet",D=10143):(B?.chainId===11155111||P.chainId===11155111)&&(k="sepolia",D=11155111),{id:`${P.transactionHash}-${P.tokenId}`,activityType:"nft_transfer",timestamp:P.timestamp,image:B?.previewUrl||"/placeholder.png",title:P.type==="sent"?`Sent ${B?.name||"NFT"} #${P.tokenId}`:`Received ${B?.name||"NFT"} #${P.tokenId}`,subtitle:P.type==="sent"?`To ${P.toAddress.slice(0,6)}...${P.toAddress.slice(-4)}`:`From ${P.fromAddress.slice(0,6)}...${P.fromAddress.slice(-4)}`,address:P.contractAddress,network:k,chainId:D,symbol:B?.symbol,artworkType:B?.artworkType,tokenId:P.tokenId,amount:P.amount,transactionHash:P.transactionHash}}),O=T.map(P=>({id:P.contractAddress,activityType:"nft_creation",timestamp:P.createdAt,image:P.previewUrl,title:`Created ${P.name}`,subtitle:"NFT Collection",address:P.contractAddress,network:P.network,chainId:P.chainId,symbol:P.symbol})),F=(await Promise.all(b.map(async P=>(await E0(P.contractAddress)).filter(k=>k.minterAddress?.toLowerCase()===s.toLowerCase()).flatMap(k=>{let D=P.network||"sepolia",_=P.chainId;_===137||D==="polygon"?(D="polygon",_=137):_===130||D==="unichain-mainnet"?(D="unichain-mainnet",_=130):_===1301||D==="unichain"?(D="unichain",_=1301):_===1828369849||D==="moonwalker"?(D="moonwalker",_=1828369849):(_===11155111||D==="sepolia")&&(D="sepolia",_=11155111);const H=parseInt(k.quantity||"1");return H>1?Array(H).fill().map((X,z)=>({id:`${k.id||`${P.contractAddress}-${k.tokenId}`}-${z}`,activityType:"nft_mint",timestamp:k.timestamp,image:k.image||P.previewUrl,title:`Minted ${P.name} #${parseInt(k.tokenId)+z}`,subtitle:`NFT Mint #${parseInt(k.tokenId)+z}`,address:P.contractAddress,network:D,chainId:_,symbol:P.symbol,artworkType:P.artworkType,transactionHash:k.hash,quantity:H,tokenId:String(parseInt(k.tokenId)+z)})):[{id:k.id||`${P.contractAddress}-${k.tokenId}`,activityType:"nft_mint",timestamp:k.timestamp,image:k.image||P.previewUrl,title:`Minted ${P.name} #${k.tokenId}`,subtitle:`NFT Mint #${k.tokenId}`,address:P.contractAddress,network:D,chainId:_,symbol:P.symbol,artworkType:P.artworkType,transactionHash:k.hash,quantity:1,tokenId:k.tokenId}]})))).flat(),U=new Set,V=[...S,...L,...I,...O,...F].filter(P=>{if(!P.transactionHash)return!0;const B=P.activityType==="nft_mint"?`${P.transactionHash}-${P.activityType}-${P.tokenId}`:`${P.transactionHash}-${P.activityType}`;return U.has(B)?!1:(U.add(B),!0)}).sort((P,B)=>{const k=P.timestamp instanceof Date?P.timestamp.getTime():typeof P.timestamp=="number"?P.timestamp:typeof P.timestamp=="string"?new Date(P.timestamp).getTime():0;return(B.timestamp instanceof Date?B.timestamp.getTime():typeof B.timestamp=="number"?B.timestamp:typeof B.timestamp=="string"?new Date(B.timestamp).getTime():0)-k});Gm(s,r?.id,V),d(V),t(!1)}catch{t(!1),M.error("Error loading activity data")}};w()},[s,r]);const v=w=>{const p=wt(w.image);return w.artworkType==="video"?e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black/5 dark:bg-black/20",children:e.jsx("video",{src:p,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0})}):e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black/5 dark:bg-black/20",children:e.jsx("img",{src:p,alt:w.title,className:"w-full h-full object-cover",onError:y=>{y.target.onerror=null,y.target.src="/placeholder.png"}})})},C=(w,p)=>{if(p)switch(p){case 130:return"Unichain Mainnet";case 1301:return"Unichain Testnet";case 137:return"Polygon";case 1828369849:return"Moonwalker";case 10143:return"Monad Testnet";case 11155111:return"Sepolia";default:return"Unknown Network"}switch(w){case"unichain-mainnet":return"Unichain Mainnet";case"unichain":return"Unichain Testnet";case"polygon":return"Polygon";case"moonwalker":return"Moonwalker";case"monad-testnet":return"Monad Testnet";default:return"Sepolia"}},E=w=>{const y=(b=>b instanceof Date?b:typeof b=="number"?new Date(b):b?.seconds?new Date(b.seconds*1e3):typeof b=="string"?new Date(b):new Date)(w.timestamp),g=w.activityType==="nft_creation"||w.activityType==="nft_mint";w.activityType;const j=()=>{switch(w.activityType){case"token_creation":return"bg-purple-500/10 text-purple-500";case"token_transaction":return"bg-blue-500/10 text-blue-500";case"nft_creation":return"bg-pink-500/10 text-pink-500";case"nft_mint":return"bg-green-500/10 text-green-500";default:return"bg-gray-500/10 text-gray-500"}},T=()=>{switch(w.activityType){case"token_creation":return"Token Creation";case"token_transaction":return"Token Transfer";case"nft_creation":return"NFT Collection";case"nft_mint":return"NFT Mint";default:return"Transaction"}};return e.jsx(R.div,{variants:Qm,whileHover:{scale:1.01,transition:{duration:.2}},className:"relative bg-white dark:bg-[#1a1b1f] rounded-xl p-3 border border-gray-100 dark:border-gray-800 hover:border-[#00ffbd] transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:v(w)}),e.jsxs(R.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[g?e.jsx("button",{onClick:()=>navigate(`/collection/${w.symbol}`),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-[#00ffbd] dark:hover:text-[#00ffbd] transition-colors truncate",children:w.title}):e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:w.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${j()}`,children:T()})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:gr(y,{addSuffix:!0})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.subtitle}),w.network&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["on ",C(w.network,w.chainId)]}),w.transactionHash&&e.jsxs("a",{href:im(w.chainId,"tx",w.transactionHash),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 hover:text-[#00ffbd] transition-colors",children:[e.jsx("span",{children:"View Transaction"}),e.jsx(ys,{size:12,className:"ml-1 cursor-pointer",onClick:b=>{b.preventDefault(),navigator.clipboard.writeText(w.transactionHash),M.success("Transaction hash copied!")}})]})]})]})]})},w.id)};return n?a?e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] flex items-center justify-center",children:e.jsxs(R.div,{className:"flex flex-col items-center gap-4",initial:{scale:.9},animate:{scale:1},transition:{duration:.3},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[#00ffbd] rounded-full animate-spin border-t-transparent"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-[#00ffbd] rounded-full opacity-30"})]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Loading history..."})]})}):e.jsx("div",{className:"h-screen bg-gray-50 dark:bg-[#0a0b0f] pt-20 px-8 pb-8 overflow-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto h-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-12 sticky top-4 z-[120]",children:[e.jsx(R.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-xl font-bold text-gray-900 dark:text-white",children:"Activity History"}),e.jsx(f,{})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative mt-8 h-[calc(100%-6rem)] overflow-hidden",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(w=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${w*.2}s`}},w))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl h-full overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden custom-scrollbar",children:e.jsx(R.div,{variants:Ym,initial:"hidden",animate:"show",className:"space-y-3",children:N.length>0?N.map(w=>E(w)):e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-center text-gray-500 dark:text-gray-400",children:"No activity found"})})})})]})]})}):e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6 max-w-md",children:"Please connect your wallet to view your activity history. You'll be able to see all your transactions, token transfers, and NFT activities."}),e.jsxs("button",{onClick:c,className:"px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Connect Wallet"]})]})})}const ri=3e4,zr=new Map,Xm=(a,t)=>{const s=`${a}-${t}`,n=zr.get(s);if(n){const{timestamp:l,data:d}=n;if(Date.now()-l<ri)return console.log("Using cached NFTs"),d.map(o=>({...o,network:o.network||(o.chainId===11155111?"sepolia":o.chainId===1301?"unichain":o.chainId===1828369849?"moonwalker":o.chainId===10143?"monad-testnet":"sepolia")}));zr.delete(s)}const r=localStorage.getItem(`nfts-${s}`);if(r)try{const{timestamp:l,data:d}=JSON.parse(r);if(Date.now()-l<ri)return console.log("Using localStorage cached NFTs"),d.map(o=>({...o,network:o.network||(o.chainId===11155111?"sepolia":o.chainId===1301?"unichain":o.chainId===1828369849?"moonwalker":o.chainId===10143?"monad-testnet":"sepolia")}));localStorage.removeItem(`nfts-${s}`)}catch(l){console.error("Error parsing localStorage cache:",l)}return null},Zm=(a,t,s)=>{const n=`${a}-${t}`,r={timestamp:Date.now(),data:s};zr.set(n,r);try{localStorage.setItem(`nfts-${n}`,JSON.stringify(r))}catch(l){console.error("Error saving to localStorage:",l)}},Jm=async(a,t)=>{try{let s;if(t===130)s="https://unichain.blockscout.com";else if(t===1301)s="https://unichain-sepolia.blockscout.com";else if(t===137)s="https://polygon.blockscout.com";else if(t===1828369849)s="https://moonwalker-blockscout.eu-north-2.gateway.fm";else if(t===10143)s="https://monad-testnet.socialscan.io";else if(t===11155111)s="https://eth-sepolia.blockscout.com";else return[];console.log("Fetching NFTs from Blockscout:",{baseUrl:s,address:a,chainId:t});const r=(await Wt.get(`${s}/api/v2/addresses/${a}/nft?type=ERC-721%2CERC-404%2CERC-1155`)).data.items||[];return(await Promise.all(r.map(async d=>{try{const c=((await Wt.get(`${s}/api/v2/tokens/${d.token.address}/transfers`,{params:{type:d.token.type,holder:a,token_id:d.id}})).data.items||[])[0],x=(await Wt.get(`${s}/api/v2/tokens/${d.token.address}/instances/${d.id}/metadata`)).data;return{contractAddress:d.token.address,tokenId:d.id,type:d.token.type,name:x.name||`${d.token.name} #${d.id}`,symbol:d.token.symbol,collectionName:d.token.name,description:x.description,image:x.image,balance:d.value||"1",chainId:t,network:t===137?"polygon":t===1301?"unichain":t===130?"unichain-mainnet":t===1828369849?"moonwalker":t===10143?"monad-testnet":"sepolia",mintedAt:c?.timestamp||Date.now(),value:c?.value||"0",mintToken:{address:"0x0000000000000000000000000000000000000000",type:"native"}}}catch(o){return console.error("Error processing NFT:",o),null}}))).filter(Boolean)}catch(s){return console.error("Error fetching from Blockscout:",s),[]}},ni={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Km={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",bounce:.3}}},eu=()=>e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(a=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${a*.2}s`}},a))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] h-[340px]",children:[e.jsx("div",{className:"h-[180px] w-full bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:"w-16 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:"w-20 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"h-6 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]})]})]})]})});function Ho(){const[a,t]=i.useState([]),[s,n]=i.useState(!0),{address:r,isConnected:l}=Oe(),{chain:d}=Ft(),{openConnectModal:o}=ua(),[m,c]=i.useState({}),[u,x]=i.useState({type:"all",network:"all"}),f=i.useRef(null),N=i.useMemo(()=>a.filter(p=>{if(u.type!=="all"&&p.type!==u.type)return!1;if(u.network!=="all"){const y=parseInt(u.network);return p.chainId===y||y===11155111&&p.network==="sepolia"||y===130&&p.network==="unichain-mainnet"||y===1301&&p.network==="unichain"||y===137&&p.network==="polygon"||y===1828369849&&p.network==="moonwalker"}return!0}),[a,u]);i.useEffect(()=>{const p=async()=>{if(!r){t([]),n(!1);return}try{const g=Xm(r,d?.id);if(g){t(g),n(!1),y();return}await y()}catch(g){console.error("Error loading NFTs:",g),n(!1)}},y=async()=>{try{const g=await B0(r),j=[137,1301,130,1828369849,11155111],b=(await Promise.all(j.map(async F=>{try{return console.log(`Fetching NFTs for chain ${F}`),(await Jm(r,F)).map(V=>({...V,uniqueId:`${V.contractAddress}-${V.tokenId}-${V.type}-${F}`}))}catch(U){return console.error(`Error fetching NFTs for chain ${F}:`,U),[]}}))).flat(),$=new Map(b.map(F=>[`${F.contractAddress}-${F.tokenId}`,F])),L=g.map(F=>{const U=$.get(`${F.contractAddress}-${F.tokenId}`);return{...F,...U,balance:U?.balance||F.balance||"1",uniqueId:`${F.contractAddress}-${F.tokenId}-${F.type}-${F.chainId||U?.chainId}`,network:F.network||U?.network||(F.chainId===137?"polygon":F.chainId===1301?"unichain":F.chainId===130?"unichain-mainnet":F.chainId===1828369849?"moonwalker":"sepolia")}}),S=new Set(g.map(F=>`${F.contractAddress}-${F.tokenId}`)),A=b.filter(F=>!S.has(`${F.contractAddress}-${F.tokenId}`)),h=[...L,...A].sort((F,U)=>{const V=new Date(F.mintedAt||0);return new Date(U.mintedAt||0)-V});Zm(r,d?.id,h),t(h),n(!1);const I=[...new Set(h.filter(F=>F.mintToken?.address).map(F=>F.mintToken.address.toLowerCase()))],O={};await Promise.all(I.map(async F=>{try{const U=await at(F);U?.logo&&(O[F]=U.logo)}catch(U){console.error(`Error loading logo for token ${F}:`,U)}})),c(O)}catch(g){console.error("Error loading fresh NFT data:",g),n(!1)}};p()},[r,d]),i.useEffect(()=>{(async()=>{for(const y of a)if(y?.mintToken?.address&&!m[y.mintToken.address.toLowerCase()])try{const g=await at(y.mintToken.address);g?.logo&&c(j=>({...j,[y.mintToken.address.toLowerCase()]:g.logo}))}catch(g){console.error("Error fetching token logo:",g)}})()},[a]);const v=(p,y)=>{if(!p)return"0";try{const j=y?.mintToken?.address?.toLowerCase()==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"||y.network==="moonwalker",T=parseInt(y.quantity||"1");let b=p;if(T>1)if(!isNaN(p))b=String(Number(p)/T);else{const A=p.toString().replace(/,/g,"");try{const h=Ie(A,"wei"),I=ze(h);b=String(Number(I)/T)}catch{const h=ze(A);b=String(Number(h)/T)}}if(j||y?.mintToken?.type==="custom"||y?.mintToken?.type==="usdc"||y?.mintToken?.type==="usdt")return parseFloat(b).toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0});let $;if(typeof b=="string"){const A=b.replace(/,/g,"");try{$=Ie(A,"wei")}catch{$=Ut(A)}}else $=BigInt(b.toString());const L=ze($),S=parseFloat(L);return isNaN(S)?"0":S.toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}catch(g){return console.error("Error formatting price:",g),p?.toString()||"0"}},C=()=>{const[p,y]=i.useState(!1),[g,j]=i.useState(!1),T=h=>{f.current&&clearTimeout(f.current),h(!0)},b=h=>{f.current=setTimeout(()=>{h(!1)},300)},$={all:a.length,ERC721:a.filter(h=>h.type==="ERC721").length,ERC1155:a.filter(h=>h.type==="ERC1155").length},L={all:a.length,11155111:a.filter(h=>h.network==="sepolia"||h.chainId===11155111).length,130:a.filter(h=>h.network==="unichain-mainnet"||h.chainId===130).length,1301:a.filter(h=>h.network==="unichain"||h.chainId===1301).length,137:a.filter(h=>h.network==="polygon"||h.chainId===137).length,1828369849:a.filter(h=>h.network==="moonwalker"||h.chainId===1828369849).length,10143:a.filter(h=>h.network==="monad-testnet"||h.chainId===10143).length},S=[{value:"all",label:`All Types (${$.all})`},{value:"ERC721",label:`ERC721 (${$.ERC721})`},{value:"ERC1155",label:`ERC1155 (${$.ERC1155})`}],A=[{id:"all",label:`All Networks (${L.all})`},{id:"11155111",label:`Sepolia (${L[11155111]})`},{id:"130",label:`Unichain Mainnet (${L[130]})`},{id:"1301",label:`Unichain Testnet (${L[1301]})`},{id:"137",label:`Polygon (${L[137]})`},{id:"1828369849",label:`Moonwalker (${L[1828369849]})`},{id:"10143",label:`Monad Testnet (${L[10143]})`}];return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",onMouseEnter:()=>T(j),onMouseLeave:()=>b(j),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between text-xs",children:[e.jsx("span",{children:S.find(h=>h.value===u.type)?.label}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(f.current),onMouseLeave:()=>b(j),children:S.map(h=>e.jsx("button",{onClick:()=>{x(I=>({...I,type:h.value})),j(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 text-xs ${u.type===h.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:h.label},h.value))})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>T(y),onMouseLeave:()=>b(y),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between text-xs",children:[e.jsx("span",{children:A.find(h=>h.id===u.network)?.label}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${p?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(f.current),onMouseLeave:()=>b(y),children:A.map(h=>e.jsx("button",{onClick:()=>{x(I=>({...I,network:h.id})),y(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 text-xs ${u.network===h.id?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:h.label},h.id))})]})]})},E=p=>{const y=p?.mintToken?.address?.toLowerCase();return!y||y==="0x0000000000000000000000000000000000000000"?p?.network==="moonwalker"||p?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"}):p?.network==="polygon"||p?.chainId===137?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}):p?.network==="monad-testnet"||p?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}):e.jsx(ct,{className:"w-5 h-5 text-[#00ffbd]"}):y==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-4 h-4"}):y&&m[y]?e.jsx("img",{src:m[y],alt:p.mintToken.symbol||"Token",className:"w-4 h-4 rounded-full",onError:j=>{j.target.onerror=null,j.target.src="/token-default.png"}}):p.mintToken?.type==="custom"?e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-4 h-4 rounded-full"}):e.jsx(ct,{className:"w-4 h-4 text-[#00ffbd]"})},w=p=>{const y=wt(p.image||p.previewUrl),g=p.name?.replace(/ #0$/,"");return e.jsx(R.div,{variants:Km,whileHover:{scale:1.02,transition:{duration:.2}},whileTap:{scale:.98},className:"block",children:e.jsxs("div",{className:"relative",children:[e.jsxs(R.div,{className:"absolute -top-[2px] -left-[2px] w-8 h-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(j=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${j*.2}s`}},j))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#1a1b1f] h-[340px]",children:[e.jsx(R.div,{className:"relative h-[180px] w-full overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:p.artworkType==="video"?e.jsx("video",{src:y,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsx("img",{src:y,alt:g,className:"w-full h-full object-cover",onError:j=>{j.target.onerror=null,j.target.src="/placeholder.png"}})}),e.jsxs(R.div,{className:"flex flex-col flex-1 p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"flex items-center justify-between gap-2 mb-1 w-full",children:e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white truncate flex-shrink min-w-0",children:g})})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Minted:"}),e.jsx("span",{children:gr(new Date(p.mintedAt),{addSuffix:!0})})]}),p.value&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Mint Price:"}),e.jsxs("div",{className:"flex items-center gap-1 text-[#00ffbd]",children:[E(p),e.jsxs("span",{className:"font-medium",children:[v(p.value,p)," ",(()=>{const j=p?.mintToken?.address?.toLowerCase();return j==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?"ZERO":!j||j==="0x0000000000000000000000000000000000000000"?p.network==="moonwalker"||p.chainId===1828369849?"ZERO":p.network==="polygon"||p.chainId===137?"POL":"ETH":p?.mintToken?.type==="custom"?p.mintToken.symbol:"ETH"})()]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Collection:"}),e.jsx(Ge,{to:`/collection/${p.symbol}`,className:"text-[#00ffbd] hover:underline",children:p.collectionName})]})]})]})]}),p.type==="ERC1155"&&p.balance>1&&e.jsx("div",{className:"absolute top-3 right-12 z-10",children:e.jsxs("div",{className:"bg-[#00ffbd] text-black px-2 py-0.5 rounded-full text-xs font-medium",children:["x",p.balance]})})]})},p.uniqueId)};return l?s?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f]",children:e.jsxs("div",{className:"ml-[256px] relative",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-gray-50 dark:bg-[#0a0b0f] border-b border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative inline-block mb-3 pt-4",children:[e.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"absolute -bottom-2 left-0 w-full h-0.5 bg-[#00ffbd]"})]}),e.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-xl pb-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4 overflow-y-auto custom-scrollbar",style:{height:"calc(100vh - 120px)",scrollbarWidth:"thin",scrollbarColor:`#00ffbd ${document.documentElement.classList.contains("dark")?"#1a1b1f":"#ffffff"}`},children:e.jsx(R.div,{variants:ni,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:Array.from({length:10}).map((p,y)=>e.jsx(eu,{},y))})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f]",children:e.jsxs("div",{className:"ml-[256px] relative",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-gray-50 dark:bg-[#0a0b0f] border-b border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative inline-block mb-3 pt-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"My NFTs"}),e.jsx("div",{className:"absolute -bottom-2 left-0 w-full h-0.5 bg-[#00ffbd]"})]}),e.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-xl pb-3",children:e.jsx(C,{})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4 overflow-y-auto custom-scrollbar",style:{height:"calc(100vh - 120px)",scrollbarWidth:"thin",scrollbarColor:`#00ffbd ${document.documentElement.classList.contains("dark")?"#1a1b1f":"#ffffff"}`},children:e.jsx(R.div,{variants:ni,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:N.length>0?N.map(w):e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-center py-12 col-span-full",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No NFTs Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't minted any NFTs yet."})]})})})]})}):e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6 max-w-md",children:"Please connect your wallet to view your NFTs. You'll be able to see all your NFT collections and manage them."}),e.jsxs("button",{onClick:o,className:"px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Connect Wallet"]})]})})}const qo=[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:je.WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:je.USDC,symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:je.USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],tu=`
  .token-list-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .token-list-scrollbar::-webkit-scrollbar-track {
    background: #2d2f36;
    border-radius: 3px;
  }
  .token-list-scrollbar::-webkit-scrollbar-thumb {
    background: #00ffbd;
    border-radius: 3px;
  }
  .token-list-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #00ffbd #2d2f36;
  }
`;function ii({token:a,userAddress:t,onSelect:s,isSelected:n}){const[r,l]=i.useState("0");i.useEffect(()=>{(async()=>{if(!(!t||!a))try{const m=new he(window.ethereum);let c,u;if(a.address==="ETH")c=await m.getBalance(t),u=18;else{const N=new J(a.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],m);try{u=await N.decimals()}catch{u=18}const v=N.interface.encodeFunctionData("balanceOf",[t]),C=await m.call({to:a.address,data:v});c=fo(C)}const x=Number(de(c,u)),f=new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:a.symbol==="USDC"?2:6}).format(x);l(f)}catch(m){console.error(`Error fetching balance for ${a.symbol}:`,m),l("0")}})()},[a,t]);const d=()=>{const o=qo.find(c=>c.address===a.address);if(o)return e.jsx("img",{src:o.logo,alt:o.symbol,className:"w-8 h-8 rounded-full"});const m=a.logo||(a.logoIpfs?wt(a.logoIpfs):null);return m?e.jsx("img",{src:m,alt:a.symbol,className:"w-8 h-8 rounded-full",onError:c=>{c.target.onerror=null,c.target.src="/token-default.png"}}):e.jsx("img",{src:"/token-default.png",alt:a.symbol||"Unknown",className:"w-8 h-8 rounded-full"})};return e.jsxs("button",{onClick:()=>s(a),className:`w-full flex items-center justify-between p-3 hover:bg-gray-100 dark:hover:bg-[#2d2f36] rounded-xl transition-colors ${n?"bg-[#00ffbd]/10 border-[#00ffbd] border":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d(),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:a.symbol||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.name||"Unknown Token"})]})]}),e.jsx("div",{className:"text-right text-sm text-gray-900 dark:text-white",children:r})]})}function rr({isOpen:a,onClose:t,onSelect:s,selectedTokenAddress:n}){const{address:r}=Oe();ws();const[l,d]=i.useState(""),[o,m]=i.useState(null),[c,u]=i.useState(!1),[x,f]=i.useState(""),[N,v]=i.useState(0),[C,E]=i.useState([]),[w,p]=i.useState([]);i.useEffect(()=>{(async()=>{if(!(!a||!r))try{u(!0);const T=await Wr();console.log("Fetched deployed tokens:",T);const b=T.map(h=>({address:h.address,symbol:h.symbol,name:h.name,decimals:h.decimals||18,logo:h.logo,logoIpfs:h.logoIpfs,artworkType:h.artworkType,verified:!0}));E(b);const $=new he(window.ethereum),L=async h=>{try{if(h.address==="ETH"){const P=await $.getBalance(r),B=de(P,18);return{...h,formattedBalance:B}}if(await $.getCode(h.address)==="0x")return null;const O=new J(h.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)"],$),[F,U]=await Promise.all([O.balanceOf(r),O.decimals().catch(()=>18)]),V=de(F,U);return{...h,formattedBalance:V}}catch(I){return console.error(`Error checking token ${h.symbol}:`,I),{...h,formattedBalance:"0"}}},A=(await Promise.all([...qo,...b].map(L))).filter(h=>h!==null);console.log("All tokens with balances:",A),p(A)}catch(T){console.error("Error fetching deployed tokens:",T)}finally{u(!1)}})()},[a,r]),i.useEffect(()=>{a&&(d(""),m(null),f(""),v(j=>j+1))},[a]),i.useEffect(()=>{const T=setTimeout(async()=>{if(!l||l.length<42){m(null),f("");return}if(!gt(l)){m(null),l.startsWith("0x")&&f("Invalid token address");return}u(!0),f("");try{const b=await at(l);if(b){console.log("Found custom token in Firebase:",b),m({address:l,symbol:b.symbol,name:b.name,decimals:b.decimals||18,logo:b.logo,logoIpfs:b.logoIpfs,artworkType:b.artworkType,verified:!0}),f(""),u(!1);return}const $=new he(window.ethereum),L=new J(l,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"],$),[S,A,h]=await Promise.all([L.symbol(),L.name(),L.decimals()]);m({address:l,symbol:S,name:A,decimals:h,logo:null,logoIpfs:null,artworkType:null,verified:!0}),f("")}catch(b){console.error("Error loading token:",b),f("Could not load token information. Make sure this is a valid ERC20 token."),m(null)}finally{u(!1)}},500);return()=>clearTimeout(T)},[l]);const y=i.useMemo(()=>{const j=l.toLowerCase();return w.filter(T=>T.symbol?.toLowerCase().includes(j)||T.name?.toLowerCase().includes(j)||T.address?.toLowerCase().includes(j))},[l,w]),g=async j=>{try{let T;if(j.symbol==="ETH")T={...j,address:je.WETH};else{const b=await at(j.address);b?T={...j,symbol:j.symbol||b.symbol,name:j.name||b.name,decimals:j.decimals||b.decimals||18,logo:j.logo||b.logo,logoIpfs:j.logoIpfs||b.logoIpfs,artworkType:j.artworkType||b.artworkType,verified:!0}:T={...j,decimals:j.decimals||18,verified:!0}}s(T),t()}catch(T){console.error("Error in handleTokenSelect:",T),f("Failed to process token selection")}};return e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("style",{children:tu}),e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(le.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Select Token"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ba,{className:"text-gray-400"})}),e.jsx("input",{type:"text",value:l,onChange:j=>d(j.target.value),placeholder:"Search by name or paste address",className:"w-full pl-10 pr-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500"}),x&&e.jsx("p",{className:"mt-2 text-sm text-red-500",children:x})]}),e.jsx("div",{className:"token-list-scrollbar overflow-y-auto max-h-[60vh] pr-2",children:c?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Your Tokens"}),e.jsx("div",{className:"space-y-2",children:y.map(j=>e.jsx(ii,{token:j,userAddress:r,onSelect:g,isSelected:n===(j.symbol==="ETH"?je.WETH:j.address)},`${j.address}-${N}`))})]}),o&&!x&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Custom Token"}),e.jsx(ii,{token:o,userAddress:r,onSelect:g,isSelected:n===o.address})]}),y.length===0&&!o&&!x&&e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"No tokens found with balance"})]})})]})})]})}const nr=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!1,inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"}];function su(){const{address:a}=Oe(),t=ws(),[s,n]=i.useState(null),[r,l]=i.useState(null),[d,o]=i.useState(""),[m,c]=i.useState(""),[u,x]=i.useState(!1),[f,N]=i.useState(null),[v,C]=i.useState(!1),[E,w]=i.useState(!1),[p,y]=i.useState("0"),[g,j]=i.useState("0"),[T,b]=i.useState(2),[$,L]=i.useState(""),[S,A]=i.useState(!1),[h,I]=i.useState(0),[O,F]=i.useState(!1),[U,V]=i.useState(null),[P,B]=i.useState(null),[k,D]=i.useState(null),_=i.useCallback(()=>{if(!d||!m||!s||!r){V(null),D(null);return}try{const W=Number(d),G=Number(m)/W,q=W*.003;V(q),D(G),B("~0.003 ETH")}catch(W){console.error("Error calculating trade details:",W)}},[d,m,s,r]);i.useEffect(()=>{_()},[_,d,m]),i.useEffect(()=>{async function W(){if(!t||!s||!r||!d||d==="0"){c(""),N(null);return}try{const Q=await t.getPoolInfo(s.address,r.address);if(console.log("Pool info:",Q),!Q?.token0){console.log("No liquidity pool exists for this pair"),c(""),N("No liquidity pool exists");return}const G=Ie(d,s.decimals),q=[s.address,r.address],Z=await t.getAmountOut(G,q),ie=de(Z,r.decimals);c(ie),N(`${s.symbol} → ${r.symbol}`)}catch(Q){console.error("Error in getQuote:",Q),c(""),N("Error: "+(Q.reason||"Failed to get quote"))}}W()},[t,s,r,d]);const H=async()=>{if(!(!a||!s||!r))try{const W=new he(window.ethereum);if(s.symbol==="ETH"){const Q=await W.getBalance(a);y(ze(Q))}else{const G=await new J(s.address,nr,W).balanceOf(a);y(de(G,s.decimals))}if(r.symbol==="ETH"){const Q=await W.getBalance(a);j(ze(Q))}else{const G=await new J(r.address,nr,W).balanceOf(a);j(de(G,r.decimals))}}catch(W){console.error("Error updating balances:",W)}};i.useEffect(()=>{H()},[a,s,r,h]);const X=async()=>{if(!a){M.error("Please connect your wallet");return}if(!s||!r||!d){M.error("Please fill in all fields");return}x(!0);try{const Q=await new he(window.ethereum).getSigner(),G=Ie(d,s.decimals),q=Ie(m,r.decimals),Z=BigInt(Math.floor((100-T)*100)),ie=q*Z/10000n,ne=[s.address,r.address],K=BigInt(Math.floor(Date.now()/1e3)+60*20),xe=new J(je.router,["function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)"],Q);console.log("Swap parameters:",{amountIn:G.toString(),amountOutMin:ie.toString(),path:ne,to:a,deadline:K.toString()});let pe;if(s.symbol==="ETH")pe=await xe.swapExactETHForTokens(ie,ne,a,K,{value:G,gasLimit:3e5});else if(r.symbol==="ETH")pe=await xe.swapExactTokensForETH(G,ie,ne,a,K,{gasLimit:3e5});else{if(s.symbol!=="ETH"){const we=new J(s.address,["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)"],Q);await we.allowance(a,je.router)<G&&(console.log("Approving tokens..."),await(await we.approve(je.router,G)).wait(),console.log("Tokens approved"))}pe=await xe.swapExactTokensForTokens(G,ie,ne,a,K,{gasLimit:3e5})}console.log("Swap transaction sent:",pe.hash);const ke=await pe.wait();console.log("Swap receipt:",ke),await H(),M.success("Swap successful!"),o(""),c(""),I(we=>we+1)}catch(W){console.error("Swap error:",W),W.message.includes("insufficient")?M.error("Insufficient balance for swap"):W.message.includes("INSUFFICIENT_OUTPUT_AMOUNT")?M.error("Price impact too high, try a smaller amount"):W.message.includes("EXCESSIVE_INPUT_AMOUNT")?M.error("Insufficient liquidity for this trade"):W.message.includes("user rejected")?M.error("Transaction rejected"):M.error(W.reason||"Failed to swap tokens")}finally{x(!1)}},z=async W=>{if(W.symbol==="ETH")n({...W,address:je.WETH,decimals:18});else{const Q=await t.getTokenInfo(W.address);n({...W,...Q,name:W.name||Q.name,symbol:W.symbol||Q.symbol,logo:W.logo||Q.logo,logoIpfs:W.logoIpfs||Q.logoIpfs})}C(!1)},se=async W=>{if(W.symbol==="ETH")l({...W,address:je.WETH,decimals:18});else{const Q=await t.getTokenInfo(W.address);l({...W,...Q,name:W.name||Q.name,symbol:W.symbol||Q.symbol,logo:W.logo||Q.logo,logoIpfs:W.logoIpfs||Q.logoIpfs})}w(!1)};i.useEffect(()=>{async function W(){if(!(!s||!r))try{const Q=s.address.toLowerCase(),G=r.address.toLowerCase(),q=await Wt.get(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=${Q},${G}&vs_currencies=usd`);let Z=q.data[Q]?.usd,ie=q.data[G]?.usd;if(s.address.toLowerCase()===je.WETH.toLowerCase()&&(Z=(await Wt.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd")).data.ethereum.usd),r.address.toLowerCase()===je.WETH.toLowerCase()&&(ie=(await Wt.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd")).data.ethereum.usd),!Z||!ie){console.log("Could not fetch prices for tokens");return}const ne=Z/ie;console.log("Price ratio:",ne),setPoolCreationState(K=>({...K,priceRatio:ne}))}catch(Q){console.error("Error fetching prices:",Q),setPoolCreationState(G=>({...G,error:"Failed to fetch token prices"}))}}f==="No liquidity pool exists"&&W()},[s,r,f]),i.useEffect(()=>{h>0&&H()},[h]);const ee=({token:W})=>{const{address:Q}=Oe(),[G,q]=Ct.useState(null),[Z,ie]=Ct.useState(!0),[ne,K]=Ct.useState(null);if(Ct.useEffect(()=>{(async()=>{if(!(!Q||!W))try{ie(!0),K(null);const ke=new he(window.ethereum);let we,Me;if(W.symbol==="ETH")we=await ke.getBalance(Q),Me=18;else{const re=new J(W.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],ke);[we,Me]=await Promise.all([re.balanceOf(Q),re.decimals()])}console.log(`Balance for ${W.symbol}:`,{raw:we.toString(),decimals:Me,formatted:de(we,Me)}),q({value:we,decimals:Me})}catch(ke){console.error("Error fetching balance:",ke),K(ke.message)}finally{ie(!1)}})()},[W,Q]),ne)return e.jsxs("div",{className:"text-sm text-red-500 mt-1",children:["Error: ",ne]});if(Z)return e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Loading balance..."});const xe=pe=>{if(!pe?.value)return"0";const ke=Number(de(pe.value,pe.decimals));return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:W.symbol==="USDC"?2:6,useGrouping:!0}).format(ke)};return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",xe(G)," ",W.symbol]})},te=W=>{W==="custom"?A(!0):(b(parseFloat(W)),A(!1),L(""))},Y=W=>{const Q=W.target.value;(Q===""||/^\d*\.?\d*$/.test(Q)&&parseFloat(Q)<=100)&&(L(Q),Q!==""&&b(parseFloat(Q)))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"From"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:d,onChange:W=>{const Q=W.target.value;(Q===""||/^\d*\.?\d*$/.test(Q))&&o(Q)},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>C(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:s.logo,alt:s.symbol,className:"w-5 h-5"}),e.jsx("span",{children:s.symbol})]}):"Select Token"})]}),s&&e.jsx(ee,{token:s})]}),e.jsx("div",{className:"flex justify-center my-4",children:e.jsx("button",{onClick:()=>{const W=s,Q=d;n(r),o(m),l(W),c(Q)},className:"p-2.5 rounded-xl bg-[#00ffbd]/10 text-[#00ffbd] hover:bg-[#00ffbd]/20 transition-colors border border-[#00ffbd]/20",children:e.jsx(Fa,{size:16})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"To"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:m,readOnly:!0,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>w(!0),className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r.logo,alt:r.symbol,className:"w-5 h-5"}),e.jsx("span",{children:r.symbol})]}):"Select Token"})]}),r&&e.jsx(ee,{token:r})]}),e.jsxs("div",{className:"mt-4 p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"space-y-2 text-sm mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Fee (0.3%)"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"A portion of each trade (0.3%) goes to liquidity providers as a protocol incentive.",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:d?`${(Number(d)*.003).toFixed(6)} ${s?.symbol}`:"--"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Network cost"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"Estimated cost of the transaction on Ethereum",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:P||"~0.003 ETH"})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-2"}),e.jsxs("button",{onClick:()=>F(!O),className:"flex items-center justify-between w-full text-sm text-gray-500 hover:text-gray-400",children:[O?"Hide Details":"Show Details",e.jsx("svg",{className:`w-4 h-4 transition-transform ${O?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),O&&e.jsxs("div",{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Expected Output"}),e.jsxs("span",{className:"text-gray-200",children:[m," ",r?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Minimum received after slippage (",T,"%)"]}),e.jsxs("span",{className:"text-gray-200",children:[m&&Number(m*(1-T/100)).toFixed(6)," ",r?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Route"}),e.jsx("span",{className:"text-gray-200",children:f||"--"})]}),k&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Rate"}),e.jsxs("span",{className:"text-gray-200",children:["1 ",s?.symbol," = ",k.toFixed(6)," ",r?.symbol]})]})]})]})]}),e.jsx("div",{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-4 border border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Slippage Tolerance"}),e.jsxs("div",{className:"flex space-x-2",children:[[.5,1,2].map(W=>e.jsxs("button",{onClick:()=>te(W.toString()),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                      ${T===W&&!S?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:[W,"%"]},W)),e.jsx("button",{onClick:()=>te("custom"),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                    ${S?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:"Custom"})]})]}),S&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("input",{type:"text",value:$,onChange:Y,placeholder:"Enter slippage %",className:"w-full px-3 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 pr-2",children:"%"})]})]})}),e.jsx("button",{onClick:X,disabled:u||!s||!r||!d||!m,className:`
            w-full px-4 py-4 rounded-xl font-medium text-black text-lg
            ${u||!s||!r||!d||!m?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
          `,children:u?"Swapping...":"Swap"})]}),e.jsx(rr,{isOpen:v,onClose:()=>C(!1),onSelect:z,selectedTokenAddress:s?.address}),e.jsx(rr,{isOpen:E,onClose:()=>w(!1),onSelect:se,selectedTokenAddress:r?.address})]})}const ve={10143:{router:"0xfb8e1c3b833f9e67a71c859a132cf783b645e436",factory:"0x733e88f248b742db6c14c0b1713af5ad7fdd59d0",WETH:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",USDT:"0x88b8E2161DEDC77EF4ab7585569D2415a1C1055D"},1301:{router:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",factory:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",WETH:"0x4200000000000000000000000000000000000006",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"},130:{router:"0x284F11109359a7e1306C3e447ef14D38400063FF",factory:"0x1F98400000000000000000000000000000000002",WETH:"0x4200000000000000000000000000000000000006",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"}},Ns=["function approve(address spender, uint value) external returns (bool)","function allowance(address owner, address spender) external view returns (uint)","function balanceOf(address owner) external view returns (uint)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)"],au=["function factory() external pure returns (address)","function WETH() external pure returns (address)","function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)","function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function removeLiquidityETH(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountToken, uint amountETH)","function removeLiquidityWithPermit(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline, bool approveMax, uint8 v, bytes32 r, bytes32 s) external returns (uint amountA, uint amountB)","function removeLiquidityETHWithPermit(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline, bool approveMax, uint8 v, bytes32 r, bytes32 s) external returns (uint amountToken, uint amountETH)","function removeLiquidityETHSupportingFeeOnTransferTokens(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountETH)","function removeLiquidityETHWithPermitSupportingFeeOnTransferTokens(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline, bool approveMax, uint8 v, bytes32 r, bytes32 s) external returns (uint amountETH)","function swapExactTokensForTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapTokensForExactTokens(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactETHForTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapTokensForExactETH(uint amountOut, uint amountInMax, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapExactTokensForETH(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external returns (uint[] memory amounts)","function swapETHForExactTokens(uint amountOut, address[] calldata path, address to, uint deadline) external payable returns (uint[] memory amounts)","function swapExactTokensForTokensSupportingFeeOnTransferTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external","function swapExactETHForTokensSupportingFeeOnTransferTokens(uint amountOutMin, address[] calldata path, address to, uint deadline) external payable","function swapExactTokensForETHSupportingFeeOnTransferTokens(uint amountIn, uint amountOutMin, address[] calldata path, address to, uint deadline) external","function quote(uint amountA, uint reserveA, uint reserveB) external pure returns (uint amountB)","function getAmountOut(uint amountIn, uint reserveIn, uint reserveOut) external pure returns (uint amountOut)","function getAmountIn(uint amountOut, uint reserveIn, uint reserveOut) external pure returns (uint amountIn)","function getAmountsOut(uint amountIn, address[] calldata path) external view returns (uint[] memory amounts)","function getAmountsIn(uint amountOut, address[] calldata path) external view returns (uint[] memory amounts)"],ks=["function getPair(address tokenA, address tokenB) external view returns (address)","function createPair(address tokenA, address tokenB) external returns (address)","function allPairs(uint) external view returns (address)","function allPairsLength() external view returns (uint)","function feeTo() external view returns (address)","function feeToSetter() external view returns (address)"],wa=["function token0() external view returns (address)","function token1() external view returns (address)","function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)"],Er=["function deposit() external payable","function withdraw(uint) external","function balanceOf(address) external view returns (uint)","function approve(address spender, uint value) external returns (bool)"],oi={"ETH/USD":"0x13e3ee699d1909e989722e753853ae30b17e08c5","USDT/USD":"0xECef79E109e997bCA29c1c0897ec9d7b03647F5E"},ru=["function latestRoundData() external view returns (uint80 roundId, int256 answer, uint256 startedAt, uint256 updatedAt, uint80 answeredInRound)","function decimals() external view returns (uint8)"];class nu{constructor(){this.provider=null,this.signer=null,this.router=null,this.chainId=null,this.poolCache=new Map,this.poolInfoCache=new Map,this.lastCacheUpdate=0,this.CACHE_DURATION=15*60*1e3,this.loadCacheFromStorage()}loadCacheFromStorage(){try{const t=localStorage.getItem("unichainPoolCache");if(t){const{pools:s,poolInfo:n,timestamp:r}=JSON.parse(t);Date.now()-r<60*60*1e3&&(this.poolCache=new Map(s),this.poolInfoCache=new Map(n),this.lastCacheUpdate=r)}}catch{}}saveCacheToStorage(){try{const t={pools:Array.from(this.poolCache.entries()),poolInfo:Array.from(this.poolInfoCache.entries()),timestamp:Date.now()};localStorage.setItem("unichainPoolCache",JSON.stringify(t))}catch{}}clearCache(){this.poolCache.clear(),this.poolInfoCache.clear(),this.lastCacheUpdate=0,localStorage.removeItem("unichainPoolCache")}isCacheValid(){return Date.now()-this.lastCacheUpdate<this.CACHE_DURATION}async init(){if(!window.ethereum)throw new Error("No Web3 Provider found");this.provider=new he(window.ethereum),this.signer=await this.provider.getSigner();const t=await this.provider.getNetwork();this.chainId=Number(t.chainId);const s=ve[this.chainId];if(!s)throw new Error("Unsupported network");this.router=new J(s.router,au,this.signer)}async approveToken(t,s){try{const n=new J(t,Ns,this.signer),r=await this.signer.getAddress(),l=await this.signer.provider.getNetwork().then(m=>m.chainId),d=ve[l];if(!d)throw new Error("Network not supported");await n.allowance(r,d.router)<s&&await(await n.approve(d.router,Mt)).wait()}catch(n){throw n}}async getTokenInfo(t){try{if(t==="ETH")return{symbol:"ETH",name:"Ethereum",decimals:18};const s=new he(window.ethereum),n=new J(t,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"],s),[r,l,d]=await Promise.all([n.symbol().catch(()=>"Unknown"),n.name().catch(()=>"Unknown Token"),n.decimals().catch(()=>18)]);return{symbol:r,name:l,decimals:d,address:t}}catch(s){return console.error("Error in getTokenInfo:",s),{symbol:"Unknown",name:"Unknown Token",decimals:18,address:t}}}calculateInitialPoolPrice(t,s,n,r){try{const l=Number(de(t,n)),d=Number(de(s,r)),o=d/l,m=l/d;return{token0Price:o.toFixed(6),token1Price:m.toFixed(6)}}catch(l){return console.error("Error calculating initial pool price:",l),{token0Price:"0",token1Price:"0"}}}async createPool(t,s,n,r){try{this.router||await this.init();const l=await this.signer.getAddress(),d=await this.signer.provider.getNetwork().then(E=>E.chainId),o=ve[d];if(!o)throw new Error("Network not supported");const m=Math.floor(Date.now()/1e3)+60*20,c=t.toLowerCase()===o.WETH.toLowerCase(),u=s.toLowerCase()===o.WETH.toLowerCase(),x=c||u,f=await this.router.factory(),N=new J(f,ks,this.signer),v=await N.getPair(t,s),C=v==="0x0000000000000000000000000000000000000000";if(x){const E=c?s:t,w=c?n:r,p=c?r:n;C&&await(await N.createPair(o.WETH,E)).wait(),await this.approveToken(E,p);const y=p*990n/1000n,g=w*990n/1000n;return{receipt:await(await this.router.addLiquidityETH(E,p,y,g,l,m,{value:w,gasLimit:bt(1e6)})).wait(),priceInfo:{token0Price:(Number(w)/Number(p)).toFixed(6),token1Price:(Number(p)/Number(w)).toFixed(6)}}}else{let E=BigInt(n),w=BigInt(r);if(C)await(await N.createPair(t,s)).wait();else{const A=new J(v,wa,this.provider),[h,I]=await A.getReserves(),O=await A.token0();if(t.toLowerCase()!==O.toLowerCase()&&([E,w]=[w,E],[t,s]=[s,t]),h>0n&&I>0n)try{w=await this.router.quote(E,h,I)}catch{throw new Error("Failed to calculate optimal amounts for the pool ratio")}}const[p,y]=await Promise.all([new J(t,Ns,this.provider),new J(s,Ns,this.provider)]),[g,j]=await Promise.all([p.decimals(),y.decimals()]),T=this.calculateInitialPoolPrice(E,w,g,j);await Promise.all([this.approveToken(t,E),this.approveToken(s,w)]);const b=E*990n/1000n,$=w*990n/1000n;return{receipt:await(await this.router.addLiquidity(t,s,E,w,b,$,l,m,{gasLimit:bt(1e6)})).wait(),priceInfo:T}}}catch(l){throw l}}async addLiquidityETH(t,s,n,r){try{this.router||await this.init();const l=await this.signer.provider.getNetwork().then(f=>f.chainId),d=ve[l];if(!d)throw new Error("Network not supported");const o=BigInt(Math.floor(Date.now()/1e3)+60*20);await this.approveToken(t,s);const m=s*990n/1000n,c=n*990n/1000n,u=t.toLowerCase()===d.WETH.toLowerCase()?d.WETH:t;return await this.router.addLiquidityETH(u,s,m,c,r,o,{value:n,gasLimit:bt(1e6)})}catch(l){throw l}}async addLiquidity(t,s,n,r,l){try{this.router||await this.init();const d=BigInt(Math.floor(Date.now()/1e3)+60*20);await Promise.all([this.approveToken(t,n),this.approveToken(s,r)]);const o=n*990n/1000n,m=r*990n/1000n,c=l||await this.signer.getAddress();return await this.router.addLiquidity(t,s,n,r,o,m,c,d,{gasLimit:bt(1e6)})}catch(d){throw d}}async checkPoolExists(t,s){try{if(this.router||await this.init(),await this.provider.getNetwork().then(o=>Number(o.chainId))===10143){const o=ve[10143].factory,m=Ms.defaultAbiCoder().encode(["address","address"],[t,s]).slice(2);return await window.ethereum.request({method:"eth_call",params:[{to:o,data:"0xe6a43905"+m},"latest"]})!=="0x0000000000000000000000000000000000000000000000000000000000000000"}const r=await this.router.factory();return await new J(r,ks,this.provider).getPair(t,s)!=="0x0000000000000000000000000000000000000000"}catch(n){return console.error("Error checking pool exists:",n),!1}}roundAmount(t,s=18){try{const n=de(t,s),r=Number(n).toFixed(4);return Ie(r,s)}catch(n){return console.error("Error rounding amount:",n),t}}async swap(t,s,n,r,l,d){try{this.router||await this.init();const o=await this.signer.getAddress(),m=t.symbol==="ETH"||t.symbol==="MON",c=s.symbol==="ETH"||s.symbol==="MON";m||await this.approveToken(t.address,n);const u=0n;let x;return m?x=await this.router.swapExactETHForTokens(u,l,o,d,{value:n,gasLimit:bt(1e6)}):c?x=await this.router.swapExactTokensForETH(n,u,l,o,d,{gasLimit:bt(1e6)}):x=await this.router.swapExactTokensForTokens(n,u,l,o,d,{gasLimit:bt(1e6)}),x}catch(o){throw o.data?new Error("Transaction failed: "+o.data):o}}async getAmountOut(t,s){try{if(this.router||await this.init(),!t||!s||s.length<2)return"0";const n=await this.router.getAmountsOut(t,s);return n[n.length-1]}catch(n){throw n}}async updateRoute(t,s,n){try{if(this.router||await this.init(),!t||!s||!n)return{route:null,toAmount:"0"};const r=await this.provider.getNetwork().then(w=>w.chainId),l=ve[r];if(!l)throw new Error("Network not supported");const d=t.symbol==="MON"||t.symbol==="ETH"?l.WETH:t.address,o=s.symbol==="MON"||s.symbol==="ETH"?l.WETH:s.address,m=Ie(n,t.symbol==="MON"||t.symbol==="ETH"?18:t.decimals),c=`${d}_${o}_${n}`;if(this.routeCache&&this.routeCache[c]&&Date.now()-this.routeCache[c].timestamp<3e4)return this.routeCache[c].route;const u=[l.WETH,l.USDC,l.USDT].filter(w=>w&&w!==d&&w!==o),x=[];d!==o&&x.push(this.tryRoute([d,o],m).then(w=>({...w,path:[d,o]})).catch(()=>null));for(const w of u)x.push(this.tryRoute([d,w,o],m).then(p=>({...p,path:[d,w,o]})).catch(()=>null));if(r!==10143)for(let w=0;w<u.length;w++)for(let p=w+1;p<u.length;p++){const y=[d,u[w],u[p],o];x.push(this.tryRoute(y,m).then(g=>({...g,path:y})).catch(()=>null))}const f=(await Promise.all(x)).filter(Boolean);let N=null,v=Ie("0",s.decimals);for(const w of f)w.amountOut>v&&(v=w.amountOut,N=w);if(!N)return{route:null,toAmount:"0",error:"No valid route found"};const E={route:N.path.map(w=>w===l.WETH?t.symbol==="MON"||s.symbol==="MON"?"WMONAD":(t.symbol==="ETH"||s.symbol==="ETH","WETH"):w===d?t.symbol:w===o?s.symbol:w===l.USDC?"USDC":w===l.USDT?"USDT":"Unknown").join(" → "),toAmount:de(N.amountOut,s.decimals),path:N.path};return this.routeCache||(this.routeCache={}),this.routeCache[c]={route:E,timestamp:Date.now()},E}catch(r){throw console.error("Error in updateRoute:",r),r}}async tryRoute(t,s){if(t.length<2)return null;if(await this.provider.getNetwork().then(n=>n.chainId)===10143)try{const n=Ms.defaultAbiCoder().encode(["uint256","address[]"],[s,t]).slice(2),r=await window.ethereum.request({method:"eth_call",params:[{to:ve[10143].router,data:"0xd06ca61f"+n},"latest"]}),l=Ms.defaultAbiCoder().decode(["uint256[]"],r)[0];return{amountOut:l[l.length-1]}}catch{throw new Error("Failed to get amounts for route")}try{const n=await this.router.getAmountsOut(s,t);return{amountOut:n[n.length-1]}}catch{throw new Error("Failed to get amounts for route")}}async getTokenBalance(t,s){try{if(this.provider||await this.init(),t==="ETH"){const d=await this.provider.getBalance(s);return ze(d)}const n=new J(t,Ns,this.provider),[r,l]=await Promise.all([n.balanceOf(s),n.decimals()]);return de(r,l)}catch(n){throw n}}async wrapETH(t){try{this.signer||await this.init();const s=await this.provider.getNetwork().then(d=>d.chainId),n=ve[s];if(!n)throw new Error("Network not supported");return await new J(n.WETH,Er,this.signer).deposit({value:t,gasLimit:bt(1e5)})}catch(s){throw s}}async unwrapWETH(t){try{this.signer||await this.init();const s=await this.provider.getNetwork().then(d=>d.chainId),n=ve[s];if(!n)throw new Error("Network not supported");return await new J(n.WETH,Er,this.signer).withdraw(t)}catch(s){throw s}}async getWETHBalance(t){try{this.provider||await this.init();const s=await this.provider.getNetwork().then(d=>d.chainId),n=ve[s];if(!n)throw new Error("Network not supported");return await new J(n.WETH,Er,this.provider).balanceOf(t)}catch(s){throw s}}async getUserPools(t){try{this.provider||await this.init();const s=new J(addresses.factory,ks,this.provider),n=await s.allPairsLength(),r=await Promise.all(Array.from({length:Number(n)},(o,m)=>s.allPairs(m)));return(await Promise.all(r.map(async o=>{try{const m=new J(o,["function balanceOf(address) view returns (uint256)","function token0() view returns (address)","function token1() view returns (address)"],this.provider),c=await m.balanceOf(t);if(c>0){const[u,x]=await Promise.all([m.token0(),m.token1()]);return{pairAddress:o,token0:u,token1:x,balance:c}}return null}catch{return null}}))).filter(o=>o!==null).map(o=>o.pairAddress)}catch(s){throw s}}async getPoolInfo(t,s){try{const n=`${t}-${s}`;if(this.isCacheValid()&&this.poolInfoCache.has(n))return this.poolInfoCache.get(n);this.provider||await this.init();const r=await this.router.factory(),d=await new J(r,ks,this.provider).getPair(t,s);if(d==="0x0000000000000000000000000000000000000000")return null;const o=new J(d,wa,this.provider),[m,c,u]=await Promise.all([o.token0(),o.token1(),o.getReserves()]),[x,f]=await Promise.all([t==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(m),s==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(c)]),N={token0:{address:t,...x},token1:{address:s,...f},reserves:{reserve0:u[0],reserve1:u[1],blockTimestampLast:u[2]},pairAddress:d};return this.poolInfoCache.set(n,N),this.saveCacheToStorage(),N}catch(n){throw n}}async getPoolInfoByAddress(t){try{this.provider||await this.init();const s=new J(t,["function token0() view returns (address)","function token1() view returns (address)","function getReserves() view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)","function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],this.provider),[n,r,l]=await Promise.all([s.token0(),s.token1(),s.getReserves()]),[d,o]=await Promise.all([this.getTokenInfo(n),this.getTokenInfo(r)]);return{token0:{...d,address:n},token1:{...o,address:r},reserves:{reserve0:l[0],reserve1:l[1],blockTimestampLast:l[2]},pairAddress:t}}catch(s){throw s}}async getPriceFromChainlink(t){try{let s;if(t==="ETH"||t==="WETH"?s=oi["ETH/USD"]:t==="USDT"&&(s=oi["USDT/USD"]),!s)return null;const n=new J(s,ru,this.provider),[r,l]=await Promise.all([n.latestRoundData().then(d=>d.answer),n.decimals()]);return Number(de(r,l))}catch(s){throw s}}async getPriceFromPool(t,s=addresses.USDT){try{const r=await new J(addresses.factory,ks,this.provider).getPair(t,s);if(r==="0x0000000000000000000000000000000000000000")return null;const l=new J(r,wa,this.provider),[d,o]=await Promise.all([l.getReserves(),l.token0()]),[m,c]=d,u=t.toLowerCase()===o.toLowerCase(),x=new J(t,Ns,this.provider),f=new J(s,Ns,this.provider),[N,v]=await Promise.all([x.decimals(),f.decimals()]);return u?Number(de(c,v))/Number(de(m,N)):Number(de(m,v))/Number(de(c,N))}catch(n){throw n}}async getPools(t){if(!t)throw new Error("tokenAddress is required");try{if(this.isCacheValid()&&this.poolCache.has(t))return this.poolCache.get(t);this.provider||await this.init();const s=await this.provider.getNetwork().then(x=>x.chainId),n=ve[s];if(!n)throw new Error("Network not supported");const r=new J(n.factory,ks,this.provider),l=await r.allPairsLength(),d=await this.signer.getAddress(),o=new Set,m=[],c=40,u=Math.min(Number(l),200);for(let x=0;x<u;x+=c){const f=Math.min(c,u-x),N=Array.from({length:f},(y,g)=>x+g),v=await Promise.all(N.map(y=>r.allPairs(y))),E=v.map(y=>new J(y,[...wa,"function balanceOf(address) view returns (uint256)"],this.provider)).map(async(y,g)=>{try{const j=v[g];if(o.has(j))return null;const[T,b,$,L]=await Promise.all([y.balanceOf(d),y.token0(),y.token1(),y.getReserves()]);if(b.toLowerCase()===t.toLowerCase()||$.toLowerCase()===t.toLowerCase()){const[S,A]=await Promise.all([this.getTokenInfo(b),this.getTokenInfo($)]);return{address:j,token0:{address:b,...S},token1:{address:$,...A},reserves:L,owned:T>0}}return null}catch{return null}}),p=(await Promise.all(E)).filter(y=>y!==null);for(const y of p)o.has(y.address)||(o.add(y.address),m.push(y));if(m.length>=40)break}return m.sort((x,f)=>x.owned===f.owned?0:x.owned?-1:1),this.poolCache.set(t,m),this.lastCacheUpdate=Date.now(),this.saveCacheToStorage(),m}catch(s){throw s}}async getTokenBalance(t,s){try{if(this.provider||await this.init(),t==="ETH"){const d=await this.provider.getBalance(s);return ze(d)}const n=new J(t,Ns,this.provider),[r,l]=await Promise.all([n.balanceOf(s),n.decimals()]);return de(r,l)}catch(n){throw n}}async getPoolInfo(t,s){try{const n=`${t}-${s}`;if(this.isCacheValid()&&this.poolInfoCache.has(n))return this.poolInfoCache.get(n);this.provider||await this.init();const r=await this.router.factory(),d=await new J(r,ks,this.provider).getPair(t,s);if(d==="0x0000000000000000000000000000000000000000")return null;const o=new J(d,wa,this.provider),[m,c,u]=await Promise.all([o.token0(),o.token1(),o.getReserves()]),[x,f]=await Promise.all([t==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(m),s==="ETH"?{symbol:"ETH",name:"Ethereum",decimals:18}:this.getTokenInfo(c)]),N={token0:{address:t,...x},token1:{address:s,...f},reserves:{reserve0:u[0],reserve1:u[1],blockTimestampLast:u[2]},pairAddress:d};return this.poolInfoCache.set(n,N),this.saveCacheToStorage(),N}catch(n){throw n}}async removeLiquidity(t,s,n,r,l,d){try{this.router||await this.init();const o=BigInt(Math.floor(Date.now()/1e3)+60*20),m=t.toLowerCase()===addresses.WETH.toLowerCase(),c=s.toLowerCase()===addresses.WETH.toLowerCase();let u;if(m||c){const x=m?s:t,f=m?l:r,N=m?r:l;u=await this.router.removeLiquidityETH(x,n,f,N,d,o,{gasLimit:bt(1e6)})}else u=await this.router.removeLiquidity(t,s,n,r,l,d,o,{gasLimit:bt(1e6)});return u}catch(o){throw o}}async swapExactTokensForETHSupportingFeeOnTransferTokens(t,s,n,r,l){return this.router||await this.init(),this.router.swapExactTokensForETHSupportingFeeOnTransferTokens(t,s,n,r,l)}async swapExactETHForTokensSupportingFeeOnTransferTokens(t,s,n,r,l){return this.router||await this.init(),this.router.swapExactETHForTokensSupportingFeeOnTransferTokens(t,s,n,r,l)}async swapExactTokensForETH(t,s,n,r,l){return this.router||await this.init(),this.router.swapExactTokensForETH(t,s,n,r,l)}async swapExactETHForTokens(t,s,n,r,l){return this.router||await this.init(),this.router.swapExactETHForTokens(t,s,n,r,l)}async swapExactTokensForTokensSupportingFeeOnTransferTokens(t,s,n,r,l){return this.router||await this.init(),this.router.swapExactTokensForTokensSupportingFeeOnTransferTokens(t,s,n,r,l,{gasLimit:bt(1e6)})}}function Pt(){const a=mr(),{data:t}=bs();return i.useMemo(()=>!a||!t?null:new nu(a,t),[a,t])}const iu=[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:je.WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/logos/eth.png"},{address:je.USDC,symbol:"USDC",name:"USD Coin",decimals:6,logo:"/logos/usdc.png"},{address:je.USDT,symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}],ou=[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xc60A9A0E7F3cBea1852B945EdB35Be52c2c8954e",symbol:"PYRO",name:"PYRO",decimals:18,logo:"/pyro.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}],xn=a=>{switch(a){case 10143:return ou;case 1301:return[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:"0xfFf9976782d46CC05630D1f6eBAb18b2324d6B14",symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/logos/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/logos/usdc.png"},{address:"0x70262e266E50603AcFc5D58997eF73e5a8775844",symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}];default:return iu.filter(t=>!t.chainId||t.chainId===a)}},aa=async(a,t)=>{if(!a)return{address:"",symbol:"Unknown",name:"Unknown Token",decimals:18,logo:"/token-default.png",verified:!1};const s=typeof a=="string"?a:a.address;if(!s)return{address:"",symbol:"Unknown",name:"Unknown Token",decimals:18,logo:"/token-default.png",verified:!1};const r=xn(t).find(l=>!l.address||!s?!1:l.address.toLowerCase()===s.toLowerCase());if(r)return{...a,...r,verified:!0};try{const l=await at(s);if(l)return{...a,name:l.name,symbol:l.symbol||"ERC20 Token",decimals:l.decimals||18,logo:l.logo,logoIpfs:l.logoIpfs,artworkType:l.artworkType,verified:!0}}catch(l){console.error("Error fetching token from Firebase:",l)}return{...a,name:a.name||"ERC20 Token",symbol:a.symbol||"ERC20",decimals:a.decimals||18,logo:a.logo||"/token-default.png",verified:!1}},Be=(a,t)=>{if(!a)return li("??");const n=xn(t).find(r=>!r.address||!a.address?!1:r.address.toLowerCase()===a.address.toLowerCase());if(n)return n.logo;if(a.logo||a.logoIpfs){const r=a.logo||wt(a.logoIpfs);if(!r.includes("token-default.png"))return r}return li(a.symbol||"??")},li=a=>{const t=document.createElement("canvas");t.width=40,t.height=40;const s=t.getContext("2d");return s.fillStyle="#1a1b1f",s.beginPath(),s.arc(20,20,20,0,Math.PI*2),s.fill(),s.fillStyle="#00ffbd",s.font="bold 16px Arial",s.textAlign="center",s.textBaseline="middle",s.fillText(a.slice(0,2).toUpperCase(),20,20),t.toDataURL("image/png")},lu={10143:[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}],1301:[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:ve[1301].WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:ve[1301].USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],130:[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:ve[130].WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:ve[130].USDT,symbol:"USDT",name:"USDT",decimals:6,logo:"/usdt.png"}]},du=`
  .token-list-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .token-list-scrollbar::-webkit-scrollbar-track {
    background: #2d2f36;
    border-radius: 3px;
  }
  .token-list-scrollbar::-webkit-scrollbar-thumb {
    background: #00ffbd;
    border-radius: 3px;
  }
  .token-list-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: #00ffbd #2d2f36;
  }
`,di=new Map,cu=3e4,mu={1301:"https://unichain-sepolia.blockscout.com/api/v2/addresses",130:"https://unichain.blockscout.com/api/v2/addresses"};function ir({isOpen:a,onClose:t,onSelect:s,selectedTokenAddress:n}){const{address:r}=Oe(),[l,d]=i.useState("");i.useState(null);const[o,m]=i.useState(!1),[c,u]=i.useState(""),[x,f]=i.useState(0),[N,v]=i.useState({});i.useState([]);const[C,E]=i.useState([]),[w,p]=i.useState(null),y=async()=>{m(!0),u("");try{if(!window.ethereum){console.warn("No ethereum provider found"),u("Please install a Web3 wallet like MetaMask"),m(!1);return}let h=0;for(;!window.ethereum.request&&h<10;)await new Promise(_=>setTimeout(_,500)),h++;if(!window.ethereum.request)throw new Error("Ethereum provider not initialized");const I=await window.ethereum.request({method:"eth_chainId"}).catch(_=>{throw console.error("Error getting chainId:",_),new Error("Could not get network information")}),O=parseInt(I,16);console.log("Current chain ID:",O),p(O);const F=`${r}-${O}`,U=di.get(F);if(U&&Date.now()-U.timestamp<cu){console.log("Using cached balances:",U),v(U.balances),E(U.tokensWithBalance),m(!1);return}let V=xn(O);const P={};if(O===1301||O===130)try{const _=mu[O];console.log("Fetching tokens from Blockscout:",`${_}/${r}/token-balances`);const H=await fetch(`${_}/${r}/token-balances`,{headers:{Accept:"application/json"}});if(console.log("Blockscout response status:",H.status),H.ok){const X=await H.json();console.log("Blockscout tokens data:",X);const z=X.filter(se=>{const ee=se.token?.type==="ERC-20"&&gt(se.token?.address)&&!se.token?.symbol?.includes("LP")&&!se.token?.symbol?.includes("UNI-V2"),te=Q=>{if(!Q)return!1;const G=Q.toLowerCase();return G.includes("temp")||G.includes("tmp")||G.includes("temporary")},Y=!te(se.token?.symbol)&&!te(se.token?.name),W=V.some(Q=>Q.address?.toLowerCase()===se.token?.address?.toLowerCase());return ee&&Y&&!W}).map(se=>({address:se.token.address,symbol:se.token.symbol||"Unknown",name:se.token.name||"Unknown Token",decimals:parseInt(se.token.decimals||"18"),logo:se.token.icon_url||"/token-default.png",balance:se.value||"0"}));console.log("Processed Blockscout tokens:",z),V=[...V,...z]}}catch(_){console.warn("Error fetching Blockscout tokens:",_)}try{console.log("Fetching native token balance...");const _=await window.ethereum.request({method:"eth_getBalance",params:[r,"latest"]});console.log("Raw native balance:",_);const H=BigInt(_),X=O===10143?"MON":"ETH",z=ze(H);console.log("Formatted native balance:",{symbol:X,balance:z}),P[X]={raw:H.toString(),formatted:z}}catch(_){console.error("Error fetching native balance:",_);const H=O===10143?"MON":"ETH";P[H]={raw:"0",formatted:"0"}}console.log("Starting ERC20 token balance fetching for all tokens:",V);const B=V.filter(_=>!_.isNative&&_.address&&_.address!=="ETH").map(async _=>{try{console.log("Fetching balance for token:",_);const z="0x70a08231"+Ms.defaultAbiCoder().encode(["address"],[r]).slice(2);console.log("Making RPC call with data:",{to:_.address,data:z});const se=await window.ethereum.request({method:"eth_call",params:[{to:_.address,data:z},"latest"]});console.log("Raw balance result:",se);const ee=BigInt(se||"0"),te=de(ee,_.decimals||18);return console.log("Token balance fetched:",{token:_.symbol,balance:ee.toString(),formatted:te}),{token:_,balance:ee.toString(),formatted:te}}catch(H){return console.error(`Error fetching balance for token ${_.symbol}:`,H),{token:_,balance:"0",formatted:"0"}}});console.log("Waiting for all token balances...");const k=await Promise.all(B);console.log("All token balances received:",k),k.forEach(({token:_,balance:H,formatted:X})=>{P[_.address]={raw:H,formatted:X}});const D=V.map(_=>{let H;return _.isNative||_.address==="ETH"?H=P[O===10143?"MON":"ETH"]?.formatted||"0":_.symbol==="WETH"&&O===1301?H=P[ve[1301].WETH]?.formatted||"0":H=P[_.address]?.formatted||"0",console.log("Mapping token balance:",{token:_.symbol,isNative:_.isNative,address:_.address,balance:H}),{..._,balance:H}});console.log("Final balances:",{newBalances:P,tokensWithBalances:D}),di.set(F,{timestamp:Date.now(),balances:P,tokensWithBalance:D}),v(P),E(D)}catch(h){console.error("Error in fetchTokensAndBalances:",h),u("Failed to fetch tokens. Please try again.")}finally{m(!1)}};i.useEffect(()=>{const h=async()=>{if(!window.ethereum?.request){console.warn("Ethereum provider not ready");return}try{const O=await window.ethereum.request({method:"eth_chainId"}),F=parseInt(O,16);p(F)}catch(O){console.error("Error getting chain ID:",O)}},I=setInterval(()=>{window.ethereum?.request&&(h(),clearInterval(I))},1e3);return()=>{clearInterval(I)}},[]),i.useEffect(()=>{y()},[a,r,x,l]);const g=i.useMemo(()=>{if(!C)return[];if(gt(l)){const I=C.find(O=>O.address?.toLowerCase()===l.toLowerCase());return I?[I]:[]}const h=l.toLowerCase();return C.filter(I=>I?I.symbol?.toLowerCase().includes(h)||I.name?.toLowerCase().includes(h)||I.address?.toLowerCase().includes(h):!1)},[l,C]);i.useEffect(()=>{(async()=>{if(!(!gt(l)||!window.ethereum))try{const I=new he(window.ethereum);if(await I.getNetwork().then(F=>Number(F.chainId))===10143){const F=new J(l,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)"],I),[U,V,P,B]=await Promise.all([window.ethereum.request({method:"eth_call",params:[{to:l,data:F.interface.encodeFunctionData("symbol")},"latest"]}).then(D=>F.interface.decodeFunctionResult("symbol",D)[0]),window.ethereum.request({method:"eth_call",params:[{to:l,data:F.interface.encodeFunctionData("name")},"latest"]}).then(D=>F.interface.decodeFunctionResult("name",D)[0]),window.ethereum.request({method:"eth_call",params:[{to:l,data:F.interface.encodeFunctionData("decimals")},"latest"]}).then(D=>F.interface.decodeFunctionResult("decimals",D)[0]),window.ethereum.request({method:"eth_call",params:[{to:l,data:F.interface.encodeFunctionData("balanceOf",[r])},"latest"]}).then(D=>F.interface.decodeFunctionResult("balanceOf",D)[0])]),k={address:l,symbol:U,name:V,decimals:P,balance:de(B,P)};E([k]),v({[l]:{raw:B.toString(),formatted:de(B,P)}})}else{const F=new J(l,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)","function balanceOf(address) view returns (uint256)"],I),[U,V,P,B]=await Promise.all([F.symbol().catch(()=>"Unknown"),F.name().catch(()=>"Unknown Token"),F.decimals().catch(()=>18),F.balanceOf(r).catch(()=>"0")]),k={address:l,symbol:U,name:V,decimals:P,balance:de(B,P)};E([k]),v({[l]:{raw:B.toString(),formatted:de(B,P)}})}u("")}catch(I){console.error("Error fetching custom token:",I),u("Could not fetch token information. Please verify the contract address.")}})()},[l,r]);const j=({token:h,onSelect:I,isSelected:O})=>{const F=h.isNative?N.MON?.formatted||"0":N[h.address]?.formatted||"0",U=h.isNative?!N.MON:!N[h.address];return e.jsxs(R.button,{onClick:()=>I(h),className:`w-full flex items-center justify-between p-3 hover:bg-gray-100 dark:hover:bg-[#2d2f36] rounded-xl transition-colors ${O?"bg-[#00ffbd]/10 border-[#00ffbd] border":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[b(h),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:h.symbol||"Unknown"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-300",children:h.name||"Unknown Token"})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-base font-semibold text-gray-900 dark:text-white",children:U?e.jsx(R.div,{className:"w-12 h-4 bg-gray-200 dark:bg-gray-700 rounded",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0}}):F})})]})},T=h=>{const I=h.isNative?N.MON?.formatted||"0":N[h.address]?.formatted||"0";return parseFloat(I)>0},b=h=>{const I=lu[w]?.find(F=>F.address===h.address);if(I?.logo)return e.jsxs("div",{className:"relative w-8 h-8",children:[e.jsx("img",{src:I.logo,alt:I.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:w===10143?"/monad.png":"/unichain-logo.png",alt:"Chain Logo",className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full ring-1 ring-black"})]});const O=h.logo||(h.logoIpfs?wt(h.logoIpfs):null);return O&&!O.includes("token-default.png")?e.jsx("div",{className:"relative w-8 h-8",children:e.jsx("img",{src:O,alt:h.symbol,className:"w-8 h-8 rounded-full",onError:F=>{F.target.onerror=null,F.target.parentElement.innerHTML=`
                <div class="w-8 h-8 rounded-full bg-[#1a1b1f] flex items-center justify-center relative">
                  <span class="text-[#00ffbd] font-bold text-sm">${h.symbol?.slice(0,2).toUpperCase()||"??"}</span>
                  <img 
                    src="${w===10143?"/monad.png":"/unichain-logo.png"}" 
                    alt="Chain Logo" 
                    class="absolute -bottom-1 -right-1 w-4 h-4 rounded-full ring-1 ring-black"
                  />
                </div>
              `}})}):e.jsxs("div",{className:"w-8 h-8 rounded-full bg-[#1a1b1f] flex items-center justify-center relative",children:[e.jsx("span",{className:"text-[#00ffbd] font-bold text-sm",children:h.symbol?.slice(0,2).toUpperCase()||"??"}),e.jsx("img",{src:w===10143?"/monad.png":"/unichain-logo.png",alt:"Chain Logo",className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full ring-1 ring-black"})]})},$=async h=>{try{if(!h){console.error("No token provided to handleTokenSelect"),u("Invalid token selection");return}let I;if(h.isNative&&h.symbol==="MON")I={...h,address:"MON",decimals:18,verified:!0};else if(h.symbol==="ETH"){if(!w||!ve[w]?.WETH){console.error("No WETH address found for current chain"),u("WETH address not configured for this chain");return}I={...h,address:ve[w].WETH}}else if(gt(l))try{const O=new he(window.ethereum),F=new J(l,["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"],O),[U,V,P]=await Promise.all([F.symbol().catch(()=>"Unknown"),F.name().catch(()=>"Unknown Token"),F.decimals().catch(()=>18)]);I={address:l,symbol:U,name:V,decimals:P,verified:!0}}catch(O){console.error("Error fetching custom token info:",O),u("Invalid token address or token not found");return}else{if(!h.address){console.error("Token has no address:",h),u("Invalid token: no address found");return}I={...h,decimals:h.decimals||18,verified:!0}}if(!I.address||I.address!=="MON"&&!gt(I.address)){console.error("Invalid final token address:",I),u("Invalid token address");return}s(I),t()}catch(I){console.error("Error in handleTokenSelect:",I),u("Error selecting token: "+I.message)}},L={hidden:{opacity:0},visible:{opacity:1}},S={hidden:{opacity:0,scale:.95,y:20},visible:{opacity:1,scale:1,y:0,transition:{type:"spring",duration:.5}},exit:{opacity:0,scale:.95,y:20,transition:{duration:.3}}},A={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05}}};return e.jsx(Ze,{children:a&&e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("style",{children:du}),e.jsx(R.div,{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true",variants:L,initial:"hidden",animate:"visible",exit:"hidden"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(R.div,{variants:S,initial:"hidden",animate:"visible",exit:"exit",children:e.jsxs(le.Panel,{className:"mx-auto w-[448px] rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Select Token"}),e.jsxs(R.div,{className:"relative mb-4",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ba,{className:"text-gray-400"})}),e.jsx("input",{type:"text",value:l,onChange:h=>d(h.target.value),placeholder:"Search by name or paste address",className:"w-full pl-10 pr-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500"}),e.jsx(Ze,{children:c&&e.jsx(R.p,{className:"mt-2 text-sm text-red-500",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:c})})]}),e.jsx("div",{className:"token-list-scrollbar overflow-y-auto overflow-x-hidden h-[60vh]",children:e.jsx(Ze,{mode:"wait",children:o?e.jsx(R.div,{className:"space-y-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(R.div,{className:"w-full flex items-center justify-between p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl",animate:{opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-20 rounded bg-gray-200 dark:bg-gray-700"}),e.jsx("div",{className:"h-3 w-24 rounded bg-gray-200 dark:bg-gray-700"})]})]}),e.jsx("div",{className:"h-4 w-16 rounded bg-gray-200 dark:bg-gray-700"})]})}):e.jsx(R.div,{variants:A,initial:"hidden",animate:"visible",className:"min-h-[400px]",children:gt(l)?e.jsx(R.div,{className:"space-y-2",children:g.map(h=>e.jsx(j,{token:h,onSelect:$,isSelected:n===h.address},h.address||h.symbol))}):e.jsxs(e.Fragment,{children:[e.jsxs(R.div,{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Wi,{className:"text-[#00ffbd] w-4 h-4"}),e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Your Tokens"})]}),e.jsx(R.div,{className:"space-y-2",children:g.filter(T).map(h=>e.jsx(j,{token:h,onSelect:$,isSelected:n===h.address},h.address||h.symbol))})]}),e.jsx(R.div,{className:"my-4 border-t border-gray-200 dark:border-gray-700",initial:{scaleX:0},animate:{scaleX:1}}),e.jsxs(R.div,{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Other Tokens"}),e.jsx(R.div,{className:"space-y-2",children:g.filter(h=>!T(h)).map(h=>e.jsx(j,{token:h,onSelect:$,isSelected:n===h.address},h.address||h.symbol))})]})]})})})})]})})})]})})}function zo({isOpen:a,onClose:t,onSelect:s,selectedTokenAddress:n,excludeToken:r}){return e.jsx(ir,{isOpen:a,onClose:t,onSelect:s,selectedTokenAddress:n,excludeToken:r})}const ci={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,y:-20,transition:{duration:.3}}},ns={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0,transition:{duration:.2}}},Ar={hover:{scale:1.02,transition:{duration:.2}},tap:{scale:.98}},Is={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Swapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"origin-center animate-[slideRight_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9h8l-2.5-2.5M6 9l2.5 2.5M6 9",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("path",{className:"origin-center animate-[slideLeft_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M18 15h-8l2.5-2.5M18 15l-2.5 2.5M18 15",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"18",cy:"9",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"6",cy:"15",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite_0.75s]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},ja={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Wrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"1s",fill:"freeze"})}),e.jsx("path",{className:"origin-center animate-[spin_3s_linear_infinite]",strokeLinecap:"round",d:"M12 3v18M5 7l14 8M19 7l-14 8",strokeDasharray:"4 4"}),e.jsx("circle",{cx:"12",cy:"12",r:"1",className:"animate-[pulse_2s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"r",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})})]})}),Unwrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"origin-bottom animate-[openBox_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",children:e.jsx("animate",{attributeName:"d",values:"M12 3l7 4v10l-7 4-7-4V7l7-4z;M12 3l7 0v14l-7 4-7-4V3l7 0z",dur:"1.5s",repeatCount:"indefinite"})}),e.jsxs("g",{className:"animate-[float_2s_ease-in-out_infinite]",children:[e.jsx("circle",{cx:"12",cy:"12",r:"0.5"}),e.jsx("circle",{cx:"14",cy:"10",r:"0.5"}),e.jsx("circle",{cx:"10",cy:"10",r:"0.5"}),e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})]})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})})},uu=({isOpen:a,onClose:t,currentStep:s,tokenIn:n,tokenOut:r,error:l})=>{const d=[{id:"preparing",title:"Preparing",icon:e.jsx(Is.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(Is.Approval,{})},{id:"swapping",title:"Swapping",icon:e.jsx(Is.Swapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Is.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Is.Completed,{})}],o=!!l,m=c=>c?.includes("user rejected")?"Transaction was rejected. Please try again.":c?.includes("insufficient")?"Insufficient balance for swap.":c?.includes("INSUFFICIENT_OUTPUT_AMOUNT")?"Price impact too high, try a smaller amount.":c?.includes("EXCESSIVE_INPUT_AMOUNT")?"Insufficient liquidity for this trade.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[o?"Error Swapping Tokens":"Swapping Tokens",!o&&n&&r&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:[n.symbol," → ",r.symbol]})]}),e.jsx("div",{className:"space-y-4",children:d.map((c,u)=>{const x=s===c.id,f=!o&&d.findIndex(v=>v.id===s)>u,N=o&&s===c.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${x&&!N?"bg-[#00ffbd]/10 text-[#00ffbd]":f?"text-[#00ffbd]":N?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[c.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.title}),x&&!o&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.id==="preparing"&&"Preparing transaction...",c.id==="approval"&&`Approving ${n?.symbol}`,c.id==="swapping"&&`Swapping ${n?.symbol} for ${r?.symbol}`,c.id==="confirming"&&"Waiting for confirmation...",c.id==="completed"&&`Successfully swapped ${n?.symbol} for ${r?.symbol}!`]})]}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},c.id)})}),o&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m(l)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},xu=({isOpen:a,onClose:t,currentStep:s,fromToken:n,toToken:r,error:l})=>{const d=new he(window.ethereum),[o,m]=i.useState(null);i.useEffect(()=>{(async()=>{const C=await d.getNetwork();m(Number(C.chainId))})()},[d]);const c=n?.symbol===(o===10143?"MON":"ETH"),u=[{id:"preparing",title:"Preparing",icon:e.jsx(ja.Preparing,{})},{id:"wrapping",title:c?"Wrapping":"Unwrapping",icon:c?e.jsx(ja.Wrapping,{}):e.jsx(ja.Unwrapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx(ja.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(ja.Completed,{})}],x=!!l,f=v=>v?v.includes("user rejected")?"Transaction was rejected. Please try again.":v.includes("insufficient funds")?"Insufficient balance for the operation.":v:"",N=()=>o===10143?c?"MON to WMONAD":"WMONAD to MON":c?"ETH to WETH":"WETH to ETH";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:x?"Error Processing Transaction":c?`Wrapping ${N()}`:`Unwrapping ${N()}`}),e.jsx("div",{className:"space-y-4",children:u.map(v=>{const C=s===v.id,E=!x&&u.findIndex(p=>p.id===s)>u.findIndex(p=>p.id===v.id),w=x&&s===v.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${C&&!w?"bg-[#00ffbd]/10 text-[#00ffbd]":E?"text-[#00ffbd]":w?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[v.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:v.title}),C&&!x&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[v.id==="preparing"&&"Preparing transaction...",v.id==="wrapping"&&(c?`Converting ${o===10143?"MON to WMONAD":"ETH to WETH"}...`:`Converting ${o===10143?"WMONAD to MON":"WETH to ETH"}...`),v.id==="confirming"&&"Waiting for confirmation...",v.id==="completed"&&(c?`Successfully wrapped ${o===10143?"MON to WMONAD":"ETH to WETH"}!`:`Successfully unwrapped ${o===10143?"WMONAD to MON":"WETH to ETH"}!`)]})]}),E&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},v.id)})}),x&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:f(l)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},gu=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-[99998]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Swap Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(9)].map((o,m)=>{const c=m+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>d(c),onMouseLeave:()=>d(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(l||n)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n===0?"Select a rating":`You rated: ${n} star${n!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{n>0&&(s(n),t())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${n>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},hu=[130,1301,10143],mi=a=>a?hu.includes(a)?null:"Please switch to Unichain network or Monad Testnet":"Please connect your wallet",pu=["function deposit() external payable","function withdraw(uint256 amount) external","function balanceOf(address) view returns (uint256)","function approve(address spender, uint256 amount) external returns (bool)"];function fu(){const{address:a,isConnected:t}=Oe(),s=Pt(),[n,r]=i.useState(null),[l,d]=i.useState(null),[o,m]=i.useState(""),[c,u]=i.useState(""),[x,f]=i.useState(!1),[N,v]=i.useState(null),[C,E]=i.useState(!1),[w,p]=i.useState(null),[y,g]=i.useState(!1);i.useState(null),i.useState(null);const[j,T]=i.useState(null),[b,$]=i.useState(2),[L,S]=i.useState(""),[A,h]=i.useState(!1),[I,O]=i.useState(null),[F,U]=i.useState(!1),[V,P]=i.useState(null),[B,k]=i.useState(!1),[D,_]=i.useState({width:window.innerWidth,height:window.innerHeight}),[H,X]=i.useState(!1),[z,se]=i.useState(null),[ee,te]=i.useState(null),[Y,W]=i.useState(null),[Q,G]=i.useState(!1);i.useEffect(()=>((async()=>{if(window.ethereum)try{const ce=await window.ethereum.request({method:"eth_chainId"}),ye=parseInt(ce,16);if(te(ye),ye!==10143){const ue=mi(ye);W(ue)}else W(null)}catch(ce){console.error("Error validating network:",ce)}})(),window.ethereum&&window.ethereum.on("chainChanged",ce=>{const ye=parseInt(ce,16);if(te(ye),ye!==10143){const ue=mi(ye);W(ue)}else W(null)}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",()=>{})}),[]),i.useEffect(()=>{const re=()=>{_({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]),i.useEffect(()=>{if(B){const re=setTimeout(()=>{k(!1)},5e3);return()=>clearTimeout(re)}},[B]);const q=({token:re})=>{const{address:ce}=Oe(),[ye,ue]=i.useState("0"),[Fe,oe]=i.useState(!1);return i.useEffect(()=>{(async()=>{if(!(!ce||!re))try{if(oe(!0),re.isNative&&re.symbol==="MON"){const Pe=await window.ethereum.request({method:"eth_getBalance",params:[ce,"latest"]}),He=ze(BigInt(Pe));ue(He);return}const Ce=new he(window.ethereum),Re=await new J(re.address,["function balanceOf(address) view returns (uint256)"],Ce).balanceOf(ce);ue(de(Re,re.decimals||18))}catch(Ce){console.error("Error fetching balance:",Ce),ue("0")}finally{oe(!1)}})()},[re,ce]),re?e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",Fe?"Loading...":Number(ye).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:6})," ",re.symbol]}):null};i.useEffect(()=>{(async()=>{if(!n||!l||!o){u(""),v(null),O(null);return}if(pe()){u(o),v(null),O(null);return}G(!0);try{const{route:ce,toAmount:ye,path:ue}=await s.updateRoute(n,l,o);if(!ce||!ye||ye==="0"){u(""),v(null),O("No valid route found");return}v(ce),u(ye),O(null)}catch{u(""),v(null),O("Error finding route")}finally{G(!1)}})()},[n,l,o,s]);const Z=re=>{w==="from"?r(re):d(re),E(!1)},ie=async()=>{if(!a){M.error("Please connect your wallet");return}if(!n||!l||!o){M.error("Please fill in all fields");return}if(I){U(!0),P("preparing"),se("No valid route found for this swap. Please try a different amount or token pair.");return}f(!0),U(!0),P("preparing"),se(null);try{const ce=await new he(window.ethereum).getSigner(),ye=await s.updateRoute(n,l,o);if(!ye||!ye.path)throw new Error("No valid route found");const ue=Ie(o,n.decimals),Fe=Ie(c,l.decimals),oe=BigInt(Math.floor((100-b)*100)),Ne=Fe*oe/10000n;let Ce=n;const _e=n.symbol==="ETH"||n.symbol==="MON",Re=l.symbol==="ETH"||l.symbol==="MON";_e&&ye.path[0]===ve[ee]?.WETH&&await s.getWETHBalance(a)<ue&&(P("wrapping"),await s.wrapETH(ue),Ce={...n,symbol:"WETH",address:ve[ee].WETH,decimals:18});const Pe=BigInt(Math.floor(Date.now()/1e3)+60*20);if(_e){P("swapping");const He=new J(l.address,["function burnFee() view returns (uint256)","function marketingFee() view returns (uint256)","function liquidityFee() view returns (uint256)"],ce);let qe=!1;try{const[Je,ot,Xe]=await Promise.all([He.burnFee().catch(()=>0),He.marketingFee().catch(()=>0),He.liquidityFee().catch(()=>0)]);qe=Je>0||ot>0||Xe>0}catch{qe=!1}qe?await(await s.swapExactETHForTokensSupportingFeeOnTransferTokens(Ne,ye.path,a,Pe,{value:ue})).wait():await(await s.swapExactETHForTokens(Ne,ye.path,a,Pe,{value:ue})).wait()}else{P("approval");const He=ve[ee]?.router;if(!He)throw new Error("Router address not found for current chain");const qe=new J(Ce.address,["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function balanceOf(address) view returns (uint256)","function burnFee() view returns (uint256)","function marketingFee() view returns (uint256)","function liquidityFee() view returns (uint256)"],ce);await qe.allowance(a,He)<ue&&(console.log("Approving tokens..."),await(await qe.approve(He,ue)).wait());let ot=!1,Xe=!1;try{const[Qe,pt,ga]=await Promise.all([qe.burnFee().catch(()=>0),qe.marketingFee().catch(()=>0),qe.liquidityFee().catch(()=>0)]);ot=Qe>0||pt>0||ga>0}catch{ot=!1}const ht=new J(l.address,["function burnFee() view returns (uint256)","function marketingFee() view returns (uint256)","function liquidityFee() view returns (uint256)"],ce);try{const[Qe,pt,ga]=await Promise.all([ht.burnFee().catch(()=>0),ht.marketingFee().catch(()=>0),ht.liquidityFee().catch(()=>0)]);Xe=Qe>0||pt>0||ga>0}catch{Xe=!1}P("swapping"),ot||Xe?Re?await(await s.swapExactTokensForETHSupportingFeeOnTransferTokens(ue,Ne,ye.path,a,Pe)).wait():await(await s.swapExactTokensForTokensSupportingFeeOnTransferTokens(ue,Ne,ye.path,a,Pe)).wait():Re?await(await s.swapExactTokensForETH(ue,Ne,ye.path,a,Pe)).wait():await(await s.swapExactTokensForTokens(ue,Ne,ye.path,a,Pe)).wait()}m(""),P("completed"),setTimeout(()=>{U(!1),P(null),k(!0),setTimeout(()=>{X(!0)},1e3),setTimeout(()=>{m(""),u(""),k(!1)},3e4)},1e3)}catch(re){console.error("Swap error:",re);let ce="Failed to swap tokens";re.code==="CALL_EXCEPTION"?ce="Transaction failed - insufficient gas or contract error":re.code==="UNPREDICTABLE_GAS_LIMIT"?ce="Unable to estimate gas - the transaction may fail":re.reason&&(ce=re.reason),se(ce),P("error")}finally{f(!1)}},ne=re=>{re==="custom"?h(!0):($(parseFloat(re)),h(!1),S(""))},K=re=>{const ce=re.target.value;(ce===""||/^\d*\.?\d*$/.test(ce)&&parseFloat(ce)<=100)&&(S(ce),ce!==""&&$(parseFloat(ce)))},xe=async()=>{if(!a){M.error("Please connect your wallet");return}if(!n||!l||!o){M.error("Please fill in all fields");return}f(!0),U(!0),P("preparing"),se(null);try{const re=new he(window.ethereum),ce=await re.getSigner(),ye=await re.getNetwork().then(Fe=>Number(Fe.chainId)),ue=Ie(o,18);if(ye===10143){const Fe=new J("0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",pu,ce);if(n.symbol==="MON"){P("wrapping");const oe=await Fe.deposit({value:ue});P("confirming"),await oe.wait()}else{P("unwrapping");const oe=await Fe.withdraw(ue);P("confirming"),await oe.wait()}}else if(n.symbol==="ETH"){P("wrapping");const Fe=await s.wrapETH(ue);P("confirming"),await Fe.wait()}else{P("unwrapping");const Fe=await s.unwrapWETH(ue);P("confirming"),await Fe.wait()}P("completed"),setTimeout(()=>{U(!1),P(null),k(!0),setTimeout(()=>{X(!0)},1e3),setTimeout(()=>{m(""),u(""),k(!1)},3e4)},1e3)}catch(re){console.error("Wrap/Unwrap error:",re),se(re.message||"Transaction failed. Please try again."),P("error")}finally{f(!1)}},pe=()=>ee===10143?n?.symbol==="MON"&&l?.symbol==="WMONAD"||n?.symbol==="WMONAD"&&l?.symbol==="MON":n?.symbol==="ETH"&&l?.symbol==="WETH"||n?.symbol==="WETH"&&l?.symbol==="ETH",ke=()=>{if(x)return"Processing...";if(Q)return"Finding best route...";if(!n||!l)return"Select Tokens";if(!o)return"Enter Amount";if(I&&!pe())return"No Route Available";if(ee===10143){if(n?.symbol==="MON"&&l?.symbol==="WMONAD")return"Wrap MON to WMONAD";if(n?.symbol==="WMONAD"&&l?.symbol==="MON")return"Unwrap WMONAD to MON"}return n?.symbol==="ETH"&&l?.symbol==="WETH"?"Wrap ETH to WETH":n?.symbol==="WETH"&&l?.symbol==="ETH"?"Unwrap WETH to ETH":"Swap"},we=document.createElement("style");we.textContent=`
    @keyframes slideRight {
      0% { transform: translateX(-4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(4px); opacity: 0; }
    }
    @keyframes slideLeft {
      0% { transform: translateX(4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(-4px); opacity: 0; }
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }
  `,document.head.appendChild(we);const Me=re=>{console.log("User rated:",re)};return e.jsxs(R.div,{className:"space-y-6 max-w-lg mx-auto",variants:ci,initial:"hidden",animate:"visible",exit:"exit",children:[B&&e.jsx(qt,{width:D.width,height:D.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(R.div,{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",variants:ns,children:Y?e.jsxs(R.div,{className:"text-center py-8",variants:ns,children:[e.jsx(R.div,{className:"mb-4",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:e.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-16 h-16 mx-auto mb-4"})}),e.jsx(R.h2,{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",variants:ns,children:Y}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Trading is available on Unichain networks and Monad Testnet"})]}):e.jsx(Ze,{mode:"wait",children:e.jsxs(R.div,{className:"space-y-4",variants:ci,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs(R.div,{className:"space-y-2",variants:ns,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"From"}),e.jsxs(R.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:o,onChange:re=>{const ce=re.target.value;(ce===""||/^\d*\.?\d*$/.test(ce))&&m(ce)},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(R.button,{onClick:()=>{p("from"),E(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:Ar,whileHover:"hover",whileTap:"tap",children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(n),alt:n.symbol,className:"w-5 h-5"}),e.jsx("span",{children:n.symbol})]}):"Select Token"})]}),n&&e.jsx(q,{token:n})]}),e.jsx(R.div,{className:"flex justify-center my-4",variants:ns,children:e.jsx(R.button,{onClick:()=>{const re=n,ce=o;r(l),m(c),d(re),u(ce)},className:"p-2.5 rounded-xl bg-[#00ffbd]/10 text-[#00ffbd] hover:bg-[#00ffbd]/20 transition-colors border border-[#00ffbd]/20",whileHover:{rotate:180},transition:{type:"spring",stiffness:200,damping:10},children:e.jsx(Fa,{size:16})})}),e.jsxs(R.div,{className:"space-y-2",variants:ns,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"To"}),e.jsxs(R.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:c,readOnly:!0,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(R.button,{onClick:()=>{p("to"),E(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:Ar,whileHover:"hover",whileTap:"tap",children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(l),alt:l.symbol,className:"w-5 h-5"}),e.jsx("span",{children:l.symbol})]}):"Select Token"})]}),l&&e.jsx(q,{token:l})]}),e.jsx(Ze,{children:e.jsxs(R.div,{className:"mt-4 p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",variants:ns,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"space-y-2 text-sm mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Fee (0.3%)"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"A portion of each trade (0.3%) goes to liquidity providers as a protocol incentive.",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:o?`${(Number(o)*.003).toFixed(6)} ${n?.symbol}`:"--"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Network cost"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"Estimated cost of the transaction on Ethereum",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:"Check wallet for gas cost"})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-2"}),e.jsxs("button",{onClick:()=>g(!y),className:"flex items-center justify-between w-full text-sm text-gray-500 hover:text-gray-400",children:[y?"Hide Details":"Show Details",e.jsx("svg",{className:`w-4 h-4 transition-transform ${y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&e.jsxs("div",{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Expected Output"}),e.jsxs("span",{className:"text-gray-200",children:[c," ",l?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Minimum received after slippage (",b,"%)"]}),e.jsxs("span",{className:"text-gray-200",children:[c&&Number(c*(1-b/100)).toFixed(6)," ",l?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Route"}),e.jsx("span",{className:"text-gray-200",children:N||"--"})]}),j&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Rate"}),e.jsxs("span",{className:"text-gray-200",children:["1 ",n?.symbol," = ",j.toFixed(6)," ",l?.symbol]})]})]})]})})]})})}),e.jsx(R.div,{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-4 border border-gray-200 dark:border-gray-800",variants:ns,children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Slippage Tolerance"}),e.jsxs("div",{className:"flex space-x-2",children:[[.5,1,2].map(re=>e.jsxs("button",{onClick:()=>ne(re.toString()),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                    ${b===re&&!A?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:[re,"%"]},re)),e.jsx("button",{onClick:()=>ne("custom"),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                  ${A?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:"Custom"})]})]}),A&&e.jsxs("div",{className:"flex items-center space-x-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-2 border border-gray-200 dark:border-gray-800",children:[e.jsx("input",{type:"text",value:L,onChange:K,placeholder:"Enter slippage %",className:"w-full px-3 py-2 bg-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none"}),e.jsx("span",{className:"text-gray-900 dark:text-gray-100 pr-2",children:"%"})]})]})}),e.jsx(R.button,{onClick:pe()?xe:ie,disabled:x||!n||!l||!o||!c&&!pe(),className:`
          w-full px-4 py-4 rounded-xl font-medium text-lg
          ${x||!n||!l||!o||!c&&!pe()?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black"}
        `,variants:Ar,whileHover:"hover",whileTap:"tap",children:ke()}),e.jsx(zo,{isOpen:C,onClose:()=>E(!1),onSelect:Z,excludeToken:w==="from"?l:n}),pe()?e.jsx(xu,{isOpen:F,onClose:()=>{U(!1),P(null),se(null)},currentStep:V,fromToken:n,toToken:l,error:z}):e.jsx(uu,{isOpen:F,onClose:()=>{U(!1),P(null)},currentStep:V,tokenIn:n,tokenOut:l,error:z}),e.jsx(gu,{isOpen:H,onClose:()=>X(!1),onRate:Me})]})}const Ye={swapRouter:"0xd1AAE39293221B77B0C71fBD6dCb7Ea29Bb5B166",quoter:"0x6Dd37329A1A225a6Fca658265D460423DCafBF89",WETH:"0x4200000000000000000000000000000000000006",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"},yu=["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function balanceOf(address owner) external view returns (uint256)","function decimals() external view returns (uint8)","function symbol() external view returns (string)","function name() external view returns (string)"],bu=["function quoteExactInput(bytes path, uint256 amountIn) external returns (uint256 amountOut, uint160[] sqrtPriceX96AfterList, uint32[] initializedTicksCrossedList, uint256 gasEstimate)","function quoteExactInputSingle(tuple(address tokenIn, address tokenOut, uint256 amountIn, uint24 fee, uint160 sqrtPriceLimitX96) params) external returns (uint256 amountOut, uint160 sqrtPriceX96After, uint32 initializedTicksCrossed, uint256 gasEstimate)"],wu=["function exactInput(tuple(bytes path, address recipient, uint256 amountIn, uint256 amountOutMinimum) params) external payable returns (uint256 amountOut)","function exactInputSingle(tuple(address tokenIn, address tokenOut, uint24 fee, address recipient, uint256 amountIn, uint256 amountOutMinimum, uint160 sqrtPriceLimitX96) params) external payable returns (uint256 amountOut)","function exactOutput(tuple(bytes path, address recipient, uint256 amountOut, uint256 amountInMaximum) params) external payable returns (uint256 amountIn)","function exactOutputSingle(tuple(address tokenIn, address tokenOut, uint24 fee, address recipient, uint256 amountOut, uint256 amountInMaximum, uint160 sqrtPriceLimitX96) params) external payable returns (uint256 amountIn)","function multicall(bytes[] data) external payable returns (bytes[] results)","function wrapETH(uint256 value) external payable","function unwrapWETH9(uint256 amountMinimum, address recipient) external payable","function WETH9() external view returns (address)","function refundETH() external payable","function selfPermit(address token, uint256 value, uint256 deadline, uint8 v, bytes32 r, bytes32 s) external payable","function sweepToken(address token, uint256 amountMinimum, address recipient) external payable"],cs={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Swapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"origin-center animate-[slideRight_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9h8l-2.5-2.5M6 9l2.5 2.5M6 9",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("path",{className:"origin-center animate-[slideLeft_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M18 15h-8l2.5-2.5M18 15l-2.5 2.5M18 15",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"18",cy:"9",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})}),e.jsx("circle",{cx:"6",cy:"15",r:"0.5",className:"animate-[fadeInOut_1.5s_ease-in-out_infinite_0.75s]",children:e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"1.5s",repeatCount:"indefinite"})})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},Ra={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Wrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"1s",fill:"freeze"})}),e.jsx("path",{className:"origin-center animate-[spin_3s_linear_infinite]",strokeLinecap:"round",d:"M12 3v18M5 7l14 8M19 7l-14 8",strokeDasharray:"4 4"}),e.jsx("circle",{cx:"12",cy:"12",r:"1",className:"animate-[pulse_2s_ease-in-out_infinite]",children:e.jsx("animate",{attributeName:"r",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})})]})}),Unwrapping:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"origin-bottom animate-[openBox_1.5s_ease-in-out_infinite]",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7 4v10l-7 4-7-4V7l7-4z",children:e.jsx("animate",{attributeName:"d",values:"M12 3l7 4v10l-7 4-7-4V7l7-4z;M12 3l7 0v14l-7 4-7-4V3l7 0z",dur:"1.5s",repeatCount:"indefinite"})}),e.jsxs("g",{className:"animate-[float_2s_ease-in-out_infinite]",children:[e.jsx("circle",{cx:"12",cy:"12",r:"0.5"}),e.jsx("circle",{cx:"14",cy:"10",r:"0.5"}),e.jsx("circle",{cx:"10",cy:"10",r:"0.5"}),e.jsx("animate",{attributeName:"opacity",values:"0;1;0",dur:"2s",repeatCount:"indefinite"})]})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})})},Ts={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},ui=({token:a})=>{const{address:t}=Oe(),s=Pt(),[n,r]=i.useState("0"),[l,d]=i.useState(!1);return i.useEffect(()=>{(async()=>{if(!(!t||!a||!s))try{d(!0);const m=await s.getTokenBalance(a.symbol==="ETH"?"ETH":a.address,t);r(m)}catch(m){console.error("Error fetching balance:",m),r("0")}finally{d(!1)}})()},[a,t,s]),a?e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",l?"Loading...":n," ",a.symbol]}):null};function Cs(a,t){if(a.length!==t.length+1)throw new Error("path/fee lengths do not match");let s="0x";for(let n=0;n<t.length;n++)s+=a[n].slice(2).padStart(40,"0"),s+=t[n].toString(16).padStart(6,"0");return s+=a[a.length-1].slice(2).padStart(40,"0"),s}const ju=({isOpen:a,onClose:t,currentStep:s,tokenIn:n,tokenOut:r,error:l})=>{const d=[{id:"preparing",title:"Preparing",icon:e.jsx(cs.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(cs.Approval,{})},{id:"swapping",title:"Swapping",icon:e.jsx(cs.Swapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx(cs.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(cs.Completed,{})}],o=!!l,m=c=>c?.includes("user rejected")?"Transaction was rejected. Please try again.":c?.includes("insufficient")?"Insufficient balance for swap.":c?.includes("INSUFFICIENT_OUTPUT_AMOUNT")?"Price impact too high, try a smaller amount.":c?.includes("EXCESSIVE_INPUT_AMOUNT")?"Insufficient liquidity for this trade.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[o?"Error Swapping Tokens":"Swapping Tokens",!o&&n&&r&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:[n.symbol," → ",r.symbol]})]}),e.jsx("div",{className:"space-y-4",children:d.map((c,u)=>{const x=s===c.id,f=!o&&d.findIndex(v=>v.id===s)>u,N=o&&s===c.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${x&&!N?"bg-[#00ffbd]/10 text-[#00ffbd]":f?"text-[#00ffbd]":N?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[c.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.title}),x&&!o&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.id==="preparing"&&"Preparing transaction...",c.id==="approval"&&`Approving ${n?.symbol}`,c.id==="swapping"&&`Swapping ${n?.symbol} for ${r?.symbol}`,c.id==="confirming"&&"Waiting for confirmation...",c.id==="completed"&&`Successfully swapped ${n?.symbol} for ${r?.symbol}!`]})]}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},c.id)})}),o&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(cs.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m(l)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},vu=({isOpen:a,onClose:t,currentStep:s,fromToken:n,toToken:r,error:l})=>{const d=n?.symbol==="ETH",o=[{id:"preparing",title:"Preparing",icon:e.jsx(Ra.Preparing,{})},{id:"wrapping",title:d?"Wrapping ETH":"Unwrapping WETH",icon:d?e.jsx(Ra.Wrapping,{}):e.jsx(Ra.Unwrapping,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Ra.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(cs.Completed,{})}],m=!!l,c=u=>u?.includes("user rejected")?"Transaction was rejected. Please try again.":u?.includes("insufficient")?`Insufficient ${d?"ETH":"WETH"} balance.`:u?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:m?"Error Processing Transaction":d?"Wrapping ETH":"Unwrapping WETH"}),e.jsx("div",{className:"space-y-4",children:o.map((u,x)=>{const f=s===u.id,N=!m&&o.findIndex(C=>C.id===s)>x,v=m&&s===u.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${f&&!v?"bg-[#00ffbd]/10 text-[#00ffbd]":N?"text-[#00ffbd]":v?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[u.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.title}),f&&!m&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[u.id==="preparing"&&"Preparing transaction...",u.id==="wrapping"&&(d?"Converting ETH to WETH...":"Converting WETH to ETH..."),u.id==="confirming"&&"Waiting for confirmation...",u.id==="completed"&&(d?"Successfully wrapped ETH to WETH!":"Successfully unwrapped WETH to ETH!")]})]}),N&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},u.id)})}),m&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(cs.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:c(l)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})};function Nu(){const{address:a}=Oe(),{chain:t}=Ft(),s=i.useRef(null),n=i.useRef(null);i.useEffect(()=>{window.ethereum&&(s.current=new he(window.ethereum),n.current=new J(Ye.quoter,bu,s.current))},[]);const[r,l]=i.useState(null),[d,o]=i.useState(null),[m,c]=i.useState(""),[u,x]=i.useState(""),[f,N]=i.useState(!1),[v,C]=i.useState(!1),[E,w]=i.useState("from"),[p,y]=i.useState(!1),[g,j]=i.useState(!1),[T,b]=i.useState(!1),[$,L]=i.useState(null),[S,A]=i.useState(null),[h,I]=i.useState({width:window.innerWidth,height:window.innerHeight}),[O,F]=i.useState(!1),[U,V]=i.useState(.5),[P,B]=i.useState(!1),[k,D]=i.useState(null),[_,H]=i.useState(null),[X,z]=i.useState(null),[se,ee]=i.useState(!1);i.useEffect(()=>{const re=()=>{I({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]);const te=i.useRef(null);i.useCallback(async(re,ce,ye)=>{if(!n.current)return null;const ue=Cs([re.address,ce.address],[Ts.MEDIUM]);try{const[Fe]=await n.current.quoteExactInput(ue,ye);return{path:[re.address,ce.address],fees:[Ts.MEDIUM],quote:Fe,isDirectRoute:!0}}catch{if(ce.address.toLowerCase()===Ye.USDT.toLowerCase())try{const oe=Cs([re.address,Ye.WETH],[Ts.MEDIUM]),[Ne]=await n.current.quoteExactInput(oe,ye),Ce=Cs([Ye.WETH,Ye.USDT],[Ts.MEDIUM]),[_e]=await n.current.quoteExactInput(Ce,Ne);return{path:[re.address,Ye.WETH,Ye.USDT],fees:[Ts.MEDIUM,Ts.MEDIUM],quote:_e,isDirectRoute:!1}}catch(oe){return console.error("Failed to route through WETH:",oe),null}return null}},[]);const Y=i.useCallback(()=>r?.symbol==="ETH"&&d?.symbol==="WETH"||r?.symbol==="WETH"&&d?.symbol==="ETH",[r?.symbol,d?.symbol]),W=i.useCallback(async()=>{if(!(!r||!d||!m||!t?.id||!n.current))try{ee(!0),z(null),te.current&&te.current.abort(),te.current=new AbortController;const re=Ie(m,r.decimals),ce=r.symbol==="ETH"?Ye.WETH:r.address,ye=d.symbol==="ETH"?Ye.WETH:d.address,ue=[{path:[ce,ye],fees:[3e3]},{path:[ce,ye],fees:[500]},{path:[ce,ye],fees:[1e4]}];ue[0].path.includes(Ye.WETH)||ue.push({path:[ce,Ye.WETH,ye],fees:[3e3,3e3]},{path:[ce,Ye.WETH,ye],fees:[500,500]},{path:[ce,Ye.WETH,ye],fees:[3e3,500]},{path:[ce,Ye.WETH,ye],fees:[500,3e3]});let Fe=0n,oe=null;for(const Pe of ue)try{const He=Cs(Pe.path,Pe.fees),[qe]=await n.current.quoteExactInput.staticCall(He,re);qe>Fe&&(Fe=qe,oe=Pe)}catch{continue}if(Fe===0n||!oe){x(""),D(null),m&&m.length>0&&setTimeout(()=>{se||z("No liquidity found")},500);return}const Ne=de(Fe,d.decimals);x(Ne),z(null);const Ce={path:oe.path.map((Pe,He)=>({symbol:Pe.toLowerCase()===Ye.WETH.toLowerCase()?"WETH":Pe.toLowerCase()===r.address?.toLowerCase()?r.symbol:Pe.toLowerCase()===d.address?.toLowerCase()?d.symbol:"Unknown"})),expectedOutput:Ne,priceImpact:0,fees:oe.fees};d.symbol==="ETH"&&Ce.path.push({symbol:"ETH"}),r.symbol==="ETH"&&Ce.path.unshift({symbol:"ETH"});const Re=await(async()=>{try{const Pe=Ie("1",r.decimals),He=Cs(oe.path,oe.fees),[qe]=await n.current.quoteExactInput.staticCall(He,Pe),Je=re*qe/Pe,ot=(Je-Fe)*10000n/Je;return Number(ot)/100}catch(Pe){return console.error("Error calculating price impact:",Pe),0}})();Ce.priceImpact=Re,D(Ce),H(Re)}catch(re){if(re.name==="AbortError")return;console.error("Error getting quote:",re),m&&m.length>0&&setTimeout(()=>{se||z("Error finding route")},500)}finally{ee(!1)}},[r,d,m,t?.id]);i.useEffect(()=>{r&&d&&m?Y()?(x(m),D(null),z(null),H(null)):W():(x(""),H(null))},[r,d,m,W,Y]);const Q=async(re,ce)=>{if(!re||re.symbol==="ETH"||!s.current)return!0;try{const ye=await s.current.getSigner(),ue=new J(re.address,yu,ye),[Fe]=await Promise.all([ue.allowance(a,Ye.swapRouter)]);if(Fe<ce){const oe=Mt;await(await ue.approve(Ye.swapRouter,oe)).wait()}return!0}catch(ye){return console.error("Error in checkAndSetAllowance:",ye),!1}},G=async()=>{if(!a||!r||!d||!m||!t?.id||!s.current){M.error("Please fill in all fields");return}N(!0),j(!0),L("preparing"),A(null);try{const re=await s.current.getSigner(),ce=Ie(m,r.decimals);if(Y()){const ye=new J(Ye.WETH,["function deposit() external payable","function withdraw(uint256) external","function approve(address spender, uint256 amount) external returns (bool)"],re);L("wrapping");let ue;r.symbol==="ETH"&&d.symbol==="WETH"?ue=await ye.deposit({value:ce}):ue=await ye.withdraw(ce),L("confirming"),await ue.wait(),L("completed"),setTimeout(()=>{j(!1),L(null),setTimeout(()=>{y(!0),setTimeout(()=>{b(!0)},1e3),setTimeout(()=>{c(""),x(""),y(!1)},3e4)},100)},1e3);return}if(!Y()){if(r.symbol!=="ETH"&&(L("approval"),!await Q(r,ce))){A("Failed to approve token"),L("error");return}const ye=Ie(u,d.decimals),ue=BigInt(Math.floor((100-U)*100)),Fe=ye*ue/10000n;L("swapping");const oe=new J(Ye.swapRouter,wu,re),Ne=Math.floor(Date.now()/1e3)+1200;let Ce;if(r.symbol==="ETH"||d.symbol==="ETH"){const _e=r.symbol==="ETH"?Ye.WETH:r.address,Re=d.symbol==="ETH"?Ye.WETH:d.address,Pe=Cs([_e,Re],[Ts.MEDIUM]),qe=await oe.exactInput.estimateGas({path:Pe,recipient:d.symbol==="ETH"?Ye.swapRouter:a,deadline:Ne,amountIn:ce,amountOutMinimum:Fe},{value:r.symbol==="ETH"?ce:0})*120n/100n;if(d.symbol==="ETH"){const Je=oe.interface.encodeFunctionData("exactInput",[params]),ot=oe.interface.encodeFunctionData("unwrapWETH9",[Fe,a]),Xe=oe.interface.encodeFunctionData("refundETH");Ce=await oe.multicall([Je,ot,Xe],{value:r.symbol==="ETH"?ce:0,gasLimit:qe})}else Ce=await oe.exactInput({path:Pe,recipient:a,deadline:Ne,amountIn:ce,amountOutMinimum:Fe},{value:r.symbol==="ETH"?ce:0,gasLimit:qe})}else{const _e=Cs(k.path.map(He=>He.symbol==="WETH"?Ye.WETH:He.symbol===r.symbol?r.address:d.address),k.fees),Pe=await oe.exactInput.estimateGas({path:_e,recipient:a,deadline:Ne,amountIn:ce,amountOutMinimum:Fe})*120n/100n;Ce=await oe.exactInput({path:_e,recipient:a,deadline:Ne,amountIn:ce,amountOutMinimum:Fe},{gasLimit:Pe})}L("confirming"),await Ce.wait(),L("completed"),setTimeout(()=>{j(!1),L(null),setTimeout(()=>{y(!0),setTimeout(()=>{b(!0)},1e3),setTimeout(()=>{c(""),x(""),y(!1)},3e4)},100)},1e3)}}catch(re){console.error("Swap error:",re);let ce="Failed to swap tokens";re.code==="CALL_EXCEPTION"?ce="Transaction failed - insufficient gas or contract error":re.code==="UNPREDICTABLE_GAS_LIMIT"?ce="Unable to estimate gas - the transaction may fail":re.reason&&(ce=re.reason),A(ce),L("error")}finally{N(!1)}},q=re=>{re==="custom"?B(!0):(B(!1),V(parseFloat(re)))},Z=()=>a?f?"Processing...":!r||!d?"Select Tokens":m?se&&!Y()?"Finding best route...":X&&!Y()&&!se?"No Route Available":r.symbol==="ETH"&&d?.symbol==="WETH"?"Wrap ETH":r.symbol==="WETH"&&d?.symbol==="ETH"?"Unwrap WETH":"Swap":"Enter Amount":"Connect Wallet",ie=document.createElement("style");ie.textContent=`
    @keyframes slideRight {
      0% { transform: translateX(-4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(4px); opacity: 0; }
    }
    @keyframes slideLeft {
      0% { transform: translateX(4px); opacity: 0; }
      20% { transform: translateX(0); opacity: 1; }
      80% { transform: translateX(0); opacity: 1; }
      100% { transform: translateX(-4px); opacity: 0; }
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }
  `,document.head.appendChild(ie);const ne=re=>{b(!1)},K=re=>{E==="from"?l(re):o(re),C(!1)},xe=async()=>{if(!a||!r||!m){M.error("Please fill in all fields");return}N(!0),j(!0),L("preparing"),A(null);try{console.log("Starting wrap/unwrap operation:",{fromToken:r.symbol,toToken:d?.symbol,amount:m,address:a});const ce=await(s.current||new he(window.ethereum)).getSigner();console.log("Got signer:",await ce.getAddress());const ye=Ie(m,18);console.log("Parsed amount:",ye.toString());const ue=new J(Ye.WETH,["function deposit() external payable","function withdraw(uint256) external","function approve(address spender, uint256 amount) external returns (bool)","function balanceOf(address) external view returns (uint256)"],ce);if(r.symbol==="WETH"){const Ne=await ue.balanceOf(a);if(console.log("Current WETH balance:",Ne.toString()),Ne<ye)throw new Error(`Insufficient WETH balance. Required: ${de(ye,18)}, Available: ${de(Ne,18)}`)}L("wrapping");let Fe;r.symbol==="ETH"&&d?.symbol==="WETH"?(console.log("Wrapping ETH to WETH..."),Fe=await ue.deposit({value:ye})):r.symbol==="WETH"&&d?.symbol==="ETH"&&(console.log("Unwrapping WETH to ETH..."),Fe=await ue.withdraw(ye)),console.log("Transaction sent:",Fe.hash),L("confirming");const oe=await Fe.wait();console.log("Transaction confirmed:",oe),L("completed"),setTimeout(()=>{j(!1),L(null),setTimeout(()=>{y(!0),setTimeout(()=>{b(!0)},1e3),setTimeout(()=>{c(""),x(""),y(!1)},3e4)},100)},1e3)}catch(re){console.error("Wrap/Unwrap error:",re);const ce=re.reason||re.message||"Failed to wrap/unwrap";console.error("Error details:",{code:re.code,message:re.message,reason:re.reason,data:re.data}),A(ce),L("error"),M.error(ce)}finally{N(!1)}},pe={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,y:-20,transition:{duration:.3}}},ke={hidden:{opacity:0,x:-10},visible:{opacity:1,x:0,transition:{duration:.2}}},we={hover:{scale:1.02,transition:{duration:.2}},tap:{scale:.98}},Me={hover:{scale:1.1,rotate:180,transition:{duration:.2}},tap:{scale:.95}};return e.jsxs(R.div,{className:"space-y-6 max-w-lg mx-auto",variants:pe,initial:"hidden",animate:"visible",exit:"exit",children:[p&&e.jsx(qt,{width:h.width,height:h.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(R.div,{className:"bg-white dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",variants:ke,children:e.jsx(Ze,{mode:"wait",children:a?e.jsxs(R.div,{className:"space-y-4",variants:pe,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs(R.div,{className:"space-y-2",variants:ke,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"From"}),e.jsxs(R.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:m,onChange:re=>{const ce=re.target.value;(ce===""||/^\d*\.?\d*$/.test(ce))&&(c(ce),z(null),ee(!0))},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(R.button,{onClick:()=>{w("from"),C(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:we,whileHover:"hover",whileTap:"tap",children:r?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(r),alt:r.symbol,className:"w-5 h-5"}),e.jsx("span",{children:r.symbol})]}):"Select Token"})]}),r&&e.jsx(ui,{token:r})]}),e.jsx("div",{className:"flex justify-center my-4",children:e.jsx(R.button,{onClick:()=>{const re=r,ce=m;l(d),c(u),o(re),x(ce)},className:"p-2.5 rounded-xl bg-[#00ffbd]/10 text-[#00ffbd] hover:bg-[#00ffbd]/20 transition-colors border border-[#00ffbd]/20",variants:Me,whileHover:"hover",whileTap:"tap",children:e.jsx(Fa,{size:16})})}),e.jsxs(R.div,{className:"space-y-2",variants:ke,children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"To"}),e.jsxs(R.div,{className:"relative",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsx("input",{type:"text",value:u,readOnly:!0,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(R.button,{onClick:()=>{w("to"),C(!0)},className:"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] rounded-lg text-sm font-medium text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors border border-gray-200 dark:border-gray-800",variants:we,whileHover:"hover",whileTap:"tap",children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(d),alt:d.symbol,className:"w-5 h-5"}),e.jsx("span",{children:d.symbol})]}):"Select Token"})]}),d&&e.jsx(ui,{token:d})]}),e.jsx(Ze,{children:e.jsxs(R.div,{className:"mt-4 p-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",variants:ke,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsxs("div",{className:"space-y-2 text-sm mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-gray-500",children:["Fee (",k?k.fees.map(re=>(re/1e4).toFixed(2)).join("% + "):"--","%)"]}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"A portion of each trade goes to liquidity providers as a protocol incentive.",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:k&&m?`${(m*(k.fees.reduce((re,ce)=>re+ce,0)/1e6)).toFixed(6)} ${r?.symbol}`:"--"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500",children:"Network cost"}),e.jsx("span",{className:"text-gray-500 cursor-help",title:"Estimated cost of the transaction on Ethereum",children:"ⓘ"})]}),e.jsx("span",{className:"text-gray-200",children:"Check wallet for gas cost"})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-800 my-2"}),e.jsxs("button",{onClick:()=>F(!O),className:"flex items-center justify-between w-full text-sm text-gray-500 hover:text-gray-400",children:[O?"Hide Details":"Show Details",e.jsx(R.svg,{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",animate:{rotate:O?180:0},transition:{duration:.3},children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx(Ze,{children:O&&e.jsxs(R.div,{className:"space-y-3 pt-2 border-t border-gray-200 dark:border-gray-800",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Expected Output"}),e.jsxs("span",{className:"text-gray-200",children:[Y()?m:u," ",d?.symbol]})]}),!Y()&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Minimum received after slippage (",U,"%)"]}),e.jsxs("span",{className:"text-gray-200",children:[u&&Number(u*(1-U/100)).toFixed(6)," ",d?.symbol]})]}),k&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Route"}),e.jsx("span",{className:"text-gray-200",children:k.path.map((re,ce)=>e.jsxs(Ct.Fragment,{children:[ce>0&&" → ",re.symbol]},ce))})]}),_!==null&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Price Impact"}),e.jsxs("span",{className:`${_>15?"text-red-500":_>5?"text-yellow-500":"text-gray-200"}`,children:[_.toFixed(2),"%"]})]})]})]})})]})})]}):e.jsxs(R.div,{className:"text-center py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[e.jsx(R.div,{className:"mb-4",whileHover:{scale:1.1},transition:{type:"spring",stiffness:400,damping:10},children:e.jsx(it,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx(R.h3,{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",variants:ke,children:"Connect Your Wallet"}),e.jsx(R.p,{className:"text-gray-500 dark:text-gray-400 mb-6",variants:ke,children:"Please connect your wallet to start swapping tokens"}),e.jsx(R.button,{onClick:openConnectModal,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",variants:we,whileHover:"hover",whileTap:"tap",children:"Connect Wallet"})]})})}),e.jsx(R.div,{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-4 border border-gray-200 dark:border-gray-800",variants:ke,children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Slippage Tolerance"}),e.jsxs("div",{className:"flex space-x-2",children:[[.5,1,2].map(re=>e.jsxs("button",{onClick:()=>q(re.toString()),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                    ${U===re&&!P?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:[re,"%"]},re)),e.jsx("button",{onClick:()=>q("custom"),className:`px-3 py-1.5 text-sm rounded-xl transition-all
                  ${P?"bg-[#00ffbd] text-black font-medium shadow-lg shadow-[#00ffbd]/20":"bg-white/5 dark:bg-[#2d2f36] text-gray-900 dark:text-gray-100 hover:bg-[#00ffbd]/10"} border border-gray-200 dark:border-gray-800`,children:"Custom"})]})]}),P&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:U,onChange:re=>{const ce=parseFloat(re.target.value);!isNaN(ce)&&ce>=0&&ce<=100&&V(ce)},className:"w-24 px-3 py-1.5 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent placeholder-gray-500 dark:placeholder-gray-400",placeholder:"Custom %"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-400",children:"%"})]})]})}),e.jsx(R.button,{onClick:Y()?xe:G,disabled:f||!r||!d||!m||!u&&!Y(),className:`
          w-full px-4 py-4 rounded-xl font-medium text-lg
          ${f||!r||!d||!m||!u&&!Y()?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black"}
        `,variants:we,whileHover:"hover",whileTap:"tap",children:Z()}),X&&!Y()&&e.jsx("div",{className:"text-sm text-red-500 mt-2 text-center",children:X}),e.jsx(zo,{isOpen:v,onClose:()=>C(!1),onSelect:K,selectedToken:E==="from"?r:d,excludeToken:E==="from"?d:r}),Y()?e.jsx(vu,{isOpen:g,onClose:()=>{j(!1),L(null)},currentStep:$,fromToken:r,toToken:d,error:S}):e.jsx(ju,{isOpen:g,onClose:()=>{j(!1),L(null)},currentStep:$,tokenIn:r,tokenOut:d,error:S}),e.jsx(me,{appear:!0,show:T,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>b(!1),children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center",children:"How was your experience?"}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(re=>e.jsx("button",{onClick:()=>ne(),className:"p-2 hover:bg-[#00ffbd]/10 rounded-full transition-colors",children:e.jsx(Dt,{size:24,className:re<=3?"text-yellow-500":"text-[#00ffbd]"})},re))})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>b(!1),className:"w-full py-2 bg-[#00ffbd] text-black rounded-lg",children:"Close"})})]})})})})]})})]})}function ku(){const{address:a,isConnected:t}=Oe(),{open:s}=useWeb3Modal(),[n,r]=i.useState(null),l=ws(),[d,o]=i.useState(null),[m,c]=i.useState(null),[u,x]=i.useState(""),[f,N]=i.useState(""),[v,C]=i.useState("0.3"),[E,w]=i.useState(!1),[p,y]=i.useState(!1),[g,j]=i.useState(!1),[T,b]=i.useState(null);i.useEffect(()=>{(async()=>{if(window.ethereum){const O=await window.ethereum.request({method:"eth_chainId"});r(parseInt(O,16))}})(),window.ethereum?.on("chainChanged",O=>{r(parseInt(O,16))})},[]);const $=async I=>{if(I.symbol==="ETH")o({...I,address:je.WETH,decimals:18});else{const O=await at(I.address);if(O)o({...I,name:O.name,symbol:O.symbol,decimals:O.decimals||18,logo:O.logo,logoIpfs:O.logoIpfs});else{const F=await l.getTokenInfo(I.address);o({...I,...F,name:I.name||F.name,symbol:I.symbol||F.symbol})}}y(!1)},L=async I=>{if(I.symbol==="ETH")c({...I,address:je.WETH,decimals:18});else{const O=await at(I.address);if(O)c({...I,name:O.name,symbol:O.symbol,decimals:O.decimals||18,logo:O.logo,logoIpfs:O.logoIpfs});else{const F=await l.getTokenInfo(I.address);c({...I,...F,name:I.name||F.name,symbol:I.symbol||F.symbol})}}j(!1)},S=I=>{(I===""||/^\d*\.?\d*$/.test(I))&&x(I)},A=I=>{(I===""||/^\d*\.?\d*$/.test(I))&&N(I)},h=async()=>{if(!t){s();return}if(!d||!m){M.error("Please select both tokens");return}if(!u||!f){M.error("Please enter both amounts");return}w(!0);try{if(await l.checkPoolExists(d.address,m.address)){M.error("This pool already exists. Please use the Add Liquidity feature instead."),w(!1);return}const O=Ie(u,d.decimals),F=Ie(f,m.decimals);M.loading("Creating pool and adding liquidity...",{id:"pool-create"});const U=await l.createPool(d.address,m.address,O,F);console.log("Pool created at:",U.pairAddress),M.success("Pool created and liquidity added successfully!",{id:"pool-create"}),x(""),N(""),o(null),c(null)}catch(I){console.error("Error creating pool:",I),M.error(I.message.includes("insufficient")?"Insufficient balance for transaction":I.message.includes("chain")?"Please switch to a supported network":I.message.includes("approve")?I.message:`Failed to create pool: ${I.message}`,{id:"pool-create"})}finally{w(!1)}};return i.useEffect(()=>{async function I(){if(!(!d||!m))try{setPriceRatio(1),useAutoPrice&&(u?N(calculateOtherAmount(u,!0)):f&&x(calculateOtherAmount(f,!1)))}catch(O){console.error("Error fetching prices:",O),setPriceRatio(1)}}I()},[d,m]),i.useEffect(()=>{async function I(){if(!d||!m||!u||!f){b(null);return}try{const O=Ie(u,d.decimals),F=Ie(f,m.decimals),U=l.calculateInitialPoolPrice(O,F,d.decimals,m.decimals);b({token0Price:U.token0Price,token1Price:U.token1Price})}catch(O){console.error("Error calculating price:",O),b(null)}}I()},[d,m,u,f]),e.jsxs("div",{className:"space-y-6 max-w-lg mx-auto",children:[e.jsx("div",{className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",children:t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 1"}),e.jsx("div",{className:"space-y-2",children:e.jsx("button",{onClick:()=>y(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:d.logo,alt:d.symbol,className:"w-5 h-5"}),e.jsx("span",{children:d.symbol})]}):"Select Token"})}),d&&e.jsx("input",{type:"text",value:u,onChange:I=>S(I.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 2"}),e.jsx("div",{className:"space-y-2",children:e.jsx("button",{onClick:()=>j(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:m?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:m.logo,alt:m.symbol,className:"w-5 h-5"}),e.jsx("span",{children:m.symbol})]}):"Select Token"})}),m&&e.jsx("input",{type:"text",value:f,onChange:I=>A(I.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),T&&d&&m&&e.jsxs("div",{className:"mt-6 p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-3",children:"Initial Pool Price"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["1 ",d.symbol," ="]}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(T.token0Price).toLocaleString(void 0,{maximumFractionDigits:6})," ",m.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["1 ",m.symbol," ="]}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(T.token1Price).toLocaleString(void 0,{maximumFractionDigits:6})," ",d.symbol]})]})]})]}),e.jsxs("div",{className:"mt-6 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Fee Tier"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:["0.01","0.05","0.3","1"].map(I=>e.jsxs("button",{onClick:()=>C(I),className:`
                      px-4 py-2 rounded-xl text-sm font-medium
                      ${v===I?"bg-[#00ffbd] text-black":"bg-white/10 dark:bg-[#2d2f36] text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80"}
                      transition-colors
                    `,children:[I,"%"]},I))})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-500/5 dark:bg-blue-500/10 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"About Pool Creation"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Creating a new liquidity pool allows you to be the first liquidity provider. The ratio of tokens you add will set the initial price. Make sure to add sufficient liquidity to minimize price impact from trades."})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(it,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create a liquidity pool"}),e.jsx("button",{onClick:s,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]})}),e.jsx("button",{onClick:h,disabled:E||!d||!m||!u||!f,className:`
          w-full px-4 py-4 rounded-xl font-medium text-black text-lg
          ${E||!d||!m||!u||!f?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
        `,children:E?"Creating Pool...":"Create Pool"}),e.jsx(rr,{isOpen:p,onClose:()=>y(!1),onSelect:$,selectedTokenAddress:d?.address}),e.jsx(rr,{isOpen:g,onClose:()=>j(!1),onSelect:L,selectedTokenAddress:m?.address})]})}const Vo=document.createElement("style");Vo.textContent=`
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(0.8);
      opacity: 0.5;
    }
  }
`;document.head.appendChild(Vo);ve.WETH,ve.USDT;const Vs={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Creating:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-pulse",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"animate-[spin_3s_linear_infinite]",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),Info:()=>e.jsx("svg",{className:"w-6 h-6 text-blue-500",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},Tu=({isOpen:a,onClose:t,currentStep:s,token0:n,token1:r,isNewPool:l,error:d,poolExists:o,setActiveTab:m})=>{const c=[{id:"preparing",title:"Preparing",icon:e.jsx(Vs.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(Vs.Approval,{})},...l?[{id:"creating",title:"Creating Pool",icon:e.jsx(Vs.Creating,{})}]:[],{id:"adding",title:"Adding Liquidity",icon:e.jsx(Vs.Adding,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Vs.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Vs.Completed,{})}],u=!!d,x=d==="pool exists";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:x?"Pool Already Exists":l?"Creating New Pool":"Adding Initial Liquidity"}),x&&o?e.jsx(Su,{token0:n,token1:r,poolAddress:o.address,onClose:t,setActiveTab:m}):e.jsx("div",{className:"space-y-4",children:c.map((f,N)=>{const v=s===f.id,C=!u&&c.findIndex(w=>w.id===s)>N,E=u&&s===f.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${v&&!E?"bg-[#00ffbd]/10 text-[#00ffbd]":C?"text-[#00ffbd]":E?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[f.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:f.title}),v&&!u&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[f.id==="preparing"&&"Preparing transaction...",f.id==="approval"&&`Approving ${n?.symbol} and ${r?.symbol}`,f.id==="creating"&&"Creating new liquidity pool...",f.id==="adding"&&"Adding initial liquidity...",f.id==="confirming"&&"Waiting for confirmation...",f.id==="completed"&&"Transaction completed!"]})]}),C&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},f.id)})})]})})})})]})})},Cu=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-[99998]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Pool Creation Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(9)].map((o,m)=>{const c=m+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>d(c),onMouseLeave:()=>d(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(l||n)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n===0?"Select a rating":`You rated: ${n} star${n!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{n>0&&(s(n),t())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${n>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},Su=({token0:a,token1:t,poolAddress:s,onClose:n,setActiveTab:r})=>{rt();const l=()=>{n(),r("liquidity",{selectedTokens:{token0:a,token1:t},poolAddress:s})},d=()=>{navigator.clipboard.writeText(s),M.success("Pool address copied to clipboard!",{style:{borderRadius:"10px",background:"#333",color:"#fff"}})};return e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 rounded-xl bg-[#00ffbd]/5 dark:bg-[#00ffbd]/10 border border-[#00ffbd]/10 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd] mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Pool Already Exists"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-300",children:["A liquidity pool for ",a?.symbol,"/",t?.symbol," already exists."]}),e.jsx("div",{className:"mt-2 p-2 bg-white/50 dark:bg-black/50 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"Pool Address:"}),e.jsxs("button",{onClick:d,className:"text-xs text-[#00ffbd] hover:text-[#00ffbd]/80 transition-colors truncate",title:s,children:[s.slice(0,6),"...",s.slice(-4)," (Click to Copy)"]})]})})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-800 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none focus-visible:ring-2 focus-visible:ring-gray-500 focus-visible:ring-offset-2 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-black dark:text-black bg-[#00ffbd] rounded-lg hover:bg-[#00ffbd]/90 focus:outline-none focus-visible:ring-2 focus-visible:ring-[#00ffbd] focus-visible:ring-offset-2 transition-colors",children:"Add Liquidity"})]})]})})},Fu=async(a,t,s,n)=>{if(!a||!t||!s||!n)return null;try{return parseFloat(n)/parseFloat(s)}catch(r){return console.error("Error calculating price ratio:",r),null}},Eu={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},At={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},Oa={hover:{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}},tap:{scale:.98}},Au=({currentChainId:a})=>{const s=(()=>{switch(a){case 1301:return{name:"Unichain Testnet",status:"supported",className:"bg-green-500/10 text-green-500 border-green-500/20"};case 130:return{name:"Unichain Mainnet",status:"supported",className:"bg-blue-500/10 text-blue-500 border-blue-500/20"};case 10143:return{name:"Monad Testnet",status:"supported",className:"bg-purple-500/10 text-purple-500 border-purple-500/20"};default:return{name:"Unsupported Network",status:"unsupported",className:"bg-red-500/10 text-red-500 border-red-500/20"}}})();return e.jsxs("div",{className:`px-4 py-2 rounded-xl text-sm font-medium ${s.className} border mb-4`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.status==="supported"?"bg-current":"bg-red-500"}`}),e.jsx("span",{children:s.name})]}),s.status==="unsupported"&&e.jsx("p",{className:"text-xs mt-1",children:"Please switch to Unichain network (Testnet or Mainnet) or Monad Testnet to create pools"})]})},Iu=["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)","function symbol() view returns (string)","function name() view returns (string)"],xi=({token:a})=>{const[t,s]=i.useState("0"),[n,r]=i.useState(!1),{address:l}=Oe();return i.useEffect(()=>{async function d(){if(!(!a||!l||!window.ethereum))try{r(!0);const o=new he(window.ethereum),m=await o.getNetwork().then(c=>Number(c.chainId));if(a.isNative||a.symbol==="ETH"||a.symbol==="MON"){const c=await o.getBalance(l);s(ze(c));return}try{const c=new J(a.address,Iu,o),[u,x]=await Promise.all([c.balanceOf(l),c.decimals()]);s(de(u,x))}catch(c){if(console.error("Error fetching ERC20 balance:",c),m===10143){const u=Ms.defaultAbiCoder().encode(["address"],[l]).slice(2),x=await window.ethereum.request({method:"eth_call",params:[{to:a.address,data:"0x70a08231"+u},"latest"]}),f=BigInt(x);s(de(f,a.decimals||18))}else throw c}}catch(o){console.error("Error fetching balance:",o),s("0")}finally{r(!1)}}d()},[a,l]),!a||!l?null:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Balance:"}),n?e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 w-20 rounded"}):e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(t).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:6})," ",a.symbol]})]})};function Bu({setActiveTab:a}){const{address:t}=Oe();rt();const[s,n]=i.useState(null),r=Pt(),[l,d]=i.useState(null),[o,m]=i.useState(null),[c,u]=i.useState(""),[x,f]=i.useState("");i.useState("0.3");const[N,v]=i.useState(!1),[C,E]=i.useState(!1),[w,p]=i.useState(!1),[y,g]=i.useState(null),[j,T]=i.useState(null),[b,$]=i.useState(!1),[L,S]=i.useState(null),[A,h]=i.useState(!1),[I,O]=i.useState(!1),[F,U]=i.useState(!1),[V,P]=i.useState(null),[B,k]=i.useState(null),[D,_]=i.useState({width:window.innerWidth,height:window.innerHeight});i.useEffect(()=>{let W=!0;const Q=async()=>{if(!(!window.ethereum||!W))try{const q=await window.ethereum.request({method:"eth_chainId"});W&&n(parseInt(q,16))}catch(q){console.error("Error checking chain:",q)}},G=q=>{W&&n(parseInt(q,16))};return Q(),window.ethereum&&window.ethereum.on("chainChanged",G),()=>{W=!1,window.ethereum&&window.ethereum.removeListener("chainChanged",G)}},[]);const H=s===1301||s===130||s===10143,X=async W=>{try{if(!H){M.error("Please switch to Unichain network (Testnet or Mainnet) or Monad Testnet");return}if(W.symbol==="WETH"&&s!==10143){M.error("Please use ETH instead of WETH. The router will automatically convert ETH to WETH.",{duration:6e3,style:{borderRadius:"10px",background:"#333",color:"#fff"}});return}let Q;if(W.symbol==="ETH"||W.symbol==="MON")Q={...W,address:ve[s]?.WETH,decimals:18,isNative:!0};else try{const G=await at(W.address);if(G)Q={...W,name:G.name,symbol:G.symbol,decimals:G.decimals||18,logo:G.logo,logoIpfs:G.logoIpfs};else{const q=await r.getTokenInfo(W.address);Q={...W,...q,name:W.name||q.name,symbol:W.symbol||q.symbol,logo:W.logo||"/token-placeholder.png"}}}catch{const q=await r.getTokenInfo(W.address);Q={...W,...q,name:W.name||q.name,symbol:W.symbol||q.symbol,logo:W.logo||"/token-placeholder.png"}}if(d(Q),E(!1),o){const G=new he(window.ethereum),q=ve[s]?.factory;if(!q)throw new Error("Invalid network configuration");if(s===10143){const Z=Ms.defaultAbiCoder().encode(["address","address"],[Q.address,o.address]).slice(2),ie=await window.ethereum.request({method:"eth_call",params:[{to:q,data:"0xe6a43905"+Z},"latest"]});if(ie&&ie!=="0x0000000000000000000000000000000000000000000000000000000000000000"){const ne="0x"+ie.slice(26);k({address:ne}),P("pool exists"),$(!0),S("preparing")}else k(null),P(null)}else{const ie=await new J(q,["function getPair(address tokenA, address tokenB) external view returns (address pair)"],G).getPair(Q.address,o.address);ie&&ie!==ka?(k({address:ie}),P("pool exists"),$(!0),S("preparing")):(k(null),P(null))}}}catch(Q){console.error("Error selecting token0:",Q),M.error("Failed to load token information. Please try again.")}},z=async W=>{try{if(!H){M.error("Please switch to Unichain network (Testnet or Mainnet) or Monad Testnet");return}if(W.symbol==="WETH"&&s!==10143){M.error("Please use ETH instead of WETH. The router will automatically convert ETH to WETH.",{duration:6e3,style:{borderRadius:"10px",background:"#333",color:"#fff"}});return}let Q;if(W.symbol==="ETH"||W.symbol==="MON")Q={...W,address:ve[s]?.WETH,decimals:18,isNative:!0};else try{const G=await at(W.address);if(G)Q={...W,name:G.name,symbol:G.symbol,decimals:G.decimals||18,logo:G.logo,logoIpfs:G.logoIpfs};else{const q=await r.getTokenInfo(W.address);Q={...W,...q,name:W.name||q.name,symbol:W.symbol||q.symbol,logo:W.logo||"/token-placeholder.png"}}}catch(G){console.warn("Firebase fetch failed, falling back to contract:",G);const q=await r.getTokenInfo(W.address);Q={...W,...q,name:W.name||q.name,symbol:W.symbol||q.symbol,logo:W.logo||"/token-placeholder.png"}}if(m(Q),p(!1),l){const G=new he(window.ethereum),q=ve[s]?.factory;if(!q)throw new Error("Invalid network configuration");const ie=await new J(q,["function getPair(address tokenA, address tokenB) external view returns (address pair)"],G).getPair(l.address,Q.address);ie&&ie!==ka?(k({address:ie}),P("pool exists"),$(!0),S("preparing")):(k(null),P(null))}}catch(Q){console.error("Error selecting token1:",Q),M.error("Failed to load token information. Please try again.")}},se=W=>{if(u(W),W&&l&&o){const Q=x||W;g({token0Price:parseFloat(Q)/parseFloat(W),token1Price:parseFloat(W)/parseFloat(Q)})}},ee=W=>{f(W),W&&l&&o&&c&&g({token0Price:parseFloat(W)/parseFloat(c),token1Price:parseFloat(c)/parseFloat(W)})};i.useEffect(()=>{const W=()=>{_({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",W),()=>window.removeEventListener("resize",W)},[]);const te=W=>{console.log("User rated pool creation:",W)},Y=async()=>{if(!t){openConnectModal();return}if(!H){M.error("Please switch to a supported network (Unichain or Monad Testnet)");return}if(!l||!o){P("Please select both tokens"),$(!0),S("preparing");return}if(!c||!x){P("Please enter both amounts"),$(!0),S("preparing");return}v(!0),$(!0),S("preparing"),P(null);try{const W=new he(window.ethereum),Q=ve[s]?.factory;if(!Q)throw new Error("Invalid network configuration");let G;if(s===10143){const ne=new ps(["function getPair(address tokenA, address tokenB) external view returns (address pair)"]).encodeFunctionData("getPair",[l.address,o.address]),K=await W.call({to:Q,data:ne});G=$s(yo(K,12))}else G=await new J(Q,["function getPair(address tokenA, address tokenB) external view returns (address pair)"],W).getPair(l.address,o.address);if(G&&G!==ka){k({address:G}),P("pool exists"),S("preparing"),v(!1);return}h(!0),S("approval");const q=Ie(c,l.decimals),Z=Ie(x,o.decimals);if(s===10143){const ie=ve[s].router,ne=new ps(["function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)"]),K=await W.getSigner(),xe=Math.floor(Date.now()/1e3)+60*20;if(l.isNative||o.isNative){const pe=l.isNative?o.address:l.address,ke=l.isNative?Z:q,we=l.isNative?q:Z;l.isNative?o.isNative||await new J(o.address,["function approve(address spender, uint256 amount) external returns (bool)"],K).approve(ie,Z):await new J(l.address,["function approve(address spender, uint256 amount) external returns (bool)"],K).approve(ie,q),await(await K.sendTransaction({to:ie,data:ne.encodeFunctionData("addLiquidityETH",[pe,ke,ke,we,await K.getAddress(),xe]),value:we})).wait()}else{const pe=new J(l.address,["function approve(address spender, uint256 amount) external returns (bool)"],K),ke=new J(o.address,["function approve(address spender, uint256 amount) external returns (bool)"],K);await pe.approve(ie,q),await ke.approve(ie,Z),await(await K.sendTransaction({to:ie,data:ne.encodeFunctionData("addLiquidity",[l.address,o.address,q,Z,q,Z,await K.getAddress(),xe])})).wait()}}else await r.createPool(l.address,o.address,q,Z);S("completed"),setTimeout(()=>{$(!1),S(null),O(!0),setTimeout(()=>{U(!0)},1e3),setTimeout(()=>{u(""),f(""),O(!1)},3e4)},1e3)}catch(W){console.error("Pool creation error:",W),P(W.message)}finally{v(!1)}};return i.useEffect(()=>{(async()=>{if(l&&o&&c&&x){const Q=await Fu(l,o,c,x);T(Q),g({token0Price:parseFloat(x)/parseFloat(c),token1Price:parseFloat(c)/parseFloat(x)})}else T(null),g(null)})()},[l,o,c,x]),e.jsxs(R.div,{variants:Eu,initial:"hidden",animate:"show",className:"space-y-6 max-w-lg mx-auto",children:[I&&e.jsx(qt,{width:D.width,height:D.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs(R.div,{variants:At,className:"bg-white/5 dark:bg-[#1a1b1f] backdrop-blur-xl rounded-2xl p-6 border border-gray-200 dark:border-gray-800",children:[e.jsx(Au,{currentChainId:s}),t?e.jsx(Ze,{mode:"wait",children:e.jsxs(R.div,{variants:At,className:"space-y-4",children:[e.jsxs(R.div,{variants:At,className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 1"}),e.jsx(R.button,{variants:Oa,whileHover:"hover",whileTap:"tap",onClick:()=>E(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:l?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:l.logo,alt:l.symbol,className:"w-5 h-5"}),e.jsx("span",{children:l.symbol})]}),e.jsx(xi,{token:l})]}):"Select Token"}),l&&e.jsx(R.input,{variants:At,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},type:"text",value:c,onChange:W=>se(W.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),e.jsxs(R.div,{variants:At,className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Token 2"}),e.jsx(R.button,{variants:Oa,whileHover:"hover",whileTap:"tap",onClick:()=>p(!0),className:"w-full px-4 py-3 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-left text-gray-900 dark:text-white hover:bg-white/20 dark:hover:bg-[#2d2f36]/80 transition-colors",children:o?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:o.logo,alt:o.symbol,className:"w-5 h-5"}),e.jsx("span",{children:o.symbol})]}),e.jsx(xi,{token:o})]}):"Select Token"}),o&&e.jsx(R.input,{variants:At,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},type:"text",value:x,onChange:W=>ee(W.target.value),placeholder:"Enter amount",className:"w-full px-4 py-3 mt-2 bg-white/10 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white"})]}),y&&l&&o&&c&&x&&e.jsxs(R.div,{variants:At,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 p-4 bg-white/5 dark:bg-[#2d2f36]/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Initial Prices"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:"The ratio of tokens you add will set the initial price of the pool."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center bg-white/5 dark:bg-black/20 p-2 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["1 ",l.symbol," ="]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[y.token0Price.toFixed(6)," ",o.symbol]})]}),e.jsxs("div",{className:"flex justify-between items-center bg-white/5 dark:bg-black/20 p-2 rounded-lg",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["1 ",o.symbol," ="]}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[y.token1Price.toFixed(6)," ",l.symbol]})]})]})]}),e.jsxs(R.div,{variants:At,className:"mt-6 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"Fee Tier"}),e.jsx(R.div,{variants:At,className:"w-full",children:e.jsx("div",{className:"px-4 py-3 bg-[#00ffbd]/10 rounded-xl text-sm font-medium text-[#00ffbd] flex items-center justify-center",children:"0.3% (Fixed Fee Tier)"})})]}),e.jsxs(R.div,{variants:At,className:"mt-6 p-4 bg-blue-500/5 dark:bg-blue-500/10 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-2",children:"About Pool Creation"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Creating a new liquidity pool allows you to be the first liquidity provider. The ratio of tokens you add will set the initial price. Make sure to add sufficient liquidity to minimize price impact from trades."})]})]})}):e.jsxs(R.div,{variants:At,className:"text-center py-8",children:[e.jsx(R.div,{className:"mb-4",animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:e.jsx(it,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx(R.h3,{variants:At,className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx(R.p,{variants:At,className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to create a liquidity pool"}),e.jsx(R.button,{variants:Oa,whileHover:"hover",whileTap:"tap",onClick:openConnectModal,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]})]}),!B&&e.jsx(R.button,{variants:Oa,whileHover:"hover",whileTap:"tap",onClick:Y,disabled:N||!l||!o||!c||!x||!H,className:`
            w-full px-4 py-4 rounded-xl font-medium text-black text-lg
            ${N||!l||!o||!c||!x||!H?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
          `,children:N?"Creating Pool...":H?"Create Pool":"Switch to Unichain Network"}),e.jsx(ir,{isOpen:C,onClose:()=>E(!1),onSelect:X,selectedTokenAddress:l?.address,currentChainId:s}),e.jsx(ir,{isOpen:w,onClose:()=>p(!1),onSelect:z,selectedTokenAddress:o?.address,currentChainId:s}),e.jsx(Tu,{isOpen:b,onClose:()=>{$(!1),S(null),P(null)},currentStep:L,token0:l,token1:o,isNewPool:A,error:V,poolExists:B,setActiveTab:a}),e.jsx(Cu,{isOpen:F,onClose:()=>U(!1),onRate:te})]})}const gi=["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)"],Ir="0xb7610f9b733e7d45184be3a1bc8a847be6ec4f0b",Du=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_WETH9",type:"address"},{internalType:"address",name:"_tokenDescriptor_",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Collect",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"DecreaseLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"},{indexed:!1,internalType:"uint128",name:"liquidity",type:"uint128"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"IncreaseLiquidity",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"WETH9",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint128",name:"amount0Max",type:"uint128"},{internalType:"uint128",name:"amount1Max",type:"uint128"}],internalType:"struct INonfungiblePositionManager.CollectParams",name:"params",type:"tuple"}],name:"collect",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"uint160",name:"sqrtPriceX96",type:"uint160"}],name:"createAndInitializePoolIfNecessary",outputs:[{internalType:"address",name:"pool",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct INonfungiblePositionManager.DecreaseLiquidityParams",name:"params",type:"tuple"}],name:"decreaseLiquidity",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"amount0Desired",type:"uint256"},{internalType:"uint256",name:"amount1Desired",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct INonfungiblePositionManager.IncreaseLiquidityParams",name:"params",type:"tuple"}],name:"increaseLiquidity",outputs:[{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint256",name:"amount0Desired",type:"uint256"},{internalType:"uint256",name:"amount1Desired",type:"uint256"},{internalType:"uint256",name:"amount0Min",type:"uint256"},{internalType:"uint256",name:"amount1Min",type:"uint256"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct INonfungiblePositionManager.MintParams",name:"params",type:"tuple"}],name:"mint",outputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"bytes[]",name:"data",type:"bytes[]"}],name:"multicall",outputs:[{internalType:"bytes[]",name:"results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"positions",outputs:[{internalType:"uint96",name:"nonce",type:"uint96"},{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"},{inputs:[],name:"refundETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowed",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"nonce",type:"uint256"},{internalType:"uint256",name:"expiry",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitAllowedIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"selfPermitIfNecessary",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"sweepToken",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount0Owed",type:"uint256"},{internalType:"uint256",name:"amount1Owed",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"uniswapV3MintCallback",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amountMinimum",type:"uint256"},{internalType:"address",name:"recipient",type:"address"}],name:"unwrapWETH9",outputs:[],stateMutability:"payable",type:"function"},{stateMutability:"payable",type:"receive"}],us={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},ra={[us.LOWEST]:1,[us.LOW]:10,[us.MEDIUM]:60,[us.HIGH]:200},Mu="0x1f984000000000000000000000000000000000003",Pu=["function slot0() external view returns (uint160 sqrtPriceX96, int24 tick, uint16 observationIndex, uint16 observationCardinality, uint16 observationCardinalityNext, uint8 feeProtocol, bool unlocked)","function liquidity() external view returns (uint128)","function token0() external view returns (address)","function token1() external view returns (address)"];class Yt{constructor(t){if(!t)throw new Error("Signer or provider is required");t.provider?(this.provider=t.provider,this.signer=t):t.getSigner?(this.provider=t,this.signer=t.getSigner()):(this.provider=t,this.signer=null),this.contract=new J(Ir,Du,this.signer||this.provider)}async checkTokenAllowance(t,s){try{return await new J(t,gi,this.provider).allowance(s,Ir)}catch(n){throw console.error("Error checking token allowance:",n),n}}async approveToken(t,s){if(!this.signer)throw new Error("Signer is required for approving tokens");try{return await(await new J(t,gi,this.signer).approve(Ir,s)).wait()}catch(n){throw console.error("Error approving token:",n),n}}async ensureTokenApprovals(t){const{token0:s,token1:n,amount0Desired:r,amount1Desired:l,ownerAddress:d}=t;try{const o=await this.checkTokenAllowance(s,d),m=await this.checkTokenAllowance(n,d),c=bt(r.toString()),u=bt(l.toString()),x=bt(o.toString()),f=bt(m.toString());x<c&&await this.approveToken(s,Mt),f<u&&await this.approveToken(n,Mt)}catch(o){throw console.error("Error ensuring token approvals:",o),o}}async createAndInitializePool(t,s,n,r){if(!this.signer)throw new Error("Signer is required for creating pool");try{let l=t,d=s,o=r;BigInt(t)>BigInt(s)&&(l=s,d=t,r&&(o=2n**192n/BigInt(r))),o||(o=fo("79228162514264337593543950336"));const c=await(await this.contract.createAndInitializePoolIfNecessary(l,d,n,o,{gasLimit:5e6})).wait(),x=c.logs.map(f=>{try{return this.contract.interface.parseLog(f)}catch{return null}}).filter(Boolean).find(f=>f.name==="PoolCreated"||f.name==="Pool"||f.fragment?.name==="PoolCreated");if(!x){const f=await this.contract.factory(),v=await new J(f,["function getPool(address,address,uint24) view returns (address)"],this.provider).getPool(l,d,n);if(v==="0x0000000000000000000000000000000000000000")throw new Error("Failed to create or find pool");return{pool:v,token0:l,token1:d,fee:n,receipt:c}}return{pool:x.args.pool,token0:l,token1:d,fee:n,receipt:c}}catch(l){throw console.error("Error creating pool:",l),l}}async mint(t){if(!this.signer)throw new Error("Signer is required for minting");try{const{token0:s,token1:n,fee:r,tickLower:l,tickUpper:d,amount0Desired:o,amount1Desired:m,amount0Min:c=0,amount1Min:u=0,recipient:x,deadline:f=Math.floor(Date.now()/1e3)+1200}=t;let N=s,v=n,C=o,E=m,w=c,p=u,y=l,g=d;BigInt(s)>BigInt(n)&&(N=n,v=s,C=m,E=o,w=u,p=c,y=-d,g=-l);const j=ra[r];y=Math.floor(y/j)*j,g=Math.floor(g/j)*j;const T=await this.signer.getAddress();await this.ensureTokenApprovals({token0:N,token1:v,amount0Desired:C,amount1Desired:E,ownerAddress:T});const b={token0:N,token1:v,fee:r,tickLower:y,tickUpper:g,amount0Desired:C,amount1Desired:E,amount0Min:w,amount1Min:p,recipient:x||T,deadline:f},L=await(await this.contract.mint(b,{gasLimit:1e6})).wait(),S=L.logs.map(I=>{try{return this.contract.interface.parseLog(I)}catch{return null}}).filter(Boolean),A=S.find(I=>I.name==="Transfer"),h=S.find(I=>I.name==="IncreaseLiquidity"||I.fragment?.name==="IncreaseLiquidity");if(!A||!h)throw new Error("Required events not found in transaction receipt");return{tokenId:A.args.tokenId||A.args.id,liquidity:h.args.liquidity,amount0:h.args.amount0,amount1:h.args.amount1,receipt:L}}catch(s){throw console.error("Error minting position:",s),s}}async increaseLiquidity(t){try{return await this.ensureTokenApprovals(t),await(await this.contract.increaseLiquidity(t)).wait()}catch(s){throw console.error("Error increasing liquidity:",s),s}}async decreaseLiquidity(t){try{return await(await this.contract.decreaseLiquidity(t)).wait()}catch(s){throw console.error("Error decreasing liquidity:",s),s}}async collect(t){try{return await(await this.contract.collect(t)).wait()}catch(s){throw console.error("Error collecting fees:",s),s}}async burn(t){try{return await(await this.contract.burn(t)).wait()}catch(s){throw console.error("Error burning position:",s),s}}async getPosition(t){try{const s=await this.contract.positions(t);return{nonce:s.nonce,operator:s.operator,token0:s.token0,token1:s.token1,fee:s.fee,tickLower:s.tickLower,tickUpper:s.tickUpper,liquidity:s.liquidity,feeGrowthInside0LastX128:s.feeGrowthInside0LastX128,feeGrowthInside1LastX128:s.feeGrowthInside1LastX128,tokensOwed0:s.tokensOwed0,tokensOwed1:s.tokensOwed1}}catch(s){throw console.error("Error getting position:",s),s}}async getPositionsForOwner(t){try{const s=await this.contract.balanceOf(t),n=[];for(let r=0;r<s;r++){const l=await this.contract.tokenOfOwnerByIndex(t,r),d=await this.getPosition(l);n.push({tokenId:l,...d})}return n}catch(s){throw console.error("Error getting positions for owner:",s),s}}static formatMintParams({token0:t,token1:s,fee:n,tickLower:r,tickUpper:l,amount0Desired:d,amount1Desired:o,amount0Min:m,amount1Min:c,recipient:u,deadline:x}){return{token0:t,token1:s,fee:n,tickLower:r,tickUpper:l,amount0Desired:d,amount1Desired:o,amount0Min:m||0,amount1Min:c||0,recipient:u,deadline:x||Math.floor(Date.now()/1e3)+1200}}static formatIncreaseLiquidityParams({tokenId:t,amount0Desired:s,amount1Desired:n,amount0Min:r,amount1Min:l,deadline:d}){return{tokenId:t,amount0Desired:s,amount1Desired:n,amount0Min:r||0,amount1Min:l||0,deadline:d||Math.floor(Date.now()/1e3)+1200}}static formatDecreaseLiquidityParams({tokenId:t,liquidity:s,amount0Min:n,amount1Min:r,deadline:l}){return{tokenId:t,liquidity:s,amount0Min:n||0,amount1Min:r||0,deadline:l||Math.floor(Date.now()/1e3)+1200}}static formatCollectParams({tokenId:t,recipient:s,amount0Max:n,amount1Max:r}){return{tokenId:t,recipient:s,amount0Max:n||void 0,amount1Max:r||void 0}}static getPriceFromTick(t,s,n){return 1.0001**t*10**(n-s)}static getTickFromPrice(t,s,n){const r=t/10**(n-s);return Math.floor(Math.log(r)/Math.log(1.0001))}static getNearestValidTick(t,s){const n=ra[s];return Math.round(t/n)*n}static getFullRangeTicks(t){return{tickLower:-887272,tickUpper:887272}}static getPriceRangeTicks({basePrice:t,lowerPricePercent:s,upperPricePercent:n,decimals0:r,decimals1:l,feeAmount:d}){const o=t*(1-s/100),m=t*(1+n/100);let c=this.getTickFromPrice(o,r,l),u=this.getTickFromPrice(m,r,l);return c=this.getNearestValidTick(c,d),u=this.getNearestValidTick(u,d),{tickLower:c,tickUpper:u}}static getAmountsWithSlippage(t,s,n){const r=1-n/100;return{amount0Min:BigInt(Math.floor(Number(t)*r)),amount1Min:BigInt(Math.floor(Number(s)*r))}}async addLiquidityPreview({token0:t,token1:s,fee:n,amount0Desired:r,amount1Desired:l,tickLower:d,tickUpper:o,slippagePercent:m=.5,recipient:c,deadline:u}){try{const{amount0Min:x,amount1Min:f}=this.constructor.getAmountsWithSlippage(r,l,m);return this.constructor.formatMintParams({token0:t,token1:s,fee:n,tickLower:d,tickUpper:o,amount0Desired:r,amount1Desired:l,amount0Min:x,amount1Min:f,recipient:c,deadline:u})}catch(x){throw console.error("Error previewing add liquidity:",x),x}}async removeLiquidityPreview({tokenId:t,liquidity:s,slippagePercent:n=.5,deadline:r}){try{const l=await this.getPosition(t),d=l.tokensOwed0,o=l.tokensOwed1,{amount0Min:m,amount1Min:c}=this.constructor.getAmountsWithSlippage(d,o,n);return{params:this.constructor.formatDecreaseLiquidityParams({tokenId:t,liquidity:s,amount0Min:m,amount1Min:c,deadline:r}),expectedAmounts:{amount0:d,amount1:o}}}catch(l){throw console.error("Error previewing remove liquidity:",l),l}}static formatPositionDisplay(t){return{tokenId:t.tokenId,token0Symbol:t.token0Symbol,token1Symbol:t.token1Symbol,fee:t.fee/1e4,tickLower:t.tickLower,tickUpper:t.tickUpper,priceLower:this.getPriceFromTick(t.tickLower,t.decimals0,t.decimals1),priceUpper:this.getPriceFromTick(t.tickUpper,t.decimals0,t.decimals1),liquidity:t.liquidity.toString(),tokensOwed0:t.tokensOwed0.toString(),tokensOwed1:t.tokensOwed1.toString()}}static getFeeTierOptions(){return[{value:us.LOWEST,label:"0.01%",description:"Best for very stable pairs"},{value:us.LOW,label:"0.05%",description:"Best for stable pairs"},{value:us.MEDIUM,label:"0.3%",description:"Best for most pairs"},{value:us.HIGH,label:"1%",description:"Best for volatile pairs"}]}static getPriceRangePresets(){return[{label:"Full Range",value:"full",description:"Provides liquidity across all price ranges"},{label:"Safe",value:"safe",lowerPricePercent:10,upperPricePercent:10,description:"±10% from current price"},{label:"Moderate",value:"moderate",lowerPricePercent:20,upperPricePercent:20,description:"±20% from current price"},{label:"Wide",value:"wide",lowerPricePercent:50,upperPricePercent:50,description:"±50% from current price"}]}async multicall(t,s={}){if(!this.signer)throw new Error("Signer is required for multicall");try{const n=this.contract.interface.encodeFunctionData("multicall",[t]),r={to:this.contract.address,data:n,...s,value:s.value?s.value:0n},d=await(await this.signer.sendTransaction(r)).wait(),o=d.logs.map(m=>{try{return this.contract.interface.parseLog(m)}catch{return null}}).filter(Boolean);return{receipt:d,results:o}}catch(n){throw console.error("Error in multicall:",n),n}}encodeFunctionData(t,s){return this.contract.interface.encodeFunctionData(t,s)}async quoteExactInputSingle(t){try{const s=de(t.amountIn,18);return console.log("Quoting:",s,"of token:",t.tokenIn,"to token:",t.tokenOut),{amountOut:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountOut:"0",isNewPool:!0}}catch(s){return console.error("Error getting quote:",s),{amountOut:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountOut:"0",isNewPool:!0,error:s.message}}}async quoteExactOutputSingle(t){try{const s=de(t.amount,18);return console.log("Quoting for desired output:",s,"of token:",t.tokenOut),{amountIn:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountIn:"0",isNewPool:!0}}catch(s){return console.error("Error getting quote:",s),{amountIn:BigInt(0),sqrtPriceX96After:BigInt(0),initializedTicksCrossed:0,gasEstimate:BigInt(0),formattedAmountIn:"0",isNewPool:!0,error:s.message}}}async getPoolData(t,s,n){try{const l=await new J(Mu,["function getPool(address tokenA, address tokenB, uint24 fee) external view returns (address pool)"],this.provider).getPool(t,s,n);if(l===ka)return{exists:!1,sqrtPriceX96:0n,tick:0,liquidity:0n,token0:t,token1:s,poolAddress:null};const d=new J(l,Pu,this.provider),[o,m,c,u]=await Promise.all([d.slot0(),d.liquidity(),d.token0(),d.token1()]);return console.log("Pool data:",{address:l,sqrtPriceX96:o.sqrtPriceX96.toString(),tick:o.tick,token0:c,token1:u}),{exists:!0,sqrtPriceX96:o.sqrtPriceX96,tick:o.tick,liquidity:m,token0:c,token1:u,poolAddress:l}}catch(r){return console.error("Error getting pool data:",r),{exists:!1,sqrtPriceX96:0n,tick:0,liquidity:0n,token0:t,token1:s,poolAddress:null}}}}const _a=ve.WETH,Xt={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},$u={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-[spin_1s_linear_infinite]",d:"M12 6v1M12 17v1M7.05 7.05l.707.707M16.243 16.243l.707.707M6 12h1M17 12h1M7.757 16.243l-.707.707M16.95 7.05l-.707.707"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round",className:"origin-center animate-[spin_1.5s_linear_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{className:"animate-[draw_1s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 11l3 3L19 5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})})}),Creating:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-pulse",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"animate-[spin_3s_linear_infinite]",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{className:"animate-[draw_0.6s_ease-in-out]",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor",d:"M7 13l3 3L17 8",strokeDasharray:"60",strokeDashoffset:"60",children:e.jsx("animate",{attributeName:"stroke-dashoffset",from:"60",to:"0",dur:"0.6s",fill:"freeze"})}),e.jsx("path",{fill:"currentColor",fillOpacity:"0.2",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6 text-red-500",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})},st=a=>a?.symbol==="ETH"?"WETH":a?.symbol;function Lu(){const{address:a}=Oe(),[t,s]=i.useState(null),[n,r]=i.useState(null),[l,d]=i.useState(""),[o,m]=i.useState(""),[c,u]=i.useState(Xt.MEDIUM),[x,f]=i.useState(!1),[N,v]=i.useState(!1),[C,E]=i.useState(!1),[w,p]=i.useState(null),[y,g]=i.useState("select-pair"),[j,T]=i.useState(null),[b,$]=i.useState(!1),[L,S]=i.useState(!1);i.useState(!0),i.useState({width:window.innerWidth,height:window.innerHeight});const[A,h]=i.useState("");i.useState("full");const[I,O]=i.useState(null),[F,U]=i.useState(null),[V,P]=i.useState(!1),[B,k]=i.useState("full"),[D,_]=i.useState({min:0,max:0}),[H,X]=i.useState(!0),[z,se]=i.useState(!1),[ee,te]=i.useState("0"),[Y,W]=i.useState("0");Pt();const[Q,G]=i.useState(null),[q,Z]=i.useState(!1),ie=(oe,Ne=!1)=>{if(!oe||oe===0)return"0";if(!Number.isFinite(oe))return"∞";let Ce=Ne?1/oe:oe;return Ce===0?"0":Number.isFinite(Ce)?Math.abs(Ce)<1e-4?"< 0.0001":Ce<1e12?Ce.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}):Ce.toExponential(4).replace("e+","E"):"∞"},ne=()=>{if(q)return e.jsx("div",{className:"mb-4 text-sm text-gray-500 dark:text-[#98A1C0]",children:"Loading pool data..."});if(!Q?.exists)return e.jsx("div",{className:"mt-4 p-4 rounded-lg bg-gray-100 dark:bg-[#131A2A] text-gray-500 dark:text-[#98A1C0]",children:"This pool does not exist yet. You will be the first liquidity provider."});const oe=Q.price,Ne=1/oe;return e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-100 dark:bg-[#131A2A] text-gray-900 dark:text-white",children:[e.jsx("div",{className:"text-lg mb-2",children:"Current price:"}),e.jsxs("div",{className:"text-2xl font-bold mb-4",children:["1 ",st(t)," = ",ie(oe)," ",st(n)]}),e.jsxs("div",{className:"text-base text-gray-500 dark:text-[#98A1C0]",children:["1 ",st(n)," = ",ie(Ne)," ",st(t)]})]})},K=async()=>{if(!(!t||!n||!c)){Z(!0);try{const oe=new he(window.ethereum),Ne=new Yt(oe),Ce=t.symbol==="ETH"?_a:t.address,_e=n.symbol==="ETH"?_a:n.address,Re=await Ne.getPoolData(Ce,_e,c);if(Re.exists&&Re.sqrtPriceX96){const Pe=Re.token0.toLowerCase()===Ce.toLowerCase(),He=BigInt(Re.sqrtPriceX96),qe=BigInt(2)**BigInt(96),Je=Number(He)/Number(qe),ot=Je*Je,Xe=Pe?t.decimals:n.decimals,ht=Pe?n.decimals:t.decimals,Qe=Math.pow(10,Xe-ht);let pt=ot*Qe;Pe||(pt=1/pt),console.log("Price calculation:",{sqrtPriceX96:He.toString(),Q96:qe.toString(),price:Je,squaredPrice:ot,decimalAdjustment:Qe,adjustedPrice:pt,poolAddress:Re.poolAddress,token0:{address:Ce,decimals:t.decimals,isPoolToken0:Pe},token1:{address:_e,decimals:n.decimals,isPoolToken1:!Pe}}),Re.price=pt}if(G(Re),Re?.exists&&Re?.price){const Pe=ie(Re.price);h(Pe)}}catch(oe){console.error("Error fetching pool data:",oe),G(null)}finally{Z(!1)}}};i.useEffect(()=>{K()},[t?.address,n?.address,c]),i.useEffect(()=>{if(Q)if(Q.exists&&Q.price){const oe=ie(Q.price);h(oe)}else h("")},[Q]);const xe=oe=>{if(oe===""||/^\d*\.?\d*$/.test(oe))if(d(oe),oe){const Ne=Q?.price||Number(A),Ce=parseFloat(oe)*Ne;m(Ce.toString())}else m("")},pe=oe=>{if(oe===""||/^\d*\.?\d*$/.test(oe))if(m(oe),oe){const Ne=Q?.price||Number(A),Ce=parseFloat(oe)/Ne;d(Ce.toString())}else d("")},ke=oe=>{if(oe===""||/^\d*\.?\d*$/.test(oe)){if(h(oe),l&&oe){const Ne=parseFloat(l)*parseFloat(oe);m(Ne.toString())}else if(o&&oe){const Ne=parseFloat(o)/parseFloat(oe);d(Ne.toString())}}},we=()=>{y==="select-pair"&&t&&n&&c?g("set-price"):y==="set-price"&&A&&g("deposit-amounts")},Me=()=>{y==="set-price"?g("select-pair"):y==="deposit-amounts"&&g("set-price")},re=oe=>{w==="token0"?s(oe):r(oe),E(!1)},ce=async()=>{if(!a){M.error("Please connect your wallet");return}if(!t||!n||!l||!o||!A){M.error("Please fill in all fields");return}f(!0),$(!0),g("preparing"),T(null);try{const Ne=await new he(window.ethereum).getSigner(),Ce=new Yt(Ne),_e=Ie(Number(l).toFixed(t.decimals),t.decimals),Re=Ie(Number(o).toFixed(n.decimals),n.decimals);g("approval"),await Ce.ensureTokenApprovals({token0:t.address,token1:n.address,amount0Desired:_e,amount1Desired:Re,ownerAddress:a}),g("creating");const Pe=t.symbol==="ETH",He=n.symbol==="ETH",qe=Pe?_a:t.address,Je=He?_a:n.address,ot=Pe?_e:He?Re:0n,Xe=await Ce.getPoolData(qe,Je,c),ht=qe.toLowerCase()>Je.toLowerCase(),Qe=Xe.exists?qe.toLowerCase()===Xe.token0.toLowerCase()?t:n:ht?n:t,pt=Xe.exists?qe.toLowerCase()===Xe.token0.toLowerCase()?n:t:ht?t:n,ga=Qe.address===t.address?_e:Re,il=Qe.address===t.address?Re:_e,fn=Qe.decimals,yn=pt.decimals;let Ws;if(Xe.exists)Ws=BigInt(Xe.sqrtPriceX96),console.log("Using existing pool price:",{sqrtPriceX96:Ws.toString(),poolData:Xe});else{let nt;if(typeof A=="string"&&A.startsWith("< ")?nt=1e-12:nt=parseFloat(A.toString()),isNaN(nt)||nt<=0)throw console.error("Invalid initial price:",{initialPrice:A,rawPrice:nt,type:typeof A}),new Error("Invalid initial price: must be a positive number");const pa=10**(yn-fn),cl=ht?1/(nt*pa):nt*pa,ml=Math.sqrt(cl),ul=BigInt("79228162514264337593543950336");Ws=BigInt(Math.floor(ml*Number(ul)))}if(console.log("Price calculation:",{sqrtPriceX96:Ws.toString(),token0:{address:Qe.address,decimals:fn,isPoolToken0:Qe.address===(Xe.exists?Xe.token0:Qe.address)},token1:{address:pt.address,decimals:yn,isPoolToken1:pt.address===(Xe.exists?Xe.token1:pt.address)}}),Ws<=0n)throw new Error("Invalid price: must be greater than 0");let yr,br;if(B==="full"){const nt=Yt.getFullRangeTicks(c);yr=nt.tickLower,br=nt.tickUpper}else{const{tickLower:nt,tickUpper:pa}=Yt.getPriceRangeTicks({basePrice:finalInitialPrice,lowerPricePercent:Number(D.min||0),upperPricePercent:Number(D.max||0),decimals0:Qe.decimals,decimals1:pt.decimals,feeAmount:c});yr=nt,br=pa}const ha=[],ol=Ce.contract.interface.encodeFunctionData("createAndInitializePoolIfNecessary",[Qe.address,pt.address,c,Ws]);ha.push(ol);const ll=Ce.contract.interface.encodeFunctionData("mint",[{token0:Qe.address,token1:pt.address,fee:c,tickLower:Math.ceil(yr/ra[c])*ra[c],tickUpper:Math.floor(br/ra[c])*ra[c],amount0Desired:ga,amount1Desired:il,amount0Min:0,amount1Min:0,recipient:a,deadline:Math.floor(Date.now()/1e3)+1200}]);ha.push(ll),ot>0n&&(ha.push(Ce.contract.interface.encodeFunctionData("refundETH")),ha.push(Ce.contract.interface.encodeFunctionData("unwrapWETH9",[0,a])));const dl=await Ce.contract.multicall(ha,{value:ot,gasLimit:ot>0n?12e6:1e7});g("confirming");const bn=(await dl.wait()).logs.map(nt=>{try{return Ce.contract.interface.parseLog(nt)}catch{return null}}).filter(Boolean),wn=bn.find(nt=>nt.name==="Transfer"),Vh=wn?.args?.tokenId||wn?.args?.id,Gh=bn.find(nt=>nt.name==="IncreaseLiquidity"||nt.fragment?.name==="IncreaseLiquidity");g("completed"),setTimeout(()=>{$(!1),g(null),setTimeout(()=>{v(!0),setTimeout(()=>{S(!0)},1e3),setTimeout(()=>{d(""),m(""),v(!1)},3e4)},100)},1e3)}catch(oe){console.error("Pool creation error:",oe),T(oe.message),g("error"),M.error("Failed to create pool. Please try again.")}finally{f(!1)}},ye=async()=>{if(!(!a||!t||!n))try{const oe=new he(window.ethereum),Ne=await oe.getSigner();if(t.symbol==="ETH"){const Ce=await oe.getBalance(a);te(ze(Ce))}else{const _e=await new J(t.address,nr,Ne).balanceOf(a);te(de(_e,t.decimals))}if(n.symbol==="ETH"){const Ce=await oe.getBalance(a);W(ze(Ce))}else{const _e=await new J(n.address,nr,Ne).balanceOf(a);W(de(_e,n.decimals))}}catch(oe){console.error("Error reading balances:",oe)}};i.useEffect(()=>{ye()},[t,n,a]);const ue=async oe=>{if(!a||!oe)return"0";try{const Ne=new he(window.ethereum);if(oe.symbol==="ETH"){const Ce=await Ne.getBalance(a);return ze(Ce)}else{const Ce=new J(oe.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],Ne),[_e,Re]=await Promise.all([Ce.balanceOf(a),Ce.decimals().catch(()=>18)]);return de(_e,Re)}}catch(Ne){return console.error("Error fetching balance:",Ne),"0"}};i.useEffect(()=>{(async()=>{if(t){const Ne=await ue(t);te(Ne)}if(n){const Ne=await ue(n);W(Ne)}})()},[t,n,a]);const Fe=oe=>{if(!oe)return"0";const Ne=parseFloat(oe);return Ne===0?"0":Ne<1e-4?"< 0.0001":Ne.toFixed(4)};return e.jsxs("div",{className:"max-w-[1000px] mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"New position"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:()=>{!t&&!n||(s(null),r(null),d(""),m(""),h(""),g("select-pair"))},className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium ${t||n?"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black":"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed"}`,disabled:!t&&!n,children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M2 12c0 5.523 4.477 10 10 10s10-4.477 10-10S17.523 2 12 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M8 12h8M11 9l-3 3 3 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Reset"]}),e.jsx("button",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-sm font-medium text-black",children:"v3 position"})]})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsx("div",{className:"w-[240px] h-fit rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20 p-4 sticky top-4",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("button",{onClick:()=>g("select-pair"),className:`flex items-start gap-3 ${y==="select-pair"?"text-[#00ffbd]":"text-gray-500 dark:text-[#5D6785] hover:text-[#00ffbd]/70"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00ffbd] text-black flex items-center justify-center font-medium",children:"1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Step 1"}),e.jsx("div",{className:"text-sm",children:"Select token pair and fees"})]})]}),e.jsxs("button",{onClick:()=>t&&n&&g("set-price"),className:`flex items-start gap-3 ${!t||!n?"opacity-50 cursor-not-allowed":""} ${y==="set-price"?"text-[#00ffbd]":"text-gray-500 dark:text-[#5D6785] hover:text-[#00ffbd]/70"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00ffbd] text-black flex items-center justify-center font-medium",children:"2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Step 2"}),e.jsx("div",{className:"text-sm",children:"Set price range"})]})]}),e.jsxs("button",{onClick:()=>A&&g("deposit-amounts"),className:`flex items-start gap-3 ${A?"":"opacity-50 cursor-not-allowed"} ${y==="deposit-amounts"?"text-[#00ffbd]":"text-gray-500 dark:text-[#5D6785] hover:text-[#00ffbd]/70"}`,children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00ffbd] text-black flex items-center justify-center font-medium",children:"3"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Step 3"}),e.jsx("div",{className:"text-sm",children:"Enter deposit amounts"})]})]})]})}),e.jsxs("div",{className:"flex-1 max-w-[700px]",children:[y==="select-pair"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:t&&n&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd] flex items-center justify-center text-xs font-medium text-black",children:t.symbol.slice(0,3)}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[t.symbol," / ",n.symbol]}),e.jsx("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:"v3"}),e.jsxs("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:[c/1e4,"%"]})]})}),e.jsx("button",{onClick:()=>E(!1),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("button",{onClick:()=>{p("token0"),E(!0)},className:"p-4 rounded-xl bg-[#00ffbd] dark:bg-[#131A2A] hover:bg-[#00ffbd]/90 dark:hover:bg-[#1c2433] text-left text-black dark:text-white",children:t?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(t),alt:t.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium",children:t.symbol})]}):e.jsx("div",{className:"text-gray-500 dark:text-[#98A1C0]",children:"Select token"})}),e.jsx("button",{onClick:()=>{p("token1"),E(!0)},className:"p-4 rounded-xl bg-[#00ffbd] dark:bg-[#131A2A] hover:bg-[#00ffbd]/90 dark:hover:bg-[#1c2433] text-left text-black dark:text-white",children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(n),alt:n.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium",children:n.symbol})]}):e.jsx("div",{className:"text-gray-500 dark:text-[#98A1C0]",children:"Select token"})})]})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Fee tier"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:"The amount earned providing liquidity. Choose an amount that suits your risk tolerance and strategy."})]}),e.jsx("button",{onClick:()=>X(!H),className:"px-4 py-2 rounded-xl bg-[#00ffbd] dark:bg-[#131A2A] hover:bg-[#00ffbd]/90 dark:hover:bg-[#1c2433] text-sm font-medium text-black dark:text-white",children:H?e.jsxs(e.Fragment,{children:["Less",e.jsx("span",{className:"ml-1 inline-block transform rotate-180",children:"▼"})]}):e.jsxs(e.Fragment,{children:["More",e.jsx("span",{className:"ml-1 inline-block",children:"▼"})]})})]}),H?e.jsx("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[{value:Xt.LOWEST,label:"0.01%",description:"Best for very stable pairs."},{value:Xt.LOW,label:"0.05%",description:"Best for stable pairs."},{value:Xt.MEDIUM,label:"0.3%",description:"Best for most pairs."},{value:Xt.HIGH,label:"1%",description:"Best for exotic pairs."}].map(oe=>e.jsxs("button",{onClick:()=>u(oe.value),className:`p-4 rounded-xl text-left transition-colors ${c===oe.value?"bg-[#00ffbd] dark:bg-[#131A2A] border border-[#00ffbd] text-black dark:text-[#00ffbd]":"bg-white dark:bg-[#0a0b0f] hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white"}`,children:[e.jsxs("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:[oe.label," fee tier"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:oe.description}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:"0 TVL"})]},oe.value))}):e.jsx("div",{className:"p-4 bg-[#00ffbd] dark:bg-[#131A2A] rounded-xl mt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:[(c/1e4).toFixed(2),"% fee tier"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:[c===Xt.LOWEST&&"Best for very stable pairs.",c===Xt.LOW&&"Best for stable pairs.",c===Xt.MEDIUM&&"Best for most pairs.",c===Xt.HIGH&&"Best for exotic pairs."]})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:"0 TVL"})]})})]}),t&&n&&e.jsx("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-1 rounded-full bg-[#00ffbd] dark:bg-[#131A2A]",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 16v-4m0-4h.01M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:"Creating new pool"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:"Your selections will create a new liquidity pool which may result in lower initial liquidity and increased volatility. Consider adding to an existing pool to minimize these risks."})]})]})}),e.jsx("button",{onClick:we,disabled:!t||!n||!c,className:`w-full p-4 rounded-xl font-medium text-center ${!t||!n||!c?"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black"}`,children:"Continue"})]}),y==="set-price"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd] flex items-center justify-center text-xs font-medium text-black",children:st(t).slice(0,3)}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[st(t)," / ",st(n)]}),e.jsx("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:"v3"}),e.jsxs("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:[c/1e4,"%"]})]}),e.jsx("button",{onClick:()=>E(!1),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]})}),(!Q?.exists||q)&&e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Initial price"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>se(!1),className:`px-3 py-1 rounded-lg text-sm font-medium ${z?"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white":"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white"}`,children:t.symbol}),e.jsx("button",{onClick:()=>se(!0),className:`px-3 py-1 rounded-lg text-sm font-medium ${z?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white"}`,children:n.symbol})]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:"Set the starting exchange rate between the two tokens you are providing."}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:A,onChange:oe=>ke(oe.target.value),placeholder:"0",className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none focus:ring-2 focus:ring-[#00ffbd]"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-500 dark:text-[#98A1C0]",children:z?`${n.symbol} per ${t.symbol}`:`${t.symbol} per ${n.symbol}`})]}),A&&e.jsxs("div",{className:"mt-2 text-sm text-gray-500 dark:text-[#98A1C0]",children:["1 ",z?n.symbol:t.symbol," = ",A," ",z?t.symbol:n.symbol]})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Set price range"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>se(!1),className:`px-3 py-1 rounded-lg text-sm font-medium ${z?"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white":"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white"}`,children:t.symbol}),e.jsx("button",{onClick:()=>se(!0),className:`px-3 py-1 rounded-lg text-sm font-medium ${z?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A] text-black dark:text-white"}`,children:n.symbol})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>k("full"),className:`p-4 rounded-xl text-center transition-colors ${B==="full"?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"bg-white dark:bg-[#0a0b0f] text-gray-500 dark:text-[#98A1C0] hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A]"}`,children:"Full range"}),e.jsx("button",{onClick:()=>k("custom"),className:`p-4 rounded-xl text-center transition-colors ${B==="custom"?"bg-[#00ffbd] dark:bg-[#131A2A] text-black dark:text-white":"bg-white dark:bg-[#0a0b0f] text-gray-500 dark:text-[#98A1C0] hover:bg-[#00ffbd]/90 dark:hover:bg-[#131A2A]"}`,children:"Custom range"})]}),B==="full"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:"Providing full range liquidity ensures continuous market participation across all possible prices, offering simplicity but with potential for higher impermanent loss."}),ne(),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Min Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"0"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[st(n)," per ",st(t)]})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Max Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"∞"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[st(n)," per ",st(t)]})]})]})]}),B==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-[#98A1C0] mb-2",children:"Min price"}),e.jsx("input",{type:"text",value:D.min,onChange:oe=>_(Ne=>({...Ne,min:oe.target.value})),placeholder:"0",className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl text-lg font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none focus:ring-2 focus:ring-[#00ffbd]"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-500 dark:text-[#98A1C0]",children:[n.symbol," per ",t.symbol]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-[#98A1C0] mb-2",children:"Max price"}),e.jsx("input",{type:"text",value:D.max,onChange:oe=>_(Ne=>({...Ne,max:oe.target.value})),placeholder:"∞",className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl text-lg font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none focus:ring-2 focus:ring-[#00ffbd]"}),e.jsxs("div",{className:"mt-1 text-sm text-gray-500 dark:text-[#98A1C0]",children:[n.symbol," per ",t.symbol]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Me,className:"flex-1 p-4 rounded-xl font-medium text-center border border-[#00ffbd] text-[#00ffbd] hover:bg-[#00ffbd]/10 bg-white dark:bg-transparent",children:"Back"}),e.jsx("button",{onClick:we,disabled:!A,className:`flex-1 p-4 rounded-xl font-medium text-center ${A?"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black":"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed"}`,children:"Continue"})]})]}),y==="deposit-amounts"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd] flex items-center justify-center text-xs font-medium text-black",children:st(t).slice(0,3)}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[st(t)," / ",st(n)]}),e.jsx("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:"v3"}),e.jsxs("div",{className:"px-2 py-1 rounded bg-gray-100 dark:bg-[#131A2A] text-xs font-medium text-gray-900 dark:text-white",children:[c/1e4,"%"]})]}),e.jsx("button",{onClick:()=>E(!1),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]})}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Full range"}),e.jsx("button",{onClick:()=>g("set-price"),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-sm font-medium text-gray-900 dark:text-white",children:"Edit"})]}),B==="full"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:["The price of ",st(t)," can go from 0 to ∞ relative to ",st(n)]}),ne(),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Min Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"0"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[st(n)," per ",st(t)]})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-1",children:"Max Price"}),e.jsx("div",{className:"text-2xl font-medium text-gray-900 dark:text-white",children:"∞"}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[st(n)," per ",st(t)]})]})]})]})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-white dark:bg-[#0a0b0f] border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsx("h3",{className:"text-lg font-medium mb-4 text-gray-900 dark:text-white",children:"Deposit tokens"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mb-4",children:"Specify the token amounts for your liquidity contribution."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl border border-[#00ffbd]/10",children:[e.jsx("input",{type:"text",value:l,onChange:oe=>xe(oe.target.value),placeholder:"0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(t),alt:t.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.symbol})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:["Balance: ",Fe(ee)," ",t.symbol]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-[#131A2A] rounded-xl border border-[#00ffbd]/10",children:[e.jsx("input",{type:"text",value:o,onChange:oe=>pe(oe.target.value),placeholder:"0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-[#98A1C0] focus:outline-none"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(n),alt:n.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:n.symbol})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0]",children:["Balance: ",Fe(Y)," ",n.symbol]})]})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Me,className:"flex-1 p-4 rounded-xl font-medium text-center border border-[#00ffbd] text-[#00ffbd] hover:bg-[#00ffbd]/10 bg-white dark:bg-transparent",children:"Back"}),e.jsx("button",{onClick:ce,disabled:!l||!o,className:`flex-1 p-4 rounded-xl font-medium text-center ${!l||!o?"bg-gray-100 dark:bg-[#131A2A] text-gray-400 dark:text-[#98A1C0] cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black"}`,children:"Create Pool"})]})]})]})]}),e.jsx(ir,{isOpen:C,onClose:()=>E(!1),onSelect:re,selectedToken:w==="token0"?t:n,excludeToken:w==="token0"?n:t}),e.jsx(me,{appear:!0,show:b,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>{(y==="completed"||y==="error")&&$(!1)},children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[j?"Error Creating Pool":"Creating Pool",!j&&t&&n&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[t.symbol,"/",n.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[["preparing","approval","creating","confirming","completed"].map(oe=>{const Ne=y===oe,Ce=y==="completed"||["completed","confirming","creating","approval"].indexOf(y)>["completed","confirming","creating","approval"].indexOf(oe);return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${Ne&&!j?"bg-[#00ffbd]/10 text-[#00ffbd]":Ce?"text-[#00ffbd]":j&&y===oe?"bg-red-500/10 text-red-500":"text-gray-500 dark:text-[#5D6785]"}`,children:[$u[oe.charAt(0).toUpperCase()+oe.slice(1)]?.(),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white capitalize",children:oe}),Ne&&!j&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:[oe==="preparing"&&"Preparing transaction...",oe==="approval"&&`Approving ${t?.symbol} and ${n?.symbol}`,oe==="creating"&&`Creating ${t?.symbol}/${n?.symbol} pool`,oe==="confirming"&&"Waiting for confirmation...",oe==="completed"&&`Successfully created ${t?.symbol}/${n?.symbol} pool!`]})]})]},oe)}),j&&e.jsx("div",{className:"p-4 bg-red-500/10 rounded-xl text-red-500 text-sm",children:j})]}),(y==="completed"||j)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>$(!1),className:"w-full p-4 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black rounded-xl font-medium",children:"Close"})})]})})})})]})}),e.jsx(me,{appear:!0,show:L,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>S(!1),children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-[#00ffbd]/20",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-white text-center",children:"How was your experience?"}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(oe=>e.jsx("button",{onClick:()=>{console.log("User rated:",oe),S(!1)},className:"p-2 hover:bg-[#00ffbd]/10 rounded-full transition-colors",children:e.jsx(Dt,{size:24,className:oe<=3?"text-yellow-500":"text-[#00ffbd]"})},oe))})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>S(!1),className:"w-full p-4 bg-gray-100 dark:bg-[#131A2A] hover:bg-gray-200 dark:hover:bg-[#1c2433] text-gray-900 dark:text-white rounded-xl font-medium",children:"Close"})})]})})})})]})}),e.jsx(me,{appear:!0,show:V,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>P(!1),children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-[#00ffbd]/20",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-white",children:"Set Price Range"}),e.jsx("div",{className:"mt-4 space-y-4",children:Yt.getPriceRangePresets().map(oe=>e.jsxs("button",{onClick:()=>{if(oe.value==="full"){const{tickLower:Ne,tickUpper:Ce}=Yt.getFullRangeTicks(c);O(Ne),U(Ce)}else{const{tickLower:Ne,tickUpper:Ce}=Yt.getPriceRangeTicks({basePrice:Number(o)/Number(l),lowerPricePercent:oe.lowerPricePercent,upperPricePercent:oe.upperPricePercent,decimals0:t?.decimals,decimals1:n?.decimals,feeAmount:c});O(Ne),U(Ce)}P(!1)},className:"w-full p-4 text-left rounded-xl bg-[#131A2A] hover:bg-[#1c2433] border border-[#00ffbd]/10 transition-colors",children:[e.jsx("div",{className:"text-base font-semibold text-white",children:oe.label}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-[#98A1C0] mt-1",children:oe.description})]},oe.value))})]})})})})]})})]})}function Go({isOpen:a,onClose:t,onSelect:s}){const n=ws(),[r,l]=i.useState([]),[d,o]=i.useState(!1),[m,c]=i.useState(""),[u,x]=i.useState("");i.useEffect(()=>{(async()=>{if(a){o(!0),c("");try{const v=await n.getAllPools();if(console.log("Factory pools:",v),v&&v.length>0){const E=(await Promise.all(v.map(async w=>{try{console.log("Fetching data for pool:",w);const p=await n.getPoolInfoByAddress(w);if(!p)return console.log("No pool info found for:",w),null;const[y,g]=await Promise.all([aa(p.token0),aa(p.token1)]);return console.log("Pool info found:",{token0:y?.symbol,token1:g?.symbol,reserves:p.reserves}),{...p,token0:y,token1:g,pairAddress:w,reserves:{...p.reserves,reserve0Formatted:de(p.reserves?.reserve0||"0",y?.decimals||18),reserve1Formatted:de(p.reserves?.reserve1||"0",g?.decimals||18)}}}catch(p){return console.error("Error fetching pool data:",p),null}}))).filter(w=>w!==null);console.log("Setting pools:",E),l(E)}}catch(v){console.error("Error loading pools:",v),c("Failed to load pools")}finally{o(!1)}}})()},[a,n]);const f=r.filter(N=>{const v=u.toLowerCase();return N.token0?.symbol?.toLowerCase().includes(v)||N.token1?.symbol?.toLowerCase().includes(v)||N.pairAddress.toLowerCase().includes(v)});return e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(le.Panel,{className:"w-full max-w-2xl rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Select Pool"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ba,{className:"text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search by token symbol or pool address...",value:u,onChange:N=>x(N.target.value),className:"w-full px-4 py-2 pl-10 bg-white/5 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-800 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white"})]}),e.jsx("div",{className:"overflow-y-auto max-h-[60vh] space-y-2 pr-2 custom-scrollbar",children:d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#00ffbd] mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Loading pools..."})]}):m?e.jsx("div",{className:"text-center py-8 text-red-500",children:m}):f.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:r.length===0?"No pools found":"No pools match your search"}),r.length>0&&e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Try searching with a different term"})]}):f.map(N=>e.jsxs("button",{onClick:()=>s(N),className:"w-full p-6 bg-white/5 dark:bg-[#2d2f36] hover:bg-gray-50 dark:hover:bg-[#2d2f36]/80 rounded-xl border border-gray-200 dark:border-gray-800 transition-colors text-left",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-3",children:[e.jsx("img",{src:Be(N.token0),alt:N.token0?.symbol||"ERC20 Token",className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:v=>{v.target.onerror=null,v.target.src="/token-default.png"}}),e.jsx("img",{src:Be(N.token1),alt:N.token1?.symbol||"ERC20 Token",className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:v=>{v.target.onerror=null,v.target.src="/token-default.png"}})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white text-lg",children:[N.token0?.symbol||"ERC20 Token","/",N.token1?.symbol||"ERC20 Token"]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[N.token0?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:N.reserves.reserve0Formatted})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[N.token1?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-base font-medium text-gray-900 dark:text-white",children:N.reserves.reserve1Formatted})]})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 truncate",children:N.pairAddress})]},N.pairAddress))})]})})]})}const Ru=[{address:"ETH",symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:je.WETH,symbol:"WETH",name:"Wrapped Ethereum",decimals:18,logo:"/eth.png"},{address:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:je.USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],Ua=a=>{const t=Ru.find(s=>s.address?.toLowerCase()===a?.address?.toLowerCase());return t?t.logo:a?.logo||a?.logoIpfs?a.logo||wt(a.logoIpfs):"/token-default.png"},hi=({token:a})=>{const{address:t}=Oe(),[s,n]=i.useState("0"),[r,l]=i.useState(!0);if(i.useEffect(()=>{(async()=>{if(!(!t||!a?.address)){l(!0);try{const m=new he(window.ethereum),c=new J(a.address,["function balanceOf(address) view returns (uint256)","function decimals() view returns (uint8)"],m),[u,x]=await Promise.all([c.balanceOf(t),c.decimals()]),f=de(u,x);console.log(`Balance loaded for ${a.symbol}:`,{raw:u.toString(),formatted:f,decimals:x}),n(f)}catch(m){console.error(`Error loading ${a.symbol} balance:`,m)}finally{l(!1)}}})()},[t,a]),r)return e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Loading balance..."});const d=Number(s).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:a.symbol==="USDC"?2:6});return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",d," ",a.symbol]})};function Ou(){const{address:a}=Oe(),t=ws(),[s,n]=i.useState(null),[r,l]=i.useState(""),[d,o]=i.useState(""),[m,c]=i.useState(!1),[u,x]=i.useState(!1),[f,N]=i.useState(null),v=Ct.useRef(null);Ct.useEffect(()=>{const p=async()=>{if(!(!s||!f))try{const y=await t.getPoolInfo(s.token0.address,s.token1.address);if(!y||!y.reserve0||!y.reserve1)return;if(f==="token0"&&r&&r!=="0"){const j=Ie(r,s.token0.decimals)*y.reserve1/y.reserve0,T=de(j,s.token1.decimals);o(T)}else if(f==="token1"&&d&&d!=="0"){const j=Ie(d,s.token1.decimals)*y.reserve0/y.reserve1,T=de(j,s.token0.decimals);l(T)}}catch(y){console.error("Error calculating amounts:",y)}};return v.current&&clearTimeout(v.current),v.current=setTimeout(p,500),()=>{v.current&&clearTimeout(v.current)}},[s,r,d,f,t]);const C=p=>{N("token0"),l(p.target.value),(!p.target.value||p.target.value==="0")&&o("")},E=p=>{N("token1"),o(p.target.value),(!p.target.value||p.target.value==="0")&&l("")},w=async()=>{if(!a){M.error("Please connect your wallet");return}if(!s||!r||!d){M.error("Please fill in all fields");return}c(!0);try{const p=Ie(r,s.token0.decimals),y=Ie(d,s.token1.decimals),j=await new he(window.ethereum).getSigner(),T=new J(s.token0.address,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)"],j),b=new J(s.token1.address,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)"],j),$=await T.allowance(a,t.router.address),L=await b.allowance(a,t.router.address);if($<p)try{M.loading("Approving "+s.token0.symbol+"...",{id:"approve0"}),await(await T.approve(t.router.address,Mt)).wait(),M.success(s.token0.symbol+" approved successfully",{id:"approve0"})}catch{M.error("Failed to approve "+s.token0.symbol,{id:"approve0"}),c(!1);return}if(L<y)try{M.loading("Approving "+s.token1.symbol+"...",{id:"approve1"}),await(await b.approve(t.router.address,Mt)).wait(),M.success(s.token1.symbol+" approved successfully",{id:"approve1"})}catch{M.error("Failed to approve "+s.token1.symbol,{id:"approve1"}),c(!1);return}const S=await T.allowance(a,t.router.address),A=await b.allowance(a,t.router.address);if(S<p||A<y){M.error("Approval process incomplete. Please try again."),c(!1);return}await new Promise(F=>setTimeout(F,2e3));const h=p*99n/100n,I=y*99n/100n;M.loading("Adding liquidity...",{id:"add-liquidity"});const O=await t.addLiquidity(s.token0.address,s.token1.address,p,y,h,I,a);console.log("Liquidity added:",O),M.success("Liquidity added successfully!",{id:"add-liquidity"}),l(""),o(""),n(null)}catch(p){console.error("Add liquidity error:",p),M.error(p.message.includes("insufficient")?"Insufficient balance for transaction":p.message.includes("chain")?"Please switch to a supported network":`Failed to add liquidity: ${p.message}`,{id:"add-liquidity"})}finally{c(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Add Liquidity"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Ua(s.token0),alt:s.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Ua(s.token1),alt:s.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[s.token0.symbol,"/",s.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Ua(s.token0),alt:s.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.token0.symbol})]}),e.jsx(hi,{token:s.token0})]}),e.jsx("input",{type:"number",value:r,onChange:C,onFocus:()=>N("token0"),placeholder:"0.0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 bg-white/5 dark:bg-[#2d2f36] rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})}),e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Ua(s.token1),alt:s.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s.token1.symbol})]}),e.jsx(hi,{token:s.token1})]}),e.jsx("input",{type:"number",value:d,onChange:E,onFocus:()=>N("token1"),placeholder:"0.0",className:"w-full bg-transparent text-2xl font-medium text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none"})]})]}),e.jsx("button",{onClick:w,disabled:m||!r||!d,className:"w-full mt-6 px-6 py-3 bg-[#00ffbd] hover:bg-[#00e6a9] disabled:bg-gray-400 text-black font-medium rounded-xl transition-colors flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-black border-t-transparent rounded-full animate-spin"}),"Adding Liquidity..."]}):"Add Liquidity"})]}),e.jsx(Go,{isOpen:u,onClose:()=>x(!1),onSelect:p=>{n(p),x(!1),l(""),o("")}})]})}function _u(){const{address:a}=Oe(),t=ws(),[s,n]=i.useState(null),[r,l]=i.useState("0"),[d,o]=i.useState(""),[m,c]=i.useState(!1),[u,x]=i.useState(!1),[f,N]=i.useState("0"),[v,C]=i.useState("0");i.useEffect(()=>{let w=!0;return(async()=>{if(!(!s||!a||!s.pairAddress))try{const y=new he(window.ethereum),g=new J(s.pairAddress,["function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function allowance(address, address) view returns (uint256)"],y),j=await t.getPoolInfo(s.token0.address,s.token1.address),[T,b]=await Promise.all([g.balanceOf(a),g.totalSupply()]);if(!w)return;const $=T*BigInt(1e4)/b,L=Number($)/100,S=j.reserve0*T/b,A=j.reserve1*T/b;l(ze(T)),N(de(S,s.token0.decimals)),C(de(A,s.token1.decimals)),n(h=>({...h,totalSupply:ze(b),userShare:L}))}catch(y){if(!w)return;console.error("Error fetching pool info:",y),M.error("Failed to fetch pool information")}})(),()=>{w=!1}},[s?.pairAddress,a,t]),i.useEffect(()=>{if(!(!s||!r||!d||!f||!v))try{const w=parseFloat(d);if(isNaN(w)||w<=0||w>100)return;const p=parseFloat(f),y=parseFloat(v),g=p*w/100,j=y*w/100;N(g.toFixed(s.token0.decimals)),C(j.toFixed(s.token1.decimals))}catch(w){console.error("Error calculating token amounts:",w)}},[d,r,s?.token0?.decimals]);const E=async()=>{if(!a){M.error("Please connect your wallet");return}if(!s||!d){M.error("Please select a pool and enter amount to remove");return}c(!0);try{const p=await new he(window.ethereum).getSigner(),g=Ut(r)*BigInt(Math.floor(parseFloat(d)))/100n,j=Ie(f,s.token0.decimals)*99n/100n,T=Ie(v,s.token1.decimals)*99n/100n;console.log("Remove Liquidity Params:",{lpTokensToRemove:g.toString(),amount0Min:j.toString(),amount1Min:T.toString()});const b=new J(s.pairAddress,["function approve(address, uint256) returns (bool)","function allowance(address, address) view returns (uint256)"],p);await b.allowance(a,t.router.address)<g&&(M.loading("Approving LP tokens...",{id:"approve-lp"}),await(await b.approve(t.router.address,Mt)).wait(),M.success("LP tokens approved",{id:"approve-lp"})),M.loading("Removing liquidity...",{id:"remove-liquidity"});const L=await t.removeLiquidity(s.token0.address,s.token1.address,g,j,T,a);console.log("Liquidity removed:",L),M.success("Liquidity removed successfully!",{id:"remove-liquidity"}),o("");const S=await t.getPoolInfo(s.token0.address,s.token1.address);n(A=>({...A,...S}))}catch(w){console.error("Remove liquidity error:",w),M.error(w.message.includes("insufficient")?"Insufficient balance for transaction":w.message.includes("chain")?"Please switch to a supported network":`Failed to remove liquidity: ${w.message}`,{id:"remove-liquidity"})}finally{c(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(s.token0),alt:s.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Be(s.token1),alt:s.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[s.token0.symbol,"/",s.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Your Pool Tokens"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[parseFloat(r).toFixed(6)," LP Tokens"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Your Pool Share"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s.userShare?`${s.userShare.toFixed(2)}%`:"0%"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount to Remove"}),e.jsx("div",{className:"flex gap-2",children:[25,50,75,100].map(w=>e.jsxs("button",{onClick:()=>o(w.toString()),className:`flex-1 px-3 py-2 rounded-xl text-sm font-medium transition-all
                    ${d===w.toString()?"bg-[#00ffbd] text-black":"bg-white/5 dark:bg-[#2d2f36] text-gray-700 dark:text-gray-300 hover:bg-[#00ffbd]/10"}
                  `,children:[w,"%"]},w))}),e.jsx("input",{type:"number",value:d,onChange:w=>{const p=w.target.value;(p===""||parseFloat(p)>=0&&parseFloat(p)<=100)&&o(p)},placeholder:"Enter percentage (0-100)",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl text-gray-900 dark:text-white placeholder-gray-500"})]}),e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"You Will Receive"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s.token0),alt:s.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.token0.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:parseFloat(f).toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s.token1),alt:s.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.token1.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:parseFloat(v).toFixed(6)})]})]})]}),e.jsx("button",{onClick:E,disabled:m||!d||parseFloat(d)<=0,className:`
              w-full px-4 py-3 rounded-xl font-medium text-black
              ${m||!d||parseFloat(d)<=0?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed":"bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors"}
            `,children:m?"Removing Liquidity...":"Remove Liquidity"})]}),e.jsx(Go,{isOpen:u,onClose:()=>x(!1),onSelect:w=>{n(w),x(!1),o("")}})]})}function Uu(){const[a,t]=i.useState("add");return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Manage Liquidity"}),e.jsxs("div",{className:"flex space-x-1 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-1 mb-6",children:[e.jsx("button",{onClick:()=>t("add"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${a==="add"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Add Liquidity"}),e.jsx("button",{onClick:()=>t("remove"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${a==="remove"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Remove Liquidity"})]}),e.jsx("div",{className:"mt-4",children:a==="add"?e.jsx(Ou,{}):e.jsx(_u,{})})]})}const ms={UNICHAIN_TESTNET:{id:1301,name:"Unichain Testnet",blockscoutUrl:"https://unichain-sepolia.blockscout.com"},UNICHAIN_MAINNET:{id:130,name:"Unichain Mainnet",blockscoutUrl:"https://unichain.blockscout.com"},MONAD_TESTNET:{id:10143,name:"Monad Testnet",blockscoutUrl:"https://explorer.monad.network"}},Vr={10143:[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/weth.png"},{address:"0xf817257fed379853cDe0fa4F97AB987181B1E5Ea",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:"0x88b8E2161DEDC77EF4ab7585569D2415a1C1055D",symbol:"USDT",name:"Tether USD",decimals:6,logo:"/usdt.png"}],1301:[{address:ve[1301].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/usdc.png"},{address:ve[1301].USDT,symbol:"USDT",name:"Test USDT",decimals:6,logo:"/usdt.png"}],130:[{address:ve[130].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/eth.png"},{address:ve[130].USDT,symbol:"USDT",name:"USDT",decimals:6,logo:"/usdt.png"}]},Zt="uniswap_pools_cache_v1",Wu=30*60*1e3,Wa=async(a,t,s)=>{try{if(!a)return console.warn("Token address is undefined in getEnhancedTokenMetadata"),t;const n=Vr[s]?.find(d=>d.address?.toLowerCase()===a?.toLowerCase());if(n)return console.log("Found common token:",n),{...t,...n,address:a,logo:n.logo,verified:!0,decimals:n.decimals||t?.decimals||18};const r=ve[s]?.WETH?.toLowerCase();if(a?.toLowerCase()===r)return{...t,symbol:s===10143?"MON":"ETH",name:s===10143?"Monad":"Ethereum",decimals:18,logo:s===10143?"/monad.png":"/eth.png",verified:!0,address:a};const l=s===ms.UNICHAIN_TESTNET.id?ms.UNICHAIN_TESTNET.blockscoutUrl:s===ms.UNICHAIN_MAINNET.id?ms.UNICHAIN_MAINNET.blockscoutUrl:ms.MONAD_TESTNET.blockscoutUrl;try{const d=await at(a);if(d){const o=d.logo||Be({...d,address:a},s);return{...t,name:d.name||t?.name,symbol:d.symbol||t?.symbol,decimals:d.decimals||t?.decimals||18,logo:o,logoIpfs:d.logoIpfs,address:a,verified:!0}}}catch(d){console.log("Firebase fetch failed:",d)}try{const d=await fetch(`${l}/api/v2/tokens/${a}`);if(d.ok){const o=await d.json();return{...t,name:o.name||t?.name,symbol:o.symbol||t?.symbol,decimals:parseInt(o.decimals)||t?.decimals||18,logo:o.logo||Be({address:a},s),address:a,verified:!0}}}catch{console.log("Blockscout API fetch failed, falling back to existing metadata")}return{...t,logo:t?.logo||Be({address:a},s),address:a,verified:!1}}catch(n){return console.error("Error in enhanced token metadata:",n),t}},pi={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Hu={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},qu={hidden:{opacity:0,y:-20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}}},zu={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},Vu={hidden:{opacity:0,x:-10},show:{opacity:1,x:0,transition:{type:"spring",stiffness:100,damping:15}}},Gu=({pool:a,onSelect:t})=>e.jsxs(R.button,{variants:Hu,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>t(a),className:"w-full px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx(R.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},src:a.token0.logo,alt:a.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx(R.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.1},src:a.token1.logo,alt:a.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs(R.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"font-medium text-gray-900 dark:text-white",children:[a.token0.symbol,"/",a.token1.symbol]}),e.jsxs(R.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-sm text-gray-500 dark:text-gray-400",children:[a.token0.name,"/",a.token1.name]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[a.tvl&&e.jsxs(R.span,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm text-gray-500 dark:text-gray-400",children:["TVL: $",Number(a.tvl).toLocaleString()]}),e.jsx(R.svg,{whileHover:{x:5},className:"w-5 h-5 text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),Yu=()=>e.jsxs(R.div,{variants:Vu,className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"w-32 h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),Qu=async a=>{try{const t=new he(window.ethereum),s=await t.getNetwork().then(N=>Number(N.chainId));if(s===ms.MONAD_TESTNET.id){const N=typeof a=="string"?a:a.address;if(!gt(N))return console.warn("Invalid pool address:",N),null;const v=new ps(["function token0() external view returns (address)","function token1() external view returns (address)","function getReserves() external view returns (uint112 reserve0, uint112 reserve1, uint32 blockTimestampLast)"]);try{const[C,E,w]=await Promise.all([t.call({to:N,data:v.encodeFunctionData("token0")}),t.call({to:N,data:v.encodeFunctionData("token1")}),t.call({to:N,data:v.encodeFunctionData("getReserves")})]),p=$s("0x"+C.slice(26)),y=$s("0x"+E.slice(26)),[g,j]=v.decodeFunctionResult("getReserves",w),[T,b]=await Promise.all([Wa(p,null,s),Wa(y,null,s)]),$=ve[s]?.WETH?.toLowerCase(),L=p.toLowerCase()===$,S=y.toLowerCase()===$,A=L?{...T,symbol:"MON",name:"Monad",logo:"/monad.png",isWETH:!0,originalSymbol:"WMONAD"}:T,h=S?{...b,symbol:"MON",name:"Monad",logo:"/monad.png",isWETH:!0,originalSymbol:"WMONAD"}:b;return{token0:{...A,address:p,isWETH:L},token1:{...h,address:y,isWETH:S},pairAddress:N,chainId:s,reserves:{reserve0:g.toString(),reserve1:j.toString(),reserve0Formatted:de(g,A?.decimals||18),reserve1Formatted:de(j,h?.decimals||18)}}}catch(C){return console.error("Error fetching pair data:",C),null}}const[n,r]=await Promise.all([Wa(a.token0.address,a.token0,a.chainId),Wa(a.token1.address,a.token1,a.chainId)]),l=ve[a.chainId]?.USDT,d=n?.address?.toLowerCase()===l?.toLowerCase(),o=r?.address?.toLowerCase()===l?.toLowerCase(),m=ve[a.chainId]?.WETH,c=n?.address?.toLowerCase()===m?.toLowerCase(),u=r?.address?.toLowerCase()===m?.toLowerCase(),x=c?{...n,symbol:"ETH",name:"Ethereum",logo:"/eth.png",isWETH:!0,originalSymbol:"WETH"}:d?{...n,logo:"/usdt.png"}:{...n,logo:n?.logo||Be(n)},f=u?{...r,symbol:"ETH",name:"Ethereum",logo:"/eth.png",isWETH:!0,originalSymbol:"WETH"}:o?{...r,logo:"/usdt.png"}:{...r,logo:r?.logo||Be(r)};return{token0:{...x,address:a.token0.address,isWETH:c},token1:{...f,address:a.token1.address,isWETH:u},pairAddress:a.address,chainId:a.chainId,reserves:{...a.reserves,reserve0Formatted:de(a.reserves?.reserve0||"0",x?.decimals||18),reserve1Formatted:de(a.reserves?.reserve1||"0",f?.decimals||18)}}}catch(t){return console.error("Error processing pool data:",t),null}};function Yo({isOpen:a,onClose:t,onSelect:s}){const n=Pt();Oe();const[r,l]=i.useState([]),[d,o]=i.useState(!1),[m,c]=i.useState(""),[u,x]=i.useState(""),[f,N]=i.useState([]),[v,C]=i.useState(null),[E,w]=i.useState(0),[p,y]=i.useState(0);i.useEffect(()=>{const $=()=>{if(document.visibilityState==="visible"){const L=j(v);L&&(l(L.pools),y(L.totalPairs),w(L.pools.length))}};return document.addEventListener("visibilitychange",$),window.addEventListener("focus",$),()=>{document.removeEventListener("visibilitychange",$),window.removeEventListener("focus",$)}},[v]);const g=($,L)=>{try{if(!$||!L)return;const S={pools:$,chainId:L,timestamp:Date.now(),totalPairs:p,version:"1.0"};localStorage.setItem(Zt,JSON.stringify(S)),sessionStorage.setItem(Zt,JSON.stringify(S)),console.log("Saved pools to cache:",$.length)}catch(S){console.warn("Failed to save pools to cache:",S)}},j=$=>{try{if(!$)return null;const L=localStorage.getItem(Zt),S=sessionStorage.getItem(Zt),A=JSON.parse(L||S);return A?A.version==="1.0"&&A.chainId===$&&A.timestamp>Date.now()-Wu&&Array.isArray(A.pools)&&A.pools.length>0?(A.pools.length>0&&g(A.pools,$),console.log("Retrieved pools from cache:",A.pools.length),{pools:A.pools,totalPairs:A.totalPairs}):(localStorage.removeItem(Zt),sessionStorage.removeItem(Zt),null):null}catch(L){return console.warn("Failed to get pools from cache:",L),localStorage.removeItem(Zt),sessionStorage.removeItem(Zt),null}};i.useEffect(()=>((async()=>{if(window.ethereum)try{const L=await window.ethereum.request({method:"eth_chainId"});C(parseInt(L,16))}catch(L){console.error("Error getting chain ID:",L)}})(),window.ethereum&&window.ethereum.on("chainChanged",L=>{C(parseInt(L,16))}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",()=>{})}),[]),i.useEffect(()=>{(async()=>{if(!(!a||!window.ethereum)){o(!0),c("");try{const L=new he(window.ethereum),S=await L.getNetwork().then(h=>Number(h.chainId)),A=j(S);if(A){l(A.pools),y(A.totalPairs),w(A.pools.length),o(!1),Date.now()-JSON.parse(localStorage.getItem(Zt)||"{}").timestamp>3e5&&T(S,L);return}await T(S,L)}catch(L){console.error("Error loading pools:",L),c(L.message||"Failed to load pools. Please try again.")}finally{o(!1)}}})()},[a]);const T=async($,L)=>{l([]),w(0);const S=ve[$]?.factory;if(!S)throw new Error("Factory address not found for current network");const A=new J(S,["function allPairsLength() view returns (uint)","function allPairs(uint) view returns (address)"],L),h=await A.allPairsLength();y(Number(h)),console.log("Total pairs:",h.toString());const I=0n,O=h,F=Array.from({length:Number(O-I)},(D,_)=>I+BigInt(_)),U=5,V=[];for(let D=0;D<F.length;D+=U)V.push(F.slice(D,D+U));const P=new ps(["function token0() view returns (address)","function token1() view returns (address)","function getReserves() view returns (uint112, uint112, uint32)"]),B=new ps(["function symbol() view returns (string)","function name() view returns (string)","function decimals() view returns (uint8)"]),k=[];for(const D of V)try{const _=await Promise.all(D.map(H=>A.allPairs(H)));for(const H of _)try{const[X,z,se]=await Promise.all([L.call({to:H,data:P.encodeFunctionData("token0")}),L.call({to:H,data:P.encodeFunctionData("token1")}),L.call({to:H,data:P.encodeFunctionData("getReserves")})]),ee=$s("0x"+X.slice(26)),te=$s("0x"+z.slice(26)),[Y,W]=P.decodeFunctionResult("getReserves",se),Q=ve[$]?.WETH?.toLowerCase(),G=ee.toLowerCase()===Q,q=te.toLowerCase()===Q,[Z,ie,ne,K]=await Promise.all([G?Promise.resolve("MON"):L.call({to:ee,data:B.encodeFunctionData("symbol")}).then(we=>B.decodeFunctionResult("symbol",we)[0]).catch(()=>"Unknown"),q?Promise.resolve("MON"):L.call({to:te,data:B.encodeFunctionData("symbol")}).then(we=>B.decodeFunctionResult("symbol",we)[0]).catch(()=>"Unknown"),G?Promise.resolve("Monad"):L.call({to:ee,data:B.encodeFunctionData("name")}).then(we=>B.decodeFunctionResult("name",we)[0]).catch(()=>"Unknown Token"),q?Promise.resolve("Monad"):L.call({to:te,data:B.encodeFunctionData("name")}).then(we=>B.decodeFunctionResult("name",we)[0]).catch(()=>"Unknown Token")]),xe=Vr[$]?.find(we=>we.address?.toLowerCase()===ee?.toLowerCase()),pe=Vr[$]?.find(we=>we.address?.toLowerCase()===te?.toLowerCase()),ke={token0:{address:ee,symbol:Z,name:ne,decimals:xe?.decimals||18,logo:xe?.logo||(G?"/monad.png":"/token-default.png"),isWETH:G},token1:{address:te,symbol:ie,name:K,decimals:pe?.decimals||18,logo:pe?.logo||(q?"/monad.png":"/token-default.png"),isWETH:q},pairAddress:H,chainId:$,reserves:{reserve0:Y.toString(),reserve1:W.toString(),reserve0Formatted:de(Y,xe?.decimals||18),reserve1Formatted:de(W,pe?.decimals||18)}};k.push(ke),l([...k]),w(k.length)}catch(X){console.warn(`Error processing pair ${H}:`,X);continue}}catch(_){console.warn("Error processing batch:",_);continue}k.length===0&&c("No valid pools found. Please try again."),k.length>0&&g(k,$)};i.useEffect(()=>{const L=setTimeout(async()=>{if(!u){N([]);return}if(u.length>=42&&gt(u))try{o(!0);const A=await n.getPoolInfoByAddress(u);if(A){const[h,I]=await Promise.all([at(A.token0.address).catch(()=>null),at(A.token1.address).catch(()=>null)]);h&&(A.token0={...A.token0,name:h.name,symbol:h.symbol,decimals:h.decimals||18,logo:h.logo,logoIpfs:h.logoIpfs}),I&&(A.token1={...A.token1,name:I.name,symbol:I.symbol,decimals:I.decimals||18,logo:I.logo,logoIpfs:I.logoIpfs});const O=await Qu({...A,address:u});if(O){console.log("Found pool by address:",O),N([O]),o(!1);return}}}catch(A){console.error("Error fetching specific pool:",A)}finally{o(!1)}const S=r.filter(A=>{if(!A?.token0?.symbol||!A?.token1?.symbol||!A?.pairAddress)return!1;const h=u.toLowerCase();return A.token0.symbol.toLowerCase().includes(h)||A.token1.symbol.toLowerCase().includes(h)||A.pairAddress.toLowerCase().includes(h)});N(S)},300);return()=>clearTimeout(L)},[u,r,n]);const b=u?f:r;return e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(le.Panel,{className:"mx-auto max-w-2xl w-full bg-white dark:bg-[#1a1b1f] rounded-2xl shadow-xl",children:e.jsxs(R.div,{variants:pi,initial:"hidden",animate:"show",className:"p-6",children:[e.jsxs(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4 flex items-center justify-between",children:[e.jsx("span",{children:"Select a Pool"}),E>0&&p>0&&e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Loaded ",E,"/",p]})]}),v&&e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4",children:[Object.values(ms).map($=>v===$.id?e.jsxs("div",{className:"px-4 py-2 rounded-xl bg-[#00ffbd]/10 border border-[#00ffbd]/20 text-[#00ffbd] text-sm inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#00ffbd] animate-pulse"}),$.name]},$.id):null),!Object.values(ms).some($=>$.id===v)&&e.jsx("div",{className:"px-4 py-2 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 text-sm",children:"Please switch to a supported network (Unichain or Monad Testnet)"})]}),m&&e.jsx(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-4 p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/30 text-red-700 dark:text-red-400",children:m}),e.jsxs(R.div,{variants:qu,className:"relative mb-4",children:[e.jsx("input",{type:"text",value:u,onChange:$=>x($.target.value),placeholder:"Search by token name or address...",className:"w-full px-4 py-3 pl-10 bg-white/10 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-[#00ffbd]/50 focus:border-[#00ffbd] outline-none transition-colors font-mono",style:{WebkitAppearance:"none",MozAppearance:"none"}}),e.jsx(Ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none"})]}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto overflow-x-hidden pr-2 custom-scrollbar",style:{scrollbarWidth:"thin",scrollbarColor:"#00ffbd #2d2f36"},children:[e.jsx("style",{children:`
                  .custom-scrollbar::-webkit-scrollbar {
                    width: 6px;
                  }
                  .custom-scrollbar::-webkit-scrollbar-track {
                    background: #2d2f36;
                    border-radius: 3px;
                  }
                  .custom-scrollbar::-webkit-scrollbar-thumb {
                    background-color: #00ffbd;
                    border-radius: 3px;
                  }
                `}),e.jsx(Ze,{mode:"wait",children:d&&r.length===0?e.jsx(R.div,{variants:zu,initial:"hidden",animate:"show",className:"space-y-2",children:[...Array(5)].map(($,L)=>e.jsx(Yu,{},L))}):m&&r.length===0?e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center py-12 text-red-500",children:m}):b.length===0?e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"text-center py-12 text-gray-500 dark:text-gray-400",children:d?"Loading pools...":"No pools found"}):e.jsx(R.div,{variants:pi,initial:"hidden",animate:"show",className:"space-y-2",children:b.map(($,L)=>e.jsx(Gu,{pool:$,onSelect:s},`${$.pairAddress}-${L}`))})})]}),d&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-[#00ffbd] h-1.5 rounded-full transition-all duration-300",style:{width:`${E/(p||1)*100}%`}})}),e.jsxs("div",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:["Loading pools... ",Math.floor(E/(p||1)*100),"%"]})]})]})})})]})}const Qo=a=>{switch(a){case 10143:return[{symbol:"MON",name:"Monad",decimals:18,logo:"/monad.png",isNative:!0},{address:"0x760AfE86e5de5fa0Ee542fc7B7B713e1c5425701",symbol:"WMONAD",name:"Wrapped Monad",decimals:18,logo:"/monad.png"},{address:"0xB5a30b0FDc5EA94A52fDc42e3E9760Cb8449Fb37",symbol:"WETH",name:"Wrapped Ether",decimals:18,logo:"/eth.png"}];case 1301:return[];case 130:return[];default:return[]}},na=(a,t)=>{if(!a)return"/token-default.png";const s=Qo(t);if(!s)return"/token-default.png";const n=s.find(r=>r.address?.toLowerCase()===a?.address?.toLowerCase()||t&&ve[t]?.WETH?.toLowerCase()===a?.address?.toLowerCase());return n?n.logo:a?.logo||a?.logoIpfs?a.logo||wt(a.logoIpfs):"/token-default.png"},fi=({token:a,chainId:t})=>{const{address:s}=Oe(),[n,r]=i.useState("0"),[l,d]=i.useState(!1),o=Pt();if(i.useEffect(()=>{(async()=>{if(!(!s||!a))try{if(d(!0),t===10143){const u=new he(window.ethereum);if(a.isNative||a.isWETH){const x=await u.getBalance(s);r(ze(x))}else{const f=await new J(a.address,["function balanceOf(address) view returns (uint256)"],u).balanceOf(s);r(de(f,a.decimals))}}else{const u=await o.getTokenBalance(a.symbol==="ETH"?"ETH":a.address,s);r(u)}}catch(u){console.error("Error fetching balance:",u),r("0")}finally{d(!1)}})()},[a,s,o,t]),!a||!s||!t)return null;const m=t===10143&&(a.isWETH||a.isNative)?"MON":a.symbol;return e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Balance:"}),l?e.jsx("div",{className:"animate-pulse bg-gray-200 dark:bg-gray-700 h-4 w-20 rounded"}):e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[Number(n).toLocaleString()," ",m]})]})},Xu=["function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)","function quote(uint amountA, uint reserveA, uint reserveB) external pure returns (uint amountB)","function getAmountOut(uint amountIn, uint reserveIn, uint reserveOut) external view returns (uint amountOut)"],Gs={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite",opacity:.2}})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})})},Zu=({isOpen:a,onClose:t,currentStep:s,pool:n,error:r,chainId:l})=>{const d=[{id:"preparing",title:"Preparing",icon:e.jsx(Gs.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(Gs.Approval,{})},{id:"adding",title:"Adding Liquidity",icon:e.jsx(Gs.Adding,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Gs.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Gs.Completed,{})}],o=!!r,m=u=>u?typeof u=="string"?u:u.message||"An unknown error occurred":"",c=()=>{if(!n)return"";const u={...n.token0,symbol:l&&n.token0.address?.toLowerCase()===ve[l]?.WETH?.toLowerCase()?"ETH":n.token0.symbol,name:l&&n.token0.address?.toLowerCase()===ve[l]?.WETH?.toLowerCase()?"Ethereum":n.token0.name},x={...n.token1,symbol:l&&n.token1.address?.toLowerCase()===ve[l]?.WETH?.toLowerCase()?"ETH":n.token1.symbol,name:l&&n.token1.address?.toLowerCase()===ve[l]?.WETH?.toLowerCase()?"Ethereum":n.token1.name};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:na(u,l),alt:u.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:na(x,l),alt:x.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{children:[u.symbol," ",x.symbol]})]})};return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[o?"Error Adding Liquidity":"Adding Liquidity",!o&&n&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:c()})]}),e.jsx("div",{className:"space-y-4",children:d.map((u,x)=>{const f=s===u.id,N=!o&&d.findIndex(C=>C.id===s)>x,v=o&&s===u.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${f&&!v?"bg-[#00ffbd]/10 text-[#00ffbd]":N?"text-[#00ffbd]":v?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[u.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.title}),f&&!o&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[u.id==="preparing"&&"Preparing transaction...",u.id==="approval"&&`Approving ${n?.token0?.symbol} and ${n?.token1?.symbol}`,u.id==="adding"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Adding liquidity to ",c()," pool"]}),u.id==="confirming"&&"Waiting for confirmation...",u.id==="completed"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully added liquidity to ",c()," pool!"]})]})]}),N&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},u.id)})}),o&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Gs.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})},Ju=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center space-x-2 mb-6 flex-wrap",children:[1,2,3,4,5,6,7,8,9].map(o=>e.jsx("button",{className:`text-3xl transition-colors ${(l||n)>=o?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,onClick:()=>{r(o),s(o),setTimeout(()=>t(),500)},onMouseEnter:()=>d(o),onMouseLeave:()=>d(0),children:"★"},o))}),e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:"How was your experience adding liquidity?"})]})})})})]})})};function Ku(){const{address:a}=Oe(),t=Pt(),[s,n]=i.useState(null),[r,l]=i.useState(""),[d,o]=i.useState(""),[m,c]=i.useState(!1),[u,x]=i.useState(!1),[f,N]=i.useState(null),[v,C]=i.useState(null),E=Ct.useRef(null),[w,p]=i.useState(!1),[y,g]=i.useState(null),[j,T]=i.useState(!1),[b,$]=i.useState(!1),[L,S]=i.useState({width:window.innerWidth,height:window.innerHeight}),[A,h]=i.useState(null);i.useState(null),rt(),i.useEffect(()=>{const V=async()=>{if(window.ethereum){const B=await new he(window.ethereum).getNetwork();C(Number(B.chainId))}};return V(),window.ethereum&&window.ethereum.on("chainChanged",()=>{V()}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",V)}},[]),i.useEffect(()=>{const V=()=>{S({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",V),()=>window.removeEventListener("resize",V)},[]);const I=V=>{console.log("User rated liquidity addition:",V)};i.useEffect(()=>{(async()=>{if(!(!s||!t))try{const P=await t.getPoolInfo(s.token0.address,s.token1.address);P&&n(B=>({...B,...P,token0:{...B.token0,...P.token0},token1:{...B.token1,...P.token1}}))}catch(P){console.error("Error loading pool info:",P)}})()},[s?.pairAddress,t]),Ct.useEffect(()=>{const V=async()=>{if(!(!s||!f))try{const P=await t.getPoolInfo(s.token0.address,s.token1.address);if(!P||!P.reserves){console.log("No pool info or reserves found");return}const B=BigInt(P.reserves.reserve0.toString()),k=BigInt(P.reserves.reserve1.toString());if(console.log("Reserves:",{reserve0:B.toString(),reserve1:k.toString()}),f==="token0"&&r&&r!=="0"){console.log("Calculating token1 amount based on token0 input:",r);const D=Ie(r,s.token0.decimals);console.log("Parsed amount0:",D.toString());const _=D*k/B;console.log("Calculated amount1:",_.toString());const H=de(_,s.token1.decimals);console.log("Formatted amount1:",H),o(H)}else if(f==="token1"&&d&&d!=="0"){console.log("Calculating token0 amount based on token1 input:",d);const D=Ie(d,s.token1.decimals);console.log("Parsed amount1:",D.toString());const _=D*B/k;console.log("Calculated amount0:",_.toString());const H=de(_,s.token0.decimals);console.log("Formatted amount0:",H),l(H)}}catch(P){console.error("Error calculating amounts:",P)}};return E.current&&clearTimeout(E.current),E.current=setTimeout(V,500),()=>{E.current&&clearTimeout(E.current)}},[s,r,d,f,t]);const O=V=>{const P=V.target.value;(P===""||/^\d*\.?\d*$/.test(P))&&(N("token0"),l(P),(!P||P==="0")&&o(""))},F=V=>{const P=V.target.value;(P===""||/^\d*\.?\d*$/.test(P))&&(N("token1"),o(P),(!P||P==="0")&&l(""))},U=async()=>{if(!a){M.error("Please connect your wallet");return}if(!s||!r||!d||!v){M.error("Please fill in all fields");return}c(!0),p(!0),g("preparing"),h(null);try{const V=new he(window.ethereum),P=await V.getNetwork().then(B=>Number(B.chainId));if(P===10143){const B=await V.getSigner(),k=ve[10143].router,D=new ps(["function addLiquidity(address tokenA, address tokenB, uint amountADesired, uint amountBDesired, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB, uint liquidity)","function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)"]),_=Math.floor(Date.now()/1e3)+60*20,H=Ie(r,s.token0.decimals),X=Ie(d,s.token1.decimals);g("approval");const z=s.token0.isWETH||s.token0.isNative,se=s.token1.isWETH||s.token1.isNative;if(z||se){const ee=z?s.token1.address:s.token0.address,te=z?X:H,Y=z?H:X;z?se||await new J(s.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],B).approve(k,X):await new J(s.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],B).approve(k,H),g("adding");const W=await B.sendTransaction({to:k,data:D.encodeFunctionData("addLiquidityETH",[ee,te,te*99n/100n,Y*99n/100n,await B.getAddress(),_]),value:Y});g("confirming"),await W.wait()}else{const ee=new J(s.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],B),te=new J(s.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],B);await ee.approve(k,H),await te.approve(k,X),g("adding");const Y=await B.sendTransaction({to:k,data:D.encodeFunctionData("addLiquidity",[s.token0.address,s.token1.address,H,X,H*99n/100n,X*99n/100n,await B.getAddress(),_])});g("confirming"),await Y.wait()}}else{const B=await V.getSigner(),k=new J(ve[P].router,Xu,B),D=Math.floor(Date.now()/1e3)+60*20,_=Ie(r,s.token0.decimals),H=Ie(d,s.token1.decimals);g("approval");const X=s.token0.isWETH,z=s.token1.isWETH;if(X||z){const se=X?s.token1.address:s.token0.address,ee=X?H:_,te=X?_:H;X?z||await new J(s.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],B).approve(ve[P].router,H):await new J(s.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],B).approve(ve[P].router,_),g("adding");const Y=await k.addLiquidityETH(se,ee,ee*99n/100n,te*99n/100n,a,D,{value:te});g("confirming"),await Y.wait()}else{const se=new J(s.token0.address,["function approve(address spender, uint256 amount) external returns (bool)"],B),ee=new J(s.token1.address,["function approve(address spender, uint256 amount) external returns (bool)"],B);await se.approve(ve[P].router,_),await ee.approve(ve[P].router,H),g("adding");const te=await k.addLiquidity(s.token0.address,s.token1.address,_,H,_*99n/100n,H*99n/100n,a,D);g("confirming"),await te.wait()}}g("completed"),T(!0),setTimeout(()=>T(!1),5e3)}catch(V){console.error("Error adding liquidity:",V),h(V.message||"Failed to add liquidity"),g("error")}finally{c(!1)}};return e.jsxs("div",{className:"space-y-6",children:[j&&e.jsx(qt,{width:L.width,height:L.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>x(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:na(s.token0,v),alt:s.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:na(s.token1,v),alt:s.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:(()=>{if(!v)return`${s.token0.symbol}/${s.token1.symbol}`;const P=Qo(v).find(D=>D.symbol==="WETH");if(!P)return`${s.token0.symbol}/${s.token1.symbol}`;const B=s.token0.address?.toLowerCase()===P.address?.toLowerCase()?"ETH":s.token0.symbol,k=s.token1.address?.toLowerCase()===P.address?.toLowerCase()?"ETH":s.token1.symbol;return`${B}/${k}`})()})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[v===10143&&(s.token0.isWETH||s.token0.isNative)?"MON":s.token0.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:r,onChange:O,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:v===10143&&(s.token0.isWETH||s.token0.isNative)?"/monad.png":na(s.token0,v),alt:v===10143&&(s.token0.isWETH||s.token0.isNative)?"MON":s.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:v===10143&&(s.token0.isWETH||s.token0.isNative)?"MON":s.token0.symbol})]})]}),e.jsx(fi,{token:s.token0,chainId:v})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[v===10143&&(s.token1.isWETH||s.token1.isNative)?"MON":s.token1.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:d,onChange:F,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:v===10143&&(s.token1.isWETH||s.token1.isNative)?"/monad.png":na(s.token1,v),alt:v===10143&&(s.token1.isWETH||s.token1.isNative)?"MON":s.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:v===10143&&(s.token1.isWETH||s.token1.isNative)?"MON":s.token1.symbol})]})]}),e.jsx(fi,{token:s.token1,chainId:v})]}),e.jsx("button",{onClick:U,disabled:m||!r||!d,className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
              ${m||!r||!d?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
            `,children:m?"Adding Liquidity...":"Add Liquidity"})]}),e.jsx(Yo,{isOpen:u,onClose:()=>x(!1),onSelect:V=>{n(V),x(!1),l(""),o("")}}),e.jsx(Zu,{isOpen:w,onClose:()=>{p(!1),g(null),h(null)},currentStep:y,pool:s,error:A,chainId:v}),e.jsx(Ju,{isOpen:b,onClose:()=>$(!1),onRate:I})]})}const xs={LOWEST:100,LOW:500,MEDIUM:3e3,HIGH:1e4},Ys={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite",opacity:.2}})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})})},ex={[xs.LOWEST]:1,[xs.LOW]:10,[xs.MEDIUM]:60,[xs.HIGH]:200},tx={factory:"0x1f984000000000000000000000000000000000003",quoter:"0x385a5cf5f83e99f7bb2852b6a19c3538b9f7658",router:"0x73855d06de49d0fe49c42638ba8d4d3638a9c62a",nftPositionManage:"0xb7610f9b733e7d45184be3a1bc8a847be6ec4f0b"},sx="0xcA11bde05977b3631167028862bE2a173976CA11",ax=["function aggregate(tuple(address target, bytes callData)[] calls) view returns (uint256 blockNumber, bytes[] returnData)","function tryAggregate(bool requireSuccess, tuple(address target, bytes callData)[] calls) view returns (tuple(bool success, bytes returnData)[])"],Ha=new ps(["function symbol() view returns (string)","function decimals() view returns (uint8)"]),yi=({token:a})=>{const[t,s]=i.useState("0"),[n,r]=i.useState(!1),l=Pt(),{address:d}=Oe();if(i.useEffect(()=>{(async()=>{if(!(!d||!a||!l))try{if(r(!0),a.address?.toLowerCase()===ve.WETH.toLowerCase()){const u=await new he(window.ethereum).getBalance(d);s(ze(u))}else{const c=await l.getTokenBalance(a.address,d);s(c)}}catch(c){console.error("Error fetching balance:",c),s("0")}finally{r(!1)}})()},[a,d,l]),!a)return null;const o=a.address?.toLowerCase()===ve.WETH.toLowerCase()?"ETH":a.symbol;return e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Balance: ",n?"Loading...":t," ",o]})},rx=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-[99998]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(9)].map((o,m)=>{const c=m+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>d(c),onMouseLeave:()=>d(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(l||n)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n===0?"Select a rating":`You rated: ${n} star${n!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{n>0&&(s(n),t())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${n>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},nx=()=>{const[a,t]=i.useState(!1),[s,n]=i.useState([]),[r,l]=i.useState(null),{address:d}=Oe(),o=i.useCallback(async(c,u)=>{try{const x=new J(sx,ax,c),f=u.flatMap(C=>[{target:C,callData:Ha.encodeFunctionData("symbol")},{target:C,callData:Ha.encodeFunctionData("decimals")}]),{returnData:N}=await x.aggregate(f),v={};for(let C=0;C<u.length;C++){const E=u[C].toLowerCase();try{const w=Ha.decodeFunctionResult("symbol",N[C*2])[0],p=Ha.decodeFunctionResult("decimals",N[C*2+1])[0];v[E]={symbol:w,decimals:p}}catch(w){console.warn(`Error decoding token info for ${E}:`,w),v[E]={symbol:"Unknown",decimals:18}}}return v}catch(x){return console.warn("Error in multicall:",x),u.reduce((f,N)=>(f[N.toLowerCase()]={symbol:"Unknown",decimals:18},f),{})}},[]),m=i.useCallback(async()=>{if(d)try{t(!0),l(null);const c=new he(window.ethereum),u=new J(tx.factory,["event PoolCreated(address indexed token0, address indexed token1, uint24 indexed fee, int24 tickSpacing, address pool)"],c),x=await c.getBlockNumber(),f=Math.max(0,x-7200*30),N=u.filters.PoolCreated(),v=await u.queryFilter(N,f),C=[...new Set(v.flatMap(p=>[p.args[0],p.args[1]]))],E=await o(c,C),w=v.map(p=>{const y=p.args[0].toLowerCase(),g=p.args[1].toLowerCase(),j=p.args[2];return{poolAddress:p.args[4],fee:j.toString(),token0:{address:p.args[0],symbol:E[y]?.symbol||"Unknown",decimals:E[y]?.decimals||18,isWETH:y===ve.WETH.toLowerCase()},token1:{address:p.args[1],symbol:E[g]?.symbol||"Unknown",decimals:E[g]?.decimals||18,isWETH:g===ve.WETH.toLowerCase()}}});n(w)}catch(c){console.error("Error fetching pools:",c),l(c.message||"Failed to fetch pools")}finally{t(!1)}},[d,o]);return i.useEffect(()=>{m()},[m]),{pools:s,loading:a,error:r,refetch:m}},ix=({isOpen:a,onClose:t,onSelect:s})=>{const{pools:n,loading:r,error:l}=nx();return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:"Select a Pool"}),e.jsx("div",{className:"mt-4 space-y-2 max-h-[60vh] overflow-y-auto",children:r?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})}):l?e.jsxs("div",{className:"text-center py-8 text-red-500",children:["Error loading pools: ",l]}):n.length>0?n.map(d=>e.jsx("button",{onClick:()=>s(d),className:"w-full p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(d.token0),alt:d.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Be(d.token1),alt:d.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[d.token0.isWETH?"ETH":d.token0.symbol,"/",d.token1.isWETH?"ETH":d.token1.symbol]}),e.jsxs("div",{className:"text-sm text-gray-500",children:[(Number(d.fee)/1e4).toFixed(2),"% fee tier"]})]})]})},d.poolAddress)):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pools available"})})]})})})})]})})},ox=({isOpen:a,onClose:t,currentStep:s,pool:n,error:r})=>{const l=[{id:"preparing",title:"Preparing",icon:e.jsx(Ys.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(Ys.Approval,{})},{id:"adding",title:"Adding Liquidity",icon:e.jsx(Ys.Adding,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Ys.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Ys.Completed,{})}],d=!!r,o=c=>c?.includes("user rejected")?"Transaction was rejected. Please try again.":c?.includes("insufficient")?"Insufficient balance for adding liquidity.":c?.includes("INSUFFICIENT_OUTPUT_AMOUNT")?"Price impact too high, try a smaller amount.":c?.includes("EXCESSIVE_INPUT_AMOUNT")?"Insufficient liquidity for this trade.":c?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred",m=()=>{if(!n)return"";const c={...n.token0,symbol:n.token0.address?.toLowerCase()===ve.WETH.toLowerCase()?"ETH":n.token0.symbol,name:n.token0.address?.toLowerCase()===ve.WETH.toLowerCase()?"Ethereum":n.token0.name},u={...n.token1,symbol:n.token1.address?.toLowerCase()===ve.WETH.toLowerCase()?"ETH":n.token1.symbol,name:n.token1.address?.toLowerCase()===ve.WETH.toLowerCase()?"Ethereum":n.token1.name};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(c),alt:c.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Be(u),alt:u.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{children:[c.symbol," ",u.symbol]})]})};return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[d?"Error Adding Liquidity":"Adding Liquidity",!d&&n&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:m()})]}),e.jsx("div",{className:"space-y-4",children:l.map((c,u)=>{const x=s===c.id,f=!d&&l.findIndex(v=>v.id===s)>u,N=d&&s===c.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${x&&!N?"bg-[#00ffbd]/10 text-[#00ffbd]":f?"text-[#00ffbd]":N?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[c.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.title}),x&&!d&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.id==="preparing"&&"Preparing transaction...",c.id==="approval"&&`Approving ${n?.token0?.symbol} and ${n?.token1?.symbol}`,c.id==="adding"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Adding liquidity to ",m()," pool"]}),c.id==="confirming"&&"Waiting for confirmation...",c.id==="completed"&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully added liquidity to ",m()," pool!"]})]})]}),f&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},c.id)})}),d&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ys.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:o(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})};function lx(){const{address:a}=Oe();Pt();const[t,s]=i.useState(null),[n,r]=i.useState(""),[l,d]=i.useState(""),[o,m]=i.useState(!1),[c,u]=i.useState(!1),[x,f]=i.useState(null);Ct.useRef(null);const[N,v]=i.useState(!1),[C,E]=i.useState(null),[w,p]=i.useState(!1),[y,g]=i.useState(!1),[j,T]=i.useState({width:window.innerWidth,height:window.innerHeight}),[b,$]=i.useState(null),[L,S]=i.useState("full"),[A,h]=i.useState(null),[I,O]=i.useState({min:"",max:""});i.useEffect(()=>{const B=()=>{T({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]);const F=B=>{r(B.target.value),f("token0")},U=B=>{d(B.target.value),f("token1")},V=async()=>{try{m(!0),v(!0),E("preparing"),$(null);const k=await new he(window.ethereum).getSigner(),D=new Yt(k),_=t.token0.address?.toLowerCase()===ve.WETH.toLowerCase()?ve.WETH:t.token0.address,H=t.token1.address?.toLowerCase()===ve.WETH.toLowerCase()?ve.WETH:t.token1.address,X=Ie(n,t.token0.decimals),z=Ie(l,t.token1.decimals),se={.01:xs.LOWEST,.05:xs.LOW,.3:xs.MEDIUM,1:xs.HIGH}[A];let ee,te;if(L==="full")ee=-887272,te=887272;else{const Z=await D.getCurrentPrice(_,H,se),ie=(100-parseFloat(I.min))/100,ne=(100+parseFloat(I.max))/100;ee=await D.priceToTick(Z*ie,t.token0.decimals,t.token1.decimals),te=await D.priceToTick(Z*ne,t.token0.decimals,t.token1.decimals);const K=ex[se];ee=Math.ceil(ee/K)*K,te=Math.floor(te/K)*K}E("approval"),await D.ensureTokenApprovals({token0:_,token1:H,amount0Desired:X,amount1Desired:z,ownerAddress:a}),E("adding");const Y=t.token0.address?.toLowerCase()===ve.WETH.toLowerCase()?X:t.token1.address?.toLowerCase()===ve.WETH.toLowerCase()?z:0n,{tokenId:W,liquidity:Q,amount0:G,amount1:q}=await D.mint({token0:_,token1:H,fee:se,tickLower:ee,tickUpper:te,amount0Desired:X,amount1Desired:z,amount0Min:0,amount1Min:0,recipient:a,deadline:Math.floor(Date.now()/1e3)+1200,value:Y});console.log("Position Created:",{tokenId:W.toString(),liquidity:Q.toString(),amount0:de(G,t.token0.decimals),amount1:de(q,t.token1.decimals)}),E("completed"),setTimeout(()=>{v(!1),E(null),setTimeout(()=>{p(!0),setTimeout(()=>{g(!0)},1e3),setTimeout(()=>{r(""),d(""),p(!1)},3e4)},100)},1e3)}catch(B){console.error("Add liquidity error:",B),$(B.message),E("error")}finally{m(!1)}},P=async B=>{console.log("User rating:",B)};return e.jsxs("div",{className:"space-y-6",children:[w&&e.jsx(qt,{width:j.width,height:j.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Select Pool"}),e.jsxs("button",{onClick:()=>u(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(t.token0),alt:t.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Be(t.token1),alt:t.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.token0.address?.toLowerCase()===ve.WETH.toLowerCase()?"ETH":t.token0.symbol,"/",t.token1.address?.toLowerCase()===ve.WETH.toLowerCase()?"ETH":t.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fee Tier"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[.01,.05,.3,1].map(B=>e.jsxs("button",{onClick:()=>h(B),className:`px-4 py-2 rounded-xl text-sm font-medium transition-colors
                    ${A===B?"bg-[#00ffbd] text-black":"bg-white/5 dark:bg-[#2d2f36] text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
                  `,children:[B,"%"]},B))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[t.token0.isWETH?"ETH":t.token0.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n,onChange:F,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:t.token0.logo,alt:t.token0.isWETH?"ETH":t.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.token0.isWETH?"ETH":t.token0.symbol})]})]}),e.jsx(yi,{token:t.token0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[t.token1.isWETH?"ETH":t.token1.symbol," Amount"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:l,onChange:U,placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-2",children:[e.jsx("img",{src:t.token1.logo,alt:t.token1.isWETH?"ETH":t.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:t.token1.isWETH?"ETH":t.token1.symbol})]})]}),e.jsx(yi,{token:t.token1})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Set price range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>S("full"),className:`p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border transition-colors ${L==="full"?"border-[#00ffbd] text-[#00ffbd] dark:text-[#00ffbd]":"border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:border-[#00ffbd] dark:hover:border-[#00ffbd]"}`,children:"Full range"}),e.jsx("button",{onClick:()=>S("custom"),className:`p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border transition-colors ${L==="custom"?"border-[#00ffbd] text-[#00ffbd] dark:text-[#00ffbd]":"border-gray-200 dark:border-gray-800 text-gray-700 dark:text-gray-300 hover:border-[#00ffbd] dark:hover:border-[#00ffbd]"}`,children:"Custom range"})]}),L==="custom"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Min Price"}),e.jsx("input",{type:"text",value:I.min,onChange:B=>O(k=>({...k,min:B.target.value})),placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Max Price"}),e.jsx("input",{type:"text",value:I.max,onChange:B=>O(k=>({...k,max:B.target.value})),placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.jsx("p",{children:L==="full"?"Providing full range liquidity ensures continuous market participation across all possible prices, offering simplicity but with potential for higher impermanent loss.":"Custom range allows you to concentrate your liquidity within specific price bounds, enhancing capital efficiency and fee earnings but requiring more active management."})})]}),e.jsx("button",{onClick:V,disabled:o||!n||!l||!A||!I.min||!I.max,className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
              ${o||!n||!l||!A||!I.min||!I.max?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
            `,children:o?"Adding Liquidity...":"Add Liquidity"})]}),e.jsx(ox,{isOpen:N,onClose:()=>{v(!1),E(null),$(null)},currentStep:C,pool:t,error:b}),e.jsx(rx,{isOpen:y,onClose:()=>g(!1),onRate:P}),e.jsx(ix,{isOpen:c,onClose:()=>u(!1),onSelect:B=>{s(B),u(!1),r(""),d(""),h(null),O({min:"",max:""})}})]})}const Qs={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_1s_ease-in-out_infinite]",style:{strokeDasharray:20,strokeDashoffset:20,animation:"draw 1s ease-in-out forwards"}})]})}),Removing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8M8 12h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[spin_2s_linear_infinite]",transform:"rotate(45 12 12)"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v6l4 4",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[spin_2s_linear_infinite]"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20,animation:"draw 0.5s ease-in-out forwards"}})]})})},Xo=document.createElement("style");Xo.textContent=`
  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
`;document.head.appendChild(Xo);const dx=({isOpen:a,onClose:t,currentStep:s,pool:n,error:r})=>{const l=[{key:"preparing",label:"Preparing Transaction",icon:Qs.Preparing},{key:"approval",label:"Awaiting Approval",icon:Qs.Approval},{key:"removing",label:"Removing Liquidity",icon:Qs.Removing},{key:"confirming",label:"Confirming Transaction",icon:Qs.Confirming},{key:"completed",label:"Liquidity Removed Successfully",icon:Qs.Completed}],d=l.findIndex(c=>c.key===s),o=c=>c?c.includes("user rejected")?"Transaction was rejected by user":c.includes("insufficient funds")?"Insufficient funds for transaction":c:"",m=()=>n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:n.token0.logo,alt:n.token0.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:n.token1.logo,alt:n.token1.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"text-gray-900 dark:text-white",children:[n.token0.symbol,"/",n.token1.symbol]})]}):"";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsxs(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Remove Liquidity Status",n&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:m()})]}),e.jsxs("div",{className:"space-y-4",children:[l.map((c,u)=>{const x=c.icon,f=u===d,N=u<d;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${f?"bg-[#00ffbd]/10 text-[#00ffbd]":N?"text-[#00ffbd]":"text-gray-400"}`,children:[e.jsx(x,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:c.label}),f&&c.key==="removing"&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Removing liquidity for ",m()]})]})]},c.key)}),r&&e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-red-500/10",children:[e.jsx(Qs.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"block font-medium text-red-500",children:"Transaction Failed"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:o(r)})]})]})]}),s==="completed"&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-[#00ffbd] font-medium",children:"Liquidity removed successfully!"})}),r&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium text-lg bg-red-500 text-white hover:bg-red-600 transition-colors",children:"Close"})})]})})})})]})})},cx=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 shadow-xl transition-all",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center gap-2 mb-6",children:[...Array(9)].map((o,m)=>e.jsx("button",{onMouseEnter:()=>d(m+1),onMouseLeave:()=>d(0),onClick:()=>{r(m+1),s(m+1),t()},className:"focus:outline-none",children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${m+1<=(l||n)?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})},m))})]})})})})]})})},mx=["function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function removeLiquidityETH(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountToken, uint amountETH)"];function ux(){const{address:a}=Oe(),t=Pt(),[s,n]=i.useState(null),[r,l]=i.useState(!1),[d,o]=i.useState(""),[m,c]=i.useState("0"),[u,x]=i.useState(null),[f,N]=i.useState(!1),[v,C]=i.useState(!1),[E,w]=i.useState("0"),[p,y]=i.useState("0"),[g,j]=i.useState(!1),[T,b]=i.useState(null),[$,L]=i.useState(!1),[S,A]=i.useState(!1),[h,I]=i.useState({width:window.innerWidth,height:window.innerHeight}),[O,F]=i.useState(null);i.useEffect(()=>{const B=()=>{I({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",B),()=>window.removeEventListener("resize",B)},[]),i.useEffect(()=>{(async()=>{if(!(!s||!a||!t)){C(!0);try{const k=await t.getTokenBalance(s.pairAddress,a);c(k)}catch(k){console.error("Error loading pool info:",k),c("0")}finally{C(!1)}}})()},[s?.pairAddress,a,t]),i.useEffect(()=>{if(!u||!m)return;const B=u,D=parseFloat(m)*B/100;o(D.toString())},[u,m]),i.useEffect(()=>{(async()=>{if(!(!s||!d||!a))try{const k=new he(window.ethereum),D=new J(s.pairAddress,["function getReserves() view returns (uint112, uint112, uint32)","function totalSupply() view returns (uint256)"],k),[_,H]=await Promise.all([D.getReserves(),D.totalSupply()]),X=Ie(d,18),z=_[0]*X/H,se=_[1]*X/H;w(de(z,s.token0.decimals||18)),y(de(se,s.token1.decimals||18))}catch(k){console.error("Error calculating amounts:",k)}})()},[s,d,a]);const U=async()=>{if(!a){M.error("Please connect your wallet");return}if(!s||!d){M.error("Please enter a valid amount");return}N(!0),j(!0),b("preparing"),F(null);try{const B=new he(window.ethereum),k=await B.getNetwork().then(X=>Number(X.chainId)),D=await B.getSigner(),_=Ie(d,18);if(k===10143){const X=ve[10143].router,z=new ps(["function removeLiquidity(address tokenA, address tokenB, uint liquidity, uint amountAMin, uint amountBMin, address to, uint deadline) external returns (uint amountA, uint amountB)","function removeLiquidityETH(address token, uint liquidity, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external returns (uint amountToken, uint amountETH)"]),se=new J(s.pairAddress,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function getReserves() view returns (uint112, uint112, uint32)"],D);await se.allowance(a,X)<_&&(b("approval"),await(await se.approve(X,Mt)).wait());const te=Ie(E,s.token0.decimals)*99n/100n,Y=Ie(p,s.token1.decimals)*99n/100n,W=BigInt(Math.floor(Date.now()/1e3)+60*20),Q=s.token0.isNative,G=s.token1.isNative;b("removing");let q;if(Q||G){const Z=Q?s.token1.address:s.token0.address,ie=Q?Y:te,ne=Q?te:Y;q=await D.sendTransaction({to:X,data:z.encodeFunctionData("removeLiquidityETH",[Z,_,ie,ne,await D.getAddress(),W])})}else q=await D.sendTransaction({to:X,data:z.encodeFunctionData("removeLiquidity",[s.token0.address,s.token1.address,_,te,Y,await D.getAddress(),W])});b("confirming"),await q.wait()}else{const X=new J(ve[k].router,mx,D),z=new J(s.pairAddress,["function allowance(address,address) view returns (uint256)","function approve(address,uint256) returns (bool)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)","function getReserves() view returns (uint112, uint112, uint32)"],D);await z.allowance(a,ve[k].router)<_&&(b("approval"),await(await z.approve(ve[k].router,Mt)).wait());const ee=Ie(E,s.token0.decimals||18)*99n/100n,te=Ie(p,s.token1.decimals||18)*99n/100n,Y=BigInt(Math.floor(Date.now()/1e3)+60*20),W=s.token0.address.toLowerCase()===ve[k].WETH.toLowerCase(),Q=s.token1.address.toLowerCase()===ve[k].WETH.toLowerCase();b("removing");let G;if(W||Q){const q=W?s.token1.address:s.token0.address,Z=W?te:ee,ie=W?ee:te;G=await X.removeLiquidityETH(q,_,Z,ie,a,Y,{gasLimit:1000000n})}else G=await X.removeLiquidity(s.token0.address,s.token1.address,_,ee,te,a,Y,{gasLimit:1000000n});b("confirming"),await G.wait()}b("completed"),L(!0),setTimeout(()=>{j(!1),b(null),A(!0)},1e3),setTimeout(()=>{L(!1)},3e4);const H=await pairContract.balanceOf(a);c(de(H,18))}catch(B){console.error("Remove liquidity error:",B),F(B.message||"Failed to remove liquidity"),b(null),L(!1)}finally{N(!1)}},V=()=>{o(m),x(100)},P=B=>{B.token0.address?.toLowerCase()==="0x70262e266E50603AcFc5D58997eF73e5a8775844".toLowerCase()&&(B.token0.logo="/logos/usdt.png"),B.token1.address?.toLowerCase()==="0x70262e266E50603AcFc5D58997eF73e5a8775844".toLowerCase()&&(B.token1.logo="/logos/usdt.png"),n(B),l(!1),o(""),x(null)};return e.jsxs("div",{className:"space-y-6",children:[$&&e.jsx(qt,{width:h.width,height:h.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Pool"}),e.jsxs("button",{onClick:()=>l(!0),className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 flex items-center justify-between hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors",children:[s?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:s.token0.logo,alt:s.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:s.token1.logo,alt:s.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[s.token0.symbol,"/",s.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select a pool"}),e.jsx(Yc,{className:"w-5 h-5 text-gray-400"})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Percentage"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(B=>e.jsxs("button",{onClick:()=>x(B),className:`px-4 py-2 rounded-xl font-medium transition-colors ${u===B?"bg-[#00ffbd] text-black":"bg-white/5 dark:bg-[#2d2f36] text-gray-700 dark:text-gray-300 hover:bg-[#00ffbd]/10"}`,children:[B,"%"]},B))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LP Token Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:d,onChange:B=>{o(B.target.value),x(null)},placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 pr-16 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:V,className:"absolute right-3 top-1/2 -translate-y-1/2 px-2 py-1 text-sm font-medium text-[#00ffbd] hover:text-[#00e6a9] transition-colors",children:"MAX"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Balance: ",v?"Loading...":m," LP Tokens"]})]}),e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-4",children:"You Will Receive"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:s.token0.logo,alt:s.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.token0.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Number(E).toFixed(6)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:s.token1.logo,alt:s.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:s.token1.symbol})]}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Number(p).toFixed(6)})]})]})]})]}),e.jsx("button",{onClick:U,disabled:f||!d,className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
          ${f||!d?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
        `,children:f?"Removing Liquidity...":"Remove Liquidity"}),e.jsx(Yo,{isOpen:r,onClose:()=>l(!1),onSelect:P}),e.jsx(dx,{isOpen:g,onClose:()=>{j(!1),b(null),F(null)},currentStep:T,pool:s,error:O}),e.jsx(cx,{isOpen:S,onClose:()=>A(!1),onRate:B=>{console.log("User rated liquidity removal:",B)}})]})}const Xs={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Removing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M8 12h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]"})]})})},xx=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-[99998]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(5)].map((o,m)=>{const c=m+1;return e.jsx("button",{className:"transition-transform hover:scale-110 focus:outline-none",onClick:()=>r(c),onMouseEnter:()=>d(c),onMouseLeave:()=>d(0),children:e.jsx(Dt,{size:28,className:`transition-colors ${(l||n)>=c?"text-[#00ffbd]":"text-gray-300 dark:text-gray-600"}`})},c)})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n===0?"Select a rating":`You rated: ${n} star${n!==1?"s":""}`}),e.jsxs("div",{className:"flex space-x-3 mt-4",children:[e.jsx("button",{onClick:()=>{n>0&&(s(n),t())},className:`px-4 py-2 rounded-xl font-medium transition-colors ${n>0?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400"}`,children:"Submit Rating"}),e.jsx("button",{onClick:t,className:"px-4 py-2 rounded-xl font-medium bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-900 dark:text-white transition-colors",children:"Skip"})]})]})]})})})})]})})},gx=({isOpen:a,onClose:t,currentStep:s,position:n,error:r})=>{const l=[{id:"preparing",title:"Preparing",icon:e.jsx(Xs.Preparing,{})},{id:"approval",title:"Token Approval",icon:e.jsx(Xs.Approval,{})},{id:"removing",title:"Removing Liquidity",icon:e.jsx(Xs.Removing,{})},{id:"confirming",title:"Confirming",icon:e.jsx(Xs.Confirming,{})},{id:"completed",title:"Completed",icon:e.jsx(Xs.Completed,{})}],d=!!r,o=m=>m?.includes("user rejected")?"Transaction was rejected. Please try again.":m?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred";return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:d?"Error Removing Liquidity":"Removing Liquidity"}),e.jsx("div",{className:"space-y-4",children:l.map((m,c)=>{const u=s===m.id,x=!d&&l.findIndex(N=>N.id===s)>c,f=d&&s===m.id;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${u&&!f?"bg-[#00ffbd]/10 text-[#00ffbd]":x?"text-[#00ffbd]":f?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[m.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:m.title}),u&&!d&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[m.id==="preparing"&&"Preparing transaction...",m.id==="approval"&&"Approving removal...",m.id==="removing"&&"Removing your liquidity...",m.id==="confirming"&&"Waiting for confirmation...",m.id==="completed"&&"Successfully removed liquidity!"]})]}),x&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},m.id)})}),d&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xs.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:o(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:t,className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})};function hx(){const{address:a}=Oe(),[t,s]=i.useState(null),[n,r]=i.useState("0.0"),[l,d]=i.useState(!1),[o,m]=i.useState(!1),[c,u]=i.useState(null),[x,f]=i.useState(!1),[N,v]=i.useState(!1),[C,E]=i.useState(null),[w,p]=i.useState({width:window.innerWidth,height:window.innerHeight});i.useEffect(()=>{const b=()=>{p({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]);const y=async()=>{try{d(!0),m(!0),u("preparing"),E(null);const $=await new he(window.ethereum).getSigner(),L=new Yt($);if(!t?.tokenId)throw new Error("No position selected");const S=parseFloat(n)/100,A=BigInt(Math.floor(Number(t.liquidity)*S));u("removing");const{amount0:h,amount1:I}=await L.decreaseLiquidity({tokenId:t.tokenId,liquidity:A,amount0Min:0,amount1Min:0,deadline:Math.floor(Date.now()/1e3)+1200});u("collecting"),await L.collect({tokenId:t.tokenId,recipient:a,amount0Max:h,amount1Max:I}),S===1&&(u("burning"),await L.burn(t.tokenId)),console.log("Liquidity Removed:",{tokenId:t.tokenId.toString(),liquidityRemoved:A.toString(),amount0:de(h,t.token0.decimals),amount1:de(I,t.token1.decimals)}),u("completed"),setTimeout(()=>{m(!1),u(null),setTimeout(()=>{f(!0),setTimeout(()=>{v(!0)},1e3),setTimeout(()=>{s(null),r("0.0"),f(!1)},3e4)},100)},1e3)}catch(b){console.error("Remove liquidity error:",b),E(b.message),u("error")}finally{d(!1)}},g=async b=>{console.log("User rating:",b)},j=()=>{r("0.0")},T=b=>{r((0*b/100).toFixed(6))};return e.jsxs("div",{className:"space-y-6",children:[x&&e.jsx(qt,{width:w.width,height:w.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Pool"}),e.jsxs("button",{onClick:()=>{},className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors flex items-center justify-between group",children:[t?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(t.token0),alt:t.token0.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Be(t.token1),alt:t.token1.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.token0.symbol,"/",t.token1.symbol]})]}):e.jsx("span",{className:"text-gray-500",children:"Select Pool"}),e.jsx("svg",{className:"w-5 h-5 text-gray-400 group-hover:text-[#00ffbd] transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Select Percentage"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(b=>e.jsxs("button",{onClick:()=>T(b),className:"px-4 py-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors text-gray-900 dark:text-white font-medium",children:[b,"%"]},b))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"LP Token Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:n,onChange:b=>r(b.target.value),placeholder:"0.0",className:"w-full px-4 py-3 bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 rounded-xl focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 pr-20"}),e.jsx("button",{onClick:j,className:"absolute right-3 top-1/2 -translate-y-1/2 px-3 py-1 bg-[#00ffbd] hover:bg-[#00e6a9] text-black rounded-lg font-medium transition-colors text-sm",children:"MAX"})]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Balance: 0.0 LP Tokens"})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"You Will Receive"}),e.jsx("div",{className:"space-y-2",children:t&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(t.token0),alt:t.token0.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:t.token0.symbol})]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"0.000000"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(t.token1),alt:t.token1.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:t.token1.symbol})]}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"0.000000"})]})]})})]}),e.jsx("button",{onClick:y,disabled:l||!t||!n||n==="0.0",className:`w-full px-4 py-3 rounded-xl font-medium text-lg transition-colors
              ${l||!t||!n||n==="0.0"?"bg-gray-300 dark:bg-gray-700 cursor-not-allowed text-gray-500 dark:text-gray-400":"bg-[#00ffbd] hover:bg-[#00e6a9] text-black"}
            `,children:l?"Removing Liquidity...":"Remove Liquidity"})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"mb-4",children:e.jsx(it,{size:48,className:"mx-auto text-gray-400 dark:text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"Please connect your wallet to remove liquidity"}),e.jsx("button",{onClick:open,className:"px-6 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-semibold rounded-lg transition-colors",children:"Connect Wallet"})]}),e.jsx(gx,{isOpen:o,onClose:()=>{m(!1),u(null),E(null)},currentStep:c,position:t,error:C}),e.jsx(xx,{isOpen:N,onClose:()=>v(!1),onRate:g})]})}const px="Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",bi=5*60*1e3,va={data:null,timestamp:0,isValid(){return this.data&&Date.now()-this.timestamp<bi},set(a){this.data=a,this.timestamp=Date.now();try{const t=JSON.stringify(a,(s,n)=>typeof n=="bigint"?`bigint:${n.toString()}`:n);localStorage.setItem("myPoolsCache",JSON.stringify({data:t,timestamp:this.timestamp}))}catch(t){console.warn("Error saving to localStorage:",t)}},load(){try{const a=localStorage.getItem("myPoolsCache");if(a){const{data:t,timestamp:s}=JSON.parse(a);if(Date.now()-s<bi)return this.data=JSON.parse(t,(n,r)=>typeof r=="string"&&r.startsWith("bigint:")?BigInt(r.slice(7)):r),this.timestamp=s,!0}}catch(a){console.warn("Error loading from localStorage:",a)}return!1},clear(){this.data=null,this.timestamp=0,localStorage.removeItem("myPoolsCache")}},Gr={data:new Map,load(){try{const a=localStorage.getItem("tokenMetadataCache");if(a){const t=JSON.parse(a,(s,n)=>typeof n=="string"&&n.startsWith("bigint:")?BigInt(n.slice(7)):n);this.data=new Map(t)}}catch(a){console.warn("Error loading token metadata cache:",a)}},set(a,t){this.data.set(a.toLowerCase(),t);try{const s=JSON.stringify([...this.data],(n,r)=>typeof r=="bigint"?`bigint:${r.toString()}`:r);localStorage.setItem("tokenMetadataCache",s)}catch(s){console.warn("Error saving token metadata cache:",s)}},get(a){return this.data.get(a.toLowerCase())}};Gr.load();va.load();function fx(){const{address:a}=Oe(),t=ws(),[s,n]=i.useState([]),[r,l]=i.useState(!1),[d,o]=i.useState("");i.useEffect(()=>{(async()=>{if(!a){console.log("No wallet address found");return}l(!0);try{if(console.log("Connected wallet address:",a),console.log("Starting to load pools..."),va.isValid()&&va.data){console.log("Returning pools from cache"),n(va.data),l(!1);return}const u=`https://eth-sepolia.g.alchemy.com/v2/${px}`,f=await(await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"alchemy_getTokenBalances",params:[a,"erc20"]})})).json();if(console.log("Token balances:",f),f.result?.tokenBalances){const N=f.result.tokenBalances.filter(E=>E.tokenBalance!=="0x0").map(async E=>{const w=Gr.get(E.contractAddress);if(w)return{result:w};const y=await(await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"alchemy_getTokenMetadata",params:[E.contractAddress]})})).json();return y.result&&Gr.set(E.contractAddress,y.result),y}),v=await Promise.all(N);console.log("Token metadata:",v);const C=f.result.tokenBalances.filter((E,w)=>v[w]?.result?.symbol?.includes("UNI-V2"));if(console.log("LP tokens found:",C),C.length>0){const w=(await Promise.all(C.map(async p=>{try{const y=p.contractAddress;console.log("Fetching data for pool:",y);const g=await t.getPoolInfoByAddress(y);if(!g)return console.log("No pool info found for:",y),null;const[j,T]=await Promise.all([aa(g.token0),aa(g.token1)]);return console.log("Pool info found:",{token0:j?.symbol,token1:T?.symbol,reserves:g.reserves}),{...g,token0:j,token1:T,pairAddress:y,lpBalance:p.tokenBalance,createdAt:new Date,reserves:{...g.reserves,reserve0Formatted:de(g.reserves?.reserve0||"0",j?.decimals||18),reserve1Formatted:de(g.reserves?.reserve1||"0",T?.decimals||18)}}}catch(y){return console.error("Error fetching pool data:",y),null}}))).filter(p=>p!==null);console.log("Setting pools:",w),n(w),va.set(w)}}}catch(u){console.error("Error loading pools:",u),M.error("Failed to load pools: "+u.message)}finally{l(!1)}})()},[a,t]);const m=async()=>{if(!gt(d)){M.error("Please enter a valid pool address");return}l(!0);try{const c=await t.getPoolInfoByAddress(d);if(!c){M.error("No pool found at this address");return}const[u,x]=await Promise.all([aa(c.token0),aa(c.token1)]);n(f=>{if(!f.some(N=>N.pairAddress.toLowerCase()===d.toLowerCase())){const N={...c,token0:u,token1:x,pairAddress:d,reserves:{...c.reserves,reserve0Formatted:de(c.reserves?.reserve0||"0",u?.decimals||18),reserve1Formatted:de(c.reserves?.reserve1||"0",x?.decimals||18)}};return[...f,N]}return f}),M.success("Pool found!")}catch(c){console.error("Error searching pool:",c),M.error("Failed to fetch pool information")}finally{l(!1)}};return a?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d,onChange:c=>o(c.target.value),placeholder:"Enter pool address...",className:"flex-1 px-4 py-2 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent"}),e.jsx("button",{onClick:m,disabled:r,className:"px-4 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black rounded-xl font-medium transition-colors disabled:opacity-50",children:"Search"})]}),r?e.jsx("div",{className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#00ffbd]"})}):s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500",children:"No pools found"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Search for a pool by address or create a new one"})]}):s.map(c=>e.jsxs("div",{className:"p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(c.token0),alt:c.token0?.symbol||"ERC20 Token",className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:u=>{u.target.onerror=null,u.target.src="/token-default.png"}}),e.jsx("img",{src:Be(c.token1),alt:c.token1?.symbol||"ERC20 Token",className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]",onError:u=>{u.target.onerror=null,u.target.src="/token-default.png"}})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[c.token0?.symbol||"ERC20 Token","/",c.token1?.symbol||"ERC20 Token"]})]}),c.createdAt&&e.jsxs("span",{className:"text-sm text-gray-500",children:["Created ",new Date(c.createdAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[e.jsx("span",{className:"truncate",children:c.pairAddress}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(c.pairAddress),M.success("Address copied to clipboard!")},className:"p-1.5 hover:bg-white/10 rounded-lg transition-colors",title:"Copy address",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})})]}),c.reserves&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.token0?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c.reserves.reserve0Formatted})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.token1?.symbol||"ERC20 Token"," Reserves"]}),e.jsx("div",{className:"text-lg font-medium text-gray-900 dark:text-white",children:c.reserves.reserve1Formatted})]})]}),c.lpBalance&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Your LP Balance"}),e.jsxs("div",{className:"font-medium text-gray-900 dark:text-white",children:[de(c.lpBalance||"0",18)," LP Tokens"]})]})]},c.pairAddress))]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Please connect your wallet to view your pools"})})}const wi=5*60*1e3,is={TESTNET:{id:1301,name:"Unichain Testnet",blockscoutUrl:"https://unichain-sepolia.blockscout.com"},MAINNET:{id:130,name:"Unichain Mainnet",blockscoutUrl:"https://unichain.blockscout.com"}},yx={1301:[{address:ve[1301].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:"0x31d0220469e10c4E71834a79b1f276d740d3768F",symbol:"USDC",name:"USD Coin",decimals:6,logo:"/logos/usdc.png"},{address:ve[1301].USDT,symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}],130:[{address:ve[130].WETH,symbol:"ETH",name:"Ethereum",decimals:18,logo:"/logos/eth.png"},{address:ve[130].USDT,symbol:"USDT",name:"Tether USD",decimals:6,logo:"/logos/usdt.png"}]},ji=(a,t)=>{const s=yx[t]?.find(n=>n.address?.toLowerCase()===a.address?.toLowerCase());return s?{...a,...s,logo:s.logo}:a},Na={data:null,timestamp:0,isValid(){return this.data&&Date.now()-this.timestamp<wi},set(a){this.data=a,this.timestamp=Date.now();try{const t=JSON.stringify(a,(s,n)=>typeof n=="bigint"?`bigint:${n.toString()}`:n);localStorage.setItem("myPoolsCache_unichain",JSON.stringify({data:t,timestamp:this.timestamp}))}catch(t){console.warn("Error saving to localStorage:",t)}},load(){try{const a=localStorage.getItem("myPoolsCache_unichain");if(a){const{data:t,timestamp:s}=JSON.parse(a);if(Date.now()-s<wi)return this.data=JSON.parse(t,(n,r)=>typeof r=="string"&&r.startsWith("bigint:")?BigInt(r.slice(7)):r),this.timestamp=s,!0}}catch(a){console.warn("Error loading from localStorage:",a)}return!1},clear(){this.data=null,this.timestamp=0,localStorage.removeItem("myPoolsCache_unichain")}},bx={data:new Map,load(){try{const a=localStorage.getItem("tokenMetadataCache_unichain");if(a){const t=JSON.parse(a,(s,n)=>typeof n=="string"&&n.startsWith("bigint:")?BigInt(n.slice(7)):n);this.data=new Map(t)}}catch(a){console.warn("Error loading token metadata cache:",a)}},set(a,t){this.data.set(a.toLowerCase(),t);try{const s=JSON.stringify([...this.data],(n,r)=>typeof r=="bigint"?`bigint:${r.toString()}`:r);localStorage.setItem("tokenMetadataCache_unichain",s)}catch(s){console.warn("Error saving token metadata cache:",s)}},get(a){return this.data.get(a.toLowerCase())}};bx.load();Na.load();const wx=()=>e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white/5 dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800 w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 dark:bg-gray-800 animate-pulse"})]}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:e.jsx("div",{className:"w-full h-4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})})]});function jx(){const{address:a}=Oe(),t=Pt(),[s,n]=i.useState([]),[r,l]=i.useState(!1),[d,o]=i.useState(""),[m,c]=i.useState(null),[u,x]=i.useState(""),f={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},N={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",stiffness:100,damping:15}},hover:{scale:1.02,transition:{type:"spring",stiffness:400,damping:10}}};return i.useEffect(()=>((async()=>{if(window.ethereum)try{const C=await window.ethereum.request({method:"eth_chainId"});c(parseInt(C,16))}catch(C){console.error("Error getting chain ID:",C)}})(),window.ethereum&&window.ethereum.on("chainChanged",C=>{c(parseInt(C,16))}),()=>{window.ethereum&&window.ethereum.removeListener("chainChanged",()=>{})}),[]),i.useEffect(()=>{(async()=>{if(!a||!t||!m)return;if(!(m===is.TESTNET.id||m===is.MAINNET.id)){x("Please switch to Unichain network (Testnet or Mainnet)"),n([]);return}l(!0),x("");try{if(Na.isValid()&&Na.data){n(Na.data),l(!1);return}const E=m===is.TESTNET.id?is.TESTNET.blockscoutUrl:is.MAINNET.blockscoutUrl,w=await fetch(`${E}/api/v2/addresses/${a}/token-balances`);if(!w.ok)throw new Error("Failed to fetch token balances from Blockscout");const y=(await w.json()).filter(T=>T.token?.type==="ERC-20"&&T.value&&T.token.address&&(T.token.symbol==="UNI-V2"||T.token.name?.includes("Uniswap V2"))).map(T=>T.token.address);if(!y||y.length===0){n([]);return}const j=(await Promise.all(y.map(async T=>{try{const b=await t.getPoolInfoByAddress(T);if(!b)return null;const[$,L]=await Promise.all([at(b.token0.address),at(b.token1.address)]),S=ji({...b.token0,name:$?.name||b.token0.name,symbol:$?.symbol||b.token0.symbol,decimals:$?.decimals||b.token0.decimals,logo:$?.logo||"/token-default.png",logoIpfs:$?.logoIpfs},m),A=ji({...b.token1,name:L?.name||b.token1.name,symbol:L?.symbol||b.token1.symbol,decimals:L?.decimals||b.token1.decimals,logo:L?.logo||"/token-default.png",logoIpfs:L?.logoIpfs},m);return{pairAddress:T,token0:S,token1:A,reserves:b.reserves,createdAt:b.createdAt||Math.floor(Date.now()/1e3),volumes:{oneDay:0,sevenDay:0,thirtyDay:0,oneDayTxCount:0,sevenDayTxCount:0,thirtyDayTxCount:0}}}catch(b){return console.error("Error fetching pool info:",b),null}}))).filter(T=>T!==null).sort((T,b)=>(b.tvl||0)-(T.tvl||0));n(j),Na.set(j)}catch(E){console.error("Error loading pools:",E),M.error("Failed to load pools: "+E.message)}finally{l(!1)}})()},[t,a,m]),s.filter(v=>{const C=d.toLowerCase();return v.token0?.symbol?.toLowerCase().includes(C)||v.token1?.symbol?.toLowerCase().includes(C)||v.pairAddress.toLowerCase().includes(C)}),a?r?e.jsx(R.div,{variants:f,initial:"hidden",animate:"show",className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 max-w-full",children:[1,2,3,4,5,6].map(v=>e.jsx(wx,{},v))}):s.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No pools found. Create a pool to get started!"}):e.jsxs(R.div,{initial:"hidden",animate:"show",variants:f,className:"space-y-6 overflow-x-hidden overflow-y-auto",children:[u&&e.jsx(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-900/30 text-red-700 dark:text-red-400",children:u}),m&&(is.TESTNET.id===m||is.MAINNET.id===m)&&e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"px-4 py-2 rounded-xl bg-[#00ffbd]/10 border border-[#00ffbd]/20 text-[#00ffbd] text-sm inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-[#00ffbd] animate-pulse"}),m===is.TESTNET.id?"Unichain Testnet":"Unichain Mainnet"]}),e.jsxs(R.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by token symbol or pool address...",value:d,onChange:v=>o(v.target.value),className:"w-full px-4 py-2 pl-10 bg-white/5 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-800 focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-gray-900 dark:text-white"}),e.jsx(Ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"})]}),r?e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-center items-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#00ffbd]"})}):s.length===0?e.jsx(R.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No pools found"}):e.jsx(R.div,{variants:f,className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3 max-w-full",children:e.jsx(Ze,{children:s.map(v=>e.jsxs(R.div,{variants:N,whileHover:"hover",layout:!0,className:"bg-white/5 dark:bg-[#1a1b1f] rounded-xl p-6 border border-gray-200 dark:border-gray-800 w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(v.token0),alt:v.token0?.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Be(v.token1),alt:v.token1?.symbol,className:"w-8 h-8 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:[v.token0?.symbol,"/",v.token1?.symbol]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Token 0 Reserve:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[de(v.reserves?.reserve0||"0",v.token0?.decimals||18)," ",v.token0?.symbol]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Token 1 Reserve:"}),e.jsxs("span",{className:"text-gray-900 dark:text-white font-medium",children:[de(v.reserves?.reserve1||"0",v.token1?.decimals||18)," ",v.token1?.symbol]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-800",children:e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:v.pairAddress})})]},v.pairAddress))})})]}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:"Please connect your wallet to view your pools"})}const vx=[{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"positions",outputs:[{internalType:"uint96",name:"nonce",type:"uint96"},{internalType:"address",name:"operator",type:"address"},{internalType:"address",name:"token0",type:"address"},{internalType:"address",name:"token1",type:"address"},{internalType:"uint24",name:"fee",type:"uint24"},{internalType:"int24",name:"tickLower",type:"int24"},{internalType:"int24",name:"tickUpper",type:"int24"},{internalType:"uint128",name:"liquidity",type:"uint128"},{internalType:"uint256",name:"feeGrowthInside0LastX128",type:"uint256"},{internalType:"uint256",name:"feeGrowthInside1LastX128",type:"uint256"},{internalType:"uint128",name:"tokensOwed0",type:"uint128"},{internalType:"uint128",name:"tokensOwed1",type:"uint128"}],stateMutability:"view",type:"function"}],gn="0x1f984000000000000000000000000000000000003",Ps="0xb7610f9b733e7d45184be3a1bc8a847be6ec4f0b",hn=["function getPool(address tokenA, address tokenB, uint24 fee) view returns (address pool)"],pn=["function slot0() external view returns (uint160 sqrtPriceX96, int24 tick, uint16 observationIndex, uint16 observationCardinality, uint16 observationCardinalityNext, uint8 feeProtocol, bool unlocked)","function liquidity() external view returns (uint128)","function positions(bytes32 key) external view returns (uint128 liquidity, uint256 feeGrowthInside0LastX128, uint256 feeGrowthInside1LastX128, uint128 tokensOwed0, uint128 tokensOwed1)","function ticks(int24 tick) external view returns (uint128 liquidityGross, int128 liquidityNet, uint256 feeGrowthOutside0X128, uint256 feeGrowthOutside1X128, int56 tickCumulativeOutside, uint160 secondsPerLiquidityOutsideX128, uint32 secondsOutside, bool initialized)"],Nx=["function tokenURI(uint256 tokenId) view returns (string)"],or=BigInt(2)**BigInt(96),vi=BigInt(2)**BigInt(32),lr=a=>{const t=a<0?a*-1:a;let s=BigInt(1001)*vi/BigInt(1e3);return t&1&&(s=s*BigInt(1001)/BigInt(1e3)),t&2&&(s=s*BigInt(1002)/BigInt(1e3)),t&4&&(s=s*BigInt(1005)/BigInt(1e3)),t&8&&(s=s*BigInt(1010)/BigInt(1e3)),t&16&&(s=s*BigInt(1020)/BigInt(1e3)),t&32&&(s=s*BigInt(1040)/BigInt(1e3)),t&64&&(s=s*BigInt(1080)/BigInt(1e3)),t&128&&(s=s*BigInt(1160)/BigInt(1e3)),t&256&&(s=s*BigInt(1340)/BigInt(1e3)),t&512&&(s=s*BigInt(1800)/BigInt(1e3)),t&1024&&(s=s*BigInt(3240)/BigInt(1e3)),t&2048&&(s=s*BigInt(10500)/BigInt(1e3)),t&4096&&(s=s*BigInt(11e4)/BigInt(1e3)),t&8192&&(s=s*BigInt(121e5)/BigInt(1e3)),a>0&&(s=BigInt("0xffffffffffffffffffffffffffffffff")/s),s*vi},kx=(a,t,s,n)=>{try{const r=BigInt(a.toString()),l=lr(Number(t)),d=lr(Number(s)),o=BigInt(n.toString());return r<=l?o*or*(d-l)/(l*d):r<d?o*or*(d-r)/(r*d):BigInt(0)}catch(r){return console.error("Error in getAmount0FromTick:",r),BigInt(0)}},Tx=(a,t,s,n)=>{try{const r=BigInt(a.toString()),l=lr(Number(t)),d=lr(Number(s)),o=BigInt(n.toString());return r<=l?BigInt(0):r<d?o*(r-l)/or:o*(d-l)/or}catch(r){return console.error("Error in getAmount1FromTick:",r),BigInt(0)}},St=(a,t=18)=>{if(!a)return"0";try{const s=a.toString(),n=Number(Rc(s,t));return n<1e-4?"< 0.0001":n<1?n.toFixed(4):n<1e3?n.toFixed(2):n<1e6?n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):n>=1e9?(n/1e9).toFixed(2)+"B":n>=1e6?(n/1e6).toFixed(2)+"M":(n/1e3).toFixed(2)+"K"}catch(s){return console.error("Error formatting BigInt:",s),"0"}},Yr=(a,t)=>t>=a.tickLower&&t<=a.tickUpper,Ee={PREPARING:"preparing",APPROVAL:"approval",ADDING:"adding",CONFIRMING:"confirming",COMPLETED:"completed",ERROR:"error"},Tt={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{className:"animate-pulse",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{className:"animate-[spin_3s_linear_infinite]",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2",strokeLinecap:"round"}),e.jsx("circle",{cx:"12",cy:"12",r:"4",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Approval:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Adding:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 8v8m-4-4h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})}),Confirming:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),e.jsx("path",{strokeLinecap:"round",className:"origin-center animate-[spin_2s_linear_infinite]",d:"M12 6v6l4 4"})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M12 8v5M12 16.5v.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})})};function Cx({position:a,onAction:t}){const[s,n]=i.useState(null),{data:r}=bs(),[l,d]=i.useState(null);return i.useEffect(()=>{const m=async()=>{try{const c=new he(r.transport),x=await new J(Ps,Nx,c).tokenURI(a.tokenId).catch(()=>null);if(!x)return;let f;if(x.startsWith("data:application/json;base64,")){const N=x.split(",")[1];if(!N)return;try{const v=atob(N);f=JSON.parse(v)}catch{return}}else try{const N=await fetch(x);if(!N.ok)return;f=await N.json()}catch{return}f?.image&&n(f.image)}catch{}};a?.tokenId&&r&&m()},[a?.tokenId,r]),i.useEffect(()=>{a&&r&&(async()=>{try{const c=new he(r.transport),x=await new J(gn,hn,c).getPool(a.token0.address,a.token1.address,a.fee),N=await new J(x,pn,c).slot0();d(N.tick)}catch{}})()},[a,r]),(()=>{const m=Math.pow(1.0001,a.tickLower),c=Math.pow(1.0001,a.tickUpper);return{min:m<.01?"< 0.01":m.toFixed(2),max:c>999999?"∞":c.toFixed(2)}})(),e.jsx("div",{className:"p-3 rounded-xl bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 max-w-2xl mx-auto",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("a",{href:`https://app.uniswap.org/#/pool/${a.tokenId}`,target:"_blank",rel:"noopener noreferrer",className:"relative w-[140px] h-full rounded-lg overflow-hidden flex-shrink-0 hover:ring-2 hover:ring-[#00ffbd] transition-all",children:s?e.jsx("img",{src:s,alt:`Position #${a.tokenId}`,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex -space-x-2",children:[e.jsx("img",{src:Be(a.token0),alt:a.token0.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"}),e.jsx("img",{src:Be(a.token1),alt:a.token1.symbol,className:"w-6 h-6 rounded-full ring-2 ring-white dark:ring-[#1a1b1f]"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[a.token0.symbol,"/",a.token1.symbol]}),e.jsx("div",{className:"flex items-center gap-2",children:l!==null&&e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${Yr(a,l)?"bg-[#00ffbd] shadow-[0_0_8px_#00ffbd]":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-[#00ffbd]",children:Yr(a,l)?"In range":"Out of range"})]})})]})]}),e.jsxs(Hs,{as:"div",className:"relative",children:[e.jsx(Hs.Button,{className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-[#1c2433] transition-colors",children:e.jsx(sd,{className:"w-5 h-5 text-[#00ffbd]"})}),e.jsx(me,{as:i.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(Hs.Items,{className:"absolute right-0 mt-1 w-60 origin-top-right rounded-2xl bg-white dark:bg-[#1a1b1f] shadow-lg border border-gray-200 dark:border-gray-800 focus:outline-none",children:e.jsxs("div",{className:"p-2 space-y-1",children:[e.jsx(Hs.Item,{children:({active:m})=>e.jsxs("button",{onClick:()=>t("add",a),className:`${m?"bg-gray-100 dark:bg-[#2d2f36]":""} group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm text-gray-900 dark:text-white`,children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-[#00ffbd]/10",children:e.jsx("span",{className:"text-lg text-[#00ffbd]",children:"+"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Add liquidity"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Add more liquidity to this position"})]})]})}),e.jsx(Hs.Item,{children:({active:m})=>e.jsxs("button",{onClick:()=>t("remove",a),className:`${m?"bg-gray-100 dark:bg-[#2d2f36]":""} group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm text-gray-900 dark:text-white`,children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-[#00ffbd]/10",children:e.jsx("span",{className:"text-lg text-[#00ffbd]",children:"-"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Remove liquidity"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Remove liquidity from this position"})]})]})}),e.jsx(Hs.Item,{children:({active:m})=>e.jsxs("button",{onClick:()=>t("collect",a),className:`${m?"bg-gray-100 dark:bg-[#2d2f36]":""} group flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm text-gray-900 dark:text-white`,children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-[#00ffbd]/10",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-5 h-5"})}),e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("span",{className:"font-medium",children:"Collect fees"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Collect accumulated fees"})]})]})})]})})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"p-2 rounded-lg bg-[#00ffbd]",children:[e.jsx("div",{className:"text-xs text-black mb-0.5",children:"Pool Share"}),e.jsxs("div",{className:"font-medium text-sm text-black",children:[(a.positionShare*100).toFixed(4),"%"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-[#1c2433]",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:a.token0.symbol}),e.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:St(a.amount0,a.token0.decimals)})]}),e.jsxs("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-[#1c2433]",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:a.token1.symbol}),e.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:St(a.amount1,a.token1.decimals)})]})]}),e.jsxs("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-[#1c2433]",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-0.5",children:"Unclaimed fees"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[St(a.fees0,a.token0.decimals)," ",a.token0.symbol]}),e.jsxs("div",{className:"font-medium text-sm text-gray-900 dark:text-white",children:[St(a.fees1,a.token1.decimals)," ",a.token1.symbol]})]})]})]})]})]})})}function Sx({isOpen:a,onClose:t,position:s}){const[n,r]=i.useState(""),[l,d]=i.useState(""),[o,m]=i.useState(!1),[c,u]=i.useState("0"),[x,f]=i.useState("0"),[N,v]=i.useState(null),[C,E]=i.useState(null),{data:w}=bs(),{address:p}=Oe(),[y,g]=i.useState(Ee.PREPARING),[j,T]=i.useState(null),b=h=>h?Number(h)*Number(h)*10**(s?.token0?.decimals-s?.token1?.decimals)/2**192:0,$=(h,I)=>{if(!C||!s)return"0";const O=b(C);return I?(Number(h)*O).toFixed(s.token1.decimals):(Number(h)/O).toFixed(s.token0.decimals)},L=h=>{r(h),h&&!isNaN(h)?d($(h,!0)):d("")},S=h=>{d(h),h&&!isNaN(h)?r($(h,!1)):r("")};i.useEffect(()=>{(async()=>{if(!(!w||!s))try{const I=new he(w.transport),F=await new J(gn,hn,I).getPool(s.token0.address,s.token1.address,s.fee),V=await new J(F,pn,I).slot0();v(V.tick),E(V.sqrtPriceX96)}catch(I){console.error("Error fetching pool data:",I)}})()},[w,s]);const A=async()=>{if(!w||!s){M.error("Wallet not connected or position not found");return}m(!0),g(Ee.PREPARING),T(null);try{const I=await new he(window.ethereum).getSigner(),O=new Yt(I),F=Ie(Number(n).toFixed(s.token0.decimals),s.token0.decimals),U=Ie(Number(l).toFixed(s.token1.decimals),s.token1.decimals);g(Ee.APPROVAL);const V=new J(s.token0.address,["function approve(address spender, uint256 amount) public returns (bool)"],I),P=new J(s.token1.address,["function approve(address spender, uint256 amount) public returns (bool)"],I);await(await V.approve(Ps,Mt)).wait(),await(await P.approve(Ps,Mt)).wait(),g(Ee.ADDING);const D={tokenId:s.tokenId,amount0Desired:F,amount1Desired:U,amount0Min:0,amount1Min:0,deadline:Math.floor(Date.now()/1e3)+1200},H=await new J(Ps,["function increaseLiquidity((uint256 tokenId, uint256 amount0Desired, uint256 amount1Desired, uint256 amount0Min, uint256 amount1Min, uint256 deadline)) external payable returns (uint128 liquidity, uint256 amount0, uint256 amount1)"],I).increaseLiquidity(D);g(Ee.CONFIRMING),await H.wait(),g(Ee.COMPLETED),M.success("Successfully added liquidity"),t()}catch(h){console.error("Error adding liquidity:",h),T(h.message),g(Ee.ERROR),M.error("Failed to add liquidity: "+h.message)}finally{m(!1)}};return i.useEffect(()=>{(async()=>{if(!(!w||!s||!p))try{const I=new he(w.transport),O=new J(s.token0.address,["function balanceOf(address) view returns (uint256)"],I),F=new J(s.token1.address,["function balanceOf(address) view returns (uint256)"],I),[U,V]=await Promise.all([O.balanceOf(p),F.balanceOf(p)]);u(St(U,s.token0.decimals)),f(St(V,s.token1.decimals))}catch(I){console.error("Error fetching balances:",I)}})()},[w,s,p]),e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(le.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#0D0D0D] p-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:t,className:"p-1 hover:opacity-80",children:e.jsx(xa,{className:"h-6 w-6 text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex -space-x-1",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-8 h-8 rounded-full"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:[s?.token0?.symbol,"/",s?.token1?.symbol]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[N!==null&&e.jsx("span",{className:"text-xs text-[#00ffbd]",children:Yr(s,N)?"In range":"Out of range"}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["v3 ",(s?.fee/1e4).toFixed(2),"%"]})]})]})]})]}),e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#2D2D2D]",children:e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-gray-900 dark:text-white",children:[e.jsx("path",{d:"M12 13.75C12.9665 13.75 13.75 12.9665 13.75 12C13.75 11.0335 12.9665 10.25 12 10.25C11.0335 10.25 10.25 11.0335 10.25 12C10.25 12.9665 11.0335 13.75 12 13.75Z",fill:"currentColor"}),e.jsx("path",{d:"M19 13.75C19.9665 13.75 20.75 12.9665 20.75 12C20.75 11.0335 19.9665 10.25 19 10.25C18.0335 10.25 17.25 11.0335 17.25 12C17.25 12.9665 18.0335 13.75 19 13.75Z",fill:"currentColor"}),e.jsx("path",{d:"M5 13.75C5.9665 13.75 6.75 12.9665 6.75 12C6.75 11.0335 5.9665 10.25 5 10.25C4.0335 10.25 3.25 11.0335 3.25 12C3.25 12.9665 4.0335 13.75 5 13.75Z",fill:"currentColor"})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-100 dark:bg-[#1c1c1c]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:s?.token0?.symbol})]}),e.jsxs("button",{onClick:()=>L(c),className:"text-sm text-[#00ffbd] hover:text-[#00ffbd]/80",children:["Balance: ",c]})]}),e.jsx("input",{type:"number",value:n,onChange:h=>L(h.target.value),className:"w-full bg-transparent text-2xl text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 outline-none",placeholder:"0"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"$0"})]}),e.jsxs("div",{className:"p-4 rounded-2xl bg-gray-100 dark:bg-[#1c1c1c]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-6 h-6 rounded-full"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:s?.token1?.symbol})]}),e.jsxs("button",{onClick:()=>S(x),className:"text-sm text-[#00ffbd] hover:text-[#00ffbd]/80",children:["Balance: ",x]})]}),e.jsx("input",{type:"number",value:l,onChange:h=>S(h.target.value),className:"w-full bg-transparent text-2xl text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 outline-none",placeholder:"0"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"$0"})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Position"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pool Share"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(s?.positionShare*100).toFixed(4),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",s?.token0?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:St(s?.amount0,s?.token0?.decimals)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",s?.token1?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:St(s?.amount1,s?.token1?.decimals)})]})]})]}),e.jsx("button",{onClick:A,disabled:!n||!l||o,className:`w-full mt-4 px-4 py-3 text-base font-medium rounded-2xl ${!n||!l?"bg-gray-200 dark:bg-[#2D2D2D] text-gray-400 cursor-not-allowed":"bg-[#00ffbd] text-black hover:bg-[#00ffbd]/90"}`,children:o?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}),e.jsx("span",{children:"Adding..."})]}):"Add"}),e.jsx(me,{appear:!0,show:o,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>{(y===Ee.COMPLETED||y===Ee.ERROR)&&m(!1)},children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[j?"Error Adding Liquidity":"Adding Liquidity",!j&&s&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[s.token0.symbol,"/",s.token1.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[[{step:Ee.PREPARING,title:"Preparing",icon:Tt.Preparing},{step:Ee.APPROVAL,title:"Token Approval",icon:Tt.Approval},{step:Ee.ADDING,title:"Adding Liquidity",icon:Tt.Adding},{step:Ee.CONFIRMING,title:"Confirming",icon:Tt.Confirming},{step:Ee.COMPLETED,title:"Completed",icon:Tt.Completed}].map(({step:h,title:I,icon:O})=>{const F=y===h,U=!j&&Object.values(Ee).indexOf(y)>Object.values(Ee).indexOf(h),V=j&&y===h;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${F?"bg-[#00ffbd]/10 text-[#00ffbd]":U?"text-[#00ffbd]":V?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[e.jsx(O,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:I}),F&&!j&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[h===Ee.PREPARING&&"Preparing transaction...",h===Ee.APPROVAL&&`Approving ${s?.token0?.symbol} and ${s?.token1?.symbol}`,h===Ee.ADDING&&e.jsxs("span",{className:"flex items-center gap-2",children:["Adding liquidity to ",s?.token0?.symbol,"/",s?.token1?.symbol," pool"]}),h===Ee.CONFIRMING&&"Waiting for confirmation...",h===Ee.COMPLETED&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully added liquidity to ",s?.token0?.symbol,"/",s?.token1?.symbol," pool!"]})]})]}),U&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},h)}),j&&e.jsx("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tt.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:j})]})]})})]}),(y===Ee.COMPLETED||j)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>m(!1),className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})]})})]})}function Fx({isOpen:a,onClose:t,position:s}){const[n,r]=i.useState(0),[l,d]=i.useState(!1),{data:o}=bs(),[m,c]=i.useState(Ee.PREPARING),[u,x]=i.useState(null),[f,N]=i.useState("0"),[v,C]=i.useState("0");i.useEffect(()=>{if(s&&n){const w=BigInt(s.amount0)*BigInt(n)/BigInt(100),p=BigInt(s.amount1)*BigInt(n)/BigInt(100);N(St(w,s.token0.decimals)),C(St(p,s.token1.decimals))}else N("0"),C("0")},[n,s]);const E=async()=>{if(!o||!s){M.error("Wallet not connected or position not found");return}d(!0),c(Ee.PREPARING),x(null);try{const p=await new he(window.ethereum).getSigner(),y=BigInt(s.liquidity)*BigInt(n)/BigInt(100);c(Ee.ADDING);const g=new J(Ps,["function decreaseLiquidity((uint256 tokenId, uint128 liquidity, uint256 amount0Min, uint256 amount1Min, uint256 deadline)) external payable returns (uint256 amount0, uint256 amount1)"],p),j={tokenId:s.tokenId,liquidity:y,amount0Min:0,amount1Min:0,deadline:Math.floor(Date.now()/1e3)+1200},T=await g.decreaseLiquidity(j);c(Ee.CONFIRMING),await T.wait(),c(Ee.COMPLETED),M.success("Successfully removed liquidity"),t()}catch(w){console.error("Error removing liquidity:",w),x(w.message),c(Ee.ERROR),M.error("Failed to remove liquidity: "+w.message)}finally{d(!1)}};return e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(le.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#0D0D0D] p-4 shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:t,className:"p-1 hover:opacity-80",children:e.jsx(xa,{className:"h-6 w-6 text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex -space-x-1",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-8 h-8 rounded-full"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:[s?.token0?.symbol,"/",s?.token1?.symbol]})}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["v3 ",(s?.fee/1e4).toFixed(2),"%"]})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Amount to remove"}),e.jsxs("span",{className:"text-sm text-[#00ffbd]",children:[n,"%"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[25,50,75,100].map(w=>e.jsxs("button",{onClick:()=>r(w),className:`p-2 text-sm font-medium rounded-xl transition-colors ${n===w?"bg-[#00ffbd] text-black":"bg-gray-100 dark:bg-[#1c1c1c] text-gray-900 dark:text-white hover:bg-[#00ffbd]/10 dark:hover:bg-[#00ffbd]/10"}`,children:[w,"%"]},w))})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Current Position"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pool Share"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[(s?.positionShare*100).toFixed(4),"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",s?.token0?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:St(s?.amount0,s?.token0?.decimals)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Current ",s?.token1?.symbol]})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:St(s?.amount1,s?.token1?.decimals)})]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"You will receive:"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s?.token0?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:f})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:s?.token1?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:v})]})]}),e.jsx("button",{onClick:E,disabled:!n||l,className:`w-full mt-2 px-4 py-3 text-base font-medium rounded-xl transition-colors ${n?"bg-[#00ffbd] text-black hover:bg-[#00ffbd]/90":"bg-gray-100 dark:bg-[#1c1c1c] text-gray-400 cursor-not-allowed"}`,children:l?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}),e.jsx("span",{children:"Removing..."})]}):"Remove"})]}),e.jsx(me,{appear:!0,show:l,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>{(m===Ee.COMPLETED||m===Ee.ERROR)&&d(!1)},children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[u?"Error Removing Liquidity":"Removing Liquidity",!u&&s&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[s.token0.symbol,"/",s.token1.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[[{step:Ee.PREPARING,title:"Preparing",icon:Tt.Preparing},{step:Ee.ADDING,title:"Removing Liquidity",icon:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M8 12h8",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})})},{step:Ee.CONFIRMING,title:"Confirming",icon:Tt.Confirming},{step:Ee.COMPLETED,title:"Completed",icon:Tt.Completed}].map(({step:w,title:p,icon:y})=>{const g=m===w,j=!u&&Object.values(Ee).indexOf(m)>Object.values(Ee).indexOf(w),T=u&&m===w;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${g&&!T?"bg-[#00ffbd]/10 text-[#00ffbd]":j?"text-[#00ffbd]":T?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[e.jsx(y,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:p}),g&&!u&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[w===Ee.PREPARING&&"Preparing transaction...",w===Ee.ADDING&&e.jsxs("span",{className:"flex items-center gap-2",children:["Removing ",n,"% liquidity from ",s?.token0?.symbol,"/",s?.token1?.symbol," pool"]}),w===Ee.CONFIRMING&&"Waiting for confirmation...",w===Ee.COMPLETED&&e.jsxs("span",{className:"flex items-center gap-2",children:["Successfully removed liquidity from ",s?.token0?.symbol,"/",s?.token1?.symbol," pool!"]})]})]}),j&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},w)}),u&&e.jsx("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tt.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:u})]})]})})]}),(m===Ee.COMPLETED||u)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>d(!1),className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})]})})]})}function Ex({isOpen:a,onClose:t,position:s}){const[n,r]=i.useState(!1),{data:l}=bs(),[d,o]=i.useState(Ee.PREPARING),[m,c]=i.useState(null),u=async()=>{if(!l||!s){M.error("Wallet not connected or position not found");return}r(!0),o(Ee.PREPARING),c(null);try{const f=await new he(window.ethereum).getSigner();o(Ee.ADDING);const N=new J(Ps,["function collect((uint256 tokenId, address recipient, uint128 amount0Max, uint128 amount1Max)) external payable returns (uint256 amount0, uint256 amount1)"],f),v={tokenId:s.tokenId,recipient:await f.getAddress(),amount0Max:s.fees0,amount1Max:s.fees1},C=await N.collect(v);o(Ee.CONFIRMING),await C.wait(),o(Ee.COMPLETED),M.success("Successfully collected fees"),t()}catch(x){console.error("Error collecting fees:",x),c(x.message),o(Ee.ERROR),M.error("Failed to collect fees: "+x.message)}finally{r(!1)}};return e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(le.Panel,{className:"w-full max-w-md rounded-2xl bg-white dark:bg-[#0D0D0D] p-4 shadow-xl",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:t,className:"p-1 hover:opacity-80",children:e.jsx(xa,{className:"h-6 w-6 text-gray-900 dark:text-white"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex -space-x-1",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-8 h-8 rounded-full"}),e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-8 h-8 rounded-full"})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:"Collect Fees"})}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s?.token0?.symbol,"/",s?.token1?.symbol," • ",(s?.fee/1e4).toFixed(2),"%"]})]})]})]})}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-[#1c1c1c] space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Uncollected fees"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token0),alt:s?.token0?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:s?.token0?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:St(s?.fees0,s?.token0?.decimals)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:Be(s?.token1),alt:s?.token1?.symbol,className:"w-5 h-5 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:s?.token1?.symbol})]}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:St(s?.fees1,s?.token1?.decimals)})]})]}),e.jsx("button",{onClick:u,disabled:!s?.fees0&&!s?.fees1||n,className:`w-full mt-4 px-4 py-3 text-base font-medium rounded-xl transition-colors ${!s?.fees0&&!s?.fees1?"bg-gray-100 dark:bg-[#1c1c1c] text-gray-400 cursor-not-allowed":"bg-[#00ffbd] text-black hover:bg-[#00ffbd]/90"}`,children:n?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}),e.jsx("span",{children:"Collecting..."})]}):"Collect"}),e.jsx(me,{appear:!0,show:n,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>{(d===Ee.COMPLETED||d===Ee.ERROR)&&r(!1)},children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#0a0b0f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-[#00ffbd]/20",children:[e.jsxs(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:[m?"Error Collecting Fees":"Collecting Fees",!m&&s&&e.jsxs("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-[#98A1C0]",children:[s.token0.symbol,"/",s.token1.symbol]})]}),e.jsxs("div",{className:"space-y-4",children:[[{step:Ee.PREPARING,title:"Preparing",icon:Tt.Preparing},{step:Ee.ADDING,title:"Collecting Fees",icon:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 6v6l4 2",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.6s_ease-in-out]"}),e.jsx("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:"animate-[pulse_2s_ease-in-out_infinite]"})]})})},{step:Ee.CONFIRMING,title:"Confirming",icon:Tt.Confirming},{step:Ee.COMPLETED,title:"Completed",icon:Tt.Completed}].map(({step:x,title:f,icon:N})=>{const v=d===x,C=!m&&Object.values(Ee).indexOf(d)>Object.values(Ee).indexOf(x),E=m&&d===x;return e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-xl transition-colors ${v&&!E?"bg-[#00ffbd]/10 text-[#00ffbd]":C?"text-[#00ffbd]":E?"bg-red-500/10 text-red-500":"text-gray-400"}`,children:[e.jsx(N,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:f}),v&&!m&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[x===Ee.PREPARING&&"Preparing transaction...",x===Ee.ADDING&&e.jsxs("span",{className:"flex items-center gap-2",children:["Collecting fees from ",s?.token0?.symbol,"/",s?.token1?.symbol," position"]}),x===Ee.CONFIRMING&&"Waiting for confirmation...",x===Ee.COMPLETED&&e.jsx("span",{className:"flex items-center gap-2",children:"Successfully collected fees!"})]})]}),C&&e.jsx("svg",{className:"w-5 h-5 text-[#00ffbd]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})]},x)}),m&&e.jsx("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Tt.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:m})]})]})})]}),(d===Ee.COMPLETED||m)&&e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:()=>r(!1),className:"w-full px-4 py-3 rounded-xl font-medium bg-[#00ffbd] hover:bg-[#00e6a9] transition-colors text-black",children:"Close"})})]})})})})]})})]})})]})}const Ax={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.05,delayChildren:.1}}},Ni={hidden:{opacity:0,y:10,scale:.98},visible:{opacity:1,y:0,scale:1,transition:{type:"spring",mass:.8,stiffness:100,damping:15}},exit:{opacity:0,scale:.96,transition:{duration:.2,ease:"easeOut"}}},Ix=()=>e.jsx(R.div,{className:"p-3 rounded-xl bg-white/5 dark:bg-[#2d2f36] border border-gray-200 dark:border-gray-800 max-w-2xl mx-auto",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"relative w-[140px] h-[140px] rounded-lg overflow-hidden flex-shrink-0 bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-6 w-24 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-2/3 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"h-4 w-1/2 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsx("div",{className:"flex gap-2 mt-4",children:[1,2,3].map(a=>e.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"},a))})]})]})});function Bx(){const{address:a,isConnected:t}=Oe(),s=mr(),{data:n}=bs(),[r,l]=i.useState([]),[d,o]=i.useState(!1),[m,c]=i.useState(!1),[u,x]=i.useState(!1),[f,N]=i.useState(!1),[v,C]=i.useState(null);i.useEffect(()=>{a&&s&&E()},[a,s]);const E=async()=>{try{if(o(!0),!a||!n)throw new Error("Wallet not connected");const p=new he(n.transport),y=new J(Ps,vx,p),g=new J(gn,hn,p),j=await y.balanceOf(a);if(Number(j)===0){l([]);return}const T=["function symbol() view returns (string)","function decimals() view returns (uint8)"],b=Array.from({length:Number(j)},async(S,A)=>{try{const h=await y.tokenOfOwnerByIndex(a,A),I=await y.positions(h),O=await g.getPool(I.token0,I.token1,I.fee),F=new J(O,pn,p),[U,V]=await Promise.all([F.slot0(),F.liquidity()]),P=new J(I.token0,T,p),B=new J(I.token1,T,p),[k,D,_,H]=await Promise.all([P.symbol(),P.decimals(),B.symbol(),B.decimals()]),X=kx(U.sqrtPriceX96,I.tickLower,I.tickUpper,I.liquidity),z=Tx(U.sqrtPriceX96,I.tickLower,I.tickUpper,I.liquidity),se=Number(I.liquidity)/Number(V);return{id:h.toString(),tokenId:h.toString(),token0:{address:I.token0,symbol:k,decimals:Number(D)},token1:{address:I.token1,symbol:_,decimals:Number(H)},fee:Number(I.fee),tickLower:Number(I.tickLower),tickUpper:Number(I.tickUpper),liquidity:I.liquidity.toString(),amount0:X.toString(),amount1:z.toString(),fees0:I.tokensOwed0.toString(),fees1:I.tokensOwed1.toString(),positionShare:se}}catch(h){return console.error(`Error fetching position ${A}:`,h),null}}),L=(await Promise.all(b)).filter(S=>S!==null);l(L)}catch(p){console.error("Error fetching positions:",p),M.error("Failed to fetch positions: "+p.message)}finally{o(!1)}},w=(p,y)=>{switch(C(y),p){case"add":c(!0);break;case"remove":x(!0);break;case"collect":N(!0);break}};return t?d?e.jsx(R.div,{className:"space-y-4",initial:{opacity:0},animate:{opacity:1},children:[1,2,3].map(p=>e.jsx(Ix,{},p))}):e.jsxs(R.div,{className:"space-y-4",variants:Ax,initial:"hidden",animate:"visible",children:[r.length>0?e.jsx(Ze,{children:r.map(p=>e.jsx(R.div,{variants:Ni,initial:"hidden",animate:"visible",exit:"exit",layout:"position",layoutId:p.id,children:e.jsx(Cx,{position:p,onAction:w})},p.id))}):e.jsxs(R.div,{className:"text-center py-12",variants:Ni,initial:"hidden",animate:"visible",exit:"exit",children:[e.jsx(td,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx(R.h3,{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"No positions found"}),e.jsx(R.p,{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Create a position to provide liquidity and earn fees"})]}),e.jsx(Sx,{isOpen:m,onClose:()=>c(!1),position:v}),e.jsx(Fx,{isOpen:u,onClose:()=>x(!1),position:v}),e.jsx(Ex,{isOpen:f,onClose:()=>N(!1),position:v})]}):e.jsxs(R.div,{className:"flex flex-col items-center justify-center min-h-[400px]",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[e.jsx(it,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx(R.h3,{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"No positions"}),e.jsx(R.p,{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Connect your wallet to view your positions"}),e.jsx(R.div,{className:"mt-6",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},children:e.jsx("button",{onClick:open,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-lg text-black bg-[#00ffbd] hover:bg-[#00ffbd]/90",children:"Connect Wallet"})})]})}const Zo=e0(a=>({version:"v2",setVersion:t=>a({version:t})}));function Dx(){const{version:a,setVersion:t}=Zo();return e.jsxs("div",{className:"flex items-center justify-center space-x-2 p-1.5 bg-white/10 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("button",{onClick:()=>t("v2"),className:`px-4 py-1.5 rounded-lg font-medium text-sm transition-all duration-200 ${a==="v2"?"bg-[#00ffbd] text-black shadow-[0_0_10px_#00ffbd]":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"V2"}),e.jsx("button",{onClick:()=>t("v3"),className:`px-4 py-1.5 rounded-lg font-medium text-sm transition-all duration-200 ${a==="v3"?"bg-[#00ffbd] text-black shadow-[0_0_10px_#00ffbd]":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:"V3"})]})}function Mx({initialTokens:a,poolAddress:t}){const[s,n]=i.useState("add"),[r,l]=i.useState(null),d=Pt();return i.useEffect(()=>{(async()=>{if(t)try{const m=await d.getPoolDetails(t);l(m),n("add")}catch(m){console.error("Error fetching pool details:",m)}})()},[t,d]),e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Add/Remove Liquidity"}),r&&e.jsxs("div",{className:"mb-6 p-4 bg-white/5 dark:bg-[#2d2f36] rounded-xl border border-gray-200 dark:border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"Pool Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tokens"}),e.jsxs("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:[r.token0Symbol,"/",r.token1Symbol]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Liquidity"}),e.jsxs("p",{className:"text-base font-medium text-gray-900 dark:text-white",children:["$",r.totalLiquidity?.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex space-x-1 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-1 mb-6",children:[e.jsx("button",{onClick:()=>n("add"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${s==="add"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Add Liquidity"}),e.jsx("button",{onClick:()=>n("remove"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${s==="remove"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Remove Liquidity"})]}),e.jsx("div",{className:"mt-4",children:s==="add"?e.jsx(Ku,{initialTokens:a,poolAddress:t,poolDetails:r}):e.jsx(ux,{initialTokens:a,poolAddress:t,poolDetails:r})})]})}function Px(){const[a,t]=i.useState("add");return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white/5 dark:bg-[#1a1b1f] rounded-2xl border border-gray-200 dark:border-gray-800 shadow-xl",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-6",children:"Manage Liquidity"}),e.jsxs("div",{className:"flex space-x-1 bg-white/5 dark:bg-[#2d2f36] rounded-xl p-1 mb-6",children:[e.jsx("button",{onClick:()=>t("add"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${a==="add"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Add Liquidity"}),e.jsx("button",{onClick:()=>t("remove"),className:`flex-1 px-4 py-2 text-sm font-medium rounded-lg transition-all
            ${a==="remove"?"bg-[#00ffbd] text-black shadow-lg shadow-[#00ffbd]/20":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}
          `,children:"Remove Liquidity"})]}),e.jsx("div",{className:"mt-4",children:a==="add"?e.jsx(lx,{}):e.jsx(hx,{})})]})}const $x=a=>a==="v2"?[{id:"swap",label:"Swap",icon:Fa},{id:"my-pools",label:"My Pools",icon:Sn},{id:"pool",label:"Create Pool",icon:Fn},{id:"liquidity",label:"Add/Remove Liquidity",icon:ad}]:[{id:"swap",label:"Swap",icon:Fa},{id:"my-pools",label:"My Positions",icon:Sn},{id:"pool",label:"Create Position",icon:Fn}];function Jo(){const a=fs(),[t,s]=i.useState("swap"),[n,r]=i.useState(null),[l,d]=i.useState(null),{chain:o}=Ft(),{address:m}=Oe(),[c,u]=i.useState(!1),[x,f]=i.useState([]),{version:N}=Zo(),v=$x(N),{openConnectModal:C}=ua(),E=(p,y)=>{s(p),y?.selectedTokens&&r(y.selectedTokens),y?.poolAddress&&d(y.poolAddress)};i.useEffect(()=>{const p=y=>{if(y.key.toLowerCase()==="z"){const g=Date.now();f(j=>{const T=[...j,g].slice(-3);return T.length===3&&T[2]-T[0]<=2e3?(u(b=>!b),[]):T})}};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[]),i.useEffect(()=>{a.state?.activeTab&&s(a.state.activeTab)},[a.state]);const w=p=>{if(!o)return null;const y=o.id===1301||o.id===130,g=o.id===10143;if(!(y||g)&&!c)return e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-8 h-8"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Please switch to a supported network"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Trading is available on Unichain networks and Monad Testnet"})]})]})});switch(p){case"swap":if(y||g)return N==="v2"?e.jsx(fu,{}):e.jsx(Nu,{});if(o.id===11155111&&c)return e.jsx(su,{});break;case"pool":if(y||g)return N==="v2"?e.jsx(Bu,{setActiveTab:E}):e.jsx(Lu,{setActiveTab:E});if(o.id===11155111&&c)return e.jsx(ku,{setActiveTab:E});break;case"liquidity":if(y||g)return N==="v2"?e.jsx(Mx,{initialTokens:n,poolAddress:l}):e.jsx(Px,{initialTokens:n,poolAddress:l});if(o.id===11155111&&c)return e.jsx(Uu,{initialTokens:n,poolAddress:l});break;case"my-pools":if(y||g)return N==="v2"?e.jsx(jx,{}):e.jsx(Bx,{});if(o.id===11155111&&c)return e.jsx(fx,{});break}return e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-8 h-8"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Please switch to a supported network"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Trading is available on Unichain networks and Monad Testnet"})]})]})})};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trading"}),e.jsx("div",{className:"flex items-center gap-4",children:c&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-900",children:"Dev Mode"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(p=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${p*.2}s`}},p))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:m?e.jsxs(e.Fragment,{children:[o?.id===11155111&&!c&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"You are connected to Sepolia network. Please switch to Unichain network or enable Dev Mode to use Sepolia."})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar",children:v.map(p=>e.jsxs("button",{onClick:()=>E(p.id),className:`
                          flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap
                          transition-all duration-200 relative group
                          ${t===p.id?"text-[#00ffbd] bg-[#00ffbd]/10":"text-gray-500 dark:text-gray-400 bg-white dark:bg-[#1a1b1f] hover:bg-gray-50 dark:hover:bg-[#1a1b1f]/80"}
                          border border-gray-100 dark:border-gray-800
                        `,children:[e.jsx(p.icon,{size:16}),p.label,e.jsx("div",{className:`
                          absolute bottom-0 left-0 right-0 h-0.5 rounded-full
                          transition-all duration-200
                          ${t===p.id?"bg-[#00ffbd]":"bg-transparent group-hover:bg-[#00ffbd]/30"}
                        `})]},p.id))}),o?.id===lc.id&&e.jsx(Dx,{})]}),e.jsxs("div",{className:"h-[calc(100vh-280px)] overflow-y-auto custom-scrollbar",children:[t==="swap"&&w("swap"),t==="pool"&&w("pool"),t==="liquidity"&&w("liquidity"),t==="my-pools"&&w("my-pools")]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6 max-w-md",children:"Please connect your wallet to access the trading features. You'll be able to swap tokens, manage liquidity, and more."}),e.jsxs("button",{onClick:C,className:"px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Connect Wallet"]})]})})]})]})})}BigInt(2e10),BigInt(1e11),BigInt(1e9),BigInt(5e10);const dr={MAINNET:"0x81014F44b0a345033bB2b3B21C7a1A308B35fEeA",SEPOLIA:"0xea58fcA6849d79EAd1f26608855c2D6407d54Ce2",UNICHAIN_MAINNET:"0x81014F44b0a345033bB2b3B21C7a1A308B35fEeA",UNICHAIN_TESTNET:"0xea58fcA6849d79EAd1f26608855c2D6407d54Ce2"},Lx=[{inputs:[{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"bridgeETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"bridgeETHTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_l1Token",type:"address"},{internalType:"address",name:"_l2Token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_l1Token",type:"address"},{internalType:"address",name:"_l2Token",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositERC20To",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositETHTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"messenger",outputs:[{internalType:"contract CrossDomainMessenger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],ki=({children:a,content:t})=>{const[s,n]=i.useState(!1);return e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:a}),s&&e.jsx("div",{className:"absolute z-50 px-3 py-2 text-sm bg-gray-900 text-white rounded-lg shadow-lg whitespace-nowrap",children:t})]})},Rx=()=>e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-[#00ffbd] rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-[1px] h-[40%] bg-[#00ffbd] origin-bottom",style:{transform:"translate(-50%, -100%) rotate(0deg)",animation:"rotate 2s linear infinite"}}),e.jsx("style",{jsx:!0,children:`
      @keyframes rotate {
        from { transform: translate(-50%, -100%) rotate(0deg); }
        to { transform: translate(-50%, -100%) rotate(360deg); }
      }
    `})]}),Ox=({targetTime:a})=>{const[t,s]=i.useState(a);i.useEffect(()=>{const r=setInterval(()=>{s(l=>l<=0?(clearInterval(r),0):l-1)},1e3);return()=>clearInterval(r)},[]);const n=r=>{const l=Math.floor(r/60),d=r%60;return`${l}m ${d}s remaining`};return e.jsxs("div",{className:"flex items-center gap-2 text-[#00ffbd]",children:[e.jsx(Rx,{}),e.jsx("span",{className:"text-sm",children:n(t)})]})},_x=({isOpen:a,onClose:t,currentStep:s,txHash:n,fromNetwork:r,toNetwork:l})=>{i.useState(Date.now());const d=(m,c)=>c.id===1?`https://etherscan.io/tx/${m}`:c.id===11155111?`https://sepolia.etherscan.io/tx/${m}`:"#",o=[{title:`Start on ${r?.name}`,description:"Bridge transaction initiated",status:s==="start"?"current":s?"complete":"upcoming",link:n?d(n,r):null},{title:"Wait ~3 mins",description:"Transaction processing",status:s==="waiting"?"current":s==="complete"?"complete":"upcoming",timer:s==="waiting"?180:null},{title:`Get ETH on ${l?.name}`,description:"Bridge complete",status:s==="complete"?"complete":"upcoming"}];return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:"Bridge Progress"}),e.jsx("div",{className:"mt-4 space-y-6",children:o.map((m,c)=>e.jsxs("div",{className:"relative",children:[c!==o.length-1&&e.jsx("div",{className:`absolute left-3.5 top-8 w-0.5 h-full ${m.status==="complete"?"bg-[#00ffbd]":"bg-gray-200 dark:bg-gray-700"}`}),e.jsxs("div",{className:"relative flex items-start",children:[e.jsx("div",{className:`flex h-7 w-7 shrink-0 items-center justify-center rounded-full ${m.status==="complete"?"bg-[#00ffbd]":m.status==="current"?"bg-blue-500":"bg-gray-200 dark:bg-gray-700"}`,children:m.status==="complete"?e.jsx(Qc,{className:"h-4 w-4 text-black"}):m.status==="current"?e.jsx("div",{className:"h-2 w-2 rounded-full bg-white animate-pulse"}):null}),e.jsxs("div",{className:"ml-4 min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:m.description}),m.timer&&m.status==="current"&&e.jsx("div",{className:"mt-2",children:e.jsx(Ox,{targetTime:m.timer})}),m.link&&e.jsx("a",{href:m.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-[#00ffbd] hover:text-[#00e6a9] mt-1 inline-block",children:"View in explorer ↗"})]})]})]},c))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",className:"w-full rounded-lg bg-gray-100 dark:bg-gray-800 px-4 py-2 text-sm font-medium text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none",onClick:t,children:"Close"})})]})})})})]})})},Ux=({isOpen:a,onClose:t,onAccept:s})=>{const[n,r]=i.useState({time:!1,cancellation:!1,fees:!1}),l=Object.values(n).every(Boolean);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-transparent p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4 mb-6",children:[e.jsx(le.Title,{as:"h3",className:"text-xl font-bold text-gray-900 dark:text-white",children:"Accept terms"}),e.jsx("p",{className:"text-base text-gray-700 dark:text-gray-400 mt-2",children:"Please read and agree to the following terms before you continue"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 text-[#00ffbd] bg-gray-100 dark:bg-[#2d2f36] border-gray-300 dark:border-gray-600 rounded focus:ring-[#00ffbd] focus:ring-offset-0 focus:ring-2 dark:focus:ring-offset-[#1a1b1f] transition-colors cursor-pointer",checked:n.time,onChange:d=>r(o=>({...o,time:d.target.checked}))}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:"I understand it will take ~3 mins until my funds are on Unichain Sepolia"})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 text-[#00ffbd] bg-gray-100 dark:bg-[#2d2f36] border-gray-300 dark:border-gray-600 rounded focus:ring-[#00ffbd] focus:ring-offset-0 focus:ring-2 dark:focus:ring-offset-[#1a1b1f] transition-colors cursor-pointer",checked:n.cancellation,onChange:d=>r(o=>({...o,cancellation:d.target.checked}))}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:"I understand once a bridge is initiated it cannot be sped up or cancelled"})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 text-[#00ffbd] bg-gray-100 dark:bg-[#2d2f36] border-gray-300 dark:border-gray-600 rounded focus:ring-[#00ffbd] focus:ring-offset-0 focus:ring-2 dark:focus:ring-offset-[#1a1b1f] transition-colors cursor-pointer",checked:n.fees,onChange:d=>r(o=>({...o,fees:d.target.checked}))}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:"I understand network fees are approximate and will change"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",className:`w-full px-4 py-3 text-sm font-medium rounded-xl transition-colors ${l?"bg-[#00ffbd] text-black hover:bg-[#00e6a9]":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,onClick:()=>l&&s(),disabled:!l,children:"Continue"})})]})})})})]})})},Wx=()=>e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-gray-50 dark:bg-[#2d2f36] rounded-xl p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-1"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white/50 dark:bg-black/20 p-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-16 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),e.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-16 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})]})}),Hx=({mode:a,onChange:t})=>e.jsxs("div",{className:"flex items-center gap-2 p-1 bg-[#1a1b1f] rounded-lg mb-4",children:[e.jsx("button",{className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${a==="mainnet"?"bg-[#2d2f36] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>t("mainnet"),children:"Mainnet"}),e.jsx("button",{className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${a==="testnet"?"bg-[#2d2f36] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>t("testnet"),children:"Testnet"})]}),qx=({isOpen:a,onClose:t,address:s,setShowProgress:n,setCurrentStep:r,setTxHash:l})=>{const[d,o]=i.useState([]),[m,c]=i.useState(!0),[u,x]=i.useState("testnet"),f=async()=>{if(s){c(!0);try{let N=[];const v="JE5C1JTK2C629S4T8XVWD125CE37QZ83QS";u==="mainnet"?N=await Promise.all([fetch(`https://api.etherscan.io/api?module=account&action=txlist&address=${s}&startblock=0&endblock=99999999&sort=desc&apikey=${v}`),fetch(`https://unichain.blockscout.com/api/v2/addresses/${s}/transactions`)]):N=await Promise.all([fetch(`https://api-sepolia.etherscan.io/api?module=account&action=txlist&address=${s}&startblock=0&endblock=99999999&sort=desc&apikey=${v}`),fetch(`https://unichain-sepolia.blockscout.com/api/v2/addresses/${s}/transactions`)]);const[C,E]=await Promise.all(N.map(async y=>{if(!y.ok)return{result:[]};const g=await y.json();return g.result?g:{result:g.items||[]}})),w=u==="mainnet"?dr.MAINNET.toLowerCase():dr.SEPOLIA.toLowerCase(),p=[...(C.result||[]).filter(y=>(typeof y.to=="string"?y.to.toLowerCase():"")===w).map(y=>({hash:y.hash,timestamp:new Date(y.timeStamp*1e3).getTime(),value:ze(y.value||"0"),fromNetwork:u==="mainnet"?"ETH Mainnet":"Sepolia",toNetwork:u==="mainnet"?"Unichain Mainnet":"Unichain Testnet",status:y.confirmations>12?"completed":"pending",fee:y.gasPrice?ze(BigInt(y.gasPrice)*BigInt(y.gasUsed||"21000")):"0"})),...(E.result||[]).filter(y=>(typeof y.to=="string"?y.to.toLowerCase():y.to?.hash?.toLowerCase()||"")===w).map(y=>({hash:y.hash,timestamp:new Date(y.timestamp||y.timeStamp*1e3).getTime(),value:ze(y.value||"0"),fromNetwork:u==="mainnet"?"Unichain Mainnet":"Unichain Testnet",toNetwork:u==="mainnet"?"ETH Mainnet":"Sepolia",status:y.confirmations>12?"completed":"pending",fee:y.gasPrice?ze(BigInt(y.gasPrice)*BigInt(y.gasUsed||"21000")):"0"}))];console.log("Fetched activities:",p),o(p.sort((y,g)=>g.timestamp-y.timestamp))}catch(N){console.error("Error fetching bridge history:",N),M.error("Failed to load bridge history")}finally{c(!1)}}};return i.useEffect(()=>{a&&s&&f()},[a,s,u]),e.jsxs(le,{open:a,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(le.Panel,{className:"w-full max-w-2xl bg-[#0d0e12] rounded-2xl flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[e.jsx(le.Title,{className:"text-xl font-semibold text-white",children:"Bridge History"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(xa,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-800",children:e.jsx(Hx,{mode:u,onChange:x})}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx("div",{className:"p-6 space-y-4",children:m?Array.from({length:3}).map((N,v)=>e.jsx(Wx,{},v)):d.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:"No bridge transactions found"})}):e.jsx(e.Fragment,{children:d.map((N,v)=>e.jsxs("div",{className:"bg-[#1a1b1f] rounded-xl p-5 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/eth-logo.png",alt:"ETH",className:"w-6 h-6"}),e.jsxs("span",{className:"text-white font-medium",children:[N.value," ETH"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400",children:new Date(N.timestamp).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(N.timestamp).toLocaleTimeString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-black/20 p-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:N.fromNetwork.includes("ETH")?"/eth.png":N.fromNetwork.includes("Sepolia")?"/sepolia.png":"/unichain-logo.png",alt:N.fromNetwork,className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-gray-400",children:N.fromNetwork})]}),e.jsx(an,{className:"text-[#00ffbd]",size:12}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:N.toNetwork.includes("ETH")?"/eth.png":N.toNetwork.includes("Sepolia")?"/sepolia.png":"/unichain-logo.png",alt:N.toNetwork,className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-gray-400",children:N.toNetwork})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:N.status==="completed"?"text-green-400":"text-yellow-400",children:N.status==="completed"?"Completed":"Pending"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Network Fee"}),e.jsxs("span",{className:"text-gray-400",children:[parseFloat(N.fee).toFixed(6)," ETH"]})]})]},v))})})})]})})]})},zx=({isOpen:a,onClose:t,onConfirm:s,amount:n,fromNetwork:r,toNetwork:l})=>e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:"Transaction Summary"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-[#2d2f36] p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r?.logo,alt:"From Network",className:"w-6 h-6"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r?.name})]}),e.jsx(an,{className:"text-[#00ffbd]",size:12}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:l?.logo,alt:"To Network",className:"w-6 h-6"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:l?.name})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/eth-logo.png",alt:"ETH",className:"w-5 h-5"}),e.jsxs("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:[n," ETH"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Network Fee"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"Check wallet for fee"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsx(hs,{className:"text-blue-500",size:20}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Estimated completion time: ~3 mins"})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{type:"button",className:"w-full px-4 py-3 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-xl transition-colors",onClick:s,children:"Confirm Bridge"}),e.jsx("button",{type:"button",className:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 font-medium rounded-xl transition-colors",onClick:t,children:"Cancel"})]})]})})})})]})}),$t={eth:{mainnet:{id:1,name:"ETH Mainnet",logo:"/eth.png",disabled:!1,bridgeAddress:dr.MAINNET},testnet:{id:11155111,name:"Sepolia",logo:"/sepolia.png",bridgeAddress:dr.SEPOLIA}},unichain:{mainnet:{id:130,name:"Unichain Mainnet",logo:"/unichain-logo.png",disabled:!1},testnet:{id:1301,name:"Unichain Testnet",logo:"/unichain-logo.png"}}};function Ko(){return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Bridge"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-4 md:p-6 rounded-xl",children:e.jsx(Vx,{})})]})]})})}function Vx(){const{address:a,isConnected:t}=Oe(),{chain:s}=Ft(),{openConnectModal:n}=ua();Pt();const[r,l]=i.useState(!0),[d,o]=i.useState($t.eth.mainnet),[m,c]=i.useState($t.unichain.mainnet),[u,x]=i.useState(!1),[f,N]=i.useState(""),[v,C]=i.useState(!1),[E,w]=i.useState(!1),[p,y]=i.useState(null),[g,j]=i.useState("0"),[T,b]=i.useState(!1),[$,L]=i.useState(null),[S,A]=i.useState(!1),[h,I]=i.useState({isCorrectNetwork:!1,message:""}),[O,F]=i.useState(!1),[U,V]=i.useState(!1),[P,B]=i.useState(!1),[k,D]=i.useState(!1);i.useEffect(()=>{t&&(s?.id===d.id?I({isCorrectNetwork:!0,message:`Connected to ${d.name}`}):I({isCorrectNetwork:!1,message:`Please switch to ${d.name}`}))},[s?.id,t,d]),i.useEffect(()=>{let Y=!0,W;const Q=async()=>{if(!(!a||!Y))try{A(!0);const Z=await new he(window.ethereum).getBalance(a);Y&&(j(ze(Z)),A(!1))}catch{Y&&A(!1)}},G=()=>{W&&clearTimeout(W),W=setTimeout(Q,1e3)};return Q(),window.ethereum&&(window.ethereum.on("block",G),window.ethereum.on("chainChanged",Q),window.ethereum.on("accountsChanged",Q)),()=>{Y=!1,W&&clearTimeout(W),window.ethereum&&(window.ethereum.removeListener("block",G),window.ethereum.removeListener("chainChanged",Q),window.ethereum.removeListener("accountsChanged",Q))}},[a,s?.id]),i.useCallback(async Y=>{try{return await new(void 0).JsonRpcProvider("https://rpc.sepolia.org").getTransactionReceipt(Y)}catch{return null}},[]);const _=Y=>{const W=Y.target.value;(W===""||/^\d*\.?\d*$/.test(W))&&N(W)},H=()=>{if(!f||!h.isCorrectNetwork)return;const Y=parseFloat(f),W=parseFloat(g);if(Y<=0){M.error("Please enter a valid amount");return}if(Y>W){M.error("Insufficient ETH balance");return}F(!0)},X=async()=>{C(!1),w(!0),y("start"),b(!0);try{const W=await new he(window.ethereum).getSigner(),Q=await W.getAddress(),G=Ut(f),Z=await new J(d.bridgeAddress,Lx,W).bridgeETHTo(Q,200000n,"0x",{value:G});if(L(Z.hash),(await Z.wait()).status===0)throw new Error("Bridge transaction failed");y("waiting"),setTimeout(()=>{y("complete"),b(!1)},18e4)}catch(Y){M.error(Y.message||"Failed to bridge ETH"),b(!1),w(!1),y(null),L(null)}};i.useEffect(()=>{const Y=async()=>{if(a)try{const Q=await fetch(`https://eth-sepolia.blockscout.com/api/v2/addresses/${a}/transactions?filter=to%7C${d.bridgeAddress}`);if(!Q.ok)return;const q=(await Q.json()).items.filter(Z=>{const ie=new Date(Z.timestamp).getTime(),ne=Math.floor((Date.now()-ie)/(1e3*60));return Z.to?.hash?.toLowerCase()===d.bridgeAddress.toLowerCase()&&Z.value!=="0"&&Z.decoded_input?.method_call?.includes("bridgeETH")&&(Z.confirmations===0||Z.confirmations>0&&ne<3)});V(q.length>0)}catch(Q){console.error("Error checking pending transactions:",Q)}};Y();const W=setInterval(Y,1e4);return()=>clearInterval(W)},[a,d.bridgeAddress]);const z=(Y,W)=>{if(Y.disabled){M.error("This network is coming soon!");return}W==="from"?(o(Y),c(r?$t.unichain.mainnet:$t.unichain.testnet),B(!1)):(c(Y),o(r?$t.eth.mainnet:$t.eth.testnet),D(!1))},se=({isOpen:Y,onClose:W,onSelect:Q,type:G,anchorRef:q})=>{if(!Y||!q.current)return null;const Z=q.current.getBoundingClientRect(),ie=G==="from"?$t.eth:$t.unichain,ne=r?ie.mainnet:ie.testnet;return tn.createPortal(e.jsx("div",{className:"fixed z-50",style:{top:`${Z.bottom+8}px`,left:G==="from"?`${Z.left}px`:"auto",right:G==="to"?`${window.innerWidth-Z.right}px`:"auto"},children:e.jsx("div",{className:"w-64 bg-white dark:bg-[#1a1b1f] rounded-xl shadow-xl border border-gray-200 dark:border-gray-800 py-2",children:e.jsxs("div",{className:"px-3 py-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:r?"Mainnet":"Testnet"}),e.jsxs("button",{onClick:()=>Q(ne),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#2d2f36] transition-colors",disabled:ne.disabled,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-[#2d2f36] flex items-center justify-center",children:e.jsx("img",{src:ne.logo,alt:ne.name,className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:ne.name}),ne.comingSoon&&e.jsx("span",{className:"text-xs text-[#00ffbd] ml-auto",children:"Coming Soon"})]})]})})}),document.body)},ee=i.useRef(null),te=i.useRef(null);return i.useEffect(()=>{const Y=W=>{ee.current&&!ee.current.contains(W.target)&&B(!1),te.current&&!te.current.contains(W.target)&&D(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]),i.useEffect(()=>{r?(o($t.eth.mainnet),c($t.unichain.mainnet)):(o($t.eth.testnet),c($t.unichain.testnet))},[r]),t?e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-2xl p-4 md:p-6 border border-gray-200 dark:border-gray-800 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(!0),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${r?"bg-[#00ffbd] text-black":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Mainnet"}),e.jsx("button",{onClick:()=>l(!1),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${r?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700":"bg-[#00ffbd] text-black"}`,children:"Testnet"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-3 px-4 py-2 bg-gray-50 dark:bg-[#2d2f36] rounded-full text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#3d4046] transition-colors border border-gray-200 dark:border-gray-700",children:[e.jsx(hs,{className:`text-[#00ffbd] ${U?"animate-spin":""}`,size:20}),e.jsx("span",{children:"History"}),U&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#00ffbd] animate-pulse"})]})]}),e.jsx("div",{className:"relative bg-gray-50 dark:bg-[#1a1b1f] rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"From"}),e.jsxs("div",{className:"relative",ref:ee,children:[e.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3d4046] transition-colors",onClick:()=>{B(!P),D(!1)},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#627EEA]/10 dark:bg-[#627EEA]/20 flex items-center justify-center",children:e.jsx("img",{src:d.logo,alt:d.name,className:"w-7 h-7"})}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:d.name}),e.jsx(tr,{className:`ml-1 transition-transform text-gray-900 dark:text-white ${P?"rotate-180":""}`,size:20})]}),e.jsx(se,{isOpen:P,onClose:()=>B(!1),onSelect:Y=>z(Y,"from"),type:"from",anchorRef:ee})]})]}),e.jsx("div",{className:"relative",children:e.jsx(R.div,{className:"w-10 h-10 rounded-full bg-white dark:bg-[#1a1b1f] flex items-center justify-center border border-gray-200 dark:border-gray-700",animate:{x:[0,5,0]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0},children:e.jsx(an,{size:16,className:"text-[#00ffbd]"})})}),e.jsxs("div",{className:"flex-1 text-right pl-6",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"To"}),e.jsx("div",{className:"flex items-center gap-2 justify-end",children:e.jsxs("div",{className:"relative",ref:te,children:[e.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3d4046] transition-colors",onClick:()=>{D(!k),B(!1)},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#FF3B9A]/10 dark:bg-[#FF3B9A]/20 flex items-center justify-center",children:e.jsx("img",{src:m.logo,alt:m.name,className:"w-7 h-7"})}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:m.name}),e.jsx(tr,{className:`ml-1 transition-transform text-gray-900 dark:text-white ${k?"rotate-180":""}`,size:20})]}),e.jsx(se,{isOpen:k,onClose:()=>D(!1),onSelect:Y=>z(Y,"to"),type:"to",anchorRef:te})]})})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(ki,{content:e.jsxs("div",{children:["Min: 0.001 ETH",e.jsx("br",{}),"Max: 100 ETH"]}),children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400 cursor-help",children:[e.jsx(On,{className:"h-4 w-4"}),"Bridge Limits"]})}),e.jsx(Ze,{mode:"wait",children:e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex items-center gap-2",children:[e.jsx(it,{className:"text-gray-500 dark:text-gray-400",size:20}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:S?e.jsx(R.div,{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):`Balance: ${parseFloat(g).toFixed(4)} ETH`})]},S?"loading":"loaded")})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:f,onChange:_,placeholder:"0.0",className:`w-full px-4 py-3 bg-gray-50 dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-2xl font-medium ${T?"opacity-50 cursor-not-allowed":""}`,disabled:T})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-base text-gray-900 dark:text-white font-medium",children:"Get on Unichain Sepolia"}),e.jsxs("div",{className:"flex items-center gap-2 bg-[#FF3B9A]/10 dark:bg-[#FF3B9A]/20 px-3 py-1.5 rounded-lg",children:[e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"Native Bridge"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(ki,{content:"Transaction fee will be calculated by your wallet",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 cursor-help",children:[e.jsx(rd,{className:"text-gray-500 dark:text-gray-400",size:16}),e.jsx("span",{children:"Network Fee"}),e.jsx(On,{className:"h-4 w-4"})]})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Check wallet for fee"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(hs,{className:"text-gray-500 dark:text-gray-400",size:18}),e.jsx("span",{children:"Estimated time"})]}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"~3 mins"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You will receive"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:f||"0"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:"/eth-logo.png",alt:"ETH",className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"ETH"}),e.jsx("div",{className:"relative w-3 h-3",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-3 h-3 absolute -bottom-1 -right-1"})})]})]})]})]})]}),e.jsx("button",{onClick:H,disabled:!f||T||!h.isCorrectNetwork,className:`w-full mt-6 px-4 py-3 rounded-xl font-medium text-base transition-all duration-200 hover:scale-[0.99] active:scale-[0.97] ${f&&!T&&h.isCorrectNetwork?"bg-[#00ffbd] text-black hover:bg-[#00e6a9] shadow-lg hover:shadow-xl":"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:T?"Processing...":h.isCorrectNetwork?f?"Review bridge":"Enter amount":"Please switch to Sepolia"})]}),e.jsxs("div",{className:"mt-4 md:mt-6 p-4 bg-gray-50 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Looking to bridge from Unichain to Sepolia?"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Try these alternative bridges:"," ",e.jsx("a",{href:"https://superbridge.app/unichain-sepolia",target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:text-[#00e6a9] mr-2",children:"SuperBridge"})," ","or"," ",e.jsx("a",{href:"https://testnet.brid.gg/unichain-sepolia",target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:text-[#00e6a9]",children:"Brid.gg"})]})]}),e.jsx(qx,{isOpen:u,onClose:()=>x(!1),address:a,setShowProgress:w,setCurrentStep:y,setTxHash:L}),e.jsx(Ux,{isOpen:v,onClose:()=>C(!1),onAccept:X}),e.jsx(_x,{isOpen:E,onClose:()=>w(!1),currentStep:p,txHash:$,fromNetwork:d,toNetwork:m}),e.jsx(zx,{isOpen:O,onClose:()=>F(!1),onConfirm:()=>{F(!1),C(!0)},amount:f,fromNetwork:d,toNetwork:m})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(Y=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${Y*.2}s`}},Y))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#e6fff7] dark:bg-[#002419] flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-[28px] font-semibold text-gray-900 dark:text-white mb-4",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-600 dark:text-[#7f8596] text-center mb-8 max-w-[460px] text-base",children:"Please connect your wallet to bridge your NFTs between networks. You'll be able to transfer your NFTs across different blockchains."}),e.jsxs("button",{onClick:n,className:"inline-flex items-center px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200",children:[e.jsx("span",{className:"mr-2",children:"+"}),"Connect Wallet"]})]})})]})}const Gx="0x5828D525fe00902AE22f2270Ac714616651894fF",Zs={TOKEN_CREATE:"0x6962f49e",NFT_CREATE:"0x54a9c682"},jt={137:{name:"Polygon",currency:"POL",factoryAddress:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",nftFactoryAddress:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",rpc:"https://polygon-rpc.com",chainId:"0x89"},130:{name:"Unichain Mainnet",currency:"ETH",factoryAddress:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",nftFactoryAddress:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",rpc:"https://mainnet.unichain.org",chainId:"0x82"},1301:{name:"Unichain",currency:"ETH",factoryAddress:"0x08a58b1628Fb449635078355Be83e181EFBe3948",nftFactoryAddress:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",rpc:"https://sepolia.unichain.org",chainId:"0x515"},1828369849:{name:"Moonwalker",currency:"ZERO",factoryAddress:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",nftFactoryAddress:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",rpc:"https://moonwalker-rpc.eu-north-2.gateway.fm",chainId:"0x6CFF49C9"},10143:{name:"Monad Testnet",currency:"MON",factoryAddress:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426",nftFactoryAddress:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02",rpc:"https://testnet-rpc.monad.xyz/",chainId:"0x279F"}},os=["function chainFees(uint256) view returns (uint256)","function setChainFee(uint256,uint256)","function getChainFee() view returns (uint256)","function withdrawFees() external","function withdraw() external","event TokenCreated(address indexed creator, address indexed tokenAddress, string name, string symbol, uint8 decimals, uint256 initialSupply, string logoURI)","event NFTCollectionCreated(address indexed creator, address collectionAddress)"];function el(){const{address:a}=Oe(),[t,s]=i.useState("1301"),[n,r]=i.useState({}),[l,d]=i.useState({}),[o,m]=i.useState(!0),[c,u]=i.useState({}),[x,f]=i.useState(null),[N,v]=i.useState({}),[C,E]=i.useState({tokens:[],nfts:[]}),w=a?.toLowerCase()===Gx.toLowerCase(),p=S=>{const A=jt[S];return new Ot(A.rpc,{chainId:Number(S),name:A.name})},y=async()=>{try{const S=new Set,A=new Set,h=new Set,I=new Set;let O=0,F=0,U=0,V=0;const P=[],B=[],k=Math.floor((Date.now()-24*60*60*1e3)/1e3),D=jt[t];try{const _=t==="1301"?"https://unichain-sepolia.blockscout.com":t==="130"?"https://unichain.blockscout.com":t==="137"?"https://api.polygonscan.com/api":"https://moonwalker-blockscout.eu-north-2.gateway.fm";if(t==="137"){const H="264JGIIIMW61H1F8J33BZFQWJNSGPDR9S9",X=`${_}?module=account&action=txlist&address=${D.factoryAddress}&apikey=${H}`,z=`${_}?module=account&action=txlist&address=${D.nftFactoryAddress}&apikey=${H}`,[se,ee]=await Promise.all([fetch(X),fetch(z)]);if(!se.ok||!ee.ok)throw new Error("Polygonscan API request failed");const[te,Y]=await Promise.all([se.json(),ee.json()]);if(Y.result&&Array.isArray(Y.result)){for(const W of Y.result)if(W.to?.toLowerCase()===D.nftFactoryAddress?.toLowerCase()&&W.isError==="0"&&W.input?.startsWith(Zs.NFT_CREATE)){F++;const Q=W.from?.toLowerCase();if(Q){A.add(Q);const G=parseInt(W.timeStamp);G>=k&&(I.add(Q),V++),B.push({hash:W.hash,creator:W.from,timestamp:new Date(G*1e3).toISOString(),blockNumber:W.blockNumber})}}}if(te.result&&Array.isArray(te.result)){for(const W of te.result)if(W.to?.toLowerCase()===D.factoryAddress?.toLowerCase()&&W.isError==="0"&&W.input?.startsWith(Zs.TOKEN_CREATE)){O++;const Q=W.from?.toLowerCase();if(Q){S.add(Q);const G=parseInt(W.timeStamp);G>=k&&(h.add(Q),U++),P.push({hash:W.hash,creator:W.from,timestamp:new Date(G*1e3).toISOString(),blockNumber:W.blockNumber})}}}}else{const H=`${_}/api/v2/addresses/${D.factoryAddress}/transactions?filter=to|from`,X=`${_}/api/v2/addresses/${D.nftFactoryAddress}/transactions?filter=to|from`,[z,se]=await Promise.all([fetch(H),fetch(X)]);if(!z.ok||!se.ok)throw new Error("Blockscout API request failed");const[ee,te]=await Promise.all([z.json(),se.json()]);if(te.items&&Array.isArray(te.items)){for(const Y of te.items)if(Y.to?.hash?.toLowerCase()===D.nftFactoryAddress?.toLowerCase()&&Y.status==="ok"&&(Y.method===Zs.NFT_CREATE||Y.decoded_input?.method_id===Zs.NFT_CREATE.slice(2))){console.log("Found NFT creation:",Y.hash,Y.method,Y.decoded_input?.method_id),F++;const W=Y.from?.hash?.toLowerCase();W&&(A.add(W),new Date(Y.timestamp).getTime()/1e3>=k&&(I.add(W),V++),B.push({hash:Y.hash,creator:Y.from.hash,timestamp:Y.timestamp,blockNumber:Y.block_number}))}}if(ee.items&&Array.isArray(ee.items)){for(const Y of ee.items)if(Y.to?.hash?.toLowerCase()===D.factoryAddress?.toLowerCase()&&Y.status==="ok"&&(Y.method===Zs.TOKEN_CREATE||Y.decoded_input?.method_id===Zs.TOKEN_CREATE.slice(2))){console.log("Found token creation:",Y.hash,Y.method,Y.decoded_input?.method_id),O++;const W=Y.from?.hash?.toLowerCase();W&&(S.add(W),new Date(Y.timestamp).getTime()/1e3>=k&&(h.add(W),U++),P.push({hash:Y.hash,creator:Y.from.hash,timestamp:Y.timestamp,blockNumber:Y.block_number}))}}}v({totalTokenCreators:O,totalNFTCreators:F,last24hTokenCreators:U,last24hNFTCreators:V,uniqueTokenCreators:S.size,uniqueNFTCreators:A.size}),E({tokens:P.sort((H,X)=>new Date(X.timestamp)-new Date(H.timestamp)),nfts:B.sort((H,X)=>new Date(X.timestamp)-new Date(H.timestamp))})}catch{await g(S,h,k),await j(A,I,k)}}catch{M.error("Error fetching creator statistics")}},g=async(S,A,h)=>{const I=jt[t],O=p(t);await O.ready,new J(I.factoryAddress,os,O);const F=await O.getBlockNumber(),U=2e3,V=Math.max(0,F-5e4);for(let P=V;P<=F;P+=U){const B=Math.min(P+U-1,F);try{const k={address:I.factoryAddress,topics:[ln("TokenCreated(address,address,string,string,uint8,uint256,string)")],fromBlock:P,toBlock:B},D=await O.getLogs(k);for(const _ of D){const H=yo(_.topics[1],12).toLowerCase();S.add(H);const X=await O.getBlock(_.blockNumber);X&&X.timestamp>=h&&A.add(H)}}catch{}}},j=async(S,A,h)=>{const I=jt[t],O=p(t);await O.ready;const F=new J(I.nftFactoryAddress,os,O),U=await O.getBlockNumber(),V=2e3,P=Math.max(0,U-5e4);for(let B=P;B<=U;B+=V){const k=Math.min(B+V-1,U);try{const D=F.filters.NFTCollectionCreated(),_=await F.queryFilter(D,B,k);for(const H of _){const X=H.args.creator.toLowerCase();S.add(X);const z=await O.getBlock(H.blockNumber);z&&z.timestamp>=h&&A.add(X)}}catch{}}},T=async(S,A)=>{if(!w){M.error("Only admin can withdraw fees");return}const h=M.loading("Preparing withdrawal...");try{const I=await window.ethereum.request({method:"eth_chainId"}),O=jt[S].chainId;if(I!==O)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:O}]}),await new Promise(D=>setTimeout(D,1e3))}catch{M.error("Failed to switch network",{id:h});return}const U=await new he(window.ethereum).getSigner(),V=A==="token"?jt[S].factoryAddress:jt[S].nftFactoryAddress,P=new J(V,os,U),B=A==="token"?l[S]?.token:l[S]?.nft;if(!B||B==="0"){M.error("No fees available to withdraw",{id:h});return}M.loading("Please confirm the transaction...",{id:h});const k=await(A==="token"?P.withdraw():P.withdrawFees());M.loading("Processing withdrawal...",{id:h}),await k.wait(),M.success("Fees withdrawn successfully",{id:h}),await b()}catch(I){console.error("Error withdrawing fees:",I),M.error(`Error withdrawing fees: ${I.message}`,{id:h})}},b=async()=>{const S={};try{const A=jt[t];try{const h=p(t);await h.ready;const I=new J(A.factoryAddress,os,h),O=new J(A.nftFactoryAddress,os,h),[F,U]=await Promise.all([h.getBalance(A.factoryAddress),h.getBalance(A.nftFactoryAddress)]);S[t]={token:ze(F||"0"),nft:ze(U||"0"),currency:A.currency}}catch{S[t]={token:"0",nft:"0",currency:A.currency,error:!0}}d(S)}catch{M.error("Error fetching earned fees")}},$=async()=>{m(!0),f(null);const S={};try{const A=jt[t];try{const h=p(t);await h.ready;const I=new J(A.factoryAddress,os,h),O=new J(A.nftFactoryAddress,os,h),[F,U]=await Promise.all([I.chainFees(t),O.chainFees(t)]);S[t]={token:ze(F||"0"),nft:ze(U||"0"),currency:A.currency}}catch{S[t]={token:"0",nft:"0",currency:A.currency,error:!0},f(`Error fetching fees for ${A.name}. Please try again.`)}r(S)}catch{f("Failed to fetch fees. Please try again."),M.error("Error fetching fees")}finally{m(!1)}},L=async(S,A,h)=>{if(!w){M.error("Only admin can update fees");return}if(!h||isNaN(h)){M.error("Please enter a valid fee amount");return}const I=M.loading("Updating fee...");try{const F=await new he(window.ethereum).getSigner(),U=A==="token"?jt[S].factoryAddress:jt[S].nftFactoryAddress;await(await new J(U,os,F).setChainFee(S,Ut(h.toString()))).wait(),M.success("Fee updated successfully",{id:I}),await $()}catch{M.error("Error updating fee. Please try again.",{id:I})}};return i.useEffect(()=>{$(),b(),y()},[t]),w?e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Fees Dashboard"}),e.jsxs("button",{onClick:()=>{$(),b(),y()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]}),e.jsx("div",{className:"flex gap-4",children:Object.entries(jt).map(([S,A])=>e.jsxs("button",{onClick:()=>s(S),className:`px-6 py-3 rounded-xl flex items-center gap-2 transition-all ${t===S?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"bg-[#1a1a1a] text-gray-400 hover:bg-[#222222]"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t===S?"bg-white":"bg-gray-600"}`}),e.jsx("span",{className:"font-medium",children:A.name}),e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-black/30",children:A.currency})]},S))})]}),x&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-900/30 rounded-xl text-red-400 flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),x]}),o?e.jsxs("div",{className:"flex items-center justify-center h-64 text-gray-400",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-lg",children:"Loading dashboard data..."})]}):e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600/10 to-blue-800/10 rounded-xl border border-blue-900/20 p-6",children:[e.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:"Token Creations"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:N.totalTokenCreators||0}),e.jsxs("p",{className:"text-sm text-blue-400 mt-1",children:[e.jsxs("span",{className:"text-green-400",children:["+",N.last24hTokenCreators||0]})," in last 24h"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[N.uniqueTokenCreators||0," unique creators"]})]}),e.jsx("svg",{className:"w-12 h-12 text-blue-500/20",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3 1h6v2H7V5zm8 5.5a.5.5 0 01-.5.5h-7a.5.5 0 010-1h7a.5.5 0 01.5.5zm0 2a.5.5 0 01-.5.5h-7a.5.5 0 010-1h7a.5.5 0 01.5.5z",clipRule:"evenodd"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-600/10 to-purple-800/10 rounded-xl border border-purple-900/20 p-6",children:[e.jsx("h3",{className:"text-purple-400 font-medium mb-2",children:"NFT Creations"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:N.totalNFTCreators||0}),e.jsxs("p",{className:"text-sm text-purple-400 mt-1",children:[e.jsxs("span",{className:"text-green-400",children:["+",N.last24hNFTCreators||0]})," in last 24h"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[N.uniqueNFTCreators||0," unique creators"]})]}),e.jsx("svg",{className:"w-12 h-12 text-purple-500/20",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"Token Factory Fee"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Earned:"}),e.jsxs("span",{className:"text-green-400 font-medium",children:[l[t]?.token??"0"," ",jt[t].currency]}),l[t]?.token>0&&e.jsx("button",{onClick:()=>T(t,"token"),className:"ml-2 px-3 py-1 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Withdraw"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",step:"0.000000000000000001",className:"flex-1 bg-[#0a0a0a] border border-gray-800/50 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-blue-900/50 focus:ring-1 focus:ring-blue-900/50 transition-all",value:c[`${t}-token`]??n[t]?.token??"",onChange:S=>u({...c,[`${t}-token`]:S.target.value}),placeholder:`Current: ${n[t]?.token??"0"} ${n[t]?.currency}`}),e.jsx("button",{onClick:()=>L(t,"token",c[`${t}-token`]??n[t]?.token),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:"Update Fee"})]})})]}),e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"NFT Factory Fee"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Earned:"}),e.jsxs("span",{className:"text-green-400 font-medium",children:[l[t]?.nft??"0"," ",jt[t].currency]}),l[t]?.nft>0&&e.jsx("button",{onClick:()=>T(t,"nft"),className:"ml-2 px-3 py-1 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Withdraw"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",step:"0.000000000000000001",className:"flex-1 bg-[#0a0a0a] border border-gray-800/50 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-blue-900/50 focus:ring-1 focus:ring-blue-900/50 transition-all",value:c[`${t}-nft`]??n[t]?.nft??"",onChange:S=>u({...c,[`${t}-nft`]:S.target.value}),placeholder:`Current: ${n[t]?.nft??"0"} ${n[t]?.currency}`}),e.jsx("button",{onClick:()=>L(t,"nft",c[`${t}-nft`]??n[t]?.nft),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:"Update Fee"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsx("h2",{className:"text-lg font-medium text-white",children:"Recent Token Creations"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-400",children:[e.jsx("th",{className:"px-4 py-2",children:"Creator"}),e.jsx("th",{className:"px-4 py-2",children:"Time"}),e.jsx("th",{className:"px-4 py-2",children:"Tx Hash"})]})}),e.jsx("tbody",{children:C.tokens.map(S=>e.jsxs("tr",{className:"border-t border-gray-800/50 text-sm",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/address/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/address/"}${S.creator}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[S.creator.slice(0,6),"...",S.creator.slice(-4)]})}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:new Date(S.timestamp).toLocaleString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/tx/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/tx/"}${S.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[S.hash.slice(0,6),"...",S.hash.slice(-4)]})})]},S.hash))})]})})})]}),e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsx("h2",{className:"text-lg font-medium text-white",children:"Recent NFT Creations"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-400",children:[e.jsx("th",{className:"px-4 py-2",children:"Creator"}),e.jsx("th",{className:"px-4 py-2",children:"Time"}),e.jsx("th",{className:"px-4 py-2",children:"Tx Hash"})]})}),e.jsx("tbody",{children:C.nfts.map(S=>e.jsxs("tr",{className:"border-t border-gray-800/50 text-sm",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/address/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/address/"}${S.creator}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[S.creator.slice(0,6),"...",S.creator.slice(-4)]})}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:new Date(S.timestamp).toLocaleString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/tx/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/tx/"}${S.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[S.hash.slice(0,6),"...",S.hash.slice(-4)]})})]},S.hash))})]})})})]})]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white p-6",children:[e.jsx("h1",{className:"text-xl font-bold text-red-500",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Only admin can access this page."})]})}const Yx="hh-sol-artifact-1",Qx="MemeToken",Xx="contracts/MemeToken.sol",Zx=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"id",type:"uint256"}],name:"Snapshot",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!1,internalType:"uint256",name:"ethAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"tokenAmount",type:"uint256"}],name:"TokensPurchased",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"DEAD_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"DEV_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"LIQUIDITY_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MARKETING_WALLET",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"TREASURY_ADDRESS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"automatedMarketMakerPairs",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"account",type:"address"},{internalType:"uint256",name:"snapshotId",type:"uint256"}],name:"balanceOfAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"burnFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"buyFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"devFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"string",name:"name_",type:"string"},{internalType:"string",name:"symbol_",type:"string"},{internalType:"uint256",name:"totalSupply_",type:"uint256"},{internalType:"address",name:"treasuryAddress_",type:"address"},{internalType:"address",name:"devAddress_",type:"address"},{internalType:"address",name:"marketingWallet_",type:"address"},{internalType:"address",name:"liquidityAddress_",type:"address"},{internalType:"uint256",name:"burnFee_",type:"uint256"},{internalType:"uint256",name:"treasuryFee_",type:"uint256"},{internalType:"uint256",name:"devFee_",type:"uint256"},{internalType:"uint256",name:"marketingFee_",type:"uint256"},{internalType:"uint256",name:"liquidityFee_",type:"uint256"},{internalType:"uint256",name:"buyFees_",type:"uint256"},{internalType:"uint256",name:"sellFees_",type:"uint256"},{internalType:"address",name:"router_",type:"address"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"isBlacklisted",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"liquidityFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"marketingFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"sellFees",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"pair",type:"address"},{internalType:"bool",name:"value",type:"bool"}],name:"setAutomatedMarketMakerPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address[]",name:"addresses",type:"address[]"},{internalType:"bool[]",name:"states",type:"bool[]"}],name:"setBlacklist",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"snapshot",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"snapshotId",type:"uint256"}],name:"totalSupplyAt",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"tradingActive",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"tradingEnabledTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"treasuryFee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"uniswapV2Pair",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"uniswapV2Router",outputs:[{internalType:"contract IUniswapV2Router02",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],gs={_format:Yx,contractName:Qx,sourceName:Xx,abi:Zx},Jx={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.5,staggerChildren:.1}}},Js={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.5}}},Ti={11155111:{name:"Uniswap V2",network:"Sepolia",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=sepolia`},137:{name:"QuickSwap",network:"Polygon",getTradeUrl:a=>`https://quickswap.exchange/#/swap?outputCurrency=${a}`},1301:{name:"Uniswap V2",network:"Unichain",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=unichain`},1828369849:{name:"Uniswap V2",network:"Moonwalker",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=moonwalker`},10143:{name:"Uniswap V2",network:"Monad Testnet",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=monad-testnet`}},Kx={QuickSwap:"/quickswap.png","Uniswap V2":"/uniswap.png"},eg={11155111:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",137:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",1301:"0x08a58b1628Fb449635078355Be83e181EFBe3948",130:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",1828369849:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",10143:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426"},tg=()=>{const a=window.ethereum?.networkVersion?parseInt(window.ethereum.networkVersion):null,t=eg[a];return t||console.error(`No factory address found for chain ID ${a}`),t},sg=()=>{const[a,t]=i.useState(""),[s,n]=i.useState(null),[r,l]=i.useState(!1),[d,o]=i.useState("");Ft(),co({address:a,abi:gs.abi,functionName:"totalSupply",watch:!0});const m=async()=>{if(a){l(!0),o("");try{const u=new he(window.ethereum),x=new J(a,gs.abi,u),[f,N,v,C,E,w,p,y,g,j,T,b,$,L,S,A,h,I,O,F,U,V,P,B]=await Promise.all([x.name(),x.symbol(),x.totalSupply(),x.TREASURY_ADDRESS(),x.DEV_ADDRESS(),x.MARKETING_WALLET(),x.LIQUIDITY_ADDRESS(),x.burnFee(),x.treasuryFee(),x.devFee(),x.marketingFee(),x.liquidityFee(),x.buyFees(),x.sellFees(),x.uniswapV2Router(),x.balanceOf("0x000000000000000000000000000000000000dEaD"),x.balanceOf(await x.TREASURY_ADDRESS()),x.balanceOf(await x.DEV_ADDRESS()),x.balanceOf(await x.MARKETING_WALLET()),x.balanceOf(await x.LIQUIDITY_ADDRESS()),x.balanceOf(a),x.uniswapV2Pair(),x.tradingActive(),x.owner()]);n({name:f,symbol:N,totalSupply:de(v,18),owner:B,addresses:{treasury:C,dev:E,marketing:w,liquidity:p},fees:{burn:Number(y)/100,treasury:Number(g)/100,dev:Number(j)/100,marketing:Number(T)/100,liquidity:Number(b)/100,buy:Number($)/100,sell:Number(L)/100},balances:{dead:de(A,18),treasury:de(h,18),dev:de(I,18),marketing:de(O,18),liquidity:de(F,18),contract:de(U,18)},router:S,pair:V,features:{tradingEnabled:P}})}catch(u){console.error("Error fetching token info:",u),o("Failed to fetch token info. Is this a valid meme token?")}finally{l(!1)}}},c=async u=>{try{await navigator.clipboard.writeText(u),Le.success("Copied to clipboard! 📋")}catch{Le.error("Failed to copy 😢")}};return e.jsxs("div",{className:"p-6 h-full bg-white dark:bg-[#1a1b1f] rounded-xl transition-colors duration-200",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"meme-title text-3xl mb-4 text-[#00ffbd]",children:"Check Token Info"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-base",children:"Enter any meme token address to view stats"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:a,onChange:u=>t(u.target.value),placeholder:"Enter token address",className:"flex-1 bg-gray-50 dark:bg-[#2d2f36] text-gray-900 dark:text-white rounded-lg px-3 py-2 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200"}),e.jsxs(R.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,disabled:r,className:"px-4 py-2 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-lg transition-colors flex items-center gap-2 shadow-lg shadow-[#00ffbd]/10",children:[r?e.jsx(Lr,{className:"animate-spin"}):e.jsx(Hi,{className:"animate-bounce"}),r?"Loading...":"Check"]})]})}),d&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-3 mb-4 rounded-lg bg-red-50 dark:bg-red-500/10 border border-red-200 dark:border-red-500/20 text-red-600 dark:text-red-400 text-sm",children:d}),!s&&!d&&!r&&e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-6 text-sm",children:e.jsx("p",{children:"Enter a token address to view information"})}),s&&e.jsxs(R.div,{variants:Jx,initial:"hidden",animate:"visible",className:"space-y-4",children:[e.jsxs(R.div,{variants:Js,className:"p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#2d2f36] dark:to-[#24262b] border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[s.name," (",s.symbol,") 🚀"]}),e.jsx("div",{className:"flex items-center gap-2",children:s.features?.tradingEnabled?e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:"Trading Enabled"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Trading Disabled"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Total Supply:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-white",children:Number(s.totalSupply).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Contract:"}),e.jsx("span",{className:"font-mono text-gray-900 dark:text-white truncate text-sm",children:a}),e.jsx("button",{onClick:()=>c(a),className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-md transition-colors",children:e.jsx(ys,{className:"text-gray-500 dark:text-gray-400"})})]})]})]}),e.jsxs(R.div,{variants:Js,className:"p-4 rounded-xl bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx("span",{children:"🍯"})," Honeypot Detection"]}),s.features?.tradingEnabled?e.jsxs("span",{className:"flex items-center gap-1 text-green-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Safe to Trade"]}):e.jsxs("span",{className:"flex items-center gap-1 text-yellow-500",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-yellow-500"}),"Caution"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Buy Tax:"}),e.jsxs("span",{className:"text-sm font-medium text-green-500",children:[s.fees.buy,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sell Tax:"}),e.jsxs("span",{className:"text-sm font-medium text-red-500",children:[s.fees.sell,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Renounced:"}),s.owner==="0x0000000000000000000000000000000000000000"?e.jsx("span",{className:"text-sm font-medium text-green-500",children:"✓"}):e.jsx("span",{className:"text-sm font-medium text-red-500",children:"✗"})]}),e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mintable:"}),e.jsx("span",{className:"text-sm font-medium text-red-500",children:"✗"})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-100 dark:border-yellow-900/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-400",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," Always test with a small amount first and check the contract on a blockchain explorer before making large trades."]})})]}),e.jsxs(R.div,{variants:Js,className:"col-span-3 p-6 rounded-2xl bg-gradient-to-r from-[#2d2f36] via-[#1a1b1f] to-[#2d2f36] border border-gray-800",children:[e.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"💰"})," Trading Fees Distribution"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-xl bg-gray-800/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Buy Fee"}),e.jsxs("span",{className:"text-[#00ffbd] font-bold",children:[s.fees.buy,"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Distribution of ",s.fees.buy,"% buy fee:"]}),Object.entries({Burn:s.fees.burn,Treasury:s.fees.treasury,Dev:s.fees.dev,Marketing:s.fees.marketing,Liquidity:s.fees.liquidity}).map(([u,x])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500",children:u}),e.jsxs("span",{className:"text-gray-300",children:[x,"%"]})]},u))]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-gray-800/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Sell Fee"}),e.jsxs("span",{className:"text-[#00ffbd] font-bold",children:[s.fees.sell,"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Distribution of ",s.fees.sell,"% sell fee:"]}),Object.entries({Burn:s.fees.burn,Treasury:s.fees.treasury,Dev:s.fees.dev,Marketing:s.fees.marketing,Liquidity:s.fees.liquidity}).map(([u,x])=>e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-500",children:u}),e.jsxs("span",{className:"text-gray-300",children:[x,"%"]})]},u))]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-800/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-400",children:[e.jsx("span",{className:"text-[#00ffbd] font-medium",children:"Note:"})," The percentages shown for each fee type represent their share of the total buy/sell fee."]})})]}),e.jsx(R.div,{variants:Js,className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-red-900/20 to-orange-900/20 border border-red-500/20",children:e.jsxs("div",{className:"relative z-10 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(nd,{className:"text-2xl text-red-500 animate-pulse"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Burn Stats"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Burn Fee"}),e.jsxs("span",{className:"text-red-400 font-bold",children:[s.fees.burn,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Total Burned"}),e.jsx("span",{className:"text-red-400 font-mono",children:Number(s.balances.dead).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Burn Rate"}),e.jsxs("span",{className:"text-red-400 font-mono",children:[(Number(s.balances.dead)/Number(s.totalSupply)*100).toFixed(2),"%"]})]})]}),e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-red-500/20 to-transparent animate-flame"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-orange-500/20 to-transparent animate-flame-slow"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-yellow-500/20 to-transparent animate-flame-slower"})]})]})}),e.jsxs(R.div,{variants:Js,className:"rounded-2xl bg-gradient-to-br from-blue-900/20 to-purple-900/20 border border-blue-500/20 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(id,{className:"text-2xl text-blue-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Treasury & Dev"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Treasury Fee"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:[s.fees.treasury,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Dev Fee"}),e.jsxs("span",{className:"text-blue-400 font-bold",children:[s.fees.dev,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Treasury Balance"}),e.jsx("span",{className:"text-blue-400 font-mono",children:Number(s.balances.treasury).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Dev Balance"}),e.jsx("span",{className:"text-blue-400 font-mono",children:Number(s.balances.dev).toLocaleString()})]})]})]}),e.jsxs(R.div,{variants:Js,className:"rounded-2xl bg-gradient-to-br from-green-900/20 to-teal-900/20 border border-green-500/20 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(Pr,{className:"text-2xl text-green-400"}),e.jsx("h3",{className:"text-xl font-bold text-white",children:"Marketing & Liquidity"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Marketing Fee"}),e.jsxs("span",{className:"text-green-400 font-bold",children:[s.fees.marketing,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Liquidity Fee"}),e.jsxs("span",{className:"text-green-400 font-bold",children:[s.fees.liquidity,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Marketing Balance"}),e.jsx("span",{className:"text-green-400 font-mono",children:Number(s.balances.marketing).toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Liquidity Balance"}),e.jsx("span",{className:"text-green-400 font-mono",children:Number(s.balances.liquidity).toLocaleString()})]})]})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-200 dark:border-gray-700",children:e.jsx(ag,{})})]})},ag=()=>{const[a,t]=i.useState([]),[s,n]=i.useState(!0),{chain:r}=Ft(),[l,d]=i.useState(1),o=10;i.useEffect(()=>{const x=async()=>{try{n(!0);const f=new he(window.ethereum),N=tg();if(!N){console.error("Factory address not found for this chain");return}const v=new J(N,cn.abi,f),C=await f.getBlockNumber();let E=[];const w=r?.id===10143?100:5e3;let p=Math.max(0,C-1e4);for(;p<C;){const g=Math.min(p+w,C);try{const j=v.filters.TokenCreated(),T=await v.queryFilter(j,p,g);E=[...E,...T]}catch(j){console.error(`Error fetching events for blocks ${p} to ${g}:`,j)}p=g+1}const y=await Promise.all(E.map(async g=>{const j=Number(g.args[4]),T=g.args[5].toString();let b;return T.length<=j?b=T:b=de(T,j),{creator:g.args[0],address:g.args[1],name:g.args[2],symbol:g.args[3],decimals:j,totalSupply:b,logoURI:g.args[6],isMeme:g.args[7],timestamp:(await g.getBlock()).timestamp}}));y.sort((g,j)=>j.timestamp-g.timestamp),t(y)}catch(f){console.error("Error fetching recent tokens:",f)}finally{n(!1)}};r?.id&&x()},[r?.id]);const m=i.useMemo(()=>a.slice((l-1)*o,l*o),[a,l]),c=(x,f)=>{const N=Ti[f];return N?N.getTradeUrl(x):"#"},u=x=>Ti[x]||{name:"Unknown DEX",network:"Unknown"};return s?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"meme-title text-2xl mb-4 text-[#00ffbd]",children:"Recently Created Meme Tokens 🚀"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#00ffbd]"})})]}):m.length?e.jsxs("div",{children:[e.jsx("h3",{className:"meme-title text-2xl mb-6 text-center text-[#00ffbd]",children:"Recently Created Meme Tokens 🚀"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:m.map(x=>e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-[#2d2f36] dark:to-[#24262b] border border-gray-200 dark:border-gray-700 hover:border-[#00ffbd] dark:hover:border-[#00ffbd] transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white text-lg",children:x.name}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:x.symbol})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r?.id&&Kx[u(r.id).name]||"/token-default.png",alt:r?.id?u(r.id).name:"Unknown DEX",className:"w-6 h-6 rounded-full",onError:f=>{f.target.onerror=null,f.target.src="/token-default.png"}}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r?.id?u(r.id).network:"Unknown Network"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Supply: ",Number(x.totalSupply).toLocaleString()]}),e.jsxs("a",{href:r?.id?c(x.address,r.id):"#",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 px-3 py-1 bg-[#00ffbd] hover:bg-[#00e6a9] text-black text-sm font-medium rounded-lg transition-colors",children:["Trade ",e.jsx(od,{})]})]})]},x.address))}),a.length>o&&e.jsxs("div",{className:"mt-6 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>d(x=>Math.max(1,x-1)),disabled:l===1,className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"Previous"}),e.jsxs("span",{className:"px-3 py-1 text-gray-600 dark:text-gray-400",children:["Page ",l," of ",Math.ceil(a.length/o)]}),e.jsx("button",{onClick:()=>d(x=>x+1),disabled:l>=Math.ceil(a.length/o),className:"px-3 py-1 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 disabled:opacity-50",children:"Next"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h3",{className:"meme-title text-2xl mb-4 text-[#00ffbd]",children:"Recently Created Meme Tokens 🚀"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No meme tokens created yet. Be the first! 🎉"})]})},ls={style:{background:"#333",color:"white",padding:"12px",borderRadius:"8px"},success:{style:{background:"#10B981"}},error:{style:{background:"#EF4444"}},position:"top-center",duration:3e3},rg=({onClose:a})=>{const[t,s]=i.useState(""),[n,r]=i.useState(""),[l,d]=i.useState(null),[o,m]=i.useState([]),[c,u]=i.useState(null),[x,f]=i.useState([]),[N,v]=i.useState(!1),[C,E]=i.useState(!1),[w,p]=i.useState(""),{address:y}=Oe(),[g,j]=i.useState(!1),{data:T}=co({address:n||void 0,abi:gs.abi,functionName:"owner",watch:!0,enabled:!!n}),b=y&&T&&y.toLowerCase()===T.toLowerCase(),{write:$,data:L}=dc({address:n||void 0,abi:gs.abi,functionName:"snapshot",enabled:!!n,onError(){j(!1)}}),{isLoading:S}=cc({hash:L?.hash,onSuccess(){M.success("Snapshot taken successfully!",ls),setTimeout(()=>{M(U=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("p",{className:"font-medium",children:"Important: Refresh Required 🔄"}),e.jsx("p",{className:"text-sm",children:"Please refresh the page and paste the contract address again to see the new snapshot data."})]}),{...ls,duration:6e3,style:{...ls.style,maxWidth:"400px"}})},1e3),j(!1),fetchSnapshots()},onError(){M.error("Failed to take snapshot",ls),j(!1)}}),A=async()=>{if(!t){M.error("Please enter a token address",ls);return}E(!0),p("");try{if(!gt(t))throw new Error("Invalid token address format");const V=new he(window.ethereum);if(await V.getNetwork().then(B=>Number(B.chainId))===10143){const B=new J(t,gs.abi,V);try{await Promise.all([B.name(),B.symbol(),B.owner(),B.snapshot()]),r(t),d(B),M.success("Token contract verified",ls)}catch(k){k.message.includes("snapshot")?p("This token does not support snapshots. Make sure you are using the correct token contract."):p("Invalid token contract. Please check the address and try again."),r(""),d(null)}}else{const B=new J(t,gs.abi,V);await Promise.all([B.name(),B.symbol(),B.owner()]),r(t),d(B),M.success("Token contract verified",ls)}}catch(U){console.error("Error verifying token:",U),p("Invalid token contract. Please check the address and try again."),r(""),d(null)}finally{E(!1)}};i.useEffect(()=>{l&&(async()=>{try{v(!0);const V=new he(window.ethereum),P=await V.getNetwork().then(_=>Number(_.chainId)),B=l.filters.Snapshot(),D=(await l.queryFilter(B)).map(_=>({id:_.args.id.toString(),blockNumber:_.blockNumber,timestamp:new Date().toLocaleString()}));try{const _=await Promise.all(D.map(async H=>{try{const X=await V.getBlock(H.blockNumber);return{...H,timestamp:X?new Date(X.timestamp*1e3).toLocaleString():H.timestamp}}catch(X){return console.warn(`Could not fetch block data for snapshot ${H.id}`,X),H}}));_.sort((H,X)=>X.blockNumber-H.blockNumber),m(_)}catch(_){console.warn("Error fetching block timestamps:",_),D.sort((H,X)=>X.blockNumber-H.blockNumber),m(D)}v(!1)}catch(V){console.error("Error fetching snapshots:",V),p("Failed to load snapshots. This may not be supported on the current network."),v(!1)}})()},[l]);const h=async U=>{v(!0),p("");try{const V=l.filters.Transfer(),P=await l.queryFilter(V),B=new Set;P.forEach(_=>{B.add(_.args.from),B.add(_.args.to)}),B.delete("0x0000000000000000000000000000000000000000"),B.delete("0x000000000000000000000000000000000000dEaD");const D=(await Promise.all(Array.from(B).map(async _=>{const H=await l.balanceOfAt(_,U);return{address:_,balance:ze(H)}}))).filter(_=>parseFloat(_.balance)>0).sort((_,H)=>parseFloat(H.balance)-parseFloat(_.balance));f(D)}catch(V){console.error("Error fetching holder data:",V),p("Failed to load holder data")}v(!1)},I=()=>{if(!x.length)return;const U=`data:text/csv;charset=utf-8,Address,Balance
`+x.map(B=>`${B.address},${B.balance}`).join(`
`),V=encodeURI(U),P=document.createElement("a");P.setAttribute("href",V),P.setAttribute("download",`snapshot_${c}_${Date.now()}.csv`),document.body.appendChild(P),P.click(),document.body.removeChild(P)},O=async()=>{try{if(!y){M.error("Please connect your wallet first",ls);return}if(!b)return;j(!0),$&&await $()}catch(U){console.error("Error taking snapshot:",U),j(!1)}},F=U=>{u(U.id),h(U.id)};return e.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg relative",children:[e.jsx(rn,{position:"top-center",toastOptions:{className:"",style:{zIndex:9999999,background:"#333",color:"white"}}}),e.jsxs("div",{className:"flex justify-between items-center border-b border-gray-200 dark:border-gray-700 pb-3 mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Token Snapshots"}),e.jsx("button",{onClick:a,className:"p-2 rounded-lg bg-gray-800/50 hover:bg-gray-800 text-white transition-colors",children:e.jsx(mt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:t,onChange:U=>s(U.target.value),placeholder:"Enter token contract address",disabled:C,className:"flex-1 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white rounded-lg px-3 py-2 border border-gray-200 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none transition-all duration-200"}),e.jsxs(vr,{onClick:A,disabled:C||!t,className:"bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium px-4 py-2 rounded-lg transition-colors duration-200 flex items-center gap-2",children:[C?e.jsx(Ma,{size:"sm"}):e.jsx(nn,{className:"w-4 h-4"}),C?"Verifying...":"Verify"]})]}),w&&e.jsx("p",{className:"mt-2 text-sm text-red-500 dark:text-red-400",children:w})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:o.length>0?`${o.length} snapshot${o.length===1?"":"s"} available`:"No snapshots taken yet"}),b&&y&&e.jsx(vr,{onClick:O,disabled:S||g,className:"bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium px-3 py-1.5 rounded-lg transition-colors duration-200 flex items-center text-sm",children:S||g?e.jsxs(e.Fragment,{children:[e.jsx(Ma,{size:"sm",className:"mr-2"}),g?"Confirm in Wallet...":"Taking Snapshot..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qi,{className:"mr-1.5 h-4 w-4"}),"Take Snapshot"]})})]}),o.length>0&&e.jsx("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," After taking a new snapshot, please refresh the page and paste the contract address again to see the updated data."]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 shadow-sm",children:[e.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900 dark:text-white border-b border-gray-200 dark:border-gray-700 pb-2",children:"Available Snapshots"}),e.jsx("div",{className:"space-y-2 custom-scrollbar max-h-[300px] overflow-y-auto pr-2",children:N?e.jsx("div",{className:"flex justify-center py-4",children:e.jsx(Ma,{size:"md",className:"text-[#00ffbd]"})}):o.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No snapshots available"}):o.map(U=>e.jsxs("button",{onClick:()=>F(U),className:`w-full text-left px-3 py-2 rounded-lg transition-colors duration-200 flex justify-between items-center text-sm ${c===U.id?"bg-[#00ffbd] hover:bg-[#00e6a9] text-black":"bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-900 dark:text-white"}`,children:[e.jsxs("span",{className:"font-medium",children:["Snapshot #",U.id]}),e.jsx("span",{className:"text-xs opacity-70",children:U.timestamp})]},U.id))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-lg p-3 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3 border-b border-gray-200 dark:border-gray-700 pb-2",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:c?`Snapshot #${c} Data`:"Select a snapshot"}),x.length>0&&e.jsxs(vr,{onClick:I,size:"xs",className:"bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white transition-colors duration-200 px-2 py-1",children:[e.jsx(ld,{className:"mr-1 h-3 w-3"}),"Export"]})]}),N?e.jsx("div",{className:"flex justify-center items-center h-[250px]",children:e.jsx(Ma,{size:"md",className:"text-[#00ffbd]"})}):e.jsx("div",{className:"overflow-x-auto custom-scrollbar rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs(as,{className:"w-full text-sm",children:[e.jsxs(as.Head,{children:[e.jsx(as.HeadCell,{className:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-medium py-2 px-3",children:"Address"}),e.jsx(as.HeadCell,{className:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white font-medium py-2 px-3",children:"Balance"})]}),e.jsx(as.Body,{className:"divide-y divide-gray-200 dark:divide-gray-700",children:x.map((U,V)=>e.jsxs(as.Row,{className:"bg-white dark:bg-gray-900 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-150",children:[e.jsxs(as.Cell,{className:"font-mono text-gray-900 dark:text-gray-300 py-2 px-3 text-xs",children:[U.address.slice(0,6),"...",U.address.slice(-4)]}),e.jsxs(as.Cell,{className:"text-gray-900 dark:text-gray-300 font-medium py-2 px-3 text-xs",children:[parseFloat(U.balance).toLocaleString()," tokens"]})]},V))})]})})]})]})]})]})},tl=document.createElement("style");tl.textContent=`
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  .meme-title {
    font-family: 'Press Start 2P', cursive;
    text-shadow: 2px 2px 0px #FF512F;
  }

  .pixel-border {
    box-shadow: 
      -3px 0 0 0 #000,
      3px 0 0 0 #000,
      0 -3px 0 0 #000,
      0 3px 0 0 #000;
  }

  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }

  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  /* Consistent input focus styles */
  input:not([type="checkbox"]):focus {
    outline: none !important;
    border-color: #00ffbd !important;
    box-shadow: 0 0 0 2px rgba(0, 255, 189, 0.2) !important;
  }

  input:not([type="checkbox"]):hover {
    border-color: #00ffbd;
  }

  input:not([type="checkbox"]):active {
    border-color: #00ffbd;
  }

  /* Light mode styles */
  :root {
    --tooltip-bg: #ffffff;
    --tooltip-text: #1f2937;
    --tooltip-border: #e5e7eb;
    --info-text: #6b7280;
    --info-hover: #4b5563;
    --form-helper-text: #6b7280;
    --form-helper-text-hover: #4b5563;
  }

  /* Dark mode styles */
  @media (prefers-color-scheme: dark) {
    :root {
      --tooltip-bg: #1a1b1f;
      --tooltip-text: #e5e7eb;
      --tooltip-border: #374151;
      --info-text: #9ca3af;
      --info-hover: #d1d5db;
      --form-helper-text: #9ca3af;
      --form-helper-text-hover: #d1d5db;
    }
  }

  /* Form helper text styles */
  .form-helper-text {
    color: var(--form-helper-text);
    transition: color 0.2s ease;
  }

  .form-helper-text:hover {
    color: var(--form-helper-text-hover);
  }

  /* Info icon styles */
  .info-icon {
    color: var(--info-text);
    transition: color 0.2s ease;
  }

  .info-icon:hover {
    color: var(--info-hover);
  }

  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-3px);
    }
  }
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-2px);
    }
    75% {
      transform: translateX(2px);
    }
  }

  /* Tooltip styles */
  .react-tooltip {
    background-color: var(--tooltip-bg) !important;
    color: var(--tooltip-text) !important;
    border: 1px solid var(--tooltip-border) !important;
    font-size: 0.875rem !important;
    padding: 0.75rem 1rem !important;
    z-index: 50 !important;
    max-width: 20rem !important;
    line-height: 1.5 !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
    opacity: 1 !important;
    border-radius: 0.5rem !important;
  }
`;document.head.appendChild(tl);const sl={QuickSwap:"/quickswap.png","Uniswap V2":"/uniswap.png"},Qr={11155111:{router:"0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008",factory:"0x7E0987E5b3a30e3f2828572Bb659A548460a3003",name:"Uniswap V2",isActive:!0},137:{router:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",factory:"0x5757371414417b8C6CAad45bAeF941aBc7d3Ab32",name:"QuickSwap",isActive:!0},130:{router:"0x284F11109359a7e1306C3e447ef14D38400063FF",factory:"0x1F98400000000000000000000000000000000002",name:"Uniswap V2",isActive:!0},1301:{router:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",factory:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",name:"Uniswap V2",isActive:!0},1828369849:{router:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",factory:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",name:"Uniswap V2",isActive:!0},10143:{router:"0xfB8e1C3b833f9E67a71C859a132cf783b645e436",factory:"0x733E88f248b742db6C14C0b1713Af5AD7fDd59D0",name:"Uniswap V2",isActive:!0}},ng={11155111:{name:"Uniswap V2",network:"Sepolia",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=sepolia`},137:{name:"QuickSwap",network:"Polygon",getTradeUrl:a=>`https://quickswap.exchange/#/swap?outputCurrency=${a}`},130:{name:"Uniswap V2",network:"Unichain",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=unichain`},1301:{name:"Uniswap V2",network:"Unichain",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=unichain`},1828369849:{name:"Uniswap V2",network:"Moonwalker",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=moonwalker`},10143:{name:"Uniswap V2",network:"Monad Testnet",getTradeUrl:a=>`https://app.uniswap.org/#/swap?outputCurrency=${a}&chain=monad-testnet`}},qa={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingLogo:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),CreatingToken:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},Lt={SEPOLIA:11155111,POLYGON:137,UNICHAIN_MAINNET:130,UNICHAIN_TESTNET:1301,MOONWALKER:1828369849,MONAD_TESTNET:10143},ig={[Lt.SEPOLIA]:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",[Lt.POLYGON]:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",[Lt.UNICHAIN_MAINNET]:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",[Lt.UNICHAIN_TESTNET]:"0x08a58b1628Fb449635078355Be83e181EFBe3948",[Lt.MOONWALKER]:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",[Lt.MONAD_TESTNET]:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426"},og={[Lt.SEPOLIA]:"0.01",[Lt.POLYGON]:"1",[Lt.UNICHAIN_MAINNET]:"0.01",[Lt.UNICHAIN_TESTNET]:"0.01",[Lt.MOONWALKER]:"369",[Lt.MONAD_TESTNET]:"0.01"},lg=["Remember when DOGE was just a joke? 🐕","Early PEPE holders are millionaires! 🐸","From Reddit memes to crypto dreams... 🚀"],dg=["Create your meme token, become legendary! 👑","Your memes + Web3 = The next big thing! 💫","Join the meme revolution! 🌟"],Ci=({messages:a,delay:t=2e3})=>{const[s,n]=i.useState(a.map(()=>"")),[r,l]=i.useState(a.map(()=>!0));return i.useEffect(()=>{let d=[];return a.forEach((o,m)=>{if(r[m]&&s[m].length<o.length){const c=setTimeout(()=>{n(u=>{const x=[...u];return x[m]=o.substring(0,s[m].length+1),x})},15+m*100);d.push(c)}else r[m]&&l(c=>{const u=[...c];return u[m]=!1,u})}),()=>d.forEach(o=>clearTimeout(o))},[s,r,a]),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-4 rounded-xl shadow-lg border-2 border-[#00ffbd] relative min-h-[200px]",children:[e.jsx("div",{className:"absolute w-3 h-3 bg-white dark:bg-[#1a1b1f] transform rotate-45 -bottom-1.5 left-6 border-r-2 border-b-2 border-[#00ffbd]"}),e.jsx("div",{className:"space-y-4",children:a.map((d,o)=>e.jsxs("div",{className:`text-base font-medium text-gray-900 dark:text-white transition-opacity duration-300 ${s[o].length>0?"opacity-100":"opacity-0"}`,children:[s[o],r[o]&&e.jsx("span",{className:"animate-pulse",children:"|"})]},o))})]})};function al(){const{address:a}=Oe(),{chain:t}=Ft(),{openConnectModal:s}=ua(),{addDeployment:n}=un();i.useState("create");const[r,l]=i.useState(!1),[d,o]=i.useState(null),[m,c]=i.useState(null),[u,x]=i.useState(null),[f,N]=i.useState(!1),[v,C]=i.useState(!1),[E,w]=i.useState(!1),[p,y]=i.useState({width:window.innerWidth,height:window.innerHeight}),[g,j]=i.useState({marketingFee:!1,liquidityFee:!1,burnFee:!1,treasuryFee:!1,devFee:!1,buyFees:!1,sellFees:!1,enableBlacklist:!1,enableSnapshot:!1}),[T,b]=i.useState({name:"",symbol:"",totalSupply:"",description:"",marketingAddress:"",treasuryAddress:"",devAddress:"",liquidityAddress:"",burnFee:20,treasuryFee:20,devFee:20,marketingFee:20,liquidityFee:20,buyFees:5,sellFees:5,router:"",logoURI:"https://placehold.co/400x400",enableBlacklist:!1,enableSnapshot:!1}),[$,L]=i.useState(!1),[S,A]=i.useState(!1),[h,I]=i.useState(1),O=4,[F,U]=i.useState(!1);i.useEffect(()=>{(()=>{try{const te=localStorage.getItem("memeFactoryState");if(te){const{deployedTokenAddress:Y,formData:W,liquidityAdded:Q,timestamp:G}=JSON.parse(te);Date.now()-G<864e5&&(x(Y),Y&&!Q&&w(!0),b(W),A(Q||!1))}}catch(te){console.error("Error loading saved state:",te)}})()},[]),i.useEffect(()=>{if(u||T.name||T.symbol||T.totalSupply){const ee={...T};delete ee.logo,localStorage.setItem("memeFactoryState",JSON.stringify({deployedTokenAddress:u,formData:ee,liquidityAdded:S,timestamp:Date.now()}))}},[u,T,S]);const V=()=>{localStorage.removeItem("memeFactoryState"),b({name:"",symbol:"",totalSupply:"",description:"",buyFeesEnabled:!1,sellFeesEnabled:!1,buyFees:0,sellFees:0,devFeeEnabled:!1,marketingFeeEnabled:!1,liquidityFeeEnabled:!1,burnFeeEnabled:!1,treasuryFeeEnabled:!1,devFee:0,marketingFee:0,liquidityFee:0,burnFee:0,treasuryFee:0,devAddress:"",marketingAddress:"",liquidityAddress:"",treasuryAddress:"",router:"",customHeader:"",enableBlacklist:!1,enableSnapshot:!1,enableAutoSwap:!1,swapTokensAtAmount:"",enableTradingControls:!1,maxTxPercent:2,maxWalletPercent:4}),x(null)},P=()=>{A(!0),V(),w(!1),Le.success("Process completed successfully!")},B=ee=>{const{name:te,value:Y}=ee.target;b(te==="initialLiquidity.tokenAmount"?W=>({...W,initialLiquidity:{...W.initialLiquidity,tokenAmount:Y}}):te==="initialLiquidity.nativeAmount"?W=>({...W,initialLiquidity:{...W.initialLiquidity,nativeAmount:Y}}):W=>({...W,[te]:Y}))},k=ee=>{b(te=>{const Y={...te};switch(ee){case"marketingFeeEnabled":Y.marketingFee=Y.marketingFee>0?0:20;break;case"liquidityFeeEnabled":Y.liquidityFee=Y.liquidityFee>0?0:20;break;case"burnFeeEnabled":Y.burnFee=Y.burnFee>0?0:20;break;case"treasuryFeeEnabled":Y.treasuryFee=Y.treasuryFee>0?0:20;break;case"devFeeEnabled":Y.devFee=Y.devFee>0?0:20;break;case"buyFeesEnabled":Y.buyFeesEnabled=!Y.buyFeesEnabled,Y.buyFees=Y.buyFeesEnabled?6:0;break;case"sellFeesEnabled":Y.sellFeesEnabled=!Y.sellFeesEnabled,Y.sellFees=Y.sellFeesEnabled?6:0;break;case"enableBlacklist":Y.enableBlacklist=!Y.enableBlacklist;break;case"enableSnapshot":Y.enableSnapshot=!Y.enableSnapshot;break;case"enableCustomHeader":Y.enableCustomHeader=!Y.enableCustomHeader,Y.enableCustomHeader||(Y.customHeader="");break}return Y}),j(te=>({...te,[ee]:!te[ee]}))},D=async(ee,te)=>{try{const W=(G=>{switch(G){case 137:return"polygon";case 11155111:return"sepolia";case 1301:return"unichain";default:return"unknown"}})(t.id),Q={name:te.name,symbol:te.symbol,address:ee,chainId:t.id,chainName:W,description:T.description,totalSupply:de(te.supply,te.decimals),timestamp:Date.now(),creatorAddress:a.toLowerCase(),network:W};console.log("Saving token deployment with data:",Q);try{await n(Q),console.log("Token deployment saved successfully")}catch(G){console.error("Error saving deployment to Firebase:",G),Le.warning("Token created successfully, but there was an error saving deployment data")}try{const G=new he(window.ethereum);console.log("Initializing transfer tracking for token:",ee),await R0(ee,G),console.log("Transfer tracking initialized")}catch(G){console.error("Error initializing transfer tracking:",G)}Le.dismiss(),x(ee),o("completed"),N(!0),setTimeout(()=>{l(!1),w(!0)},3e3)}catch(Y){console.error("Error in handleSuccess:",Y),x(ee),o("completed"),N(!0),setTimeout(()=>{l(!1),w(!0)},3e3)}},_=async()=>{L(!1);try{if(o("deploying"),l(!0),!window.ethereum)throw new Error("Please connect your wallet first");if(!t?.id)throw new Error("Please connect to a supported network");const te=await new he(window.ethereum).getSigner(),Y=H(),W=X();if(!Y)throw new Error("Factory address not configured for this network");if(!W)throw new Error("Network fee not configured for this network");const Q=Qr[t.id];if(!Q||!Q.isActive)throw new Error("No active DEX configured for this network");const G=new J(Y,cn.abi,te);let q;try{q=BigInt(T.totalSupply)}catch{throw new Error("Invalid total supply value")}const Z=ye=>{try{const ue=parseFloat(ye||0);return BigInt(Math.floor(ue))}catch{return BigInt(0)}},ie=parseFloat(T.swapTokensAtAmount)||.1,ne=BigInt(Math.floor(ie*100)),K={name:T.name,symbol:T.symbol,totalSupply:q,marketingWallet:T.marketingAddress||a,treasuryAddress:T.treasuryAddress||a,devAddress:T.devAddress||a,liquidityAddress:T.liquidityAddress||a,burnFee:Z(T.burnFee),treasuryFee:Z(T.treasuryFee),devFee:Z(T.devFee),marketingFee:Z(T.marketingFee),liquidityFee:Z(T.liquidityFee),buyFees:Z(T.buyFees),sellFees:Z(T.sellFees),router:Q.router,logoURI:T.logoURI||"https://placehold.co/400x400",addInitialLiquidity:!1,initialLiquidityPercent:0,maxTxPercent:T.maxTxPercent||2,maxWalletPercent:T.maxWalletPercent||4,swapTokensAtPercent:ne},xe=Number(K.burnFee)+Number(K.treasuryFee)+Number(K.devFee)+Number(K.marketingFee)+Number(K.liquidityFee);if(xe!==100)throw new Error(`Secondary fees must total 100%. Current total: ${xe}%`);const we=(await(await G.createMemeToken(K,{value:W})).wait()).logs.find(ye=>{try{const ue=ln("TokenCreated(address,address,string,string,uint8,uint256,string,bool)");return ye.topics[0]===ue}catch{return!1}});if(!we)throw new Error("Token creation event not found in transaction receipt");const Me=G.interface.parseLog({topics:we.topics,data:we.data}),re={name:T.name,symbol:T.symbol,decimals:18,supply:q*BigInt(10**18)},ce=Me.args[1];await D(ce,re)}catch(ee){console.error("Error creating token:",ee),o("error"),c(ee.message||"Failed to create token"),l(!0)}};i.useEffect(()=>{(()=>{b(te=>{const Y={...te};return Y.autoLiquidity||(Y.liquidityFee=0),Y.autoBurn||(Y.burnFee=0),Y.maxLimits||(Y.maxWalletPercent=100,Y.maxTxPercent=100),Y})})()},[T.autoLiquidity,T.autoBurn,T.maxLimits]);const H=()=>t?.id?ig[t.id]:null,X=()=>{if(!t?.id)return null;const ee=og[t.id];return ee?Ut(ee):null},z=()=>I(ee=>Math.min(ee+1,O)),se=()=>I(ee=>Math.max(ee-1,1));return i.useEffect(()=>{if(t?.id){const ee=Qr[t.id]?.router;b(te=>({...te,router:ee||""}))}},[t?.id]),e.jsxs("div",{className:"container mx-auto px-4 py-8 mt-8 relative",children:[e.jsx("div",{className:"absolute left-[2%] top-16 w-80",children:e.jsx(Ci,{messages:lg})}),e.jsx("div",{className:"absolute right-[2%] top-16 w-80",children:e.jsx(Ci,{messages:dg})}),e.jsxs("div",{className:"text-center mb-8 pt-32",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("img",{src:"/pepe.jpeg",alt:"Pepe",className:"w-16 h-16 rounded-full object-cover animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("h1",{className:"meme-title text-5xl text-[#00ffbd]",children:"MEME FACTORY"}),e.jsx("img",{src:"/pepe.jpeg",alt:"Pepe",className:"w-16 h-16 rounded-full object-cover animate-bounce"})]}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Create your own meme token with advanced features and join the meme revolution!"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{onClick:()=>k("antiBotEnabled"),className:`relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 ${T.antiBotEnabled?"bg-gradient-to-br from-indigo-500 to-blue-600 shadow-lg shadow-indigo-500/20":"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-blue-400/20 dark:to-purple-500/20 hover:from-indigo-100 hover:to-blue-100 dark:hover:from-blue-400/30 dark:hover:to-purple-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${T.antiBotEnabled?"bg-white/20":"bg-indigo-500/10 dark:bg-white/10"}`,children:e.jsx(Xc,{className:`w-6 h-6 ${T.antiBotEnabled?"text-white":"text-indigo-500 dark:text-white"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${T.antiBotEnabled?"text-white":"text-indigo-600 dark:text-white"}`,children:"Anti-Bot"}),e.jsx("p",{className:`text-sm ${T.antiBotEnabled?"text-white/80":"text-indigo-500 dark:text-white/80"}`,children:"Protects against trading bots and snipers 🛡️"})]})]})}),e.jsx("div",{onClick:()=>U(!0),className:"relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 bg-gradient-to-br from-rose-50 to-pink-50 dark:from-pink-500 dark:to-red-600 hover:from-rose-100 hover:to-pink-100 dark:hover:from-pink-600 dark:hover:to-red-700 shadow-lg shadow-pink-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-rose-500/10 dark:bg-white/10",children:e.jsx(Qi,{className:"w-6 h-6 text-rose-500 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-rose-600 dark:text-white",children:"Token Snapshots"}),e.jsx("p",{className:"text-sm text-rose-500 dark:text-white/80",children:"Take and view holder snapshots 📸"})]})]})}),e.jsx("div",{onClick:()=>k("burnEnabled"),className:`relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 ${T.burnEnabled?"bg-gradient-to-br from-orange-500 to-red-500 shadow-lg shadow-orange-500/20":"bg-gradient-to-br from-orange-50 to-red-50 dark:from-pink-400/20 dark:to-red-500/20 hover:from-orange-100 hover:to-red-100 dark:hover:from-pink-400/30 dark:hover:to-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${T.burnEnabled?"bg-white/20":"bg-orange-500/10 dark:bg-white/10"}`,children:e.jsx(Zc,{className:`w-6 h-6 ${T.burnEnabled?"text-white":"text-orange-500 dark:text-white"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${T.burnEnabled?"text-white":"text-orange-600 dark:text-white"}`,children:"Auto-Burn"}),e.jsx("p",{className:`text-sm ${T.burnEnabled?"text-white/80":"text-orange-500 dark:text-white/80"}`,children:"Burns tokens automatically with each trade 🔥"})]})]})}),e.jsx("div",{onClick:()=>k("maxLimitsEnabled"),className:`relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 ${T.maxLimitsEnabled?"bg-gradient-to-br from-emerald-500 to-teal-500 shadow-lg shadow-emerald-500/20":"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-green-400/20 dark:to-blue-500/20 hover:from-emerald-100 hover:to-teal-100 dark:hover:from-green-400/30 dark:hover:to-blue-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${T.maxLimitsEnabled?"bg-white/20":"bg-emerald-500/10 dark:bg-white/10"}`,children:e.jsx(Jc,{className:`w-6 h-6 ${T.maxLimitsEnabled?"text-white":"text-emerald-500 dark:text-white"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${T.maxLimitsEnabled?"text-white":"text-emerald-600 dark:text-white"}`,children:"Max Limits"}),e.jsx("p",{className:`text-sm ${T.maxLimitsEnabled?"text-white/80":"text-emerald-500 dark:text-white/80"}`,children:"Prevents whales from dominating 💧"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr,1fr] gap-6",children:[e.jsx("div",{children:a?e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-8 shadow-2xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"meme-title text-3xl mb-4 text-[#00ffbd]",children:"Create Your Meme Token"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-400 text-lg",children:"Fill out the details below to launch your meme token"})]}),e.jsx("div",{className:"flex justify-between mb-8",children:[1,2,3,4].map(ee=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:Rt("w-8 h-8 rounded-full flex items-center justify-center",h===ee?"bg-[#00ffbd] text-black":h>ee?"bg-[#00ffbd]/20 text-[#00ffbd]":"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:ee}),ee<4&&e.jsx("div",{className:Rt("w-24 h-1 mx-2",h>ee?"bg-[#00ffbd]":"bg-gray-200 dark:bg-gray-700")})]},ee))}),e.jsx(gg,{currentStep:h,formData:T,handleChange:B,handleToggle:k}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx("div",{children:h>1&&e.jsx("button",{onClick:se,className:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Previous"})}),e.jsx("div",{children:h<O?e.jsx("button",{onClick:z,className:"px-6 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Next"}):e.jsx("button",{onClick:()=>L(!0),className:"px-6 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Create Token"})})]})]}):e.jsxs(R.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-8 text-center border border-gray-200 dark:border-gray-800 transition-colors duration-200",children:[e.jsx("div",{className:"mb-6",children:e.jsx(it,{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-500"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white transition-colors duration-200",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 transition-colors duration-200",children:"Connect your wallet to start creating your meme token"}),e.jsx("button",{onClick:s,className:"px-8 py-3 bg-[#00ffbd] text-black rounded-xl font-bold hover:bg-[#00e6a9] transition-all duration-200 hover:scale-105",children:"Connect Wallet"})]})}),e.jsx("div",{className:"h-fit bg-[#1a1b1f] rounded-xl",children:e.jsx(sg,{})})]}),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-16 text-center",children:[e.jsx("h2",{className:"meme-title text-2xl mb-6 text-[#00ffbd]",children:"JOIN THE MEME REVOLUTION! 🚀"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 transition-all duration-200 hover:border-[#00ffbd] group",children:[e.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:"🌟"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white transition-colors duration-200",children:"Community First"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-200",children:"Build a strong meme community"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 transition-all duration-200 hover:border-[#00ffbd] group",children:[e.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:"💎"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white transition-colors duration-200",children:"HODL Together"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-200",children:"Create diamond hands community"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 transition-all duration-200 hover:border-[#00ffbd] group",children:[e.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:"🚀"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white transition-colors duration-200",children:"To The Moon"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-200",children:"Sky is not the limit"})]})]})]}),e.jsx(cg,{isOpen:r,onClose:()=>{l(!1),o(null)},currentStep:d,tokenName:T.name,error:m,deployedAddress:u,formData:T,setShowLiquidityModal:w}),e.jsx(ug,{isOpen:E,onClose:()=>w(!1),tokenAddress:u,tokenName:T.name,tokenSymbol:T.symbol,totalSupply:T.totalSupply,onSuccess:P}),e.jsx(mg,{isOpen:v,onClose:()=>C(!1),onRate:ee=>{console.log("User rated meme token creation:",ee)}}),f&&e.jsx(qt,{width:p.width,height:p.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(xg,{isOpen:$,onClose:()=>L(!1),onConfirm:_,chain:t}),F&&e.jsx("div",{className:"fixed inset-0 z-[99999] overflow-y-auto bg-black/25 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full",children:e.jsx(rg,{onClose:()=>U(!1)})})})})]})}const Vt=({label:a,description:t,enabled:s,onToggle:n,children:r})=>e.jsxs("div",{className:"relative flex flex-col space-y-3 p-4 rounded-xl bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd]/20 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-gray-900 dark:text-white text-base font-medium",children:a}),t&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:t})]}),e.jsx("div",{className:"flex items-center ml-4",children:e.jsx("button",{onClick:n,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[#00ffbd] focus:ring-offset-2 dark:focus:ring-offset-gray-900 ${s?"bg-[#00ffbd]":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsxs("span",{className:`pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-all duration-200 ease-in-out ${s?"translate-x-5":"translate-x-0"}`,children:[e.jsx("span",{className:`absolute inset-0 flex h-full w-full items-center justify-center transition-opacity ${s?"opacity-0":"opacity-100"}`,children:e.jsx("svg",{className:"h-3 w-3 text-gray-400 dark:text-gray-600",fill:"none",viewBox:"0 0 12 12",children:e.jsx("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("span",{className:`absolute inset-0 flex h-full w-full items-center justify-center transition-opacity ${s?"opacity-100":"opacity-0"}`,children:e.jsx("svg",{className:"h-3 w-3 text-[#00ffbd]",fill:"currentColor",viewBox:"0 0 12 12",children:e.jsx("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})})})]})})})]}),s&&r&&e.jsx("div",{className:"mt-4 pl-4 border-l-2 border-[#00ffbd]/20",children:r})]}),cg=({isOpen:a,onClose:t,currentStep:s,tokenName:n,error:r,deployedAddress:l,formData:d,setShowLiquidityModal:o})=>{const m=[{key:"preparing",label:"Preparing Transaction",icon:qa.Preparing},{key:"deploying",label:"Creating Meme Token",icon:qa.CreatingToken},{key:"completed",label:"Token Created Successfully",icon:qa.Completed}],c=m.findIndex(N=>N.key===s),u=!!r,x=N=>N?.includes("user rejected action")?"Transaction was rejected. Please try again.":N?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":N?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred",f=async N=>{try{await navigator.clipboard.writeText(N),Le.success("Address copied to clipboard!")}catch{Le.error("Failed to copy address")}};return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-[99999]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm z-[99999]"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-[99999]",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[u?"Error Creating Token":"Creating Meme Token",n&&!u&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:n})]}),e.jsx("div",{className:"space-y-4",children:m.map((N,v)=>{const C=N.icon,E=v===c,w=!u&&v<c,p=u&&v===c;return e.jsxs("div",{className:Rt("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":E&&!p,"text-[#00ffbd]":w,"bg-red-500/10 text-red-500":p,"text-gray-400":!E&&!w&&!p}),children:[e.jsx(C,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:N.label}),E&&N.key==="deploying"&&!u&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Creating meme token ",n]})]})]},N.key)})}),u&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qa.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:x(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),s==="completed"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#00ffbd] font-medium text-lg",children:"Meme token created successfully! 🎉"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Your meme token has been deployed and is ready for use"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Token Contract Address"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("code",{className:"text-sm text-gray-800 dark:text-gray-200 flex-1 break-all",children:l}),e.jsx("button",{onClick:()=>f(l),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md transition-colors",title:"Copy address",children:e.jsx(ys,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"ℹ️ Copy this address to import your token in your wallet"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Next Steps"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Import Token"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add the token to your wallet using the contract address above"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Add Liquidity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Provide liquidity to enable trading of your token"}),d?.initialLiquidity?.enabled&&e.jsx("button",{onClick:()=>{t(),o(!0)},className:"mt-2 px-4 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Add Initial Liquidity"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Start Trading"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Use TokenFactory Swap to trade your token"})]})]})]})]})]})]})})})})]})})},mg=({isOpen:a,onClose:t,onRate:s})=>{const[n,r]=i.useState(0),[l,d]=i.useState(0);return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(5)].map((o,m)=>{const c=m+1;return e.jsx("button",{className:`text-3xl focus:outline-none transition-colors ${c<=(l||n)?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`,onClick:()=>{r(c),s(c),setTimeout(t,500)},onMouseEnter:()=>d(c),onMouseLeave:()=>d(0),children:e.jsx(Dt,{})},c)})}),e.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 text-center",children:"How was your token creation experience?"}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 dark:bg-blue-900 px-4 py-2 text-sm font-medium text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:t,children:"Skip"})})]})})})})]})})},ug=({isOpen:a,onClose:t,tokenAddress:s,tokenName:n,tokenSymbol:r,totalSupply:l,onSuccess:d})=>{const[o,m]=i.useState(""),[c,u]=i.useState(""),[x,f]=i.useState(!1),[N,v]=i.useState(null),[C,E]=i.useState(!1),[w,p]=i.useState(null),{chain:y}=Ft(),g=()=>{if(!c||!o||c==="0"||o==="0")return"0";try{return(Number(o)/Number(c)).toFixed(8)}catch{return"0"}},j=async()=>{if(!c||!o){v("Please fill in all fields");return}try{f(!0),v(null);const S=await new he(window.ethereum).getSigner(),A=new J(s,gs.abi,S),h=await A.uniswapV2Router(),I=new J(h,["function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)"],S),O=Ie(c,18),F=Ut(o);if(await A.balanceOf(S.address)<O)throw new Error("Insufficient token balance");if(await A.allowance(S.address,h)<O){const k=await A.approve(h,O);console.log("Waiting for approval transaction to be mined..."),await k.wait(),console.log("Approval transaction mined"),await new Promise(D=>setTimeout(D,5e3))}const P=Math.floor(Date.now()/1e3)+60*20;console.log("Adding liquidity...");const B=await I.addLiquidityETH(A.target,O,0,0,S.address,P,{value:F});console.log("Waiting for liquidity transaction to be mined..."),await B.wait(),console.log("Liquidity added successfully"),E(!0),d()}catch(L){console.error("Error adding liquidity:",L),v(L.message||"Failed to add liquidity")}finally{f(!1)}};i.useEffect(()=>{(async()=>{try{if(!s)return;await new Promise(F=>setTimeout(F,2e3));const S=new he(window.ethereum),A=new J(s,gs.abi,S),h=await A.uniswapV2Router();console.log("Router address:",h);let I=3,O=null;for(;I>0&&!O;)try{if(O=await A.uniswapV2Pair(),O&&O!=="0x0000000000000000000000000000000000000000"){console.log("Pool address found:",O),p(O);break}}catch{console.log(`Attempt ${4-I} failed, retrying...`),I--,I>0&&await new Promise(U=>setTimeout(U,2e3))}(!O||O==="0x0000000000000000000000000000000000000000")&&console.log("Pool address not found after retries")}catch(S){console.error("Error getting pool address:",S)}})()},[s]);const b=y?.id?ng[y.id]||{name:"Unknown DEX",getTradeUrl:()=>"#"}:null,$=async L=>{try{await navigator.clipboard.writeText(L),Le.success("Address copied to clipboard!")}catch{Le.error("Failed to copy address")}};return e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsx(le,{as:"div",className:"relative z-[99999]",onClose:t,children:e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Add Initial Liquidity",e.jsxs("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[n," (",r,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:sl[b?.name||"QuickSwap"],alt:b?.name||"QuickSwap",className:"w-5 h-5"}),e.jsxs("span",{children:[b?.name||"QuickSwap"," on ",b?.network||"Unknown"]})]})]})]}),w&&e.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-[#2d2f36] rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Liquidity Pool Created"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("code",{className:"text-xs text-gray-800 dark:text-gray-200 flex-1 break-all",children:w}),e.jsx("button",{onClick:()=>$(w),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md transition-colors",title:"Copy pool address",children:e.jsx(ys,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"The liquidity pool has been automatically created. Add liquidity below to enable trading."})]}),C?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#00ffbd]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Rs,{className:"w-10 h-10 text-[#00ffbd]"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Liquidity Added Successfully!"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Your token is now ready for trading on ",b.name]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Start Trading"}),e.jsxs("a",{href:b.getTradeUrl(s),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-4 py-2 bg-[#00ffbd] text-black rounded-lg hover:bg-[#00e6a9] transition-colors",children:[e.jsx(Jr,{className:"w-5 h-5"}),"Trade on ",b.name]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Close"})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Token Amount"}),e.jsx("input",{type:"text",value:c,onChange:L=>u(L.target.value),className:"w-full bg-white dark:bg-[#2d2f36] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:l?`Max: ${de(l,18)}`:"Enter token amount"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:[y?.nativeCurrency?.symbol||"ETH"," Amount"]}),e.jsx("input",{type:"text",value:o,onChange:L=>m(L.target.value),className:"w-full bg-white dark:bg-[#2d2f36] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:`e.g., 0.1 ${y?.nativeCurrency?.symbol||"ETH"}`})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-[#2d2f36] rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Initial Token Price"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[g()," ",y?.nativeCurrency?.symbol||"ETH"]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"per token"})]})]})}),N&&e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-500",children:N})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:x,className:Rt("px-4 py-2 text-sm font-medium rounded-lg","bg-[#00ffbd] text-black","hover:bg-[#00e6a9] transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:x?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(dd,{className:"animate-spin"}),"Adding Liquidity..."]}):"Add Liquidity"})]})]})})]})})})})})})},xg=({isOpen:a,onClose:t,onConfirm:s,chain:n})=>e.jsx(me,{appear:!0,show:a,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-[99999]",onClose:t,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(le.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Ready to Launch Your Meme Token? 🚀"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("p",{className:"mb-3",children:"Here's what will happen next:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsx("li",{children:"Your token will be created on the blockchain"}),e.jsx("li",{children:"A liquidity pool will be automatically created"}),e.jsx("li",{children:"You'll be prompted to add initial liquidity to enable trading"})]})]}),e.jsx("div",{className:"bg-[#00ffbd]/10 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Important:"})," After your token is created, you'll need to add liquidity to enable trading. Make sure you have enough ",n?.nativeCurrency?.symbol||"ETH"," for gas fees and initial liquidity."]})}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:s,className:"px-6 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Let's Go! 🚀"})]})]})]})})})})]})}),za=({title:a,description:t,children:s,isActive:n})=>n?e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-8 shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:a}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:t}),s]}):null,Va=({content:a})=>e.jsxs("div",{className:"group relative inline-block ml-2",children:[e.jsx(Xi,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"}),e.jsx("div",{className:"invisible group-hover:visible absolute z-10 w-64 p-2 mt-2 text-sm text-gray-500 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:a})]}),gg=({currentStep:a,formData:t,handleChange:s,handleToggle:n})=>{const{chain:r}=Ft(),l=r?.id?Qr[r.id]:null;return e.jsxs(e.Fragment,{children:[e.jsx(za,{title:"Essential Contract Details",description:"Set up the basic information for your token",isActive:a===1,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Token Name",e.jsx(Va,{content:"The name of your token. This will be displayed on DEXs and wallets."})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Pepe Token"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["DEX Information",e.jsx(Va,{content:"The decentralized exchange where your token's liquidity pool will be created."})]}),e.jsx("div",{className:"p-4 rounded-lg border dark:bg-gray-800 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:sl[l?.name||"QuickSwap"],alt:l?.name,className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:l?.name||"Not Connected"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:l?`Router: ${l.router.slice(0,6)}...${l.router.slice(-4)}`:"Please connect wallet and select network"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Token Symbol",e.jsx(Va,{content:"A short identifier for your token (2-6 characters)"})]}),e.jsx("input",{type:"text",name:"symbol",value:t.symbol,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., PEPE"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Total Supply",e.jsx(Va,{content:"The total number of tokens to create"})]}),e.jsx("input",{type:"number",name:"totalSupply",value:t.totalSupply,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., 1000000"})]})]}),e.jsx(Vt,{label:"Custom Header Message",description:"Add a custom ASCII art header to your contract",enabled:t.enableCustomHeader,onToggle:()=>n("enableCustomHeader"),children:e.jsx("textarea",{name:"customHeader",value:t.customHeader,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white mt-4",placeholder:"Enter your custom ASCII art header",rows:4})})]})}),e.jsx(za,{title:"Fee Configuration",description:"Configure buy/sell fees and fee distribution",isActive:a===2,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Buy / Sell Fees"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"These are the main fee switches. If both buy and sell fees are disabled, no fees will be collected regardless of other fee settings below. The fees collected here will be distributed according to the fee structure you define below."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Vt,{label:"Buy Fee",description:"Enable fee collection on buy transactions (enter percentage, e.g. 6 for 6%)",enabled:t.buyFeesEnabled,onToggle:()=>n("buyFeesEnabled"),children:t.buyFeesEnabled&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"buyFees",value:t.buyFees,onChange:s,className:"flex-1 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 6 for 6%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})})}),e.jsx(Vt,{label:"Sell Fee",description:"Enable fee collection on sell transactions (enter percentage, e.g. 6 for 6%)",enabled:t.sellFeesEnabled,onToggle:()=>n("sellFeesEnabled"),children:t.sellFeesEnabled&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"sellFees",value:t.sellFees,onChange:s,className:"flex-1 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 6 for 6%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})})})]})]}),(t.buyFeesEnabled||t.sellFeesEnabled)&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Fees Split Structure"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"This section controls how the collected buy/sell fees are distributed. For example, if you set a 5% buy fee above and enable a 60% dev fee and 40% marketing fee here, from that 5% buy fee, 60% of the collected tokens will go to the dev wallet and 40% to the marketing wallet after being swapped to ETH."}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Vt,{label:"Burn Fees",description:"Percentage of collected fees that will be permanently burned (enter percentage, e.g. 20 for 20%)",enabled:t.burnFee>0,onToggle:()=>n("burnFeeEnabled"),children:t.burnFee>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"burnFee",value:t.burnFee,onChange:s,className:"flex-1 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 20 for 20%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})})}),e.jsx(Vt,{label:"Dev Fees",description:"Percentage of collected fees sent to the Dev Wallet (enter percentage, e.g. 20 for 20%)",enabled:t.devFee>0,onToggle:()=>n("devFeeEnabled"),children:t.devFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"devAddress",value:t.devAddress,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Dev recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"devFee",value:t.devFee,onChange:s,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 20 for 20%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})}),e.jsx(Vt,{label:"Marketing Fees",description:"Percentage of fees sent to the Marketing Wallet",enabled:t.marketingFee>0,onToggle:()=>n("marketingFeeEnabled"),children:t.marketingFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"marketingAddress",value:t.marketingAddress,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Marketing recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"marketingFee",value:t.marketingFee,onChange:s,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"0"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})}),e.jsx(Vt,{label:"Liquidity Fees",description:"Percentage of fees sent to the Liquidity Wallet",enabled:t.liquidityFee>0,onToggle:()=>n("liquidityFeeEnabled"),children:t.liquidityFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"liquidityAddress",value:t.liquidityAddress,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Liquidity recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"liquidityFee",value:t.liquidityFee,onChange:s,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"0"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})}),e.jsx(Vt,{label:"Treasury Fees",description:"Percentage of fees sent to the Treasury Wallet",enabled:t.treasuryFee>0,onToggle:()=>n("treasuryFeeEnabled"),children:t.treasuryFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"treasuryAddress",value:t.treasuryAddress,onChange:s,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Treasury recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"treasuryFee",value:t.treasuryFee,onChange:s,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"0"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})})]})]})]})}),e.jsx(za,{title:"Advanced Settings",description:"Configure additional token features",isActive:a===3,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(Vt,{label:"Blacklist",description:"Enable address blacklisting functionality",enabled:t.enableBlacklist,onToggle:()=>n("enableBlacklist")}),e.jsx(Vt,{label:"Snapshot",description:"Enable token balance snapshot functionality",enabled:t.enableSnapshot,onToggle:()=>n("enableSnapshot")})]})}),e.jsx(za,{title:"Review & Deploy",description:"Review your token configuration before deployment",isActive:a===4,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Token Creation Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Token Name"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Symbol"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.symbol||"-"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Supply"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.totalSupply||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Features Enabled"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.enableBlacklist&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#00ffbd]/10 text-[#00ffbd] rounded-full",children:"Blacklist"}),t.enableSnapshot&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#00ffbd]/10 text-[#00ffbd] rounded-full",children:"Snapshot"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fee Configuration"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["Buy Fee: ",e.jsxs("span",{className:"font-medium",children:[t.buyFees,"%"]})]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["Sell Fee: ",e.jsxs("span",{className:"font-medium",children:[t.sellFees,"%"]})]})]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-900",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xi,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-400",children:"Important Notice"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:"Please review all settings carefully before proceeding. Once deployed, the token contract cannot be modified."})]})]})})]})})]})};function hg(){const{isDarkMode:a}=Se(),[t,s]=i.useState(!1),[n,r]=i.useState(!1),[l,d]=i.useState(!1),[o,m]=i.useState(!0);return i.useEffect(()=>{const c=()=>{window.ethereum?.request&&m(!1)};c();const u=setInterval(c,500),x=setTimeout(()=>{clearInterval(u),m(!1)},1e4);return()=>{clearInterval(u),clearTimeout(x)}},[]),o?e.jsx("div",{className:"min-h-screen bg-white dark:bg-[#0a0b0f] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#00ffbd] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading Web3 Provider..."})]})}):e.jsx(D0,{children:e.jsx(mo,{config:uo,children:e.jsx(Tc,{chains:mc,theme:a?Cc({accentColor:"#00ffbd",accentColorForeground:"black",borderRadius:"large",fontStack:"system",overlayBlur:"small"}):Sc({accentColor:"#00ffbd",accentColorForeground:"black",borderRadius:"large",fontStack:"system",overlayBlur:"small"}),modalSize:"wide",showRecentTransactions:!0,appInfo:{appName:"Token Factory"},children:e.jsx(nm,{children:e.jsxs("div",{className:"min-h-screen bg-white dark:bg-[#0a0b0f]",children:[e.jsx(rn,{position:"top-right"}),e.jsxs("div",{className:"flex",children:[e.jsx(m0,{onOpenModal:()=>s(!0),onOpenNFTModal:()=>r(!0)}),e.jsxs("div",{className:"flex-1 bg-white dark:bg-[#0a0b0f]",children:[e.jsx(g0,{}),e.jsxs(cd,{children:[e.jsx(Et,{path:"/",element:e.jsx(Ro,{})}),e.jsx(Et,{path:"/collections",element:e.jsx(Oo,{})}),e.jsx(Et,{path:"/collection/:symbol",element:e.jsx(Uo,{})}),e.jsx(Et,{path:"/history",element:e.jsx(Wo,{})}),e.jsx(Et,{path:"/account",element:e.jsx(Ho,{})}),e.jsx(Et,{path:"/bridge",element:e.jsx(Ko,{})}),e.jsx(Et,{path:"/feestracker",element:e.jsx(el,{})}),e.jsx(Et,{path:"/memefactory",element:e.jsx(al,{})}),e.jsx(Et,{path:"/trading",element:e.jsx(Jo,{})}),e.jsxs(Et,{path:"/admin",element:e.jsx(No,{}),children:[e.jsx(Et,{index:!0,element:e.jsx(ko,{})}),e.jsx(Et,{path:"sales",element:e.jsx(To,{})}),e.jsx(Et,{path:"store-verification",element:e.jsx(Co,{})})]})]})]})]}),e.jsx(z0,{isOpen:t,onClose:()=>s(!1)}),e.jsx(em,{isOpen:n,onClose:()=>r(!1)}),e.jsx(am,{isOpen:l,onClose:()=>d(!1)})]})})})})})}function pg(){const{isDarkMode:a}=Se(),[t,s]=i.useState(""),[n,r]=i.useState(""),[l,d]=i.useState(!1),[o,m]=i.useState(!1),{login:c,loginWithGoogle:u}=Ve(),x=rt(),f=fs();i.useEffect(()=>{f.state?.email&&s(f.state.email)},[f.state]);const N=async C=>{C.preventDefault(),m(!0);try{await c(t,n),M.success("Welcome back!"),x("/merch-store")}catch(E){M.error(E.message)}finally{m(!1)}},v=async()=>{try{await u(),M.success("Welcome!"),x("/merch-store")}catch(C){C.message!=="Sign in cancelled"&&M.error(C.message)}};return e.jsx("div",{className:`min-h-screen ${a?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-md w-full space-y-8 ${a?"bg-gray-800":"bg-white"} p-8 rounded-2xl shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-3xl font-bold ${a?"text-white":"text-gray-900"}`,children:"Welcome back"}),e.jsxs("p",{className:`mt-2 text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Don't have an account?"," ",e.jsx(Ge,{to:"/merch-store/signup",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Sign up"})]})]}),f.state?.message&&e.jsx("div",{className:`${a?"bg-green-900 border-green-800":"bg-green-50 border-green-100"} border rounded-lg p-4`,children:e.jsx("p",{className:`text-sm ${a?"text-green-100":"text-green-800"}`,children:f.state.message})}),e.jsxs("form",{onSubmit:N,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:C=>s(C.target.value),className:`mt-1 block w-full px-3 py-2 border ${a?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors`,placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:l?"text":"password",required:!0,value:n,onChange:C=>r(C.target.value),className:`mt-1 block w-full px-3 py-2 border ${a?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors pr-10`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:`absolute inset-y-0 right-0 mt-1 pr-3 flex items-center ${a?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:l?e.jsx(Rr,{className:"w-5 h-5"}):e.jsx(Or,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-[#FF1B6B] focus:ring-[#FF1B6B] border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:`ml-2 block text-sm ${a?"text-gray-200":"text-gray-900"}`,children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(Ge,{to:"/merch-store/forgot-password",className:"font-medium text-[#FF1B6B] hover:text-[#D4145A]",children:"Forgot your password?"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Signing in...":"Sign in"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:`w-full border-t ${a?"border-gray-600":"border-gray-300"}`})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:`px-2 ${a?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:v,className:`w-full flex items-center justify-center gap-3 py-3 px-4 border ${a?"border-gray-600 bg-gray-700 hover:bg-gray-600":"border-gray-300 bg-white hover:bg-gray-50"} rounded-lg shadow-sm text-sm font-medium ${a?"text-white":"text-gray-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] transition-colors`,children:[e.jsx(Zi,{className:"w-5 h-5"}),"Google"]})]})]})]})})}function fg(){const{isDarkMode:a}=Se(),[t,s]=i.useState({name:"",email:"",password:"",confirmPassword:""}),[n,r]=i.useState(!1),[l,d]=i.useState(!1),[o,m]=i.useState(!1),[c,u]=i.useState(!1),{signup:x,loginWithGoogle:f}=Ve(),N=rt();fs();const v={length:/.{6,}/,uppercase:/[A-Z]/,lowercase:/[a-z]/,number:/[0-9]/,special:/[!@#$%^&*]/},C={length:v.length.test(t.password),uppercase:v.uppercase.test(t.password),lowercase:v.lowercase.test(t.password),number:v.number.test(t.password),special:v.special.test(t.password)},E=y=>{const{name:g,value:j}=y.target;s(T=>({...T,[g]:j}))},w=async y=>{if(y.preventDefault(),m(!0),t.password!==t.confirmPassword){M.error("Passwords do not match"),m(!1);return}const g={length:/.{6,}/,uppercase:/[A-Z]/,lowercase:/[a-z]/,number:/[0-9]/,special:/[!@#$%^&*]/},j=[{test:g.length,message:"Password must be at least 6 characters long"},{test:g.uppercase,message:"Password must include at least one uppercase letter"},{test:g.lowercase,message:"Password must include at least one lowercase letter"},{test:g.number,message:"Password must include at least one number"},{test:g.special,message:"Password must include at least one special character"}];for(const T of j)if(!T.test.test(t.password)){M.error(T.message),m(!1);return}try{await x(t.email,t.password,{name:t.name,email:t.email,isBuyer:!0,shippingAddress:{street:"",city:"",state:"",country:"",postalCode:""}}),M.success("Account created successfully! Please sign in."),N("/merch-store/login",{state:{message:"Account created successfully! Please sign in.",email:t.email},replace:!0})}catch(T){console.error("Error signing up:",T),M.error(T.message||"Failed to create account")}finally{m(!1)}},p=async()=>{u(!0);try{const y=await f(),j=(await De(ge(ae,"users",y.uid))).data().createdAt===new Date().toISOString();M.success(j?"Account created successfully!":"Welcome back!"),N("/merch-store",{replace:!0})}catch(y){u(!1),y.message!=="Sign in cancelled"&&M.error(y.message)}};return c?e.jsx("div",{className:`min-h-screen ${a?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:`${a?"text-gray-300":"text-gray-600"}`,children:"Setting up your account..."})]})}):e.jsx("div",{className:`min-h-screen ${a?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-md w-full space-y-8 ${a?"bg-gray-800":"bg-white"} p-8 rounded-2xl shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-3xl font-bold ${a?"text-white":"text-gray-900"}`,children:"Create an account"}),e.jsxs("p",{className:`mt-2 text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Already have an account?"," ",e.jsx(Ge,{to:"/merch-store/login",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Sign in"})]})]}),e.jsxs("form",{onSubmit:w,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:t.name,onChange:E,className:`mt-1 block w-full px-3 py-2 border ${a?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent`,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:E,className:`mt-1 block w-full px-3 py-2 border ${a?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent`,placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:n?"text":"password",required:!0,value:t.password,onChange:E,className:`mt-1 block w-full px-3 py-2 border ${a?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent pr-10`,placeholder:"Create a password"}),e.jsx("button",{type:"button",onClick:()=>r(!n),className:`absolute inset-y-0 right-0 mt-1 pr-3 flex items-center ${a?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:n?e.jsx(Rr,{className:"w-5 h-5"}):e.jsx(Or,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"} font-medium`,children:"Password must include:"}),e.jsxs("ul",{className:"text-xs space-y-1 pl-1",children:[e.jsxs("li",{className:`flex items-center gap-2 ${C.length?"text-green-500":a?"text-gray-400":"text-gray-500"}`,children:[C.length&&e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{children:"At least 6 characters"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${C.uppercase?"text-green-500":a?"text-gray-400":"text-gray-500"}`,children:[C.uppercase&&e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one uppercase letter (A-Z)"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${C.lowercase?"text-green-500":a?"text-gray-400":"text-gray-500"}`,children:[C.lowercase&&e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one lowercase letter (a-z)"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${C.number?"text-green-500":a?"text-gray-400":"text-gray-500"}`,children:[C.number&&e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one number (0-9)"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${C.special?"text-green-500":a?"text-gray-400":"text-gray-500"}`,children:[C.special&&e.jsx(ta,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one special character (!@#$%^&*)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:l?"text":"password",required:!0,value:t.confirmPassword,onChange:E,className:`mt-1 block w-full px-3 py-2 border ${a?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent pr-10`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:`absolute inset-y-0 right-0 mt-1 pr-3 flex items-center ${a?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:l?e.jsx(Rr,{className:"w-5 h-5"}):e.jsx(Or,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Creating account...":"Create account"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:`w-full border-t ${a?"border-gray-600":"border-gray-300"}`})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:`px-2 ${a?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:p,disabled:c,className:`w-full flex items-center justify-center gap-3 py-3 px-4 border ${a?"border-gray-600 bg-gray-700 hover:bg-gray-600":"border-gray-300 bg-white hover:bg-gray-50"} rounded-lg shadow-sm text-sm font-medium ${a?"text-white":"text-gray-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(Zi,{className:"w-5 h-5"}),c?"Setting up account...":"Google"]})]})]}),e.jsxs("p",{className:`text-xs text-center ${a?"text-gray-400":"text-gray-500"}`,children:["By creating an account, you agree to our"," ",e.jsx(Ge,{to:"/merch-store/terms",className:"text-[#FF1B6B] hover:text-[#D4145A]",children:"Terms of Service"})," ","and"," ",e.jsx(Ge,{to:"/merch-store/terms",className:"text-[#FF1B6B] hover:text-[#D4145A]",children:"Privacy Policy"})]})]})})}const yg={AF:"+93",AL:"+355",DZ:"+213",AS:"+1-684",AD:"+376",AO:"+244",AI:"+1-264",AQ:"+672",AG:"+1-268",AR:"+54",AM:"+374",AW:"+297",AU:"+61",AT:"+43",AZ:"+994",BS:"+1-242",BH:"+973",BD:"+880",BB:"+1-246",BY:"+375",BE:"+32",BZ:"+501",BJ:"+229",BM:"+1-441",BT:"+975",BO:"+591",BA:"+387",BW:"+267",BR:"+55",BN:"+673",BG:"+359",BF:"+226",BI:"+257",KH:"+855",CM:"+237",CA:"+1",CV:"+238",KY:"+1-345",CF:"+236",TD:"+235",CL:"+56",CN:"+86",CO:"+57",KM:"+269",CG:"+242",CD:"+243",CK:"+682",CR:"+506",HR:"+385",CU:"+53",CY:"+357",CZ:"+420",DK:"+45",DJ:"+253",DM:"+1-767",DO:"+1-809",EC:"+593",EG:"+20",SV:"+503",GQ:"+240",ER:"+291",EE:"+372",ET:"+251",FK:"+500",FO:"+298",FJ:"+679",FI:"+358",FR:"+33",GF:"+594",PF:"+689",GA:"+241",GM:"+220",GE:"+995",DE:"+49",GH:"+233",GI:"+350",GR:"+30",GL:"+299",GD:"+1-473",GP:"+590",GU:"+1-671",GT:"+502",GN:"+224",GW:"+245",GY:"+592",HT:"+509",HN:"+504",HK:"+852",HU:"+36",IS:"+354",IN:"+91",ID:"+62",IR:"+98",IQ:"+964",IE:"+353",IL:"+972",IT:"+39",JM:"+1-876",JP:"+81",JO:"+962",KZ:"+7",KE:"+254",KI:"+686",KP:"+850",KR:"+82",KW:"+965",KG:"+996",LA:"+856",LV:"+371",LB:"+961",LS:"+266",LR:"+231",LY:"+218",LI:"+423",LT:"+370",LU:"+352",MO:"+853",MK:"+389",MG:"+261",MW:"+265",MY:"+60",MV:"+960",ML:"+223",MT:"+356",MH:"+692",MQ:"+596",MR:"+222",MU:"+230",YT:"+262",MX:"+52",FM:"+691",MD:"+373",MC:"+377",MN:"+976",ME:"+382",MS:"+1-664",MA:"+212",MZ:"+258",MM:"+95",NA:"+264",NR:"+674",NP:"+977",NL:"+31",NC:"+687",NZ:"+64",NI:"+505",NE:"+227",NG:"+234",NU:"+683",NF:"+672",MP:"+1-670",NO:"+47",OM:"+968",PK:"+92",PW:"+680",PS:"+970",PA:"+507",PG:"+675",PY:"+595",PE:"+51",PH:"+63",PN:"+64",PL:"+48",PT:"+351",PR:"+1-787",QA:"+974",RE:"+262",RO:"+40",RU:"+7",RW:"+250",BL:"+590",SH:"+290",KN:"+1-869",LC:"+1-758",MF:"+590",PM:"+508",VC:"+1-784",WS:"+685",SM:"+378",ST:"+239",SA:"+966",SN:"+221",RS:"+381",SC:"+248",SL:"+232",SG:"+65",SK:"+421",SI:"+386",SB:"+677",SO:"+252",ZA:"+27",SS:"+211",ES:"+34",LK:"+94",SD:"+249",SR:"+597",SJ:"+47",SZ:"+268",SE:"+46",CH:"+41",SY:"+963",TW:"+886",TJ:"+992",TZ:"+255",TH:"+66",TL:"+670",TG:"+228",TK:"+690",TO:"+676",TT:"+1-868",TN:"+216",TR:"+90",TM:"+993",TC:"+1-649",TV:"+688",VI:"+1-340",UG:"+256",UA:"+380",AE:"+971",GB:"+44",US:"+1",UY:"+598",UZ:"+998",VU:"+678",VA:"+379",VE:"+58",VN:"+84",WF:"+681",EH:"+212",YE:"+967",ZM:"+260",ZW:"+263"};function bg(){rt();const{user:a}=Ve(),{isDarkMode:t}=Se(),[s,n]=i.useState(1),r=750,[l,d]=i.useState(!1),o=i.useMemo(()=>Ji().getData(),[]),[m,c]=i.useState("+233 XX XXX XXXX"),u=i.useMemo(()=>o.map(g=>({value:g.value,label:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{countryCode:g.value,svg:!0,style:{width:"1.5em",height:"1.5em"}}),g.label]}),searchLabel:g.label})),[o]),x={control:g=>({...g,padding:"2px",borderColor:t?"#4B5563":"#E5E7EB",backgroundColor:t?"#374151":"white","&:hover":{borderColor:"#FF1B6B"}}),option:(g,j)=>({...g,backgroundColor:j.isSelected?"#FF1B6B":j.isFocused?t?"#4B5563":"#FFE4E4":t?"#374151":"white",color:j.isSelected?"white":t?"#E5E7EB":"#374151","&:hover":{backgroundColor:j.isSelected?"#FF1B6B":t?"#4B5563":"#FFE4E4"}}),menu:g=>({...g,backgroundColor:t?"#374151":"white"}),singleValue:g=>({...g,color:t?"#E5E7EB":"#374151"}),input:g=>({...g,color:t?"#E5E7EB":"#374151"})},[f,N]=i.useState({storeName:"",description:"",contactEmail:a?.email||"",phoneNumber:"",country:{name:"",code:"",flag:""},city:"",postalCode:"",preferredToken:"USDC",preferredNetwork:"polygon",walletAddress:""}),v=g=>{const{name:j,value:T}=g.target;N(b=>({...b,[j]:T}))},C=()=>`SELL_${Math.floor(Math.random()*1e5).toString().padStart(6,"0")}`,E=async g=>{g.preventDefault(),n(3)},w=async g=>{d(!0);try{if(!a){M.error("Please login first");return}const j=C();await ts(ge(ae,"sellers",j),{sellerId:j,userId:a.uid,...f,status:"active",createdAt:We(),statistics:{totalSales:0,totalOrders:0,rating:0},balance:{available:0,pending:0},paymentReference:g}),await $e(ge(ae,"users",a.uid),{isSeller:!0,sellerId:j,updatedAt:We()}),(await De(ge(ae,"users",a.uid))).exists()&&(window.location.href="/merch-store/dashboard"),M.success("Store created successfully!")}catch(j){console.error("Error creating store:",j),M.error("Failed to create store. Please try again.")}finally{d(!1)}},p=()=>{window.PaystackPop.setup({key:"pk_live_6c4619b6e6f7db500ee33c96d03c3db3adf197ae",email:a?.email||f.contactEmail,amount:r*100,currency:"GHS",callback:j=>w(j.reference),onClose:()=>{M.error("Payment cancelled")}}).openIframe()};i.useEffect(()=>{const g=document.createElement("script");return g.src="https://js.paystack.co/v1/inline.js",g.async=!0,document.body.appendChild(g),()=>{document.body.removeChild(g)}},[]);const y=g=>{N(T=>({...T,country:{name:g.searchLabel,code:g.value,flag:`https://flagcdn.com/${g.value.toLowerCase()}.svg`}}));const j=yg[g.value]||"+233";c(`${j} XX XXX XXXX`)};return e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-2xl mx-auto ${t?"bg-gray-900":""}`,children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:`flex items-center ${s>=1?"text-[#FF1B6B]":t?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${s>=1?"border-[#FF1B6B] bg-pink-900/20":t?"border-gray-600":"border-gray-300"} flex items-center justify-center font-semibold transition-colors duration-300`,children:"1"}),e.jsx("span",{className:"ml-2",children:"Information"})]}),e.jsx("div",{className:`w-16 h-0.5 ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full bg-[#FF1B6B] transition-all duration-300",style:{width:s>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex items-center ${s>=2?"text-[#FF1B6B]":t?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${s>=2?"border-[#FF1B6B] bg-pink-900/20":t?"border-gray-600":"border-gray-300"} flex items-center justify-center font-semibold transition-colors duration-300`,children:"2"}),e.jsx("span",{className:"ml-2",children:"Store Info"})]}),e.jsx("div",{className:`w-16 h-0.5 ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full bg-[#FF1B6B] transition-all duration-300",style:{width:s>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex items-center ${s>=3?"text-[#FF1B6B]":t?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${s>=3?"border-[#FF1B6B] bg-pink-900/20":t?"border-gray-600":"border-gray-300"} flex items-center justify-center font-semibold transition-colors duration-300`,children:"3"}),e.jsx("span",{className:"ml-2",children:"Payment"})]})]})}),s===1&&e.jsxs(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 shadow-lg`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(Ds,{className:"w-16 h-16 text-[#FF1B6B] mx-auto mb-4"}),e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Become a Seller"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Start selling your merchandise with a one-time listing fee"})]}),e.jsxs("div",{className:`${t?"bg-pink-900/20":"bg-pink-50"} rounded-lg p-6 mb-8`,children:[e.jsx("h2",{className:`text-xl font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"What's Included:"}),e.jsx("ul",{className:"space-y-3",children:["List unlimited products","Manage your orders easily","Secure payment processing","Direct customer communication","Flexible withdrawal options"].map((g,j)=>e.jsxs("li",{className:`flex items-center ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsx(Ki,{className:"w-5 h-5 text-[#FF1B6B] mr-2"}),g]},j))})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:`text-3xl font-bold ${t?"text-gray-100":"text-gray-900"} mb-1`,children:["GHS ",r.toFixed(2),e.jsx("span",{className:`text-sm font-normal ${t?"text-gray-400":"text-gray-500"} ml-1`,children:"one-time fee"})]})}),e.jsx("button",{onClick:()=>n(2),className:"w-full bg-[#FF1B6B] text-white py-3 px-6 rounded-lg font-medium hover:bg-[#D4145A] transition-colors duration-300",children:"Next: Store Details"}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("div",{className:`flex items-center justify-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[e.jsx("span",{children:"Secure payment powered by"}),e.jsx("img",{src:"/paystack.png",alt:"Paystack",className:"h-8 w-auto object-contain ml-2"})]})})]}),s===2&&e.jsxs(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 shadow-lg`,children:[e.jsxs("button",{onClick:()=>n(1),className:`flex items-center ${t?"text-gray-400 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mb-6 transition-colors`,children:[e.jsx(la,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Store Information"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Tell us about your business"})]}),e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Store Details"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Store Name *"}),e.jsx("input",{type:"text",name:"storeName",value:f.storeName,onChange:v,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Your store name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Description"}),e.jsx("textarea",{name:"description",value:f.description,onChange:v,rows:3,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Tell customers about your store"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Email *"}),e.jsx("input",{type:"email",name:"contactEmail",value:f.contactEmail,onChange:v,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"contact@yourstore.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:f.phoneNumber,onChange:v,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:m})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Country *"}),e.jsx(eo,{options:u,styles:x,onChange:y,required:!0,placeholder:"select",className:"country-select",value:f.country.code?u.find(g=>g.value===f.country.code):null,components:{Option:({children:g,...j})=>e.jsx(md.Option,{...j,children:j.data.label})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"City *"}),e.jsx("input",{type:"text",name:"city",value:f.city,onChange:v,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Your city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Postal Code *"}),e.jsx("input",{type:"text",name:"postalCode",value:f.postalCode,onChange:v,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Postal code"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Payment Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Preferred Network *"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[{id:"polygon",name:"Polygon",logo:"/polygon.png"},{id:"unichain",name:"Unichain Testnet",logo:"/unichain-logo.png"}].map(g=>e.jsxs("button",{type:"button",onClick:()=>v({target:{name:"preferredNetwork",value:g.id}}),className:`p-4 border rounded-lg transition-colors flex items-center justify-center gap-2 ${f.preferredNetwork===g.id?t?"border-[#FF1B6B] bg-pink-900/20":"border-[#FF1B6B] bg-pink-50":t?"border-gray-600 hover:border-[#FF1B6B] bg-gray-700":"border-gray-200 hover:border-[#FF1B6B]"}`,children:[e.jsx("img",{src:g.logo,alt:`${g.name} logo`,className:"w-6 h-6"}),e.jsx("span",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:g.name})]},g.id))}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Network you want to operate your store on"}),e.jsx("p",{className:"text-amber-600 font-medium mt-1",children:"⚠️ This selection cannot be changed after store creation"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Preferred Payment Token *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"preferredToken",value:f.preferredToken,onChange:v,required:!0,className:`w-full pl-12 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors appearance-none ${t?"bg-gray-700 border-gray-600 text-gray-200":"border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"USDC",children:"USDC (USD Coin)"}),e.jsx("option",{value:"USDT",children:"USDT (Tether)"})]}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx("img",{src:`/${f.preferredToken.toLowerCase()}.png`,alt:f.preferredToken,className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Token you want to receive payments in"}),e.jsx("p",{className:"text-amber-600 font-medium mt-1",children:"⚠️ This selection cannot be changed after store creation"})]})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",className:`w-full bg-[#FF1B6B] text-white py-3 px-6 rounded-lg font-medium hover:bg-[#D4145A] transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed ${t?"disabled:bg-gray-700 disabled:text-gray-500":"disabled:bg-gray-200 disabled:text-gray-500"}`,disabled:l,children:l?"Processing...":"Next: Proceed to Payment"})})]})]}),s===3&&e.jsxs(R.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 shadow-lg`,children:[e.jsxs("button",{onClick:()=>n(2),className:`flex items-center ${t?"text-gray-400 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mb-6 transition-colors`,children:[e.jsx(la,{className:"w-5 h-5 mr-2"}),"Back to Store Info"]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Complete Payment"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Pay the one-time listing fee to activate your store"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-gray-700":"bg-gray-50"} rounded-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Listing Fee"}),e.jsxs("span",{className:`font-semibold ${t?"text-gray-200":"text-gray-900"}`,children:["GHS ",r]})]}),e.jsx("div",{className:`border-t ${t?"border-gray-600":"border-gray-200"} pt-4`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Total"}),e.jsxs("span",{className:`font-bold text-xl ${t?"text-gray-100":"text-gray-900"}`,children:["GHS ",r]})]})})]}),e.jsx("button",{onClick:p,className:`w-full bg-[#FF1B6B] text-white py-3 px-6 rounded-lg font-medium hover:bg-[#D4145A] transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed ${t?"disabled:bg-gray-700 disabled:text-gray-500":"disabled:bg-gray-200 disabled:text-gray-500"}`,disabled:l,children:l?"Processing...":"Pay Now"}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("div",{className:`flex items-center justify-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[e.jsx("span",{children:"Secure payment powered by"}),e.jsx("img",{src:"/paystack.png",alt:"Paystack",className:"h-8 w-auto object-contain ml-2"})]})})]})]})]})}function ft({children:a}){const{user:t,loading:s}=Ve();return s?e.jsx("div",{className:"min-h-screen bg-[#FFF5F7] flex items-center justify-center",children:e.jsx(R.div,{animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},className:"w-12 h-12 rounded-full border-4 border-[#FF1B6B] border-t-transparent"})}):t?a:e.jsx(Ta,{to:"/login",replace:!0})}const wg=()=>{const{logout:a,user:t,cartCount:s}=Ve(),{isDarkMode:n,toggleTheme:r}=Se();rt();const l=fs(),[d,o]=i.useState(!1),[m,c]=i.useState(null),[u,x]=i.useState(0);i.useEffect(()=>{t?.sellerId&&(async()=>{const p=await De(ge(ae,"sellers",t.sellerId));if(p.exists()){const y=p.data();c({...y,isVerified:y.verificationStatus==="approved"})}})()},[t]),i.useEffect(()=>{if(!t)return;const w=Te(be(ae,"conversations"),fe("participants","array-contains",t.isSeller?t.sellerId:t.uid)),p=_t(w,y=>{const g=y.docs.reduce((j,T)=>{const b=T.data(),$=t.isSeller?t.sellerId:t.uid;return j+(b.unreadCount?.[$]||0)},0);x(g)});return()=>p()},[t]);const f=async()=>{try{await a()}catch{M.error("Failed to logout")}},N=[{to:"/merch-store",icon:In,label:"Browse",exact:!0},{to:"/merch-store/cart",icon:so,label:"Cart",count:s},{to:"/merch-store/orders",icon:_s,label:"My Orders"},{to:"/merch-store/my-refunds",icon:Lr,label:"My Refunds"},{to:"/merch-store/inbox",icon:Ea,label:"Inbox",count:u},{to:"/merch-store/settings",icon:$r,label:"Settings"}],v=[{to:"/merch-store/dashboard",icon:In,label:"Dashboard"},{to:"/merch-store/products",icon:Ds,label:"My Products"},{to:"/merch-store/add-product",icon:ud,label:"Add Product"},{to:"/merch-store/sales",icon:Aa,label:"Sales"},{to:"/merch-store/orders-received",icon:Kr,label:"Orders"},{to:"/merch-store/refunds",icon:Lr,label:"Buyers Refunds"},{to:"/merch-store/seller/inbox",icon:Ea,label:"Inbox",count:u},{to:"/merch-store/settings",icon:$r,label:"Settings"}],C=[{to:"/merch-store/terms",icon:oa,label:"Terms & Conditions"}],E=[...t?.isSeller?v:N,...C];return e.jsxs("div",{className:`min-h-screen ${n?"bg-gray-900":"bg-white"}`,children:[e.jsx(rn,{position:"top-right",toastOptions:{duration:3e3,style:{background:n?"#1F2937":"#333",color:"#fff"},success:{iconTheme:{primary:"#FF1B6B",secondary:"#fff"}}}}),e.jsx("nav",{className:`fixed top-0 right-0 left-0 ${n?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} shadow-sm z-50 border-b`,children:e.jsx("div",{className:"w-full px-0",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center pl-4",children:[t&&e.jsx("button",{onClick:()=>o(!d),className:`lg:hidden p-2 ${n?"text-gray-400 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mr-2`,children:d?e.jsx(mt,{className:"w-6 h-6"}):e.jsx(to,{className:"w-6 h-6"})}),e.jsxs(Ge,{to:"/merch-store",className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-8 h-8 text-[#FF1B6B]"}),e.jsx("span",{className:"text-xl font-bold text-[#FF1B6B] hidden sm:inline",children:"MerchStore"})]}),e.jsx("div",{className:"ml-4 px-3 py-1 bg-red-100 border border-red-200 rounded-full",children:e.jsx("span",{className:"text-xs font-medium text-red-600",children:"Development Mode - No Real Transactions"})})]}),e.jsxs(R.div,{className:"flex items-center gap-2 sm:gap-4 pr-4",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[e.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${n?"bg-gray-700 text-yellow-400 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"Toggle theme",children:n?e.jsx(Di,{className:"w-5 h-5"}):e.jsx(Mi,{className:"w-5 h-5"})}),t?e.jsx(e.Fragment,{children:!t.isSeller&&e.jsx(Ge,{to:"/merch-store/become-seller",className:"hidden sm:flex items-center gap-2 px-4 py-2 rounded-full border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-[#FF1B6B] hover:text-white transition-all duration-300",children:"Become a Seller"})}):e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx(Ge,{to:"/merch-store/login",className:`px-3 sm:px-4 py-2 ${n?"text-gray-300 hover:text-[#FF1B6B]":"text-[#FF1B6B] hover:text-[#D4145A]"} transition-colors text-sm sm:text-base`,children:"Login"}),e.jsx(Ge,{to:"/merch-store/signup",className:"px-3 sm:px-4 py-2 rounded-full bg-[#FF1B6B] text-white hover:bg-[#D4145A] transition-all duration-300 text-sm sm:text-base",children:"Sign Up"})]}),e.jsxs(Ge,{to:"/",className:"flex items-center gap-1 sm:gap-2 px-3 sm:px-4 py-2 rounded-full border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-[#FF1B6B] hover:text-white transition-all duration-300 group text-sm sm:text-base",children:[e.jsx(la,{className:"w-4 h-4 sm:w-5 sm:h-5 group-hover:-translate-x-1 transition-transform duration-300"}),e.jsx("span",{className:"font-medium hidden sm:inline",children:"Back to Token Factory"}),e.jsx("span",{className:"font-medium sm:hidden",children:"Back"})]})]})]})})}),e.jsx(Ze,{children:t&&d&&e.jsxs(e.Fragment,{children:[e.jsx(R.div,{initial:{opacity:0},animate:{opacity:.3},exit:{opacity:0},className:"fixed inset-0 bg-black/30 backdrop-blur-sm lg:hidden z-40",onClick:()=>o(!1)}),e.jsx(R.aside,{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] w-72 ${n?"bg-gray-800":"bg-white"} shadow-lg z-50 lg:hidden overflow-y-auto`,initial:{x:-288},animate:{x:0},exit:{x:-288},transition:{type:"spring",stiffness:100},children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:`p-6 border-b ${n?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Welcome,"}),e.jsx("p",{className:`font-medium ${n?"text-white":"text-gray-900"} text-lg`,children:t.name}),e.jsxs("div",{className:`mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs ${t.isSeller?"bg-pink-50 text-[#FF1B6B]":n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[e.jsx(da,{className:"w-4 h-4"}),e.jsx("span",{children:t.isSeller?"Seller Account":"Buyer Account"}),t.isSeller&&m?.isVerified&&e.jsx(Qt,{className:"w-4 h-4 text-[#FF1B6B]"})]})]})}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsx("ul",{className:"space-y-2",children:E.map(w=>e.jsx("li",{children:e.jsxs(En,{to:w.to,end:w.exact,onClick:()=>o(!1),className:({isActive:p})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${p?"bg-[#FF1B6B] text-white":n?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"}`,children:[e.jsx(w.icon,{className:"text-xl"}),e.jsx("span",{children:w.label}),w.count>0&&e.jsx("span",{className:`ml-auto text-xs font-medium px-2 py-1 rounded-full ${l.pathname===w.to?"bg-white text-[#FF1B6B]":"bg-[#FF1B6B] text-white"}`,children:w.count})]})},w.to))})}),e.jsx("div",{className:`p-4 border-t ${n?"border-gray-700":"border-gray-100"}`,children:e.jsxs("button",{onClick:()=>{o(!1),f()},className:`flex items-center gap-3 w-full px-4 py-3 ${n?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"} rounded-lg transition-colors`,children:[e.jsx(An,{className:"text-xl"}),e.jsx("span",{children:"Logout"})]})})]})})]})}),t&&e.jsx(R.aside,{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] w-64 ${n?"bg-gray-800":"bg-white"} shadow-lg z-50 hidden lg:block`,initial:{x:-64},animate:{x:0},transition:{type:"spring",stiffness:100},children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Welcome,"}),e.jsx("p",{className:`font-medium ${n?"text-white":"text-gray-900"}`,children:t.name}),e.jsxs("div",{className:`mt-2 inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs ${t.isSeller?"bg-pink-50 text-[#FF1B6B]":n?"bg-gray-700 text-gray-300":"bg-gray-100 text-gray-600"}`,children:[e.jsx(da,{className:"w-4 h-4"}),e.jsx("span",{children:t.isSeller?"Seller Account":"Buyer Account"}),t.isSeller&&m?.isVerified&&e.jsx(Qt,{className:"w-4 h-4 text-[#FF1B6B]"})]})]})}),e.jsx("nav",{className:"flex-1 px-4",children:e.jsx("ul",{className:"space-y-2",children:E.map(w=>e.jsx("li",{children:e.jsxs(En,{to:w.to,end:w.exact,className:({isActive:p})=>`flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${p?"bg-[#FF1B6B] text-white":n?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"}`,children:[e.jsx(w.icon,{className:"text-xl"}),e.jsx("span",{children:w.label}),w.count>0&&e.jsx("span",{className:`ml-auto text-xs font-medium px-2 py-1 rounded-full ${l.pathname===w.to?"bg-white text-[#FF1B6B]":"bg-[#FF1B6B] text-white"}`,children:w.count})]})},w.to))})}),e.jsx("div",{className:`p-4 border-t ${n?"border-gray-700":"border-gray-100"}`,children:e.jsxs("button",{onClick:f,className:`flex items-center gap-3 w-full px-4 py-3 ${n?"text-gray-300 hover:bg-gray-700 hover:text-[#FF1B6B]":"text-gray-600 hover:bg-pink-50 hover:text-[#FF1B6B]"} rounded-lg transition-colors`,children:[e.jsx(An,{className:"text-xl"}),e.jsx("span",{children:"Logout"})]})})]})}),e.jsx("main",{className:`min-h-screen pt-16 ${t?"lg:pl-64":""} ${n?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"h-full",children:e.jsx(Pi,{})})}),e.jsx("footer",{className:`${n?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} border-t py-6 ${t?"lg:pl-64":""}`,children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{className:"w-6 h-6 text-[#FF1B6B]"}),e.jsx("span",{className:`${n?"text-gray-300":"text-gray-600"} font-medium`,children:"MerchStore"})]}),e.jsx("div",{className:"flex items-center gap-6",children:e.jsxs(Ge,{to:"/merch-store/terms",className:`${n?"text-gray-300 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} transition-colors text-sm flex items-center gap-2`,children:[e.jsx(oa,{className:"w-4 h-4"}),"Terms & Conditions"]})}),e.jsxs("div",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:["© ",new Date().getFullYear()," MerchStore. All rights reserved."]})]})})]})},jg=({isOpen:a,onClose:t,onAccept:s,token:n})=>{const[r,l]=i.useState(!1),[d,o]=i.useState(!1),m=async()=>{if(r){o(!0);try{await s()}finally{o(!1),t()}}};return e.jsx(Ze,{children:a&&e.jsxs(e.Fragment,{children:[e.jsx(R.div,{initial:{opacity:0},animate:{opacity:.5},exit:{opacity:0},className:"fixed inset-0 bg-black z-50",onClick:t}),e.jsx(R.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Withdrawal Terms & Conditions"}),e.jsx("button",{onClick:t,disabled:d,className:"p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(mt,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6 space-y-6",children:d?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(it,{className:"w-12 h-12 text-[#FF1B6B]"}),e.jsx(R.div,{className:"absolute inset-0 border-2 border-[#FF1B6B] rounded-lg",animate:{scale:[1,1.2,1],opacity:[1,.5,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})]}),e.jsx("p",{className:"text-gray-900 font-medium text-center",children:"Please confirm the withdrawal request in your wallet"}),e.jsx("p",{className:"text-gray-500 text-sm text-center",children:"Waiting for wallet confirmation..."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg",children:e.jsx(_s,{className:"w-6 h-6 text-[#FF1B6B]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Order Processing"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"When an order is placed, you have 3 days to confirm shipping. The order amount will be held in escrow during this period."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg",children:e.jsx(hs,{className:"w-6 h-6 text-[#FF1B6B]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Funds Release"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"After shipping confirmation, funds will be held for 14 days to ensure successful delivery. This amount will then be added to your available balance."})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-2 bg-pink-50 rounded-lg",children:e.jsx(Ki,{className:"w-6 h-6 text-[#FF1B6B]"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Withdrawal Processing"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Your ",n," withdrawal will be processed after the 14-day holding period from the shipping confirmation date."]})]})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:c=>l(c.target.checked),className:"mt-1 h-4 w-4 text-[#FF1B6B] focus:ring-[#FF1B6B] rounded"}),e.jsx("span",{className:"text-sm text-gray-600",children:"I understand that funds from orders are released to my available balance only after: 1) Confirming shipping within 3 days of order placement 2) A 14-day holding period after shipping confirmation I also understand that withdrawal requests will be processed after these conditions are met."})]})})]})}),e.jsx("div",{className:"p-6 border-t",children:e.jsx("button",{onClick:m,disabled:!r||d,className:`w-full px-4 py-2 rounded-lg text-white font-medium transition-colors flex items-center justify-center gap-2 ${r&&!d?"bg-[#FF1B6B] hover:bg-[#D4145A]":"bg-gray-300 cursor-not-allowed"}`,children:d?e.jsxs(e.Fragment,{children:[e.jsx(R.div,{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),e.jsx("span",{children:"Waiting for Confirmation..."})]}):"Accept & Request Withdrawal"})})]})})]})})},Br={USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}},ut=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},vg=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:`p-6 max-w-7xl mx-auto space-y-8 ${a?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-64 h-8",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-96 h-5",children:e.jsx(ut,{})})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-64 h-4",children:e.jsx(ut,{})})]}),e.jsx("div",{className:"w-10 h-10 rounded-full",children:e.jsx(ut,{})})]}),e.jsxs("div",{className:"flex justify-between items-end mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-56 h-10",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-40 h-4",children:e.jsx(ut,{})})]}),e.jsx("div",{className:"w-40 h-10",children:e.jsx(ut,{})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full h-3",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-full h-3",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-full h-3",children:e.jsx(ut,{})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsx("div",{className:`p-6 rounded-lg shadow-lg ${a?"bg-gray-800":"bg-white"}`,children:e.jsx(ut,{})},t))}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(ut,{})}),e.jsx("div",{className:"w-32 h-10",children:e.jsx(ut,{})})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsx("div",{className:"h-20 rounded-lg",children:e.jsx(ut,{})},t))})]})]})},Si=({targetDate:a})=>{const[t,s]=i.useState(n());function n(){const r=a-new Date;return r<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(r/(1e3*60*60*24)),hours:Math.floor(r/(1e3*60*60)%24),minutes:Math.floor(r/1e3/60%60),seconds:Math.floor(r/1e3%60)}}return i.useEffect(()=>{const r=setInterval(()=>{s(n())},1e3);return()=>clearInterval(r)},[a]),e.jsxs("div",{className:"font-mono text-sm",children:[t.days,"d ",t.hours.toString().padStart(2,"0"),"h ",t.minutes.toString().padStart(2,"0"),"m ",t.seconds.toString().padStart(2,"0"),"s"]})},Ng=a=>a.status==="delivered"?"100%":a.status==="shipped"?"75%":a.status==="processing"?"50%":a.paymentStatus==="completed"?"25%":"0%",kg=a=>a.status==="delivered"?"bg-orange-500":a.status==="shipped"?"bg-green-500":a.status==="processing"?"bg-blue-500":a.paymentStatus==="completed"?"bg-gray-500":"bg-gray-200",Fi=2*60*60*1e3,Tg=()=>{const{user:a}=Ve(),[t,s]=i.useState(!0),[n,r]=i.useState(2.5),[l,d]=i.useState(15),{isDarkMode:o}=Se(),[m,c]=i.useState(null),[u,x]=i.useState({totalProducts:0,totalSales:0,totalCustomers:0,grossRevenue:0,netRevenue:0,balances:{USDC:0,USDT:0}}),[f,N]=i.useState([]),[v,C]=i.useState([]),[E,w]=i.useState(null),[p,y]=i.useState(!1),[g,j]=i.useState("USDC"),[T,b]=i.useState(!1),[$,L]=i.useState([]),[S,A]=i.useState(!1),[h,I]=i.useState(!1);i.useEffect(()=>{a?.uid&&(O(),U(),F())},[a]);const O=async()=>{try{const z=await De(ge(ae,"sellers",a.sellerId));if(z.exists()){const se=z.data();c({...se,isVerified:se.verificationStatus==="approved",verificationRequested:se.verificationStatus==="pending",isRejected:se.verificationStatus==="rejected",rejectedAt:se.rejectedAt?.toDate(),rejectionCooldown:se.rejectionCooldown||72,rejectionReason:se.rejectionReason})}}catch(z){console.error("Error fetching seller data:",z)}},F=async()=>{try{const z=await De(ge(ae,"settings","platform"));if(z.exists()){const se=z.data();r(se.platformFee||2.5),d(se.withdrawalMinimum||15)}}catch(z){console.error("Error fetching platform settings:",z)}},U=async()=>{try{const z=ge(ae,"sellers",a.sellerId),se=_t(z,Q=>{w(Q.data())}),ee=Te(be(ae,"products"),fe("sellerId","==",a.sellerId)),te=await Ae(ee),Y=Te(be(ae,"orders"),fe("sellerId","==",a.sellerId),Ue("createdAt","desc")),W=_t(Y,Q=>{const G=Q.docs.map(K=>({id:K.id,...K.data()})),q=new Date,Z=G.filter(K=>{if(K.paymentStatus==="completed"){if(K.status==="cancelled"||K.status==="refunded")return!1;const xe=K.createdAt.toDate(),pe=new Date(xe.getTime()+3*24*60*60*1e3);return q<=pe}return!1});L(Z);const ie=Te(be(ae,"withdrawals"),fe("sellerId","==",a.sellerId),Ue("timestamp","desc")),ne=_t(ie,K=>{const xe=K.docs.map(ue=>({id:ue.id,...ue.data(),timestamp:ue.data().timestamp?.toDate()}));C(xe);const pe={USDC:xe.filter(ue=>ue.status==="completed"&&ue.token==="USDC").reduce((ue,Fe)=>ue+(Fe.amount||0),0),USDT:xe.filter(ue=>ue.status==="completed"&&ue.token==="USDT").reduce((ue,Fe)=>ue+(Fe.amount||0),0)};let ke=0,we=0;const Me={USDC:{gross:0,net:0},USDT:{gross:0,net:0}},re=new Set;G.forEach(ue=>{if(ue.buyerId&&re.add(ue.buyerId),ue.paymentStatus==="completed"){const Fe=ue.createdAt.toDate(),oe=new Date,Ne=new Date(Fe.getTime()+3*24*60*60*1e3),Ce=ue.total||0,_e=ue.paymentMethod?.token||"USDT";if(oe>=Ne){if(!ue.shippingConfirmed&&new Date(oe.getTime()-Fi)<Ne)return;if(ue.status!=="cancelled"&&ue.status!=="refunded"){ke+=Ce;const Re=Ce*.95;we+=Re,Me[_e]||(Me[_e]={gross:0,net:0}),Me[_e].gross+=Ce,Me[_e].net+=Re}}}});const ce={USDC:parseFloat(Math.max(0,Me.USDC.net-pe.USDC-(E?.pendingRefunds?.USDC||0)).toFixed(2)),USDT:parseFloat(Math.max(0,Me.USDT.net-pe.USDT-(E?.pendingRefunds?.USDT||0)).toFixed(2))},ye={USDC:xe.filter(ue=>ue.status==="pending"&&ue.token==="USDC").reduce((ue,Fe)=>ue+(Fe.amount||0),0),USDT:xe.filter(ue=>ue.status==="pending"&&ue.token==="USDT").reduce((ue,Fe)=>ue+(Fe.amount||0),0)};ce.USDC=parseFloat(Math.max(0,ce.USDC-ye.USDC).toFixed(2)),ce.USDT=parseFloat(Math.max(0,ce.USDT-ye.USDT).toFixed(2)),x({totalProducts:te.size,totalSales:G.filter(ue=>ue.paymentStatus==="completed").length,totalCustomers:re.size,grossRevenue:ke,netRevenue:we,balances:ce,pendingRefunds:E?.pendingRefunds||{USDC:0,USDT:0}}),N(G.filter(ue=>ue.paymentStatus==="completed").slice(0,3))});return()=>{se(),W(),ne()}})}catch(z){console.error("Error fetching dashboard data:",z),M.error("Failed to load dashboard data")}finally{s(!1)}},V={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},P={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},B=[{title:"Total Products",icon:e.jsx(xd,{}),value:u.totalProducts,color:"bg-blue-500"},{title:"Total Sales",icon:e.jsx(Zr,{}),value:u.totalSales,color:"bg-green-500"},{title:"Total Customers",icon:e.jsx(er,{}),value:u.totalCustomers,color:"bg-purple-500"},{title:"Revenue",icon:e.jsx(es,{}),value:e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-lg",children:"Current Balance:"}),e.jsxs("div",{className:"text-2xl font-bold",children:["$",(u.balances.USDC+u.balances.USDT).toFixed(2)]}),e.jsx("div",{className:"text-sm opacity-75",children:"All-time Revenue:"}),e.jsxs("div",{className:"text-xl",children:["$",u.grossRevenue.toFixed(2)]}),e.jsxs("div",{className:"text-xs opacity-75",children:["Net (after 5% fee): $",u.netRevenue.toFixed(2)]})]})}),color:"bg-pink-500"}],k=()=>{if(!m?.isRejected||!m.rejectedAt)return!0;const z=m.rejectionCooldown||72,se=new Date(m.rejectedAt.getTime()+z*60*60*1e3);return Date.now()>=se},D=()=>{if(!m?.rejectedAt)return null;const z=m.rejectionCooldown||72,ee=new Date(m.rejectedAt.getTime()+z*60*60*1e3)-Date.now();if(ee<=0)return null;const te=Math.floor(ee/(60*60*1e3)),Y=Math.floor(ee%(60*60*1e3)/(60*1e3));return{hours:te,minutes:Y}},_=async()=>{if(!k()){M.error("Please wait for the cooldown period to end before requesting again");return}I(!0);try{await $e(ge(ae,"sellers",a.sellerId),{verificationRequested:!0,verificationRequestedAt:We(),verificationStatus:"pending",rejectedAt:null,rejectionReason:null}),M.success("Verification request submitted successfully!"),await O(),I(!1),A(!1),c(z=>({...z,verificationRequested:!0,verificationStatus:"pending",isRejected:!1,rejectedAt:null,rejectionReason:null}))}catch(z){console.error("Error requesting verification:",z),M.error("Failed to submit verification request"),I(!1)}},H=()=>e.jsx(me,{appear:!0,show:S,as:i.Fragment,children:e.jsxs(le,{as:"div",className:"relative z-50",onClose:()=>!h&&A(!1),static:!0,children:[e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(me.Child,{as:i.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(le.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(Qt,{})}),e.jsx(le.Title,{as:"h3",className:"text-lg font-medium leading-6 text-center text-gray-900",children:"Store Verification Process"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"The verification process duration is not fixed and depends on several factors:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 space-y-2 mb-4",children:[e.jsx("li",{children:"Number of customer reviews"}),e.jsx("li",{children:"Average store rating"}),e.jsx("li",{children:"Customer satisfaction level"}),e.jsx("li",{children:"Quality of products and service"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"We encourage you to provide excellent service to your customers and actively seek their feedback. Positive reviews and high ratings will significantly improve your chances of verification."}),m?.isRejected&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-100 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:"Previous Request Rejected"}),m.rejectionReason&&e.jsxs("p",{className:"text-sm text-red-700 mb-2",children:["Reason: ",m.rejectionReason]}),e.jsx("p",{className:"text-sm text-red-600",children:"Please address any issues mentioned above before requesting verification again."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none",onClick:()=>A(!1),children:"Cancel"}),e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-[#FF1B6B] px-4 py-2 text-sm font-medium text-white hover:bg-[#D4145A] focus:outline-none",onClick:_,children:"Request Verification"})]})]})})})})]})}),X=()=>{if(!m)return null;if(m.isVerified)return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[e.jsx(Qt,{}),e.jsx("span",{children:"Verified Store"})]});if(m.verificationStatus==="rejected"){const z=D();if(z)return e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-lg p-4 max-w-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Kt,{className:"text-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-800",children:"Verification Request Rejected"}),m.rejectionReason&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:m.rejectionReason}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["You can request again in ",z.hours,"h ",z.minutes,"m"]})]})]})})}return m.verificationStatus==="pending"?e.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-100 text-yellow-800 rounded-lg",children:e.jsx("span",{children:"Verification Pending"})}):e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#FF1B6B] text-[#FF1B6B] rounded-lg hover:bg-pink-50 transition-colors",disabled:!k(),children:[e.jsx(Qt,{}),e.jsx("span",{children:"Request Verification"})]})};return t?e.jsx(vg,{}):e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsxs(R.div,{className:`p-6 max-w-7xl mx-auto ${o?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:V,children:[e.jsx(R.div,{className:"mb-8",variants:P,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`text-3xl font-bold ${o?"text-gray-100":"text-gray-800"}`,children:["Welcome back, ",a?.displayName||"Seller","!"]}),e.jsx("p",{className:`${o?"text-gray-400":"text-gray-600"} mt-2`,children:"Here's what's happening with your store today."})]}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(X,{})})]})}),e.jsx(R.div,{className:"mb-8",variants:P,children:e.jsxs("div",{className:`${o?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o?"text-gray-100":"text-gray-900"}`,children:"Available Balance"}),e.jsx("p",{className:`text-sm ${o?"text-gray-400":"text-gray-500"} mt-1`,children:"Withdraw anytime to your wallet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-2 ${o?"bg-gray-700":"bg-gray-50"} px-3 py-1.5 rounded-lg`,children:[e.jsx("img",{src:E?.preferredNetwork==="unichain"?"/unichain-logo.png":"/polygon.png",alt:E?.preferredNetwork==="unichain"?"Unichain":"Polygon",className:"w-6 h-6 object-contain"}),e.jsxs("span",{className:`text-sm font-medium ${o?"text-gray-300":"text-gray-700"}`,children:[E?.preferredNetwork==="unichain"?"Unichain":"Polygon"," Network"]})]}),e.jsx("div",{className:"p-2 bg-[#FF1B6B] bg-opacity-10 rounded-full",children:e.jsx(Ka,{className:"text-[#FF1B6B] text-xl"})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-6",children:[e.jsxs("div",{className:`flex-grow ${o?"bg-gray-700":"bg-gray-50"} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("img",{src:Br[E?.preferredToken]?.logo,alt:E?.preferredToken,className:"w-6 h-6"}),e.jsxs("div",{className:"text-2xl font-bold text-[#FF1B6B]",children:[u.balances[E?.preferredToken]?.toFixed(2)," ",E?.preferredToken]})]}),e.jsxs("div",{className:`text-sm ${o?"text-gray-400":"text-gray-500"}`,children:["≈ $",u.balances[E?.preferredToken]?.toFixed(2)]}),e.jsx("div",{className:`text-xs ${o?"text-gray-400":"text-gray-500"} mt-1`,children:"Available to withdraw"}),e.jsx("div",{className:`w-full ${o?"bg-gray-600":"bg-gray-200"} rounded-full h-2 mt-2`,children:e.jsx("div",{className:"bg-[#FF1B6B] h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(100,u.balances[E?.preferredToken]/15*100)}%`}})}),e.jsxs("div",{className:`text-xs ${o?"text-gray-400":"text-gray-500"} mt-1`,children:["Min. 15 ",E?.preferredToken," Required"]}),e.jsx("button",{onClick:()=>{!u.balances[E?.preferredToken]||u.balances[E?.preferredToken]<l||(j(E?.preferredToken),y(!0))},disabled:!u.balances[E?.preferredToken]||u.balances[E?.preferredToken]<l,className:`w-full mt-4 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${!u.balances[E?.preferredToken]||u.balances[E?.preferredToken]<l?o?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-[#FF1B6B] text-white hover:bg-[#D4145A]"}`,children:!u.balances[E?.preferredToken]||u.balances[E?.preferredToken]<l?`Min. ${l} ${E?.preferredToken} Required`:`Request ${E?.preferredToken} Withdrawal`})]}),e.jsx("div",{className:`lg:w-1/3 ${o?"bg-gray-700":"bg-gray-50"} rounded-lg p-4`,children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ka,{className:"text-[#FF1B6B] w-5 h-5"}),e.jsx("p",{className:`text-sm ${o?"text-gray-300":"text-gray-600"}`,children:"Gas fees paid from your wallet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{className:"text-[#FF1B6B] w-5 h-5"}),e.jsx("p",{className:`text-sm ${o?"text-gray-300":"text-gray-600"}`,children:"5% platform fee per sale"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ca,{className:"text-[#FF1B6B] w-5 h-5"}),e.jsxs("p",{className:`text-sm ${o?"text-gray-300":"text-gray-600"}`,children:["Min. withdrawal: 15 ",E?.preferredToken]})]})]})})]})]})}),e.jsx(R.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",variants:V,children:B.map((z,se)=>e.jsx(R.div,{className:`p-6 rounded-lg shadow-lg ${z.color} text-white transform hover:scale-105 transition-transform duration-200`,variants:P,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold mb-2",children:z.title}),e.jsx("h3",{className:"text-3xl font-bold",children:z.value})]}),e.jsx("div",{className:"text-3xl opacity-80",children:z.icon})]})},z.title))}),e.jsxs(R.div,{className:`${o?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6 mb-8`,variants:P,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o?"text-gray-100":"text-gray-900"}`,children:"Incoming Payments"}),e.jsx("p",{className:`text-sm ${o?"text-gray-400":"text-gray-500"}`,children:"Payments pending 3-day shipping confirmation"})]}),e.jsx("button",{onClick:()=>b(!T),className:`p-2 ${o?"hover:bg-gray-700":"hover:bg-gray-100"} rounded-full transition-colors`,children:e.jsx("svg",{className:`w-6 h-6 ${o?"text-gray-400":"text-gray-500"} transform transition-transform ${T?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:`mb-4 p-4 ${o?"bg-pink-900/20 border-pink-800":"bg-[#FF1B6B] bg-opacity-10 border-[#FF1B6B]"} border rounded-lg flex items-start space-x-3`,children:[e.jsx("svg",{className:"w-5 h-5 text-[#FF1B6B] mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[#FF1B6B] mb-1",children:"⚠️ Shipping Time Requirement"}),e.jsxs("div",{className:`space-y-2 text-sm ${o?"text-gray-300":"text-gray-700"}`,children:[e.jsx("p",{children:"All orders must be shipped within 3 days of payment. Orders not shipped within this timeframe may be cancelled and refunded to protect buyers."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Buffer Period:"})," For orders awaiting shipping, there is a 2-hour buffer period after the 3-day window before funds become available. This buffer ensures the auto-cancellation system can protect buyers from unshipped orders."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipped Orders:"})," Orders marked as shipped (with tracking number) will not be subject to the buffer period, but funds will still be held for the full 3-day window."]}),e.jsxs("p",{className:`${o?"text-red-400":"text-red-600"}`,children:[e.jsx("strong",{children:"Warning:"})," Falsely marking orders as shipped without actual shipping confirmation may result in penalties if buyers report issues. Please only confirm shipping when you have a valid tracking number."]})]})]})]}),T&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:`min-w-full divide-y ${o?"divide-gray-700":"divide-gray-200"}`,children:[e.jsx("thead",{className:`${o?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Order ID"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Date"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Amount"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Token"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Available In"})]})}),e.jsx("tbody",{className:`${o?"divide-y divide-gray-700":"bg-white divide-y divide-gray-200"}`,children:$.map(z=>{const se=z.createdAt.toDate(),ee=new Date(se.getTime()+3*24*60*60*1e3),te=new Date,Y=Math.max(0,Math.ceil((ee-Date.now())/(60*60*1e3)));return e.jsxs("tr",{className:o?"bg-gray-800":"bg-white",children:[e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${o?"text-gray-300":"text-gray-900"}`,children:["#",z.id.slice(-6)]}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${o?"text-gray-400":"text-gray-500"}`,children:se.toLocaleString()}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${o?"text-gray-300":"text-gray-900"}`,children:["$",z.total.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:z.paymentMethod.token==="USDC"?Br.USDC.logo:Br.USDT.logo,alt:z.paymentMethod.token,className:"w-5 h-5 mr-2"}),e.jsx("span",{className:`text-sm ${o?"text-gray-300":"text-gray-900"}`,children:z.paymentMethod.token})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:z.status==="cancelled"?e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o?"bg-red-900/50 text-red-300":"bg-red-100 text-red-800"}`,children:"Canceled"}):z.shippingConfirmed?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`text-xs font-medium ${o?"text-green-400":"text-green-600"}`,children:"Shipping Confirmed"}),e.jsxs("span",{className:`text-xs ${o?"text-gray-400":"text-gray-500"}`,children:[z.carrier,": ",z.trackingNumber]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:o?"text-gray-300":"",children:z.status==="delivered"?"Delivered":"Processing"}),e.jsx("div",{className:`relative w-full h-2 ${o?"bg-gray-700":"bg-gray-100"} rounded-full overflow-hidden`,children:e.jsx("div",{className:`absolute left-0 top-0 h-full transition-all duration-300 ${kg(z)}`,style:{width:Ng(z)}})})]})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o?"bg-yellow-900/50 text-yellow-300":"bg-yellow-100 text-yellow-800"}`,children:"Awaiting Shipping"})}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${o?"text-gray-400":"text-gray-500"}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${o?"text-gray-400":"text-gray-500"}`,children:"3-day period:"}),e.jsx(Si,{targetDate:ee})]}),te>=ee&&!z.shippingConfirmed&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${o?"text-yellow-400":"text-yellow-600"}`,children:"Buffer period:"}),e.jsx(Si,{targetDate:new Date(ee.getTime()+Fi)})]}),e.jsx("div",{className:`w-full ${o?"bg-gray-700":"bg-gray-200"} rounded-full h-1.5`,children:e.jsx("div",{className:"bg-[#FF1B6B] h-1.5 rounded-full transition-all duration-500",style:{width:z.shippingConfirmed?`${Math.min(100,(72-Y)/72*100)}%`:`${Math.min(100,(72-Y-2)/72*100)}%`}})}),z.shippingConfirmed?e.jsx("span",{className:`text-xs ${o?"text-green-400":"text-green-600"}`,children:"No buffer (shipping confirmed)"}):te>=ee?e.jsx("span",{className:`text-xs ${o?"text-yellow-400":"text-yellow-600"}`,children:"In 2-hour buffer period"}):e.jsx("span",{className:`text-xs ${o?"text-gray-400":"text-gray-500"}`,children:"Awaiting 3-day period"})]})})]},z.id)})})]}),$.length===0&&e.jsx("div",{className:`text-center py-8 ${o?"text-gray-400":"text-gray-500"}`,children:"No incoming payments at the moment"})]})]}),e.jsxs(R.div,{className:`${o?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6 mb-8`,variants:P,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-xl font-semibold ${o?"text-gray-100":"text-gray-800"}`,children:"Recent Activity"}),e.jsx(Ge,{to:"/merch-store/orders-received",className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:"View All Orders"})]}),e.jsx(R.div,{className:"space-y-4",variants:V,children:f.length===0?e.jsx(R.div,{variants:P,className:`text-center py-8 ${o?"text-gray-400":"text-gray-500"}`,children:"No orders yet"}):f.map(z=>e.jsxs(R.div,{className:`flex items-center justify-between p-4 ${o?"bg-gray-700":"bg-gray-50"} rounded-lg`,variants:P,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-[#FF1B6B] bg-opacity-10 rounded-full",children:e.jsx(Ca,{className:"text-[#FF1B6B] text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${o?"text-gray-200":"text-gray-800"}`,children:"New order received"}),e.jsx("p",{className:`text-sm ${o?"text-gray-400":"text-gray-500"}`,children:new Date(z.createdAt?.toDate()).toLocaleString()})]})]}),e.jsxs("span",{className:"text-[#FF1B6B] font-medium",children:["$",z.total.toFixed(2)]})]},z.id))})]}),e.jsxs(R.div,{className:`${o?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6 mb-8`,variants:P,children:[e.jsx("h2",{className:`text-xl font-semibold ${o?"text-gray-100":"text-gray-800"} mb-6`,children:"Withdrawal History"}),v.length>0?e.jsx("div",{className:"w-full",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:`${o?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Date"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Amount"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider w-[300px]`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${o?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Transaction"})]})}),e.jsx("tbody",{className:`${o?"divide-gray-700":"bg-white divide-y divide-gray-200"}`,children:v.map(z=>e.jsxs("tr",{className:o?"bg-gray-800":"bg-white",children:[e.jsx("td",{className:`px-6 py-4 text-sm ${o?"text-gray-300":"text-gray-900"}`,children:z.timestamp?new Date(z.timestamp).toLocaleString():"N/A"}),e.jsxs("td",{className:`px-6 py-4 text-sm ${o?"text-gray-300":"text-gray-900"}`,children:["$",z.amount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z.completed?o?"bg-green-900 text-green-200":"bg-green-100 text-green-800":o?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:z.completed?"Completed":"Processing"}),z.isRefund&&e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${o?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`,children:"Refund"})]}),e.jsx("td",{className:`px-6 py-4 text-sm ${o?"text-gray-300":"text-gray-900"}`,children:z.transactionHash?e.jsx("a",{href:`${z.network==="unichain"?"https://unichain-sepolia.blockscout.com/tx/":"https://polygonscan.com/tx/"}${z.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#FF1B6B] hover:underline",children:"View Transaction"}):"Pending"})]},z.id))})]})}):e.jsx("div",{className:`text-center py-8 ${o?"text-gray-400":"text-gray-500"}`,children:"No withdrawals yet"})]}),e.jsx(jg,{isOpen:p,onClose:()=>y(!1),onAccept:async()=>{try{const z=await ss();if(!z){M.error("Please install MetaMask to withdraw funds");return}const se=await z.request({method:"eth_requestAccounts"});if(se.length===0){M.error("Please connect your wallet");return}if(se[0].toLowerCase()!==E.walletAddress.toLowerCase()){M.error("Please use the wallet address registered in your seller settings");return}const ee=g==="USDC"?u.balances.USDC:u.balances.USDT;if(ee<l){M.error(`Minimum withdrawal amount is ${l} ${g}`);return}const te=E.preferredNetwork==="unichain"?1301:137;if(window.ethereum.networkVersion!==te.toString())try{te===1301?await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]})}catch(ne){if(ne.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]})}catch{M.error("Failed to add network to MetaMask");return}else{M.error(`Please switch to ${E.preferredNetwork} network in MetaMask`);return}}const W=await new he(window.ethereum).getSigner(),Q=Bs(W,te.toString()),G=g==="USDC"?te===1301?"0x31d0220469e10c4E71834a79b1f276d740d3768F":"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359":te===1301?"0x70262e266E50603AcFc5D58997eF73e5a8775844":"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",q=d0(ee),Z=await Q.requestWithdrawal(G,q),ie=M.loading("Processing withdrawal request...");await Z.wait(),await et(be(ae,"withdrawals"),{sellerId:a.sellerId,amount:ee,token:g,fee:0,netAmount:ee,status:"pending",walletAddress:se[0],network:E.preferredNetwork,timestamp:We(),requestedAt:Date.now(),processingDays:3,transactionHash:Z.hash}),M.dismiss(ie),M.success("Withdrawal request submitted successfully"),U()}catch(z){console.error("Withdrawal error:",z),M.error(z.message||"Failed to process withdrawal")}},token:g}),u.pendingRefunds&&(u.pendingRefunds.USDC>0||u.pendingRefunds.USDT>0)&&e.jsx("div",{className:`${o?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-100"} border rounded-lg p-4 mt-4`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"text-yellow-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${o?"text-yellow-400":"text-yellow-800"}`,children:"Pending Refunds"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[u.pendingRefunds.USDC>0&&e.jsxs("p",{className:`text-sm ${o?"text-yellow-300":"text-yellow-700"}`,children:["USDC: $",u.pendingRefunds.USDC.toFixed(2)]}),u.pendingRefunds.USDT>0&&e.jsxs("p",{className:`text-sm ${o?"text-yellow-300":"text-yellow-700"}`,children:["USDT: $",u.pendingRefunds.USDT.toFixed(2)]})]}),e.jsx("p",{className:`text-xs ${o?"text-yellow-400/80":"text-yellow-600"} mt-2`,children:"These amounts are reserved for potential refunds and have been deducted from your available balance."})]})]})})]})]})},Cg=`
  :root {
    color-scheme: light;
  }
  
  .dark input[type="datetime-local"] {
    color-scheme: dark;
    background-color: #1a1b1f !important;
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: invert(1) !important;
    opacity: 0.7;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit {
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #fff !important;
  }

  input[type="datetime-local"] {
    color-scheme: light !important;
    background-color: white !important;
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: none !important;
    color: #1F2937 !important;
    opacity: 0.7;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  input[type="datetime-local"]::-webkit-datetime-edit {
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #1F2937 !important;
  }

  /* Style the checkbox */
  input[type="checkbox"] {
    accent-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:checked {
    background-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:focus {
    box-shadow: 0 0 0 2px rgba(255, 27, 107, 0.3) !important;
  }
`,vt=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Sg=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("div",{className:"w-48 h-8 mb-6",children:e.jsx(vt,{})}),e.jsxs("div",{className:`space-y-6 ${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-64 h-5",children:e.jsx(vt,{})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[1,2,3].map(t=>e.jsx("div",{className:"aspect-square",children:e.jsx(vt,{})},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(vt,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(vt,{})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-5",children:e.jsx(vt,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(vt,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-16 h-5",children:e.jsx(vt,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(vt,{})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(vt,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(vt,{})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-28 h-5",children:e.jsx(vt,{})}),e.jsx("div",{className:"w-full h-32",children:e.jsx(vt,{})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("div",{className:"w-32 h-10",children:e.jsx(vt,{})})})]})]})]})},Ei=["US 6 / EU 39","US 6.5 / EU 39.5","US 7 / EU 40","US 7.5 / EU 40.5","US 8 / EU 41","US 8.5 / EU 41.5","US 9 / EU 42","US 9.5 / EU 42.5","US 10 / EU 43","US 10.5 / EU 43.5","US 11 / EU 44","US 11.5 / EU 44.5","US 12 / EU 45","US 13 / EU 46"],Fg=()=>{const{user:a}=Ve(),t=rt(),{isDarkMode:s}=Se(),[n,r]=i.useState(!0),[l,d]=i.useState(!1);i.useState(!1);const[o,m]=i.useState([]),[c,u]=i.useState([]),[x,f]=i.useState({name:"",description:"",price:"",quantity:"",category:"",subCategory:"",images:[],network:"polygon",acceptedToken:"USDC",tokenLogo:"/logos/usdc.png",shippingFee:0,shippingInfo:"",hasVariants:!1,selectedSizes:[],selectedColors:[],colorQuantities:{},hasDiscount:!1,discountPercent:0}),N=["XS","S","M","L","XL","2XL","3XL"],v=[{name:"Black",value:"#000000"},{name:"White",value:"#FFFFFF"},{name:"Gray",value:"#808080"},{name:"Red",value:"#FF0000"},{name:"Blue",value:"#0000FF"},{name:"Green",value:"#008000"},{name:"Yellow",value:"#FFFF00"},{name:"Purple",value:"#800080"},{name:"Pink",value:"#FFC0CB"},{name:"Brown",value:"#A52A2A"}],C=[{id:"polygon",name:"Polygon",logo:"/polygon.png"},{id:"unichain",name:"Unichain Testnet",logo:"/unichain-logo.png"}],E={"Men's Wear":["T-Shirts","Shirts","Pants","Hoodies","Jackets","Suits"],"Women's Wear":["Dresses","Tops","Skirts","Pants","Blouses","Jackets"],Footwear:["Sneakers","Formal Shoes","Boots","Sandals","Slippers"]},w={"Fashion Accessories":["Bags","Belts","Hats","Scarves","Jewelry"],"Tech Accessories":["Phone Cases","Laptop Bags","Headphone Cases","Tablet Covers","Chargers","Headphones","Speakers","MP3 Players","Sound Systems","Audio Cables"]},[p,y]=i.useState([]),[g,j]=i.useState([]),[T,b]=i.useState({}),$=()=>x.category==="clothing"&&x.subCategory&&x.subCategory.split(" - ")[0]==="Footwear";if(i.useEffect(()=>{$()?(y(Ei),j([]),b({})):(y(["XS","S","M","L","XL","XXL"]),j([]),b({}))},[x.category,x.subCategory]),i.useEffect(()=>{(async()=>{try{if(!a?.sellerId){r(!1);return}const k=await De(ge(ae,"sellers",a.sellerId));if(k.exists()){const D=k.data();if(!D.preferredNetwork||!D.preferredToken){r(!1);return}f(_=>({..._,network:D.preferredNetwork,acceptedToken:D.preferredToken,tokenLogo:`/logos/${D.preferredToken.toLowerCase()}.png`,shippingFee:D.shippingFee||0}))}r(!1)}catch(k){console.error("Error loading seller preferences:",k),r(!1)}})()},[a?.sellerId]),n)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#FF1B6B]"})});if(!x.network||!x.acceptedToken)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Network and Payment Preferences Required"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsx("p",{children:"Before adding products, you need to set your preferred network and payment token in your store settings."})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>t("/merch/settings"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B]",children:"Go to Settings"})})]})]})})});const L=B=>{const{name:k,value:D}=B.target;f(k==="category"?_=>({..._,category:D,subCategory:"",hasVariants:!1,selectedSizes:[],selectedColors:[]}):_=>({..._,[k]:D}))},S=B=>{const k=Array.from(B.target.files);if(o.length+k.length>5){M.error("Maximum 5 images allowed");return}if(k.filter(H=>H.size>2*1024*1024).length>0){M.error("Each image must be less than 2MB");return}const _=k.map(H=>URL.createObjectURL(H));m(H=>[...H,...k]),u(H=>[...H,..._])},A=B=>{URL.revokeObjectURL(c[B]),m(k=>k.filter((D,_)=>_!==B)),u(k=>k.filter((D,_)=>_!==B))},h=async B=>{const k=B.map(async D=>{const _=ca(ma,`products/${a.uid}/${Date.now()}-${D.name}`),H=await ur(_,D);return xr(H.ref)});return Promise.all(k)},I=async B=>{B.preventDefault(),d(!0);try{if(!a?.sellerId){M.error("You must be a registered seller to add products"),d(!1);return}const k=await De(ge(ae,"sellers",a.sellerId));if(!k.exists()){M.error("Seller information not found"),d(!1);return}const D=k.data();if(!x.name||!x.description||!x.price){M.error("Please fill in all required fields"),d(!1);return}if(o.length===0){M.error("Please add at least one product image"),d(!1);return}const _=await h(o);if($()&&x.hasVariants&&x.selectedSizes.length===0){M.error("Please select at least one shoe size"),d(!1);return}if(x.hasVariants&&Object.values(x.colorQuantities).reduce((te,Y)=>te+Number(Y),0)===0){M.error("Please specify quantities for all selected colors"),d(!1);return}let H=null;x.hasDiscount&&x.discountEndsAt&&(H=new Date(x.discountEndsAt).toISOString());const X=x.hasDiscount?Number(x.price)*(1-Number(x.discountPercent)/100):Number(x.price),z={name:x.name,description:x.description,price:Number(x.price),category:x.category,subCategory:x.subCategory,images:_,network:x.network,acceptedToken:x.acceptedToken,tokenLogo:x.tokenLogo,shippingFee:Number(x.shippingFee),shippingInfo:x.shippingInfo,hasVariants:x.hasVariants,sizes:x.hasVariants?x.selectedSizes:[],colors:x.hasVariants?x.selectedColors:[],colorQuantities:x.hasVariants?x.colorQuantities:{},quantity:x.hasVariants?Object.values(x.colorQuantities).reduce((ee,te)=>ee+Number(te),0):Number(x.quantity),hasDiscount:x.hasDiscount,discountPercent:x.hasDiscount?Number(x.discountPercent):0,discountEndsAt:H,discountedPrice:X,status:"active",createdAt:We(),updatedAt:We(),sellerId:a.sellerId,sellerName:D.storeName||"Anonymous",soldCount:0};Object.keys(z).forEach(ee=>{(z[ee]===void 0||z[ee]===""||z[ee]===null)&&delete z[ee]});const se=await et(be(ae,"products"),z);M.success("Product added successfully"),t(`/merch-store/product/${se.id}`)}catch(k){console.error("Error adding product:",k),M.error("Failed to add product")}finally{d(!1)}},O=B=>{f(k=>({...k,selectedSizes:k.selectedSizes.includes(B)?k.selectedSizes.filter(D=>D!==B):[...k.selectedSizes,B]}))},F=B=>{f(k=>({...k,selectedColors:k.selectedColors.includes(B.name)?k.selectedColors.filter(D=>D!==B.name):[...k.selectedColors,B.name]}))},U=(B,k)=>{f(D=>({...D,subCategory:`${B} - ${k}`}))},V={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},P={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return n?e.jsx(Sg,{}):e.jsxs(R.div,{className:`max-w-4xl mx-auto p-6 ${s?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:V,children:[e.jsx("style",{children:Cg}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm p-6`,children:[e.jsxs(R.div,{variants:P,children:[e.jsx("h1",{className:`text-2xl font-bold ${s?"text-gray-100":"text-gray-800"} mb-2`,children:"Add New Product"}),e.jsx("p",{className:`${s?"text-gray-400":"text-gray-500"} text-sm mb-6`,children:"Fill in the details for your new product listing"})]}),e.jsxs("form",{onSubmit:I,className:"space-y-8",children:[e.jsxs(R.div,{variants:P,className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-4`,children:"Product Images (Max 5 images, 2MB each)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[c.map((B,k)=>e.jsxs(R.div,{className:"relative aspect-square rounded-lg overflow-hidden group bg-white",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2},children:[e.jsx("img",{src:B,alt:`Preview ${k+1}`,className:"w-full h-full object-cover"}),e.jsx(R.button,{type:"button",className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>A(k),children:e.jsx(Ls,{size:16})})]},B)),c.length<5&&e.jsxs(R.label,{className:`aspect-square rounded-lg border-2 border-dashed ${s?"border-gray-600 hover:border-[#FF1B6B]":"border-gray-300 hover:border-[#FF1B6B]"} flex flex-col items-center justify-center cursor-pointer transition-colors ${s?"bg-gray-800":"bg-white"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(en,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} mt-2`,children:"Add Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"hidden",multiple:!0})]})]})]}),e.jsxs(R.div,{variants:P,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-1`,children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:x.name,onChange:L,required:!0,className:`w-full px-4 py-2 border ${s?"border-gray-600 bg-gray-700 text-white focus:border-[#FF1B6B]":"border-gray-300 bg-white text-gray-900 focus:border-[#FF1B6B]"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors`,placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-1`,children:"Category *"}),e.jsxs("select",{name:"category",value:x.category,onChange:L,required:!0,className:`w-full px-4 py-2 border ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors appearance-none`,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"clothing",children:"Clothing"}),e.jsx("option",{value:"accessories",children:"Accessories"}),e.jsx("option",{value:"electronics",children:"Electronics"}),e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"collectibles",children:"Collectibles"})]})]})]}),(x.category==="clothing"||x.category==="accessories")&&e.jsxs(R.div,{variants:P,className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-4`,children:"Product Type *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(x.category==="clothing"?E:w).map(([B,k])=>e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${s?"text-gray-100":"text-gray-900"} mb-3`,children:B}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:k.map(D=>e.jsx("button",{type:"button",onClick:()=>U(B,D),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors text-left ${x.subCategory===`${B} - ${D}`?"bg-[#FF1B6B] text-white":s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:D},D))})]},B))}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${s?"text-gray-100":"text-gray-900"} mb-3`,children:"Selected Category"}),x.subCategory?e.jsxs("div",{className:`${s?"bg-pink-900/20":"bg-pink-50"} border ${s?"border-pink-900/20":"border-pink-100"} rounded-lg p-4`,children:[e.jsxs("p",{className:s?"text-gray-200":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Main Category:"})," ",x.subCategory.split(" - ")[0]]}),e.jsxs("p",{className:`${s?"text-gray-200":"text-gray-700"} mt-2`,children:[e.jsx("span",{className:"font-medium",children:"Sub Category:"})," ",x.subCategory.split(" - ")[1]]})]}):e.jsx("div",{className:`${s?"bg-gray-700/50 border-gray-600 text-gray-400":"bg-gray-50 border-gray-100 text-gray-500"} border rounded-lg p-4`,children:"Please select a category from the left"})]})]})]}),(x.category==="clothing"||x.category==="accessories")&&e.jsxs("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"hasVariants",name:"hasVariants",checked:x.hasVariants,onChange:B=>{f(k=>({...k,hasVariants:B.target.checked,sizes:B.target.checked?k.selectedSizes:[],colors:B.target.checked?k.selectedColors:[]}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasVariants",className:`ml-2 text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"This product has size and color variants"})]}),x.hasVariants&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:$()?Ei.map(B=>e.jsx("button",{type:"button",onClick:()=>O(B),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${x.selectedSizes.includes(B)?"bg-[#FF1B6B] text-white":s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:B},B)):N.map(B=>e.jsx("button",{type:"button",onClick:()=>O(B),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${x.selectedSizes.includes(B)?"bg-[#FF1B6B] text-white":s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:B},B))})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Colors & Quantities"}),e.jsx("div",{className:"space-y-4",children:v.map(B=>{const k=x.selectedColors.includes(B.name);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>F(B),className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${k?"bg-[#FF1B6B] text-white":s?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{className:"h-4 w-4 rounded-full border border-gray-300 shadow-inner",style:{backgroundColor:B.value}}),e.jsx("span",{children:B.name})]}),k&&e.jsx("div",{className:"flex-1 max-w-[150px]",children:e.jsx("input",{type:"number",min:"0",value:x.colorQuantities[B.name]||"",onChange:D=>{const _=Math.max(0,parseInt(D.target.value)||0);f(H=>({...H,colorQuantities:{...H.colorQuantities,[B.name]:_}}))},className:`w-full px-3 py-1.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors text-sm ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Quantity"})})]},B.name)})}),x.selectedColors.length>0&&e.jsx("div",{className:`mt-4 pt-4 border-t ${s?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:s?"text-gray-400":"text-gray-600",children:"Total Quantity:"}),e.jsx("span",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:Object.values(x.colorQuantities).reduce((B,k)=>B+k,0)})]})})]})]})]}),e.jsxs(R.div,{variants:P,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-3`,children:"Network & Price"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-3",children:C.filter(B=>B.id===x.network).map(B=>e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-[#FF1B6B] ${s?"bg-pink-900/20":"bg-pink-50"} flex-1 justify-center`,children:[e.jsx("img",{src:B.logo,alt:B.name,className:"w-5 h-5"}),e.jsx("span",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:B.name})]},B.id))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"price",value:x.price,onChange:L,required:!0,min:"0",step:"0.01",className:`w-full pl-4 pr-24 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"0.00"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-20 border-l ${s?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:x.acceptedToken})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hasDiscount",checked:x.hasDiscount,onChange:B=>{f(k=>({...k,hasDiscount:B.target.checked,discountPercent:B.target.checked?k.discountPercent:0}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasDiscount",className:`text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Apply Discount"})]}),x.hasDiscount&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"discountPercent",value:x.discountPercent,onChange:B=>{const k=Math.min(Math.max(0,Number(B.target.value)),99);f(D=>({...D,discountPercent:k,discountedPrice:D.price*(1-k/100)}))},min:"0",max:"99",className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter discount percentage"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-12 border-l ${s?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:"%"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-2`,children:"Discount Ends At"}),e.jsx("input",{type:"datetime-local",name:"discountEndsAt",value:x.discountEndsAt?new Date(x.discountEndsAt).toISOString().substring(0,16):"",onChange:B=>{if(new Date(B.target.value)<=new Date){M.error("Please select a future date and time");return}f(_=>({..._,discountEndsAt:B.target.value}))},min:new Date(new Date().getTime()+6e4).toISOString().slice(0,16),className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`})]}),x.discountPercent>0&&x.price>0&&e.jsxs("div",{className:`${s?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} border rounded-lg p-3`,children:[e.jsxs("p",{className:s?"text-gray-300":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Original Price:"})," ",x.price," ",x.acceptedToken]}),e.jsxs("p",{className:"text-[#FF1B6B] mt-1",children:[e.jsx("span",{className:"font-medium",children:"Discounted Price:"})," ",(x.price*(1-x.discountPercent/100)).toFixed(2)," ",x.acceptedToken]}),e.jsxs("p",{className:`${s?"text-gray-400":"text-gray-500"} mt-1`,children:[e.jsx("span",{className:"font-medium",children:"Savings:"})," ",(x.price*(x.discountPercent/100)).toFixed(2)," ",x.acceptedToken]})]})]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 ${s?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} rounded-lg border mt-2`,children:[e.jsx("img",{src:`/${x.acceptedToken.toLowerCase()}.png`,alt:x.acceptedToken,className:"w-5 h-5 object-contain"}),e.jsxs("p",{className:s?"text-gray-300":"text-gray-700",children:["Buyers will pay in ",e.jsx("span",{className:"font-medium",children:x.acceptedToken})," on ",e.jsx("span",{className:"font-medium",children:C.find(B=>B.id===x.network)?.name||"selected"})]})]})]})]}),e.jsxs("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-3`,children:"Quantity Available"}),e.jsx("input",{type:"number",name:"quantity",value:x.quantity,onChange:L,required:!0,min:"1",className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter available quantity"})]})]}),e.jsxs(R.div,{variants:P,className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-3`,children:"Description *"}),e.jsx("textarea",{name:"description",value:x.description,onChange:L,required:!0,rows:4,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Describe your product..."})]}),e.jsxs(R.div,{variants:P,className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${s?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Fee (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`absolute left-3 top-1/2 -translate-y-1/2 ${s?"text-gray-400":"text-gray-500"}`,children:"$"}),e.jsx("input",{type:"number",name:"shippingFee",min:"0",step:"0.01",value:x.shippingFee,disabled:!0,className:`w-full pl-8 pr-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${s?"border-gray-600 bg-gray-700/50 text-gray-400":"border-gray-300 bg-gray-50 text-gray-500"}`,placeholder:"0.00"})]}),e.jsx("p",{className:`mt-1 text-sm ${s?"text-gray-400":"text-gray-500"}`,children:"Shipping fee is set in your store settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Information"}),e.jsx("input",{type:"text",name:"shippingInfo",value:x.shippingInfo,onChange:L,className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${s?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"e.g., Worldwide shipping available"})]})]})]}),e.jsx(R.div,{variants:P,className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:l,className:`px-8 py-3 rounded-lg font-medium text-white ${l?"bg-gray-400 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"} transition-colors flex items-center gap-2`,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Adding Product..."})]}):"Add Product"})})]})]})]})},Ai={USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}},Ks=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Eg=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"max-w-5xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-32 h-8",children:e.jsx(Ks,{})}),e.jsx("div",{className:"w-40 h-10",children:e.jsx(Ks,{})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(t=>e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm overflow-hidden`,children:[e.jsx("div",{className:"aspect-square",children:e.jsx(Ks,{})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-5",children:e.jsx(Ks,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(Ks,{})}),e.jsx("div",{className:"w-1/3 h-4",children:e.jsx(Ks,{})})]})]},t))})]})},Ag=({images:a})=>{const[t,s]=i.useState(0);return i.useEffect(()=>{if(a.length<=1)return;const n=setInterval(()=>{s(r=>(r+1)%a.length)},3e3);return()=>clearInterval(n)},[a]),e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[e.jsx(Ze,{initial:!1,children:e.jsx(R.img,{src:a[t],alt:"Product",className:"absolute w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}},t)}),a.length>1&&e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:a.map((n,r)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${r===t?"bg-white":"bg-white/50"}`},r))})]})},Ig=({product:a,onConfirm:t,onCancel:s})=>{const{isDarkMode:n}=Se();return e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(R.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:`${n?"bg-gray-800":"bg-white"} rounded-lg p-6 max-w-md w-full`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${n?"text-gray-100":"text-gray-900"}`,children:"Delete Product"}),e.jsx("button",{onClick:s,className:`${n?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-500"}`,children:e.jsx(mt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden",children:e.jsx("img",{src:a.images[0],alt:a.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${n?"text-gray-100":"text-gray-900"}`,children:a.name}),e.jsxs("p",{className:`text-sm ${n?"text-gray-400":"text-gray-500"}`,children:["Price: $",a.price]})]})]}),e.jsx("p",{className:`${n?"text-gray-300":"text-gray-600"}`,children:"Are you sure you want to delete this product? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:s,className:`px-4 py-2 ${n?"text-gray-300 bg-gray-700 hover:bg-gray-600":"text-gray-700 bg-gray-100 hover:bg-gray-200"} rounded-lg transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:t,className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:"Delete Product"})]})]})})},Bg=()=>{const a=rt(),{user:t}=Ve(),{isDarkMode:s}=Se(),[n,r]=i.useState([]),[l,d]=i.useState(!0),[o,m]=i.useState(null),[c,u]=i.useState(null);i.useEffect(()=>{t?.sellerId&&Promise.all([f(),x()])},[t]);const x=async()=>{try{const w=await De(ge(ae,"sellers",t.sellerId));w.exists()&&u(w.data())}catch(w){console.error("Error fetching seller preferences:",w)}},f=async()=>{try{const w=Te(be(ae,"products"),fe("sellerId","==",t.sellerId)),y=(await Ae(w)).docs.map(g=>{const j=g.data();return!j.acceptedToken&&c?.preferredToken&&(j.acceptedToken=c.preferredToken,j.tokenLogo=Ai[c.preferredToken].logo),{id:g.id,...j}});r(y)}catch(w){console.error("Error fetching products:",w),M.error("Failed to load products")}finally{d(!1)}},N=async w=>{m(w)},v=async()=>{try{await Us(ge(ae,"products",o.id));const w=o.images.map(async p=>{const y=ca(ma,p);return po(y)});await Promise.all(w),r(p=>p.filter(y=>y.id!==o.id)),M.success("Product deleted successfully")}catch(w){console.error("Error deleting product:",w),M.error("Failed to delete product")}finally{m(null)}},C={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},E={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return l?e.jsx(Eg,{}):e.jsxs(e.Fragment,{children:[e.jsxs(R.div,{className:`max-w-5xl mx-auto p-4 ${s?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:C,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(R.h1,{className:`text-xl font-bold ${s?"text-gray-100":"text-gray-800"}`,variants:E,children:"My Products"}),e.jsx(R.div,{variants:E,children:e.jsxs(Ge,{to:"/merch-store/add-product",className:"flex items-center gap-2 px-3 py-1.5 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:[e.jsx(cr,{className:"text-lg"}),"Add New Product"]})})]}),n.length===0?e.jsxs(R.div,{className:`text-center py-8 ${s?"text-gray-400":"text-gray-500"}`,variants:E,children:[e.jsx("p",{className:"mb-4",children:"You haven't added any products yet."}),e.jsx(Ge,{to:"/merch-store/add-product",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Add your first product"})]}):e.jsx(R.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",variants:C,children:n.map(w=>e.jsxs(R.div,{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm overflow-hidden`,variants:E,whileHover:{y:-3},children:[e.jsxs("div",{className:"aspect-square relative group",children:[e.jsx(Ag,{images:w.images}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[e.jsx(R.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-1.5 bg-white text-gray-800 rounded-full",onClick:()=>a(`/merch-store/edit-product/${w.id}`),children:e.jsx(gd,{className:"text-lg"})}),e.jsx(R.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-1.5 bg-white text-red-500 rounded-full",onClick:()=>N(w),children:e.jsx(Ls,{className:"text-lg"})})]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:`font-medium ${s?"text-gray-100":"text-gray-800"} text-sm mb-0.5 truncate`,children:w.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:w.tokenLogo||Ai[w.acceptedToken]?.logo,alt:w.acceptedToken,className:"w-5 h-5"}),e.jsxs("p",{className:"text-[#FF1B6B] font-medium text-sm",children:["$",w.price.toFixed(2)]})]}),e.jsxs("p",{className:`text-xs ${s?"text-gray-400":"text-gray-500"}`,children:["Stock: ",w.quantity]})]})]},w.id))})]}),e.jsx(Ze,{children:o&&e.jsx(Ig,{product:o,onConfirm:v,onCancel:()=>m(null)})})]})},Dg=`
  :root {
    color-scheme: light;
  }
  
  .dark input[type="datetime-local"] {
    color-scheme: dark;
    background-color: #1a1b1f !important;
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: invert(1) !important;
    opacity: 0.7;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit {
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #fff !important;
  }

  input[type="datetime-local"] {
    color-scheme: light !important;
    background-color: white !important;
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: none !important;
    color: #1F2937 !important;
    opacity: 0.7;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  input[type="datetime-local"]::-webkit-datetime-edit {
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #1F2937 !important;
  }

  /* Style the checkbox */
  input[type="checkbox"] {
    accent-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:checked {
    background-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:focus {
    box-shadow: 0 0 0 2px rgba(255, 27, 107, 0.3) !important;
  }
`,Ii={polygon:{name:"Polygon",logo:"/polygon.png",tokens:{USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}}},unichain:{name:"Unichain",logo:"/unichain-logo.png",tokens:{USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}}}},Mg=["US 6 / EU 39","US 6.5 / EU 39.5","US 7 / EU 40","US 7.5 / EU 40.5","US 8 / EU 41","US 8.5 / EU 41.5","US 9 / EU 42","US 9.5 / EU 42.5","US 10 / EU 43","US 10.5 / EU 43.5","US 11 / EU 44","US 11.5 / EU 44.5","US 12 / EU 45","US 13 / EU 46"],Pg=()=>{const{user:a}=Ve(),t=rt(),{id:s}=Os(),{isDarkMode:n}=Se(),[r,l]=i.useState(!0),[d,o]=i.useState(!1),[m,c]=i.useState(!1),[u,x]=i.useState(null),[f,N]=i.useState(!1),v={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},[C,E]=i.useState({name:"",description:"",price:"",quantity:"",category:"",subCategory:"",images:[],network:"polygon",acceptedToken:"USDT",tokenLogo:"/logos/usdt.png",shippingFee:0,shippingInfo:"",hasVariants:!1,sizes:[],colors:[],colorQuantities:{},hasDiscount:!1,discountPercent:0}),w={"Men's Wear":["T-Shirts","Shirts","Pants","Hoodies","Jackets","Suits"],"Women's Wear":["Dresses","Tops","Skirts","Pants","Blouses","Jackets"],Footwear:["Sneakers","Formal Shoes","Boots","Sandals","Slippers"]},p={"Fashion Accessories":["Bags","Belts","Hats","Scarves","Jewelry"],"Tech Accessories":["Phone Cases","Laptop Bags","Headphone Cases","Tablet Covers","Chargers","Headphones","Speakers","MP3 Players","Sound Systems","Audio Cables"]};i.useEffect(()=>{y()},[s]),i.useEffect(()=>{if(u){const S=JSON.stringify(u)!==JSON.stringify(C);N(S)}},[C,u]);const y=async()=>{try{const S=await De(ge(ae,"products",s));if(S.exists()){const A=S.data();if(A.sellerId!==a.sellerId){M.error("You do not have permission to edit this product"),t("/merch-store/products");return}const h=await De(ge(ae,"sellers",a.sellerId));if(h.exists()){const O=h.data();if(!O.preferredNetwork){M.error("Please set your preferred network in settings first"),t("/merch-store/settings");return}A.network=O.preferredNetwork,A.acceptedToken=O.preferredToken,A.shippingFee=O.shippingFee||0}const I={...A,hasVariants:A.hasVariants||!1,sizes:A.sizes||[],colors:A.colors||[],colorQuantities:A.colorQuantities||{}};E(I),x(I)}else M.error("Product not found"),t("/merch-store/products")}catch(S){console.error("Error fetching product:",S),M.error("Failed to load product")}finally{l(!1)}},g=S=>{const{name:A,value:h}=S.target;E(A==="category"?I=>({...I,category:h,subCategory:"",hasVariants:!1,sizes:[],colors:[]}):I=>({...I,[A]:h}))},j=(S,A)=>{E(h=>({...h,subCategory:`${S} - ${A}`}))},T=async S=>{const A=Array.from(S.target.files);if(A.length+C.images.length>5){M.error("Maximum 5 images allowed");return}c(!0);try{const h=A.map(async O=>{if(O.size>2097152)throw new Error("Each image must be less than 2MB");const F=ca(ma,`products/${a.sellerId}/${s}/${O.name}`);return await ur(F,O),xr(F)}),I=await Promise.all(h);E(O=>({...O,images:[...O.images,...I]})),M.success("Images uploaded successfully")}catch(h){console.error("Error uploading images:",h),M.error(h.message||"Failed to upload images")}finally{c(!1)}},b=async(S,A)=>{try{const h=ca(ma,S);await po(h),E(I=>({...I,images:I.images.filter((O,F)=>F!==A)})),M.success("Image removed successfully")}catch(h){console.error("Error removing image:",h),M.error("Failed to remove image")}},$=async S=>{S.preventDefault(),o(!0);try{if(!C.name||!C.description||!C.price){M.error("Please fill in all required fields"),o(!1);return}if(!C.images||C.images.length===0){M.error("Please upload at least one product image"),o(!1);return}if(L()&&C.hasVariants&&(!C.sizes||C.sizes.length===0)){M.error("Please select at least one size for footwear"),o(!1);return}let A=null;C.hasDiscount&&C.discountPercent&&(A=C.price*(1-C.discountPercent/100));const h={name:C.name,description:C.description,price:parseFloat(C.price),category:C.category,subCategory:C.subCategory,images:C.images,hasVariants:C.hasVariants,hasDiscount:C.hasDiscount,discountPercent:C.hasDiscount?parseFloat(C.discountPercent):null,discountEndsAt:C.hasDiscount?new Date(C.discountEndsAt).toISOString():null,discountedPrice:A,updatedAt:We()};C.hasVariants&&(h.sizes=C.sizes,h.colors=C.colors,h.colorQuantities=C.colorQuantities),Object.keys(h).forEach(O=>{(h[O]===null||h[O]===void 0)&&delete h[O]});const I=ge(ae,"products",s);await $e(I,h),M.success("Product updated successfully"),t(`/merch-store/product/${s}`)}catch(A){console.error("Error updating product:",A),M.error("Failed to update product. Please try again.")}finally{o(!1)}},L=()=>C.subCategory&&C.subCategory.split(" - ")[0]==="Footwear";return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(R.div,{className:"w-6 h-6 border-2 border-[#FF1B6B] border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-4xl mx-auto p-6 ${n?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("style",{children:Dg}),e.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm p-6`,children:[e.jsxs(R.div,{children:[e.jsx("h1",{className:`text-2xl font-bold ${n?"text-gray-100":"text-gray-800"} mb-2`,children:"Edit Product"}),e.jsx("p",{className:`${n?"text-gray-400":"text-gray-500"} text-sm mb-6`,children:"Update your product details and listing information"})]}),e.jsxs("form",{onSubmit:$,className:"space-y-8",children:[e.jsxs("div",{className:`${n?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsxs("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-4`,children:["Product Images (",C.images.length,"/5)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[C.images.map((S,A)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden group bg-white",children:[e.jsx("img",{src:S,alt:`Product ${A+1}`,className:"w-full h-full object-cover"}),e.jsx(R.button,{type:"button",onClick:()=>b(S,A),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(Ls,{size:16})})]},A)),C.images.length<5&&e.jsxs(R.label,{className:`aspect-square rounded-lg border-2 border-dashed ${n?"border-gray-600 hover:border-[#FF1B6B]":"border-gray-300 hover:border-[#FF1B6B]"} flex flex-col items-center justify-center cursor-pointer transition-colors ${n?"bg-gray-800":"bg-white"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(hd,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:`text-sm ${n?"text-gray-400":"text-gray-500"} mt-2`,children:"Add Image"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:T,className:"hidden",disabled:m})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-1`,children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:C.name,onChange:g,required:!0,className:`w-full px-4 py-2.5 border ${n?"border-gray-600 bg-gray-700 text-white focus:border-[#FF1B6B]":"border-gray-300 bg-white text-gray-900 focus:border-[#FF1B6B]"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors`,placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-1`,children:"Category *"}),e.jsxs("select",{name:"category",value:C.category,onChange:g,required:!0,className:`w-full px-4 py-2.5 border ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors appearance-none`,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"clothing",children:"Clothing"}),e.jsx("option",{value:"accessories",children:"Accessories"}),e.jsx("option",{value:"electronics",children:"Electronics"}),e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"collectibles",children:"Collectibles"})]})]})]}),(C.category==="clothing"||C.category==="accessories")&&e.jsxs(R.div,{variants:v,className:`${n?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-4`,children:"Product Type *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(C.category==="clothing"?w:p).map(([S,A])=>e.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${n?"text-gray-100":"text-gray-900"} mb-3`,children:S}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:A.map(h=>e.jsx("button",{type:"button",onClick:()=>j(S,h),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors text-left ${C.subCategory===`${S} - ${h}`?"bg-[#FF1B6B] text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:h},h))})]},S))}),e.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${n?"text-gray-100":"text-gray-900"} mb-3`,children:"Selected Category"}),C.subCategory?e.jsxs("div",{className:`${n?"bg-pink-900/20":"bg-pink-50"} border ${n?"border-pink-900/20":"border-pink-100"} rounded-lg p-4`,children:[e.jsxs("p",{className:n?"text-gray-200":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Main Category:"})," ",C.subCategory.split(" - ")[0]]}),e.jsxs("p",{className:`${n?"text-gray-200":"text-gray-700"} mt-2`,children:[e.jsx("span",{className:"font-medium",children:"Sub Category:"})," ",C.subCategory.split(" - ")[1]]})]}):e.jsx("div",{className:`${n?"bg-gray-700/50 border-gray-600 text-gray-400":"bg-gray-50 border-gray-100 text-gray-500"} border rounded-lg p-4`,children:"Please select a category from the left"})]})]})]}),e.jsxs("div",{className:`${n?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-3`,children:"Description *"}),e.jsx("textarea",{name:"description",value:C.description,onChange:g,required:!0,rows:4,className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Describe your product..."})]})]}),e.jsxs(R.div,{variants:v,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${n?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-3`,children:"Network & Price"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-3",children:Object.entries(Ii).filter(([S])=>S===C.network).map(([S,A])=>e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-[#FF1B6B] ${n?"bg-pink-900/20":"bg-pink-50"} flex-1 justify-center`,children:[e.jsx("img",{src:A.logo,alt:A.name,className:"w-5 h-5"}),e.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-900"}`,children:A.name})]},S))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"price",value:C.price,onChange:g,required:!0,min:"0",step:"0.01",className:`w-full pl-4 pr-24 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"0.00"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-20 border-l ${n?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:C.acceptedToken})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hasDiscount",checked:C.hasDiscount,onChange:S=>{E(A=>({...A,hasDiscount:S.target.checked,discountPercent:S.target.checked?A.discountPercent:0}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasDiscount",className:`text-sm font-medium ${n?"text-gray-200":"text-gray-700"}`,children:"Apply Discount"})]}),C.hasDiscount&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"discountPercent",value:C.discountPercent,onChange:S=>{const A=Math.min(Math.max(0,Number(S.target.value)),99);E(h=>({...h,discountPercent:A,discountedPrice:h.price*(1-A/100)}))},min:"0",max:"99",className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter discount percentage"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-12 border-l ${n?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:"%"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-2`,children:"Discount Ends At"}),e.jsx("input",{type:"datetime-local",name:"discountEndsAt",value:C.discountEndsAt?new Date(C.discountEndsAt).toISOString().slice(0,16):"",onChange:S=>{const A=new Date(S.target.value);if(A<=new Date){M.error("Please select a future date and time");return}E(I=>({...I,discountEndsAt:A.toISOString()}))},min:new Date(new Date().getTime()+6e4).toISOString().slice(0,16),className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`})]}),C.discountPercent>0&&C.price>0&&e.jsxs("div",{className:`${n?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} border rounded-lg p-3`,children:[e.jsxs("p",{className:n?"text-gray-300":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Original Price:"})," ",C.price," ",C.acceptedToken]}),e.jsxs("p",{className:"text-[#FF1B6B] mt-1",children:[e.jsx("span",{className:"font-medium",children:"Discounted Price:"})," ",(C.price*(1-C.discountPercent/100)).toFixed(2)," ",C.acceptedToken]}),e.jsxs("p",{className:`${n?"text-gray-400":"text-gray-500"} mt-1`,children:[e.jsx("span",{className:"font-medium",children:"Savings:"})," ",(C.price*(C.discountPercent/100)).toFixed(2)," ",C.acceptedToken]})]})]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 ${n?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} rounded-lg border mt-2`,children:[e.jsx("img",{src:`/${C.acceptedToken.toLowerCase()}.png`,alt:C.acceptedToken,className:"w-5 h-5 object-contain"}),e.jsxs("p",{className:n?"text-gray-300":"text-gray-700",children:["Buyers will pay in ",e.jsx("span",{className:"font-medium",children:C.acceptedToken})," on ",e.jsx("span",{className:"font-medium",children:Ii[C.network]?.name||"selected"})]})]})]})]}),e.jsxs("div",{className:`${n?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-3`,children:"Quantity Available"}),e.jsx("input",{type:"number",name:"quantity",value:C.quantity,onChange:g,required:!0,min:"1",className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter available quantity"})]})]}),(C.category==="clothing"||C.category==="accessories")&&e.jsxs("div",{className:`${n?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"hasVariants",name:"hasVariants",checked:C.hasVariants,onChange:S=>{E(A=>({...A,hasVariants:S.target.checked,sizes:S.target.checked?A.sizes:[],colors:S.target.checked?A.colors:[]}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasVariants",className:`ml-2 text-sm font-medium ${n?"text-gray-200":"text-gray-700"}`,children:"This product has size and color variants"})]}),C.hasVariants&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:L()?Mg.map(S=>e.jsx("button",{type:"button",onClick:()=>{E(A=>({...A,sizes:A.sizes.includes(S)?A.sizes.filter(h=>h!==S):[...A.sizes,S]}))},className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${C.sizes.includes(S)?"bg-[#FF1B6B] text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:S},S)):["XS","S","M","L","XL","2XL","3XL"].map(S=>e.jsx("button",{type:"button",onClick:()=>{E(A=>({...A,sizes:A.sizes.includes(S)?A.sizes.filter(h=>h!==S):[...A.sizes,S]}))},className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${C.sizes.includes(S)?"bg-[#FF1B6B] text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:S},S))})]}),e.jsxs("div",{className:`${n?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Colors & Quantities"}),e.jsx("div",{className:"space-y-4",children:[{name:"Black",code:"#000000"},{name:"White",code:"#FFFFFF"},{name:"Gray",code:"#808080"},{name:"Red",code:"#FF0000"},{name:"Blue",code:"#0000FF"},{name:"Green",code:"#008000"},{name:"Yellow",code:"#FFFF00"},{name:"Purple",code:"#800080"},{name:"Pink",code:"#FFC0CB"},{name:"Brown",code:"#A52A2A"}].map(S=>{const A=C.colors.includes(S.name);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{const h=C.colors.includes(S.name)?C.colors.filter(O=>O!==S.name):[...C.colors,S.name],I={...C.colorQuantities};h.includes(S.name)||delete I[S.name],E(O=>({...O,colors:h,colorQuantities:I}))},className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${A?"bg-[#FF1B6B] text-white":n?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{className:"h-4 w-4 rounded-full border border-gray-300 shadow-inner",style:{backgroundColor:S.code}}),e.jsx("span",{children:S.name})]}),A&&e.jsx("div",{className:"flex-1 max-w-[150px]",children:e.jsx("input",{type:"number",min:"0",value:C.colorQuantities[S.name]||"",onChange:h=>{const I=Math.max(0,parseInt(h.target.value)||0);E(O=>({...O,colorQuantities:{...O.colorQuantities,[S.name]:I}}))},className:`w-full px-3 py-1.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors text-sm ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Quantity"})})]},S.name)})}),C.colors.length>0&&e.jsx("div",{className:`mt-4 pt-4 border-t ${n?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:n?"text-gray-400":"text-gray-600",children:"Total Quantity:"}),e.jsx("span",{className:`font-medium ${n?"text-gray-200":"text-gray-900"}`,children:Object.values(C.colorQuantities).reduce((S,A)=>S+A,0)})]})})]})]})]}),e.jsxs(R.div,{variants:v,className:`${n?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${n?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Fee (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`absolute left-3 top-1/2 -translate-y-1/2 ${n?"text-gray-400":"text-gray-500"}`,children:"$"}),e.jsx("input",{type:"number",name:"shippingFee",min:"0",step:"0.01",value:C.shippingFee,disabled:!0,className:`w-full pl-8 pr-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${n?"border-gray-600 bg-gray-700/50 text-gray-400":"border-gray-300 bg-gray-50 text-gray-500"}`,placeholder:"0.00"})]}),e.jsx("p",{className:`mt-1 text-sm ${n?"text-gray-400":"text-gray-500"}`,children:"Shipping fee is set in your store settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${n?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Information"}),e.jsx("input",{type:"text",name:"shippingInfo",value:C.shippingInfo,onChange:g,className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${n?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"e.g., Worldwide shipping available"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/merch-store/products"),className:`px-8 py-3 border-2 ${n?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||m||!f,className:`px-8 py-3 rounded-lg font-medium text-white ${d||m||!f?"bg-gray-400 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"} transition-colors flex items-center gap-2`,children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Updating Product..."})]}):m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Saving Changes..."})]}):"Save Changes"})]})]})]})]})};Fc.register(Ec,Ac,Ic,Bc,Dc,Mc,Pc,$c,Lc);const Ga=({title:a,value:t,icon:s,trend:n,subtitle:r,secondaryValue:l,withdrawals:d})=>{const{isDarkMode:o}=Se();return e.jsx(R.div,{whileHover:{y:-3},className:`${o?"bg-gray-800":"bg-white"} p-4 rounded-2xl shadow-sm relative group`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${o?"text-gray-400":"text-gray-500"}`,children:a}),e.jsx("p",{className:`text-xl font-bold ${o?"text-gray-100":"text-gray-900"} mt-1`,children:t}),n&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ao,{className:"text-emerald-500 w-4 h-4"}),e.jsxs("span",{className:"text-xs text-emerald-500",children:[n,"% from last month"]})]}),l&&e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Refunds: ",l]}),r&&e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:`text-xs ${o?"text-gray-400":"text-gray-500"} mt-1 cursor-help`,children:r}),d&&e.jsxs("div",{className:`absolute left-0 bottom-full mb-2 w-48 ${o?"bg-gray-700":"bg-white"} rounded-lg shadow-lg p-3 text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10`,children:[e.jsx("h4",{className:`font-medium mb-2 ${o?"text-gray-200":"text-gray-900"}`,children:"Withdrawals"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:o?"text-gray-300":"text-gray-700",children:"Completed:"}),e.jsxs("span",{className:`font-medium ${o?"text-gray-200":"text-gray-900"}`,children:["$",d.completed.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-orange-600",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("span",{className:"font-medium",children:["$",d.pending.toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-medium pt-1 border-t ${o?"border-gray-600":"border-gray-200"}`,children:[e.jsx("span",{className:o?"text-gray-200":"text-gray-900",children:"Total:"}),e.jsxs("span",{className:o?"text-gray-200":"text-gray-900",children:["$",(d.completed+d.pending).toFixed(2)]})]})]})]})]})]}),e.jsx("div",{className:`p-2 ${o?"bg-pink-900/20":"bg-pink-50"} rounded-lg`,children:e.jsx(s,{className:"w-5 h-5 text-[#FF1B6B]"})})]})})},Nt=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},$g=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-8",children:e.jsx(Nt,{})}),e.jsx("div",{className:"w-64 h-5",children:e.jsx(Nt,{})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsx("div",{className:`${a?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(Nt,{})}),e.jsx("div",{className:"w-40 h-8",children:e.jsx(Nt,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(Nt,{})})]}),e.jsx("div",{className:"w-12 h-12",children:e.jsx(Nt,{})})]})},t))}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl p-6 shadow-sm`,children:[e.jsx("div",{className:"w-48 h-6 mb-4",children:e.jsx(Nt,{})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:`text-left border-b ${a?"border-gray-700":"border-gray-200"}`,children:["Order ID","Customer","Products","Total","Date","Status"].map(t=>e.jsx("th",{className:"pb-3",children:e.jsx("div",{className:"w-24 h-4",children:e.jsx(Nt,{})})},t))})}),e.jsx("tbody",{className:`divide-y ${a?"divide-gray-700":"divide-gray-200"}`,children:[1,2,3,4,5].map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-20 h-5",children:e.jsx(Nt,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-32 h-5",children:e.jsx(Nt,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-24 h-5",children:e.jsx(Nt,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-24 h-5",children:e.jsx(Nt,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-32 h-5",children:e.jsx(Nt,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-20 h-6",children:e.jsx(Nt,{})})})]},t))})]})})]})]})},Lg=({orders:a})=>{const{isDarkMode:t}=Se(),s=a.reduce((o,m)=>(m.items.forEach(c=>{o[c.name]||(o[c.name]=0),o[c.name]++}),o),{}),n=Object.entries(s).sort(([,o],[,m])=>m-o).slice(0,4),r={labels:n.map(([o])=>o),datasets:[{data:n.map(([,o])=>o),backgroundColor:["rgba(255, 99, 132, 0.9)","rgba(99, 102, 241, 0.9)","rgba(245, 158, 11, 0.9)","rgba(16, 185, 129, 0.9)"],borderWidth:0,borderRadius:2,spacing:2}]},l={cutout:"85%",plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:t?"#374151":"white",titleColor:t?"#F3F4F6":"#111827",bodyColor:t?"#F3F4F6":"#111827",borderColor:t?"#4B5563":"#E5E7EB",borderWidth:1,padding:12,boxPadding:6,usePointStyle:!0,callbacks:{label:function(o){return`${o.label}: ${o.raw} sold`}}}},maintainAspectRatio:!1,layout:{padding:0}},d=n.reduce((o,[,m])=>o+m,0);return e.jsxs("div",{className:`relative h-[140px] ${t?"bg-gray-800":"bg-white"} rounded-lg p-2`,children:[e.jsx("div",{className:"h-[100px]",children:e.jsx(yd,{data:r,options:l})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:d}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Total"})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:n.map(([o,m],c)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:r.datasets[0].backgroundColor[c]}}),e.jsx("span",{className:`text-[10px] ${t?"text-gray-300":"text-gray-600"} truncate max-w-[60px]`,title:o,children:o})]},o))})})]})},Rg=({orders:a,isDarkMode:t})=>{const s=a.reduce((r,l)=>(l.items.forEach(d=>{r[d.name]||(r[d.name]={count:0,price:d.price,image:d.image}),r[d.name].count++}),r),{}),n=Object.entries(s).sort(([,r],[,l])=>l.count-r.count).slice(0,3);return e.jsx("div",{className:"space-y-2",children:n.map(([r,l])=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.image&&e.jsx("img",{src:l.image,alt:r,className:"w-6 h-6 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${t?"text-gray-200":"text-gray-900"} truncate max-w-[120px]`,title:r,children:r}),e.jsxs("p",{className:`text-[10px] ${t?"text-gray-400":"text-gray-500"}`,children:[l.count," sold"]})]})]}),e.jsxs("span",{className:`text-xs font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["$",l.price]})]},r))})},rl=({currentPage:a,totalPages:t,onPageChange:s})=>e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-3",children:[e.jsx("button",{onClick:()=>s(a-1),disabled:a===1,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:"←"}),[...Array(t)].map((n,r)=>e.jsx("button",{onClick:()=>s(r+1),className:`w-6 h-6 text-xs rounded-full ${a===r+1?"bg-pink-100 text-pink-600":"text-gray-500 hover:bg-gray-100"}`,children:r+1},r+1)),e.jsx("button",{onClick:()=>s(a+1),disabled:a===t,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:"→"})]}),Og=({orders:a,isDarkMode:t})=>{const[s,n]=i.useState(1),r=4,l=a.reduce((x,f)=>(f.items.forEach(N=>{(!x[N.name]||new Date(f.createdAt.toDate())>new Date(x[N.name].soldDate))&&(x[N.name]={name:N.name,price:N.price,image:N.image,soldDate:f.createdAt.toDate()})}),x),{}),d=Object.values(l).sort((x,f)=>f.soldDate-x.soldDate),o=Math.ceil(d.length/r),m=s*r,c=m-r,u=d.slice(c,m);return e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map((x,f)=>e.jsxs("div",{className:`${t?"bg-gray-700/50":"bg-gray-50"} rounded-lg p-2 flex items-center gap-2`,children:[e.jsx("img",{src:x.image,alt:x.name,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs font-medium ${t?"text-gray-200":"text-gray-900"} truncate`,title:x.name,children:x.name}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:`text-[11px] ${t?"text-gray-400":"text-gray-500"}`,children:new Date(x.soldDate).toLocaleDateString()}),e.jsxs("span",{className:`text-[11px] font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["$",x.price]})]})]})]},f))}),o>1&&e.jsx(rl,{currentPage:s,totalPages:o,onPageChange:n})]})},_g=()=>{const{user:a}=Ve(),{isDarkMode:t}=Se(),[s,n]=i.useState(!0),[r,l]=i.useState({totalRevenue:0,totalOrders:0,totalCustomers:0,recentOrders:[],allOrders:[],allTimeRevenue:0,totalWithdrawn:0,pendingWithdrawals:0}),[d,o]=i.useState(1),m=50,[c,u]=i.useState({labels:[],datasets:[]}),[x,f]=i.useState("Monthly");i.useState([25,30,20,25]);const N={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:t?"#374151":"white",titleColor:t?"#F3F4F6":"#111827",bodyColor:t?"#F3F4F6":"#111827",borderColor:t?"#4B5563":"#E5E7EB",borderWidth:1,padding:12,boxPadding:6,usePointStyle:!0,callbacks:{label:function(g){return`$${g.parsed.y.toFixed(2)}`}}}},scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{font:{size:11},color:t?"#9CA3AF":"#6B7280"}},y:{beginAtZero:!0,grid:{color:t?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:t?"#9CA3AF":"#6B7280",callback:function(g){return g>=1e3?"$"+g/1e3+"k":"$"+g}}}},elements:{line:{tension:.4},point:{radius:0}}};i.useEffect(()=>{a&&v()},[a,x]);const v=async()=>{try{const g=new Date,j=new Date(g.getFullYear(),g.getMonth(),1),T=new Date(g.getFullYear(),g.getMonth()-1,1),b=new Date(g.getFullYear(),g.getMonth(),0),$=Te(be(ae,"orders"),fe("sellerId","==",a.sellerId),Ue("createdAt","desc")),L=Te(be(ae,"withdrawals"),fe("sellerId","==",a.sellerId)),[S,A]=await Promise.all([Ae($),Ae(L)]),h=S.docs.map(G=>({id:G.id,...G.data()})),I=h.filter(G=>G.createdAt?.toDate()>=j),O=h.filter(G=>{const q=G.createdAt?.toDate();return q>=T&&q<=b}),F=I.reduce((G,q)=>q.status!=="cancelled"&&q.status!=="refunded"?G+(q.total||0):G,0),U=O.reduce((G,q)=>q.status!=="cancelled"&&q.status!=="refunded"?G+(q.total||0):G,0),V=new Set(I.map(G=>G.buyerId)).size,P=new Set(O.map(G=>G.buyerId)).size,B=(G,q)=>q===0?G>0?100:0:(G-q)/q*100,k=B(F,U),D=B(I.length,O.length),_=B(V,P),H=A.docs.reduce((G,q)=>{const Z=q.data();return Z.status==="completed"?G.completed+=Z.amount||0:Z.status==="pending"&&(G.pending+=Z.amount||0),G},{completed:0,pending:0}),X=h.filter(G=>G.status!=="cancelled"),z=X.reduce((G,q)=>q.status==="refunded"?G:G+q.total,0),se=X.reduce((G,q)=>q.status==="refunded"?G+q.total:G,0),ee=new Set(X.map(G=>G.buyerId)).size,te=z,Y=Math.max(0,z-H.completed),W=[],Q=[];if(x==="Monthly")for(let G=29;G>=0;G--){const q=new Date(g);q.setDate(q.getDate()-G),W.push(q.toLocaleDateString("default",{month:"short",day:"numeric"}));const Z=h.reduce((ie,ne)=>{const K=ne.createdAt?.toDate();return K&&K.getDate()===q.getDate()&&K.getMonth()===q.getMonth()&&K.getFullYear()===q.getFullYear()&&ne.status!=="cancelled"&&ne.status!=="refunded"?ie+(ne.total||0):ie},0);Q.push(Z)}else for(let G=6;G>=0;G--){const q=new Date(g);q.setDate(q.getDate()-G),W.push(q.toLocaleDateString("default",{weekday:"short"}));const Z=h.reduce((ie,ne)=>{const K=ne.createdAt?.toDate();return K&&K.getDate()===q.getDate()&&K.getMonth()===q.getMonth()&&K.getFullYear()===q.getFullYear()&&ne.status!=="cancelled"&&ne.status!=="refunded"?ie+(ne.total||0):ie},0);Q.push(Z)}u({labels:W,datasets:[{data:Q,fill:!0,backgroundColor:"rgba(255, 27, 107, 0.1)",borderColor:"rgb(255, 27, 107)",pointRadius:0,pointHoverRadius:4,pointHoverBackgroundColor:"rgb(255, 27, 107)",pointHoverBorderColor:"white",pointHoverBorderWidth:2}]}),l({totalRevenue:Y,grossRevenue:z,totalRefunds:se,totalOrders:h.length,totalCustomers:ee,recentOrders:h.slice(0,5),allOrders:h,allTimeRevenue:te,totalWithdrawn:H.completed,pendingWithdrawals:H.pending,revenueChange:parseFloat(k.toFixed(1)),ordersChange:parseFloat(D.toFixed(1)),customersChange:parseFloat(_.toFixed(1))})}catch(g){console.error("Error fetching sales data:",g),M.error("Failed to load sales data")}finally{n(!1)}},C=d*m,E=C-m,w=r.allOrders.slice(E,C);Math.ceil(r.allOrders.length/m);const p=g=>o(g),y=()=>{try{const g=r.allOrders.map(b=>({"Order ID":b.id,Product:b.items.map($=>$.name).join(", "),Customer:b.buyerInfo?.name||"Anonymous",Price:b.total,Date:new Date(b.createdAt?.toDate()).toLocaleDateString(),Status:b.status})),j=Ja.json_to_sheet(g),T=Ja.book_new();Ja.book_append_sheet(T,j,"Sales Data"),_c(T,"sales_data.xlsx"),M.success("Sales data exported successfully")}catch(g){console.error("Error exporting data:",g),M.error("Failed to export sales data")}};return s?e.jsx($g,{}):e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},className:`relative h-screen flex flex-col ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Sales Overview"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Monitor your store's performance"})]}),e.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:[e.jsx(pd,{className:"w-5 h-5"}),e.jsx("span",{children:"Export Sales"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`lg:col-span-2 ${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-4`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Total Revenue"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:["$",r.grossRevenue.toFixed(2)]}),r.revenueChange>0&&e.jsxs("span",{className:"text-sm px-2 py-1 bg-green-100 text-green-600 rounded-full",children:["↑ ",r.revenueChange,"%"]})]}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} mt-1`,children:["Gained $",r.grossRevenue-(r.lastMonthRevenue||0)," this month"]})]}),e.jsxs("select",{value:x,onChange:g=>f(g.target.value),className:`px-3 py-1.5 text-sm border rounded-lg ${t?"border-gray-600 bg-gray-700 text-gray-200":"border-gray-200 bg-white text-gray-700"}`,children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Weekly"})]})]}),e.jsx("div",{className:"h-[200px]",children:e.jsx(fd,{data:c,options:N})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-4`,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-sm font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Products Sold"}),e.jsx("div",{className:"h-[140px]",children:e.jsx(Lg,{orders:r.allOrders})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:`text-sm font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Top Products"}),e.jsx("button",{className:`text-xs ${t?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"See all"})]}),e.jsx(Rg,{orders:r.allOrders,isDarkMode:t})]})]}),e.jsx(Og,{orders:r.allOrders,isDarkMode:t})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Ga,{title:"All Time Revenue",value:`$${r.allTimeRevenue.toFixed(2)}`,icon:Aa,subtitle:`Withdrawn: $${r.totalWithdrawn.toFixed(2)}`,withdrawals:{completed:r.totalWithdrawn,pending:r.pendingWithdrawals}}),e.jsx(Ga,{title:"Net Revenue",value:`$${r.totalRevenue.toFixed(2)}`,icon:Aa,trend:r.revenueChange,secondaryValue:r.totalRefunds>0?`$${r.totalRefunds.toFixed(2)}`:void 0}),e.jsx(Ga,{title:"Total Orders",value:r.totalOrders,icon:_s,trend:r.ordersChange}),e.jsx(Ga,{title:"Total Customers",value:r.totalCustomers,icon:da,trend:r.customersChange})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm`,children:[e.jsx("div",{className:`p-4 border-b ${t?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Recent Orders"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:`p-2 ${t?"hover:bg-gray-700":"hover:bg-gray-100"} rounded-lg`,children:e.jsx("svg",{className:`w-5 h-5 ${t?"text-gray-400":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`text-left text-sm ${t?"text-gray-400 bg-gray-800":"text-gray-500 bg-gray-50"}`,children:[e.jsx("th",{className:"py-3 px-4 font-medium",children:"#"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Product"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Customer"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Price"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Date"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-100"}`,children:w.slice(0,10).map(g=>e.jsxs("tr",{className:`text-sm ${t?"hover:bg-gray-700":"hover:bg-gray-50"}`,children:[e.jsxs("td",{className:`py-3 px-4 ${t?"text-gray-200":"text-gray-900"}`,children:["#",g.id.slice(-6)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[g.items[0]?.image&&e.jsx("img",{src:g.items[0].image,alt:g.items[0].name,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:g.items[0]?.name}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:g.items.length>1?`+${g.items.length-1} more`:""})]})]})}),e.jsx("td",{className:`py-3 px-4 ${t?"text-gray-200":"text-gray-900"}`,children:g.buyerInfo?.name||"Anonymous"}),e.jsxs("td",{className:`py-3 px-4 ${t?"text-gray-200":"text-gray-900"}`,children:["$",g.total.toFixed(2)]}),e.jsx("td",{className:`py-3 px-4 ${t?"text-gray-400":"text-gray-500"}`,children:new Date(g.createdAt?.toDate()).toLocaleDateString()}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g.status==="delivered"?"bg-green-100 text-green-700":g.status==="shipped"?"bg-blue-100 text-blue-700":g.status==="processing"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:g.status})})]},g.id))})]}),w.length===0?e.jsx("div",{className:`text-center py-6 ${t?"text-gray-400":"text-gray-500"}`,children:"No orders yet"}):e.jsx("div",{className:`p-4 border-t ${t?"border-gray-700":"border-gray-100"}`,children:e.jsx(rl,{currentPage:d,totalPages:Math.ceil(r.allOrders.length/10),onPageChange:p})})]})]})]})})})},Ug={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}},It=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Wg=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-8",children:e.jsx(It,{})}),e.jsx("div",{className:"w-64 h-5",children:e.jsx(It,{})})]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:"w-24 h-10",children:e.jsx(It,{})},t))})]}),e.jsx("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:`${a?"bg-gray-700/50":"bg-gray-50"}`,children:["Order Details","Customer","Total","Status","Actions"].map(t=>e.jsx("th",{className:"px-6 py-3",children:e.jsx("div",{className:"w-24 h-4",children:e.jsx(It,{})})},t))})}),e.jsx("tbody",{className:`divide-y ${a?"divide-gray-700":"divide-gray-200"}`,children:[1,2,3,4,5].map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-20 h-5",children:e.jsx(It,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(It,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(It,{})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(It,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(It,{})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"w-24 h-5",children:e.jsx(It,{})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"w-20 h-6",children:e.jsx(It,{})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-8 h-8",children:e.jsx(It,{})}),e.jsx("div",{className:"w-8 h-8",children:e.jsx(It,{})})]})})]},t))})]})})})]})},Hg=({isOpen:a,onClose:t,onSubmit:s,orderId:n})=>{const[r,l]=i.useState(""),[d,o]=i.useState(""),[m,c]=i.useState(!1),{isDarkMode:u}=Se(),x=async f=>{if(f.preventDefault(),!r.trim()||!d.trim()){M.error("Please enter both tracking number and carrier");return}c(!0),await s(n,r,d),c(!1),t()};return a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsx(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:`${u?"bg-gray-800":"bg-white"} rounded-lg shadow-xl max-w-md w-full`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${u?"text-gray-100":"text-gray-900"} mb-4`,children:"Enter Shipping Information"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${u?"text-gray-300":"text-gray-700"} mb-1`,children:"Shipping Carrier"}),e.jsxs("select",{value:d,onChange:f=>o(f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${u?"bg-gray-700 border-gray-600 text-gray-200":"border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select a carrier"}),e.jsx("option",{value:"fedex",children:"FedEx"}),e.jsx("option",{value:"ups",children:"UPS"}),e.jsx("option",{value:"usps",children:"USPS"}),e.jsx("option",{value:"dhl",children:"DHL"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${u?"text-gray-300":"text-gray-700"} mb-1`,children:"Tracking Number"}),e.jsx("input",{type:"text",value:r,onChange:f=>l(f.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${u?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400"}`,placeholder:"Enter tracking number",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 text-sm font-medium rounded-lg ${u?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||!r.trim()||!d.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Confirming...":"Confirm Shipping"})]})]})]})})})]}):null},qg=({order:a,onClose:t})=>{const{isDarkMode:s}=Se();if(!a)return null;const n=r=>typeof r=="object"&&r.name?r.name:r;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:`text-xl font-semibold ${s?"text-gray-100":"text-gray-900"}`,children:"Order Details"}),e.jsx("button",{onClick:t,className:`${s?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(mt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Order ID: ",a.id]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Date: ",new Date(a.createdAt?.toDate()).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${s?"text-gray-200":"text-gray-900"}`,children:"Customer Information"}),e.jsxs("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Name: ",a.buyerInfo?.name]}),a.flag&&e.jsx("img",{src:a.flag,alt:n(a.shippingAddress?.country),className:"w-5 h-4 object-cover rounded-sm shadow-sm"})]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Email: ",a.buyerInfo?.email]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Phone: ",a.buyerInfo?.phone]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${s?"text-gray-200":"text-gray-900"}`,children:"Shipping Address"}),e.jsxs("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsx("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:a.shippingAddress?.street}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:[a.shippingAddress?.city,", ",a.shippingAddress?.state," ",a.shippingAddress?.postalCode]}),e.jsx("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:n(a.shippingAddress?.country)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${s?"text-gray-200":"text-gray-900"}`,children:"Items"}),e.jsx("div",{className:"space-y-2",children:a.items.map((r,l)=>e.jsx("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:r.name}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Quantity: ",r.quantity]}),r.size&&e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Size: ",r.size]}),r.color&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:`${s?"text-gray-300":"text-gray-600"}`,children:"Color:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:r.color.toLowerCase(),borderColor:r.color.toLowerCase()==="#ffffff"?"#e5e7eb":"transparent"}}),e.jsx("span",{className:`${s?"text-gray-300":"text-gray-600"}`,children:r.color})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-medium ${s?"text-gray-200":"text-gray-900"}`,children:["$",r.price.toFixed(2)]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Shipping: $",r.shippingFee.toFixed(2)]})]})]})},l))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${s?"text-gray-200":"text-gray-900"}`,children:"Payment Information"}),e.jsxs("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Method: ",a.paymentMethod?.type," (",a.paymentMethod?.token,")"]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Network: ",a.paymentMethod?.network]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Wallet: ",a.paymentMethod?.buyerWallet]}),e.jsxs("p",{className:`text-sm font-medium mt-2 ${s?"text-gray-200":"text-gray-900"}`,children:["Total: $",a.total.toFixed(2)]})]})]})]})]})})},zg=()=>{const{user:a}=Ve(),{isDarkMode:t}=Se(),[s,n]=i.useState(!0),[r,l]=i.useState([]),[d,o]=i.useState("all"),[m,c]=i.useState(null),[u,x]=i.useState(!1),[f,N]=i.useState(null);i.useEffect(()=>{v()},[a]);const v=async()=>{try{const p=Te(be(ae,"orders"),fe("sellerId","==",a.sellerId),Ue("createdAt","desc")),g=(await Ae(p)).docs.map(T=>({id:T.id,...T.data()})),j=g.filter(T=>T.status==="processing"&&!T.balanceUpdated);if(j.length>0){const T=ge(ae,"sellers",a.sellerId),b=await De(T);if(b.exists())try{const $=b.data();$.balance||(await $e(T,{balance:{available:0,pending:0}}),$.balance={available:0,pending:0});const L=j.reduce((h,I)=>{const O=parseFloat(I.total);return h+(isNaN(O)?0:O)},0),S={available:parseFloat($.balance.available||0),pending:parseFloat($.balance.pending||0)+L};await $e(T,{balance:{available:S.available,pending:S.pending}});const A=on(ae);j.forEach(h=>{const I=ge(ae,"orders",h.id);A.update(I,{balanceUpdated:!0})}),await A.commit(),console.log("Balance updated successfully:",{previousBalance:$.balance,newBalance:S,totalNewAmount:L,updatedOrders:j.length})}catch($){console.error("Error updating balance:",$),console.error("Error details:",{sellerId:a.sellerId,sellerData:b.data(),newOrders:j})}}l(g)}catch(p){console.error("Error fetching orders:",p),M.error("Failed to load orders")}finally{n(!1)}},C=async(p,y,g)=>{try{const j=ge(ae,"orders",p),b=(await De(j)).data(),$=b.shippingDeadline.toDate();if(Date.now()>$){M.error("Shipping confirmation deadline has passed");return}const L=ge(ae,"sellers",a.sellerId),A=(await De(L)).data().balance||{available:0,pending:0},h=Number(b.total||0);await $e(L,{balance:{available:Number((Number(A.available||0)+h).toFixed(2)),pending:Number((Number(A.pending||0)-h).toFixed(2))}}),await $e(j,{status:"shipped",updatedAt:new Date,shippingConfirmed:!0,shippingConfirmedAt:new Date,fundsAvailable:!0,fundsAvailableAt:new Date(Date.now()+14*24*60*60*1e3),trackingNumber:y,carrier:g,shippingStatus:"in_transit"}),l(I=>I.map(O=>O.id===p?{...O,status:"shipped",shippingConfirmed:!0,shippingConfirmedAt:new Date,fundsAvailable:!0,fundsAvailableAt:new Date(Date.now()+14*24*60*60*1e3),trackingNumber:y,carrier:g,shippingStatus:"in_transit"}:O)),M.success("Shipping confirmed successfully")}catch(j){console.error("Error updating order:",j),M.error("Failed to update order")}},E=r.filter(p=>d==="all"?!0:p.status===d),w=p=>{switch(p){case"delivered":return"bg-green-100 text-green-700";case"completed":return"bg-green-100 text-green-700";case"processing":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";case"pending":default:return"bg-yellow-100 text-yellow-700"}};return s?e.jsx(Wg,{}):e.jsxs(R.div,{className:`max-w-5xl mx-auto p-4 ${t?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:Ug,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Orders Received"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Manage your incoming orders"})]}),e.jsx("div",{className:"flex gap-2",children:["all","processing","completed","cancelled"].map(p=>e.jsx("button",{onClick:()=>o(p),className:`px-4 py-2 rounded-lg text-sm font-medium capitalize transition-colors ${d===p?"bg-[#FF1B6B] text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:p},p))})]}),E.length===0?e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 text-center`,children:[e.jsx(_s,{className:`w-12 h-12 ${t?"text-gray-600":"text-gray-400"} mx-auto mb-4`}),e.jsx("h2",{className:`text-xl font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"No Orders Found"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:d==="all"?"You haven't received any orders yet":`No ${d} orders found`})]}):e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm overflow-hidden mt-6`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${t?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Order Details"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Customer"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Items"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Total"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:E.map(p=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700/50":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["#",p.id.slice(-6)]}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:new Date(p.createdAt?.toDate()).toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:p.buyerInfo?.name}),p.flag&&e.jsx("img",{src:p.flag,alt:`${p.shippingAddress?.country} flag`,className:"w-5 h-4 object-cover rounded-sm shadow-sm"})]}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:p.buyerInfo?.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"space-y-2",children:p.items.map((y,g)=>e.jsx("div",{className:"text-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[y.image&&e.jsx("img",{src:y.image,alt:y.name,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:y.name}),e.jsxs("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:["Qty: ",y.quantity,y.size&&` • Size: ${y.size}`,y.color&&e.jsxs("span",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{children:"Color:"}),e.jsx("span",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:y.color.toLowerCase(),borderColor:y.color.toLowerCase()==="#ffffff"?"#e5e7eb":"transparent"}}),e.jsx("span",{children:y.color})]})]})]})]})},g))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["$",p.total.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${w(p.status)}`,children:p.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>c(p),className:`p-2 ${t?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"} transition-colors`,title:"View Details",children:e.jsx(bd,{className:"w-5 h-5"})}),p.status==="processing"&&!p.shippingConfirmed&&e.jsx("button",{onClick:()=>{N(p.id),x(!0)},className:"px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 hover:bg-green-200",children:"Confirm Shipping"}),p.trackingNumber&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:[p.carrier.toUpperCase(),": ",p.trackingNumber]}),e.jsx("span",{className:`text-xs font-medium flex items-center gap-1 ${p.shippingStatus==="delivered"?"text-green-600":"text-blue-600"}`,children:p.shippingStatus==="delivered"?e.jsxs(e.Fragment,{children:["Delivered ",e.jsx(Rs,{className:"w-4 h-4"})]}):"In Transit"})]})]})})]},p.id))})]})})}),e.jsx(Hg,{isOpen:u,onClose:()=>x(!1),onSubmit:C,orderId:f}),m&&e.jsx(qg,{order:m,onClose:()=>c(null)})]})},kt=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Vg=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-8",children:e.jsx(kt,{})}),e.jsx("div",{className:"w-64 h-5",children:e.jsx(kt,{})})]}),e.jsx("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-xl p-2 shadow-sm`,children:e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(t=>e.jsx("div",{className:"w-32 h-10",children:e.jsx(kt,{})},t))})}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl p-6 shadow-sm space-y-6`,children:[e.jsx("div",{className:"grid grid-cols-2 gap-6",children:[1,2].map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(kt,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(kt,{})})]},t))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-40 h-5",children:e.jsx(kt,{})}),e.jsx("div",{className:"w-full h-32",children:e.jsx(kt,{})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-5",children:e.jsx(kt,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(kt,{})})]},t))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(kt,{})}),e.jsx("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(kt,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(kt,{})})]}),e.jsx("div",{className:"w-32 h-10",children:e.jsx(kt,{})})]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("div",{className:"w-full h-10",children:e.jsx(kt,{})})})]})]})},Gg=()=>{const{user:a}=Ve(),{isDarkMode:t}=Se(),[s,n]=i.useState(!0),[r,l]=i.useState("profile"),[d,o]=i.useState(!1),[m,c]=i.useState(null),[u,x]=i.useState({fullName:"",email:a?.email||"",phoneNumber:"",shippingAddress:{street:"",city:"",state:"",country:{name:"",code:"",flag:""},postalCode:""}}),[f,N]=i.useState({storeName:"",description:"",contactEmail:"",phoneNumber:"",country:"",city:"",postalCode:"",shippingCountries:[],shippingFee:0,preferredNetwork:""}),[v,C]=i.useState({walletAddress:"",preferredToken:"USDT"}),[E,w]=i.useState(!1),[p,y]=i.useState(null),[g,j]=i.useState(!1),[T,b]=i.useState(null),$=i.useMemo(()=>Ji().getData(),[]),L=i.useMemo(()=>$.map(k=>({value:k.value,label:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sr,{countryCode:k.value,svg:!0,style:{width:"1.5em",height:"1.5em"}}),k.label]}),searchLabel:k.label})),[$]),S=i.useMemo(()=>({control:(k,D)=>({...k,padding:"2px",borderColor:t?"#4B5563":"#E5E7EB",backgroundColor:t?"#374151":"white","&:hover":{borderColor:"#FF1B6B"}}),option:(k,D)=>({...k,backgroundColor:D.isSelected?"#FF1B6B":D.isFocused?t?"#4B5563":"#FFE4E4":t?"#374151":"white",color:D.isSelected?"white":t?"#E5E7EB":"#374151","&:hover":{backgroundColor:D.isSelected?"#FF1B6B":t?"#4B5563":"#FFE4E4"}}),menu:k=>({...k,backgroundColor:t?"#374151":"white"}),singleValue:k=>({...k,color:t?"#E5E7EB":"#374151"}),input:k=>({...k,color:t?"#E5E7EB":"#374151"})}),[t]),A=k=>{const D={...u,shippingAddress:{...u.shippingAddress,country:{name:k.searchLabel,code:k.value,flag:`https://flagcdn.com/${k.value.toLowerCase()}.svg`}}};x(D),j(JSON.stringify(D)!==JSON.stringify(T))};i.useEffect(()=>{(async()=>{try{if(!a){n(!1);return}a.isSeller?(l("store"),await F()):(l("profile"),await h())}catch{M.error("Failed to load settings")}finally{n(!1)}})()},[a]);const h=async()=>{try{const k=await De(ge(ae,"users",a.uid));if(k.exists()){const D=k.data(),_={fullName:D.fullName||"",email:D.email||a?.email||"",phoneNumber:D.phoneNumber||"",walletAddress:D.walletAddress||"",shippingAddress:{street:D.shippingAddress?.street||"",city:D.shippingAddress?.city||"",state:D.shippingAddress?.state||"",country:D.shippingAddress?.country||{name:"",code:"",flag:""},postalCode:D.shippingAddress?.postalCode||""}};if(x(_),b(JSON.parse(JSON.stringify(_))),j(!1),D.walletAddress&&window.ethereum)try{const H=await window.ethereum.request({method:"eth_accounts"});H.length>0&&H[0].toLowerCase()===D.walletAddress.toLowerCase()&&x(X=>({...X,walletAddress:H[0]}))}catch(H){console.error("Error checking wallet connection:",H)}}}catch(k){console.error("Error fetching buyer profile:",k),M.error("Failed to load profile")}},I=k=>{const{name:D,value:_}=k.target;let H;if(D.includes("shippingAddress.")){const X=D.split(".")[1];H={...u,shippingAddress:{...u.shippingAddress,[X]:_}}}else H={...u,[D]:_};x(H),j(JSON.stringify(H)!==JSON.stringify(T))},O=async k=>{k.preventDefault();try{await ts(ge(ae,"users",a.uid),{...u,updatedAt:new Date},{merge:!0}),b(JSON.parse(JSON.stringify(u))),j(!1),M.success("Profile updated successfully")}catch{M.error("Failed to update profile")}},F=async()=>{if(a?.sellerId)try{const k=ge(ae,"sellers",a.sellerId),D=await De(k);if(D.exists()){const _=D.data(),H={..._,country:_.country?.code?_.country:{name:_.country||"",code:"",flag:""}};N(H),y(H),C({walletAddress:_.walletAddress||"",preferredToken:_.preferredToken||"USDC"})}else{const _=await De(ge(ae,"users",a.uid)),H=_.exists()?_.data():{},X={sellerId:a.sellerId,userId:a.uid,storeName:"",description:"",contactEmail:a.email,phoneNumber:"",country:{name:"",code:"",flag:""},city:"",postalCode:"",shippingCountries:[],shippingFee:0,preferredToken:"USDC",preferredNetwork:"",walletAddress:H.walletAddress||"",createdAt:new Date,updatedAt:new Date};await ts(k,X),N(X),y(X),C({walletAddress:H.walletAddress||"",preferredToken:X.preferredToken})}w(!1)}catch{M.error("Failed to load seller settings")}},U=async()=>{try{if(!await ss()){M.error("Please install MetaMask to connect your wallet");return}const D=await window.ethereum.request({method:"eth_requestAccounts"});if(D.length===0){M.error("Please connect your wallet");return}const _=D[0];console.log("Connecting wallet:",_),a.isSeller?(console.log("Updating seller state with wallet:",_),C(H=>(console.log("Previous wallet settings:",H),{...H,walletAddress:_})),N(H=>(console.log("Previous store settings:",H),{...H,walletAddress:_}))):x(H=>({...H,walletAddress:_}));try{if(a.isSeller){console.log("Updating seller document with wallet:",_);const H=ge(ae,"sellers",a.sellerId);await $e(H,{walletAddress:_,updatedAt:new Date}),await $e(ge(ae,"users",a.uid),{walletAddress:_,updatedAt:new Date});const X=await De(H);if(X.exists()){const z=X.data();console.log("Updated seller data:",z),N(z),C(se=>({...se,walletAddress:z.walletAddress}))}}else await $e(ge(ae,"users",a.uid),{walletAddress:_,updatedAt:new Date});M.success("Wallet connected successfully")}catch(H){console.error("Error updating Firestore:",H),M.error("Failed to save wallet connection"),a.isSeller?(C(X=>({...X,walletAddress:""})),N(X=>({...X,walletAddress:""}))):x(X=>({...X,walletAddress:""}))}}catch(k){console.error("Wallet connection error:",k),k.code===4001?M.error("You rejected the connection request"):M.error("Failed to connect wallet")}},V=async()=>{try{a.isSeller?(C(k=>({...k,walletAddress:""})),N(k=>({...k,walletAddress:""}))):x(k=>({...k,walletAddress:""})),a.isSeller?await $e(ge(ae,"sellers",a.sellerId),{walletAddress:"",updatedAt:new Date}):await $e(ge(ae,"users",a.uid),{walletAddress:"",updatedAt:new Date}),M.success("Wallet disconnected successfully")}catch(k){console.error("Error disconnecting wallet:",k),M.error("Failed to disconnect wallet"),a.isSeller?(C(D=>({...D,walletAddress:v.walletAddress})),N(D=>({...D,walletAddress:v.walletAddress}))):x(D=>({...D,walletAddress:u.walletAddress}))}},P=async k=>{k.preventDefault();try{await $e(ge(ae,"sellers",a.sellerId),{...f,updatedAt:new Date}),y(f),w(!1),M.success("Store settings updated successfully")}catch{M.error("Failed to update store settings")}},B=k=>{const{name:D,value:_}=k.target;N(H=>{const X={...H,[D]:_},z=JSON.stringify(X)!==JSON.stringify(p);return w(z),X})};return s?e.jsx(Vg,{}):e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:`max-w-4xl mx-auto p-6 ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Settings"}),e.jsxs("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-6`,children:["Manage your ",a?.isSeller?"store settings":"profile"," and preferences"]})]}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-2 shadow-sm mb-6`,children:e.jsx("nav",{className:"flex gap-2",children:a?.isSeller?[{id:"store",label:"Store Settings",icon:Ds},{id:"account",label:"Account",icon:da},{id:"security",label:"Security",icon:oa}].map(k=>e.jsxs("button",{onClick:()=>l(k.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r===k.id?"bg-[#FF1B6B] text-white":t?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(k.icon,{className:"w-5 h-5"}),k.label]},k.id)):[{id:"profile",label:"Profile",icon:da},{id:"shipping",label:"Shipping",icon:_s},{id:"security",label:"Security",icon:oa}].map(k=>e.jsxs("button",{onClick:()=>l(k.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r===k.id?"bg-[#FF1B6B] text-white":t?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(k.icon,{className:"w-5 h-5"}),k.label]},k.id))})}),e.jsx("div",{className:"space-y-6",children:a?.isSeller?e.jsxs(e.Fragment,{children:[r==="store"&&e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Store Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Store Name"}),e.jsx("input",{type:"text",name:"storeName",value:f.storeName,onChange:B,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Contact Email"}),e.jsx("input",{type:"email",name:"contactEmail",value:f.contactEmail,onChange:B,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Store Description"}),e.jsx("textarea",{name:"description",value:f.description,onChange:B,rows:3,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Country"}),e.jsxs("div",{className:`w-full px-4 py-2 border rounded-lg flex items-center gap-2 \${
                        isDarkMode 
                          ? 'bg-gray-700 border-gray-600 text-gray-200' 
                          : 'bg-gray-50 border-gray-200 text-gray-700'
                      }`,children:[f.country?.code&&e.jsx(sr,{countryCode:f.country.code,svg:!0,style:{width:"1.5em",height:"1.5em"}}),e.jsx("span",{className:`${t?"text-gray-200":"text-gray-700"}`,children:f.country?.name||"Country not set"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"City"}),e.jsx("input",{type:"text",name:"city",value:f.city,onChange:B,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Postal Code"}),e.jsx("input",{type:"text",name:"postalCode",value:f.postalCode,onChange:B,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Shipping Fee (USD)"}),e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",name:"shippingFee",min:"0",step:"0.01",value:f.shippingFee,onChange:B,className:`w-full pl-8 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"0.00"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This fee will be added to all orders from your store"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:!E,className:`px-6 py-2 rounded-lg transition-colors ${E?"bg-[#FF1B6B] text-white hover:bg-[#D4145A]":`${t?"bg-gray-700 text-gray-500":"bg-gray-200 text-gray-500"} cursor-not-allowed`}`,children:"Save Store Settings"})})]}),r==="account"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Wallet Settings"}),e.jsx("div",{className:`${t?"bg-gray-700":"bg-white"} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:"Connected Wallet"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} mt-1`,children:v.walletAddress?`${v.walletAddress.slice(0,6)}...${v.walletAddress.slice(-4)}`:"No wallet connected"})]}),e.jsx("div",{className:"flex gap-2",children:v.walletAddress?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:V,className:`px-4 py-2 ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} rounded-lg transition-colors text-sm`,children:"Disconnect"}),e.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Change Wallet"})]}):e.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Connect Wallet"})})]})})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Network Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Preferred Network"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{id:"polygon",name:"Polygon",logo:"/polygon.png"},{id:"unichain",name:"Unichain Testnet",logo:"/unichain-logo.png"}].map(k=>e.jsxs("button",{type:"button",disabled:f.preferredNetwork==="polygon"||f.preferredNetwork==="unichain",onClick:()=>{f.preferredNetwork!=="polygon"&&f.preferredNetwork!=="unichain"&&(c(k),o(!0))},className:`p-4 border rounded-lg transition-colors flex items-center justify-center gap-2 ${f.preferredNetwork===k.id?`border-[#FF1B6B] ${t?"bg-pink-900/20":"bg-pink-50"}`:f.preferredNetwork==="polygon"||f.preferredNetwork==="unichain"?`border-gray-200 opacity-50 cursor-not-allowed ${t?"bg-gray-700":"bg-white"}`:`border-gray-200 hover:border-[#FF1B6B] ${t?"bg-gray-700":"bg-white"}`}`,children:[e.jsx("img",{src:k.logo,alt:`${k.name} logo`,className:"w-6 h-6"}),e.jsx("span",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:k.name})]},k.id))}),d&&m&&e.jsx("div",{className:`mt-4 border border-[#FF1B6B] rounded-lg p-4 ${t?"bg-pink-900/20":"bg-pink-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-[#FF1B6B] mt-1",children:"⚠️"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Confirm Network Selection"}),e.jsxs("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"} mb-4`,children:["Are you sure you want to build your store on ",m.name,"? This is a one-time choice and all your products and transactions will only operate on this network."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{o(!1),c(null)},className:`px-4 py-2 text-sm ${t?"text-gray-300 hover:text-gray-100":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:()=>{N(k=>({...k,preferredNetwork:m.id})),$e(ge(ae,"sellers",a.sellerId),{preferredNetwork:m.id,updatedAt:new Date}),M.success(`Your store has been permanently set to operate on ${m.name} network`,{style:{background:"#FF1B6B",color:"#fff",padding:"16px",borderRadius:"10px"},iconTheme:{primary:"#fff",secondary:"#FF1B6B"},duration:5e3}),o(!1),c(null)},className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Confirm Selection"})]})]})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:`text-sm ${t?"text-gray-200":"text-gray-500"}`,children:f.preferredNetwork?`Your store operates on ${f.preferredNetwork==="polygon"?"Polygon":"Unichain Testnet"} network.`:"Select the network you want to build your store on. This is a one-time choice and cannot be changed later."}),!f.preferredNetwork&&e.jsx("p",{className:"mt-2 text-sm text-[#FF1B6B]",children:"⚠️ Warning: Once you select a network, you cannot change it later. All your products and transactions will operate only on the selected network."})]})]})]})]}),r==="security"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Security Settings"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Security settings coming soon"})]})]}):e.jsxs(e.Fragment,{children:[r==="profile"&&e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Wallet"}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:"Connected Wallet"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} mt-1`,children:u.walletAddress?`${u.walletAddress.slice(0,6)}...${u.walletAddress.slice(-4)}`:"No wallet connected"})]}),e.jsx("div",{className:"flex gap-2",children:u.walletAddress?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:V,className:`px-4 py-2 ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} rounded-lg transition-colors text-sm`,children:"Disconnect"}),e.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Change Wallet"})]}):e.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Connect Wallet"})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",value:u.fullName,onChange:I,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Email"}),e.jsx("input",{type:"email",name:"email",value:u.email,onChange:I,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:u.phoneNumber,onChange:I,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Your phone number"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:!g,className:`w-full px-4 py-2 rounded-lg transition-colors ${g?"bg-[#FF1B6B] text-white hover:bg-[#D4145A]":`${t?"bg-gray-700 text-gray-500":"bg-gray-200 text-gray-500"} cursor-not-allowed`}`,children:"Save Profile"})})]}),r==="shipping"&&e.jsxs("form",{onSubmit:O,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Street Address"}),e.jsx("input",{type:"text",name:"shippingAddress.street",value:u.shippingAddress.street,onChange:I,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"City"}),e.jsx("input",{type:"text",name:"shippingAddress.city",value:u.shippingAddress.city,onChange:I,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"State/Province"}),e.jsx("input",{type:"text",name:"shippingAddress.state",value:u.shippingAddress.state,onChange:I,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Country"}),e.jsx(eo,{options:L,styles:S,onChange:A,required:!0,placeholder:"Select country",className:"country-select",value:u.shippingAddress.country?.code?L.find(k=>k.value===u.shippingAddress.country.code):null})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Postal Code"}),e.jsx("input",{type:"text",name:"shippingAddress.postalCode",value:u.shippingAddress.postalCode,onChange:I,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:!g,className:`w-full px-4 py-2 rounded-lg transition-colors ${g?"bg-[#FF1B6B] text-white hover:bg-[#D4145A]":`${t?"bg-gray-700 text-gray-500":"bg-gray-200 text-gray-500"} cursor-not-allowed`}`,children:"Save Shipping Address"})})]}),r==="security"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Security Settings"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Security settings coming soon"})]})]})})]})},nl=({endsAt:a})=>{const[t,s]=i.useState("");return i.useEffect(()=>{const n=()=>{const l=new Date().getTime(),o=new Date(a).getTime()-l;if(o<=0)return"Ended";const m=Math.floor(o/(1e3*60*60*24)),c=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),u=Math.floor(o%(1e3*60*60)/(1e3*60)),x=Math.floor(o%(1e3*60)/1e3);return m>0?`${m}d ${c}h`:c>0?`${c}h ${u}m`:u>0?`${u}m ${x}s`:`${x}s`};s(n());const r=setInterval(()=>{const l=n();s(l),l==="Ended"&&clearInterval(r)},1e3);return()=>clearInterval(r)},[a]),e.jsx("span",{className:"font-medium",children:t})},Yg=({products:a})=>{const[t,s]=i.useState(0),n=a.filter(r=>r.hasDiscount&&r.discountEndsAt&&new Date(r.discountEndsAt)>new Date).sort((r,l)=>new Date(r.discountEndsAt)-new Date(l.discountEndsAt));return i.useEffect(()=>{if(n.length<=4)return;const r=setInterval(()=>{s(l=>{const d=l+4;return d>=n.length?0:d})},5e3);return()=>clearInterval(r)},[n.length]),n.length===0?null:e.jsxs("div",{className:"bg-gradient-to-r from-pink-500/5 via-pink-500/10 to-purple-500/5 rounded-2xl p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[#FF1B6B] text-white rounded-full",children:[e.jsx(ro,{className:"text-xl animate-pulse"}),e.jsx("span",{className:"font-bold",children:"HOT DEALS"})]}),e.jsx("div",{className:"h-[2px] flex-1 bg-gradient-to-r from-pink-500/20 to-transparent rounded-full"})]}),e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx(Ze,{initial:!1,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:n.slice(t,t+4).map((r,l)=>e.jsx(R.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.5,delay:l*.1},className:"group",children:e.jsxs(Ge,{to:`/merch-store/product/${r.id}`,className:"block bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-pink-500/0 via-pink-500/10 to-purple-500/0 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"aspect-[4/3] relative overflow-hidden",children:[e.jsx("img",{src:r.images[0],alt:r.name,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 p-3 bg-gradient-to-b from-black/50 to-transparent",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-[#FF1B6B] text-white rounded-full text-sm font-bold",children:e.jsxs("span",{children:[r.discountPercent,"% OFF"]})}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-black/50 backdrop-blur-sm text-white rounded-full text-sm",children:[e.jsx(hs,{className:"text-base animate-pulse"}),e.jsx(nl,{endsAt:r.discountEndsAt})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/50 to-transparent",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium line-clamp-1",children:r.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("span",{className:"text-[#FF1B6B] font-bold",children:["$",r.discountedPrice.toFixed(2)]}),e.jsxs("span",{className:"text-gray-300 text-sm line-through",children:["$",r.price.toFixed(2)]})]}),e.jsx("img",{src:r.tokenLogo,alt:r.acceptedToken,className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-white/10 backdrop-blur-sm rounded-full",children:[e.jsx("img",{src:r.network==="polygon"?"/polygon.png":"/unichain-logo.png",alt:r.network,className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium text-white capitalize",children:r.network})]})]})})]})]})},r.id))})}),n.length>4&&e.jsx("div",{className:"flex justify-center gap-2 mt-4",children:Array.from({length:Math.ceil(n.length/4)}).map((r,l)=>e.jsx("button",{onClick:()=>s(l*4),className:`w-2 h-2 rounded-full transition-all duration-300 ${Math.floor(t/4)===l?"bg-[#FF1B6B] w-4":"bg-gray-300 hover:bg-gray-400"}`},l))})]})]})},Ss=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-100"} rounded-lg`,animate:{opacity:[.3,.6,.3],scale:[.98,1,.98]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})},Qg=({images:a})=>{const[t,s]=i.useState(0);return i.useEffect(()=>{if(a.length<=1)return;const n=setInterval(()=>{s(r=>(r+1)%a.length)},3e3);return()=>clearInterval(n)},[a]),e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[e.jsx(Ze,{initial:!1,children:e.jsx(R.img,{src:a[t],alt:"Product",className:"absolute w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}},t)}),a.length>1&&e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:a.map((n,r)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${r===t?"bg-white":"bg-white/50"}`},r))})]})},Xg=()=>e.jsxs("div",{className:"max-w-7xl mx-auto p-4 space-y-6",children:[e.jsxs(R.div,{className:"flex items-center justify-between gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"w-full h-12",children:e.jsx(Ss,{})})}),e.jsx("div",{className:"w-32 h-12",children:e.jsx(Ss,{})})]}),e.jsx(R.div,{className:"flex gap-2 overflow-x-auto pb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[1,2,3,4,5].map(a=>e.jsx(R.div,{className:"w-24 h-8 flex-shrink-0",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:a*.05},children:e.jsx(Ss,{})},a))}),e.jsx(R.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:[1,2,3,4,5,6,7,8,9,10].map(a=>e.jsxs(R.div,{className:"bg-white rounded-lg shadow-sm overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:a*.05},children:[e.jsx("div",{className:"aspect-square",children:e.jsx(Ss,{})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-4",children:e.jsx(Ss,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(Ss,{})}),e.jsx("div",{className:"w-1/3 h-4",children:e.jsx(Ss,{})})]})]},a))})]}),Zg=({endsAt:a})=>{const[t,s]=i.useState("");return i.useEffect(()=>{const n=()=>{const l=new Date().getTime(),o=new Date(a).getTime()-l;if(o<=0)return"Ended";const m=Math.floor(o/(1e3*60*60*24)),c=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),u=Math.floor(o%(1e3*60*60)/(1e3*60)),x=Math.floor(o%(1e3*60)/1e3);let f="";return m>0?f=`${m}d ${c}h ${u}m`:c>0?f=`${c}h ${u}m ${x}s`:u>0?f=`${u}m ${x}s`:f=`${x}s`,f};s(n());const r=setInterval(()=>{const l=n();s(l),l==="Ended"&&clearInterval(r)},1e3);return()=>clearInterval(r)},[a]),e.jsx("span",{className:"font-mono text-lg sm:text-xl font-bold text-[#FF1B6B]",children:t})},Jg=({product:a})=>{const{isDarkMode:t}=Se(),[s,n]=i.useState(0),[r,l]=i.useState(0);return i.useEffect(()=>{(async()=>{try{const o=be(ae,"reviews"),m=Te(o,fe("productId","==",a.id)),c=await Ae(m);let u=0;c.forEach(f=>{u+=f.data().rating});const x=c.size>0?u/c.size:0;n(x),l(c.size)}catch(o){console.error("Error fetching reviews:",o)}})()},[a.id]),e.jsx(R.div,{className:`${t?"bg-gray-800 hover:bg-gray-750":"bg-white hover:bg-gray-50"} rounded-lg shadow-sm overflow-hidden group transition-colors`,whileHover:{y:-3},children:e.jsxs(Ge,{to:`/merch-store/product/${a.id}`,children:[e.jsx("div",{className:"aspect-square relative overflow-hidden",children:e.jsx(Qg,{images:a.images})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:`font-medium ${t?"text-gray-100":"text-gray-800"} mb-1 truncate`,children:a.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:a.tokenLogo,alt:a.acceptedToken,className:"w-4 h-4"}),e.jsx("div",{className:"flex items-center gap-1",children:a.hasDiscount?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-[#FF1B6B] font-medium text-sm",children:["$",a.discountedPrice.toFixed(2)]}),e.jsxs("p",{className:`${t?"text-gray-500":"text-gray-400"} text-xs line-through`,children:["$",a.price.toFixed(2)]})]}):e.jsxs("p",{className:"text-[#FF1B6B] font-medium text-sm",children:["$",a.price.toFixed(2)]})})]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full ${t?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx("img",{src:a.network==="polygon"?"/polygon.png":"/unichain-logo.png",alt:a.network,className:"w-4 h-4"}),e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-300":"text-gray-600"} capitalize`,children:a.network})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["by ",a.sellerName]}),a.isSellerVerified&&e.jsxs("div",{className:"group relative inline-flex items-center",children:[e.jsx(Qt,{className:"!w-[10px] !h-[10px] min-w-[10px] min-h-[10px]"}),e.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-1 py-0.5 ${t?"bg-gray-700":"bg-gray-900"} text-white text-[8px] rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10`,children:"Verified Store"})]})]}),e.jsx("p",{className:`text-xs font-medium ${a.quantity>10?"text-green-500":a.quantity>0?"text-orange-500":"text-red-500"}`,children:a.quantity>10?"In Stock":a.quantity>0?`Only ${a.quantity} left`:"Out of Stock"})]}),e.jsxs("div",{className:`flex items-center gap-1 mt-2 pt-2 border-t ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx(wd,{className:"text-[#FF1B6B] text-base"}),e.jsx("span",{className:`text-sm font-medium ${t?"text-gray-200":"text-gray-700"}`,children:s?s.toFixed(1):"New"}),r>0&&e.jsxs("span",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["(",r,")"]})]})]})]})})},Kg=({products:a})=>{const{isDarkMode:t}=Se(),s=()=>{let l=0,d=null;return a.forEach(o=>{if(o.hasDiscount&&o.discountEndsAt){const m=o.discountPercent;m>l&&(l=m);const c=new Date(o.discountEndsAt);(!d||c>d)&&(d=c)}}),{maxDiscount:l,latestEndTime:d}},{maxDiscount:n,latestEndTime:r}=s();return!n||!r?null:e.jsxs("div",{className:`${t?"bg-gradient-to-r from-pink-950/20 via-pink-900/30 to-purple-950/20":"bg-gradient-to-r from-pink-500/5 via-pink-500/10 to-purple-500/5"} rounded-2xl p-6 mb-6 overflow-hidden relative`,children:[e.jsx("div",{className:"flex items-center gap-2 justify-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[#FF1B6B] text-white rounded-full shadow-lg",children:[e.jsx(ro,{className:"text-xl animate-pulse"}),e.jsx("span",{className:"font-bold",children:"Flash Sale · Limited time offer"})]})}),e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-2xl font-bold tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"UP TO"}),e.jsx("p",{className:"text-5xl sm:text-6xl font-bold tracking-tight",children:e.jsxs("span",{className:"text-[#FF1B6B]",children:[n,"% OFF"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[e.jsx("span",{className:`text-lg font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Offer ends in:"}),e.jsxs("div",{className:`flex items-center gap-2 ${t?"bg-gray-800/80":"bg-white/80"} px-4 py-2 rounded-lg shadow-sm`,children:[e.jsx(hs,{className:"text-xl text-[#FF1B6B] animate-pulse"}),e.jsx(Zg,{endsAt:r})]})]})]})]})},eh=()=>{const{isDarkMode:a}=Se(),[t,s]=i.useState(!0),[n,r]=i.useState([]),[l,d]=i.useState(""),[o,m]=i.useState("all"),[c,u]=i.useState("latest"),[x,f]=i.useState("all");i.useState(!1);const[N,v]=i.useState(!1),[C,E]=i.useState(!1),w=i.useRef(null),p=i.useRef(null),y=[{value:"latest",label:"Latest"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}],g={"Men's Wear":[{name:"T-Shirts",icon:e.jsx(Dn,{className:"text-lg"})},{name:"Shirts",icon:e.jsx(Mn,{className:"text-lg"})},{name:"Pants",icon:e.jsx(Pn,{className:"text-lg"})},{name:"Hoodies",icon:e.jsx(Sd,{className:"text-lg"})},{name:"Jackets",icon:e.jsx($n,{className:"text-lg"})},{name:"Suits",icon:e.jsx(Fd,{className:"text-lg"})}],"Women's Wear":[{name:"Dresses",icon:e.jsx(Ed,{className:"text-lg"})},{name:"Tops",icon:e.jsx(Dn,{className:"text-lg"})},{name:"Skirts",icon:e.jsx(Ad,{className:"text-lg"})},{name:"Pants",icon:e.jsx(Pn,{className:"text-lg"})},{name:"Blouses",icon:e.jsx(Mn,{className:"text-lg"})},{name:"Jackets",icon:e.jsx($n,{className:"text-lg"})}],Footwear:[{name:"Sneakers",icon:e.jsx(Id,{className:"text-lg"})},{name:"Formal Shoes",icon:e.jsx("span",{className:"text-lg text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:"👞"})},{name:"Boots",icon:e.jsx(Bd,{className:"text-lg"})},{name:"Sandals",icon:e.jsx(Dd,{className:"text-lg"})},{name:"Slippers",icon:e.jsx("span",{className:"text-lg text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:"🥿"})}]},j={"Fashion Accessories":[{name:"Bags",icon:e.jsx(Bn,{className:"text-lg"})},{name:"Belts",icon:e.jsx(Md,{className:"text-lg"})},{name:"Hats",icon:e.jsx(Pd,{className:"text-lg"})},{name:"Scarves",icon:e.jsx("span",{className:"text-lg text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:"🧣"})},{name:"Jewelry",icon:e.jsx($d,{className:"text-lg"})}],"Tech Accessories":[{name:"Phone Cases",icon:e.jsx(Ld,{className:"text-lg"})},{name:"Laptop Bags",icon:e.jsx(Rd,{className:"text-lg"})},{name:"Headphone Cases",icon:e.jsx(Od,{className:"text-lg"})},{name:"Tablet Covers",icon:e.jsx(_d,{className:"text-lg"})},{name:"Chargers",icon:e.jsx(Ud,{className:"text-lg"})}]},T=[{id:"all",name:"All Categories",icon:e.jsx(jd,{className:"text-xl"})},{id:"clothing",name:"Clothing",icon:e.jsx(vd,{className:"text-xl"}),subcategories:g},{id:"accessories",name:"Accessories",icon:e.jsx(Bn,{className:"text-xl"}),subcategories:j},{id:"electronics",name:"Electronics",icon:e.jsx(Nd,{className:"text-xl"})},{id:"home",name:"Home",icon:e.jsx(kd,{className:"text-xl"})},{id:"art",name:"Art",icon:e.jsx(Td,{className:"text-xl"})},{id:"collectibles",name:"Collectibles",icon:e.jsx(Cd,{className:"text-xl"})}],b=[{value:"all",label:"All Networks"},{value:"polygon",label:"Polygon"},{value:"unichain",label:"Unichain"}];i.useEffect(()=>{$()},[o,c,x]);const $=async()=>{try{s(!0);let h=be(ae,"products");const I=[fe("status","==","active")];if(o!=="all")if(o.includes("-")){const[B,k,D]=o.split("-");I.push(fe("category","==",B)),I.push(fe("subCategory","==",`${k} - ${D}`))}else I.push(fe("category","==",o));x!=="all"&&I.push(fe("network","==",x)),c==="latest"?I.push(Ue("createdAt","desc")):c==="price_low"?I.push(Ue("price","asc")):c==="price_high"&&I.push(Ue("price","desc")),h=Te(h,...I,Ht(50));const O=await Ae(h),F=[...new Set(O.docs.map(B=>B.data().sellerId))],U=await Ae(Te(be(ae,"sellers"),fe("__name__","in",F))),V={};U.docs.forEach(B=>{V[B.id]=B.data().verificationStatus==="approved"});const P=O.docs.map(B=>{const k=B.data();return{id:B.id,...k,isSellerVerified:V[k.sellerId]||!1}});r(P)}catch(h){console.error("Error fetching products:",h),M.error("Failed to load products")}finally{s(!1)}},L=n.filter(h=>h.name.toLowerCase().includes(l.toLowerCase())||h.description.toLowerCase().includes(l.toLowerCase())),S={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},A={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return t?e.jsx(Xg,{}):e.jsxs(R.div,{className:`max-w-7xl mx-auto p-4 ${a?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:S,children:[e.jsxs(R.div,{variants:A,className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:`px-4 py-3 ${a?"bg-gray-800 border-gray-700 hover:bg-gray-700":"bg-white border-gray-200 hover:bg-gray-50"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors min-w-[160px] text-left flex items-center gap-2`,children:[e.jsx(to,{className:`text-xl ${a?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`${a?"text-gray-200":"text-gray-700"}`,children:T.find(h=>h.id===o)?.name||"All Categories"}),e.jsx("svg",{className:`w-5 h-5 ${a?"text-gray-400":"text-gray-500"} ml-auto transition-transform group-hover:rotate-180`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:`absolute left-0 top-full mt-1 w-[280px] ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-lg shadow-lg border z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200`,children:T.map(h=>e.jsxs("div",{className:"group/item",children:[e.jsxs("button",{onClick:()=>{m(h.id)},className:`w-full px-4 py-2 text-left ${a?"hover:bg-gray-700 text-gray-200 hover:text-[#FF1B6B]":"hover:bg-pink-50 text-gray-700 hover:text-[#FF1B6B]"} flex items-center gap-3`,children:[e.jsx("span",{className:`${a?"text-gray-400":"text-gray-500"} group-hover/item:text-[#FF1B6B] transition-colors`,children:h.icon}),e.jsx("span",{children:h.name}),h.subcategories&&e.jsx("svg",{className:`w-4 h-4 ${a?"text-gray-400":"text-gray-500"} ml-auto`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),h.subcategories&&e.jsx("div",{className:`absolute left-[279px] top-0 w-[280px] ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-lg shadow-lg border invisible opacity-0 group-hover/item:visible group-hover/item:opacity-100 transition-all duration-200`,children:Object.entries(h.subcategories).map(([I,O])=>e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:`px-2 py-1 text-sm font-medium ${a?"text-gray-200":"text-gray-900"}`,children:I}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:O.map(F=>e.jsxs("button",{onClick:()=>{m(`${h.id}-${I}-${F.name}`)},className:`px-2 py-1 text-sm ${a?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-pink-50"} hover:text-[#FF1B6B] rounded text-left flex items-center gap-2`,children:[e.jsx("span",{className:"text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:F.icon}),e.jsx("span",{children:F.name})]},F.name))})]},I))})]},h.id))})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Search products...",value:l,onChange:h=>d(h.target.value),className:`w-full pl-12 pr-4 py-3 ${a?"bg-gray-800 border-gray-700 text-gray-200 placeholder-gray-400":"bg-white border-gray-200 text-gray-900 placeholder-gray-400"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors`}),e.jsx(nn,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",ref:w,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[e.jsxs("button",{type:"button",className:`px-4 py-3 ${a?"bg-gray-800 border-gray-700 hover:bg-gray-700":"bg-white border-gray-200 hover:bg-gray-50"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors min-w-[160px] text-left flex items-center justify-between`,children:[e.jsx("span",{className:a?"text-gray-200":"text-gray-700",children:b.find(h=>h.value===x)?.label||"All Networks"}),e.jsx("svg",{className:`w-5 h-5 ${a?"text-gray-400":"text-gray-500"} transition-transform ${N?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),N&&e.jsx("div",{className:`absolute z-10 w-full mt-1 ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-lg border`,children:b.map(h=>e.jsx("button",{onClick:()=>f(h.value),className:`w-full px-4 py-2 text-left ${x===h.value?"bg-pink-50 text-[#FF1B6B]":a?"text-gray-200 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"} first:rounded-t-lg last:rounded-b-lg`,children:h.label},h.value))})]}),e.jsxs("div",{className:"relative",ref:p,onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),children:[e.jsxs("button",{type:"button",className:`px-4 py-3 ${a?"bg-gray-800 border-gray-700 hover:bg-gray-700":"bg-white border-gray-200 hover:bg-gray-50"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors min-w-[160px] text-left flex items-center justify-between`,children:[e.jsx("span",{className:a?"text-gray-200":"text-gray-700",children:y.find(h=>h.value===c)?.label||"Latest"}),e.jsx("svg",{className:`w-5 h-5 ${a?"text-gray-400":"text-gray-500"} transition-transform ${C?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),C&&e.jsx("div",{className:`absolute z-10 w-full mt-1 ${a?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-lg border`,children:y.map(h=>e.jsx("button",{onClick:()=>u(h.value),className:`w-full px-4 py-2 text-left ${c===h.value?"bg-pink-50 text-[#FF1B6B]":a?"text-gray-200 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"} first:rounded-t-lg last:rounded-b-lg`,children:h.label},h.value))})]})]})]}),e.jsx(R.div,{variants:A,children:e.jsx(Kg,{products:n})}),e.jsx(R.div,{variants:A,children:e.jsx(Yg,{products:n})}),L.length===0?e.jsx(R.div,{variants:A,className:"text-center py-12",children:e.jsx("p",{className:`${a?"text-gray-400":"text-gray-500"}`,children:"No products found."})}):e.jsx(R.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",variants:S,children:L.map(h=>e.jsx(Jg,{product:h},h.id))})]})},th=({rating:a,setRating:t,isInteractive:s=!0})=>e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(n=>e.jsx("button",{onClick:()=>s&&t(n),className:`${s?"cursor-pointer":"cursor-default"}`,disabled:!s,children:e.jsx(Dt,{className:`w-6 h-6 ${n<=a?"text-[#FF1B6B]":"text-gray-300"}`})},n))}),sh=({isOpen:a,onClose:t,productId:s,onReviewAdded:n})=>{const[r,l]=i.useState(0),[d,o]=i.useState(""),[m,c]=i.useState(null),[u,x]=i.useState(""),[f,N]=i.useState(!1),{user:v}=Ve(),C=w=>{const p=w.target.files[0];if(p){if(p.size>2*1024*1024){M.error("Image must be less than 2MB");return}c(p);const y=new FileReader;y.onloadend=()=>{x(y.result)},y.readAsDataURL(p)}},E=async w=>{if(w.preventDefault(),!r){M.error("Please select a rating");return}N(!0);try{const p=Te(be(ae,"orders"),fe("buyerId","==",v.uid),fe("status","==","delivered")),g=(await Ae(p)).docs.find(A=>A.data().items.some(h=>h.productId===s));if(!g){M.error("You can only review products you have purchased and received"),N(!1);return}const j=await De(ge(ae,"products",s));if(!j.exists()){M.error("Product not found"),N(!1);return}const T=j.data();let b="";if(m){const A=ca(ma,`reviews/${s}/${v.uid}_${Date.now()}`);await ur(A,m),b=await xr(A)}const $={productId:s,userId:v.uid,sellerId:T.sellerId,rating:r,review:d.trim(),image:b,createdAt:new Date,userName:v.displayName||v.email?.split("@")[0]||"Anonymous",productName:T.name,orderDate:g.data().createdAt,verificationStatus:"pending"};await et(be(ae,"reviews"),$);const L=ge(ae,"sellers",T.sellerId),S=await De(L);if(S.exists()){const A=S.data(),h=A.statistics?.rating||0,I=A.statistics?.totalReviews||0,O=(h*I+r)/(I+1);await $e(L,{"statistics.rating":O,"statistics.totalReviews":I+1,updatedAt:new Date})}M.success("Review submitted successfully"),n(),t()}catch(p){console.error("Error submitting review:",p),M.error("Failed to submit review. Please try again.")}finally{N(!1)}};return a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Write a Review"}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:e.jsx(mt,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating"}),e.jsx(th,{rating:r,setRating:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Review"}),e.jsx("textarea",{value:d,onChange:w=>o(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B]",rows:"4",placeholder:"Share your experience with this product..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Add Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden"}),e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[e.jsx(no,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Choose Image"})]})]}),u&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u,alt:"Preview",className:"w-16 h-16 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{c(null),x("")},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:e.jsx(mt,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 rounded-lg",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!r,className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] rounded-lg disabled:opacity-50",children:f?"Submitting...":"Submit Review"})]})]})]})})]}):null},ah=({isOpen:a,onClose:t,imageUrl:s})=>a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 z-50",onClick:t}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"relative max-w-4xl w-full",children:[e.jsx("button",{onClick:t,className:"absolute -top-10 right-0 text-white hover:text-gray-300",children:e.jsx(mt,{className:"w-8 h-8"})}),e.jsx("img",{src:s,alt:"Review",className:"w-full h-auto rounded-lg"})]})})]}):null,rh=({productId:a})=>{const[t,s]=i.useState([]),[n,r]=i.useState(!0),[l,d]=i.useState(!1),{user:o}=Ve(),[m,c]=i.useState(0),[u,x]=i.useState(!1),[f,N]=i.useState(null),[v,C]=i.useState(1),E=10,{isDarkMode:w}=Se(),p=async()=>{try{const $=Te(be(ae,"reviews"),fe("productId","==",a),Ue("createdAt","desc")),S=(await Ae($)).docs.map(A=>({id:A.id,...A.data(),createdAt:A.data().createdAt?.toDate()}));if(s(S),S.length>0){const A=S.reduce((h,I)=>h+I.rating,0)/S.length;c(A)}if(o){const A=Te(be(ae,"orders"),fe("buyerId","==",o.uid),fe("status","==","delivered")),I=(await Ae(A)).docs.some(F=>F.data().items.some(U=>U.productId===a)),O=S.some(F=>F.userId===o.uid);x(I&&!O)}}catch($){console.error("Error fetching reviews:",$),M.error("Failed to load reviews")}finally{r(!1)}};i.useEffect(()=>{p()},[a,o]);const y=Math.ceil(t.length/E),g=v*E,j=g-E,T=t.slice(j,g),b=$=>{C($),window.scrollTo({top:document.getElementById("reviews-section").offsetTop-100,behavior:"smooth"})};return n?e.jsx("div",{className:"animate-pulse",children:"Loading reviews..."}):e.jsxs("div",{className:"mt-8",id:"reviews-section",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-xl font-bold ${w?"text-gray-100":"text-gray-800"}`,children:"Customer Reviews"}),t.length>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map($=>e.jsx("svg",{className:"w-5 h-5 text-[#FF1B6B]",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},$))}),e.jsx("span",{className:`${w?"text-gray-200":"text-gray-700"} font-medium`,children:m.toFixed(1)}),e.jsxs("span",{className:`${w?"text-gray-400":"text-gray-500"}`,children:["(",t.length," ",t.length===1?"review":"reviews",")"]})]})]}),u&&e.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] rounded-lg",children:"Write a Review"})]}),t.length===0?e.jsx("div",{className:`text-center py-8 ${w?"text-gray-400":"text-gray-500"}`,children:"No reviews yet"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-6",children:T.map($=>e.jsxs("div",{className:`${w?"border-gray-700":"border-gray-200"} border-b pb-6 last:border-b-0 last:pb-0`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`font-medium ${w?"text-gray-200":"text-gray-800"}`,children:$.userName}),e.jsxs("span",{className:`text-sm ${w?"text-gray-400":"text-gray-500"}`,children:["· ",$.createdAt.toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(L=>e.jsx("svg",{className:`w-4 h-4 ${L<=$.rating?"text-[#FF1B6B]":w?"text-gray-600":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},L))})]}),e.jsx("p",{className:`${w?"text-gray-300":"text-gray-600"}`,children:$.review}),$.image&&e.jsx("button",{onClick:()=>N($.image),className:"mt-3 block",children:e.jsx("img",{src:$.image,alt:"Review",className:"rounded-lg w-32 h-32 object-cover hover:opacity-90 transition-opacity"})})]},$.id))}),y>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-8",children:[e.jsx("button",{onClick:()=>b(v-1),disabled:v===1,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),[...Array(y)].map(($,L)=>e.jsx("button",{onClick:()=>b(L+1),className:`w-8 h-8 rounded-lg text-sm font-medium ${v===L+1?"bg-[#FF1B6B] text-white":"text-gray-600 hover:bg-gray-100"}`,children:L+1},L+1)),e.jsx("button",{onClick:()=>b(v+1),disabled:v===y,className:"p-2 rounded-lg hover:bg-gray-100 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),e.jsx(sh,{isOpen:l,onClose:()=>d(!1),productId:a,onReviewAdded:p}),e.jsx(ah,{isOpen:!!f,onClose:()=>N(null),imageUrl:f})]})},xt=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},nh=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:`max-w-7xl mx-auto p-4 ${a?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden",children:e.jsx(xt,{})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(t=>e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden",children:e.jsx(xt,{})},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-3/4 h-8",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-1/2 h-6",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-full h-32",children:e.jsx(xt,{})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-24 h-8",children:e.jsx(xt,{})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-32 h-10",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-full h-12",children:e.jsx(xt,{})})]}),e.jsx("div",{className:"border-t pt-6 mt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:e.jsx(xt,{})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-4",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(xt,{})})]})]})})]})]}),e.jsxs("div",{className:"mt-12 space-y-4",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(xt,{})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"aspect-square",children:e.jsx(xt,{})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-4",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-1/3 h-4",children:e.jsx(xt,{})})]})]},t))})]})]})},ih=()=>{const{id:a}=Os(),t=rt(),{user:s,updateCartCount:n}=Ve(),[r,l]=i.useState(null),{isDarkMode:d}=Se(),[o,m]=i.useState(null),[c,u]=i.useState(1),[x,f]=i.useState(!0),[N,v]=i.useState(0),[C,E]=i.useState([]),[w,p]=i.useState(0),[y,g]=i.useState(""),[j,T]=i.useState(""),[b,$]=i.useState(!1);i.useEffect(()=>{if(!a)return;(async()=>{f(!0);try{const D=await De(ge(ae,"products",a));if(D.exists()){const _={id:D.id,...D.data()};if(l(_),_.sellerId){const H=await De(ge(ae,"sellers",_.sellerId));H.exists()&&m({id:H.id,...H.data()})}L()}}catch(D){console.error("Error fetching product:",D),M.error("Failed to load product details")}finally{f(!1)}})()},[a]),i.useEffect(()=>{if(r){const _=(r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price)*c,H=r.shippingFee||0,X=_+H;p(X)}},[c,r]);const L=async()=>{try{const k=await De(ge(ae,"products",a));if(k.exists()){const D=k.data();let _=Te(be(ae,"products"),fe("sellerId","==",D.sellerId),fe("status","==","active"),Ht(4)),H=await Ae(_),X=H.docs.map(z=>({id:z.id,...z.data()})).filter(z=>z.id!==a);X.length===0&&(_=Te(be(ae,"products"),fe("category","==",D.category),fe("status","==","active"),Ht(4)),H=await Ae(_),X=H.docs.map(z=>({id:z.id,...z.data()})).filter(z=>z.id!==a)),E(X)}}catch(k){console.error("Error fetching similar products:",k)}},S=k=>{if(!j&&r.hasVariants){M.error("Please select a color first");return}const D=r.hasVariants?r.colorQuantities[j]:r.quantity,_=Math.max(1,Math.min(D,c+k));u(_)},A=async()=>{try{if(!s){M.error("Please login to add items to cart"),t("/merch-store/login");return}if(r.category==="clothing"&&r.hasVariants){if(!y){M.error("Please select a size");return}if(!j){M.error("Please select a color");return}}const k=await De(ge(ae,"products",a));if(!k.exists()){M.error("Product not found");return}const D=k.data(),_=r.hasVariants?D.colorQuantities?.[j]||0:D.quantity,H=Te(be(ae,"cart"),fe("userId","==",s.uid),fe("productId","==",a),fe("size","==",y||null),fe("color","==",j||null));if(((await Ae(H)).docs[0]?.data()?.quantity||0)+c>_){M.error(`Sorry, only ${_} items available in ${j||"stock"}`);return}const ee=M.loading("Adding to cart..."),te=be(ae,"cart"),Y=Te(te,fe("userId","==",s.uid),fe("productId","==",a),fe("size","==",y||null),fe("color","==",j||null)),W=await Ae(Y);if(W.empty)await et(te,{userId:s.uid,productId:a,quantity:c,size:y||null,color:j||null,addedAt:We(),price:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price,isDiscounted:r.hasDiscount&&new Date<new Date(r.discountEndsAt),originalPrice:r.price,discountedPrice:r.discountedPrice,discountEndsAt:r.discountEndsAt}),M.dismiss(ee),M.success(`Added ${c} item${c>1?"s":""} to cart`);else{const Q=W.docs[0],G=Q.data().quantity;await $e(ge(ae,"cart",Q.id),{quantity:G+c,price:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price,isDiscounted:r.hasDiscount&&new Date<new Date(r.discountEndsAt),originalPrice:r.price,discountedPrice:r.discountedPrice,discountEndsAt:r.discountEndsAt}),M.dismiss(ee),M.success(`Updated quantity in cart (+${c})`)}await n(s.uid)}catch(k){console.error("Error adding to cart:",k),M.error("Failed to add to cart")}},h=async()=>{try{if(!s){M.error("Please login to purchase items"),t("/merch-store/login");return}if(r.category==="clothing"&&r.hasVariants){if(!y){M.error("Please select a size");return}if(!j){M.error("Please select a color");return}}const k=await De(ge(ae,"products",a));if(!k.exists()){M.error("Product not found");return}const D=k.data(),_=r.hasVariants?D.colorQuantities?.[j]||0:D.quantity;if(c>_){M.error(`Sorry, only ${_} items available in ${j||"stock"}`);return}const H=M.loading("Processing..."),X=Te(be(ae,"cart"),fe("userId","==",s.uid)),se=(await Ae(X)).docs.map(ee=>Us(ee.ref));await Promise.all(se),await et(be(ae,"cart"),{userId:s.uid,productId:a,quantity:c,size:y||null,color:j||null,addedAt:We(),price:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price,isDiscounted:r.hasDiscount&&new Date<new Date(r.discountEndsAt),originalPrice:r.price,discountedPrice:r.discountedPrice,discountEndsAt:r.discountEndsAt}),await n(s.uid),M.dismiss(H),t("/merch-store/checkout"),await B(a,j,c)}catch(k){console.error("Error processing buy now:",k),M.error("Failed to process. Please try again.")}},I=async()=>{if(!s){M.error("Please log in to contact the store");return}try{const k=M.loading("Starting conversation..."),D=Te(be(ae,"conversations"),fe("participants","array-contains",s.uid),fe("sellerId","==",r.sellerId)),_=await Ae(D);let H;if(!_.empty)H=_.docs[0].id,await et(be(ae,"messages"),{conversationId:H,senderId:s.uid,text:"Hi, I'm interested in this product:",timestamp:We(),productCard:{productId:r.id,name:r.name,description:r.description,price:r.price,image:r.images[0]}}),await $e(ge(ae,"conversations",H),{lastMessage:"Hi, I'm interested in this product:",lastMessageTime:We(),[`unreadCount.${r.sellerId}`]:(_.docs[0].data().unreadCount?.[r.sellerId]||0)+1,updatedAt:We()});else{const X=await et(be(ae,"conversations"),{participants:[s.uid,r.sellerId],buyerId:s.uid,sellerId:r.sellerId,buyerName:s.displayName||"Token Factory Shopper",sellerName:r.sellerName,isVerifiedSeller:o?.verificationStatus==="approved",unreadCount:{[r.sellerId]:1,[s.uid]:0},createdAt:We(),updatedAt:We()});H=X.id,await et(be(ae,"messages"),{conversationId:X.id,senderId:s.uid,text:"Hi, I'm interested in this product:",timestamp:We(),productCard:{productId:r.id,name:r.name,description:r.description,price:r.price,image:r.images[0]}}),await $e(X,{lastMessage:"Hi, I'm interested in this product:",lastMessageTime:We()})}M.dismiss(k),M.success("Message sent successfully!"),t(`/merch-store/inbox/${H}`)}catch(k){console.error("Error creating conversation:",k),M.error("Failed to start conversation")}},O={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},F={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},U=()=>{if(!o||!r)return null;const k={sepolia:"11155111",polygon:"137",unichain:"1301"},D=o.preferredNetwork?.toLowerCase(),_=k[D];if(!_)return console.warn("Invalid network name:",D),null;const H=r.acceptedToken,z={11155111:{USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",USDT:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0"},137:{USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F"},1301:{USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"}}[_]?.[H];return z||(console.warn(`No contract address found for token ${H} on network ${_}`),null)},V=async()=>{const k=U();k&&(await navigator.clipboard.writeText(k),$(!0),setTimeout(()=>$(!1),2e3))},P=k=>k?`${k.slice(0,6)}...${k.slice(-4)}`:"",B=async(k,D,_)=>{const H=ge(ae,"products",k),X=await De(H);if(!X.exists())throw new Error("Product not found");const z=X.data();if(z.hasVariants&&D){const se=z.colorQuantities[D]||0,ee=Math.max(0,se-_),te={...z.colorQuantities,[D]:ee},Y=Object.values(te).reduce((W,Q)=>W+Q,0);await $e(H,{colorQuantities:te,quantity:Y})}else{const se=Math.max(0,z.quantity-_);await $e(H,{quantity:se})}};return x?e.jsx(nh,{}):r?e.jsx("div",{className:`container mx-auto px-4 py-8 ${d?"bg-gray-900":"bg-white"}`,children:e.jsxs(R.div,{className:"max-w-6xl mx-auto p-4",initial:"hidden",animate:"visible",variants:O,children:[e.jsxs(R.button,{variants:F,onClick:()=>t(-1),className:`flex items-center gap-2 ${d?"text-gray-300 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mb-6`,children:[e.jsx(la,{className:"text-xl"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs(R.div,{variants:F,className:"space-y-4",children:[e.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden relative",children:[e.jsx("img",{src:r.images[N],alt:r.name,className:"w-full h-full object-cover"}),r.hasDiscount&&new Date<new Date(r.discountEndsAt)&&e.jsxs(R.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute bottom-0 left-0 right-0 bg-[#FF1B6B] text-white px-4 py-2.5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),e.jsxs("span",{className:"font-bold",children:[r.discountPercent,"% OFF"]})]}),e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{children:"·"}),e.jsxs("span",{children:["Ends in ",e.jsx(nl,{endsAt:r.discountEndsAt})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.images.map((k,D)=>e.jsx("button",{onClick:()=>v(D),className:`aspect-square rounded-lg overflow-hidden border-2 transition-colors ${N===D?"border-[#FF1B6B]":"border-transparent hover:border-gray-200"}`,children:e.jsx("img",{src:k,alt:`${r.name} ${D+1}`,className:"w-full h-full object-cover"})},D))})]}),e.jsxs(R.div,{variants:F,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h1",{className:`text-2xl font-bold ${d?"text-gray-100":"text-gray-800"} mb-2`,children:r.name}),o&&e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 ${d?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} rounded-lg border shrink-0`,children:[e.jsx("span",{className:`text-sm font-medium ${d?"text-gray-300":"text-gray-700"}`,children:o.storeName}),o.verificationStatus==="approved"&&e.jsxs("div",{className:"group relative inline-flex items-center",children:[e.jsx(Qt,{className:"!w-[10px] !h-[10px] min-w-[10px] min-h-[10px]"}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-1 py-0.5 bg-gray-900 text-white text-[8px] rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10",children:"Verified Store"})]}),o.country?.code&&e.jsx(sr,{countryCode:o.country.code,svg:!0,style:{width:"1.2em",height:"1.2em"},className:"rounded-sm shadow-sm"})]})]}),e.jsx("p",{className:`${d?"text-gray-300":"text-gray-600"}`,children:r.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:r.tokenLogo,alt:r.acceptedToken,className:"w-6 h-6"}),e.jsx("div",{className:"flex flex-col",children:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-[#FF1B6B]",children:[r.acceptedToken," ",r.discountedPrice.toFixed(2)]}),e.jsxs("span",{className:"text-lg line-through text-gray-400",children:[r.acceptedToken," ",r.price.toFixed(2)]})]}),e.jsxs("div",{className:"text-sm text-[#FF1B6B]",children:["Save ",r.acceptedToken," ",(r.price-r.discountedPrice).toFixed(2)]})]}):e.jsxs("span",{className:"text-2xl font-bold text-[#FF1B6B]",children:[r.acceptedToken," ",r.price.toFixed(2)]})})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg font-medium ${r.quantity>10?d?"bg-green-900/20 text-green-400":"bg-green-100 text-green-700":r.quantity>0?d?"bg-orange-900/20 text-orange-400":"bg-orange-100 text-orange-700":d?"bg-red-900/20 text-red-400":"bg-red-100 text-red-700"}`,children:r.quantity>10?"In Stock":r.quantity>0?`Only ${r.quantity} left`:"Out of Stock"})]}),r.hasVariants&&e.jsxs("div",{className:"space-y-4",children:[r.sizes.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"} block mb-3`,children:"Select Size"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.sizes.map(k=>e.jsx("button",{onClick:()=>g(k),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${y===k?"bg-[#FF1B6B] text-white":d?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:k},k))})]}),r.colors.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"} block mb-3`,children:"Select Color"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.colors.map(k=>{const D=r.colorQuantities[k]>0;return e.jsxs("button",{onClick:()=>T(k),disabled:!D,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${j===k?"bg-[#FF1B6B] text-white":D?d?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200":d?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:k.toLowerCase()}}),e.jsx("span",{children:k}),e.jsxs("span",{className:"text-xs",children:["(",r.colorQuantities[k]||0,")"]})]},k)})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"}`,children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>S(-1),disabled:c<=1,className:"p-1 rounded-full hover:bg-pink-50 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx(sn,{className:"text-xl"})}),e.jsx("span",{className:"w-12 text-center font-medium",children:c}),e.jsx("button",{onClick:()=>S(1),disabled:c>=r.quantity,className:"p-1 rounded-full hover:bg-pink-50 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx(cr,{className:"text-xl"})})]})]}),e.jsxs("div",{className:`${d?"bg-gray-800":"bg-gray-50"} p-4 rounded-lg space-y-2`,children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"}`,children:"Subtotal:"}),e.jsx("div",{className:"text-right",children:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`font-medium ${d?"text-gray-200":"text-gray-900"}`,children:[r.acceptedToken," ",(r.discountedPrice*c).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-400 line-through",children:[r.acceptedToken," ",(r.price*c).toFixed(2)]})]}):e.jsxs("span",{className:`font-medium ${d?"text-gray-200":"text-gray-900"}`,children:[r.acceptedToken," ",(r.price*c).toFixed(2)]})})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"}`,children:"Shipping Fee:"}),e.jsxs("span",{className:`font-medium ${d?"text-gray-200":"text-gray-900"}`,children:[r.acceptedToken," ",(r.shippingFee||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[e.jsx("span",{className:`${d?"text-gray-200":"text-gray-900"}`,children:"Total:"}),e.jsxs("span",{className:"text-[#FF1B6B]",children:[r.acceptedToken," ",w.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:A,className:`flex-1 flex items-center justify-center gap-2 py-3 ${d?"bg-gray-800 text-gray-200 hover:bg-gray-700 hover:text-[#FF1B6B]":"bg-gray-100 text-gray-800 hover:bg-gray-100 hover:text-[#FF1B6B]"} rounded-lg transition-colors`,children:[e.jsx(so,{className:"text-xl"}),"Add to Cart"]}),e.jsxs("button",{onClick:h,className:"flex-1 flex items-center justify-center gap-2 py-3 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:[e.jsx(it,{className:"text-xl"}),"Buy Now"]})]}),e.jsxs("button",{onClick:I,className:`w-full flex items-center justify-center gap-2 py-3 ${d?"bg-gray-800 border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-gray-700":"bg-white border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-pink-50"} rounded-lg transition-colors mt-2`,children:[e.jsx(Ea,{className:"text-xl"}),"Contact Store"]})]}),e.jsxs("div",{className:`border-t ${d?"border-gray-700":"border-gray-200"} pt-6 space-y-6`,children:[e.jsx("h2",{className:`text-xl font-semibold ${d?"text-gray-100":"text-gray-800"} mb-4`,children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:`${d?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"}`,children:"Category"}),e.jsx("span",{className:`${d?"text-gray-100":"text-gray-800"} font-medium`,children:r.category.charAt(0).toUpperCase()+r.category.slice(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"}`,children:"Payment Token"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r.tokenLogo,alt:r.acceptedToken,className:"w-4 h-4"}),e.jsx("span",{className:`${d?"text-gray-100":"text-gray-800"} font-medium`,children:r.acceptedToken})]})]})]})}),e.jsx("div",{className:`${d?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"}`,children:"Token Contract"}),U()&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"px-2 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium",children:o?.preferredNetwork?.toUpperCase()})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`${d?"bg-gray-700":"bg-gray-50"} rounded-lg overflow-hidden`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`px-4 py-2.5 font-mono text-sm ${d?"text-gray-300":"text-gray-700"}`,children:U()?P(U()):"Network or token not configured"}),U()&&e.jsx("button",{onClick:V,className:"px-4 py-2.5 text-gray-400 hover:text-[#FF1B6B] transition-colors",title:"Copy full contract address",children:e.jsx(Wd,{className:`text-lg ${b?"text-[#FF1B6B]":""}`})})]})}),b&&e.jsx("div",{className:"absolute -right-2 top-1/2 -translate-y-1/2 transform translate-x-full",children:e.jsx("span",{className:"bg-[#FF1B6B] text-white text-xs px-2 py-1 rounded",children:"Copied!"})})]}),U()&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-[#FF1B6B]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Copy to acquire ",r.acceptedToken," on ",o?.preferredNetwork?.toLowerCase()==="sepolia"?"Sepolia":o?.preferredNetwork?.toLowerCase()==="polygon"?"Polygon":o?.preferredNetwork?.toLowerCase()==="unichain"?"Unichain":"Unknown"," network"]})]})}),r.category==="clothing"&&r.hasVariants&&e.jsx("div",{className:`${d?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm md:col-span-2`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"} block mb-3`,children:"Available Sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.sizes.map(k=>e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${d?"text-gray-200 bg-gray-700":"text-gray-700 bg-gray-50"}`,children:k},k))})]}),e.jsxs("div",{children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"} block mb-3`,children:"Available Colors"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.colors.map(k=>e.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full ${d?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("span",{className:"w-3 h-3 rounded-full border border-gray-200",style:{backgroundColor:k.toLowerCase()}}),e.jsx("span",{className:`text-sm font-medium ${d?"text-gray-200":"text-gray-700"}`,children:k})]},k))})]})]})})]})]}),e.jsxs("div",{className:`border-t ${d?"border-gray-700":"border-gray-200"} pt-6 mt-6`,children:[e.jsx("h3",{className:`text-xl font-semibold ${d?"text-gray-100":"text-gray-800"} mb-4`,children:"Shipping Details"}),e.jsxs("div",{className:`${d?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm space-y-4`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${d?"text-gray-300":"text-gray-600"}`,children:"Shipping Fee"}),e.jsxs("span",{className:"font-medium text-[#FF1B6B]",children:["$",r.shippingFee?.toFixed(2)||"0.00"]})]}),r.shippingInfo&&e.jsxs("div",{className:`pt-4 border-t ${d?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h4",{className:`text-sm font-medium ${d?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Information"}),e.jsx("p",{className:`text-sm ${d?"text-gray-400":"text-gray-600"} leading-relaxed`,children:r.shippingInfo})]})]})]})]})]}),C.length>0&&e.jsxs(R.div,{variants:F,className:`mt-12 border-t ${d?"border-gray-700":"border-gray-200"} pt-8`,children:[e.jsx("h2",{className:`text-xl font-bold ${d?"text-gray-100":"text-gray-800"} mb-2`,children:C[0].sellerId===r.sellerId?`More from ${r.sellerName}`:"Similar Products"}),e.jsx("p",{className:`${d?"text-gray-400":"text-gray-500"} text-sm mb-6`,children:C[0].sellerId===r.sellerId?"Check out other items from this store":"You might also like these products"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:C.map(k=>e.jsx(R.div,{className:`${d?"bg-gray-800":"bg-white"} rounded-lg shadow-sm overflow-hidden group`,whileHover:{y:-3},children:e.jsxs("button",{onClick:()=>{t(`/merch-store/product/${k.id}`),window.scrollTo(0,0)},className:"w-full text-left",children:[e.jsx("div",{className:"aspect-square relative overflow-hidden",children:e.jsx("img",{src:k.images[0],alt:k.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:`font-medium ${d?"text-gray-200":"text-gray-800"} mb-1 truncate`,children:k.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:k.tokenLogo,alt:k.acceptedToken,className:"w-4 h-4"}),e.jsxs("p",{className:"text-[#FF1B6B] font-medium",children:["$",k.price.toFixed(2)]})]}),e.jsxs("p",{className:`text-xs ${d?"text-gray-400":"text-gray-500"} mt-1`,children:["by ",k.sellerName]})]})]})},k.id))})]}),e.jsx(R.div,{variants:F,className:`mt-12 border-t ${d?"border-gray-700":"border-gray-200"} pt-8`,children:e.jsx("div",{className:`${d?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsx(rh,{productId:a})})})]})}):e.jsx("div",{className:`min-h-screen ${d?"bg-gray-900":"bg-gray-50"} flex items-center justify-center`,children:e.jsx("div",{className:`${d?"text-gray-400":"text-gray-500"}`,children:"Product not found"})})},yt=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},oh=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:`max-w-7xl mx-auto p-4 ${a?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-32 h-8",children:e.jsx(yt,{})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:[1,2,3].map(t=>e.jsx("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx(yt,{})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-5",children:e.jsx(yt,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(yt,{})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"w-32 h-8",children:e.jsx(yt,{})}),e.jsx("div",{className:"w-24 h-8",children:e.jsx(yt,{})})]})]})]})},t))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6 space-y-4`,children:[e.jsx("div",{className:"w-40 h-6",children:e.jsx(yt,{})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(yt,{})}),e.jsx("div",{className:"w-20 h-4",children:e.jsx(yt,{})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(yt,{})}),e.jsx("div",{className:"w-20 h-4",children:e.jsx(yt,{})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(yt,{})}),e.jsx("div",{className:"w-20 h-4",children:e.jsx(yt,{})})]})]}),e.jsx("div",{className:`border-t ${a?"border-gray-700":"border-gray-200"} pt-4 mt-4`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-32 h-6",children:e.jsx(yt,{})}),e.jsx("div",{className:"w-28 h-6",children:e.jsx(yt,{})})]})}),e.jsx("div",{className:"w-full h-12 mt-6",children:e.jsx(yt,{})})]})})]})]})},lh=()=>{const{user:a,updateCartCount:t}=Ve(),{isDarkMode:s}=Se(),[n,r]=i.useState(!0),[l,d]=i.useState([]),[o,m]=i.useState(2.5),c=rt();i.useEffect(()=>{x(),u()},[a]);const u=async()=>{try{const p=await De(ge(ae,"settings","platform"));if(p.exists()){const y=p.data();m(y.platformFee||2.5)}}catch(p){console.error("Error fetching platform fee:",p),m(2.5)}},x=async()=>{try{const p=Te(be(ae,"cart"),fe("userId","==",a.uid)),y=await Ae(p),g=[];for(const j of y.docs){const T=j.data(),b=await De(ge(ae,"products",T.productId));if(b.exists()){const $=b.data();g.push({id:j.id,quantity:T.quantity,product:{id:b.id,...$}})}}d(g)}catch(p){console.error("Error fetching cart items:",p),M.error("Failed to load cart items")}finally{r(!1)}},f=async(p,y)=>{try{const g=ge(ae,"cart",p),j=l.find($=>$.id===p),T=await De(ge(ae,"products",j.product.id));if(!T.exists()){M.error("Product not found");return}const b=T.data().quantity;if(y>b){M.error(`Sorry, only ${b} items available in stock`);return}await $e(g,{quantity:y}),d($=>$.map(L=>L.id===p?{...L,quantity:y}:L))}catch(g){console.error("Error updating quantity:",g),M.error("Failed to update quantity")}},N=async p=>{try{await Us(ge(ae,"cart",p)),d(y=>y.filter(g=>g.id!==p)),await t(a.uid),M.success("Item removed from cart")}catch(y){console.error("Error removing item:",y),M.error("Failed to remove item")}},v=()=>l.reduce((p,y)=>{const j=y.product.hasDiscount&&new Date<new Date(y.product.discountEndsAt)?y.product.discountedPrice:y.product.price;return p+j*y.quantity},0),C=()=>{if(l.length===0){M.error("Your cart is empty");return}c("/merch-store/checkout")},E={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},w={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return n?e.jsx(oh,{}):e.jsxs(R.div,{className:`max-w-4xl mx-auto p-4 space-y-6 ${s?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:E,children:[e.jsx(R.h1,{variants:w,className:`text-2xl font-bold ${s?"text-gray-100":"text-gray-800"}`,children:"Shopping Cart"}),l.length===0?e.jsxs(R.div,{variants:w,className:`text-center py-12 ${s?"bg-gray-800":"bg-white"} rounded-lg`,children:[e.jsx("p",{className:`${s?"text-gray-400":"text-gray-500"} mb-4`,children:"Your cart is empty"}),e.jsx(Ge,{to:"/merch-store",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Continue Shopping"})]}):e.jsxs(e.Fragment,{children:[e.jsx(R.div,{variants:E,className:"space-y-4",children:l.map(p=>e.jsxs(R.div,{variants:w,className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-4 flex gap-4 items-center`,children:[e.jsx(Ge,{to:`/merch-store/product/${p.product.id}`,className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:p.product.images[0],alt:p.product.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Ge,{to:`/merch-store/product/${p.product.id}`,className:`font-medium ${s?"text-gray-100 hover:text-[#FF1B6B]":"text-gray-800 hover:text-[#FF1B6B]"}`,children:p.product.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("img",{src:p.product.tokenLogo,alt:p.product.acceptedToken,className:"w-4 h-4"}),e.jsx("span",{className:"text-[#FF1B6B] font-medium",children:p.product.hasDiscount&&new Date<new Date(p.product.discountEndsAt)?e.jsxs(e.Fragment,{children:["$",p.product.discountedPrice.toFixed(2),e.jsxs("span",{className:`text-sm ${s?"text-gray-500":"text-gray-400"} line-through ml-1`,children:["$",p.product.price.toFixed(2)]})]}):`$${p.product.price.toFixed(2)}`})]}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-500"} mt-1`,children:["Sold by ",p.product.sellerName]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>f(p.id,p.quantity-1),className:`p-1 rounded-full ${s?"hover:bg-gray-700":"hover:bg-gray-100"} ${s?"text-gray-300":"text-gray-600"}`,disabled:p.quantity<=1,children:e.jsx(sn,{className:"text-lg"})}),e.jsx("span",{className:`w-8 text-center ${s?"text-gray-300":"text-gray-600"}`,children:p.quantity}),e.jsx("button",{onClick:()=>f(p.id,p.quantity+1),className:`p-1 rounded-full ${s?"hover:bg-gray-700":"hover:bg-gray-100"} ${s?"text-gray-300":"text-gray-600"}`,disabled:p.quantity>=p.product.quantity,children:e.jsx(cr,{className:"text-lg"})})]}),e.jsx("button",{onClick:()=>N(p.id),className:`p-2 ${s?"text-gray-500 hover:text-red-400":"text-gray-400 hover:text-red-500"} transition-colors`,children:e.jsx(Ls,{className:"text-xl"})})]})]},p.id))}),e.jsxs(R.div,{variants:w,className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-6 space-y-4`,children:[e.jsx("h2",{className:`font-bold ${s?"text-gray-100":"text-gray-800"}`,children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Subtotal"}),e.jsxs("span",{className:`${s?"text-gray-300":"text-gray-600"}`,children:["$",v().toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-bold ${s?"text-gray-100":"text-gray-800"} pt-2 border-t ${s?"border-gray-700":"border-gray-200"}`,children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",v().toFixed(2)]})]})]}),e.jsx("button",{onClick:C,className:"w-full py-3 bg-[#FF1B6B] text-white rounded-lg font-medium hover:bg-[#D4145A] transition-colors",children:"Proceed to Checkout"})]})]})]})},dh=({isOpen:a,onClose:t,trackingNumber:s,carrier:n})=>{const[r,l]=i.useState(!1);return i.useEffect(()=>{const d={log:console.log,warn:console.warn,error:console.error},o=m=>(...c)=>{c.some(x=>typeof x=="string"&&x.includes("Error initializing tracking widget:"))&&d[m](...c)};return console.log=o("log"),console.warn=o("warn"),console.error=o("error"),()=>{console.log=d.log,console.warn=d.warn,console.error=d.error}},[]),i.useEffect(()=>{if(!a)return;const d=document.getElementById("tracking-container");if(!d)return;const o=()=>{try{d.innerHTML="";const c=document.createElement("div");c.id="YQContainer",c.className="rounded-lg border border-pink-100 shadow-sm",d.appendChild(c),window.YQV5&&(window.YQV5.trackSingle({YQ_ContainerId:"YQContainer",YQ_Height:560,YQ_Fc:n||"0",YQ_Lang:"en",YQ_Num:s}),l(!0))}catch(c){console.error("Error initializing tracking widget:",c)}};if(!document.getElementById("YQScript")){const c=document.createElement("script");c.id="YQScript",c.src="https://www.17track.net/externalcall.js",c.async=!0,document.head.appendChild(c)}const m=setInterval(()=>{window.YQV5&&(clearInterval(m),o())},100);return()=>{clearInterval(m),l(!1),d&&(d.innerHTML="")}},[a,s,n]),a?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-white bg-opacity-90",onClick:t}),e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 p-4 relative z-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-[#FF1B6B]",children:"Tracking Details"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-[#FF1B6B] transition-colors",children:e.jsx(Sa,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"mb-4 p-3 bg-pink-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"font-medium text-gray-500",children:"Tracking Number:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s}),e.jsx("span",{className:"mx-2 text-gray-300",children:"|"}),e.jsx("span",{className:"font-medium text-gray-500",children:"Carrier:"}),e.jsx("span",{className:"font-medium text-gray-900",children:n||"Auto-detect"})]})}),r?null:e.jsx("div",{className:"flex items-center justify-center py-6",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-[#FF1B6B]"})}),e.jsx("div",{id:"tracking-container",className:"w-full min-h-[560px] rounded-lg bg-gradient-to-br from-pink-50 to-white"})]})]}):null},Bt=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},ch=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-32 h-8",children:e.jsx(Bt,{})})}),e.jsx("div",{className:"space-y-6",children:[1,2,3].map(t=>e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-5",children:e.jsx(Bt,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(Bt,{})})]}),e.jsx("div",{className:"w-24 h-8",children:e.jsx(Bt,{})})]}),e.jsx("div",{className:`border-t ${a?"border-gray-700":"border-gray-200"} pt-4 space-y-4`,children:[1,2].map(s=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx(Bt,{})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-5",children:e.jsx(Bt,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(Bt,{})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-4",children:e.jsx(Bt,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(Bt,{})})]})]})]},s))}),e.jsx("div",{className:`border-t ${a?"border-gray-700":"border-gray-200"} mt-4 pt-4`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-4",children:e.jsx(Bt,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(Bt,{})})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"w-32 h-6",children:e.jsx(Bt,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(Bt,{})})]})]})})]},t))})]})},mh=({isOpen:a,onClose:t,order:s})=>{const[n,r]=i.useState(!1),[l,d]=i.useState(!1),[o,m]=i.useState(""),{isDarkMode:c}=Se();i.useEffect(()=>{u()},[]);const u=async()=>{try{const v=await ss();if(v){const C=await v.request({method:"eth_accounts"});C.length>0&&(m(C[0]),d(!0))}}catch(v){console.error("Error checking wallet connection:",v)}},x=async()=>{if(s.status!=="cancelled"){M.error("Only cancelled orders are eligible for refund requests");return}r(!0);try{const v=await De(ge(ae,"sellers",s.sellerId));if(!v.exists())throw new Error(`Seller not found with ID: ${s.sellerId}`);const C=v.data().walletAddress,E=s.paymentMethod?.buyerWallet;if(!E||!gt(E))throw new Error("Invalid buyer wallet address");if(!C||!gt(C))throw new Error(`Invalid seller wallet address: ${C}`);const w=s.total*.95,p={orderId:s.id,buyerId:s.buyerId,sellerId:s.sellerId,amount:w,originalAmount:s.total,paymentAddress:E,status:"pending",createdAt:We(),network:s.paymentMethod.network,orderDetails:{items:s.items,total:s.total,paymentMethod:s.paymentMethod}};await et(be(ae,"refundRequests"),p),M.success("Refund request submitted successfully"),t()}catch(v){console.error("Error submitting refund request:",v),M.error(v.message||"Failed to submit refund request")}finally{r(!1)}};if(!a)return null;const f=s.total*.05,N=s.total*.95;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${c?"bg-gray-800":"bg-white"} rounded-lg p-6 max-w-md w-full mx-4`,children:[e.jsx("h2",{className:`text-xl font-semibold ${c?"text-gray-100":"text-gray-900"} mb-4`,children:"Request Refund"}),s.status!=="cancelled"?e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"text-yellow-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Not Eligible for Refund"}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:[`Only cancelled orders are eligible for refund requests. This order's status is "`,s.status,'".']})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"text-blue-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Refund Processing Time"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Refund requests typically take up to 1 week to process."})]})]})}),e.jsx("div",{className:"mb-4 p-4 bg-pink-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"text-[#FF1B6B] text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Platform Fee Notice"}),e.jsxs("p",{className:"text-sm text-[#FF1B6B]/80 mt-1",children:["The 5% platform fee ($",f.toFixed(2),") is non-refundable as it was deducted at the time of purchase."]})]})]})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"} mb-1`,children:"Order ID"}),e.jsx("input",{type:"text",value:`#${s.id.slice(-6)}`,disabled:!0,className:`w-full px-3 py-2 ${c?"bg-gray-700 text-gray-200 border-gray-600":"bg-gray-50 text-gray-700 border-gray-300"} border rounded-lg`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"} mb-1`,children:"Payment Address"}),e.jsx("input",{type:"text",value:s.paymentMethod.buyerWallet,disabled:!0,className:`w-full px-3 py-2 ${c?"bg-gray-700 text-gray-200 border-gray-600":"bg-gray-50 text-gray-700 border-gray-300"} border rounded-lg`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${c?"text-gray-300":"text-gray-700"} mb-1`,children:"Original Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`/${s.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:s.paymentMethod?.token||"USDT",className:"w-5 h-5"}),e.jsx("input",{type:"text",value:`$${s.total.toFixed(2)}`,disabled:!0,className:`flex-1 px-3 py-2 ${c?"bg-gray-700 text-gray-200 border-gray-600":"bg-gray-50 text-gray-700 border-gray-300"} border rounded-lg line-through`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#FF1B6B] mb-1",children:"Refund Amount (after 5% platform fee)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`/${s.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:s.paymentMethod?.token||"USDT",className:"w-5 h-5"}),e.jsx("input",{type:"text",value:`$${N.toFixed(2)}`,disabled:!0,className:`flex-1 px-3 py-2 bg-[#FF1B6B]/5 border border-[#FF1B6B]/20 rounded-lg ${c?"text-gray-200":"text-gray-700"} font-medium`})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:t,className:`px-4 py-2 ${c?"text-gray-300 hover:text-gray-100":"text-gray-700 hover:text-gray-900"}`,children:"Cancel"}),e.jsx("button",{onClick:x,disabled:n||s.status!=="cancelled",className:`px-4 py-2 rounded-lg text-white ${s.status!=="cancelled"?"bg-gray-400 cursor-not-allowed":n?"bg-[#FF1B6B] opacity-50 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"}`,children:n?"Submitting...":"Submit Refund Request"})]})]})})},uh=({isOpen:a,onClose:t,onConfirm:s,orderId:n})=>{const[r,l]=i.useState(!1),{isDarkMode:d}=Se(),o=async()=>{l(!0),await s(n),l(!1),t()};return a?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:`fixed inset-0 ${d?"bg-gray-900":"bg-white"} bg-opacity-90`,onClick:t}),e.jsxs("div",{className:`${d?"bg-gray-800":"bg-white"} rounded-lg shadow-xl max-w-md w-full mx-4 p-6 relative z-50`,children:[e.jsx("h3",{className:`text-xl font-semibold ${d?"text-gray-100":"text-gray-900"} mb-4`,children:"Confirm Delivery"}),e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"text-blue-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Please confirm that you have received your order."}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"This will help release the payment to the seller."})]})]})}),e.jsx("div",{className:"mb-4 p-4 bg-pink-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:"text-[#FF1B6B] text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Automatic Fund Release Notice"}),e.jsx("p",{className:"text-sm text-[#FF1B6B]/80 mt-1",children:"If delivery is not confirmed within 2-3 weeks of shipping and no complaint is raised about non-receipt while tracking shows delivered, the seller's funds will be automatically released."})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${d?"text-gray-300 hover:text-gray-100":"text-gray-700 hover:text-gray-900"}`,children:"Cancel"}),e.jsx("button",{onClick:o,disabled:r,className:"px-4 py-2 rounded-lg text-white bg-[#FF1B6B] hover:bg-[#D4145A] disabled:opacity-50",children:r?"Confirming...":"Confirm Delivery"})]})]})]}):null},xh=({isOpen:a,onClose:t,order:s,item:n})=>{const[r,l]=i.useState(0),[d,o]=i.useState(""),[m,c]=i.useState(null),[u,x]=i.useState(""),[f,N]=i.useState(!1),{user:v}=Ve(),{isDarkMode:C}=Se(),E=p=>{const y=p.target.files[0];if(y){if(y.size>2*1024*1024){M.error("Image must be less than 2MB");return}c(y);const g=new FileReader;g.onloadend=()=>{x(g.result)},g.readAsDataURL(y)}},w=async p=>{if(p.preventDefault(),!r){M.error("Please select a rating");return}N(!0);try{let y="";if(m){const j=ca(ma,`reviews/${n.productId}/${v.uid}_${Date.now()}`);await ur(j,m),y=await xr(j)}const g={productId:n.productId,orderId:s.id,userId:v.uid,sellerId:n.sellerId||s.sellerId,rating:r,review:d.trim(),image:y,createdAt:new Date,userName:v.displayName||v.email?.split("@")[0]||"Anonymous",productName:n.name,productImage:n.image};await et(be(ae,"reviews"),g),M.success("Review submitted successfully"),t()}catch(y){console.error("Error submitting review:",y),M.error("Failed to submit review")}finally{N(!1)}};return a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs(R.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:`${C?"bg-gray-800":"bg-white"} rounded-lg shadow-xl max-w-md w-full p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${C?"text-gray-100":"text-gray-900"}`,children:"Write a Review"}),e.jsx("button",{onClick:t,className:`${C?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(mt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:`flex items-center gap-3 p-3 ${C?"bg-gray-700":"bg-gray-50"} rounded-lg mb-4`,children:[e.jsx("img",{src:n.image,alt:n.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${C?"text-gray-100":"text-gray-900"}`,children:n.name}),e.jsxs("p",{className:`text-sm ${C?"text-gray-400":"text-gray-500"}`,children:["Order #",s.id.slice(-6)]})]})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${C?"text-gray-300":"text-gray-700"} mb-1`,children:"Rating"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(p=>e.jsx("button",{type:"button",onClick:()=>l(p),className:"focus:outline-none",children:e.jsx(Dt,{className:`w-6 h-6 ${p<=r?"text-[#FF1B6B]":C?"text-gray-600":"text-gray-300"}`})},p))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${C?"text-gray-300":"text-gray-700"} mb-1`,children:"Review"}),e.jsx("textarea",{value:d,onChange:p=>o(p.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${C?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400"}`,rows:"4",placeholder:"Share your experience with this product..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${C?"text-gray-300":"text-gray-700"} mb-1`,children:"Add Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 border rounded-lg ${C?"border-gray-600 hover:bg-gray-700":"border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(no,{className:`w-5 h-5 ${C?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`text-sm ${C?"text-gray-300":"text-gray-700"}`,children:"Choose Image"})]})]}),u&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:u,alt:"Preview",className:"w-16 h-16 rounded-lg object-cover"}),e.jsx("button",{type:"button",onClick:()=>{c(null),x("")},className:"absolute -top-2 -right-2 bg-red-100 text-red-600 rounded-full p-0.5",children:e.jsx(mt,{className:"w-4 h-4"})})]})]})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full py-2 px-4 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#FF1B6B]/90 disabled:opacity-50",children:f?"Submitting...":"Submit Review"})]})]})})]}):null},gh=()=>{const{user:a}=Ve(),{isDarkMode:t}=Se(),[s,n]=i.useState(!0),[r,l]=i.useState([]),[d,o]=i.useState(null),[m,c]=i.useState(!1),[u,x]=i.useState(!1),[f,N]=i.useState(null),[v,C]=i.useState(!1),[E,w]=i.useState(null),[p,y]=i.useState(!1),[g,j]=i.useState(null);i.useEffect(()=>{T()},[a]);const T=async()=>{try{const h=Te(be(ae,"orders"),fe("buyerId","==",a.uid),Ue("createdAt","desc")),O=(await Ae(h)).docs.map(F=>({id:F.id,...F.data()}));l(O)}catch(h){console.error("Error fetching orders:",h),M.error("Failed to load orders")}finally{n(!1)}},b=h=>{switch(h.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-700";case"processing":return"bg-blue-100 text-blue-700";case"shipped":return"bg-purple-100 text-purple-700";case"delivered":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},$={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},L={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},S=async h=>{try{const I=ge(ae,"orders",h);await $e(I,{status:"delivered",deliveredAt:new Date,shippingStatus:"delivered",deliveryConfirmedByBuyer:!0}),l(O=>O.map(F=>F.id===h?{...F,status:"delivered",deliveredAt:new Date,shippingStatus:"delivered",deliveryConfirmedByBuyer:!0}:F)),M.success("Delivery confirmed successfully")}catch(I){console.error("Error confirming delivery:",I),M.error("Failed to confirm delivery")}},A=h=>{w({trackingNumber:h.trackingNumber,carrier:h.carrier}),C(!0)};return s?e.jsx(ch,{}):e.jsxs(R.div,{className:`max-w-4xl mx-auto p-4 space-y-6 ${t?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:$,children:[e.jsx(R.h1,{variants:L,className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-800"}`,children:"My Orders"}),r.length===0?e.jsxs(R.div,{variants:L,className:`text-center py-12 ${t?"bg-gray-800":"bg-white"} rounded-lg`,children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(_s,{className:`text-4xl ${t?"text-gray-600":"text-gray-400"}`})}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-4`,children:"You haven't placed any orders yet"}),e.jsx(Ge,{to:"/merch-store",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Start Shopping"})]}):e.jsx(R.div,{variants:$,className:"space-y-4",children:r.map(h=>e.jsxs(R.div,{variants:L,className:`${t?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:`font-medium ${t?"text-gray-100":"text-gray-800"}`,children:["Order #",h.id.slice(-6)]}),e.jsx("span",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:new Date(h.createdAt?.seconds*1e3).toLocaleDateString()})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${b(h.status)}`,children:h.status})]}),e.jsx("div",{className:`border-t ${t?"border-gray-700":"border-gray-100"}`,children:h.items.map(I=>e.jsxs("div",{className:"flex items-center gap-3 py-3",children:[e.jsx(Ge,{to:`/merch-store/product/${I.productId}`,className:"w-14 h-14 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(Ge,{to:`/merch-store/product/${I.productId}`,className:`font-medium ${t?"text-gray-100 hover:text-[#FF1B6B]":"text-gray-800 hover:text-[#FF1B6B]"} block truncate`,children:I.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("img",{src:`/${h.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:h.paymentMethod?.token||"USDT",className:"w-4 h-4"}),e.jsxs("span",{className:"text-[#FF1B6B] font-medium",children:["$",I.price.toFixed(2)]}),e.jsxs("span",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:["× ",I.quantity]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h.status==="delivered"&&e.jsxs("button",{onClick:()=>{o(h),j(I),y(!0)},className:"text-sm text-[#FF1B6B] hover:text-[#FF1B6B]/80 font-medium flex items-center gap-1",children:[e.jsx(Hd,{className:"w-4 h-4"}),"Write a Review"]}),e.jsx(io,{className:`text-xl ${t?"text-gray-500":"text-gray-400"}`})]})]},I.productId))}),e.jsxs("div",{className:`border-t ${t?"border-gray-700":"border-gray-100"} pt-3`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Total Amount"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:`/${h.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:h.paymentMethod?.token||"USDT",className:"w-4 h-4"}),e.jsxs("span",{className:`font-medium ${t?"text-gray-100":"text-gray-800"}`,children:["$",h.total.toFixed(2)]})]})]}),h.status==="shipped"&&e.jsxs("span",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["Estimated Delivery: ",new Date(h.createdAt?.seconds*1e3+14*24*60*60*1e3).toLocaleDateString()]})]}),h.trackingNumber&&e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsx("span",{className:"font-medium",children:h.carrier||"other"})," Tracking:",e.jsx("span",{className:"ml-1 font-medium",children:h.trackingNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h.status==="shipped"&&!h.deliveryConfirmedByBuyer&&e.jsx("button",{onClick:()=>{N(h.id),x(!0)},className:"px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 hover:bg-green-200 transition-colors",children:"Confirm Delivery"}),e.jsx("button",{onClick:()=>A(h),className:"px-3 py-1 text-sm font-medium rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors",children:"Track Package"}),h.shippingStatus==="in_transit"?e.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(qd,{className:"text-base"}),e.jsx("span",{className:"font-medium",children:"In Transit"})]}):h.deliveryConfirmedByBuyer?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(zd,{className:"text-base"}),e.jsx("span",{className:"font-medium",children:"Delivered"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(Vd,{className:"text-base"}),e.jsx("span",{className:"font-medium",children:"Processing"})]})]})]})]}),e.jsx("div",{className:`flex justify-end mt-3 pt-3 border-t ${t?"border-gray-700":"border-gray-100"}`,children:e.jsx("button",{onClick:()=>{o(h),c(!0)},className:"px-4 py-2 text-sm font-medium text-[#FF1B6B] hover:text-[#D4145A] transition-colors",children:"Request Refund"})})]},h.id))}),d&&e.jsx(mh,{isOpen:m,onClose:()=>{c(!1),o(null)},order:d}),e.jsx(uh,{isOpen:u,onClose:()=>x(!1),onConfirm:S,orderId:f}),E&&e.jsx(dh,{isOpen:v,onClose:()=>{C(!1),w(null)},trackingNumber:E.trackingNumber,carrier:E.carrier}),g&&e.jsx(xh,{isOpen:p,onClose:()=>{y(!1),j(null)},order:d,item:g})]})},hh={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},Ya={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},ph=()=>{const a=rt(),{user:t}=Ve(),{isDarkMode:s}=Se(),[n,r]=i.useState([]),[l,d]=i.useState(null),[o,m]=i.useState(!0),[c,u]=i.useState(!1),[x,f]=i.useState(""),[N,v]=i.useState(""),[C,E]=i.useState(null),[w,p]=i.useState({subtotal:0,shippingTotal:0,total:0}),[y,g]=i.useState("0"),[j,T]=i.useState(""),[b,$]=i.useState(!1);i.useEffect(()=>{t&&(async()=>{try{const F=Te(be(ae,"cart"),fe("userId","==",t.uid)),U=await Ae(F),V=[];let P=0,B=0;for(const D of U.docs){const _=D.data(),H=await De(ge(ae,"products",_.productId));if(H.exists()){const X=H.data(),se=X.hasDiscount&&new Date<new Date(X.discountEndsAt)?X.discountedPrice:X.price;V.push({id:D.id,..._,product:{id:_.productId,...X}}),P+=se*_.quantity,B+=X.shippingFee||0}}if(r(V),p({subtotal:P,shippingTotal:B,total:P+B}),V.length>0){const D=V[0].product.network==="unichain"?1301:V[0].product.network==="polygon"?137:Number(V[0].product.network);if(E(D),v(V[0].product.acceptedToken),window.ethereum&&window.ethereum.networkVersion!==D.toString())try{D===1301?await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x515"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]})}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]})})}catch{}}const k=await De(ge(ae,"users",t.uid));if(k.exists()){const D=k.data(),_=D.shippingAddress&&D.shippingAddress.street&&D.shippingAddress.city&&D.shippingAddress.state&&D.shippingAddress.postalCode&&D.shippingAddress.country;if(_&&!D.flag&&D.shippingAddress?.country)try{const H=typeof D.shippingAddress.country=="object"?D.shippingAddress.country.code:D.shippingAddress.country,z=String(H).trim().toLowerCase().split(" ")[0].slice(0,2);if(z){const se=`https://flagcdn.com/${z}.svg`;await $e(ge(ae,"users",t.uid),{flag:se}),D.flag=se}}catch(H){console.error("Error setting flag URL:",H)}d({...D,hasCompleteAddress:_}),D.walletAddress&&(u(!0),f(D.walletAddress))}m(!1)}catch(F){console.error("Error loading checkout data:",F),M.error("Failed to load checkout data"),m(!1)}})()},[t]);const L=async()=>{try{if(!x||!N||!C||(window.ethereum.networkVersion!==C.toString()&&(C===1301?await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x515"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]})}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]})})),!dn[C]?.[N]))return;const F=new he(window.ethereum),V=await Un(F,C,N).balanceOf(x);g(de(V,6))}catch{g("0")}};i.useEffect(()=>{c&&N&&C&&x&&L()},[c,N,C,x]);const S=async()=>{if(!l?.shippingAddress||!l?.shippingAddress?.street||!l?.shippingAddress?.city||!l?.shippingAddress?.state||!l?.shippingAddress?.postalCode||!l?.shippingAddress?.country){M.error("Please add a complete shipping address in your profile settings"),a("/merch-store/settings");return}if(!c){M.error("Please connect your wallet in your profile settings first"),a("/merch-store/settings");return}if(n.length===0){M.error("Your cart is empty");return}if(parseFloat(y)<w.total){M.error(`Insufficient ${N} balance`);return}$(!0);const O=M.loading("Processing your order...");try{if(window.ethereum.networkVersion!==C.toString()){T("Switching network...");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${Number(C).toString(16)}`}]})}catch{M.dismiss(O),M.error(`Please switch to ${_n[C]} network in MetaMask`),$(!1);return}}const U=await new he(window.ethereum).getSigner(),V=Bs(U,C),P=Un(U,C,N);if(!V.address||!P.address)throw new Error("Invalid contract addresses");const B=Ie(w.total.toFixed(6),6);if(T("Checking token approval..."),await P.allowance(x,V.address)<B){T("Approving token spending...");const z=Ie("0.01",6),se=B+z;console.log("Total Amount:",de(B,6)),console.log("Approval Amount with buffer:",de(se,6)),await(await P.approve(V.address,se)).wait()}const D={},_=n.map(async z=>{const se=z.product.sellerId;if(!D[se]){const ee=await De(ge(ae,"sellers",se));if(!ee.exists())throw new Error(`Seller ${se} not found`);const te=ee.data();if(!te.walletAddress)throw new Error(`Seller ${se} has no wallet connected`);const Y=$s(te.walletAddress);D[se]={seller:Y,amount:0,items:[]}}return se});await Promise.all(_),n.forEach(z=>{const se=z.product.sellerId,Y=(z.product.hasDiscount&&new Date<new Date(z.product.discountEndsAt)?z.product.discountedPrice:z.product.price)*z.quantity+(z.product.shippingFee||0);D[se].amount+=Y,D[se].items.push(z)});let H=0;for(const[z,se]of Object.entries(D)){H++,T(`Processing order ${H}/${Object.keys(D).length}...`);const ee=Ie(se.amount.toFixed(6),6);console.log("Seller order amount:",de(ee,6));const Y=await(await V.createOrder(se.seller,P.address,ee)).wait();console.log("Transaction receipt:",Y);const W=Y.logs.find(ie=>{try{const ne=V.interface.parseLog(ie);return console.log("Parsed log:",ne),ne.name==="OrderCreated"}catch{return!1}});if(!W)throw console.error("OrderCreated event not found in logs"),console.log("All logs:",Y.logs),new Error("Failed to get order ID from transaction");const Q=V.interface.parseLog(W);console.log("Parsed OrderCreated event:",Q);const G=Q.args.orderId.toString();console.log("Order ID from event:",G),T("Saving order details...");const q=se.items.map(async ie=>{const ne=ge(ae,"products",ie.product.id),K=await De(ne);if(K.exists()){const xe=K.data().quantity,pe=Math.max(0,xe-ie.quantity);await $e(ne,{quantity:pe})}});await Promise.all(q);const Z=await et(be(ae,"orders"),{numericOrderId:G,buyerId:t.uid,sellerId:z,sellerName:se.items[0].product.sellerName,items:se.items.map(ie=>({productId:ie.product.id,name:ie.product.name,image:ie.product.images[0],quantity:ie.quantity,price:ie.product.price,shippingFee:ie.product.shippingFee||0,size:ie.size||null,color:ie.color||null})),status:"processing",paymentStatus:"completed",paymentMethod:{type:"crypto",token:N,network:C,buyerWallet:x},buyerInfo:{name:l.name,email:l.email,phone:l.phoneNumber||null},flag:typeof l.shippingAddress.country=="object"&&l.shippingAddress.country.code?`https://flagcdn.com/${l.shippingAddress.country.code.toLowerCase()}.svg`:null,shippingAddress:l.shippingAddress,subtotal:se.amount,total:se.amount,createdAt:We(),shippingConfirmed:!1,shippingConfirmedAt:null,fundsAvailable:!1,fundsAvailableAt:null,shippingDeadline:_r.fromMillis(Date.now()+72*60*60*1e3),fundsReleaseDate:_r.fromMillis(Date.now()+15*24*60*60*1e3)})}const X=n.map(z=>Us(ge(ae,"cart",z.id)));await Promise.all(X),M.dismiss(O),M.success("Order placed successfully!"),a("/merch-store/orders")}catch(F){M.dismiss(O),M.error(F.message||"Failed to place order. Please try again.")}finally{$(!1),T("")}},A=l?.hasCompleteAddress,h=!c||n.length===0||!A||b||parseFloat(y)<w.total,I=()=>l?.shippingAddress?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`${s?"text-gray-100":"text-gray-900"}`,children:l.shippingAddress.street}),e.jsxs("p",{className:`${s?"text-gray-100":"text-gray-900"}`,children:[l.shippingAddress.city,", ",l.shippingAddress.postalCode]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`${s?"text-gray-100":"text-gray-900"}`,children:typeof l.shippingAddress.country=="object"?l.shippingAddress.country.name:l.shippingAddress.country}),typeof l.shippingAddress.country=="object"&&l.shippingAddress.country.code&&e.jsx("img",{src:`https://flagcdn.com/w20/${l.shippingAddress.country.code.toLowerCase()}.png`,alt:l.shippingAddress.country.name,className:"w-5 h-auto"})]}),e.jsx("button",{onClick:()=>a("/merch-store/settings"),className:"text-[#FF1B6B] hover:text-[#D4145A] transition-colors mt-2",children:"Edit Address"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`${s?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B]",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-[#FF1B6B]",children:"Shipping Address Required"}),e.jsx("p",{className:`mt-1 text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Please add your shipping address to continue with the checkout process."})]})]})}),e.jsxs("button",{onClick:()=>a("/merch-store/settings"),className:"w-full px-4 py-3 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Add Shipping Address"]})]});return o?e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center`,children:e.jsx(R.div,{animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},className:"w-12 h-12 rounded-full border-4 border-[#FF1B6B] border-t-transparent"})}):e.jsx(R.div,{variants:hh,initial:"hidden",animate:"visible",className:`min-h-screen ${s?"bg-gray-900":"bg-[#FFF5F7]"} p-4 md:p-8`,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(R.h1,{variants:Ya,className:`text-3xl font-bold ${s?"text-gray-100":"text-gray-900"} mb-8`,children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(R.div,{variants:Ya,className:"lg:col-span-2 space-y-6",children:[e.jsxs(R.div,{variants:Ya,className:`${s?"bg-gray-800":"bg-white"} rounded-lg p-6`,children:[e.jsx("h2",{className:`font-bold ${s?"text-gray-100":"text-gray-800"} mb-4`,children:"Order Summary"}),n.map(O=>e.jsxs("div",{className:`flex items-start space-x-4 mb-4 pb-4 ${s?"border-gray-700":"border-b"} last:border-b-0`,children:[e.jsx("img",{src:O.product.images[0],alt:O.product.name,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${s?"text-gray-100":"text-gray-800"}`,children:O.product.name}),e.jsxs("div",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mt-1`,children:[e.jsxs("p",{children:["Quantity: ",O.quantity]}),O.size&&e.jsxs("p",{children:["Size: ",O.size]}),O.color&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{children:"Color:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:O.color.toLowerCase(),borderColor:O.color.toLowerCase()==="#ffffff"?"#e5e7eb":"transparent"}}),O.color]})]})]})]}),e.jsxs("div",{className:"text-right",children:[O.product.hasDiscount&&new Date<new Date(O.product.discountEndsAt)?e.jsx(e.Fragment,{children:e.jsxs("p",{className:`${s?"text-gray-100":"text-gray-800"}`,children:["$",(O.product.discountedPrice*O.quantity).toFixed(2),e.jsxs("span",{className:`text-sm ${s?"text-gray-500":"text-gray-400"} line-through ml-1`,children:["$",(O.product.price*O.quantity).toFixed(2)]})]})}):e.jsxs("p",{className:`${s?"text-gray-100":"text-gray-800"}`,children:["$",(O.product.price*O.quantity).toFixed(2)]}),O.product.shippingFee>0&&e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:["+ $",O.product.shippingFee.toFixed(2)," shipping"]})]})]})]},O.id)),e.jsxs("div",{className:`${s?"border-gray-700":"border-t"} pt-4 mt-4 space-y-2`,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Subtotal"}),e.jsxs("span",{className:`${s?"text-gray-100":"text-gray-600"}`,children:["$",w.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Shipping"}),e.jsxs("span",{className:`${s?"text-gray-100":"text-gray-600"}`,children:["$",w.shippingTotal.toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-bold ${s?"text-gray-100 border-gray-700":"text-gray-800 border-t"} pt-2`,children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",w.total.toFixed(2)]})]})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[e.jsx("h2",{className:`text-xl font-semibold ${s?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Address"}),I()]})]}),e.jsxs(R.div,{variants:Ya,className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4 max-w-sm mx-auto`,children:[e.jsx("h2",{className:`text-lg font-semibold ${s?"text-gray-100":"text-gray-900"} mb-4`,children:"Payment Method"}),c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 ${s?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:`w-5 h-5 ${s?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:[x.slice(0,6),"...",x.slice(-4)]})]}),e.jsx("button",{onClick:()=>a("/merch-store/settings"),className:"text-sm text-[#FF1B6B] hover:text-[#D4145A]",children:"Change in Settings"})]}),e.jsx("div",{className:`p-3 ${s?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gd,{className:`w-5 h-5 ${s?"text-gray-400":"text-gray-600"}`}),e.jsx("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:"Network Required:"})]}),e.jsx("span",{className:`text-sm font-medium ${s?"text-gray-100":"text-gray-900"}`,children:_n[C]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-sm font-medium ${s?"text-gray-300":"text-gray-700"}`,children:"Payment Token"}),e.jsx("div",{className:`p-3 rounded-lg border-2 border-[#FF1B6B] ${s?"bg-pink-900/20":"bg-pink-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:n[0]?.product?.tokenLogo,alt:N,className:"w-5 h-5"}),e.jsx("span",{className:`${s?"text-gray-100":"text-gray-900"}`,children:N})]}),e.jsxs("span",{className:`text-sm ${s?"text-gray-400":"text-gray-600"}`,children:["Balance: ",parseFloat(y).toFixed(2)," ",N]})]})})]}),j&&e.jsx("div",{className:`mt-4 p-3 ${s?"bg-blue-900/20":"bg-blue-50"} rounded-lg`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),e.jsx("span",{className:`text-sm ${s?"text-blue-300":"text-blue-600"}`,children:j})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Please connect your wallet in your profile settings first."}),e.jsxs("button",{onClick:()=>a("/merch-store/settings"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-[#FF1B6B] text-white hover:bg-[#D4145A] transition-colors",children:[e.jsx(it,{className:"w-5 h-5"}),e.jsx("span",{children:"Go to Settings"})]})]})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4 max-w-sm mx-auto`,children:[e.jsx("h2",{className:`text-lg font-semibold ${s?"text-gray-100":"text-gray-900"} mb-4`,children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Subtotal"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:n[0]?.product?.tokenLogo,alt:N,className:"w-4 h-4"}),e.jsxs("span",{className:`${s?"text-gray-100":"text-gray-600"}`,children:["$",w.subtotal.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-600"}`,children:"Shipping"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:n[0]?.product?.tokenLogo,alt:N,className:"w-4 h-4"}),e.jsxs("span",{className:`${s?"text-gray-100":"text-gray-600"}`,children:["$",w.shippingTotal.toFixed(2)]})]})]}),e.jsx("div",{className:`h-px ${s?"bg-gray-700":"bg-gray-200"} my-2`}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{className:`${s?"text-gray-100":"text-gray-900"}`,children:"Total"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:n[0]?.product?.tokenLogo,alt:N,className:"w-4 h-4"}),e.jsxs("span",{className:`${s?"text-gray-100":"text-gray-900"}`,children:["$",w.total.toFixed(2)]})]})]})]}),!b&&e.jsxs(e.Fragment,{children:[!c&&e.jsx("div",{className:`mt-4 p-3 ${s?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Wallet Not Connected"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mt-1`,children:"Please connect your wallet in settings to enable order placement."})]})]})}),c&&!A&&e.jsx("div",{className:`mt-4 p-3 ${s?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Shipping Address Required"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mt-1`,children:"Please add your shipping address in settings to enable order placement."})]})]})}),c&&A&&parseFloat(y)<w.total&&e.jsx("div",{className:`mt-4 p-3 ${s?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Insufficient Balance"}),e.jsxs("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mt-1`,children:["Your ",N," balance is too low to complete this purchase."]})]})]})}),c&&A&&n.length===0&&e.jsx("div",{className:`mt-4 p-3 ${s?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Empty Cart"}),e.jsx("p",{className:`text-sm ${s?"text-gray-400":"text-gray-600"} mt-1`,children:"Add items to your cart to proceed with checkout."})]})]})})]}),e.jsx("button",{onClick:S,disabled:h,className:`w-full mt-6 px-4 py-3 rounded-lg text-white transition-colors ${h?`${s?"bg-gray-700":"bg-gray-300"} cursor-not-allowed`:"bg-[#FF1B6B] hover:bg-[#D4145A] disabled:opacity-50 disabled:cursor-not-allowed"}`,children:b?"Processing Order...":c?A?parseFloat(y)<w.total?`Insufficient ${N} Balance`:n.length===0?"Cart is Empty":"Place Order":"Add Shipping Address to Continue":"Connect Wallet to Continue"})]})]})]})]})})};function fh(){const[a,t]=i.useState([]),[s,n]=i.useState(!0),[r,l]=i.useState(null),d=async()=>{try{n(!0),l(null);const o=Te(be(ae,"withdrawals"),Ue("timestamp","desc"),Ht(10)),c=(await Ae(o)).docs.map(u=>{const x=u.data();return{id:u.id,...x,timestamp:x.timestamp?.toDate?.()||null,processedAt:x.processedAt?.toDate?.()||null}}).filter(Boolean);t(c)}catch(o){console.error("Error fetching recent withdrawals:",o),l("Failed to fetch recent withdrawals")}finally{n(!1)}};return i.useEffect(()=>{d()},[]),s?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})})]}):r?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"text-red-500 dark:text-red-400 text-center",children:r})]}):!a||a.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"No recent withdrawals"})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Token"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Network"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Transaction"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:o.timestamp?new Date(o.timestamp).toLocaleString():"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:[o.amount?.toFixed(2)||"0.00"," ",o.token||"N/A"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/logos/${o.token?.toLowerCase()||"usdt"}.png`,alt:o.token||"Token",className:"w-5 h-5 mr-2"}),o.token||"N/A"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:o.network==="unichain"?"/unichain-logo.png":"/polygon.png",alt:o.network||"Network",className:"w-5 h-5 mr-2"}),o.network==="unichain"?"Unichain Testnet":"Polygon"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${o.status==="completed"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":o.status==="pending"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:o.status||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:o.transactionHash?e.jsx("a",{href:`${o.network==="unichain"?"https://unichain-sepolia.blockscout.com/tx/":"https://polygonscan.com/tx/"}${o.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#FF1B6B] hover:text-[#D4145A] dark:text-[#FF1B6B] dark:hover:text-[#D4145A]",children:"View"}):"N/A"})]},o.id))})]})})]})}const ds="0x5828D525fe00902AE22f2270Ac714616651894fF",yh=()=>e.jsxs(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-8 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})]}),bh=()=>e.jsxs(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(2)].map((a,t)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full mr-2"}),e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-600 rounded w-32"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(2)].map((s,n)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full mr-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-24"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded flex-grow"}),e.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-600 rounded"})]})]},n))})]},t))})]}),Dr=a=>a===1301?{USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844",USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F"}:a===137?{USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359"}:null;function wh(){const[a,t]=i.useState([]),[s,n]=i.useState(!0),[r,l]=i.useState(null),[d,o]=i.useState(!1),[m,c]=i.useState(""),{chain:u}=Ft(),{switchNetwork:x}=uc();localStorage.getItem("admin-theme");const[f,N]=i.useState({unichain:{USDT:{fees:"0",amount:"",loading:!1,error:null},USDC:{fees:"0",amount:"",loading:!1,error:null}},polygon:{USDT:{fees:"0",amount:"",loading:!1,error:null},USDC:{fees:"0",amount:"",loading:!1,error:null}}});i.useEffect(()=>{(async()=>{try{const T=await ss();if(T){const b=await T.request({method:"eth_accounts"});b.length>0&&b[0].toLowerCase()===ds.toLowerCase()&&(c(b[0]),o(!0))}}catch(T){console.error("Error checking wallet connection:",T)}})()},[]),i.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",j=>{j.length===0||j[0].toLowerCase()!==ds.toLowerCase()?(o(!1),c("")):(c(j[0]),o(!0))})},[]),i.useEffect(()=>{d&&m.toLowerCase()===ds.toLowerCase()?v():n(!1)},[d,m]);const v=async()=>{if(!(!d||m.toLowerCase()!==ds.toLowerCase()))try{const j=Te(be(ae,"withdrawals"),fe("status","==","pending"),Ue("timestamp","desc")),T=await Ae(j),$=[...new Set(T.docs.map(h=>h.data().sellerId))].map(h=>De(ge(ae,"sellers",h))),L=await Promise.all($),S={};L.forEach(h=>{h.exists()&&(S[h.id]=h.data())});const A=T.docs.map(h=>{const I=h.data(),O=S[I.sellerId]||{};return{id:h.id,...I,storeName:O.storeName||"Unknown Store",storeId:`SELL_${I.sellerId}`,storeAvatar:O.avatarUrl||null}});t(A)}catch(j){console.error("Error fetching withdrawals:",j),M.error("Failed to fetch withdrawal requests")}finally{n(!1)}},C=async j=>{if(!d||m.toLowerCase()!==ds.toLowerCase()){M.error("Please connect your admin wallet");return}l(j.id);try{const T=j.network==="unichain"?"1301":"137",b=Number(T);if(u?.id!==b&&x)try{await x(b),await new Promise(F=>setTimeout(F,1e3))}catch{throw new Error(`Failed to switch to ${T==="1301"?"Unichain":"Polygon"} network`)}const L=await new he(window.ethereum).getSigner(),S=await Bs(L,b);if(!S)throw new Error("Could not get contract instance");const A=Ie(j.amount.toString(),6),h=j.token==="USDT"?b===1301?"0x70262e266E50603AcFc5D58997eF73e5a8775844":"0xc2132D05D31c914a87C6611C10748AEb04B58e8F":b===1301?"0x31d0220469e10c4E71834a79b1f276d740d3768F":"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359";M.loading("Please confirm the transaction in MetaMask...",{id:"withdrawal"});const I=await S.approveWithdrawal(j.walletAddress,h,A);if(M.loading("Processing withdrawal...",{id:"withdrawal"}),(await I.wait()).status===1){await $e(ge(ae,"withdrawals",j.id),{status:"completed",completedAt:We(),transactionHash:I.hash});const F=ge(ae,"sellers",j.sellerId),U=await De(F);if(U.exists()){const V=U.data().balance||0;await $e(F,{balance:Math.max(0,V-j.amount)})}M.success("Withdrawal approved successfully",{id:"withdrawal"}),await v()}else throw new Error("Transaction failed")}catch(T){console.error("Error approving withdrawal:",T),M.error(T.message.includes("user rejected")?"Transaction was rejected":T.message||"Failed to approve withdrawal",{id:"withdrawal"})}finally{l(null)}},E=async j=>{if(!(!d||m.toLowerCase()!==ds.toLowerCase()))try{await $e(ge(ae,"withdrawals",j),{status:"rejected",processedAt:new Date}),M.success("Withdrawal rejected"),v()}catch(T){console.error("Error rejecting withdrawal:",T),M.error("Failed to reject withdrawal")}},w=async()=>{console.log("Starting to fetch platform fees..."),N(j=>({unichain:{USDT:{...j.unichain.USDT,loading:!0,error:null},USDC:{...j.unichain.USDC,loading:!0,error:null}},polygon:{USDT:{...j.polygon.USDT,loading:!0,error:null},USDC:{...j.polygon.USDC,loading:!0,error:null}}}));try{const j=["function balanceOf(address) view returns (uint256)"];console.log("Connecting to Unichain network...");const T=new Ot("https://sepolia.unichain.org"),b=await Bs(T,"1301"),$=Dr(1301);console.log("Connecting to Polygon network...");const L=new Ot("https://polygon-mainnet.g.alchemy.com/v2/Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N"),S=await Bs(L,"137"),A=Dr(137);let h={unichain:{USDT:{amount:"",fees:"0",loading:!1,error:null},USDC:{amount:"",fees:"0",loading:!1,error:null}},polygon:{USDT:{amount:"",fees:"0",loading:!1,error:null},USDC:{amount:"",fees:"0",loading:!1,error:null}}};if(b&&$)try{const O=await new J($.USDT,j,T).balanceOf(b.target);h.unichain.USDT={amount:"",fees:de(O,6),loading:!1,error:null};const U=await new J($.USDC,j,T).balanceOf(b.target);h.unichain.USDC={amount:"",fees:de(U,6),loading:!1,error:null}}catch(I){console.error("Error fetching Unichain balances:",I),h.unichain.USDT.error="Failed to fetch balance",h.unichain.USDC.error="Failed to fetch balance"}if(S&&A)try{const O=await new J(A.USDT,j,L).balanceOf(S.target);h.polygon.USDT={amount:"",fees:de(O,6),loading:!1,error:null};const U=await new J(A.USDC,j,L).balanceOf(S.target);h.polygon.USDC={amount:"",fees:de(U,6),loading:!1,error:null}}catch(I){console.error("Error fetching Polygon balances:",I),h.polygon.USDT.error="Failed to fetch balance",h.polygon.USDC.error="Failed to fetch balance"}N(h)}catch(j){console.error("Error in fetchPlatformFees:",j),M.error("Failed to fetch platform fees")}};i.useEffect(()=>{let j;const T=async()=>{if(d)try{await w()}catch(b){console.error("Error in fetchAndSetFees:",b)}};return T(),d&&(j=setInterval(T,6e4)),()=>{j&&(console.log("Clearing platform fees interval"),clearInterval(j))}},[d]);const p=()=>{console.log("Manually refreshing platform fees..."),w()},y=(j,T,b)=>{N($=>({...$,[j]:{...$[j],[T]:{...$[j][T],amount:b}}}))},g=async(j,T)=>{if(!d||m.toLowerCase()!==ds.toLowerCase()){M.error("Please connect your admin wallet");return}const b=f[j][T].amount;if(!b||parseFloat(b)<=0){M.error("Please enter a valid amount");return}try{M.loading("Preparing transaction...",{id:"platform-fee-withdrawal"});const $=j==="unichain"?1301:137;if(console.log("Starting withdrawal process:",{network:j,token:T,chainId:$,amount:b}),await window.ethereum.request({method:"eth_requestAccounts"}),Number(window.ethereum.networkVersion)!==$){console.log("Switching network to:",$);try{$===137?await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x515"}]}),await new Promise(B=>setTimeout(B,2e3))}catch(B){if(B.code===4902)try{$===137?await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]}):await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]}),await new Promise(k=>setTimeout(k,2e3))}catch(k){console.error("Failed to add network:",k),M.error(`Failed to add ${j} network to MetaMask`,{id:"platform-fee-withdrawal"});return}console.error("Network switch failed:",B),M.error(`Failed to switch to ${j} network`,{id:"platform-fee-withdrawal"});return}}if(Number(window.ethereum.networkVersion)!==$){M.error(`Please switch to ${j} network in MetaMask`,{id:"platform-fee-withdrawal"});return}console.log("Getting provider and signer...");const h=await new he(window.ethereum).getSigner();console.log("Getting contract instance...");const I=await Bs(h,$.toString());if(!I){M.error("Could not get contract instance",{id:"platform-fee-withdrawal"});return}const O=Dr($);if(!O){M.error(`No token addresses found for chain ${$}`,{id:"platform-fee-withdrawal"});return}const F=O[T];if(!F){M.error(`No address found for token ${T} on chain ${$}`,{id:"platform-fee-withdrawal"});return}console.log("Contract and token details:",{contractAddress:I.target,tokenAddress:F,withdrawAmount:b});const U=Ie(b.toString(),6);M.loading("Please confirm the transaction in MetaMask...",{id:"platform-fee-withdrawal"});const V=await I.withdrawPlatformFees(F,U,{gasLimit:5e5});console.log("Transaction submitted:",V.hash),M.loading("Processing platform fee withdrawal...",{id:"platform-fee-withdrawal"});const P=await V.wait();if(console.log("Transaction receipt:",P),P.status===1){const B=ge(be(ae,"withdrawals"));await ts(B,{id:B.id,amount:parseFloat(b),token:T,network:j,status:"completed",type:"platform_fee",walletAddress:m,timestamp:new Date,transactionHash:V.hash,processedAt:new Date,processedBy:m}),M.success(`Successfully withdrew ${b} ${T}`,{id:"platform-fee-withdrawal"}),N(k=>({...k,[j]:{...k[j],[T]:{...k[j][T],amount:""}}})),w()}else throw new Error("Transaction failed")}catch($){console.error("Error withdrawing platform fees:",$),M.error($.message||"Failed to withdraw platform fees",{id:"platform-fee-withdrawal"})}};return s?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48"}),e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-10 w-32 bg-gray-200 dark:bg-gray-700 rounded"})]}),e.jsx(bh,{}),[...Array(3)].map((j,T)=>e.jsx(yh,{},T))]}):!d||m.toLowerCase()!==ds.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(ia,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Please connect your admin wallet to access the withdrawals page."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Withdrawal Requests"}),e.jsx("button",{onClick:p,className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Refresh Balances"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Platform Fee Withdrawals"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-6 h-6 mr-2"}),e.jsx("h3",{className:"text-md font-medium text-gray-900 dark:text-white",children:"Unichain Network"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdt.png",alt:"USDT",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDT"})]}),e.jsx("div",{className:"text-right",children:f.unichain.USDT.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):f.unichain.USDT.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:f.unichain.USDT.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(f.unichain.USDT.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:f.unichain.USDT.amount,onChange:j=>y("unichain","USDT",j.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>g("unichain","USDT"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdc.png",alt:"USDC",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDC"})]}),e.jsx("div",{className:"text-right",children:f.unichain.USDC.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):f.unichain.USDC.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:f.unichain.USDC.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(f.unichain.USDC.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:f.unichain.USDC.amount,onChange:j=>y("unichain","USDC",j.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>g("unichain","USDC"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:"/polygon.png",alt:"Polygon",className:"w-6 h-6 mr-2"}),e.jsx("h3",{className:"text-md font-medium text-gray-900 dark:text-white",children:"Polygon Network"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdt.png",alt:"USDT",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDT"})]}),e.jsx("div",{className:"text-right",children:f.polygon.USDT.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):f.polygon.USDT.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:f.polygon.USDT.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(f.polygon.USDT.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:f.polygon.USDT.amount,onChange:j=>y("polygon","USDT",j.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>g("polygon","USDT"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdc.png",alt:"USDC",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDC"})]}),e.jsx("div",{className:"text-right",children:f.polygon.USDC.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):f.polygon.USDC.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:f.polygon.USDC.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(f.polygon.USDC.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:f.polygon.USDC.amount,onChange:j=>y("polygon","USDC",j.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>g("polygon","USDC"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]})]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden mb-8",children:a.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No pending withdrawal requests"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[15%]",children:"Store"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[10%]",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[10%]",children:"Token"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[12%]",children:"Network"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[18%]",children:"Wallet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[15%]",children:"Requested"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[20%]",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:a.map(j=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:j.storeName||"Unknown Store"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:j.storeId})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",j.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/logos/${j.token.toLowerCase()}.png`,alt:j.token,className:"w-5 h-5 mr-2"}),j.token]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:j.network==="unichain"?"/unichain-logo.png":"/polygon.png",alt:j.network==="unichain"?"Unichain Testnet":"Polygon",className:"w-5 h-5 mr-2"}),j.network==="unichain"?"Unichain Testnet":"Polygon"]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"truncate max-w-[120px]",children:j.walletAddress}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(j.walletAddress),M.success("Wallet address copied!")},className:"text-[#FF1B6B] hover:text-[#D4145A] dark:hover:text-[#FF1B6B]",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(j.timestamp?.toDate()).toLocaleString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:r===j.id?e.jsxs("button",{disabled:!0,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-[#FF1B6B] opacity-50 cursor-not-allowed",children:[e.jsx(Yd,{className:"mr-1 animate-spin"}),"Processing..."]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-grow bg-gray-200 dark:bg-gray-700 rounded-full h-2 relative group",children:(()=>{const b=Date.now()-j.requestedAt,$=Math.min(100,b/12096e5*100),L=b>=12096e5;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-[#FF1B6B] h-2 rounded-full transition-all duration-500",style:{width:`${$}%`}}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity absolute -top-[80px] left-1/2 transform -translate-x-1/2 z-50",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg rounded-lg p-3 w-[280px]",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ia,{className:"text-[#FF1B6B] mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Withdrawal Hold Period"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:L?"Ready for approval! The holding period has passed.":"Withdrawals are held for 14 days before they can be approved to ensure all orders are delivered and no disputes are pending."}),!L&&e.jsxs("p",{className:"text-[#FF1B6B] text-xs mt-1 font-medium",children:["Time remaining: ",Math.ceil((12096e5-b)/(1e3*60*60*24))," days"]})]})]})}),e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -bottom-2",children:e.jsx("div",{className:"border-8 border-transparent border-t-white dark:border-t-gray-800"})})]})]})})()}),e.jsx("button",{onClick:()=>E(j.id),className:"p-1.5 rounded-full text-gray-500 hover:text-white hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-800 transition-colors",title:"Reject withdrawal",children:e.jsx(Sa,{className:"w-4 h-4"})})]}),Date.now()-j.requestedAt>=12096e5&&e.jsxs("button",{onClick:()=>C(j),className:"w-full inline-flex items-center justify-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:[e.jsx(ta,{className:"mr-1"}),"Approve"]})]})})]},j.id))})]})}),e.jsx(fh,{})]})}const Fs="0x5828D525fe00902AE22f2270Ac714616651894fF";function jh(){const[a,t]=i.useState({withdrawalMinimum:5,platformFee:2.5,withdrawalProcessingTime:"1",maintenanceMode:!1}),[s,n]=i.useState(!0),[r,l]=i.useState(!1),[d,o]=i.useState({type:"",text:""}),[m,c]=i.useState(!1),[u,x]=i.useState(""),f=localStorage.getItem("admin-theme")||"light";i.useEffect(()=>{(async()=>{try{const w=await ss();if(w){const p=await w.request({method:"eth_accounts"});p.length>0&&p[0].toLowerCase()===Fs.toLowerCase()&&(x(p[0]),c(!0))}}catch(w){console.error("Error checking wallet connection:",w)}})()},[]),i.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",E=>{E.length===0||E[0].toLowerCase()!==Fs.toLowerCase()?(c(!1),x("")):(x(E[0]),c(!0))})},[]),i.useEffect(()=>{m&&u.toLowerCase()===Fs.toLowerCase()?N():n(!1)},[m,u]);const N=async()=>{if(!(!m||u.toLowerCase()!==Fs.toLowerCase()))try{const E=await De(ge(ae,"settings","platform"));E.exists()?t(E.data()):await ts(ge(ae,"settings","platform"),a)}catch(E){console.error("Error fetching settings:",E),o({type:"error",text:"Failed to load settings"})}finally{n(!1)}},v=async E=>{if(E.preventDefault(),!(!m||u.toLowerCase()!==Fs.toLowerCase())){l(!0),o({type:"",text:""});try{await ts(ge(ae,"settings","platform"),a),o({type:"success",text:"Settings updated successfully"}),M.success("Settings updated successfully")}catch(w){console.error("Error updating settings:",w),o({type:"error",text:"Failed to update settings"}),M.error("Failed to update settings")}finally{l(!1)}}},C=E=>{const{name:w,value:p,type:y,checked:g}=E.target;t(j=>({...j,[w]:y==="checkbox"?g:y==="number"?parseFloat(p):p}))};return s?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):!m||u.toLowerCase()!==Fs.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(ia,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:`text-2xl font-bold ${f==="dark"?"text-white":"text-gray-800"} mb-2`,children:"Access Denied"}),e.jsx("p",{className:`${f==="dark"?"text-gray-300":"text-gray-600"} text-center mb-6`,children:"Please connect your admin wallet to access platform settings."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#FF1B6B] mb-6",children:"Platform Settings"}),e.jsx("div",{className:`${f==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:e.jsxs("form",{onSubmit:v,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${f==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Minimum Withdrawal Amount (USDT)"}),e.jsx("input",{type:"number",name:"withdrawalMinimum",value:a.withdrawalMinimum,onChange:C,className:`block w-full px-3 py-2 rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${f==="dark"?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"}`,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${f==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Platform Fee (%)"}),e.jsx("input",{type:"number",name:"platformFee",value:a.platformFee,onChange:C,className:`block w-full px-3 py-2 rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${f==="dark"?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"}`,min:"0",max:"100",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${f==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Withdrawal Processing Time (days)"}),e.jsx("input",{type:"text",name:"withdrawalProcessingTime",value:a.withdrawalProcessingTime,onChange:C,className:`block w-full px-3 py-2 rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${f==="dark"?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"maintenanceMode",checked:a.maintenanceMode,onChange:C,className:"h-4 w-4 text-[#FF1B6B] focus:ring-[#FF1B6B] border-gray-300 rounded"}),e.jsx("label",{className:`ml-2 block text-sm ${f==="dark"?"text-gray-300":"text-gray-900"}`,children:"Maintenance Mode"})]}),d.text&&e.jsx("div",{className:`p-4 rounded-md ${d.type==="success"?f==="dark"?"bg-green-900 text-green-300":"bg-green-50 text-green-800":f==="dark"?"bg-red-900 text-red-300":"bg-red-50 text-red-800"}`,children:d.text}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:r||!m||u.toLowerCase()!==Fs.toLowerCase(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50",children:[e.jsx(Qd,{className:"mr-2"}),r?"Saving...":"Save Changes"]})})]})})]})}const Es="0x5828D525fe00902AE22f2270Ac714616651894fF",vh=()=>e.jsxs(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-48"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 w-32 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-8 w-24 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]})]})]}),Nh=()=>e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsx("tr",{children:[...Array(9)].map((a,t)=>e.jsx("th",{className:"px-6 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-24"})},t))})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[...Array(5)].map((a,t)=>e.jsx("tr",{children:[...Array(9)].map((s,n)=>e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"})},n))},t))})]})})}),kh=({isOpen:a,onClose:t,onSubmit:s,refundRequest:n})=>{const[r,l]=i.useState(""),[d,o]=i.useState(!1),m=async()=>{if(!r.trim()){M.error("Please enter the transaction hash");return}o(!0);try{await s(r),t()}catch(c){console.error("Error submitting transaction hash:",c),M.error("Failed to submit transaction hash")}finally{o(!1)}};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Submit Transaction Hash"}),e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ia,{className:"text-blue-500 dark:text-blue-400 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Refund Details"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:["Amount: $",n.amount.toFixed(2)," ",n.order.paymentMethod.token]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:["To: ",n.paymentAddress.slice(0,6),"...",n.paymentAddress.slice(-4)]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Transaction Hash"}),e.jsx("input",{type:"text",value:r,onChange:c=>l(c.target.value),placeholder:"0x...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:m,disabled:d,className:`px-4 py-2 rounded-lg text-white ${d?"bg-[#FF1B6B] opacity-50 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"}`,children:d?"Submitting...":"Submit & Approve"})]})]})}):null};function Th(){Ve();const[a,t]=i.useState(!0),[s,n]=i.useState([]),[r,l]=i.useState([]),[d,o]=i.useState(!1),[m,c]=i.useState(""),[u,x]=i.useState(null),[f,N]=i.useState(!1),[v,C]=i.useState("pending"),[E,w]=i.useState(1),[p,y]=i.useState(1),g=10;localStorage.getItem("admin-theme"),i.useEffect(()=>{j()},[]),i.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",F=>{F.length===0||F[0].toLowerCase()!==Es.toLowerCase()?(o(!1),c("")):(c(F[0]),o(!0))})},[]),i.useEffect(()=>{d&&m.toLowerCase()===Es.toLowerCase()?T():t(!1)},[d,m]);const j=async()=>{try{const F=await ss();if(F){const U=await F.request({method:"eth_accounts"});U.length>0&&U[0].toLowerCase()===Es.toLowerCase()&&(c(U[0]),o(!0))}}catch(F){console.error("Error checking wallet connection:",F)}},T=async()=>{if(!(!d||m.toLowerCase()!==Es.toLowerCase()))try{const F=Te(be(ae,"refundRequests"),fe("status","==","pending"),Ue("createdAt","desc")),U=await Ae(F),V=Te(be(ae,"refundRequests"),fe("status","in",["approved","rejected"]),Ue("processedAt","desc")),P=await Ae(V),B=await Promise.all(U.docs.map(async D=>{const _=D.data(),H=ge(ae,"orders",_.orderId),X=await De(H);return{id:D.id,..._,order:X.exists()?{id:X.id,...X.data()}:null,createdAt:_.createdAt?.toDate()}})),k=await Promise.all(P.docs.map(async D=>{const _=D.data(),H=ge(ae,"orders",_.orderId),X=await De(H),z=ge(ae,"users",_.buyerId),se=await De(z),ee=se.exists()?se.data():null,te=ge(ae,"sellers",_.sellerId),Y=await De(te),W=Y.exists()?Y.data():null;return{id:D.id,..._,order:X.exists()?{id:X.id,...X.data()}:null,buyerName:ee?.name||"Unknown Buyer",sellerName:W?.storeName||W?.name||"Unknown Seller",createdAt:_.createdAt?.toDate(),processedAt:_.processedAt?.toDate()}}));n(B),l(k)}catch(F){console.error("Error fetching refund requests:",F),M.error("Failed to fetch refund requests")}finally{t(!1)}},b=async F=>{if(!d||m.toLowerCase()!==Es.toLowerCase()){M.error("Please connect your admin wallet");return}try{const U=await De(ge(ae,"orders",F.orderId));if(!U.exists()){M.error("Order not found");return}const V=U.data(),P=V.numericOrderId;if(!P){console.error("Missing numericOrderId in order:",V),M.error("Order ID not found. This might be an old order.");return}const B=V.paymentMethod?.buyerWallet;console.log("Raw buyer address from order:",B);let k;try{k=$s(B),console.log("Formatted buyer address:",k)}catch(pe){console.error("Error formatting buyer address:",pe),M.error("Invalid buyer wallet address format");return}if(!gt(k)){console.error("Address validation failed:",{original:B,formatted:k}),M.error("Invalid buyer wallet address in order");return}console.log("Full refund details:",{numericOrderId:P,buyerAddress:k,orderData:V,refundRequest:F,network:V.paymentMethod?.network,token:V.paymentMethod?.token});const D=await De(ge(ae,"sellers",F.sellerId));if(!D.exists()){M.error("Seller not found");return}const _=D.data().walletAddress;if(!gt(_)){console.error("Invalid seller address:",_),M.error("Invalid seller wallet address");return}const H=new he(window.ethereum),X=await H.getSigner(),z=F.order.paymentMethod.network,se=z.toString(),ee=F.order.paymentMethod.token;if(!dn[se]?.[ee]){M.error(`Unsupported token ${ee} on network ${se}`);return}const Y=await Bs(H,se);if(!Y){M.error("Failed to get contract instance");return}const W=Y.connect(X),Q=Number(F.amount).toFixed(6);console.log("Rounded refund amount:",Q);const G=Ie(Q,6);console.log("Parsed refund amount:",G.toString());const q=M.loading("Processing refund...");console.log("Processing refund with params:",{orderId:P,buyerAddress:k,sellerAddress:_,refundAmount:G.toString(),token:ee,network:se,roundedAmount:Q});const Z=await W.processRefund(P,k,_,G);await Z.wait(),await et(be(ae,"withdrawals"),{sellerId:F.sellerId,amount:Number(Q),token:ee,fee:0,netAmount:Number(Q),status:"completed",walletAddress:k,network:z===1301?"unichain":"polygon",timestamp:We(),requestedAt:Date.now(),completedAt:Date.now(),transactionHash:Z.hash,refundRequestId:F.id,type:"refund"}),await $e(ge(ae,"refundRequests",F.id),{status:"approved",processedAt:We(),transactionHash:Z.hash}),await $e(ge(ae,"orders",F.orderId),{status:"refunded"});const ie=ge(ae,"sellers",F.sellerId),ne=await De(ie);if(ne.exists()){const pe=ne.data().balance||0;await $e(ie,{balance:Math.max(0,pe-Number(Q))})}const K=ge(ae,"sellers",F.sellerId),xe=await De(K);if(xe.exists()){const pe=xe.data().netRevenue||0,ke=xe.data().monthlyRevenue||{},we=new Date,Me=`${we.getFullYear()}-${(we.getMonth()+1).toString().padStart(2,"0")}`,re={...ke};re[Me]=(re[Me]||0)-Number(Q),await $e(K,{netRevenue:Math.max(0,pe-Number(Q)),monthlyRevenue:re,lastUpdated:We()}),console.log("Updated seller revenue:",{previousRevenue:pe,refundAmount:Number(Q),newRevenue:Math.max(0,pe-Number(Q))})}M.dismiss(q),M.success("Refund processed successfully"),T()}catch(U){console.error("Error processing refund:",U),M.error(U.message.includes("user rejected")?"Transaction was rejected":U.message||"Failed to process refund")}},$=async F=>{try{await $e(ge(ae,"refundRequests",u.id),{status:"approved",processedAt:new Date,transactionHash:F}),await $e(ge(ae,"orders",u.orderId),{status:"refunded"});const U=Te(be(ae,"withdrawals"),fe("refundRequestId","==",u.id),Ht(1)),V=await Ae(U);V.empty||await $e(ge(ae,"withdrawals",V.docs[0].id),{status:"completed",completedAt:new Date,completionTxHash:F}),M.success("Refund approved successfully"),T()}catch(U){throw console.error("Error updating refund status:",U),U}},L=async F=>{if(!d||m.toLowerCase()!==Es.toLowerCase()){M.error("Please connect your admin wallet");return}try{await $e(ge(ae,"refundRequests",F),{status:"rejected",processedAt:new Date}),M.success("Refund request rejected"),T()}catch(U){console.error("Error rejecting refund:",U),M.error("Failed to reject refund request")}},S=p*g,A=S-g,h=r.slice(A,S),I=Math.ceil(r.length/g),O=F=>y(F);return i.useEffect(()=>{w(1),y(1)},[v]),a?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64"}),e.jsx("div",{className:"flex gap-2",children:[...Array(2)].map((F,U)=>e.jsx(R.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-10 w-32 bg-gray-200 dark:bg-gray-700 rounded-lg"},U))})]}),v==="pending"?e.jsx("div",{className:"space-y-6",children:[...Array(3)].map((F,U)=>e.jsx(vh,{},U))}):e.jsx(Nh,{})]}):!d||m.toLowerCase()!==Es.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(ia,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Please connect your admin wallet to access the refunds page."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Refunds Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>C("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v==="pending"?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Pending Requests"}),e.jsx("button",{onClick:()=>C("history"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${v==="history"?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Refunds History"})]})]}),v==="pending"?s.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No pending refund requests"})}):e.jsx("div",{className:"grid gap-6",children:s.map(F=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Order #",F.orderId.slice(-6)]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Requested on ",F.createdAt.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>b(F),className:"flex items-center gap-1 px-3 py-1 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:[e.jsx(es,{className:"w-4 h-4"}),"Request Withdrawal"]}),e.jsxs("button",{onClick:()=>L(F.id),className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[e.jsx(Sa,{className:"w-4 h-4"}),"Reject"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Buyer ID:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:F.buyerId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Seller ID:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:F.sellerId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Refund Amount:"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:["$",F.amount.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Payment Address:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300 break-all",children:F.paymentAddress})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Token:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:F.order?.paymentMethod?.token})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Network:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:F.order?.paymentMethod?.network===1301?"Unichain":"Polygon"})]})]})]})]},F.id))}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:r.length===0?e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No refund history found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsx("tr",{children:["Order ID","Buyer","Seller","Amount","Status","Token","Network","Processed On","Transaction"].map(F=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:F},F))})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:h.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",F.orderId.slice(-6)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:F.buyerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:F.sellerName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",F.amount.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F.status==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`,children:F.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:F.order?.paymentMethod?.token}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:F.order?.paymentMethod?.network===1301?"Unichain":"Polygon"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:F.processedAt.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:F.transactionHash?e.jsx("a",{href:`${F.order?.paymentMethod?.network===1301?"https://unichain-sepolia.blockscout.com/":"https://polygonscan.com"}/tx/${F.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#FF1B6B] hover:text-[#D4145A] dark:text-pink-400 dark:hover:text-pink-300",children:"View"}):"-"})]},F.id))})]})}),I>1&&e.jsx("div",{className:"px-4 py-3 flex items-center justify-center border-t border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex gap-1",children:Array.from({length:I},(F,U)=>e.jsx("button",{onClick:()=>O(U+1),className:`px-2 py-1 text-xs font-medium rounded-md transition-colors ${p===U+1?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:U+1},U+1))})})]})}),e.jsx(kh,{isOpen:f,onClose:()=>{N(!1),x(null)},onSubmit:$,refundRequest:u})]})}function Ch(){const{user:a}=Ve(),{isDarkMode:t}=Se(),[s,n]=i.useState(!0),[r,l]=i.useState([]),[d,o]=i.useState(1),m=10;i.useEffect(()=>{a?.sellerId&&c()},[a]);const c=async()=>{try{const E=Te(be(ae,"refundRequests"),fe("sellerId","==",a.sellerId),Ue("createdAt","desc")),w=await Ae(E),p=await Promise.all(w.docs.map(async y=>{const g=y.data();try{const j=ge(ae,"orders",g.orderId),b=(await De(j)).data();return{id:y.id,...g,buyerName:b?.buyerInfo?.name||b?.buyerId||"Anonymous",createdAt:g.createdAt?.toDate(),processedAt:g.processedAt?.toDate()}}catch(j){return console.error("Error fetching order:",j),{id:y.id,...g,buyerName:g.buyerId||"Anonymous",createdAt:g.createdAt?.toDate(),processedAt:g.processedAt?.toDate()}}}));l(p)}catch(E){console.error("Error fetching refund requests:",E),M.error("Failed to fetch refund requests")}finally{n(!1)}},u=E=>{switch(E){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=d*m,f=x-m,N=r.slice(f,x),v=Math.ceil(r.length/m),C=E=>o(E);return s?e.jsx("div",{className:`flex items-center justify-center min-h-[200px] ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:`p-4 ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h1",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Buyers Refunds"})}),r.length===0?e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-4 text-center`,children:[e.jsx(Kt,{className:`w-12 h-12 ${t?"text-gray-600":"text-gray-400"} mx-auto mb-4`}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No refund requests found"})]}):e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow overflow-hidden`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:`${t?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Order ID"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Buyer"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Amount"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Requested On"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Processed On"})]})}),e.jsx("tbody",{className:`${t?"bg-gray-800 divide-y divide-gray-700":"bg-white divide-y divide-gray-200"}`,children:N.map(E=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700/50":"hover:bg-gray-50"}`,children:[e.jsxs("td",{className:`px-4 py-3 whitespace-nowrap text-sm font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["#",E.orderId.slice(-6)]}),e.jsx("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-300":"text-gray-500"}`,children:E.buyerName}),e.jsxs("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-200":"text-gray-900"}`,children:["$",E.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${u(E.status)}`,children:E.status})}),e.jsx("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-300":"text-gray-500"}`,children:E.createdAt.toLocaleString()}),e.jsx("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-300":"text-gray-500"}`,children:E.processedAt?E.processedAt.toLocaleString():"-"})]},E.id))})]})}),v>1&&e.jsx("div",{className:`px-4 py-3 flex items-center justify-center ${t?"border-t border-gray-700":"border-t border-gray-200"}`,children:e.jsx("div",{className:"flex gap-1",children:Array.from({length:v},(E,w)=>e.jsx("button",{onClick:()=>C(w+1),className:`px-2 py-1 text-xs font-medium rounded-md transition-colors ${d===w+1?"bg-[#FF1B6B] text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:w+1},w+1))})})]}),e.jsx("div",{className:`mt-4 ${t?"bg-blue-900/20":"bg-blue-50"} border ${t?"border-blue-800/30":"border-blue-200"} rounded-lg p-3`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Kt,{className:`text-base mt-0.5 ${t?"text-blue-400":"text-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-blue-300":"text-blue-800"}`,children:"About Refund Requests"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-blue-300/90":"text-blue-700"}`,children:"Refund requests are automatically created when buyers request refunds for cancelled orders. Our platform will process and handle these refunds, ensuring proper deduction from your account balance. The refunded amount will be automatically deducted from your total sales."})]})]})})]})})}const ea=()=>{const{isDarkMode:a}=Se();return e.jsx(R.div,{className:`w-full h-full ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Sh=()=>{const{isDarkMode:a}=Se();return e.jsx("div",{className:"space-y-6",children:[1,2,3].map(t=>e.jsx("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(ea,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(ea,{})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(ea,{})}),e.jsx("div",{className:"w-36 h-4",children:e.jsx(ea,{})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-28 h-4",children:e.jsx(ea,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(ea,{})})]})]})]})},t))})},Fh=a=>{switch(a){case"approved":return e.jsx($i,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(Jd,{className:"w-5 h-5 text-red-500"});default:return e.jsx(Zd,{className:"w-5 h-5 text-yellow-500"})}},Eh=(a,t)=>{switch(a){case"approved":return t?"bg-[#FF1B6B]/20 border border-[#FF1B6B]/30 text-[#FF1B6B]":"bg-[#FF1B6B]/10 border border-[#FF1B6B]/20 text-[#FF1B6B]";case"rejected":return t?"bg-red-900/20 border border-red-800/30 text-red-400":"bg-red-50 border border-red-200 text-red-700";default:return t?"bg-yellow-900/20 border border-yellow-800/30 text-yellow-400":"bg-yellow-50 border border-yellow-200 text-yellow-700"}},Ah=a=>{switch(a){case"approved":return"Approved";case"rejected":return"Rejected";default:return"Processing"}};function Ih(){const{user:a}=Ve(),{isDarkMode:t}=Se(),[s,n]=i.useState(!0),[r,l]=i.useState([]);i.useEffect(()=>{a?.uid&&d()},[a]);const d=async()=>{try{const o=Te(be(ae,"refundRequests"),fe("buyerId","==",a.uid),Ue("createdAt","desc")),c=(await Ae(o)).docs.map(u=>({id:u.id,...u.data(),createdAt:u.data().createdAt?.toDate(),processedAt:u.data().processedAt?.toDate()}));l(c)}catch(o){console.error("Error fetching refunds:",o),M.error("Failed to load refund history")}finally{n(!1)}};return s?e.jsx(Sh,{}):e.jsxs("div",{className:`max-w-2xl mx-auto p-4 space-y-4 ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("h1",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-800"}`,children:"Buyers Refunds"}),r.length===0?e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4 text-center`,children:e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No refund requests found"})}):e.jsx("div",{className:"space-y-3",children:r.map(o=>e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow-sm border ${t?"border-gray-700 hover:border-[#FF1B6B]":"border-gray-100 hover:border-[#FF1B6B]"} transition-colors duration-200`,children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:`text-base font-semibold ${t?"text-gray-100":"text-gray-800"}`,children:["Order #",o.orderId.slice(-6)]}),e.jsxs("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium flex items-center gap-1.5 ${Eh(o.status,t)}`,children:[Fh(o.status),Ah(o.status)]})]}),e.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["Requested on ",o.createdAt.toLocaleString()]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`${t?"bg-[#FF1B6B]/10":"bg-[#FF1B6B]/5"} p-3 rounded-lg`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`text-xs font-semibold ${t?"text-gray-300":"text-gray-700"}`,children:"Amount"})}),e.jsxs("p",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:["$",o.amount.toFixed(2)," ",e.jsx("span",{className:"text-[#FF1B6B]",children:o.orderDetails.paymentMethod.token})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Payment Address"}),e.jsx("div",{className:`${t?"bg-gray-700":"bg-gray-50"} p-2 rounded-lg`,children:e.jsx("code",{className:`text-xs ${t?"text-gray-200":"text-gray-800"} break-all font-mono`,children:o.paymentAddress})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Network"}),e.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1.5 ${t?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:e.jsx("span",{className:`text-xs ${t?"text-gray-200":"text-gray-800"}`,children:o.orderDetails.paymentMethod.network===1301?"Unichain":"Polygon"})})]}),o.status==="approved"&&o.transactionHash&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Transaction Hash"}),e.jsx("div",{className:`${t?"bg-[#FF1B6B]/10 border-[#FF1B6B]/20":"bg-[#FF1B6B]/5 border-[#FF1B6B]/10"} border p-2 rounded-lg`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:`text-xs ${t?"text-gray-200":"text-gray-800"} font-mono truncate`,children:o.transactionHash}),e.jsxs("a",{href:`${o.orderDetails.paymentMethod.network===1301?"https://unichain-sepolia.blockscout.com/tx/":"https://polygonscan.com/tx/"}${o.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 flex items-center gap-1 text-[#FF1B6B] hover:text-[#D4145A] transition-colors",children:[e.jsx("span",{className:"text-xs font-medium",children:"View"}),e.jsx(Xd,{className:"w-3.5 h-3.5"})]})]})})]}),o.status!=="pending"&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Processed on"}),e.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1.5 ${t?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:e.jsx("span",{className:`text-xs ${t?"text-gray-200":"text-gray-800"}`,children:o.processedAt.toLocaleString()})})]})]})]})]})},o.id))})]})}function Bh(){const{isDarkMode:a}=Se(),t=[{title:"Platform Overview",icon:e.jsx(Kd,{className:"w-6 h-6"}),items:["These terms govern your use of our platform and services","You must be 18 years or older to use the platform","By using the platform, you agree to these terms and conditions","We reserve the right to update these terms with notice to users"]},{title:"Platform Fees and Charges",icon:e.jsx(es,{className:"w-6 h-6"}),items:["5% platform fee is automatically deducted from each sale","Refund requests will have a 5% fee deducted (platform fee is non-refundable)","Minimum withdrawal amount: 5 USDC/USDT for sellers","Admin can update platform fees (maximum 10%)"]},{title:"Order Processing and Shipping",icon:e.jsx(ec,{className:"w-6 h-6"}),items:["Sellers have 3 days to confirm shipping for orders","Orders not shipped within 3 days may be automatically cancelled","Sellers must provide valid tracking information when confirming shipping","Buyers are responsible for providing correct delivery addresses"]},{title:"Refunds and Cancellations",icon:e.jsx(Ri,{className:"w-6 h-6"}),items:["Only cancelled orders are eligible for refund requests","Refund requests typically take up to 1 week to process","Refunds will be processed to the original payment address","Platform fees (5%) are non-refundable on refunded orders","3-day window to request refund for cancelled orders"]},{title:"Payment and Withdrawals",icon:e.jsx(es,{className:"w-6 h-6"}),items:["Supported payment tokens: USDT and USDC","Payments are processed on either Unichain or Polygon network","Sellers are responsible for gas fees during withdrawals","Withdrawals are processed on the seller's selected network","Platform may hold funds for pending refunds","Withdrawal processing requires confirmation of delivery for all orders in the timeframe","If buyers don't confirm delivery, withdrawals will be processed 2-3 weeks after shipping confirmation"]},{title:"Seller Obligations",icon:e.jsx(tc,{className:"w-6 h-6"}),items:["Sellers must maintain accurate product listings","Sellers are responsible for order fulfillment within the 3-day window","Sellers must handle shipping and provide tracking information","False shipping confirmations will result in rejected withdrawal requests","Sellers' available balance reflects total sales minus platform fees and pending refunds","Sellers must comply with all applicable laws and regulations","Posting of NSFW content is strictly prohibited and will result in immediate account termination","Platform reserves the right to delete seller accounts without notice for NSFW violations"]},{title:"Buyer Protection",icon:e.jsx(sc,{className:"w-6 h-6"}),items:["3-day window to request refund for cancelled orders","Refund amounts will be processed minus the 5% platform fee","Buyers can track order status and shipping information","Buyers can view refund request status and transaction details","Platform maintains records of all transactions for buyer security"]},{title:"Account Security",icon:e.jsx(ac,{className:"w-6 h-6"}),items:["Users are responsible for maintaining account security","Account credentials must not be shared with third parties","Users must notify us immediately of any unauthorized access","We reserve the right to suspend accounts for security violations"]},{title:"Platform Rights",icon:e.jsx(Li,{className:"w-6 h-6"}),items:["The platform reserves the right to pause operations if necessary","Admin can update platform fees (maximum 10%)","Platform may hold funds for pending refunds","Platform maintains records of all transactions and activities","We may modify or terminate services with notice to users","Any suspicious activity or attempts to manipulate sales will result in immediate account termination","Platform monitors and audits all transactions for potential manipulation"]}];return e.jsxs("div",{className:`max-w-5xl mx-auto px-4 py-8 ${a?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:`text-3xl font-bold mb-4 ${a?"text-gray-100":"text-gray-900"}`,children:"Terms and Conditions"}),e.jsx("p",{className:`${a?"text-gray-400":"text-gray-600"} max-w-2xl mx-auto`,children:"Please read these terms and conditions carefully before using the MerchStore platform. These terms outline the rules and regulations for the use of our services."})]}),e.jsx("div",{className:"space-y-8",children:t.map((s,n)=>e.jsx("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-[#FF1B6B]/10 rounded-lg text-[#FF1B6B]",children:s.icon}),e.jsx("h2",{className:`text-xl font-semibold ${a?"text-gray-100":"text-gray-900"}`,children:s.title})]}),e.jsx("ul",{className:"space-y-3",children:s.items.map((r,l)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#FF1B6B] mt-1.5",children:"•"}),e.jsx("span",{className:`${a?"text-gray-300":"text-gray-600"}`,children:r})]},l))})]})},s.title))}),e.jsxs("div",{className:"mt-12 text-center text-sm",children:[e.jsxs("p",{className:`${a?"text-gray-400":"text-gray-500"}`,children:["Last updated: ",new Date().toLocaleDateString()]}),e.jsx("p",{className:`mt-2 ${a?"text-gray-400":"text-gray-500"}`,children:"By using the MerchStore platform, you agree to these terms and conditions. We reserve the right to modify these terms at any time."})]})]})}function Dh(){const{isDarkMode:a}=Se(),[t,s]=i.useState(""),[n,r]=i.useState(!1),{resetPassword:l}=Ve(),d=async o=>{o.preventDefault(),r(!0);try{await l(t)}catch(m){M.error(m.message)}finally{r(!1)}};return e.jsx("div",{className:`min-h-screen ${a?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-md w-full space-y-8 ${a?"bg-gray-800":"bg-white"} p-8 rounded-2xl shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-3xl font-bold ${a?"text-white":"text-gray-900"}`,children:"Reset Password"}),e.jsx("p",{className:`mt-2 text-sm ${a?"text-gray-300":"text-gray-600"}`,children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{onSubmit:d,className:"mt-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:o=>s(o.target.value),className:`mt-1 block w-full px-3 py-2 border ${a?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors`,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?"Sending reset link...":"Send reset link"}),e.jsx("div",{className:"text-center",children:e.jsx(Ge,{to:"/merch-store/login",className:`text-sm font-medium ${a?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"Back to login"})})]})]})]})})}function Mh(){const[a,t]=i.useState(""),[s,n]=i.useState(""),[r,l]=i.useState(!1),[d,o]=i.useState(!0),[m,c]=i.useState(""),u=rt(),x=fs();i.useEffect(()=>{const v=new URLSearchParams(x.search).get("oobCode");if(!v){M.error("Invalid password reset link"),u("/merch-store/login");return}vc(Gt,v).then(()=>{c(v),o(!1)}).catch(C=>{console.error("Error verifying reset code:",C),M.error("This password reset link has expired or is invalid"),u("/merch-store/login")})},[u,x]);const f=async N=>{if(N.preventDefault(),a!==s){M.error("Passwords do not match");return}if(a.length<6){M.error("Password must be at least 6 characters long");return}l(!0);try{await Nc(Gt,m,a),M.success("Password reset successful! Please sign in with your new password."),u("/merch-store/login")}catch(v){console.error("Error resetting password:",v),M.error(v.message)}finally{l(!1)}};return d?e.jsx("div",{className:"min-h-screen bg-[#FFF5F7] flex items-center justify-center p-4",children:e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verifying reset link..."})]})}):e.jsx("div",{className:"min-h-screen bg-[#FFF5F7] flex items-center justify-center p-4",children:e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Set New Password"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Please enter your new password below."})]}),e.jsxs("form",{onSubmit:f,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:a,onChange:N=>t(N.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:N=>n(N.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors",placeholder:"Confirm new password"})]})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Resetting password...":"Reset Password"})]})]})})}const Ph=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-4 border-r",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(R.div,{className:`h-7 w-32 ${a?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsx("div",{className:"overflow-y-auto",children:[...Array(5)].map((t,s)=>e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(R.div,{className:`h-5 w-32 ${a?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.1}}),e.jsx(R.div,{className:`h-3 w-3 ${a?"bg-gray-700":"bg-gray-200"} rounded-full`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.1}})]}),e.jsx(R.div,{className:`h-4 w-48 ${a?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.1}})]},s))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(R.div,{className:`h-6 w-32 ${a?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsxs("div",{className:"p-4 space-y-4",children:[[...Array(6)].map((t,s)=>e.jsx("div",{className:`flex ${s%2===0?"justify-end":"justify-start"}`,children:e.jsx(R.div,{className:`rounded-lg h-10 ${s%2===0?"bg-pink-100":a?"bg-gray-700":"bg-gray-200"} ${s%2===0?"w-64":"w-48"}`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.1}})},s)),e.jsx("div",{className:"flex justify-start",children:e.jsx(R.div,{className:`w-[280px] h-[300px] ${a?"bg-gray-700":"bg-gray-200"} rounded-xl`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]}),e.jsx("div",{className:"p-4 border-t mt-auto",children:e.jsx(R.div,{className:`h-10 ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]})]})},$h=({message:a,currentUser:t})=>{if(a.senderId!==t.uid)return null;const s=n=>n?n.toDate().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[e.jsx("span",{className:"text-gray-400",children:s(a.timestamp)}),e.jsxs("div",{className:"text-gray-400",children:[!a.delivered&&e.jsx(Rs,{className:"text-sm"}),a.delivered&&!a.read&&e.jsx(ar,{className:"text-sm"}),a.delivered&&a.read&&e.jsx(ar,{className:"text-sm text-[#FF1B6B]"})]})]})},Lh=({message:a,currentUser:t,onEdit:s,onDelete:n})=>{const[r,l]=i.useState(!1),[d,o]=i.useState(a.text),m=a.senderId===t.uid,c=rt(),{isDarkMode:u}=Se(),x=v=>e.jsx("div",{className:`my-4 ${m?"ml-auto":""} max-w-[280px]`,children:e.jsxs("button",{onClick:()=>c(`/merch-store/product/${v.productId}`),className:`w-full rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow ${m?u?"border-pink-900/20":"border-pink-100":u?"border-gray-700":"border-gray-100"}`,children:[e.jsx("img",{src:v.image,alt:v.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:`p-3 ${u?"bg-gray-800":"bg-white"} text-left`,children:[e.jsx("h4",{className:`font-medium ${u?"text-gray-100":"text-gray-800"}`,children:v.name}),e.jsx("p",{className:`text-sm ${u?"text-gray-400":"text-gray-500"} mt-1`,children:v.description}),e.jsxs("p",{className:"font-medium mt-2 text-[#FF1B6B]",children:["$",v.price.toFixed(2)]})]})]})}),f=()=>{s(a.id,d),l(!1)},N=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),f()),v.key==="Escape"&&(l(!1),o(a.text))};return e.jsx("div",{className:`mb-6 ${m?"text-right":""}`,children:e.jsx(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:e.jsx("div",{className:"inline-block relative group",children:r?e.jsxs("div",{className:"flex flex-col gap-2 min-w-[300px]",children:[e.jsx("textarea",{value:d,onChange:v=>o(v.target.value),onKeyDown:N,className:`w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] min-h-[100px] resize-none ${u?"bg-gray-700 border-gray-600 text-gray-100":"border-gray-200 text-gray-900"}`,autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("button",{onClick:f,className:`px-3 py-1.5 text-[#FF1B6B] ${u?"hover:bg-pink-900/20":"hover:bg-pink-50"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(Rs,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Save"})]}),e.jsxs("button",{onClick:()=>{l(!1),o(a.text)},className:`px-3 py-1.5 ${u?"text-gray-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-100"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(mt,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:`inline-block max-w-[80%] relative ${m?"ml-auto":""}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[m&&!a.productCard&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>l(!0),className:`p-1.5 ${u?"text-gray-400 hover:text-[#FF1B6B] hover:bg-pink-900/20":"text-gray-500 hover:text-[#FF1B6B] hover:bg-pink-50"} rounded-full transition-colors`,children:e.jsx(lo,{className:"text-sm"})}),e.jsx("button",{onClick:()=>n(a.id),className:`p-1.5 ${u?"text-gray-400 hover:text-red-500 hover:bg-red-900/20":"text-gray-500 hover:text-red-500 hover:bg-red-50"} rounded-full transition-colors`,children:e.jsx(Ls,{className:"text-sm"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:`rounded-2xl px-4 py-2.5 ${m?"bg-[#FF1B6B] text-white":u?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-800"}`,children:e.jsx("p",{className:"whitespace-pre-wrap break-words text-left",children:a.text})}),a.edited&&e.jsx("div",{className:`text-xs ${u?"text-gray-500":"text-gray-400"} mt-0.5 text-right`,children:"edited"}),a.productCard&&x(a.productCard),e.jsx($h,{message:a,currentUser:t})]})]})})})})})})},Rh=()=>{const{conversationId:a}=Os(),t=rt(),{user:s}=Ve(),[n,r]=i.useState([]),[l,d]=i.useState(null),[o,m]=i.useState([]),[c,u]=i.useState(""),x=i.useRef(null),[f,N]=i.useState(!0),{isDarkMode:v}=Se();i.useEffect(()=>{if(!s)return;const p=Te(be(ae,"conversations"),fe("participants","array-contains",s.uid),Ue("updatedAt","desc")),y=_t(p,g=>{const j=g.docs.map(T=>({id:T.id,...T.data()}));r(j),N(!1)});return()=>y()},[s]),i.useEffect(()=>{if(!a)return;const p=Te(be(ae,"messages"),fe("conversationId","==",a),Ue("timestamp","asc")),y=_t(p,g=>{const j=g.docs.map(T=>({id:T.id,...T.data()}));if(m(j),l){const T=g.docs.filter(b=>b.data().senderId!==s.uid&&(!b.data().read||!b.data().delivered));if(T.length>0){const b=on(ae);T.forEach($=>{b.update($.ref,{delivered:!0,read:!0})}),b.commit()}$e(ge(ae,"conversations",a),{[`unreadCount.${s.uid}`]:0})}});return()=>y()},[a,l]),i.useEffect(()=>{const p=n.find(y=>y.id===a);d(p)},[a,n]),i.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[o]);const C=async p=>{if(p.preventDefault(),!c.trim())return;const y=c.trim();u("");try{await et(be(ae,"messages"),{conversationId:a,senderId:s.uid,text:y,timestamp:We(),delivered:!1,read:!1}),await $e(ge(ae,"conversations",a),{lastMessage:y,lastMessageTime:We(),[`unreadCount.${l.sellerId}`]:(l.unreadCount?.[l.sellerId]||0)+1,updatedAt:We()})}catch(g){console.error("Error sending message:",g),M.error("Failed to send message"),u(y)}},E=async(p,y)=>{if(y.trim())try{await $e(ge(ae,"messages",p),{text:y.trim(),edited:!0,editedAt:We()})}catch(g){console.error("Error editing message:",g),M.error("Failed to edit message")}},w=async p=>{try{await Us(ge(ae,"messages",p)),M.success("Message deleted")}catch(y){console.error("Error deleting message:",y),M.error("Failed to delete message")}};return f?e.jsx("div",{className:`min-h-screen ${v?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${v?"bg-gray-800":"bg-white"} rounded-xl shadow-sm overflow-hidden`,children:e.jsx(Ph,{})})})}):e.jsx("div",{className:`min-h-screen ${v?"bg-gray-900":"bg-gradient-to-br from-gray-50 to-pink-50/30"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${v?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden backdrop-blur-xl`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:`col-span-4 border-r ${v?"border-gray-700":"border-gray-100"}`,children:[e.jsx("div",{className:`p-6 border-b ${v?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-semibold ${v?"text-gray-100":"text-gray-800"}`,children:"Messages"})}),e.jsx("div",{className:"overflow-y-auto h-[calc(100vh-12rem)] scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-gray-50",children:n.map(p=>e.jsx("button",{onClick:()=>t(`/merch-store/inbox/${p.id}`),className:`w-full p-6 border-b ${v?"border-gray-700 hover:bg-gray-700/50":"border-gray-100 hover:bg-gray-50/80"} transition-all ${p.id===a?v?"bg-gray-700/50":"bg-gray-50/80":""}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("h3",{className:`font-medium ${v?"text-gray-100":"text-gray-800"} truncate ${p.unreadCount?.[s.uid]>0?"font-bold":""}`,children:s.uid===p.buyerId?p.sellerName:p.buyerName}),p.isVerifiedSeller&&s.uid===p.buyerId&&e.jsxs("div",{className:"group relative inline-flex items-center shrink-0",children:[e.jsx(Qt,{className:"!w-[10px] !h-[10px] min-w-[10px] min-h-[10px]"}),e.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-1 py-0.5 ${v?"bg-gray-800":"bg-gray-900"} text-white text-[8px] rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10`,children:"Verified Store"})]})]}),e.jsx("p",{className:`text-sm truncate ${p.unreadCount?.[s.uid]>0?v?"text-gray-100 font-medium":"text-gray-900 font-medium":v?"text-gray-400":"text-gray-500"}`,children:p.lastMessage||"No messages yet"}),p.unreadCount?.[s.uid]>0&&e.jsxs("div",{className:"mt-1 text-xs text-[#FF1B6B]",children:[p.unreadCount[s.uid]," new ",p.unreadCount[s.uid]===1?"message":"messages"]})]}),p.unreadCount?.[s.uid]>0&&e.jsx("span",{className:"bg-[#FF1B6B] text-white text-xs px-2.5 py-1.5 rounded-full ml-3 shrink-0",children:p.unreadCount[s.uid]})]})},p.id))})]}),e.jsx("div",{className:`col-span-8 ${v?"bg-gray-800":"bg-white"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`p-6 border-b ${v?"border-gray-700 bg-gray-800/80":"border-gray-100 bg-white/80"} backdrop-blur-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"md:hidden hover:text-[#FF1B6B] transition-colors",children:e.jsx(la,{className:"text-xl"})}),e.jsx("h3",{className:`font-medium ${v?"text-gray-100":"text-gray-800"}`,children:s.uid===l.buyerId?l.sellerName:l.buyerName})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto h-[calc(100vh-16rem)] no-scrollbar",children:[o.map(p=>e.jsx(Lh,{message:p,currentUser:s,onEdit:E,onDelete:w},p.id)),e.jsx("div",{ref:x})]}),e.jsx("form",{onSubmit:C,className:`p-4 border-t ${v?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),placeholder:"Type a message...",className:`flex-1 px-4 py-3 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] transition-all ${v?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400":"border-gray-200 text-gray-900"}`}),e.jsx("button",{type:"submit",className:"px-5 py-3 bg-[#FF1B6B] text-white rounded-xl hover:bg-[#D4145A] transition-colors",children:e.jsx(oo,{className:"text-xl"})})]})})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:`w-16 h-16 mb-4 ${v?"text-gray-600":"text-gray-300"}`,children:e.jsx(Ea,{className:"w-full h-full"})}),e.jsx("p",{className:v?"text-gray-400":"text-gray-500",children:"Select a conversation to start messaging"})]})})]})})})})},Oh=()=>{const{isDarkMode:a}=Se();return e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-4 border-r",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(R.div,{className:`h-7 w-48 ${a?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsx("div",{className:"overflow-y-auto",children:[...Array(5)].map((t,s)=>e.jsxs("div",{className:"p-4 border-b",children:[e.jsx(R.div,{className:`h-5 w-32 ${a?"bg-gray-700":"bg-gray-200"} rounded mb-2`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.1}}),e.jsx(R.div,{className:`h-4 w-48 ${a?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.1}})]},s))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(R.div,{className:`h-6 w-32 ${a?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsxs("div",{className:"p-4 space-y-4",children:[[...Array(6)].map((t,s)=>e.jsx("div",{className:`flex ${s%2===0?"justify-end":"justify-start"}`,children:e.jsx(R.div,{className:`rounded-lg h-10 ${s%2===0?"bg-pink-100":a?"bg-gray-700":"bg-gray-200"} ${s%2===0?"w-64":"w-48"}`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:s*.1}})},s)),e.jsx("div",{className:"flex justify-start",children:e.jsx(R.div,{className:`w-[280px] h-[300px] ${a?"bg-gray-700":"bg-gray-200"} rounded-xl`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]}),e.jsx("div",{className:"p-4 border-t mt-auto",children:e.jsx(R.div,{className:`h-10 ${a?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]})]})},_h=({message:a,currentUser:t})=>{if(a.senderId!==t.uid)return null;const s=n=>n?n.toDate().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[e.jsx("span",{className:"text-gray-400",children:s(a.timestamp)}),e.jsxs("div",{className:"text-gray-400",children:[!a.delivered&&e.jsx(Rs,{className:"text-sm"}),a.delivered&&!a.read&&e.jsx(ar,{className:"text-sm"}),a.delivered&&a.read&&e.jsx(ar,{className:"text-sm text-[#FF1B6B]"})]})]})},Uh=({message:a,currentUser:t,onEdit:s,onDelete:n})=>{const[r,l]=i.useState(!1),[d,o]=i.useState(a.text),m=a.senderId===t.uid,c=rt(),{isDarkMode:u}=Se(),x=v=>e.jsx("div",{className:`my-4 ${m?"ml-auto":""} max-w-[280px]`,children:e.jsxs("button",{onClick:()=>c(`/merch-store/product/${v.productId}`),className:`w-full rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow ${m?u?"border-pink-900/20":"border-pink-100":u?"border-gray-700":"border-gray-100"}`,children:[e.jsx("img",{src:v.image,alt:v.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:`p-3 ${u?"bg-gray-800":"bg-white"} text-left`,children:[e.jsx("h4",{className:`font-medium ${u?"text-gray-100":"text-gray-800"}`,children:v.name}),e.jsx("p",{className:`text-sm ${u?"text-gray-400":"text-gray-500"} mt-1`,children:v.description}),e.jsxs("p",{className:"font-medium mt-2 text-[#FF1B6B]",children:["$",v.price.toFixed(2)]})]})]})}),f=()=>{s(a.id,d),l(!1)},N=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),f()),v.key==="Escape"&&(l(!1),o(a.text))};return e.jsx("div",{className:`mb-6 ${m?"text-right":""}`,children:e.jsx(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:e.jsx("div",{className:"inline-block relative group",children:r?e.jsxs("div",{className:"flex flex-col gap-2 min-w-[300px]",children:[e.jsx("textarea",{value:d,onChange:v=>o(v.target.value),onKeyDown:N,className:`w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] min-h-[100px] resize-none ${u?"bg-gray-700 border-gray-600 text-gray-100":"border-gray-200 text-gray-900"}`,autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("button",{onClick:f,className:`px-3 py-1.5 text-[#FF1B6B] ${u?"hover:bg-pink-900/20":"hover:bg-pink-50"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(Rs,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Save"})]}),e.jsxs("button",{onClick:()=>{l(!1),o(a.text)},className:`px-3 py-1.5 ${u?"text-gray-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-100"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(mt,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:`inline-block max-w-[80%] relative ${m?"ml-auto":""}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[m&&!a.productCard&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>l(!0),className:`p-1.5 ${u?"text-gray-400 hover:text-[#FF1B6B] hover:bg-pink-900/20":"text-gray-500 hover:text-[#FF1B6B] hover:bg-pink-50"} rounded-full transition-colors`,children:e.jsx(lo,{className:"text-sm"})}),e.jsx("button",{onClick:()=>n(a.id),className:`p-1.5 ${u?"text-gray-400 hover:text-red-500 hover:bg-red-900/20":"text-gray-500 hover:text-red-500 hover:bg-red-50"} rounded-full transition-colors`,children:e.jsx(Ls,{className:"text-sm"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:`rounded-2xl px-4 py-2.5 ${m?"bg-[#FF1B6B] text-white":u?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-800"}`,children:e.jsx("p",{className:"whitespace-pre-wrap break-words text-left",children:a.text})}),a.edited&&e.jsx("div",{className:`text-xs ${u?"text-gray-500":"text-gray-400"} mt-0.5 text-right`,children:"edited"}),a.productCard&&x(a.productCard),e.jsx(_h,{message:a,currentUser:t})]})]})})})})})})},Xr=()=>{const{conversationId:a}=Os(),t=rt(),{user:s}=Ve(),[n,r]=i.useState([]),[l,d]=i.useState(null),[o,m]=i.useState([]),[c,u]=i.useState(""),x=i.useRef(null),[f,N]=i.useState(!0),{isDarkMode:v}=Se();i.useEffect(()=>{if(!s)return;const p=Te(be(ae,"conversations"),fe("participants","array-contains",s.sellerId),Ue("updatedAt","desc")),y=_t(p,g=>{const j=g.docs.map(T=>({id:T.id,...T.data()}));r(j),N(!1)});return()=>y()},[s]),i.useEffect(()=>{if(!a)return;const p=Te(be(ae,"messages"),fe("conversationId","==",a),Ue("timestamp","asc")),y=_t(p,g=>{const j=g.docs.map(T=>({id:T.id,...T.data()}));if(m(j),l){const T=g.docs.filter(b=>b.data().senderId!==s.uid&&(!b.data().read||!b.data().delivered));if(T.length>0){const b=on(ae);T.forEach($=>{b.update($.ref,{delivered:!0,read:!0})}),b.commit()}$e(ge(ae,"conversations",a),{[`unreadCount.${s.sellerId}`]:0})}});return()=>y()},[a,l]),i.useEffect(()=>{const p=n.find(y=>y.id===a);d(p)},[a,n]),i.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[o]);const C=async p=>{if(p.preventDefault(),!c.trim())return;const y=c.trim();u("");try{await et(be(ae,"messages"),{conversationId:a,senderId:s.uid,text:y,timestamp:We(),delivered:!1,read:!1}),await $e(ge(ae,"conversations",a),{lastMessage:y,lastMessageTime:We(),[`unreadCount.${l.buyerId}`]:(l.unreadCount?.[l.buyerId]||0)+1,updatedAt:We()})}catch(g){console.error("Error sending message:",g),M.error("Failed to send message"),u(y)}},E=async(p,y)=>{if(y.trim())try{await $e(ge(ae,"messages",p),{text:y.trim(),edited:!0,editedAt:We()})}catch(g){console.error("Error editing message:",g),M.error("Failed to edit message")}},w=async p=>{try{await Us(ge(ae,"messages",p)),M.success("Message deleted")}catch(y){console.error("Error deleting message:",y),M.error("Failed to delete message")}};return f?e.jsx("div",{className:`min-h-screen ${v?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${v?"bg-gray-800":"bg-white"} rounded-xl shadow-sm overflow-hidden`,children:e.jsx(Oh,{})})})}):e.jsx("div",{className:`min-h-screen ${v?"bg-gray-900":"bg-gradient-to-br from-gray-50 to-pink-50/30"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${v?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden backdrop-blur-xl`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:`col-span-4 border-r ${v?"border-gray-700":"border-gray-100"}`,children:[e.jsx("div",{className:`p-6 border-b ${v?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-semibold ${v?"text-gray-100":"text-gray-800"}`,children:"Customer Messages"})}),e.jsx("div",{className:"overflow-y-auto h-[calc(100vh-12rem)] scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-gray-50",children:n.map(p=>e.jsx("button",{onClick:()=>t(`/merch-store/seller/inbox/${p.id}`),className:`w-full p-6 border-b ${v?"border-gray-700 hover:bg-gray-700/50":"border-gray-100 hover:bg-gray-50/80"} transition-all ${p.id===a?v?"bg-gray-700/50":"bg-gray-50/80":""}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-1",children:e.jsx("h3",{className:`font-medium ${v?"text-gray-100":"text-gray-800"} truncate ${p.unreadCount?.[s.sellerId]>0?"font-bold":""}`,children:p.buyerName})}),e.jsx("p",{className:`text-sm truncate ${p.unreadCount?.[s.sellerId]>0?v?"text-gray-100 font-medium":"text-gray-900 font-medium":v?"text-gray-400":"text-gray-500"}`,children:p.lastMessage||"No messages yet"}),p.unreadCount?.[s.sellerId]>0&&e.jsxs("div",{className:"mt-1 text-xs text-[#FF1B6B]",children:[p.unreadCount[s.sellerId]," new ",p.unreadCount[s.sellerId]===1?"message":"messages"]})]}),p.unreadCount?.[s.sellerId]>0&&e.jsx("span",{className:"bg-[#FF1B6B] text-white text-xs px-2.5 py-1.5 rounded-full ml-3 shrink-0",children:p.unreadCount[s.sellerId]})]})},p.id))})]}),e.jsx("div",{className:`col-span-8 ${v?"bg-gray-800":"bg-white"}`,children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`p-6 border-b ${v?"border-gray-700 bg-gray-800/80":"border-gray-100 bg-white/80"} backdrop-blur-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"md:hidden hover:text-[#FF1B6B] transition-colors",children:e.jsx(la,{className:"text-xl"})}),e.jsx("h3",{className:`font-medium ${v?"text-gray-100":"text-gray-800"}`,children:l.buyerName})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto h-[calc(100vh-16rem)] no-scrollbar",children:[o.map(p=>e.jsx(Uh,{message:p,currentUser:s,onEdit:E,onDelete:w},p.id)),e.jsx("div",{ref:x})]}),e.jsx("form",{onSubmit:C,className:`p-4 border-t ${v?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),placeholder:"Type a message...",className:`flex-1 px-4 py-3 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] transition-all ${v?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400":"border-gray-200 text-gray-900"}`}),e.jsx("button",{type:"submit",className:"px-5 py-3 bg-[#FF1B6B] text-white rounded-xl hover:bg-[#D4145A] transition-colors",children:e.jsx(oo,{className:"text-xl"})})]})})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:`w-16 h-16 mb-4 ${v?"text-gray-600":"text-gray-300"}`,children:e.jsx(Ea,{className:"w-full h-full"})}),e.jsx("p",{className:v?"text-gray-400":"text-gray-500",children:"Select a conversation to start messaging"})]})})]})})})})},Qa=({title:a,value:t,icon:s,trend:n,subtitle:r,secondaryValue:l})=>e.jsx(R.div,{whileHover:{y:-3},className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white mt-1",children:t}),n&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ao,{className:"text-emerald-500 w-4 h-4"}),e.jsxs("span",{className:"text-xs text-emerald-500",children:[n,"% from last month"]})]}),l&&e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Refunds: ",l]}),r&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(s,{className:"w-5 h-5 text-[#FF1B6B]"})})]})}),Wh=()=>{const[a,t]=i.useState(!1),[s,n]=i.useState([]),[r,l]=i.useState([]),[d,o]=i.useState(null),[m,c]=i.useState([]),[u,x]=i.useState(""),[f,N]=i.useState(1);i.useState(!0);const v=5;i.useEffect(()=>{C(),E()},[]),i.useEffect(()=>{const b=s.filter($=>$.storeName.toLowerCase().includes(u.toLowerCase())||$.id.toLowerCase().includes(u.toLowerCase())).sort(($,L)=>L.metrics.allTimeRevenue-$.metrics.allTimeRevenue);l(b),N(1)},[u,s]);const C=async()=>{try{const T=Te(be(ae,"sellers"),Ue("storeName")),$=(await Ae(T)).docs.map(S=>{const A=S.data(),h=A.country||{};return typeof h=="string"?{id:S.id,...A,country:{code:h.trim().toLowerCase().slice(0,2),name:h}}:h.code?{id:S.id,...A,country:{...h,code:h.code.trim().toLowerCase()}}:{id:S.id,...A}}),L=await Promise.all($.map(async S=>{const A=new Date,h=new Date(A.getFullYear(),A.getMonth(),1),I=new Date(A.getFullYear(),A.getMonth()-1,1),O=new Date(A.getFullYear(),A.getMonth(),0),F=Te(be(ae,"orders"),fe("sellerId","==",S.id)),V=(await Ae(F)).docs.map(G=>({id:G.id,...G.data()})),P=Te(be(ae,"withdrawals"),fe("sellerId","==",S.id)),k=(await Ae(P)).docs.map(G=>{const q=G.data();return{id:G.id,...q,createdAt:q.requestedAt?new Date(q.requestedAt):null}});k.sort((G,q)=>{const Z=G.createdAt?.toDate?.()||new Date(G.createdAt||0);return(q.createdAt?.toDate?.()||new Date(q.createdAt||0))-Z});const D=k.reduce((G,q)=>(q.status==="completed"?G.completed+=q.amount||0:q.status==="pending"&&(G.pending+=q.amount||0),G),{completed:0,pending:0}),_=V.filter(G=>(G.createdAt?.toDate?.()||new Date(G.createdAt||0))>=h),H=V.filter(G=>{const q=G.createdAt?.toDate?.()||new Date(G.createdAt||0);return q>=I&&q<=O}),X=V.filter(G=>G.status!=="cancelled"),z=X.reduce((G,q)=>q.status==="refunded"?G:G+(q.total||0),0),se=z,ee=z-D.completed,te=new Set(X.map(G=>G.buyerId)).size,Y=(G,q)=>q===0?G>0?100:0:(G-q)/q*100,W=_.reduce((G,q)=>q.status!=="refunded"&&q.status!=="cancelled"?G+(q.total||0):G,0),Q=H.reduce((G,q)=>q.status!=="refunded"&&q.status!=="cancelled"?G+(q.total||0):G,0);return{...S,metrics:{allTimeRevenue:se,totalWithdrawn:D.completed,pendingWithdrawals:D.pending,netRevenue:ee,totalOrders:V.length,totalCustomers:te,revenueChange:parseFloat(Y(W,Q).toFixed(1)),ordersChange:parseFloat(Y(_.length,H.length).toFixed(1)),customersChange:parseFloat(Y(new Set(_.map(G=>G.buyerId)).size,new Set(H.map(G=>G.buyerId)).size).toFixed(1))},withdrawalHistory:k.sort((G,q)=>(q.requestedAt||0)-(G.requestedAt||0)).map(G=>({id:G.id,amount:G.amount||0,status:G.status,createdAt:G.requestedAt?new Date(G.requestedAt):null,network:G.network,walletAddress:G.walletAddress}))}}));n(L)}catch(T){console.error("Error fetching stores data:",T),M.error("Failed to load stores data")}finally{t(!1)}},E=async()=>{try{const T=Te(be(ae,"withdrawals"),Ue("requestedAt","desc")),$=(await Ae(T)).docs.map(L=>({id:L.id,...L.data(),createdAt:L.data().requestedAt?new Date(L.data().requestedAt):null}));c($)}catch(T){console.error("Error fetching withdrawal history:",T),M.error("Failed to load withdrawal history")}},w=f*v,p=w-v,y=r.slice(p,w),g=Math.ceil(r.length/v),j=T=>{T>0&&T<=g&&N(T)};return a?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Stores Revenue"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search stores...",value:u,onChange:T=>x(T.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg w-64 focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-[#FF1B6B] bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),e.jsx(nn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),e.jsx("div",{className:"grid gap-6 mb-6",children:y.map(T=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:T.storeName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Store ID: ",T.id]}),T.country?.code&&e.jsx("img",{src:`https://flagcdn.com/${T.country.code.toLowerCase()}.svg`,alt:T.country.name||"Store country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${T.verificationStatus==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"}`,children:T.verificationStatus==="approved"?"Verified":"Unverified"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Qa,{title:"All Time Revenue",value:`$${T.metrics.allTimeRevenue.toFixed(2)}`,icon:Aa,subtitle:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["Withdrawn: $",T.metrics.totalWithdrawn.toFixed(2)]}),T.metrics.pendingWithdrawals>0&&e.jsxs("span",{className:"text-yellow-600",children:["(-$",T.metrics.pendingWithdrawals.toFixed(2)," pending)"]})]})}),e.jsx(Qa,{title:"Net Revenue",value:`$${T.metrics.netRevenue.toFixed(2)}`,icon:Aa,trend:T.metrics.revenueChange}),e.jsx(Qa,{title:"Total Orders",value:T.metrics.totalOrders,icon:_s,trend:T.metrics.ordersChange}),e.jsx(Qa,{title:"Total Customers",value:T.metrics.totalCustomers,icon:da,trend:T.metrics.customersChange})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("button",{onClick:b=>{b.stopPropagation(),o(d===T.id?null:T.id)},className:"w-full flex items-center justify-between mb-4 text-gray-900 dark:text-white hover:text-[#FF1B6B] dark:hover:text-[#FF1B6B] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kr,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Withdrawal History"})]}),e.jsx(tr,{className:`w-5 h-5 transition-transform duration-200 ${d===T.id?"rotate-180":""}`})]}),e.jsx(Ze,{children:d===T.id&&e.jsx(R.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3",children:"Store Name"}),e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3",children:"Amount"}),e.jsx("th",{className:"px-4 py-3",children:"Token"}),e.jsx("th",{className:"px-4 py-3",children:"Network"}),e.jsx("th",{className:"px-4 py-3",children:"Wallet Address"}),e.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[T.withdrawalHistory.map(b=>e.jsxs("tr",{className:"text-sm hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:T.storeName}),e.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:b.createdAt?(b.createdAt?.toDate?.()||new Date(b.createdAt)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date available"}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:["$",b.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.token==="USDC"?e.jsx("img",{src:"/usdc.png",alt:"USDC",className:"w-4 h-4 object-contain"}):e.jsx("img",{src:"/usdt.png",alt:"USDT",className:"w-4 h-4 object-contain"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:b.token||"USDT"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"Polygon",className:"w-4 h-4 object-contain"}):b.network==="unichain"?e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4 object-contain"}):null,e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:b.network})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(it,{className:"w-4 h-4 text-[#FF1B6B]"}),e.jsxs("span",{className:"font-mono text-xs text-gray-700 dark:text-gray-300",children:[b.walletAddress.slice(0,6),"...",b.walletAddress.slice(-4)]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${b.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"}`,children:b.status})})]},b.id)),T.withdrawalHistory.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-3 text-center text-gray-500 dark:text-gray-400",children:"No withdrawal history"})})]})]})})})})]})]},T.id))}),g>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>j(f-1),disabled:f===1,className:`p-2 rounded-lg ${f===1?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx(rc,{className:"w-5 h-5"})}),Array.from({length:g},(T,b)=>b+1).map(T=>e.jsx("button",{onClick:()=>j(T),className:`w-8 h-8 rounded-lg text-sm font-medium ${f===T?"bg-[#FF1B6B] text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:T},T)),e.jsx("button",{onClick:()=>j(f+1),disabled:f===g,className:`p-2 rounded-lg ${f===g?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx(io,{className:"w-5 h-5"})})]})]})};function As({children:a}){const{isAdmin:t,loading:s}=Ve(),n=fs();return s?e.jsx("div",{children:"Loading..."}):t?a:e.jsx(Ta,{to:"/merch-store",state:{from:n},replace:!0})}const Bi=()=>{const{user:a}=Ve();return a?.isSeller?e.jsx(Xr,{}):e.jsx(Rh,{})},Hh=nc([{path:"/",element:e.jsx(hg,{}),children:[{index:!0,element:e.jsx(Ro,{})},{path:"/collections",element:e.jsx(Oo,{})},{path:"/collection/:symbol",element:e.jsx(Uo,{})},{path:"/history",element:e.jsx(Wo,{})},{path:"/account",element:e.jsx(Ho,{})},{path:"/trading",element:e.jsx(Jo,{})},{path:"/bridge",element:e.jsx(Ko,{})},{path:"/feestracker",element:e.jsx(el,{})},{path:"/memefactory",element:e.jsx(al,{})}]},{path:"/login",element:e.jsx(Ta,{to:"/merch-store/login",replace:!0})},{path:"/signup",element:e.jsx(Ta,{to:"/merch-store/signup",replace:!0})},{path:"/merch-store",element:e.jsx(wg,{}),children:[{path:"",element:e.jsx(eh,{})},{path:"product/:id",element:e.jsx(ih,{})},{path:"login",element:e.jsx(pg,{})},{path:"signup",element:e.jsx(fg,{})},{path:"become-seller",element:e.jsx(bg,{})},{path:"cart",element:e.jsx(ft,{children:e.jsx(lh,{})})},{path:"checkout",element:e.jsx(ft,{children:e.jsx(ph,{})})},{path:"orders",element:e.jsx(ft,{children:e.jsx(gh,{})})},{path:"dashboard",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(Tg,{})})},{path:"products",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(Bg,{})})},{path:"add-product",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(Fg,{})})},{path:"edit-product/:id",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(Pg,{})})},{path:"sales",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(_g,{})})},{path:"orders-received",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(zg,{})})},{path:"my-refunds",element:e.jsx(ft,{children:e.jsx(Ih,{})})},{path:"refunds",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(Ch,{})})},{path:"settings",element:e.jsx(ft,{children:e.jsx(Gg,{})})},{path:"terms",element:e.jsx(Bh,{})},{path:"forgot-password",element:e.jsx(Dh,{})},{path:"reset-password",element:e.jsx(Mh,{})},{path:"inbox",element:e.jsx(ft,{children:e.jsx(Bi,{})})},{path:"inbox/:conversationId",element:e.jsx(ft,{children:e.jsx(Bi,{})})},{path:"seller/inbox",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(Xr,{})})},{path:"seller/inbox/:conversationId",element:e.jsx(ft,{sellerOnly:!0,children:e.jsx(Xr,{})})}]},{path:"/admin",element:e.jsx(As,{children:e.jsx(No,{})}),children:[{index:!0,element:e.jsx(As,{children:e.jsx(ko,{})})},{path:"withdrawals",element:e.jsx(As,{children:e.jsx(wh,{})})},{path:"store-verification",element:e.jsx(As,{children:e.jsx(Co,{})})},{path:"refunds",element:e.jsx(As,{children:e.jsx(Th,{})})},{path:"sales",element:e.jsx(As,{children:e.jsx(To,{})})},{path:"settings",element:e.jsx(As,{children:e.jsx(jh,{})})},{path:"stores-revenue",element:e.jsx(Wh,{})}]}]);window.ethereum||(window.ethereum={isMetaMask:!1,request:()=>Promise.reject(new Error("No crypto wallet found. Please install MetaMask or another Web3 wallet.")),on:(a,t)=>()=>{},removeListener:()=>{},autoRefreshOnNetworkChange:!1,chainId:null,networkVersion:null,selectedAddress:null,isConnected:()=>!1,enable:()=>Promise.reject(new Error("No crypto wallet found. Please install MetaMask or another Web3 wallet.")),sendAsync:()=>Promise.reject(new Error("No crypto wallet found")),send:()=>Promise.reject(new Error("No crypto wallet found")),addListener:()=>{},removeAllListeners:()=>{},providers:[],isEIP1193:!0});function qh(){return e.jsx(mo,{config:uo,children:e.jsx(t0,{children:e.jsx(r0,{children:e.jsx(oc,{router:Hh})})})})}ic.createRoot(document.getElementById("root")).render(e.jsx(Ct.StrictMode,{children:e.jsx(qh,{})}));
//# sourceMappingURL=index-BGqlxqNZ.js.map
