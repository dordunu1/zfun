import{r as n,x as N,j as e,aU as ba,b8 as Ft,e as Ze,c as rs,b9 as Ot,ba as ms,b as vs,bb as ja,bc as gt,bd as Zs,J as Te,be as wa,ao as kt,b7 as qt,I as gs,L as ve,W as ks,u as Jt,aE as Fs,bf as Ss,bg as Cs,bh as Na,ae as Wt,X as ns,bi as us,bj as $s,C as ut,bk as va,G as fe,_ as he,bl as ka,ax as Fa,M as Sa,bm as Ca,aR as $a,bn as Ba,bo as Ta,E as Aa,bp as Da,af as ft,B as Ea,bq as Xs,K as De,br as is,bs as ls,bt as ea,bu as mt,bv as ta,bw as Ht,o as sa,b4 as Ia,aW as St,bx as aa,by as Pa,bz as Ma,bA as Ve,N as bt,D as Ra,aC as hs,bB as La,A as ht,ap as Kt,bC as _a,bD as Ua,bE as Oa,b3 as Vt,b0 as Bt,aX as zt,bF as ra,bG as qa,bH as Wa,a9 as Bs,aV as Ha,aQ as na,bI as Va,b5 as za,bJ as Ya,bK as Ga,bL as Ts,bM as Qa,bN as Ja,bO as Ka,bP as Za,bQ as As,bR as Ds,bS as Es,bT as Xa,bU as Is,bV as er,bW as tr,bX as sr,bY as ar,bZ as rr,b_ as nr,b$ as ir,c0 as lr,c1 as or,c2 as dr,c3 as cr,c4 as xr,c5 as mr,c6 as gr,aB as ia,a$ as ur,b1 as ps,c7 as hr,c8 as pr,c9 as la,ca as yr,cb as fr,cc as br,b6 as jr,cd as wr,ce as Nr,cf as vr,cg as kr,ch as Fr,ci as Sr,g as Cr,cj as $r,ck as Br,cl as Tr,cm as Ar,cn as Dr,h as Er,co as oa,cp as da,cq as Yt,s as Ir,cr as Pr}from"./react-OEhP2pWc.js";import{c as be,u as ne,b as Mr}from"./context-D4fmVuWz.js";import{q as de,f as re,h as ge,w as ie,j as ye,l as lt,a9 as ze,aa as Rr,S as pt,C as je,n as qe,H as oe,E as te,z as M,u as xe,y as Ue,D as ca,e as es,t as Le,p as Tt,K as At,B as Ae,r as xa,Y as Lr,J as os,m as Gt,F as yt,s as ue,o as it,k as Pe,a0 as Ct,a1 as ys,a2 as fs,I as jt,ab as ma,ac as _r,ad as Ur,ae as Or,af as qr,ag as Wr,ah as Hr,ai as Vr,aj as zr,ak as Yr,al as Gr,x as ts,am as Qr,an as bs,X as ga,T as Ps,ao as Jr,ap as Kr}from"./vendor-D4KQtBUH.js";import{d as O,V as Ke,e as Zr,f as Xr,h as en,c as tn,i as sn,j as an,k as rn,l as nn,m as ua,n as ln,o as Ms,u as on,p as dn,M as cn,q as xn,r as mn,t as gn,v as un,w as hn,P as pn,x as yn,y as fn,T as bn,z as jn,A as wn,B as Nn,C as vn,S as kn,D as Fn,E as Sn,F as Rs,W as Cn,G as $t,H as $n,I as Bn,J as Tn,K as An,a as Ls}from"./components--ZW17nkP.js";import{g as Dn,h as En,i as In,m as Pn,s as Mn,j as Rn,a as wt,u as Xe,k as Ln}from"./web3-DE1AGvEk.js";import{c as _n,m as Un,s as On,p as qn,r as Wn,a as Hn,w as Vn,o as zn,u as Dt}from"./rainbow-D6PcEwE4.js";const ot="3f6cfb67c10d3242035f4bd4580e9bf9",Yn={id:130,name:"Unichain",network:"unichain-mainnet",iconUrl:"/unichain-logo.png",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://mainnet.unichain.org"]},public:{http:["https://mainnet.unichain.org"]}},blockExplorers:{default:{name:"Uniscan",url:"https://unichain.blockscout.com"}},testnet:!1},ha={id:1301,name:"Unichain Sepolia Testnet",network:"unichain-testnet",iconUrl:"/unichain-logo.png",nativeCurrency:{name:"ETH",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.unichain.org"]},public:{http:["https://sepolia.unichain.org"]}},blockExplorers:{default:{name:"Uniscan",url:"https://unichain-sepolia.blockscout.com"}},testnet:!0},Gn={id:1828369849,name:"Moonwalker",network:"moonwalker",iconUrl:"/moonwalker.png",nativeCurrency:{name:"ZERO",symbol:"ZERO",decimals:18},rpcUrls:{default:{http:["https://moonwalker-rpc.eu-north-2.gateway.fm"]},public:{http:["https://moonwalker-rpc.eu-north-2.gateway.fm"]}},blockExplorers:{default:{name:"Moonwalker Explorer",url:"https://moonwalker-blockscout.eu-north-2.gateway.fm"}}},Qn={id:10143,name:"Monad Testnet",network:"monad-testnet",iconUrl:"/monad.png",nativeCurrency:{name:"MON",symbol:"MON",decimals:18},rpcUrls:{default:{http:["https://testnet-rpc.monad.xyz/"]},public:{http:["https://testnet-rpc.monad.xyz/"]}},blockExplorers:{default:{name:"Monad Explorer",url:"https://monad-testnet.socialscan.io/"}},testnet:!0},Je=[{...Pn,iconUrl:"/ethereum.png"},{...Mn,iconUrl:"/sepolia.png"},{...Rn,iconUrl:"/polygon.png"},Yn,ha,Gn,Qn],{publicClient:Jn}=Dn(Je,[In()],{pollingInterval:8e3,stallTimeout:5e3,retryCount:3,retryDelay:3e3}),Kn=_n([{groupName:"Recommended",wallets:[Un({projectId:ot,chains:Je}),On({projectId:ot,chains:Je}),qn({projectId:ot,chains:Je})]},{groupName:"Popular",wallets:[Wn({projectId:ot,chains:Je}),Hn({appName:"Token Factory",chains:Je}),Vn({projectId:ot,chains:Je}),zn({projectId:ot,chains:Je})]}]),Il=En({autoConnect:!0,connectors:Kn,publicClient:Jn,logger:{warn:null},syncConnectedChain:!0,batch:{multicall:{batchSize:1024*200,wait:16}}}),vt="0x5828D525fe00902AE22f2270Ac714616651894fF";function Pl(){const{isAdmin:s}=be(),[t,a]=n.useState(!0),[o,r]=n.useState(!1),[p,g]=n.useState(""),[i,$]=n.useState(""),[k,j]=n.useState("all"),[y,C]=n.useState({totalSales:0,currentSales:0,totalRefunds:0,activeSellers:0,pendingWithdrawals:0,platformBalance:0,totalOrders:0,totalProducts:0,totalCustomers:0,platformFee:0,totalPlatformFees:0,withdrawnFees:0,totalEarnings:0,recentOrders:[],topSellers:[],salesByNetwork:{unichain:0,polygon:0}});n.useState([]);const[P,B]=n.useState("list");n.useState("");const[v,I]=n.useState(1),[A,x]=n.useState(!0),[m,d]=n.useState(!1),b=50,h=()=>{const l=y.recentOrders?.map(E=>E.sellerName)||[];return["all",...new Set(l)]},D=n.useMemo(()=>y.recentOrders?.filter(l=>{const E=l.id.toLowerCase().includes(i.toLowerCase())||(l.buyerInfo?.name||"").toLowerCase().includes(i.toLowerCase()),L=k==="all"||l.sellerName===k;return E&&L}),[y.recentOrders,i,k]),V=async()=>{if(!(m||!A)){d(!0);try{const l=y.recentOrders[y.recentOrders.length-1],E=de(re(O,"orders"),ye("createdAt","desc"),Rr(l.createdAt),lt(b)),L=await ge(E),f=await Promise.all(L.docs.map(async q=>{const G={id:q.id,...q.data()};if(G.sellerId){const T=de(re(O,"sellers"),ie("uid","==",G.sellerId)),S=await ge(T);if(!S.empty){const c=S.docs[0].data();G.sellerName=c.storeName||c.name||"Unknown Seller",G.sellerFlag=c.country?.flag||null}}return G}));f.length<b&&x(!1),C(q=>({...q,recentOrders:[...q.recentOrders,...f]})),I(q=>q+1)}catch(l){console.error("Error loading more orders:",l),N.error("Failed to load more orders")}finally{d(!1)}}},z=l=>{const{scrollTop:E,clientHeight:L,scrollHeight:f}=l.target;f-E<=L*1.5&&V()};n.useEffect(()=>{(async()=>{try{const E=await ze();if(E){const L=await E.request({method:"eth_accounts"});L.length>0&&L[0].toLowerCase()===vt.toLowerCase()&&(g(L[0]),r(!0))}}catch(E){console.error("Error checking wallet connection:",E)}})()},[]),n.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",l=>{l.length===0||l[0].toLowerCase()!==vt.toLowerCase()?(r(!1),g("")):(g(l[0]),r(!0))})},[]);const u=async()=>{try{if(!await ze()){N.error("Please install MetaMask to connect your wallet");return}const E=await window.ethereum.request({method:"eth_requestAccounts"});if(E.length===0){N.error("Please connect your wallet");return}const L=E[0];L.toLowerCase()===vt.toLowerCase()?(g(L),r(!0),N.success("Wallet connected successfully")):(N.error("This wallet does not have admin privileges"),r(!1),g(""))}catch(l){console.error("Failed to connect wallet:",l),l.code===4001?N.error("You rejected the connection request"):N.error("Failed to connect wallet")}};n.useEffect(()=>{o&&p.toLowerCase()===vt.toLowerCase()&&F()},[o,p]);const F=async()=>{try{a(!0);const l=de(re(O,"sellers")),E=await ge(l),L=de(re(O,"withdrawals"),ie("status","in",["completed","pending"])),f=await ge(L),q=de(re(O,"orders"),ye("createdAt","desc"),lt(b)),G=await ge(q),T={};E.docs.forEach(X=>{const ae=X.data();T[X.id]={id:X.id,name:ae.storeName||ae.name||"Unknown Store",flag:ae.country?.flag||null}});const S=await Promise.all(G.docs.map(async X=>{const ae={id:X.id,...X.data()};if(ae.sellerId&&T[ae.sellerId]){const pe=T[ae.sellerId];ae.sellerName=pe.name,ae.sellerFlag=pe.flag}return ae}));x(S.length===b);const c=S.filter(X=>X.status!=="cancelled"),w=c.filter(X=>X.status==="shipped"||X.status==="processing"||X.status==="completed"||X.status==="delivered"),U=c.filter(X=>X.status==="refunded"),H=w.reduce((X,ae)=>X+(Number(ae.total)||0),0),K=U.reduce((X,ae)=>X+(Number(ae.total)||0)*.95,0),_=H*.05,ee=[...w,...U].reduce((X,ae)=>X+Number(ae.total)*.05,0),Y=f.docs.filter(X=>X.data().status==="approved"&&X.data().type==="platform_fee").reduce((X,ae)=>X+ae.data().amount,0),Q={};f.docs.forEach(X=>{const ae=X.data(),pe=ae.sellerId;Q[pe]||(Q[pe]={completed:0,pending:0}),ae.status==="completed"?Q[pe].completed+=ae.amount||0:ae.status==="pending"&&(Q[pe].pending+=ae.amount||0)});const R={};w.forEach(X=>{const ae=X.sellerId,pe=T[ae]?.name||"Unknown Store";R[ae]||(R[ae]={id:ae,name:pe,flag:T[ae]?.flag||null,totalSales:0,netRevenue:0,ordersCount:0}),R[ae].totalSales+=Number(X.total)||0,R[ae].ordersCount+=1}),Object.keys(R).forEach(X=>{const ae=Q[X]||{completed:0,pending:0};R[X].netRevenue=Math.max(0,R[X].totalSales-ae.completed)});const J=Object.values(R).reduce((X,ae)=>X+ae.netRevenue,0),se=Object.values(R).sort((X,ae)=>ae.netRevenue-X.netRevenue).slice(0,5).map(X=>({id:X.id,name:X.name,flag:X.flag,total:Math.max(0,X.netRevenue),orders:X.ordersCount})),W=de(re(O,"products")),le=(await ge(W)).size;let me={unichain:0,polygon:0};w.forEach(X=>{X.paymentMethod?.network===1301?me.unichain+=Number(X.total)||0:X.paymentMethod?.network===137&&(me.polygon+=Number(X.total)||0)}),C({totalSales:H,currentSales:J,totalRefunds:K,activeSellers:E.size,pendingWithdrawals:f.docs.filter(X=>X.data().status==="pending").length,platformBalance:_,totalOrders:S.length,totalProducts:le,totalCustomers:new Set([...w,...U].map(X=>X.buyerId)).size,platformFee:_,totalPlatformFees:ee,withdrawnFees:Y,totalEarnings:ee+Y,recentOrders:S,topSellers:se,salesByNetwork:me})}catch(l){console.error("Error fetching dashboard data:",l),N.error("Failed to load dashboard data")}finally{a(!1)}};return s?!o||p.toLowerCase()!==vt.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#FF1B6B] mb-4",children:"Admin Authentication Required"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Please connect your admin wallet to access the dashboard"}),e.jsx("button",{onClick:u,className:"px-6 py-3 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:"Connect Wallet"})]}):t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All-time Sales"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",y.totalSales.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Total volume (excl. refunds)"})]}),e.jsx(Ft,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Sales"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",Math.max(0,y.currentSales).toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Available for withdrawal"})]}),e.jsx(Ze,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-red-500",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Refunds"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",y.totalRefunds.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Refunded amount (excl. platform fees)"})]}),e.jsx(rs,{className:"text-3xl text-red-500"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"All-time Platform Fees"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",y.totalPlatformFees.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Total platform fees (incl. withdrawn)"})]}),e.jsx(Ft,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Current Platform Fees"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",y.platformFee.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Available for withdrawal"})]}),e.jsx(Ze,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Sellers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.activeSellers}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[y.totalProducts," products listed"]})]}),e.jsx(Ot,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.totalOrders}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"All-time orders"})]}),e.jsx(ms,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.totalProducts}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Listed products"})]}),e.jsx(vs,{className:"text-3xl text-[#FF1B6B]"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:y.totalCustomers}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Unique buyers"})]}),e.jsx(Ot,{className:"text-3xl text-[#FF1B6B]"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Sales by Network"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-6 h-6 object-contain"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Unichain"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",y.salesByNetwork.unichain.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/polygon.png",alt:"Polygon",className:"w-6 h-6 object-contain"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Polygon"})]}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",y.salesByNetwork.polygon.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Top Sellers"}),e.jsx("div",{className:"space-y-4",children:y.topSellers.map((l,E)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-[#FF1B6B] flex items-center justify-center text-white text-sm",children:E+1}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:l.name}),l.flag&&e.jsx("img",{src:l.flag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:["$",l.total.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:[l.orders," orders"]})]})]},l.id))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Recent Orders"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("select",{value:k,onChange:l=>j(l.target.value),className:"px-3 py-2 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF1B6B]",children:h().map(l=>e.jsx("option",{value:l,children:l==="all"?"All Stores":l},l))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by Order ID or Customer",value:i,onChange:l=>$(l.target.value),className:"pl-10 pr-4 py-2 rounded-md text-sm bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] w-64"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>B("list"),className:`p-2 rounded-lg transition-colors ${P==="list"?"bg-[#FF1B6B] text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:e.jsx(ja,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>B("grid"),className:`p-2 rounded-lg transition-colors ${P==="grid"?"bg-[#FF1B6B] text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:e.jsx(vs,{className:"w-5 h-5"})})]})]})]}),P==="list"?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Seller"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:D?.map(l=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:l.id.slice(-6)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:l.sellerName}),l.sellerFlag&&e.jsx("img",{src:l.sellerFlag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:l.buyerInfo?.name||"Anonymous"}),l.flag&&e.jsx("img",{src:l.flag,alt:typeof l.shippingAddress?.country=="object"?l.shippingAddress?.country.name:l.shippingAddress?.country,className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",l.total?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="completed"||l.status==="shipped"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":l.status==="processing"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":l.status==="cancelled"?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":l.status==="refunded"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":l.status==="delivered"?"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-200":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:l.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:l.createdAt?.toDate?new Date(l.createdAt.toDate()).toLocaleString():new Date(l.createdAt).toLocaleString()})]},l.id))})]})}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mt-4 overflow-y-auto",style:{maxHeight:"600px"},onScroll:z,children:[D?.map(l=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:["Order #",l.id.slice(-6)]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:l.createdAt?.toDate?new Date(l.createdAt.toDate()).toLocaleString():new Date(l.createdAt).toLocaleString()})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${l.status==="completed"||l.status==="shipped"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":l.status==="processing"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":l.status==="cancelled"?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":l.status==="refunded"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":l.status==="delivered"?"bg-orange-100 dark:bg-orange-900 text-orange-600 dark:text-orange-200":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"}`,children:l.status})]}),e.jsxs("div",{className:"border-t border-b border-gray-200 dark:border-gray-600 py-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customer"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:l.buyerInfo?.name||"Anonymous"}),l.flag&&e.jsx("img",{src:l.flag,alt:"Buyer country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Seller"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:l.sellerName}),l.sellerFlag&&e.jsx("img",{src:l.sellerFlag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-300",children:"Total Amount"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900 dark:text-white",children:["$",l.total?.toFixed(2)]})]})]},l.id)),m&&e.jsx("div",{className:"col-span-full flex justify-center py-4",children:e.jsx("div",{className:"w-6 h-6 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})})]})]})]}):e.jsx(ba,{to:"/merch-store",replace:!0})}const Zn={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_17TRACK_API_KEY:"90E44878A5030837C5293798DC6081CD",VITE_ADMIN_WALLET:"0x5828D525fe00902AE22f2270Ac714616651894fF",VITE_ALCHEMY_API_KEY:"Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",VITE_CHAIN_FEES:"0.02,0.05,0.01,369",VITE_ETHERSCAN_API_KEY:"JE5C1JTK2C629S4T8XVWD125CE37QZ83QS",VITE_FACTORY_ADDRESS_10143:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426",VITE_FACTORY_ADDRESS_11155111:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",VITE_FACTORY_ADDRESS_130:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_FACTORY_ADDRESS_1301:"0x08a58b1628Fb449635078355Be83e181EFBe3948",VITE_FACTORY_ADDRESS_137:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",VITE_FACTORY_ADDRESS_1828369849:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",VITE_FIREBASE_API_KEY:"AIzaSyDlfQMHiTf2vlpOdQA7gsiPK9PcITwBCc8",VITE_FIREBASE_APP_ID:"1:235589319121:web:05d9cd3aeaed3d62d748f0",VITE_FIREBASE_AUTH_DOMAIN:"tokenfactory-bbe1a.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-SJ14LLN724",VITE_FIREBASE_MESSAGING_SENDER_ID:"235589319121",VITE_FIREBASE_PROJECT_ID:"tokenfactory-bbe1a",VITE_FIREBASE_STORAGE_BUCKET:"tokenfactory-bbe1a.firebasestorage.app",VITE_MAILJET_API_KEY:"12622e0080c3a1c247990785dd1d0691",VITE_MAILJET_SECRET_KEY:"d9870d511fd1850d97b702f5f43247e6",VITE_MERCH_FIREBASE_API_KEY:"AIzaSyADTuh7W2jR3iCVo3nmDXUEVcCoM92szTg",VITE_MERCH_FIREBASE_APP_ID:"1:946488133747:web:1cefa3eab5250023218206",VITE_MERCH_FIREBASE_AUTH_DOMAIN:"merch-store-581c9.firebaseapp.com",VITE_MERCH_FIREBASE_MEASUREMENT_ID:"G-JKNYX3PJWDP\0R\0I\0V\0A\0T\0E\0_\0K\0E\0Y\0=\0y\0o\0u\0r\0_\0p\0r\0i\0v\0a\0t\0e\0_\0k\0e\0y\0",VITE_MERCH_FIREBASE_MESSAGING_SENDER_ID:"946488133747",VITE_MERCH_FIREBASE_PROJECT_ID:"merch-store-581c9",VITE_MERCH_FIREBASE_STORAGE_BUCKET:"merch-store-581c9.firebasestorage.app",VITE_MERCH_PLATFORM_ADDRESS_1301:"0xCCc38F4174BfE412e8e05Ae666037A70349ea36B",VITE_MERCH_PLATFORM_ADDRESS_137:"0x2571F240AA2Ca27Af06e5848f891efceB27d1626",VITE_NFT1155_IMPLEMENTATION_MONAD_TESTNET:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_NFT1155_IMPLEMENTATION_MOONWALKER:"0xBE339Ee485dD54375949Eb51CA4b80bCC994dee0",VITE_NFT1155_IMPLEMENTATION_POLYGON:"0x2Bab33d0D290f952BeBF50d44f8B015058a76A52",VITE_NFT1155_IMPLEMENTATION_SEPOLIA:"0xc558f0e1d3b0676abba36027642819e0351fbcb5",VITE_NFT1155_IMPLEMENTATION_UNICHAIN:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_MAINNET:"0xfA4e5A906F03A1a2522CbAA32346aD8B8Db0EAE2",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_TESTNET:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT721_IMPLEMENTATION_MONAD_TESTNET:"0xBF098eDe4264fd46Dc2da4b6E87d1dF39271e7C9",VITE_NFT721_IMPLEMENTATION_MOONWALKER:"0xF4815EF47E2fe9479485Ac00f2D904eB358DA7c1",VITE_NFT721_IMPLEMENTATION_POLYGON:"0x4f227F5f8e4659AB79bF3993ce547BE929f60185",VITE_NFT721_IMPLEMENTATION_SEPOLIA:"0x725f7a6eda7216f11f2c1ac6e382f05f947378e8",VITE_NFT721_IMPLEMENTATION_UNICHAIN:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT721_IMPLEMENTATION_UNICHAIN_MAINNET:"0x15433E7Ebdd06d56eD6FEC60132cB8DBceC42245",VITE_NFT721_IMPLEMENTATION_UNICHAIN_TESTNET:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT_FACTORY_MONAD_TESTNET:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02",VITE_NFT_FACTORY_MOONWALKER:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",VITE_NFT_FACTORY_POLYGON:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",VITE_NFT_FACTORY_SEPOLIA:"0xfb9c2ebfacb84cc5843a4c01fd8cf3d1a9e3423d",VITE_NFT_FACTORY_UNICHAIN:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_NFT_FACTORY_UNICHAIN_MAINNET:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",VITE_NFT_FACTORY_UNICHAIN_TESTNET:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_PAYSTACK_PUBLIC_KEY:"pk_live_6c4619b6e6f7db500ee33c96d03c3db3adf197ae",VITE_PINATA_JWT:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M",VITE_POLYGONSCAN_API_KEY:"264JGIIIMW61H1F8J33BZFQWJNSGPDR9S9",VITE_ROUTER_ADDRESS_11155111:"0xeE567Fe1712Faf6149d80dA1E6934E354124CfE3",VITE_ROUTER_ADDRESS_1301:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_ROUTER_ADDRESS_137:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",VITE_ROUTER_ADDRESS_UNICHAIN:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_SUPPORTED_CHAINS:"11155111,137,1301,1828369849,10143",VITE_UNICHAIN_EXPLORER_API_KEY:"F2STYRDMGGEY6NY3H2FXCYKBD971WSX5DX",VITE_UNICHAIN_EXPLORER_URL:"https://unichain-sepolia.blockscout.com",VITE_UNICHAIN_RPC_URL:"https://sepolia.unichain.org",VITE_UNICHAIN_USDC_ADDRESS:"0x31d0220469e10c4E71834a79b1f276d740d3768F",VITE_UNICHAIN_USDT_ADDRESS:"0x70262e266E50603AcFc5D58997eF73e5a8775844",VITE_USDC_ADDRESS_POLYGON:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",VITE_USDC_ADDRESS_SEPOLIA:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",VITE_USDT_ADDRESS_POLYGON:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",VITE_USDT_ADDRESS_SEPOLIA:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0",VITE_WALLET_CONNECT_PROJECT_ID:"3f6cfb67c10d3242035f4bd4580e9bf9"},_s={1301:"Unichain Sepolia",137:"Polygon Mainnet"},js={1301:{USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844",USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F"},137:{USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359"}},Xn=[{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"orderId",type:"uint256"},{indexed:!0,internalType:"address",name:"buyer",type:"address"},{indexed:!0,internalType:"address",name:"seller",type:"address"},{indexed:!1,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"OrderCreated",type:"event"},{inputs:[{internalType:"address",name:"_seller",type:"address"},{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"createOrder",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"requestWithdrawal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_seller",type:"address"},{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"approveWithdrawal",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_orderId",type:"uint256"},{internalType:"address",name:"_buyer",type:"address"},{internalType:"address",name:"_seller",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"processRefund",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"sellerBalances",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"orders",outputs:[{internalType:"uint256",name:"orderId",type:"uint256"},{internalType:"address",name:"buyer",type:"address"},{internalType:"address",name:"seller",type:"address"},{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"bool",name:"isCompleted",type:"bool"},{internalType:"uint256",name:"timestamp",type:"uint256"},{internalType:"bool",name:"isRefunded",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"}],name:"withdrawPlatformFees",outputs:[],stateMutability:"nonpayable",type:"function"}],ei=s=>{const t=`VITE_MERCH_PLATFORM_ADDRESS_${s}`,a=Zn[t];return a||(console.warn(`No contract address found for chain ${s}. Make sure ${t} is set in your .env file.`),null)},nt=(s,t)=>{try{const a=ei(t);if(!a)return null;if(!pt(a))return console.warn(`Invalid contract address for chain ${t}: ${a}`),null;const o=new je(a,Xn,s);return Object.defineProperty(o,"address",{value:a,writable:!1,configurable:!1}),o}catch(a){return console.warn(`Error creating contract instance for chain ${t}:`,a),null}},Us=(s,t,a)=>{const o=js[t]?.[a];if(!o)throw new Error(`Unsupported token ${a} on chain ${t}`);if(!pt(o))throw new Error(`Invalid token address: ${o}`);const r=["function approve(address spender, uint256 amount) external returns (bool)","function allowance(address owner, address spender) external view returns (uint256)","function balanceOf(address account) external view returns (uint256)"],p=new je(o,r,s);return Object.defineProperty(p,"address",{value:o,writable:!1,configurable:!1}),p},ti=(s,t=6)=>qe(s.toString(),t),It="0x5828D525fe00902AE22f2270Ac714616651894fF";function Ml(){const[s,t]=n.useState({totalRevenue:0,totalRefunds:0,totalOrders:0,averageOrderValue:0,uniqueCustomers:0,tokenSales:{USDT:{total:0,refunds:0},USDC:{total:0,refunds:0}}}),[a,o]=n.useState([]),[r,p]=n.useState("all"),[g,i]=n.useState(!0),{theme:$}=ne(),[k,j]=n.useState(!1),[y,C]=n.useState("");be();const[P,B]=n.useState(""),[v,I]=n.useState("all");n.useEffect(()=>{(async()=>{try{const b=await ze();if(b){const h=await b.request({method:"eth_accounts"});h.length>0&&h[0].toLowerCase()===It.toLowerCase()&&(C(h[0]),j(!0))}}catch(b){console.error("Error checking wallet connection:",b)}finally{i(!1)}})()},[]),n.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",d=>{d.length===0||d[0].toLowerCase()!==It.toLowerCase()?(j(!1),C("")):(C(d[0]),j(!0))})},[]),n.useEffect(()=>{k&&y.toLowerCase()===It.toLowerCase()&&A()},[k,y]);const A=async()=>{try{i(!0);const d=de(re(O,"orders"),ye("createdAt","desc")),h=(await ge(d)).docs.map(f=>({id:f.id,...f.data(),createdAt:f.data().createdAt?.toDate()||new Date,flag:f.data().flag||null,shippingAddress:f.data().shippingAddress||{}})),D={};h.forEach(f=>{f.sellerId&&!D[f.sellerId]&&(D[f.sellerId]={id:f.sellerId,name:f.sellerName||"Unknown Seller"})});const V=h.filter(f=>f.status!=="cancelled"),z=V.filter(f=>f.status==="shipped"||f.status==="processing"||f.status==="completed"||f.status==="delivered"),u=V.filter(f=>f.status==="refunded"),F=z.reduce((f,q)=>f+(Number(q.total)||0),0),l=u.reduce((f,q)=>f+(Number(q.total)||0)*.95,0),E={USDT:{total:0,refunds:0,net:0},USDC:{total:0,refunds:0,net:0}};z.forEach(f=>{const q=f.paymentMethod?.token||"USDT",G=Number(f.total)||0;E[q]&&(E[q].total+=G,E[q].net=E[q].total)}),u.forEach(f=>{const q=f.paymentMethod?.token||"USDT",T=(Number(f.total)||0)*.95;E[q]&&(E[q].refunds+=T)}),t({totalRevenue:Math.max(0,F),totalRefunds:l,totalOrders:z.length,averageOrderValue:z.length?F/z.length:0,uniqueCustomers:new Set(z.map(f=>f.buyerId)).size,tokenSales:E,recentOrders:await Promise.all(h.slice(0,10).map(async f=>{const q=await oe(te(O,"sellers",f.sellerId)),G=q.exists()?q.data():{};return{id:f.id||"",buyerInfo:f.buyerInfo||{},total:Number(f.total)||0,status:f.status||"unknown",createdAt:f.createdAt||new Date,sellerId:f.sellerId||"",sellerName:f.sellerName||"Unknown Seller",sellerFlag:G.country?.flag||null,flag:f.flag||null,shippingAddress:f.shippingAddress||{}}}))});const L=await Promise.all(Object.values(D).map(async f=>{const G=(await oe(te(O,"sellers",f.id))).data()||{},T=G.country?.flag||null,S=G.country||null,c=Number(G.balance?.available||0),w=V.filter(Q=>Q.sellerId===f.id),U=w.filter(Q=>Q.status!=="refunded"),H=w.filter(Q=>Q.status==="refunded"),K=w.filter(Q=>(Q.status==="shipped"||Q.status==="processing"||Q.status==="completed")&&Q.status!=="refunded").reduce((Q,R)=>Q+(Number(R.total)||0),0),_=H.reduce((Q,R)=>Q+(Number(R.total)||0)*.95,0),ee=Q=>{const R=new Date,J=new Date(R);return J.setHours(0,0,0,0),J.setDate(J.getDate()-Q),w.filter(se=>{if(!se.createdAt)return!1;const W=new Date(se.createdAt);W.setHours(0,0,0,0);const Z=W>=J,le=(se.status==="shipped"||se.status==="processing"||se.status==="completed"||se.status==="delivered")&&se.status!=="refunded";return Z&&le}).reduce((se,W)=>se+(Number(W.total)||0),0)},Y=c;return{id:f.id,name:f.name,flag:T,country:S,totalOrders:U.length||0,totalBalance:K||0,totalRefunds:_||0,sales:{"1d":ee(1)||0,all:w.filter(Q=>(Q.status==="shipped"||Q.status==="processing"||Q.status==="completed")&&Q.status!=="refunded").reduce((Q,R)=>Q+(Number(R.total)||0),0)},availableToWithdraw:Y}}));o(L)}catch(d){console.error("Error fetching sales data:",d),N.error("Failed to load sales data")}finally{i(!1)}},x=()=>{const d=s.recentOrders?.map(b=>b.sellerName)||[];return["all",...new Set(d)]},m=s.recentOrders?.filter(d=>{const b=d.id.toLowerCase().includes(P.toLowerCase())||(d.buyerInfo?.name||"").toLowerCase().includes(P.toLowerCase()),h=v==="all"||d.sellerName===v;return b&&h});return g?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):!k||y.toLowerCase()!==It.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(gt,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:`text-2xl font-bold ${$==="dark"?"text-white":"text-gray-800"} mb-2`,children:"Access Denied"}),e.jsx("p",{className:`${$==="dark"?"text-gray-300":"text-gray-600"} text-center mb-6`,children:"Please connect your admin wallet to access the sales analytics."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Sales Analytics"}),e.jsxs("button",{onClick:A,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#FF1B6B]/90 flex items-center gap-2 transition-colors",children:[e.jsx(Zs,{className:"w-4 h-4"}),"Refresh Data"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",s.totalRevenue.toFixed(2)]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.totalOrders," orders"]}),s.totalRefunds>0&&e.jsxs("p",{className:"text-xs text-red-500",children:["Refunds: $",s.totalRefunds.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(Ze,{className:"text-3xl text-[#FF1B6B]"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.totalOrders}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Active orders"})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(ms,{className:"text-3xl text-[#FF1B6B]"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Average Order Value"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",s.averageOrderValue.toFixed(2)]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Per order average"})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(Ft,{className:"text-3xl text-[#FF1B6B]"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-sm border-l-4 border-[#FF1B6B]",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Unique Customers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s.uniqueCustomers}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total buyers"})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(Ot,{className:"text-3xl text-[#FF1B6B]"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Orders"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("select",{value:v,onChange:d=>I(d.target.value),className:"px-3 py-2 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-[#FF1B6B]",children:x().map(d=>e.jsx("option",{value:d,children:d==="all"?"All Stores":d},d))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search by Order ID or Customer",value:P,onChange:d=>B(d.target.value),className:"pl-10 pr-4 py-2 rounded-lg text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 border border-gray-200 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-[#FF1B6B] w-64"}),e.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Seller"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Customer"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m?.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:d.id.slice(-6)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:d.sellerName}),d.sellerFlag&&e.jsx("img",{src:d.sellerFlag,alt:"Seller country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:d.buyerInfo?.name||"Anonymous"}),d.flag&&e.jsx("img",{src:d.flag,alt:typeof d.shippingAddress?.country=="object"?d.shippingAddress?.country.name:d.shippingAddress?.country,className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",d.total?.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.status==="completed"||d.status==="shipped"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":d.status==="processing"?"bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300":d.status==="cancelled"?"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-300":d.status==="refunded"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300":d.status==="delivered"?"bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"}`,children:d.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:new Date(d.createdAt).toLocaleString()})]},d.id))})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Sales Overview"}),e.jsx("div",{className:"flex space-x-2",children:["1d","all"].map(d=>e.jsx("button",{onClick:()=>p(d),className:`px-3 py-1 rounded-lg text-sm ${r===d?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:d==="1d"?"24h":"All Time"},d))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Token Sales Summary"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-2xl p-4",children:Object.entries(s.tokenSales||{}).map(([d,b])=>{const h={net:b?.net||0,refunds:b?.refunds||0};return e.jsxs("div",{className:"flex justify-between items-center mb-2 last:mb-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d==="USDC"?e.jsx("img",{src:"/logos/usdc.png",alt:"USDC",className:"w-5 h-5"}):e.jsx("img",{src:"/logos/usdt.png",alt:"USDT",className:"w-5 h-5"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:d})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["$",h.net.toFixed(2)]}),h.refunds>0&&e.jsxs("p",{className:"text-xs text-red-500",children:["Refunds: $",h.refunds.toFixed(2)]})]})]},d)})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 dark:bg-gray-700",children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Seller"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"24h"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"All Time"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Available to Withdraw"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:a.map(d=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d.name}),d.country?.flag&&e.jsx("img",{src:d.country.flag,alt:d.country.name||"Country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d.totalOrders," orders"]})]})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",d.sales["1d"].toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:["$",d.sales.all.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-[#FF1B6B]",children:["$",Number(d.availableToWithdraw||0).toFixed(2)]})})]},d.id))})]})})]})]})}const si=()=>e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2 mb-3"}),e.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((s,t)=>e.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"},t)),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-16 ml-2"})]})]}),e.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-700 rounded-full"})]})}),Os=()=>e.jsxs(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"border-b border-gray-100 dark:border-gray-700 pb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-24"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"})]}),e.jsx("div",{className:"flex gap-1",children:[...Array(5)].map((s,t)=>e.jsx("div",{className:"w-4 h-4 bg-gray-200 dark:bg-gray-700 rounded"},t))})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-32"})]})]}),Rl=()=>{const[s,t]=n.useState([]),[a,o]=n.useState(!0),[r,p]=n.useState(""),[g,i]=n.useState(null),[$,k]=n.useState([]),[j,y]=n.useState(""),[C,P]=n.useState(!1),[B,v]=n.useState(null),[I,A]=n.useState("pending"),[x,m]=n.useState(!1);n.useEffect(()=>{b(),i(null),k([])},[I]);const d=u=>u?u.seconds?new Date(u.seconds*1e3).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):(u instanceof Date?u:new Date(u)).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",b=async()=>{try{o(!0);const u=re(O,"sellers"),F=de(u,ie("verificationStatus","==",I),ye("storeName","asc")),l=await ge(F),E=l.docs.map(S=>S.id),L=re(O,"reviews"),f=de(L,ie("sellerId","in",E.length?E:["dummy"]),ye("createdAt","desc")),q=await ge(f),G={};q.docs.forEach(S=>{const c={id:S.id,...S.data()};G[c.sellerId]||(G[c.sellerId]=[]),G[c.sellerId].push(c)});const T=l.docs.map(S=>{const c={id:S.id,...S.data()},w=G[S.id]||[],U=w.reduce((K,_)=>K+_.rating,0),H=w.length>0?U/w.length:0;return{...c,reviewCount:w.length,averageRating:H,reviews:w}});t(T)}catch(u){console.error("Error fetching sellers:",u),Te.error("Failed to load sellers")}finally{o(!1)}},h=async u=>{try{m(!0);const F=s.find(q=>q.id===u);if(F&&F.reviews){k(F.reviews);return}const l=re(O,"reviews"),E=de(l,ie("sellerId","==",u),ye("createdAt","desc")),f=(await ge(E)).docs.map(q=>({id:q.id,...q.data()}));k(f)}catch(F){console.error("Error fetching reviews:",F),Te.error("Failed to load reviews")}finally{m(!1)}},D=async(u,F)=>{try{if(F)await xe(te(O,"sellers",u),{verificationStatus:"approved",verificationDate:new Date().toISOString(),rejectedAt:null,rejectionReason:null});else{v(u),P(!0);return}t(s.map(l=>l.id===u?{...l,verificationStatus:F?"approved":"rejected",rejectionReason:F?null:j}:l)),Te.success(`Store ${F?"verified":"rejected"} successfully`)}catch(l){console.error("Error updating store verification:",l),Te.error("Failed to update store verification")}},V=async()=>{if(!B||!j.trim()){Te.error("Please provide a reason for rejection");return}try{await xe(te(O,"sellers",B),{verificationStatus:"rejected",verificationDate:new Date().toISOString(),rejectedAt:new Date,rejectionReason:j.trim(),rejectionCooldown:72}),t(s.map(u=>u.id===B?{...u,verificationStatus:"rejected",rejectionReason:j.trim()}:u)),P(!1),y(""),v(null),Te.success("Store verification rejected")}catch(u){console.error("Error rejecting store:",u),Te.error("Failed to reject store verification")}},z=s.filter(u=>u.storeName?.toLowerCase().includes(r.toLowerCase())||u.email?.toLowerCase().includes(r.toLowerCase()));return a?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64"}),e.jsx("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:["Pending","Verified","Rejected"].map(u=>e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"w-24 h-9 bg-gray-200 dark:bg-gray-700 rounded-md mx-1"},u))})]}),e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"w-48 h-10 bg-gray-200 dark:bg-gray-700 rounded-lg"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-4"}),e.jsx("div",{className:"space-y-4",children:[...Array(4)].map((u,F)=>e.jsx(si,{},F))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((u,F)=>e.jsx(Os,{},F))})]})]})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:I==="pending"?"Store Verification Requests":I==="approved"?"Verified Stores":"Rejected Stores"}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>A("pending"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${I==="pending"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Pending"}),e.jsx("button",{onClick:()=>A("approved"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${I==="approved"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Verified"}),e.jsx("button",{onClick:()=>A("rejected"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${I==="rejected"?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:"Rejected"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search stores...",value:r,onChange:u=>p(u.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx(wa,{className:"absolute left-3 top-3 text-gray-400 dark:text-gray-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:I==="pending"?"Pending Requests":I==="approved"?"Verified Stores":"Rejected Stores"}),e.jsxs("div",{className:"space-y-4",children:[z.map(u=>e.jsx("div",{onClick:()=>{i(u),h(u.id)},className:`p-4 rounded-lg border cursor-pointer transition-colors ${g?.id===u.id?"border-[#FF1B6B] bg-pink-50 dark:bg-pink-900/20":"border-gray-200 dark:border-gray-700 hover:border-[#FF1B6B] hover:bg-pink-50 dark:hover:bg-pink-900/20"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:u.storeName}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.email}),I==="approved"&&u.verificationDate&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:["Verified on ",d(u.verificationDate)]}),I==="rejected"&&u.rejectedAt&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:["Rejected on ",d(u.rejectedAt)]}),u.rejectionReason&&e.jsxs("p",{className:"text-xs text-red-500 dark:text-red-400 mt-0.5",children:["Reason: ",u.rejectionReason]})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(F=>e.jsx(kt,{className:`w-4 h-4 ${F<=u.averageRating?"text-[#FF1B6B]":"text-gray-300 dark:text-gray-600"}`},F))}),e.jsxs("span",{className:"ml-2 text-sm text-gray-600 dark:text-gray-400",children:["(",u.reviewCount," reviews)"]})]})]}),I==="pending"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:F=>{F.stopPropagation(),D(u.id,!0)},className:"hover:opacity-80",children:e.jsx(Ke,{})}),e.jsx("button",{onClick:F=>{F.stopPropagation(),D(u.id,!1)},className:"p-1.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(qt,{className:"w-5 h-5"})})]}),I==="approved"&&e.jsx(Ke,{}),I==="rejected"&&e.jsx(qt,{className:"w-6 h-6 text-red-500 dark:text-red-400"})]})},u.id)),z.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:I==="pending"?"No verification requests found":"No verified stores found"})]})]}),g&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:g.storeName}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(u=>e.jsx(kt,{className:`w-5 h-5 ${u<=g.averageRating?"text-[#FF1B6B]":"text-gray-300 dark:text-gray-600"}`},u))}),e.jsx("span",{className:"text-lg font-medium text-gray-900 dark:text-white",children:g.averageRating.toFixed(1)}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",g.reviewCount," reviews)"]})]})]}),x?e.jsx("div",{className:"space-y-4",children:[...Array(3)].map((u,F)=>e.jsx(Os,{},F))}):e.jsxs("div",{className:"space-y-4",children:[$.map(u=>e.jsxs("div",{className:"border-b border-gray-100 dark:border-gray-700 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:u.userName}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(u.createdAt?.seconds*1e3).toLocaleDateString()})]}),e.jsx("div",{className:"flex items-center",children:[1,2,3,4,5].map(F=>e.jsx(kt,{className:`w-4 h-4 ${F<=u.rating?"text-[#FF1B6B]":"text-gray-300 dark:text-gray-600"}`},F))})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:u.review}),u.image&&e.jsx("img",{src:u.image,alt:"Review",className:"mt-2 rounded-lg w-24 h-24 object-cover cursor-pointer",onClick:()=>window.open(u.image,"_blank")}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("img",{src:u.productImage,alt:u.productName,className:"w-10 h-10 rounded object-cover"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:u.productName})]})]},u.id)),$.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No reviews yet"})]})]})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Reject Verification Request"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rejection Reason"}),e.jsx("textarea",{value:j,onChange:u=>y(u.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:"4",placeholder:"Please provide a reason for rejection..."})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{P(!1),y(""),v(null)},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md",children:"Cancel"}),e.jsx("button",{onClick:V,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!j.trim(),children:"Reject"})]})]})})]})},qs=3e4,ds=new Map,ai=(s,t)=>{const a=`${s}-${t}`,o=ds.get(a);if(o){const{timestamp:p,data:g}=o;if(Date.now()-p<qs)return g;ds.delete(a)}const r=localStorage.getItem(a);if(r)try{const{timestamp:p,data:g}=JSON.parse(r);if(Date.now()-p<qs)return g;localStorage.removeItem(a)}catch{localStorage.removeItem(a)}return null},ri=(s,t,a)=>{const o=`${s}-${t}`,r={timestamp:Date.now(),data:a};ds.set(o,r);try{localStorage.setItem(o,JSON.stringify(r))}catch(p){console.error("Error saving to localStorage:",p)}},ni={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},ii={hidden:{opacity:0,x:-20},show:{opacity:1,x:0,transition:{type:"spring",bounce:.3}}};function Ll(){n.useState([]);const[s,t]=n.useState(!0),{address:a,isConnected:o}=wt(),{chain:r}=Xe(),[p,g]=n.useState([]),[i,$]=n.useState("all");n.useRef(null);const{openConnectModal:k}=Dt(),[j,y]=n.useState(!1),C=()=>{const A=[{id:"all",label:"All Networks"},{id:"sepolia",label:"Sepolia"},{id:"unichain-mainnet",label:"Unichain Mainnet"},{id:"unichain",label:"Unichain Testnet"},{id:"polygon",label:"Polygon"},{id:"moonwalker",label:"Moonwalker"},{id:"monad-testnet",label:"Monad Testnet"}],x={all:p.length,sepolia:p.filter(m=>m.network==="sepolia"||m.chainId===11155111).length,"unichain-mainnet":p.filter(m=>m.network==="unichain-mainnet"||m.chainId===130).length,unichain:p.filter(m=>m.network==="unichain"||m.chainId===1301).length,polygon:p.filter(m=>m.network==="polygon"||m.chainId===137).length,moonwalker:p.filter(m=>m.network==="moonwalker"||m.chainId===1828369849).length,"monad-testnet":p.filter(m=>m.network==="monad-testnet"||m.chainId===10143).length};return e.jsxs("div",{className:"relative",children:[e.jsxs("button",{type:"button",onClick:()=>y(!j),className:"bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 rounded-xl px-4 py-2 text-gray-900 dark:text-white focus:outline-none min-w-[160px] flex items-center justify-between",children:[e.jsxs("span",{children:[A.find(m=>m.id===i)?.label," (",x[i],")"]}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${j?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),j&&e.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-[#1a1b1f] rounded-xl shadow-lg border border-gray-200 dark:border-gray-800",children:A.map(m=>e.jsxs("button",{onClick:()=>{$(m.id),y(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-xl last:rounded-b-xl transition-colors duration-150 ${i===m.id?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:[m.label," (",x[m.id],")"]},m.id))})]})},P=n.useMemo(()=>p.filter(A=>i==="all"?!0:A.network===i||i==="sepolia"&&A.chainId===11155111||i==="unichain-mainnet"&&A.chainId===130||i==="unichain"&&A.chainId===1301||i==="polygon"&&A.chainId===137||i==="moonwalker"&&A.chainId===1828369849||i==="monad-testnet"&&A.chainId===10143),[p,i]);n.useEffect(()=>{const A=async()=>{if(!a){g([]),t(!1);return}try{const m=ai(a,r?.id);if(m){g(m),t(!1),x();return}await x()}catch{t(!1),N.error("Error loading history")}},x=async()=>{try{const[m,d,b,h,D]=await Promise.all([Zr(a),Xr(a),en(a),tn(a),sn()]),V=m.reduce((T,S)=>(T[S.address.toLowerCase()]={name:S.name,symbol:S.symbol,logo:S.logo,decimals:S.decimals||18},T),{}),z=await Promise.all(d.map(async T=>{let S=V[T.tokenAddress.toLowerCase()];if(!S){const H=await an(T.tokenAddress);H&&(S={name:H.name,symbol:H.symbol,logo:H.logo,decimals:H.decimals||18})}S=S||{name:"Unknown Token",symbol:"TOKEN",decimals:18};const c=Ue(T.amount,S.decimals);let w="sepolia",U=T.chainId;return U===137||T.network==="polygon"?(w="polygon",U=137):U===130||T.network==="unichain-mainnet"?(w="unichain-mainnet",U=130):U===1301||T.network==="unichain"?(w="unichain",U=1301):U===1828369849||T.network==="moonwalker"?(w="moonwalker",U=1828369849):U===10143||T.network==="monad-testnet"?(w="monad-testnet",U=10143):(U===11155111||T.network==="sepolia")&&(w="sepolia",U=11155111),{id:T.transactionHash,activityType:"token_transaction",timestamp:T.timestamp,image:S.logo,title:T.type==="sent"?`Sent ${c} ${S.symbol}`:`Received ${c} ${S.symbol}`,subtitle:T.type==="sent"?`To ${T.toAddress.slice(0,6)}...${T.toAddress.slice(-4)}`:`From ${T.fromAddress.slice(0,6)}...${T.fromAddress.slice(-4)}`,address:T.tokenAddress,network:w,chainId:U,transactionHash:T.transactionHash,amount:c,tokenSymbol:S.symbol,fromAddress:T.fromAddress,toAddress:T.toAddress}})),u=m.map(T=>{let S="sepolia",c=T.chainId;return c===137||T.chainName?.toLowerCase().includes("polygon")?(S="polygon",c=137):c===130?(S="unichain-mainnet",c=130):c===1301?(S="unichain",c=1301):c===1828369849?(S="moonwalker",c=1828369849):c===11155111&&(S="sepolia",c=11155111),{id:T.address,activityType:"token_creation",timestamp:T.createdAt,image:T.logo,title:`Created ${T.name}`,subtitle:"Token Creation",address:T.address,network:S,chainId:c}}),F=new Set([...m.map(T=>T.address.toLowerCase()),...d.map(T=>T.tokenAddress.toLowerCase())]),l=new Map(h.map(T=>[T.contractAddress.toLowerCase(),T])),E=b.map(T=>{const S=l.get(T.contractAddress.toLowerCase());let c=S?.network||"sepolia",w=S?.chainId;return S?.chainId===137||T.chainId===137?(c="polygon",w=137):S?.chainId===130||T.chainId===130?(c="unichain-mainnet",w=130):S?.chainId===1301||T.chainId===1301?(c="unichain",w=1301):S?.chainId===1828369849||T.chainId===1828369849?(c="moonwalker",w=1828369849):S?.chainId===10143||T.chainId===10143?(c="monad-testnet",w=10143):(S?.chainId===11155111||T.chainId===11155111)&&(c="sepolia",w=11155111),{id:`${T.transactionHash}-${T.tokenId}`,activityType:"nft_transfer",timestamp:T.timestamp,image:S?.previewUrl||"/placeholder.png",title:T.type==="sent"?`Sent ${S?.name||"NFT"} #${T.tokenId}`:`Received ${S?.name||"NFT"} #${T.tokenId}`,subtitle:T.type==="sent"?`To ${T.toAddress.slice(0,6)}...${T.toAddress.slice(-4)}`:`From ${T.fromAddress.slice(0,6)}...${T.fromAddress.slice(-4)}`,address:T.contractAddress,network:c,chainId:w,symbol:S?.symbol,artworkType:S?.artworkType,tokenId:T.tokenId,amount:T.amount,transactionHash:T.transactionHash}}),L=h.map(T=>({id:T.contractAddress,activityType:"nft_creation",timestamp:T.createdAt,image:T.previewUrl,title:`Created ${T.name}`,subtitle:"NFT Collection",address:T.contractAddress,network:T.network,chainId:T.chainId,symbol:T.symbol})),f=(await Promise.all(D.map(async T=>(await rn(T.contractAddress)).filter(c=>c.minterAddress?.toLowerCase()===a.toLowerCase()).flatMap(c=>{let w=T.network||"sepolia",U=T.chainId;U===137||w==="polygon"?(w="polygon",U=137):U===130||w==="unichain-mainnet"?(w="unichain-mainnet",U=130):U===1301||w==="unichain"?(w="unichain",U=1301):U===1828369849||w==="moonwalker"?(w="moonwalker",U=1828369849):(U===11155111||w==="sepolia")&&(w="sepolia",U=11155111);const H=parseInt(c.quantity||"1");return H>1?Array(H).fill().map((K,_)=>({id:`${c.id||`${T.contractAddress}-${c.tokenId}`}-${_}`,activityType:"nft_mint",timestamp:c.timestamp,image:c.image||T.previewUrl,title:`Minted ${T.name} #${parseInt(c.tokenId)+_}`,subtitle:`NFT Mint #${parseInt(c.tokenId)+_}`,address:T.contractAddress,network:w,chainId:U,symbol:T.symbol,artworkType:T.artworkType,transactionHash:c.hash,quantity:H,tokenId:String(parseInt(c.tokenId)+_)})):[{id:c.id||`${T.contractAddress}-${c.tokenId}`,activityType:"nft_mint",timestamp:c.timestamp,image:c.image||T.previewUrl,title:`Minted ${T.name} #${c.tokenId}`,subtitle:`NFT Mint #${c.tokenId}`,address:T.contractAddress,network:w,chainId:U,symbol:T.symbol,artworkType:T.artworkType,transactionHash:c.hash,quantity:1,tokenId:c.tokenId}]})))).flat(),q=new Set,G=[...u,...z,...E,...L,...f].filter(T=>{if(!T.transactionHash)return!0;const S=T.activityType==="nft_mint"?`${T.transactionHash}-${T.activityType}-${T.tokenId}`:`${T.transactionHash}-${T.activityType}`;return q.has(S)?!1:(q.add(S),!0)}).sort((T,S)=>{const c=T.timestamp instanceof Date?T.timestamp.getTime():typeof T.timestamp=="number"?T.timestamp:typeof T.timestamp=="string"?new Date(T.timestamp).getTime():0;return(S.timestamp instanceof Date?S.timestamp.getTime():typeof S.timestamp=="number"?S.timestamp:typeof S.timestamp=="string"?new Date(S.timestamp).getTime():0)-c});ri(a,r?.id,G),g(G),t(!1)}catch{t(!1),N.error("Error loading activity data")}};A()},[a,r]);const B=A=>{const x=ua(A.image);return A.artworkType==="video"?e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black/5 dark:bg-black/20",children:e.jsx("video",{src:x,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0})}):e.jsx("div",{className:"relative w-12 h-12 rounded-lg overflow-hidden bg-black/5 dark:bg-black/20",children:e.jsx("img",{src:x,alt:A.title,className:"w-full h-full object-cover",onError:m=>{m.target.onerror=null,m.target.src="/placeholder.png"}})})},v=(A,x)=>{if(x)switch(x){case 130:return"Unichain Mainnet";case 1301:return"Unichain Testnet";case 137:return"Polygon";case 1828369849:return"Moonwalker";case 10143:return"Monad Testnet";case 11155111:return"Sepolia";default:return"Unknown Network"}switch(A){case"unichain-mainnet":return"Unichain Mainnet";case"unichain":return"Unichain Testnet";case"polygon":return"Polygon";case"moonwalker":return"Moonwalker";case"monad-testnet":return"Monad Testnet";default:return"Sepolia"}},I=A=>{const m=(D=>D instanceof Date?D:typeof D=="number"?new Date(D):D?.seconds?new Date(D.seconds*1e3):typeof D=="string"?new Date(D):new Date)(A.timestamp),d=A.activityType==="nft_creation"||A.activityType==="nft_mint";A.activityType;const b=()=>{switch(A.activityType){case"token_creation":return"bg-purple-500/10 text-purple-500";case"token_transaction":return"bg-blue-500/10 text-blue-500";case"nft_creation":return"bg-pink-500/10 text-pink-500";case"nft_mint":return"bg-green-500/10 text-green-500";default:return"bg-gray-500/10 text-gray-500"}},h=()=>{switch(A.activityType){case"token_creation":return"Token Creation";case"token_transaction":return"Token Transfer";case"nft_creation":return"NFT Collection";case"nft_mint":return"NFT Mint";default:return"Transaction"}};return e.jsx(M.div,{variants:ii,whileHover:{scale:1.01,transition:{duration:.2}},className:"relative bg-white dark:bg-[#1a1b1f] rounded-xl p-3 border border-gray-100 dark:border-gray-800 hover:border-[#00ffbd] transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:B(A)}),e.jsxs(M.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d?e.jsx("button",{onClick:()=>navigate(`/collection/${A.symbol}`),className:"text-sm font-medium text-gray-900 dark:text-white hover:text-[#00ffbd] dark:hover:text-[#00ffbd] transition-colors truncate",children:A.title}):e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:A.title}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${b()}`,children:h()})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:ca(m,{addSuffix:!0})})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:A.subtitle}),A.network&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["on ",v(A.network,A.chainId)]}),A.transactionHash&&e.jsxs("a",{href:nn(A.chainId,"tx",A.transactionHash),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 hover:text-[#00ffbd] transition-colors",children:[e.jsx("span",{children:"View Transaction"}),e.jsx(gs,{size:12,className:"ml-1 cursor-pointer",onClick:D=>{D.preventDefault(),navigator.clipboard.writeText(A.transactionHash),N.success("Transaction hash copied!")}})]})]})]})]})},A.id)};return o?s?e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] flex items-center justify-center",children:e.jsxs(M.div,{className:"flex flex-col items-center gap-4",initial:{scale:.9},animate:{scale:1},transition:{duration:.3},children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-[#00ffbd] rounded-full animate-spin border-t-transparent"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-6 h-6 bg-[#00ffbd] rounded-full opacity-30"})]}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Loading history..."})]})}):e.jsx("div",{className:"h-screen bg-gray-50 dark:bg-[#0a0b0f] pt-20 px-8 pb-8 overflow-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto h-full overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between mb-12 sticky top-4 z-[120]",children:[e.jsx(M.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-xl font-bold text-gray-900 dark:text-white",children:"Activity History"}),e.jsx(C,{})]}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative mt-8 h-[calc(100%-6rem)] overflow-hidden",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(A=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${A*.2}s`}},A))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl h-full overflow-hidden",children:e.jsx("div",{className:"h-full overflow-y-auto overflow-x-hidden custom-scrollbar",children:e.jsx(M.div,{variants:ni,initial:"hidden",animate:"show",className:"space-y-3",children:P.length>0?P.map(A=>I(A)):e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-center text-gray-500 dark:text-gray-400",children:"No activity found"})})})})]})]})}):e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6 max-w-md",children:"Please connect your wallet to view your activity history. You'll be able to see all your transactions, token transfers, and NFT activities."}),e.jsxs("button",{onClick:k,className:"px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Connect Wallet"]})]})})}const Ws=3e4,cs=new Map,li=(s,t)=>{const a=`${s}-${t}`,o=cs.get(a);if(o){const{timestamp:p,data:g}=o;if(Date.now()-p<Ws)return console.log("Using cached NFTs"),g.map(i=>({...i,network:i.network||(i.chainId===11155111?"sepolia":i.chainId===1301?"unichain":i.chainId===1828369849?"moonwalker":i.chainId===10143?"monad-testnet":"sepolia")}));cs.delete(a)}const r=localStorage.getItem(`nfts-${a}`);if(r)try{const{timestamp:p,data:g}=JSON.parse(r);if(Date.now()-p<Ws)return console.log("Using localStorage cached NFTs"),g.map(i=>({...i,network:i.network||(i.chainId===11155111?"sepolia":i.chainId===1301?"unichain":i.chainId===1828369849?"moonwalker":i.chainId===10143?"monad-testnet":"sepolia")}));localStorage.removeItem(`nfts-${a}`)}catch(p){console.error("Error parsing localStorage cache:",p)}return null},oi=(s,t,a)=>{const o=`${s}-${t}`,r={timestamp:Date.now(),data:a};cs.set(o,r);try{localStorage.setItem(`nfts-${o}`,JSON.stringify(r))}catch(p){console.error("Error saving to localStorage:",p)}},di=async(s,t)=>{try{let a;if(t===130)a="https://unichain.blockscout.com";else if(t===1301)a="https://unichain-sepolia.blockscout.com";else if(t===137)a="https://polygon.blockscout.com";else if(t===1828369849)a="https://moonwalker-blockscout.eu-north-2.gateway.fm";else if(t===10143)a="https://monad-testnet.socialscan.io";else if(t===11155111)a="https://eth-sepolia.blockscout.com";else return[];console.log("Fetching NFTs from Blockscout:",{baseUrl:a,address:s,chainId:t});const r=(await es.get(`${a}/api/v2/addresses/${s}/nft?type=ERC-721%2CERC-404%2CERC-1155`)).data.items||[];return(await Promise.all(r.map(async g=>{try{const k=((await es.get(`${a}/api/v2/tokens/${g.token.address}/transfers`,{params:{type:g.token.type,holder:s,token_id:g.id}})).data.items||[])[0],y=(await es.get(`${a}/api/v2/tokens/${g.token.address}/instances/${g.id}/metadata`)).data;return{contractAddress:g.token.address,tokenId:g.id,type:g.token.type,name:y.name||`${g.token.name} #${g.id}`,symbol:g.token.symbol,collectionName:g.token.name,description:y.description,image:y.image,balance:g.value||"1",chainId:t,network:t===137?"polygon":t===1301?"unichain":t===130?"unichain-mainnet":t===1828369849?"moonwalker":t===10143?"monad-testnet":"sepolia",mintedAt:k?.timestamp||Date.now(),value:k?.value||"0",mintToken:{address:"0x0000000000000000000000000000000000000000",type:"native"}}}catch(i){return console.error("Error processing NFT:",i),null}}))).filter(Boolean)}catch(a){return console.error("Error fetching from Blockscout:",a),[]}},Hs={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},ci={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{type:"spring",bounce:.3}}},xi=()=>e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"relative",children:e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(s=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${s*.2}s`}},s))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] h-[340px]",children:[e.jsx("div",{className:"h-[180px] w-full bg-gray-200 dark:bg-gray-800 animate-pulse"}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("div",{className:"w-16 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsx("div",{className:"absolute top-3 right-3 z-10",children:e.jsx("div",{className:"w-20 h-5 bg-gray-300 dark:bg-gray-700 rounded-full animate-pulse"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"h-6 w-3/4 bg-gray-200 dark:bg-gray-800 rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-4 w-full bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-800 rounded-lg animate-pulse"})]})]})]})]})});function _l(){const[s,t]=n.useState([]),[a,o]=n.useState(!0),{address:r,isConnected:p}=wt(),{chain:g}=Xe(),{openConnectModal:i}=Dt(),[$,k]=n.useState({}),[j,y]=n.useState({type:"all",network:"all"}),C=n.useRef(null),P=n.useMemo(()=>s.filter(x=>{if(j.type!=="all"&&x.type!==j.type)return!1;if(j.network!=="all"){const m=parseInt(j.network);return x.chainId===m||m===11155111&&x.network==="sepolia"||m===130&&x.network==="unichain-mainnet"||m===1301&&x.network==="unichain"||m===137&&x.network==="polygon"||m===1828369849&&x.network==="moonwalker"}return!0}),[s,j]);n.useEffect(()=>{const x=async()=>{if(!r){t([]),o(!1);return}try{const d=li(r,g?.id);if(d){t(d),o(!1),m();return}await m()}catch(d){console.error("Error loading NFTs:",d),o(!1)}},m=async()=>{try{const d=await ln(r),b=[137,1301,130,1828369849,11155111],D=(await Promise.all(b.map(async f=>{try{return console.log(`Fetching NFTs for chain ${f}`),(await di(r,f)).map(G=>({...G,uniqueId:`${G.contractAddress}-${G.tokenId}-${G.type}-${f}`}))}catch(q){return console.error(`Error fetching NFTs for chain ${f}:`,q),[]}}))).flat(),V=new Map(D.map(f=>[`${f.contractAddress}-${f.tokenId}`,f])),z=d.map(f=>{const q=V.get(`${f.contractAddress}-${f.tokenId}`);return{...f,...q,balance:q?.balance||f.balance||"1",uniqueId:`${f.contractAddress}-${f.tokenId}-${f.type}-${f.chainId||q?.chainId}`,network:f.network||q?.network||(f.chainId===137?"polygon":f.chainId===1301?"unichain":f.chainId===130?"unichain-mainnet":f.chainId===1828369849?"moonwalker":"sepolia")}}),u=new Set(d.map(f=>`${f.contractAddress}-${f.tokenId}`)),F=D.filter(f=>!u.has(`${f.contractAddress}-${f.tokenId}`)),l=[...z,...F].sort((f,q)=>{const G=new Date(f.mintedAt||0);return new Date(q.mintedAt||0)-G});oi(r,g?.id,l),t(l),o(!1);const E=[...new Set(l.filter(f=>f.mintToken?.address).map(f=>f.mintToken.address.toLowerCase()))],L={};await Promise.all(E.map(async f=>{try{const q=await Ms(f);q?.logo&&(L[f]=q.logo)}catch(q){console.error(`Error loading logo for token ${f}:`,q)}})),k(L)}catch(d){console.error("Error loading fresh NFT data:",d),o(!1)}};x()},[r,g]),n.useEffect(()=>{(async()=>{for(const m of s)if(m?.mintToken?.address&&!$[m.mintToken.address.toLowerCase()])try{const d=await Ms(m.mintToken.address);d?.logo&&k(b=>({...b,[m.mintToken.address.toLowerCase()]:d.logo}))}catch(d){console.error("Error fetching token logo:",d)}})()},[s]);const B=(x,m)=>{if(!x)return"0";try{const b=m?.mintToken?.address?.toLowerCase()==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"||m.network==="moonwalker",h=parseInt(m.quantity||"1");let D=x;if(h>1)if(!isNaN(x))D=String(Number(x)/h);else{const F=x.toString().replace(/,/g,"");try{const l=qe(F,"wei"),E=Le(l);D=String(Number(E)/h)}catch{const l=Le(F);D=String(Number(l)/h)}}if(b||m?.mintToken?.type==="custom"||m?.mintToken?.type==="usdc"||m?.mintToken?.type==="usdt")return parseFloat(D).toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0});let V;if(typeof D=="string"){const F=D.replace(/,/g,"");try{V=qe(F,"wei")}catch{V=Tt(F)}}else V=BigInt(D.toString());const z=Le(V),u=parseFloat(z);return isNaN(u)?"0":u.toLocaleString("en-US",{maximumFractionDigits:6,minimumFractionDigits:0})}catch(d){return console.error("Error formatting price:",d),x?.toString()||"0"}},v=()=>{const[x,m]=n.useState(!1),[d,b]=n.useState(!1),h=l=>{C.current&&clearTimeout(C.current),l(!0)},D=l=>{C.current=setTimeout(()=>{l(!1)},300)},V={all:s.length,ERC721:s.filter(l=>l.type==="ERC721").length,ERC1155:s.filter(l=>l.type==="ERC1155").length},z={all:s.length,11155111:s.filter(l=>l.network==="sepolia"||l.chainId===11155111).length,130:s.filter(l=>l.network==="unichain-mainnet"||l.chainId===130).length,1301:s.filter(l=>l.network==="unichain"||l.chainId===1301).length,137:s.filter(l=>l.network==="polygon"||l.chainId===137).length,1828369849:s.filter(l=>l.network==="moonwalker"||l.chainId===1828369849).length,10143:s.filter(l=>l.network==="monad-testnet"||l.chainId===10143).length},u=[{value:"all",label:`All Types (${V.all})`},{value:"ERC721",label:`ERC721 (${V.ERC721})`},{value:"ERC1155",label:`ERC1155 (${V.ERC1155})`}],F=[{id:"all",label:`All Networks (${z.all})`},{id:"11155111",label:`Sepolia (${z[11155111]})`},{id:"130",label:`Unichain Mainnet (${z[130]})`},{id:"1301",label:`Unichain Testnet (${z[1301]})`},{id:"137",label:`Polygon (${z[137]})`},{id:"1828369849",label:`Moonwalker (${z[1828369849]})`},{id:"10143",label:`Monad Testnet (${z[10143]})`}];return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",onMouseEnter:()=>h(b),onMouseLeave:()=>D(b),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between text-xs",children:[e.jsx("span",{children:u.find(l=>l.value===j.type)?.label}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${d?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(C.current),onMouseLeave:()=>D(b),children:u.map(l=>e.jsx("button",{onClick:()=>{y(E=>({...E,type:l.value})),b(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 text-xs ${j.type===l.value?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:l.label},l.value))})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>h(m),onMouseLeave:()=>D(m),children:[e.jsxs("button",{type:"button",className:"bg-white dark:bg-[#0d0e12] border border-gray-300 dark:border-gray-700 rounded-lg px-4 py-2 text-gray-900 dark:text-white focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none min-w-[160px] flex items-center justify-between text-xs",children:[e.jsx("span",{children:F.find(l=>l.id===j.network)?.label}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsx("div",{className:"absolute z-[110] w-full mt-1 bg-white dark:bg-[#0d0e12] rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",onMouseEnter:()=>clearTimeout(C.current),onMouseLeave:()=>D(m),children:F.map(l=>e.jsx("button",{onClick:()=>{y(E=>({...E,network:l.id})),m(!1)},className:`w-full px-4 py-2 text-left hover:bg-gray-50 dark:hover:bg-gray-800 first:rounded-t-lg last:rounded-b-lg transition-colors duration-150 text-xs ${j.network===l.id?"bg-[#00ffbd]/10 text-[#00ffbd]":"text-gray-900 dark:text-white"}`,children:l.label},l.id))})]})]})},I=x=>{const m=x?.mintToken?.address?.toLowerCase();return!m||m==="0x0000000000000000000000000000000000000000"?x?.network==="moonwalker"||x?.chainId===1828369849?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-5 h-5"}):x?.network==="polygon"||x?.chainId===137?e.jsx("img",{src:"/polygon.png",alt:"POL",className:"w-5 h-5"}):x?.network==="monad-testnet"||x?.chainId===10143?e.jsx("img",{src:"/monad.png",alt:"MON",className:"w-5 h-5"}):e.jsx(ks,{className:"w-5 h-5 text-[#00ffbd]"}):m==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?e.jsx("img",{src:"/Zero.png",alt:"ZERO",className:"w-4 h-4"}):m&&$[m]?e.jsx("img",{src:$[m],alt:x.mintToken.symbol||"Token",className:"w-4 h-4 rounded-full",onError:b=>{b.target.onerror=null,b.target.src="/token-default.png"}}):x.mintToken?.type==="custom"?e.jsx("img",{src:"/token-default.png",alt:"Token",className:"w-4 h-4 rounded-full"}):e.jsx(ks,{className:"w-4 h-4 text-[#00ffbd]"})},A=x=>{const m=ua(x.image||x.previewUrl),d=x.name?.replace(/ #0$/,"");return e.jsx(M.div,{variants:ci,whileHover:{scale:1.02,transition:{duration:.2}},whileTap:{scale:.98},className:"block",children:e.jsxs("div",{className:"relative",children:[e.jsxs(M.div,{className:"absolute -top-[2px] -left-[2px] w-8 h-8",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(b=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${b*.2}s`}},b))}),e.jsxs("div",{className:"relative z-10 bg-white dark:bg-[#1a1b1f] h-[340px]",children:[e.jsx(M.div,{className:"relative h-[180px] w-full overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:x.artworkType==="video"?e.jsx("video",{src:m,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0}):e.jsx("img",{src:m,alt:d,className:"w-full h-full object-cover",onError:b=>{b.target.onerror=null,b.target.src="/placeholder.png"}})}),e.jsxs(M.div,{className:"flex flex-col flex-1 p-4",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:[e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"flex items-center justify-between gap-2 mb-1 w-full",children:e.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white truncate flex-shrink min-w-0",children:d})})}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Minted:"}),e.jsx("span",{children:ca(new Date(x.mintedAt),{addSuffix:!0})})]}),x.value&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{children:"Mint Price:"}),e.jsxs("div",{className:"flex items-center gap-1 text-[#00ffbd]",children:[I(x),e.jsxs("span",{className:"font-medium",children:[B(x.value,x)," ",(()=>{const b=x?.mintToken?.address?.toLowerCase();return b==="0xf4a67fd6f54ff994b7df9013744a79281f88766e"?"ZERO":!b||b==="0x0000000000000000000000000000000000000000"?x.network==="moonwalker"||x.chainId===1828369849?"ZERO":x.network==="polygon"||x.chainId===137?"POL":"ETH":x?.mintToken?.type==="custom"?x.mintToken.symbol:"ETH"})()]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Collection:"}),e.jsx(ve,{to:`/collection/${x.symbol}`,className:"text-[#00ffbd] hover:underline",children:x.collectionName})]})]})]})]}),x.type==="ERC1155"&&x.balance>1&&e.jsx("div",{className:"absolute top-3 right-12 z-10",children:e.jsxs("div",{className:"bg-[#00ffbd] text-black px-2 py-0.5 rounded-full text-xs font-medium",children:["x",x.balance]})})]})},x.uniqueId)};return p?a?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f]",children:e.jsxs("div",{className:"ml-[256px] relative",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-gray-50 dark:bg-[#0a0b0f] border-b border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[e.jsxs(M.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative inline-block mb-3 pt-4",children:[e.jsx("div",{className:"h-6 w-32 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"absolute -bottom-2 left-0 w-full h-0.5 bg-[#00ffbd]"})]}),e.jsx(M.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-xl pb-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"}),e.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-800 rounded animate-pulse"})]})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4 overflow-y-auto custom-scrollbar",style:{height:"calc(100vh - 120px)",scrollbarWidth:"thin",scrollbarColor:`#00ffbd ${document.documentElement.classList.contains("dark")?"#1a1b1f":"#ffffff"}`},children:e.jsx(M.div,{variants:Hs,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:Array.from({length:10}).map((x,m)=>e.jsx(xi,{},m))})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f]",children:e.jsxs("div",{className:"ml-[256px] relative",children:[e.jsx("div",{className:"sticky top-0 z-50 bg-gray-50 dark:bg-[#0a0b0f] border-b border-gray-200 dark:border-gray-800",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-8",children:[e.jsxs(M.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative inline-block mb-3 pt-4",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"My NFTs"}),e.jsx("div",{className:"absolute -bottom-2 left-0 w-full h-0.5 bg-[#00ffbd]"})]}),e.jsx(M.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"max-w-xl pb-3",children:e.jsx(v,{})})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-8 py-4 overflow-y-auto custom-scrollbar",style:{height:"calc(100vh - 120px)",scrollbarWidth:"thin",scrollbarColor:`#00ffbd ${document.documentElement.classList.contains("dark")?"#1a1b1f":"#ffffff"}`},children:e.jsx(M.div,{variants:Hs,initial:"hidden",animate:"show",className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:P.length>0?P.map(A):e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-center py-12 col-span-full",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No NFTs Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't minted any NFTs yet."})]})})})]})}):e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6 max-w-md",children:"Please connect your wallet to view your NFTs. You'll be able to see all your NFT collections and manage them."}),e.jsxs("button",{onClick:i,className:"px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Connect Wallet"]})]})})}const mi=s=>s==="v2"?[{id:"swap",label:"Swap",icon:Fs},{id:"my-pools",label:"My Pools",icon:Ss},{id:"pool",label:"Create Pool",icon:Cs},{id:"liquidity",label:"Add/Remove Liquidity",icon:Na}]:[{id:"swap",label:"Swap",icon:Fs},{id:"my-pools",label:"My Positions",icon:Ss},{id:"pool",label:"Create Position",icon:Cs}];function Ul(){const s=Jt(),[t,a]=n.useState("swap"),[o,r]=n.useState(null),[p,g]=n.useState(null),{chain:i}=Xe(),{address:$}=wt(),[k,j]=n.useState(!1),[y,C]=n.useState([]),{version:P}=on(),B=mi(P),{openConnectModal:v}=Dt(),I=(x,m)=>{a(x),m?.selectedTokens&&r(m.selectedTokens),m?.poolAddress&&g(m.poolAddress)};n.useEffect(()=>{const x=m=>{if(m.key.toLowerCase()==="z"){const d=Date.now();C(b=>{const h=[...b,d].slice(-3);return h.length===3&&h[2]-h[0]<=2e3?(j(D=>!D),[]):h})}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[]),n.useEffect(()=>{s.state?.activeTab&&a(s.state.activeTab)},[s.state]);const A=x=>{if(!i)return null;const m=i.id===1301||i.id===130,d=i.id===10143;if(!(m||d)&&!k)return e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-8 h-8"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Please switch to a supported network"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Trading is available on Unichain networks and Monad Testnet"})]})]})});switch(x){case"swap":if(m||d)return P==="v2"?e.jsx(bn,{}):e.jsx(jn,{});if(i.id===11155111&&k)return e.jsx(wn,{});break;case"pool":if(m||d)return P==="v2"?e.jsx(pn,{setActiveTab:I}):e.jsx(yn,{setActiveTab:I});if(i.id===11155111&&k)return e.jsx(fn,{setActiveTab:I});break;case"liquidity":if(m||d)return P==="v2"?e.jsx(gn,{initialTokens:o,poolAddress:p}):e.jsx(un,{initialTokens:o,poolAddress:p});if(i.id===11155111&&k)return e.jsx(hn,{initialTokens:o,poolAddress:p});break;case"my-pools":if(m||d)return P==="v2"?e.jsx(cn,{}):e.jsx(xn,{});if(i.id===11155111&&k)return e.jsx(mn,{});break}return e.jsx("div",{className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-8 h-8"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Please switch to a supported network"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Trading is available on Unichain networks and Monad Testnet"})]})]})})};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Trading"}),e.jsx("div",{className:"flex items-center gap-4",children:k&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-yellow-100 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-900",children:"Dev Mode"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(x=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${x*.2}s`}},x))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:$?e.jsxs(e.Fragment,{children:[i?.id===11155111&&!k&&e.jsx("div",{className:"mb-4 p-3 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-900 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"You are connected to Sepolia network. Please switch to Unichain network or enable Dev Mode to use Sepolia."})}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar",children:B.map(x=>e.jsxs("button",{onClick:()=>I(x.id),className:`
                          flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap
                          transition-all duration-200 relative group
                          ${t===x.id?"text-[#00ffbd] bg-[#00ffbd]/10":"text-gray-500 dark:text-gray-400 bg-white dark:bg-[#1a1b1f] hover:bg-gray-50 dark:hover:bg-[#1a1b1f]/80"}
                          border border-gray-100 dark:border-gray-800
                        `,children:[e.jsx(x.icon,{size:16}),x.label,e.jsx("div",{className:`
                          absolute bottom-0 left-0 right-0 h-0.5 rounded-full
                          transition-all duration-200
                          ${t===x.id?"bg-[#00ffbd]":"bg-transparent group-hover:bg-[#00ffbd]/30"}
                        `})]},x.id))}),i?.id===ha.id&&e.jsx(dn,{})]}),e.jsxs("div",{className:"h-[calc(100vh-280px)] overflow-y-auto custom-scrollbar",children:[t==="swap"&&A("swap"),t==="pool"&&A("pool"),t==="liquidity"&&A("liquidity"),t==="my-pools"&&A("my-pools")]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-3",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center mb-6 max-w-md",children:"Please connect your wallet to access the trading features. You'll be able to swap tokens, manage liquidity, and more."}),e.jsxs("button",{onClick:v,className:"px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Connect Wallet"]})]})})]})]})})}BigInt(2e10),BigInt(1e11),BigInt(1e9),BigInt(5e10);const Qt={MAINNET:"0x81014F44b0a345033bB2b3B21C7a1A308B35fEeA",SEPOLIA:"0xea58fcA6849d79EAd1f26608855c2D6407d54Ce2",UNICHAIN_MAINNET:"0x81014F44b0a345033bB2b3B21C7a1A308B35fEeA",UNICHAIN_TESTNET:"0xea58fcA6849d79EAd1f26608855c2D6407d54Ce2"},gi=[{inputs:[{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"bridgeETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"bridgeETHTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_l1Token",type:"address"},{internalType:"address",name:"_l2Token",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_l1Token",type:"address"},{internalType:"address",name:"_l2Token",type:"address"},{internalType:"address",name:"_to",type:"address"},{internalType:"uint256",name:"_amount",type:"uint256"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositERC20To",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositETH",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_to",type:"address"},{internalType:"uint32",name:"_minGasLimit",type:"uint32"},{internalType:"bytes",name:"_extraData",type:"bytes"}],name:"depositETHTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"messenger",outputs:[{internalType:"contract CrossDomainMessenger",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"}],Vs=({children:s,content:t})=>{const[a,o]=n.useState(!1);return e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:s}),a&&e.jsx("div",{className:"absolute z-50 px-3 py-2 text-sm bg-gray-900 text-white rounded-lg shadow-lg whitespace-nowrap",children:t})]})},ui=()=>e.jsxs("div",{className:"relative w-5 h-5",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-[#00ffbd] rounded-full"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 w-[1px] h-[40%] bg-[#00ffbd] origin-bottom",style:{transform:"translate(-50%, -100%) rotate(0deg)",animation:"rotate 2s linear infinite"}}),e.jsx("style",{jsx:!0,children:`
      @keyframes rotate {
        from { transform: translate(-50%, -100%) rotate(0deg); }
        to { transform: translate(-50%, -100%) rotate(360deg); }
      }
    `})]}),hi=({targetTime:s})=>{const[t,a]=n.useState(s);n.useEffect(()=>{const r=setInterval(()=>{a(p=>p<=0?(clearInterval(r),0):p-1)},1e3);return()=>clearInterval(r)},[]);const o=r=>{const p=Math.floor(r/60),g=r%60;return`${p}m ${g}s remaining`};return e.jsxs("div",{className:"flex items-center gap-2 text-[#00ffbd]",children:[e.jsx(ui,{}),e.jsx("span",{className:"text-sm",children:o(t)})]})},pi=({isOpen:s,onClose:t,currentStep:a,txHash:o,fromNetwork:r,toNetwork:p})=>{n.useState(Date.now());const g=($,k)=>k.id===1?`https://etherscan.io/tx/${$}`:k.id===11155111?`https://sepolia.etherscan.io/tx/${$}`:"#",i=[{title:`Start on ${r?.name}`,description:"Bridge transaction initiated",status:a==="start"?"current":a?"complete":"upcoming",link:o?g(o,r):null},{title:"Wait ~3 mins",description:"Transaction processing",status:a==="waiting"?"current":a==="complete"?"complete":"upcoming",timer:a==="waiting"?180:null},{title:`Get ETH on ${p?.name}`,description:"Bridge complete",status:a==="complete"?"complete":"upcoming"}];return e.jsx(fe,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(he,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(he.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:"Bridge Progress"}),e.jsx("div",{className:"mt-4 space-y-6",children:i.map(($,k)=>e.jsxs("div",{className:"relative",children:[k!==i.length-1&&e.jsx("div",{className:`absolute left-3.5 top-8 w-0.5 h-full ${$.status==="complete"?"bg-[#00ffbd]":"bg-gray-200 dark:bg-gray-700"}`}),e.jsxs("div",{className:"relative flex items-start",children:[e.jsx("div",{className:`flex h-7 w-7 shrink-0 items-center justify-center rounded-full ${$.status==="complete"?"bg-[#00ffbd]":$.status==="current"?"bg-blue-500":"bg-gray-200 dark:bg-gray-700"}`,children:$.status==="complete"?e.jsx(ka,{className:"h-4 w-4 text-black"}):$.status==="current"?e.jsx("div",{className:"h-2 w-2 rounded-full bg-white animate-pulse"}):null}),e.jsxs("div",{className:"ml-4 min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:$.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:$.description}),$.timer&&$.status==="current"&&e.jsx("div",{className:"mt-2",children:e.jsx(hi,{targetTime:$.timer})}),$.link&&e.jsx("a",{href:$.link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-[#00ffbd] hover:text-[#00e6a9] mt-1 inline-block",children:"View in explorer "})]})]})]},k))}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",className:"w-full rounded-lg bg-gray-100 dark:bg-gray-800 px-4 py-2 text-sm font-medium text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 focus:outline-none",onClick:t,children:"Close"})})]})})})})]})})},yi=({isOpen:s,onClose:t,onAccept:a})=>{const[o,r]=n.useState({time:!1,cancellation:!1,fees:!1}),p=Object.values(o).every(Boolean);return e.jsx(fe,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(he,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-transparent p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4 mb-6",children:[e.jsx(he.Title,{as:"h3",className:"text-xl font-bold text-gray-900 dark:text-white",children:"Accept terms"}),e.jsx("p",{className:"text-base text-gray-700 dark:text-gray-400 mt-2",children:"Please read and agree to the following terms before you continue"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 text-[#00ffbd] bg-gray-100 dark:bg-[#2d2f36] border-gray-300 dark:border-gray-600 rounded focus:ring-[#00ffbd] focus:ring-offset-0 focus:ring-2 dark:focus:ring-offset-[#1a1b1f] transition-colors cursor-pointer",checked:o.time,onChange:g=>r(i=>({...i,time:g.target.checked}))}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:"I understand it will take ~3 mins until my funds are on Unichain Sepolia"})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 text-[#00ffbd] bg-gray-100 dark:bg-[#2d2f36] border-gray-300 dark:border-gray-600 rounded focus:ring-[#00ffbd] focus:ring-offset-0 focus:ring-2 dark:focus:ring-offset-[#1a1b1f] transition-colors cursor-pointer",checked:o.cancellation,onChange:g=>r(i=>({...i,cancellation:g.target.checked}))}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:"I understand once a bridge is initiated it cannot be sped up or cancelled"})]}),e.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group bg-gray-50/80 dark:bg-gray-800/80 rounded-xl p-4",children:[e.jsx("input",{type:"checkbox",className:"mt-1 w-4 h-4 text-[#00ffbd] bg-gray-100 dark:bg-[#2d2f36] border-gray-300 dark:border-gray-600 rounded focus:ring-[#00ffbd] focus:ring-offset-0 focus:ring-2 dark:focus:ring-offset-[#1a1b1f] transition-colors cursor-pointer",checked:o.fees,onChange:g=>r(i=>({...i,fees:g.target.checked}))}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:"I understand network fees are approximate and will change"})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",className:`w-full px-4 py-3 text-sm font-medium rounded-xl transition-colors ${p?"bg-[#00ffbd] text-black hover:bg-[#00e6a9]":"bg-gray-300 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-not-allowed"}`,onClick:()=>p&&a(),disabled:!p,children:"Continue"})})]})})})})]})})},fi=()=>e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-gray-50 dark:bg-[#2d2f36] rounded-xl p-5",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-24 h-6 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse mb-1"}),e.jsx("div",{className:"w-32 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-white/50 dark:bg-black/20 p-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-16 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),e.jsx("div",{className:"w-3 h-3 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),e.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"w-24 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-16 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}),e.jsx("div",{className:"w-20 h-4 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})]})]})]})}),bi=({mode:s,onChange:t})=>e.jsxs("div",{className:"flex items-center gap-2 p-1 bg-[#1a1b1f] rounded-lg mb-4",children:[e.jsx("button",{className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${s==="mainnet"?"bg-[#2d2f36] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>t("mainnet"),children:"Mainnet"}),e.jsx("button",{className:`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${s==="testnet"?"bg-[#2d2f36] text-white":"text-gray-400 hover:text-white"}`,onClick:()=>t("testnet"),children:"Testnet"})]}),ji=({isOpen:s,onClose:t,address:a,setShowProgress:o,setCurrentStep:r,setTxHash:p})=>{const[g,i]=n.useState([]),[$,k]=n.useState(!0),[j,y]=n.useState("testnet"),C=async()=>{if(a){k(!0);try{let P=[];const B="JE5C1JTK2C629S4T8XVWD125CE37QZ83QS";j==="mainnet"?P=await Promise.all([fetch(`https://api.etherscan.io/api?module=account&action=txlist&address=${a}&startblock=0&endblock=99999999&sort=desc&apikey=${B}`),fetch(`https://unichain.blockscout.com/api/v2/addresses/${a}/transactions`)]):P=await Promise.all([fetch(`https://api-sepolia.etherscan.io/api?module=account&action=txlist&address=${a}&startblock=0&endblock=99999999&sort=desc&apikey=${B}`),fetch(`https://unichain-sepolia.blockscout.com/api/v2/addresses/${a}/transactions`)]);const[v,I]=await Promise.all(P.map(async m=>{if(!m.ok)return{result:[]};const d=await m.json();return d.result?d:{result:d.items||[]}})),A=j==="mainnet"?Qt.MAINNET.toLowerCase():Qt.SEPOLIA.toLowerCase(),x=[...(v.result||[]).filter(m=>(typeof m.to=="string"?m.to.toLowerCase():"")===A).map(m=>({hash:m.hash,timestamp:new Date(m.timeStamp*1e3).getTime(),value:Le(m.value||"0"),fromNetwork:j==="mainnet"?"ETH Mainnet":"Sepolia",toNetwork:j==="mainnet"?"Unichain Mainnet":"Unichain Testnet",status:m.confirmations>12?"completed":"pending",fee:m.gasPrice?Le(BigInt(m.gasPrice)*BigInt(m.gasUsed||"21000")):"0"})),...(I.result||[]).filter(m=>(typeof m.to=="string"?m.to.toLowerCase():m.to?.hash?.toLowerCase()||"")===A).map(m=>({hash:m.hash,timestamp:new Date(m.timestamp||m.timeStamp*1e3).getTime(),value:Le(m.value||"0"),fromNetwork:j==="mainnet"?"Unichain Mainnet":"Unichain Testnet",toNetwork:j==="mainnet"?"ETH Mainnet":"Sepolia",status:m.confirmations>12?"completed":"pending",fee:m.gasPrice?Le(BigInt(m.gasPrice)*BigInt(m.gasUsed||"21000")):"0"}))];console.log("Fetched activities:",x),i(x.sort((m,d)=>d.timestamp-m.timestamp))}catch(P){console.error("Error fetching bridge history:",P),N.error("Failed to load bridge history")}finally{k(!1)}}};return n.useEffect(()=>{s&&a&&C()},[s,a,j]),e.jsxs(he,{open:s,onClose:t,className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(he.Panel,{className:"w-full max-w-2xl bg-[#0d0e12] rounded-2xl flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-800",children:[e.jsx(he.Title,{className:"text-xl font-semibold text-white",children:"Bridge History"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:e.jsx(Fa,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"px-6 py-4 border-b border-gray-800",children:e.jsx(bi,{mode:j,onChange:y})}),e.jsx("div",{className:"flex-1 overflow-y-auto scrollbar-hide",children:e.jsx("div",{className:"p-6 space-y-4",children:$?Array.from({length:3}).map((P,B)=>e.jsx(fi,{},B)):g.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:"No bridge transactions found"})}):e.jsx(e.Fragment,{children:g.map((P,B)=>e.jsxs("div",{className:"bg-[#1a1b1f] rounded-xl p-5 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/eth-logo.png",alt:"ETH",className:"w-6 h-6"}),e.jsxs("span",{className:"text-white font-medium",children:[P.value," ETH"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-400",children:new Date(P.timestamp).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(P.timestamp).toLocaleTimeString()})]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-black/20 p-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:P.fromNetwork.includes("ETH")?"/eth.png":P.fromNetwork.includes("Sepolia")?"/sepolia.png":"/unichain-logo.png",alt:P.fromNetwork,className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-gray-400",children:P.fromNetwork})]}),e.jsx(us,{className:"text-[#00ffbd]",size:12}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:P.toNetwork.includes("ETH")?"/eth.png":P.toNetwork.includes("Sepolia")?"/sepolia.png":"/unichain-logo.png",alt:P.toNetwork,className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-gray-400",children:P.toNetwork})]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Status"}),e.jsx("span",{className:P.status==="completed"?"text-green-400":"text-yellow-400",children:P.status==="completed"?"Completed":"Pending"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Network Fee"}),e.jsxs("span",{className:"text-gray-400",children:[parseFloat(P.fee).toFixed(6)," ETH"]})]})]},B))})})})]})})]})},wi=({isOpen:s,onClose:t,onConfirm:a,amount:o,fromNetwork:r,toNetwork:p})=>e.jsx(fe,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(he,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all border border-gray-200 dark:border-gray-800",children:[e.jsx(he.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white mb-4",children:"Transaction Summary"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-[#2d2f36] p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r?.logo,alt:"From Network",className:"w-6 h-6"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:r?.name})]}),e.jsx(us,{className:"text-[#00ffbd]",size:12}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:p?.logo,alt:"To Network",className:"w-6 h-6"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:p?.name})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/eth-logo.png",alt:"ETH",className:"w-5 h-5"}),e.jsxs("span",{className:"text-base font-medium text-gray-900 dark:text-white",children:[o," ETH"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Network Fee"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"Check wallet for fee"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[e.jsx(Wt,{className:"text-blue-500",size:20}),e.jsx("span",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Estimated completion time: ~3 mins"})]})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("button",{type:"button",className:"w-full px-4 py-3 bg-[#00ffbd] hover:bg-[#00e6a9] text-black font-medium rounded-xl transition-colors",onClick:a,children:"Confirm Bridge"}),e.jsx("button",{type:"button",className:"w-full px-4 py-3 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 font-medium rounded-xl transition-colors",onClick:t,children:"Cancel"})]})]})})})})]})}),Me={eth:{mainnet:{id:1,name:"ETH Mainnet",logo:"/eth.png",disabled:!1,bridgeAddress:Qt.MAINNET},testnet:{id:11155111,name:"Sepolia",logo:"/sepolia.png",bridgeAddress:Qt.SEPOLIA}},unichain:{mainnet:{id:130,name:"Unichain Mainnet",logo:"/unichain-logo.png",disabled:!1},testnet:{id:1301,name:"Unichain Testnet",logo:"/unichain-logo.png"}}};function Ol(){return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0b0f] p-4 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"flex items-center mb-6",children:e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Bridge"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-4 md:p-6 rounded-xl",children:e.jsx(Ni,{})})]})]})})}function Ni(){const{address:s,isConnected:t}=wt(),{chain:a}=Xe(),{openConnectModal:o}=Dt();Nn();const[r,p]=n.useState(!0),[g,i]=n.useState(Me.eth.mainnet),[$,k]=n.useState(Me.unichain.mainnet),[j,y]=n.useState(!1),[C,P]=n.useState(""),[B,v]=n.useState(!1),[I,A]=n.useState(!1),[x,m]=n.useState(null),[d,b]=n.useState("0"),[h,D]=n.useState(!1),[V,z]=n.useState(null),[u,F]=n.useState(!1),[l,E]=n.useState({isCorrectNetwork:!1,message:""}),[L,f]=n.useState(!1),[q,G]=n.useState(!1),[T,S]=n.useState(!1),[c,w]=n.useState(!1);n.useEffect(()=>{t&&(a?.id===g.id?E({isCorrectNetwork:!0,message:`Connected to ${g.name}`}):E({isCorrectNetwork:!1,message:`Please switch to ${g.name}`}))},[a?.id,t,g]),n.useEffect(()=>{let R=!0,J;const se=async()=>{if(!(!s||!R))try{F(!0);const le=await new Ae(window.ethereum).getBalance(s);R&&(b(Le(le)),F(!1))}catch{R&&F(!1)}},W=()=>{J&&clearTimeout(J),J=setTimeout(se,1e3)};return se(),window.ethereum&&(window.ethereum.on("block",W),window.ethereum.on("chainChanged",se),window.ethereum.on("accountsChanged",se)),()=>{R=!1,J&&clearTimeout(J),window.ethereum&&(window.ethereum.removeListener("block",W),window.ethereum.removeListener("chainChanged",se),window.ethereum.removeListener("accountsChanged",se))}},[s,a?.id]),n.useCallback(async R=>{try{return await new(void 0).JsonRpcProvider("https://rpc.sepolia.org").getTransactionReceipt(R)}catch{return null}},[]);const U=R=>{const J=R.target.value;(J===""||/^\d*\.?\d*$/.test(J))&&P(J)},H=()=>{if(!C||!l.isCorrectNetwork)return;const R=parseFloat(C),J=parseFloat(d);if(R<=0){N.error("Please enter a valid amount");return}if(R>J){N.error("Insufficient ETH balance");return}f(!0)},K=async()=>{v(!1),A(!0),m("start"),D(!0);try{const J=await new Ae(window.ethereum).getSigner(),se=await J.getAddress(),W=Tt(C),le=await new je(g.bridgeAddress,gi,J).bridgeETHTo(se,200000n,"0x",{value:W});if(z(le.hash),(await le.wait()).status===0)throw new Error("Bridge transaction failed");m("waiting"),setTimeout(()=>{m("complete"),D(!1)},18e4)}catch(R){N.error(R.message||"Failed to bridge ETH"),D(!1),A(!1),m(null),z(null)}};n.useEffect(()=>{const R=async()=>{if(s)try{const se=await fetch(`https://eth-sepolia.blockscout.com/api/v2/addresses/${s}/transactions?filter=to%7C${g.bridgeAddress}`);if(!se.ok)return;const Z=(await se.json()).items.filter(le=>{const me=new Date(le.timestamp).getTime(),X=Math.floor((Date.now()-me)/(1e3*60));return le.to?.hash?.toLowerCase()===g.bridgeAddress.toLowerCase()&&le.value!=="0"&&le.decoded_input?.method_call?.includes("bridgeETH")&&(le.confirmations===0||le.confirmations>0&&X<3)});G(Z.length>0)}catch(se){console.error("Error checking pending transactions:",se)}};R();const J=setInterval(R,1e4);return()=>clearInterval(J)},[s,g.bridgeAddress]);const _=(R,J)=>{if(R.disabled){N.error("This network is coming soon!");return}J==="from"?(i(R),k(r?Me.unichain.mainnet:Me.unichain.testnet),S(!1)):(k(R),i(r?Me.eth.mainnet:Me.eth.testnet),w(!1))},ee=({isOpen:R,onClose:J,onSelect:se,type:W,anchorRef:Z})=>{if(!R||!Z.current)return null;const le=Z.current.getBoundingClientRect(),me=W==="from"?Me.eth:Me.unichain,X=r?me.mainnet:me.testnet;return Sa.createPortal(e.jsx("div",{className:"fixed z-50",style:{top:`${le.bottom+8}px`,left:W==="from"?`${le.left}px`:"auto",right:W==="to"?`${window.innerWidth-le.right}px`:"auto"},children:e.jsx("div",{className:"w-64 bg-white dark:bg-[#1a1b1f] rounded-xl shadow-xl border border-gray-200 dark:border-gray-800 py-2",children:e.jsxs("div",{className:"px-3 py-1",children:[e.jsx("div",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:r?"Mainnet":"Testnet"}),e.jsxs("button",{onClick:()=>se(X),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#2d2f36] transition-colors",disabled:X.disabled,children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 dark:bg-[#2d2f36] flex items-center justify-center",children:e.jsx("img",{src:X.logo,alt:X.name,className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:X.name}),X.comingSoon&&e.jsx("span",{className:"text-xs text-[#00ffbd] ml-auto",children:"Coming Soon"})]})]})})}),document.body)},Y=n.useRef(null),Q=n.useRef(null);return n.useEffect(()=>{const R=J=>{Y.current&&!Y.current.contains(J.target)&&S(!1),Q.current&&!Q.current.contains(J.target)&&w(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]),n.useEffect(()=>{r?(i(Me.eth.mainnet),k(Me.unichain.mainnet)):(i(Me.eth.testnet),k(Me.unichain.testnet))},[r]),t?e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-2xl p-4 md:p-6 border border-gray-200 dark:border-gray-800 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(!0),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${r?"bg-[#00ffbd] text-black":"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:"Mainnet"}),e.jsx("button",{onClick:()=>p(!1),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${r?"bg-gray-100 dark:bg-gray-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700":"bg-[#00ffbd] text-black"}`,children:"Testnet"})]}),e.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-3 px-4 py-2 bg-gray-50 dark:bg-[#2d2f36] rounded-full text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-[#3d4046] transition-colors border border-gray-200 dark:border-gray-700",children:[e.jsx(Wt,{className:`text-[#00ffbd] ${q?"animate-spin":""}`,size:20}),e.jsx("span",{children:"History"}),q&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-[#00ffbd] animate-pulse"})]})]}),e.jsx("div",{className:"relative bg-gray-50 dark:bg-[#1a1b1f] rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"From"}),e.jsxs("div",{className:"relative",ref:Y,children:[e.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3d4046] transition-colors",onClick:()=>{S(!T),w(!1)},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#627EEA]/10 dark:bg-[#627EEA]/20 flex items-center justify-center",children:e.jsx("img",{src:g.logo,alt:g.name,className:"w-7 h-7"})}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:g.name}),e.jsx(ns,{className:`ml-1 transition-transform text-gray-900 dark:text-white ${T?"rotate-180":""}`,size:20})]}),e.jsx(ee,{isOpen:T,onClose:()=>S(!1),onSelect:R=>_(R,"from"),type:"from",anchorRef:Y})]})]}),e.jsx("div",{className:"relative",children:e.jsx(M.div,{className:"w-10 h-10 rounded-full bg-white dark:bg-[#1a1b1f] flex items-center justify-center border border-gray-200 dark:border-gray-700",animate:{x:[0,5,0]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0},children:e.jsx(us,{size:16,className:"text-[#00ffbd]"})})}),e.jsxs("div",{className:"flex-1 text-right pl-6",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"To"}),e.jsx("div",{className:"flex items-center gap-2 justify-end",children:e.jsxs("div",{className:"relative",ref:Q,children:[e.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-[#3d4046] transition-colors",onClick:()=>{w(!c),S(!1)},children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#FF3B9A]/10 dark:bg-[#FF3B9A]/20 flex items-center justify-center",children:e.jsx("img",{src:$.logo,alt:$.name,className:"w-7 h-7"})}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:$.name}),e.jsx(ns,{className:`ml-1 transition-transform text-gray-900 dark:text-white ${c?"rotate-180":""}`,size:20})]}),e.jsx(ee,{isOpen:c,onClose:()=>w(!1),onSelect:R=>_(R,"to"),type:"to",anchorRef:Q})]})})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(Vs,{content:e.jsxs("div",{children:["Min: 0.001 ETH",e.jsx("br",{}),"Max: 100 ETH"]}),children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400 cursor-help",children:[e.jsx($s,{className:"h-4 w-4"}),"Bridge Limits"]})}),e.jsx(At,{mode:"wait",children:e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex items-center gap-2",children:[e.jsx(ut,{className:"text-gray-500 dark:text-gray-400",size:20}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:u?e.jsx(M.div,{className:"h-4 w-24 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"}):`Balance: ${parseFloat(d).toFixed(4)} ETH`})]},u?"loading":"loaded")})]}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"text",value:C,onChange:U,placeholder:"0.0",className:`w-full px-4 py-3 bg-gray-50 dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-700 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-[#00ffbd] focus:border-transparent text-2xl font-medium ${h?"opacity-50 cursor-not-allowed":""}`,disabled:h})})]}),e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-700 space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-base text-gray-900 dark:text-white font-medium",children:"Get on Unichain Sepolia"}),e.jsxs("div",{className:"flex items-center gap-2 bg-[#FF3B9A]/10 dark:bg-[#FF3B9A]/20 px-3 py-1.5 rounded-lg",children:[e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"Native Bridge"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(Vs,{content:"Transaction fee will be calculated by your wallet",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400 cursor-help",children:[e.jsx(va,{className:"text-gray-500 dark:text-gray-400",size:16}),e.jsx("span",{children:"Network Fee"}),e.jsx($s,{className:"h-4 w-4"})]})}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Check wallet for fee"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Wt,{className:"text-gray-500 dark:text-gray-400",size:18}),e.jsx("span",{children:"Estimated time"})]}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"~3 mins"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You will receive"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:C||"0"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:"/eth-logo.png",alt:"ETH",className:"w-5 h-5"}),e.jsx("span",{className:"text-sm text-gray-900 dark:text-white font-medium",children:"ETH"}),e.jsx("div",{className:"relative w-3 h-3",children:e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-3 h-3 absolute -bottom-1 -right-1"})})]})]})]})]})]}),e.jsx("button",{onClick:H,disabled:!C||h||!l.isCorrectNetwork,className:`w-full mt-6 px-4 py-3 rounded-xl font-medium text-base transition-all duration-200 hover:scale-[0.99] active:scale-[0.97] ${C&&!h&&l.isCorrectNetwork?"bg-[#00ffbd] text-black hover:bg-[#00e6a9] shadow-lg hover:shadow-xl":"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed"}`,children:h?"Processing...":l.isCorrectNetwork?C?"Review bridge":"Enter amount":"Please switch to Sepolia"})]}),e.jsxs("div",{className:"mt-4 md:mt-6 p-4 bg-gray-50 dark:bg-[#1a1b1f] rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Looking to bridge from Unichain to Sepolia?"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Try these alternative bridges:"," ",e.jsx("a",{href:"https://superbridge.app/unichain-sepolia",target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:text-[#00e6a9] mr-2",children:"SuperBridge"})," ","or"," ",e.jsx("a",{href:"https://testnet.brid.gg/unichain-sepolia",target:"_blank",rel:"noopener noreferrer",className:"text-[#00ffbd] hover:text-[#00e6a9]",children:"Brid.gg"})]})]}),e.jsx(ji,{isOpen:j,onClose:()=>y(!1),address:s,setShowProgress:A,setCurrentStep:m,setTxHash:z}),e.jsx(yi,{isOpen:B,onClose:()=>v(!1),onAccept:K}),e.jsx(pi,{isOpen:I,onClose:()=>A(!1),currentStep:x,txHash:V,fromNetwork:g,toNetwork:$}),e.jsx(wi,{isOpen:L,onClose:()=>f(!1),onConfirm:()=>{f(!1),v(!0)},amount:C,fromNetwork:g,toNetwork:$})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute -top-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -top-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute top-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -left-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsxs("div",{className:"absolute -bottom-[2px] -right-[2px] w-8 h-8",children:[e.jsx("div",{className:"absolute bottom-0 right-0 w-full h-[2px] bg-[#00ffbd]"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-[2px] h-full bg-[#00ffbd]"})]}),e.jsx("div",{className:"absolute -top-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -left-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-2 h-2 rounded-full bg-[#00ffbd] shadow-[0_0_10px_#00ffbd]"}),e.jsx("div",{className:"absolute top-3 right-3 flex gap-1 z-20",children:[1,2,3].map(R=>e.jsx("div",{className:"w-1.5 h-1.5 bg-[#00ffbd] rounded-full animate-pulse",style:{animationDelay:`${R*.2}s`}},R))}),e.jsx("div",{className:"relative z-10 bg-white dark:bg-[#0a0b0f] p-6 rounded-xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[e.jsx("div",{className:"w-20 h-20 mb-6 rounded-full bg-[#e6fff7] dark:bg-[#002419] flex items-center justify-center",children:e.jsxs("svg",{className:"w-10 h-10 text-[#00ffbd]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 9l-6 6m0-6l6 6"})]})}),e.jsx("h2",{className:"text-[28px] font-semibold text-gray-900 dark:text-white mb-4",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-600 dark:text-[#7f8596] text-center mb-8 max-w-[460px] text-base",children:"Please connect your wallet to bridge your NFTs between networks. You'll be able to transfer your NFTs across different blockchains."}),e.jsxs("button",{onClick:o,className:"inline-flex items-center px-6 py-3 bg-[#00ffbd] hover:bg-[#00ffbd]/90 text-black font-medium rounded-lg transition-colors duration-200",children:[e.jsx("span",{className:"mr-2",children:"+"}),"Connect Wallet"]})]})})]})}const vi="0x5828D525fe00902AE22f2270Ac714616651894fF",dt={TOKEN_CREATE:"0x6962f49e",NFT_CREATE:"0x54a9c682"},Se={137:{name:"Polygon",currency:"POL",factoryAddress:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",nftFactoryAddress:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",rpc:"https://polygon-rpc.com",chainId:"0x89"},130:{name:"Unichain Mainnet",currency:"ETH",factoryAddress:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",nftFactoryAddress:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",rpc:"https://mainnet.unichain.org",chainId:"0x82"},1301:{name:"Unichain",currency:"ETH",factoryAddress:"0x08a58b1628Fb449635078355Be83e181EFBe3948",nftFactoryAddress:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",rpc:"https://sepolia.unichain.org",chainId:"0x515"},1828369849:{name:"Moonwalker",currency:"ZERO",factoryAddress:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",nftFactoryAddress:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",rpc:"https://moonwalker-rpc.eu-north-2.gateway.fm",chainId:"0x6CFF49C9"},10143:{name:"Monad Testnet",currency:"MON",factoryAddress:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426",nftFactoryAddress:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02",rpc:"https://testnet-rpc.monad.xyz/",chainId:"0x279F"}},Ge=["function chainFees(uint256) view returns (uint256)","function setChainFee(uint256,uint256)","function getChainFee() view returns (uint256)","function withdrawFees() external","function withdraw() external","event TokenCreated(address indexed creator, address indexed tokenAddress, string name, string symbol, uint8 decimals, uint256 initialSupply, string logoURI)","event NFTCollectionCreated(address indexed creator, address collectionAddress)"];function ql(){const{address:s}=wt(),[t,a]=n.useState("1301"),[o,r]=n.useState({}),[p,g]=n.useState({}),[i,$]=n.useState(!0),[k,j]=n.useState({}),[y,C]=n.useState(null),[P,B]=n.useState({}),[v,I]=n.useState({tokens:[],nfts:[]}),A=s?.toLowerCase()===vi.toLowerCase(),x=u=>{const F=Se[u];return new os(F.rpc,{chainId:Number(u),name:F.name})},m=async()=>{try{const u=new Set,F=new Set,l=new Set,E=new Set;let L=0,f=0,q=0,G=0;const T=[],S=[],c=Math.floor((Date.now()-24*60*60*1e3)/1e3),w=Se[t];try{const U=t==="1301"?"https://unichain-sepolia.blockscout.com":t==="130"?"https://unichain.blockscout.com":t==="137"?"https://api.polygonscan.com/api":"https://moonwalker-blockscout.eu-north-2.gateway.fm";if(t==="137"){const H="264JGIIIMW61H1F8J33BZFQWJNSGPDR9S9",K=`${U}?module=account&action=txlist&address=${w.factoryAddress}&apikey=${H}`,_=`${U}?module=account&action=txlist&address=${w.nftFactoryAddress}&apikey=${H}`,[ee,Y]=await Promise.all([fetch(K),fetch(_)]);if(!ee.ok||!Y.ok)throw new Error("Polygonscan API request failed");const[Q,R]=await Promise.all([ee.json(),Y.json()]);if(R.result&&Array.isArray(R.result)){for(const J of R.result)if(J.to?.toLowerCase()===w.nftFactoryAddress?.toLowerCase()&&J.isError==="0"&&J.input?.startsWith(dt.NFT_CREATE)){f++;const se=J.from?.toLowerCase();if(se){F.add(se);const W=parseInt(J.timeStamp);W>=c&&(E.add(se),G++),S.push({hash:J.hash,creator:J.from,timestamp:new Date(W*1e3).toISOString(),blockNumber:J.blockNumber})}}}if(Q.result&&Array.isArray(Q.result)){for(const J of Q.result)if(J.to?.toLowerCase()===w.factoryAddress?.toLowerCase()&&J.isError==="0"&&J.input?.startsWith(dt.TOKEN_CREATE)){L++;const se=J.from?.toLowerCase();if(se){u.add(se);const W=parseInt(J.timeStamp);W>=c&&(l.add(se),q++),T.push({hash:J.hash,creator:J.from,timestamp:new Date(W*1e3).toISOString(),blockNumber:J.blockNumber})}}}}else{const H=`${U}/api/v2/addresses/${w.factoryAddress}/transactions?filter=to|from`,K=`${U}/api/v2/addresses/${w.nftFactoryAddress}/transactions?filter=to|from`,[_,ee]=await Promise.all([fetch(H),fetch(K)]);if(!_.ok||!ee.ok)throw new Error("Blockscout API request failed");const[Y,Q]=await Promise.all([_.json(),ee.json()]);if(Q.items&&Array.isArray(Q.items)){for(const R of Q.items)if(R.to?.hash?.toLowerCase()===w.nftFactoryAddress?.toLowerCase()&&R.status==="ok"&&(R.method===dt.NFT_CREATE||R.decoded_input?.method_id===dt.NFT_CREATE.slice(2))){console.log("Found NFT creation:",R.hash,R.method,R.decoded_input?.method_id),f++;const J=R.from?.hash?.toLowerCase();J&&(F.add(J),new Date(R.timestamp).getTime()/1e3>=c&&(E.add(J),G++),S.push({hash:R.hash,creator:R.from.hash,timestamp:R.timestamp,blockNumber:R.block_number}))}}if(Y.items&&Array.isArray(Y.items)){for(const R of Y.items)if(R.to?.hash?.toLowerCase()===w.factoryAddress?.toLowerCase()&&R.status==="ok"&&(R.method===dt.TOKEN_CREATE||R.decoded_input?.method_id===dt.TOKEN_CREATE.slice(2))){console.log("Found token creation:",R.hash,R.method,R.decoded_input?.method_id),L++;const J=R.from?.hash?.toLowerCase();J&&(u.add(J),new Date(R.timestamp).getTime()/1e3>=c&&(l.add(J),q++),T.push({hash:R.hash,creator:R.from.hash,timestamp:R.timestamp,blockNumber:R.block_number}))}}}B({totalTokenCreators:L,totalNFTCreators:f,last24hTokenCreators:q,last24hNFTCreators:G,uniqueTokenCreators:u.size,uniqueNFTCreators:F.size}),I({tokens:T.sort((H,K)=>new Date(K.timestamp)-new Date(H.timestamp)),nfts:S.sort((H,K)=>new Date(K.timestamp)-new Date(H.timestamp))})}catch{await d(u,l,c),await b(F,E,c)}}catch{N.error("Error fetching creator statistics")}},d=async(u,F,l)=>{const E=Se[t],L=x(t);await L.ready,new je(E.factoryAddress,Ge,L);const f=await L.getBlockNumber(),q=2e3,G=Math.max(0,f-5e4);for(let T=G;T<=f;T+=q){const S=Math.min(T+q-1,f);try{const c={address:E.factoryAddress,topics:[xa("TokenCreated(address,address,string,string,uint8,uint256,string)")],fromBlock:T,toBlock:S},w=await L.getLogs(c);for(const U of w){const H=Lr(U.topics[1],12).toLowerCase();u.add(H);const K=await L.getBlock(U.blockNumber);K&&K.timestamp>=l&&F.add(H)}}catch{}}},b=async(u,F,l)=>{const E=Se[t],L=x(t);await L.ready;const f=new je(E.nftFactoryAddress,Ge,L),q=await L.getBlockNumber(),G=2e3,T=Math.max(0,q-5e4);for(let S=T;S<=q;S+=G){const c=Math.min(S+G-1,q);try{const w=f.filters.NFTCollectionCreated(),U=await f.queryFilter(w,S,c);for(const H of U){const K=H.args.creator.toLowerCase();u.add(K);const _=await L.getBlock(H.blockNumber);_&&_.timestamp>=l&&F.add(K)}}catch{}}},h=async(u,F)=>{if(!A){N.error("Only admin can withdraw fees");return}const l=N.loading("Preparing withdrawal...");try{const E=await window.ethereum.request({method:"eth_chainId"}),L=Se[u].chainId;if(E!==L)try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:L}]}),await new Promise(w=>setTimeout(w,1e3))}catch{N.error("Failed to switch network",{id:l});return}const q=await new Ae(window.ethereum).getSigner(),G=F==="token"?Se[u].factoryAddress:Se[u].nftFactoryAddress,T=new je(G,Ge,q),S=F==="token"?p[u]?.token:p[u]?.nft;if(!S||S==="0"){N.error("No fees available to withdraw",{id:l});return}N.loading("Please confirm the transaction...",{id:l});const c=await(F==="token"?T.withdraw():T.withdrawFees());N.loading("Processing withdrawal...",{id:l}),await c.wait(),N.success("Fees withdrawn successfully",{id:l}),await D()}catch(E){console.error("Error withdrawing fees:",E),N.error(`Error withdrawing fees: ${E.message}`,{id:l})}},D=async()=>{const u={};try{const F=Se[t];try{const l=x(t);await l.ready;const E=new je(F.factoryAddress,Ge,l),L=new je(F.nftFactoryAddress,Ge,l),[f,q]=await Promise.all([l.getBalance(F.factoryAddress),l.getBalance(F.nftFactoryAddress)]);u[t]={token:Le(f||"0"),nft:Le(q||"0"),currency:F.currency}}catch{u[t]={token:"0",nft:"0",currency:F.currency,error:!0}}g(u)}catch{N.error("Error fetching earned fees")}},V=async()=>{$(!0),C(null);const u={};try{const F=Se[t];try{const l=x(t);await l.ready;const E=new je(F.factoryAddress,Ge,l),L=new je(F.nftFactoryAddress,Ge,l),[f,q]=await Promise.all([E.chainFees(t),L.chainFees(t)]);u[t]={token:Le(f||"0"),nft:Le(q||"0"),currency:F.currency}}catch{u[t]={token:"0",nft:"0",currency:F.currency,error:!0},C(`Error fetching fees for ${F.name}. Please try again.`)}r(u)}catch{C("Failed to fetch fees. Please try again."),N.error("Error fetching fees")}finally{$(!1)}},z=async(u,F,l)=>{if(!A){N.error("Only admin can update fees");return}if(!l||isNaN(l)){N.error("Please enter a valid fee amount");return}const E=N.loading("Updating fee...");try{const f=await new Ae(window.ethereum).getSigner(),q=F==="token"?Se[u].factoryAddress:Se[u].nftFactoryAddress;await(await new je(q,Ge,f).setChainFee(u,Tt(l.toString()))).wait(),N.success("Fee updated successfully",{id:E}),await V()}catch{N.error("Error updating fee. Please try again.",{id:E})}};return n.useEffect(()=>{V(),D(),m()},[t]),A?e.jsx("div",{className:"min-h-screen bg-[#0a0a0a] text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Fees Dashboard"}),e.jsxs("button",{onClick:()=>{V(),D(),m()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]}),e.jsx("div",{className:"flex gap-4",children:Object.entries(Se).map(([u,F])=>e.jsxs("button",{onClick:()=>a(u),className:`px-6 py-3 rounded-xl flex items-center gap-2 transition-all ${t===u?"bg-blue-600 text-white shadow-lg shadow-blue-900/20":"bg-[#1a1a1a] text-gray-400 hover:bg-[#222222]"}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${t===u?"bg-white":"bg-gray-600"}`}),e.jsx("span",{className:"font-medium",children:F.name}),e.jsx("span",{className:"text-xs px-2 py-1 rounded bg-black/30",children:F.currency})]},u))})]}),y&&e.jsxs("div",{className:"p-4 bg-red-900/20 border border-red-900/30 rounded-xl text-red-400 flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),y]}),i?e.jsxs("div",{className:"flex items-center justify-center h-64 text-gray-400",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 mr-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-lg",children:"Loading dashboard data..."})]}):e.jsxs("div",{className:"grid gap-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-600/10 to-blue-800/10 rounded-xl border border-blue-900/20 p-6",children:[e.jsx("h3",{className:"text-blue-400 font-medium mb-2",children:"Token Creations"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:P.totalTokenCreators||0}),e.jsxs("p",{className:"text-sm text-blue-400 mt-1",children:[e.jsxs("span",{className:"text-green-400",children:["+",P.last24hTokenCreators||0]})," in last 24h"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[P.uniqueTokenCreators||0," unique creators"]})]}),e.jsx("svg",{className:"w-12 h-12 text-blue-500/20",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm3 1h6v2H7V5zm8 5.5a.5.5 0 01-.5.5h-7a.5.5 0 010-1h7a.5.5 0 01.5.5zm0 2a.5.5 0 01-.5.5h-7a.5.5 0 010-1h7a.5.5 0 01.5.5z",clipRule:"evenodd"})})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-600/10 to-purple-800/10 rounded-xl border border-purple-900/20 p-6",children:[e.jsx("h3",{className:"text-purple-400 font-medium mb-2",children:"NFT Creations"}),e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:P.totalNFTCreators||0}),e.jsxs("p",{className:"text-sm text-purple-400 mt-1",children:[e.jsxs("span",{className:"text-green-400",children:["+",P.last24hNFTCreators||0]})," in last 24h"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[P.uniqueNFTCreators||0," unique creators"]})]}),e.jsx("svg",{className:"w-12 h-12 text-purple-500/20",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"Token Factory Fee"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Earned:"}),e.jsxs("span",{className:"text-green-400 font-medium",children:[p[t]?.token??"0"," ",Se[t].currency]}),p[t]?.token>0&&e.jsx("button",{onClick:()=>h(t,"token"),className:"ml-2 px-3 py-1 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Withdraw"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",step:"0.000000000000000001",className:"flex-1 bg-[#0a0a0a] border border-gray-800/50 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-blue-900/50 focus:ring-1 focus:ring-blue-900/50 transition-all",value:k[`${t}-token`]??o[t]?.token??"",onChange:u=>j({...k,[`${t}-token`]:u.target.value}),placeholder:`Current: ${o[t]?.token??"0"} ${o[t]?.currency}`}),e.jsx("button",{onClick:()=>z(t,"token",k[`${t}-token`]??o[t]?.token),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:"Update Fee"})]})})]}),e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-white",children:"NFT Factory Fee"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Earned:"}),e.jsxs("span",{className:"text-green-400 font-medium",children:[p[t]?.nft??"0"," ",Se[t].currency]}),p[t]?.nft>0&&e.jsx("button",{onClick:()=>h(t,"nft"),className:"ml-2 px-3 py-1 bg-green-600/20 text-green-400 rounded-lg hover:bg-green-600/30 transition-colors text-sm font-medium",children:"Withdraw"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"number",step:"0.000000000000000001",className:"flex-1 bg-[#0a0a0a] border border-gray-800/50 rounded-xl px-4 py-3 text-white placeholder-gray-600 focus:outline-none focus:border-blue-900/50 focus:ring-1 focus:ring-blue-900/50 transition-all",value:k[`${t}-nft`]??o[t]?.nft??"",onChange:u=>j({...k,[`${t}-nft`]:u.target.value}),placeholder:`Current: ${o[t]?.nft??"0"} ${o[t]?.currency}`}),e.jsx("button",{onClick:()=>z(t,"nft",k[`${t}-nft`]??o[t]?.nft),className:"px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium",children:"Update Fee"})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsx("h2",{className:"text-lg font-medium text-white",children:"Recent Token Creations"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-400",children:[e.jsx("th",{className:"px-4 py-2",children:"Creator"}),e.jsx("th",{className:"px-4 py-2",children:"Time"}),e.jsx("th",{className:"px-4 py-2",children:"Tx Hash"})]})}),e.jsx("tbody",{children:v.tokens.map(u=>e.jsxs("tr",{className:"border-t border-gray-800/50 text-sm",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/address/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/address/"}${u.creator}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[u.creator.slice(0,6),"...",u.creator.slice(-4)]})}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:new Date(u.timestamp).toLocaleString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/tx/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/tx/"}${u.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[u.hash.slice(0,6),"...",u.hash.slice(-4)]})})]},u.hash))})]})})})]}),e.jsxs("div",{className:"bg-[#111111] rounded-xl border border-gray-800/50 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-[#0f0f0f] border-b border-gray-800/50",children:e.jsx("h2",{className:"text-lg font-medium text-white",children:"Recent NFT Creations"})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-400",children:[e.jsx("th",{className:"px-4 py-2",children:"Creator"}),e.jsx("th",{className:"px-4 py-2",children:"Time"}),e.jsx("th",{className:"px-4 py-2",children:"Tx Hash"})]})}),e.jsx("tbody",{children:v.nfts.map(u=>e.jsxs("tr",{className:"border-t border-gray-800/50 text-sm",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/address/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/address/"}${u.creator}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[u.creator.slice(0,6),"...",u.creator.slice(-4)]})}),e.jsx("td",{className:"px-4 py-3 text-gray-400",children:new Date(u.timestamp).toLocaleString()}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("a",{href:`${t==="1301"?"https://unichain-sepolia.blockscout.com/tx/":"https://moonwalker-blockscout.eu-north-2.gateway.fm/tx/"}${u.hash}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:[u.hash.slice(0,6),"...",u.hash.slice(-4)]})})]},u.hash))})]})})})]})]})]})]})}):e.jsxs("div",{className:"min-h-screen bg-[#0a0a0a] text-white p-6",children:[e.jsx("h1",{className:"text-xl font-bold text-red-500",children:"Access Denied"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Only admin can access this page."})]})}const pa=document.createElement("style");pa.textContent=`
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  .meme-title {
    font-family: 'Press Start 2P', cursive;
    text-shadow: 2px 2px 0px #FF512F;
  }

  .pixel-border {
    box-shadow: 
      -3px 0 0 0 #000,
      3px 0 0 0 #000,
      0 -3px 0 0 #000,
      0 3px 0 0 #000;
  }

  @keyframes float {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
    100% { transform: translateY(0px); }
  }

  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  /* Consistent input focus styles */
  input:not([type="checkbox"]):focus {
    outline: none !important;
    border-color: #00ffbd !important;
    box-shadow: 0 0 0 2px rgba(0, 255, 189, 0.2) !important;
  }

  input:not([type="checkbox"]):hover {
    border-color: #00ffbd;
  }

  input:not([type="checkbox"]):active {
    border-color: #00ffbd;
  }

  /* Light mode styles */
  :root {
    --tooltip-bg: #ffffff;
    --tooltip-text: #1f2937;
    --tooltip-border: #e5e7eb;
    --info-text: #6b7280;
    --info-hover: #4b5563;
    --form-helper-text: #6b7280;
    --form-helper-text-hover: #4b5563;
  }

  /* Dark mode styles */
  @media (prefers-color-scheme: dark) {
    :root {
      --tooltip-bg: #1a1b1f;
      --tooltip-text: #e5e7eb;
      --tooltip-border: #374151;
      --info-text: #9ca3af;
      --info-hover: #d1d5db;
      --form-helper-text: #9ca3af;
      --form-helper-text-hover: #d1d5db;
    }
  }

  /* Form helper text styles */
  .form-helper-text {
    color: var(--form-helper-text);
    transition: color 0.2s ease;
  }

  .form-helper-text:hover {
    color: var(--form-helper-text-hover);
  }

  /* Info icon styles */
  .info-icon {
    color: var(--info-text);
    transition: color 0.2s ease;
  }

  .info-icon:hover {
    color: var(--info-hover);
  }

  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }
  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-3px);
    }
  }
  @keyframes shake {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(-2px);
    }
    75% {
      transform: translateX(2px);
    }
  }

  /* Tooltip styles */
  .react-tooltip {
    background-color: var(--tooltip-bg) !important;
    color: var(--tooltip-text) !important;
    border: 1px solid var(--tooltip-border) !important;
    font-size: 0.875rem !important;
    padding: 0.75rem 1rem !important;
    z-index: 50 !important;
    max-width: 20rem !important;
    line-height: 1.5 !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
    opacity: 1 !important;
    border-radius: 0.5rem !important;
  }
`;document.head.appendChild(pa);const ya={QuickSwap:"/quickswap.png","Uniswap V2":"/uniswap.png"},xs={11155111:{router:"0xC532a74256D3Db42D0Bf7a0400fEFDbad7694008",factory:"0x7E0987E5b3a30e3f2828572Bb659A548460a3003",name:"Uniswap V2",isActive:!0},137:{router:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",factory:"0x5757371414417b8C6CAad45bAeF941aBc7d3Ab32",name:"QuickSwap",isActive:!0},130:{router:"0x284F11109359a7e1306C3e447ef14D38400063FF",factory:"0x1F98400000000000000000000000000000000002",name:"Uniswap V2",isActive:!0},1301:{router:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",factory:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",name:"Uniswap V2",isActive:!0},1828369849:{router:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",factory:"0x5C69bEe701ef814a2B6a3EDD4B1652CB9cc5aA6f",name:"Uniswap V2",isActive:!0},10143:{router:"0xfB8e1C3b833f9E67a71C859a132cf783b645e436",factory:"0x733E88f248b742db6C14C0b1713Af5AD7fDd59D0",name:"Uniswap V2",isActive:!0}},ki={11155111:{name:"Uniswap V2",network:"Sepolia",getTradeUrl:s=>`https://app.uniswap.org/#/swap?outputCurrency=${s}&chain=sepolia`},137:{name:"QuickSwap",network:"Polygon",getTradeUrl:s=>`https://quickswap.exchange/#/swap?outputCurrency=${s}`},130:{name:"Uniswap V2",network:"Unichain",getTradeUrl:s=>`https://app.uniswap.org/#/swap?outputCurrency=${s}&chain=unichain`},1301:{name:"Uniswap V2",network:"Unichain",getTradeUrl:s=>`https://app.uniswap.org/#/swap?outputCurrency=${s}&chain=unichain`},1828369849:{name:"Uniswap V2",network:"Moonwalker",getTradeUrl:s=>`https://app.uniswap.org/#/swap?outputCurrency=${s}&chain=moonwalker`},10143:{name:"Uniswap V2",network:"Monad Testnet",getTradeUrl:s=>`https://app.uniswap.org/#/swap?outputCurrency=${s}&chain=monad-testnet`}},Pt={Preparing:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",style:{animation:"rotate 2s linear infinite"},children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 6v2m0 8v2M6 12h2m8 0h2",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite"}}),e.jsx("path",{d:"M7.75 7.75l1.5 1.5m5.5 5.5l1.5 1.5m0-8.5l-1.5 1.5m-5.5 5.5l-1.5 1.5",strokeLinecap:"round",style:{animation:"bounce 1.5s ease-in-out infinite",animationDelay:"0.2s"}})]})}),UploadingLogo:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M12 18V8m0 0l-4 4m4-4l4 4",strokeLinecap:"round",strokeLinejoin:"round",style:{animation:"bounce 1s ease-in-out infinite"}}),e.jsx("path",{d:"M8 18h8",strokeLinecap:"round",style:{animation:"fadeIn 1s ease-in-out infinite",animationDelay:"0.5s"}})]})}),CreatingToken:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",strokeOpacity:"0.2"}),e.jsx("path",{d:"M7 8h10M7 12h10M7 16h10",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite"}}),e.jsx("path",{d:"M12 6v12",strokeLinecap:"round",style:{animation:"draw 2s ease-in-out infinite",animationDelay:"0.5s"}}),e.jsx("circle",{cx:"12",cy:"12",r:"3",style:{animation:"rotate 4s linear infinite"}})]})}),Completed:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"animate-[fadeIn_0.5s_ease-in-out]"}),e.jsx("path",{d:"M8 12l3 3 5-5",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-[draw_0.5s_ease-in-out_forwards]",style:{strokeDasharray:20,strokeDashoffset:20}})]})}),Error:()=>e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",children:e.jsxs("g",{strokeWidth:1.5,stroke:"currentColor",style:{animation:"shake 0.5s ease-in-out"},children:[e.jsx("path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",className:"text-red-500"}),e.jsx("path",{d:"M12 8v5",strokeLinecap:"round",className:"text-red-500"}),e.jsx("path",{d:"M12 16v.01",strokeLinecap:"round",className:"text-red-500"})]})})},Re={SEPOLIA:11155111,POLYGON:137,UNICHAIN_MAINNET:130,UNICHAIN_TESTNET:1301,MOONWALKER:1828369849,MONAD_TESTNET:10143},Fi={[Re.SEPOLIA]:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",[Re.POLYGON]:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",[Re.UNICHAIN_MAINNET]:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",[Re.UNICHAIN_TESTNET]:"0x08a58b1628Fb449635078355Be83e181EFBe3948",[Re.MOONWALKER]:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",[Re.MONAD_TESTNET]:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426"},Si={[Re.SEPOLIA]:"0.01",[Re.POLYGON]:"1",[Re.UNICHAIN_MAINNET]:"0.01",[Re.UNICHAIN_TESTNET]:"0.01",[Re.MOONWALKER]:"369",[Re.MONAD_TESTNET]:"0.01"},Ci=["Remember when DOGE was just a joke? ","Early PEPE holders are millionaires! ","From Reddit memes to crypto dreams... "],$i=["Create your meme token, become legendary! ","Your memes + Web3 = The next big thing! ","Join the meme revolution! "],zs=({messages:s,delay:t=2e3})=>{const[a,o]=n.useState(s.map(()=>"")),[r,p]=n.useState(s.map(()=>!0));return n.useEffect(()=>{let g=[];return s.forEach((i,$)=>{if(r[$]&&a[$].length<i.length){const k=setTimeout(()=>{o(j=>{const y=[...j];return y[$]=i.substring(0,a[$].length+1),y})},15+$*100);g.push(k)}else r[$]&&p(k=>{const j=[...k];return j[$]=!1,j})}),()=>g.forEach(i=>clearTimeout(i))},[a,r,s]),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-4 rounded-xl shadow-lg border-2 border-[#00ffbd] relative min-h-[200px]",children:[e.jsx("div",{className:"absolute w-3 h-3 bg-white dark:bg-[#1a1b1f] transform rotate-45 -bottom-1.5 left-6 border-r-2 border-b-2 border-[#00ffbd]"}),e.jsx("div",{className:"space-y-4",children:s.map((g,i)=>e.jsxs("div",{className:`text-base font-medium text-gray-900 dark:text-white transition-opacity duration-300 ${a[i].length>0?"opacity-100":"opacity-0"}`,children:[a[i],r[i]&&e.jsx("span",{className:"animate-pulse",children:"|"})]},i))})]})};function Wl(){const{address:s}=wt(),{chain:t}=Xe(),{openConnectModal:a}=Dt(),{addDeployment:o}=Mr();n.useState("create");const[r,p]=n.useState(!1),[g,i]=n.useState(null),[$,k]=n.useState(null),[j,y]=n.useState(null),[C,P]=n.useState(!1),[B,v]=n.useState(!1),[I,A]=n.useState(!1),[x,m]=n.useState({width:window.innerWidth,height:window.innerHeight}),[d,b]=n.useState({marketingFee:!1,liquidityFee:!1,burnFee:!1,treasuryFee:!1,devFee:!1,buyFees:!1,sellFees:!1,enableBlacklist:!1,enableSnapshot:!1}),[h,D]=n.useState({name:"",symbol:"",totalSupply:"",description:"",marketingAddress:"",treasuryAddress:"",devAddress:"",liquidityAddress:"",burnFee:20,treasuryFee:20,devFee:20,marketingFee:20,liquidityFee:20,buyFees:5,sellFees:5,router:"",logoURI:"https://placehold.co/400x400",enableBlacklist:!1,enableSnapshot:!1}),[V,z]=n.useState(!1),[u,F]=n.useState(!1),[l,E]=n.useState(1),L=4,[f,q]=n.useState(!1);n.useEffect(()=>{(()=>{try{const Q=localStorage.getItem("memeFactoryState");if(Q){const{deployedTokenAddress:R,formData:J,liquidityAdded:se,timestamp:W}=JSON.parse(Q);Date.now()-W<864e5&&(y(R),R&&!se&&A(!0),D(J),F(se||!1))}}catch(Q){console.error("Error loading saved state:",Q)}})()},[]),n.useEffect(()=>{if(j||h.name||h.symbol||h.totalSupply){const Y={...h};delete Y.logo,localStorage.setItem("memeFactoryState",JSON.stringify({deployedTokenAddress:j,formData:Y,liquidityAdded:u,timestamp:Date.now()}))}},[j,h,u]);const G=()=>{localStorage.removeItem("memeFactoryState"),D({name:"",symbol:"",totalSupply:"",description:"",buyFeesEnabled:!1,sellFeesEnabled:!1,buyFees:0,sellFees:0,devFeeEnabled:!1,marketingFeeEnabled:!1,liquidityFeeEnabled:!1,burnFeeEnabled:!1,treasuryFeeEnabled:!1,devFee:0,marketingFee:0,liquidityFee:0,burnFee:0,treasuryFee:0,devAddress:"",marketingAddress:"",liquidityAddress:"",treasuryAddress:"",router:"",customHeader:"",enableBlacklist:!1,enableSnapshot:!1,enableAutoSwap:!1,swapTokensAtAmount:"",enableTradingControls:!1,maxTxPercent:2,maxWalletPercent:4}),y(null)},T=()=>{F(!0),G(),A(!1),Te.success("Process completed successfully!")},S=Y=>{const{name:Q,value:R}=Y.target;D(Q==="initialLiquidity.tokenAmount"?J=>({...J,initialLiquidity:{...J.initialLiquidity,tokenAmount:R}}):Q==="initialLiquidity.nativeAmount"?J=>({...J,initialLiquidity:{...J.initialLiquidity,nativeAmount:R}}):J=>({...J,[Q]:R}))},c=Y=>{D(Q=>{const R={...Q};switch(Y){case"marketingFeeEnabled":R.marketingFee=R.marketingFee>0?0:20;break;case"liquidityFeeEnabled":R.liquidityFee=R.liquidityFee>0?0:20;break;case"burnFeeEnabled":R.burnFee=R.burnFee>0?0:20;break;case"treasuryFeeEnabled":R.treasuryFee=R.treasuryFee>0?0:20;break;case"devFeeEnabled":R.devFee=R.devFee>0?0:20;break;case"buyFeesEnabled":R.buyFeesEnabled=!R.buyFeesEnabled,R.buyFees=R.buyFeesEnabled?6:0;break;case"sellFeesEnabled":R.sellFeesEnabled=!R.sellFeesEnabled,R.sellFees=R.sellFeesEnabled?6:0;break;case"enableBlacklist":R.enableBlacklist=!R.enableBlacklist;break;case"enableSnapshot":R.enableSnapshot=!R.enableSnapshot;break;case"enableCustomHeader":R.enableCustomHeader=!R.enableCustomHeader,R.enableCustomHeader||(R.customHeader="");break}return R}),b(Q=>({...Q,[Y]:!Q[Y]}))},w=async(Y,Q)=>{try{const J=(W=>{switch(W){case 137:return"polygon";case 11155111:return"sepolia";case 1301:return"unichain";default:return"unknown"}})(t.id),se={name:Q.name,symbol:Q.symbol,address:Y,chainId:t.id,chainName:J,description:h.description,totalSupply:Ue(Q.supply,Q.decimals),timestamp:Date.now(),creatorAddress:s.toLowerCase(),network:J};console.log("Saving token deployment with data:",se);try{await o(se),console.log("Token deployment saved successfully")}catch(W){console.error("Error saving deployment to Firebase:",W),Te.warning("Token created successfully, but there was an error saving deployment data")}try{const W=new Ae(window.ethereum);console.log("Initializing transfer tracking for token:",Y),await Sn(Y,W),console.log("Transfer tracking initialized")}catch(W){console.error("Error initializing transfer tracking:",W)}Te.dismiss(),y(Y),i("completed"),P(!0),setTimeout(()=>{p(!1),A(!0)},3e3)}catch(R){console.error("Error in handleSuccess:",R),y(Y),i("completed"),P(!0),setTimeout(()=>{p(!1),A(!0)},3e3)}},U=async()=>{z(!1);try{if(i("deploying"),p(!0),!window.ethereum)throw new Error("Please connect your wallet first");if(!t?.id)throw new Error("Please connect to a supported network");const Q=await new Ae(window.ethereum).getSigner(),R=H(),J=K();if(!R)throw new Error("Factory address not configured for this network");if(!J)throw new Error("Network fee not configured for this network");const se=xs[t.id];if(!se||!se.isActive)throw new Error("No active DEX configured for this network");const W=new je(R,Fn.abi,Q);let Z;try{Z=BigInt(h.totalSupply)}catch{throw new Error("Invalid total supply value")}const le=tt=>{try{const ce=parseFloat(tt||0);return BigInt(Math.floor(ce))}catch{return BigInt(0)}},me=parseFloat(h.swapTokensAtAmount)||.1,X=BigInt(Math.floor(me*100)),ae={name:h.name,symbol:h.symbol,totalSupply:Z,marketingWallet:h.marketingAddress||s,treasuryAddress:h.treasuryAddress||s,devAddress:h.devAddress||s,liquidityAddress:h.liquidityAddress||s,burnFee:le(h.burnFee),treasuryFee:le(h.treasuryFee),devFee:le(h.devFee),marketingFee:le(h.marketingFee),liquidityFee:le(h.liquidityFee),buyFees:le(h.buyFees),sellFees:le(h.sellFees),router:se.router,logoURI:h.logoURI||"https://placehold.co/400x400",addInitialLiquidity:!1,initialLiquidityPercent:0,maxTxPercent:h.maxTxPercent||2,maxWalletPercent:h.maxWalletPercent||4,swapTokensAtPercent:X},pe=Number(ae.burnFee)+Number(ae.treasuryFee)+Number(ae.devFee)+Number(ae.marketingFee)+Number(ae.liquidityFee);if(pe!==100)throw new Error(`Secondary fees must total 100%. Current total: ${pe}%`);const We=(await(await W.createMemeToken(ae,{value:J})).wait()).logs.find(tt=>{try{const ce=xa("TokenCreated(address,address,string,string,uint8,uint256,string,bool)");return tt.topics[0]===ce}catch{return!1}});if(!We)throw new Error("Token creation event not found in transaction receipt");const _e=W.interface.parseLog({topics:We.topics,data:We.data}),Ye={name:h.name,symbol:h.symbol,decimals:18,supply:Z*BigInt(10**18)},et=_e.args[1];await w(et,Ye)}catch(Y){console.error("Error creating token:",Y),i("error"),k(Y.message||"Failed to create token"),p(!0)}};n.useEffect(()=>{(()=>{D(Q=>{const R={...Q};return R.autoLiquidity||(R.liquidityFee=0),R.autoBurn||(R.burnFee=0),R.maxLimits||(R.maxWalletPercent=100,R.maxTxPercent=100),R})})()},[h.autoLiquidity,h.autoBurn,h.maxLimits]);const H=()=>t?.id?Fi[t.id]:null,K=()=>{if(!t?.id)return null;const Y=Si[t.id];return Y?Tt(Y):null},_=()=>E(Y=>Math.min(Y+1,L)),ee=()=>E(Y=>Math.max(Y-1,1));return n.useEffect(()=>{if(t?.id){const Y=xs[t.id]?.router;D(Q=>({...Q,router:Y||""}))}},[t?.id]),e.jsxs("div",{className:"container mx-auto px-4 py-8 mt-8 relative",children:[e.jsx("div",{className:"absolute left-[2%] top-16 w-80",children:e.jsx(zs,{messages:Ci})}),e.jsx("div",{className:"absolute right-[2%] top-16 w-80",children:e.jsx(zs,{messages:$i})}),e.jsxs("div",{className:"text-center mb-8 pt-32",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-6",children:[e.jsx("img",{src:"/pepe.jpeg",alt:"Pepe",className:"w-16 h-16 rounded-full object-cover animate-bounce",style:{animationDelay:"0.2s"}}),e.jsx("h1",{className:"meme-title text-5xl text-[#00ffbd]",children:"MEME FACTORY"}),e.jsx("img",{src:"/pepe.jpeg",alt:"Pepe",className:"w-16 h-16 rounded-full object-cover animate-bounce"})]}),e.jsx("p",{className:"text-xl text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:"Create your own meme token with advanced features and join the meme revolution!"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-8",children:[e.jsx("div",{onClick:()=>c("antiBotEnabled"),className:`relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 ${h.antiBotEnabled?"bg-gradient-to-br from-indigo-500 to-blue-600 shadow-lg shadow-indigo-500/20":"bg-gradient-to-br from-indigo-50 to-blue-50 dark:from-blue-400/20 dark:to-purple-500/20 hover:from-indigo-100 hover:to-blue-100 dark:hover:from-blue-400/30 dark:hover:to-purple-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${h.antiBotEnabled?"bg-white/20":"bg-indigo-500/10 dark:bg-white/10"}`,children:e.jsx(Ca,{className:`w-6 h-6 ${h.antiBotEnabled?"text-white":"text-indigo-500 dark:text-white"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${h.antiBotEnabled?"text-white":"text-indigo-600 dark:text-white"}`,children:"Anti-Bot"}),e.jsx("p",{className:`text-sm ${h.antiBotEnabled?"text-white/80":"text-indigo-500 dark:text-white/80"}`,children:"Protects against trading bots and snipers "})]})]})}),e.jsx("div",{onClick:()=>q(!0),className:"relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 bg-gradient-to-br from-rose-50 to-pink-50 dark:from-pink-500 dark:to-red-600 hover:from-rose-100 hover:to-pink-100 dark:hover:from-pink-600 dark:hover:to-red-700 shadow-lg shadow-pink-500/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-rose-500/10 dark:bg-white/10",children:e.jsx($a,{className:"w-6 h-6 text-rose-500 dark:text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-rose-600 dark:text-white",children:"Token Snapshots"}),e.jsx("p",{className:"text-sm text-rose-500 dark:text-white/80",children:"Take and view holder snapshots "})]})]})}),e.jsx("div",{onClick:()=>c("burnEnabled"),className:`relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 ${h.burnEnabled?"bg-gradient-to-br from-orange-500 to-red-500 shadow-lg shadow-orange-500/20":"bg-gradient-to-br from-orange-50 to-red-50 dark:from-pink-400/20 dark:to-red-500/20 hover:from-orange-100 hover:to-red-100 dark:hover:from-pink-400/30 dark:hover:to-red-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${h.burnEnabled?"bg-white/20":"bg-orange-500/10 dark:bg-white/10"}`,children:e.jsx(Ba,{className:`w-6 h-6 ${h.burnEnabled?"text-white":"text-orange-500 dark:text-white"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${h.burnEnabled?"text-white":"text-orange-600 dark:text-white"}`,children:"Auto-Burn"}),e.jsx("p",{className:`text-sm ${h.burnEnabled?"text-white/80":"text-orange-500 dark:text-white/80"}`,children:"Burns tokens automatically with each trade "})]})]})}),e.jsx("div",{onClick:()=>c("maxLimitsEnabled"),className:`relative overflow-hidden rounded-xl p-4 cursor-pointer transition-all duration-200 ${h.maxLimitsEnabled?"bg-gradient-to-br from-emerald-500 to-teal-500 shadow-lg shadow-emerald-500/20":"bg-gradient-to-br from-emerald-50 to-teal-50 dark:from-green-400/20 dark:to-blue-500/20 hover:from-emerald-100 hover:to-teal-100 dark:hover:from-green-400/30 dark:hover:to-blue-500/30"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${h.maxLimitsEnabled?"bg-white/20":"bg-emerald-500/10 dark:bg-white/10"}`,children:e.jsx(Ta,{className:`w-6 h-6 ${h.maxLimitsEnabled?"text-white":"text-emerald-500 dark:text-white"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${h.maxLimitsEnabled?"text-white":"text-emerald-600 dark:text-white"}`,children:"Max Limits"}),e.jsx("p",{className:`text-sm ${h.maxLimitsEnabled?"text-white/80":"text-emerald-500 dark:text-white/80"}`,children:"Prevents whales from dominating "})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[2fr,1fr] gap-6",children:[e.jsx("div",{children:s?e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-8 shadow-2xl border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"meme-title text-3xl mb-4 text-[#00ffbd]",children:"Create Your Meme Token"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-400 text-lg",children:"Fill out the details below to launch your meme token"})]}),e.jsx("div",{className:"flex justify-between mb-8",children:[1,2,3,4].map(Y=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:Gt("w-8 h-8 rounded-full flex items-center justify-center",l===Y?"bg-[#00ffbd] text-black":l>Y?"bg-[#00ffbd]/20 text-[#00ffbd]":"bg-gray-200 dark:bg-gray-700 text-gray-500"),children:Y}),Y<4&&e.jsx("div",{className:Gt("w-24 h-1 mx-2",l>Y?"bg-[#00ffbd]":"bg-gray-200 dark:bg-gray-700")})]},Y))}),e.jsx(Ei,{currentStep:l,formData:h,handleChange:S,handleToggle:c}),e.jsxs("div",{className:"mt-8 flex justify-between",children:[e.jsx("div",{children:l>1&&e.jsx("button",{onClick:ee,className:"px-6 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Previous"})}),e.jsx("div",{children:l<L?e.jsx("button",{onClick:_,className:"px-6 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Next"}):e.jsx("button",{onClick:()=>z(!0),className:"px-6 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Create Token"})})]})]}):e.jsxs(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-8 text-center border border-gray-200 dark:border-gray-800 transition-colors duration-200",children:[e.jsx("div",{className:"mb-6",children:e.jsx(ut,{className:"w-16 h-16 mx-auto text-gray-400 dark:text-gray-500"})}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900 dark:text-white transition-colors duration-200",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6 transition-colors duration-200",children:"Connect your wallet to start creating your meme token"}),e.jsx("button",{onClick:a,className:"px-8 py-3 bg-[#00ffbd] text-black rounded-xl font-bold hover:bg-[#00e6a9] transition-all duration-200 hover:scale-105",children:"Connect Wallet"})]})}),e.jsx("div",{className:"h-fit bg-[#1a1b1f] rounded-xl",children:e.jsx(vn,{})})]}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-16 text-center",children:[e.jsx("h2",{className:"meme-title text-2xl mb-6 text-[#00ffbd]",children:"JOIN THE MEME REVOLUTION! "}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 transition-all duration-200 hover:border-[#00ffbd] group",children:[e.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:""}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white transition-colors duration-200",children:"Community First"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-200",children:"Build a strong meme community"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 transition-all duration-200 hover:border-[#00ffbd] group",children:[e.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:""}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white transition-colors duration-200",children:"HODL Together"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-200",children:"Create diamond hands community"})]}),e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 transition-all duration-200 hover:border-[#00ffbd] group",children:[e.jsx("div",{className:"text-4xl mb-4 group-hover:scale-110 transition-transform duration-200",children:""}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-gray-900 dark:text-white transition-colors duration-200",children:"To The Moon"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 transition-colors duration-200",children:"Sky is not the limit"})]})]})]}),e.jsx(Bi,{isOpen:r,onClose:()=>{p(!1),i(null)},currentStep:g,tokenName:h.name,error:$,deployedAddress:j,formData:h,setShowLiquidityModal:A}),e.jsx(Ai,{isOpen:I,onClose:()=>A(!1),tokenAddress:j,tokenName:h.name,tokenSymbol:h.symbol,totalSupply:h.totalSupply,onSuccess:T}),e.jsx(Ti,{isOpen:B,onClose:()=>v(!1),onRate:Y=>{console.log("User rated meme token creation:",Y)}}),C&&e.jsx(Aa,{width:x.width,height:x.height,numberOfPieces:200,recycle:!1,gravity:.2,initialVelocityX:10,initialVelocityY:10,colors:["#00ffbd","#00e6a9","#00cc95","#00b381","#00996d"],style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:99999,pointerEvents:"none"}}),e.jsx(Di,{isOpen:V,onClose:()=>z(!1),onConfirm:U,chain:t}),f&&e.jsx("div",{className:"fixed inset-0 z-[99999] overflow-y-auto bg-black/25 backdrop-blur-sm",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx("div",{className:"relative w-full",children:e.jsx(kn,{onClose:()=>q(!1)})})})})]})}const Oe=({label:s,description:t,enabled:a,onToggle:o,children:r})=>e.jsxs("div",{className:"relative flex flex-col space-y-3 p-4 rounded-xl bg-white dark:bg-[#1a1b1f] border border-gray-200 dark:border-gray-800 hover:border-[#00ffbd]/20 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-gray-900 dark:text-white text-base font-medium",children:s}),t&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:t})]}),e.jsx("div",{className:"flex items-center ml-4",children:e.jsx("button",{onClick:o,className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-[#00ffbd] focus:ring-offset-2 dark:focus:ring-offset-gray-900 ${a?"bg-[#00ffbd]":"bg-gray-200 dark:bg-gray-700"}`,children:e.jsxs("span",{className:`pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition-all duration-200 ease-in-out ${a?"translate-x-5":"translate-x-0"}`,children:[e.jsx("span",{className:`absolute inset-0 flex h-full w-full items-center justify-center transition-opacity ${a?"opacity-0":"opacity-100"}`,children:e.jsx("svg",{className:"h-3 w-3 text-gray-400 dark:text-gray-600",fill:"none",viewBox:"0 0 12 12",children:e.jsx("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("span",{className:`absolute inset-0 flex h-full w-full items-center justify-center transition-opacity ${a?"opacity-100":"opacity-0"}`,children:e.jsx("svg",{className:"h-3 w-3 text-[#00ffbd]",fill:"currentColor",viewBox:"0 0 12 12",children:e.jsx("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})})})]})})})]}),a&&r&&e.jsx("div",{className:"mt-4 pl-4 border-l-2 border-[#00ffbd]/20",children:r})]}),Bi=({isOpen:s,onClose:t,currentStep:a,tokenName:o,error:r,deployedAddress:p,formData:g,setShowLiquidityModal:i})=>{const $=[{key:"preparing",label:"Preparing Transaction",icon:Pt.Preparing},{key:"deploying",label:"Creating Meme Token",icon:Pt.CreatingToken},{key:"completed",label:"Token Created Successfully",icon:Pt.Completed}],k=$.findIndex(P=>P.key===a),j=!!r,y=P=>P?.includes("user rejected action")?"Transaction was rejected. Please try again.":P?.includes("insufficient funds")?"Insufficient funds to complete the transaction.":P?.replace(/\{"action":"sendTransaction".*$/,"")||"An error occurred",C=async P=>{try{await navigator.clipboard.writeText(P),Te.success("Address copied to clipboard!")}catch{Te.error("Failed to copy address")}};return e.jsx(fe,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(he,{as:"div",className:"relative z-[99999]",onClose:t,children:[e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm z-[99999]"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto z-[99999]",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs(he.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:[j?"Error Creating Token":"Creating Meme Token",o&&!j&&e.jsx("div",{className:"mt-2 text-base font-normal text-gray-500 dark:text-gray-400",children:o})]}),e.jsx("div",{className:"space-y-4",children:$.map((P,B)=>{const v=P.icon,I=B===k,A=!j&&B<k,x=j&&B===k;return e.jsxs("div",{className:Gt("flex items-center gap-3 p-3 rounded-xl transition-colors",{"bg-[#00ffbd]/10 text-[#00ffbd]":I&&!x,"text-[#00ffbd]":A,"bg-red-500/10 text-red-500":x,"text-gray-400":!I&&!A&&!x}),children:[e.jsx(v,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:P.label}),I&&P.key==="deploying"&&!j&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Creating meme token ",o]})]})]},P.key)})}),j&&e.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-red-500/10 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pt.Error,{}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-red-500",children:"Error Details"}),e.jsx("p",{className:"mt-1 text-sm text-red-400",children:y(r)})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-red-500 rounded-lg hover:bg-red-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2",children:"Close"})})]}),a==="completed"&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-[#00ffbd] font-medium text-lg",children:"Meme token created successfully! "}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Your meme token has been deployed and is ready for use"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Token Contract Address"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("code",{className:"text-sm text-gray-800 dark:text-gray-200 flex-1 break-all",children:p}),e.jsx("button",{onClick:()=>C(p),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md transition-colors",title:"Copy address",children:e.jsx(gs,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:" Copy this address to import your token in your wallet"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] p-4 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-gray-900 dark:text-white font-medium mb-3",children:"Next Steps"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Import Token"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Add the token to your wallet using the contract address above"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Add Liquidity"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Provide liquidity to enable trading of your token"}),g?.initialLiquidity?.enabled&&e.jsx("button",{onClick:()=>{t(),i(!0)},className:"mt-2 px-4 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Add Initial Liquidity"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-[#00ffbd]/10 flex items-center justify-center text-[#00ffbd] shrink-0",children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Start Trading"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Use TokenFactory Swap to trade your token"})]})]})]})]})]})]})})})})]})})},Ti=({isOpen:s,onClose:t,onRate:a})=>{const[o,r]=n.useState(0),[p,g]=n.useState(0);return e.jsx(fe,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(he,{as:"div",className:"relative z-50",onClose:t,children:[e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-gray-800 p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(he.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 dark:text-white text-center mb-4",children:"Rate Your Experience"}),e.jsx("div",{className:"flex justify-center space-x-1",children:[...Array(5)].map((i,$)=>{const k=$+1;return e.jsx("button",{className:`text-3xl focus:outline-none transition-colors ${k<=(p||o)?"text-yellow-400":"text-gray-300 dark:text-gray-600"}`,onClick:()=>{r(k),a(k),setTimeout(t,500)},onMouseEnter:()=>g(k),onMouseLeave:()=>g(0),children:e.jsx(kt,{})},k)})}),e.jsx("p",{className:"mt-4 text-sm text-gray-500 dark:text-gray-400 text-center",children:"How was your token creation experience?"}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 dark:bg-blue-900 px-4 py-2 text-sm font-medium text-blue-900 dark:text-blue-100 hover:bg-blue-200 dark:hover:bg-blue-800 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:t,children:"Skip"})})]})})})})]})})},Ai=({isOpen:s,onClose:t,tokenAddress:a,tokenName:o,tokenSymbol:r,totalSupply:p,onSuccess:g})=>{const[i,$]=n.useState(""),[k,j]=n.useState(""),[y,C]=n.useState(!1),[P,B]=n.useState(null),[v,I]=n.useState(!1),[A,x]=n.useState(null),{chain:m}=Xe(),d=()=>{if(!k||!i||k==="0"||i==="0")return"0";try{return(Number(i)/Number(k)).toFixed(8)}catch{return"0"}},b=async()=>{if(!k||!i){B("Please fill in all fields");return}try{C(!0),B(null);const u=await new Ae(window.ethereum).getSigner(),F=new je(a,Rs.abi,u),l=await F.uniswapV2Router(),E=new je(l,["function addLiquidityETH(address token, uint amountTokenDesired, uint amountTokenMin, uint amountETHMin, address to, uint deadline) external payable returns (uint amountToken, uint amountETH, uint liquidity)"],u),L=qe(k,18),f=Tt(i);if(await F.balanceOf(u.address)<L)throw new Error("Insufficient token balance");if(await F.allowance(u.address,l)<L){const c=await F.approve(l,L);console.log("Waiting for approval transaction to be mined..."),await c.wait(),console.log("Approval transaction mined"),await new Promise(w=>setTimeout(w,5e3))}const T=Math.floor(Date.now()/1e3)+60*20;console.log("Adding liquidity...");const S=await E.addLiquidityETH(F.target,L,0,0,u.address,T,{value:f});console.log("Waiting for liquidity transaction to be mined..."),await S.wait(),console.log("Liquidity added successfully"),I(!0),g()}catch(z){console.error("Error adding liquidity:",z),B(z.message||"Failed to add liquidity")}finally{C(!1)}};n.useEffect(()=>{(async()=>{try{if(!a)return;await new Promise(f=>setTimeout(f,2e3));const u=new Ae(window.ethereum),F=new je(a,Rs.abi,u),l=await F.uniswapV2Router();console.log("Router address:",l);let E=3,L=null;for(;E>0&&!L;)try{if(L=await F.uniswapV2Pair(),L&&L!=="0x0000000000000000000000000000000000000000"){console.log("Pool address found:",L),x(L);break}}catch{console.log(`Attempt ${4-E} failed, retrying...`),E--,E>0&&await new Promise(q=>setTimeout(q,2e3))}(!L||L==="0x0000000000000000000000000000000000000000")&&console.log("Pool address not found after retries")}catch(u){console.error("Error getting pool address:",u)}})()},[a]);const D=m?.id?ki[m.id]||{name:"Unknown DEX",getTradeUrl:()=>"#"}:null,V=async z=>{try{await navigator.clipboard.writeText(z),Te.success("Address copied to clipboard!")}catch{Te.error("Failed to copy address")}};return e.jsx(fe,{appear:!0,show:s,as:n.Fragment,children:e.jsx(he,{as:"div",className:"relative z-[99999]",onClose:t,children:e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs(he.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Add Initial Liquidity",e.jsxs("div",{className:"mt-2 text-sm text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[o," (",r,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:ya[D?.name||"QuickSwap"],alt:D?.name||"QuickSwap",className:"w-5 h-5"}),e.jsxs("span",{children:[D?.name||"QuickSwap"," on ",D?.network||"Unknown"]})]})]})]}),A&&e.jsxs("div",{className:"mb-6 bg-gray-50 dark:bg-[#2d2f36] rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:"Liquidity Pool Created"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-100 dark:bg-[#1a1b1f] rounded-lg",children:[e.jsx("code",{className:"text-xs text-gray-800 dark:text-gray-200 flex-1 break-all",children:A}),e.jsx("button",{onClick:()=>V(A),className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-800 rounded-md transition-colors",title:"Copy pool address",children:e.jsx(gs,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"The liquidity pool has been automatically created. Add liquidity below to enable trading."})]}),v?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-[#00ffbd]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ft,{className:"w-10 h-10 text-[#00ffbd]"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:"Liquidity Added Successfully!"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Your token is now ready for trading on ",D.name]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-[#2d2f36] rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Start Trading"}),e.jsxs("a",{href:D.getTradeUrl(a),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full px-4 py-2 bg-[#00ffbd] text-black rounded-lg hover:bg-[#00e6a9] transition-colors",children:[e.jsx(Ea,{className:"w-5 h-5"}),"Trade on ",D.name]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Close"})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:"Token Amount"}),e.jsx("input",{type:"text",value:k,onChange:z=>j(z.target.value),className:"w-full bg-white dark:bg-[#2d2f36] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:p?`Max: ${Ue(p,18)}`:"Enter token amount"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-gray-700 dark:text-gray-300 text-sm mb-2",children:[m?.nativeCurrency?.symbol||"ETH"," Amount"]}),e.jsx("input",{type:"text",value:i,onChange:z=>$(z.target.value),className:"w-full bg-white dark:bg-[#2d2f36] text-gray-900 dark:text-white rounded-lg p-3 border border-gray-300 dark:border-gray-700 focus:border-[#00ffbd] focus:ring-2 focus:ring-[#00ffbd]/20 focus:outline-none",placeholder:`e.g., 0.1 ${m?.nativeCurrency?.symbol||"ETH"}`})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-[#2d2f36] rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Initial Token Price"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:[d()," ",m?.nativeCurrency?.symbol||"ETH"]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"per token"})]})]})}),P&&e.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-500",children:P})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:b,disabled:y,className:Gt("px-4 py-2 text-sm font-medium rounded-lg","bg-[#00ffbd] text-black","hover:bg-[#00e6a9] transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:y?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Da,{className:"animate-spin"}),"Adding Liquidity..."]}):"Add Liquidity"})]})]})})]})})})})})})},Di=({isOpen:s,onClose:t,onConfirm:a,chain:o})=>e.jsx(fe,{appear:!0,show:s,as:n.Fragment,children:e.jsxs(he,{as:"div",className:"relative z-[99999]",onClose:t,children:[e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white dark:bg-[#1a1b1f] p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx(he.Title,{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Ready to Launch Your Meme Token? "}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx("p",{className:"mb-3",children:"Here's what will happen next:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsx("li",{children:"Your token will be created on the blockchain"}),e.jsx("li",{children:"A liquidity pool will be automatically created"}),e.jsx("li",{children:"You'll be prompted to add initial liquidity to enable trading"})]})]}),e.jsx("div",{className:"bg-[#00ffbd]/10 p-4 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Important:"})," After your token is created, you'll need to add liquidity to enable trading. Make sure you have enough ",o?.nativeCurrency?.symbol||"ETH"," for gas fees and initial liquidity."]})}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:a,className:"px-6 py-2 text-sm font-medium rounded-lg bg-[#00ffbd] text-black hover:bg-[#00e6a9] transition-colors",children:"Let's Go! "})]})]})]})})})})]})}),Mt=({title:s,description:t,children:a,isActive:o})=>o?e.jsxs("div",{className:"bg-white dark:bg-[#1a1b1f] rounded-xl p-8 shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2 text-gray-900 dark:text-white",children:s}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:t}),a]}):null,Rt=({content:s})=>e.jsxs("div",{className:"group relative inline-block ml-2",children:[e.jsx(Xs,{className:"w-4 h-4 text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"}),e.jsx("div",{className:"invisible group-hover:visible absolute z-10 w-64 p-2 mt-2 text-sm text-gray-500 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:s})]}),Ei=({currentStep:s,formData:t,handleChange:a,handleToggle:o})=>{const{chain:r}=Xe(),p=r?.id?xs[r.id]:null;return e.jsxs(e.Fragment,{children:[e.jsx(Mt,{title:"Essential Contract Details",description:"Set up the basic information for your token",isActive:s===1,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Token Name",e.jsx(Rt,{content:"The name of your token. This will be displayed on DEXs and wallets."})]}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Pepe Token"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["DEX Information",e.jsx(Rt,{content:"The decentralized exchange where your token's liquidity pool will be created."})]}),e.jsx("div",{className:"p-4 rounded-lg border dark:bg-gray-800 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:ya[p?.name||"QuickSwap"],alt:p?.name,className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:p?.name||"Not Connected"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:p?`Router: ${p.router.slice(0,6)}...${p.router.slice(-4)}`:"Please connect wallet and select network"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Token Symbol",e.jsx(Rt,{content:"A short identifier for your token (2-6 characters)"})]}),e.jsx("input",{type:"text",name:"symbol",value:t.symbol,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., PEPE"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Total Supply",e.jsx(Rt,{content:"The total number of tokens to create"})]}),e.jsx("input",{type:"number",name:"totalSupply",value:t.totalSupply,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., 1000000"})]})]}),e.jsx(Oe,{label:"Custom Header Message",description:"Add a custom ASCII art header to your contract",enabled:t.enableCustomHeader,onToggle:()=>o("enableCustomHeader"),children:e.jsx("textarea",{name:"customHeader",value:t.customHeader,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white mt-4",placeholder:"Enter your custom ASCII art header",rows:4})})]})}),e.jsx(Mt,{title:"Fee Configuration",description:"Configure buy/sell fees and fee distribution",isActive:s===2,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Buy / Sell Fees"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"These are the main fee switches. If both buy and sell fees are disabled, no fees will be collected regardless of other fee settings below. The fees collected here will be distributed according to the fee structure you define below."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Oe,{label:"Buy Fee",description:"Enable fee collection on buy transactions (enter percentage, e.g. 6 for 6%)",enabled:t.buyFeesEnabled,onToggle:()=>o("buyFeesEnabled"),children:t.buyFeesEnabled&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"buyFees",value:t.buyFees,onChange:a,className:"flex-1 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 6 for 6%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})})}),e.jsx(Oe,{label:"Sell Fee",description:"Enable fee collection on sell transactions (enter percentage, e.g. 6 for 6%)",enabled:t.sellFeesEnabled,onToggle:()=>o("sellFeesEnabled"),children:t.sellFeesEnabled&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"sellFees",value:t.sellFees,onChange:a,className:"flex-1 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 6 for 6%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})})})]})]}),(t.buyFeesEnabled||t.sellFeesEnabled)&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Fees Split Structure"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-6",children:"This section controls how the collected buy/sell fees are distributed. For example, if you set a 5% buy fee above and enable a 60% dev fee and 40% marketing fee here, from that 5% buy fee, 60% of the collected tokens will go to the dev wallet and 40% to the marketing wallet after being swapped to ETH."}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Oe,{label:"Burn Fees",description:"Percentage of collected fees that will be permanently burned (enter percentage, e.g. 20 for 20%)",enabled:t.burnFee>0,onToggle:()=>o("burnFeeEnabled"),children:t.burnFee>0&&e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"burnFee",value:t.burnFee,onChange:a,className:"flex-1 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 20 for 20%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})})}),e.jsx(Oe,{label:"Dev Fees",description:"Percentage of collected fees sent to the Dev Wallet (enter percentage, e.g. 20 for 20%)",enabled:t.devFee>0,onToggle:()=>o("devFeeEnabled"),children:t.devFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"devAddress",value:t.devAddress,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Dev recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"devFee",value:t.devFee,onChange:a,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Enter percentage (e.g. 20 for 20%)"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})}),e.jsx(Oe,{label:"Marketing Fees",description:"Percentage of fees sent to the Marketing Wallet",enabled:t.marketingFee>0,onToggle:()=>o("marketingFeeEnabled"),children:t.marketingFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"marketingAddress",value:t.marketingAddress,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Marketing recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"marketingFee",value:t.marketingFee,onChange:a,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"0"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})}),e.jsx(Oe,{label:"Liquidity Fees",description:"Percentage of fees sent to the Liquidity Wallet",enabled:t.liquidityFee>0,onToggle:()=>o("liquidityFeeEnabled"),children:t.liquidityFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"liquidityAddress",value:t.liquidityAddress,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Liquidity recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"liquidityFee",value:t.liquidityFee,onChange:a,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"0"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})}),e.jsx(Oe,{label:"Treasury Fees",description:"Percentage of fees sent to the Treasury Wallet",enabled:t.treasuryFee>0,onToggle:()=>o("treasuryFeeEnabled"),children:t.treasuryFee>0&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-4",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"treasuryAddress",value:t.treasuryAddress,onChange:a,className:"w-full p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"Treasury recipient address"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",name:"treasuryFee",value:t.treasuryFee,onChange:a,className:"w-32 p-3 rounded-lg border dark:bg-gray-800 dark:border-gray-700 text-gray-900 dark:text-white",placeholder:"0"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"%"})]})]})})]})]})]})}),e.jsx(Mt,{title:"Advanced Settings",description:"Configure additional token features",isActive:s===3,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(Oe,{label:"Blacklist",description:"Enable address blacklisting functionality",enabled:t.enableBlacklist,onToggle:()=>o("enableBlacklist")}),e.jsx(Oe,{label:"Snapshot",description:"Enable token balance snapshot functionality",enabled:t.enableSnapshot,onToggle:()=>o("enableSnapshot")})]})}),e.jsx(Mt,{title:"Review & Deploy",description:"Review your token configuration before deployment",isActive:s===4,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Token Creation Summary"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Token Name"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.name||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Symbol"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.symbol||"-"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Supply"}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:t.totalSupply||"-"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Features Enabled"}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.enableBlacklist&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#00ffbd]/10 text-[#00ffbd] rounded-full",children:"Blacklist"}),t.enableSnapshot&&e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-[#00ffbd]/10 text-[#00ffbd] rounded-full",children:"Snapshot"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fee Configuration"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["Buy Fee: ",e.jsxs("span",{className:"font-medium",children:[t.buyFees,"%"]})]}),e.jsxs("p",{className:"text-sm text-gray-900 dark:text-white",children:["Sell Fee: ",e.jsxs("span",{className:"font-medium",children:[t.sellFees,"%"]})]})]})]})]})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-xl p-6 border border-yellow-200 dark:border-yellow-900",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xs,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-400",children:"Important Notice"}),e.jsx("p",{className:"mt-1 text-sm text-yellow-700 dark:text-yellow-300",children:"Please review all settings carefully before proceeding. Once deployed, the token contract cannot be modified."})]})]})})]})})]})};function Hl(){const{isDarkMode:s}=ne(),[t,a]=n.useState(""),[o,r]=n.useState(""),[p,g]=n.useState(!1),[i,$]=n.useState(!1),{login:k,loginWithGoogle:j}=be(),y=De(),C=Jt();n.useEffect(()=>{C.state?.email&&a(C.state.email)},[C.state]);const P=async v=>{v.preventDefault(),$(!0);try{await k(t,o),N.success("Welcome back!"),y("/merch-store")}catch(I){N.error(I.message)}finally{$(!1)}},B=async()=>{try{await j(),N.success("Welcome!"),y("/merch-store")}catch(v){v.message!=="Sign in cancelled"&&N.error(v.message)}};return e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-md w-full space-y-8 ${s?"bg-gray-800":"bg-white"} p-8 rounded-2xl shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Welcome back"}),e.jsxs("p",{className:`mt-2 text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Don't have an account?"," ",e.jsx(ve,{to:"/merch-store/signup",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Sign up"})]})]}),C.state?.message&&e.jsx("div",{className:`${s?"bg-green-900 border-green-800":"bg-green-50 border-green-100"} border rounded-lg p-4`,children:e.jsx("p",{className:`text-sm ${s?"text-green-100":"text-green-800"}`,children:C.state.message})}),e.jsxs("form",{onSubmit:P,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:v=>a(v.target.value),className:`mt-1 block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors`,placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:p?"text":"password",required:!0,value:o,onChange:v=>r(v.target.value),className:`mt-1 block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors pr-10`,placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>g(!p),className:`absolute inset-y-0 right-0 mt-1 pr-3 flex items-center ${s?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:p?e.jsx(is,{className:"w-5 h-5"}):e.jsx(ls,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-[#FF1B6B] focus:ring-[#FF1B6B] border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:`ml-2 block text-sm ${s?"text-gray-200":"text-gray-900"}`,children:"Remember me"})]}),e.jsx("div",{className:"text-sm",children:e.jsx(ve,{to:"/merch-store/forgot-password",className:"font-medium text-[#FF1B6B] hover:text-[#D4145A]",children:"Forgot your password?"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Signing in...":"Sign in"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:`w-full border-t ${s?"border-gray-600":"border-gray-300"}`})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:`px-2 ${s?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:B,className:`w-full flex items-center justify-center gap-3 py-3 px-4 border ${s?"border-gray-600 bg-gray-700 hover:bg-gray-600":"border-gray-300 bg-white hover:bg-gray-50"} rounded-lg shadow-sm text-sm font-medium ${s?"text-white":"text-gray-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] transition-colors`,children:[e.jsx(ea,{className:"w-5 h-5"}),"Google"]})]})]})]})})}function Vl(){const{isDarkMode:s}=ne(),[t,a]=n.useState({name:"",email:"",password:"",confirmPassword:""}),[o,r]=n.useState(!1),[p,g]=n.useState(!1),[i,$]=n.useState(!1),[k,j]=n.useState(!1),{signup:y,loginWithGoogle:C}=be(),P=De();Jt();const B={length:/.{6,}/,uppercase:/[A-Z]/,lowercase:/[a-z]/,number:/[0-9]/,special:/[!@#$%^&*]/},v={length:B.length.test(t.password),uppercase:B.uppercase.test(t.password),lowercase:B.lowercase.test(t.password),number:B.number.test(t.password),special:B.special.test(t.password)},I=m=>{const{name:d,value:b}=m.target;a(h=>({...h,[d]:b}))},A=async m=>{if(m.preventDefault(),$(!0),t.password!==t.confirmPassword){N.error("Passwords do not match"),$(!1);return}const d={length:/.{6,}/,uppercase:/[A-Z]/,lowercase:/[a-z]/,number:/[0-9]/,special:/[!@#$%^&*]/},b=[{test:d.length,message:"Password must be at least 6 characters long"},{test:d.uppercase,message:"Password must include at least one uppercase letter"},{test:d.lowercase,message:"Password must include at least one lowercase letter"},{test:d.number,message:"Password must include at least one number"},{test:d.special,message:"Password must include at least one special character"}];for(const h of b)if(!h.test.test(t.password)){N.error(h.message),$(!1);return}try{await y(t.email,t.password,{name:t.name,email:t.email,isBuyer:!0,shippingAddress:{street:"",city:"",state:"",country:"",postalCode:""}}),N.success("Account created successfully! Please sign in."),P("/merch-store/login",{state:{message:"Account created successfully! Please sign in.",email:t.email},replace:!0})}catch(h){console.error("Error signing up:",h),N.error(h.message||"Failed to create account")}finally{$(!1)}},x=async()=>{j(!0);try{const m=await C(),b=(await oe(te(O,"users",m.uid))).data().createdAt===new Date().toISOString();N.success(b?"Account created successfully!":"Welcome back!"),P("/merch-store",{replace:!0})}catch(m){j(!1),m.message!=="Sign in cancelled"&&N.error(m.message)}};return k?e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:`${s?"text-gray-300":"text-gray-600"}`,children:"Setting up your account..."})]})}):e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-md w-full space-y-8 ${s?"bg-gray-800":"bg-white"} p-8 rounded-2xl shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Create an account"}),e.jsxs("p",{className:`mt-2 text-sm ${s?"text-gray-300":"text-gray-600"}`,children:["Already have an account?"," ",e.jsx(ve,{to:"/merch-store/login",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Sign in"})]})]}),e.jsxs("form",{onSubmit:A,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Full Name"}),e.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:t.name,onChange:I,className:`mt-1 block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent`,placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:I,className:`mt-1 block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent`,placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:o?"text":"password",required:!0,value:t.password,onChange:I,className:`mt-1 block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent pr-10`,placeholder:"Create a password"}),e.jsx("button",{type:"button",onClick:()=>r(!o),className:`absolute inset-y-0 right-0 mt-1 pr-3 flex items-center ${s?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:o?e.jsx(is,{className:"w-5 h-5"}):e.jsx(ls,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("p",{className:`text-sm ${s?"text-gray-300":"text-gray-600"} font-medium`,children:"Password must include:"}),e.jsxs("ul",{className:"text-xs space-y-1 pl-1",children:[e.jsxs("li",{className:`flex items-center gap-2 ${v.length?"text-green-500":s?"text-gray-400":"text-gray-500"}`,children:[v.length&&e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"At least 6 characters"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${v.uppercase?"text-green-500":s?"text-gray-400":"text-gray-500"}`,children:[v.uppercase&&e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one uppercase letter (A-Z)"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${v.lowercase?"text-green-500":s?"text-gray-400":"text-gray-500"}`,children:[v.lowercase&&e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one lowercase letter (a-z)"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${v.number?"text-green-500":s?"text-gray-400":"text-gray-500"}`,children:[v.number&&e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one number (0-9)"})]}),e.jsxs("li",{className:`flex items-center gap-2 ${v.special?"text-green-500":s?"text-gray-400":"text-gray-500"}`,children:[v.special&&e.jsx(mt,{className:"w-4 h-4"}),e.jsx("span",{children:"At least one special character (!@#$%^&*)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",required:!0,value:t.confirmPassword,onChange:I,className:`mt-1 block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-transparent pr-10`,placeholder:"Confirm your password"}),e.jsx("button",{type:"button",onClick:()=>g(!p),className:`absolute inset-y-0 right-0 mt-1 pr-3 flex items-center ${s?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"}`,children:p?e.jsx(is,{className:"w-5 h-5"}):e.jsx(ls,{className:"w-5 h-5"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:i,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"Creating account...":"Create account"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:`w-full border-t ${s?"border-gray-600":"border-gray-300"}`})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:`px-2 ${s?"bg-gray-800 text-gray-400":"bg-white text-gray-500"}`,children:"Or continue with"})})]}),e.jsxs("button",{type:"button",onClick:x,disabled:k,className:`w-full flex items-center justify-center gap-3 py-3 px-4 border ${s?"border-gray-600 bg-gray-700 hover:bg-gray-600":"border-gray-300 bg-white hover:bg-gray-50"} rounded-lg shadow-sm text-sm font-medium ${s?"text-white":"text-gray-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:[e.jsx(ea,{className:"w-5 h-5"}),k?"Setting up account...":"Google"]})]})]}),e.jsxs("p",{className:`text-xs text-center ${s?"text-gray-400":"text-gray-500"}`,children:["By creating an account, you agree to our"," ",e.jsx(ve,{to:"/merch-store/terms",className:"text-[#FF1B6B] hover:text-[#D4145A]",children:"Terms of Service"})," ","and"," ",e.jsx(ve,{to:"/merch-store/terms",className:"text-[#FF1B6B] hover:text-[#D4145A]",children:"Privacy Policy"})]})]})})}const Ii={AF:"+93",AL:"+355",DZ:"+213",AS:"+1-684",AD:"+376",AO:"+244",AI:"+1-264",AQ:"+672",AG:"+1-268",AR:"+54",AM:"+374",AW:"+297",AU:"+61",AT:"+43",AZ:"+994",BS:"+1-242",BH:"+973",BD:"+880",BB:"+1-246",BY:"+375",BE:"+32",BZ:"+501",BJ:"+229",BM:"+1-441",BT:"+975",BO:"+591",BA:"+387",BW:"+267",BR:"+55",BN:"+673",BG:"+359",BF:"+226",BI:"+257",KH:"+855",CM:"+237",CA:"+1",CV:"+238",KY:"+1-345",CF:"+236",TD:"+235",CL:"+56",CN:"+86",CO:"+57",KM:"+269",CG:"+242",CD:"+243",CK:"+682",CR:"+506",HR:"+385",CU:"+53",CY:"+357",CZ:"+420",DK:"+45",DJ:"+253",DM:"+1-767",DO:"+1-809",EC:"+593",EG:"+20",SV:"+503",GQ:"+240",ER:"+291",EE:"+372",ET:"+251",FK:"+500",FO:"+298",FJ:"+679",FI:"+358",FR:"+33",GF:"+594",PF:"+689",GA:"+241",GM:"+220",GE:"+995",DE:"+49",GH:"+233",GI:"+350",GR:"+30",GL:"+299",GD:"+1-473",GP:"+590",GU:"+1-671",GT:"+502",GN:"+224",GW:"+245",GY:"+592",HT:"+509",HN:"+504",HK:"+852",HU:"+36",IS:"+354",IN:"+91",ID:"+62",IR:"+98",IQ:"+964",IE:"+353",IL:"+972",IT:"+39",JM:"+1-876",JP:"+81",JO:"+962",KZ:"+7",KE:"+254",KI:"+686",KP:"+850",KR:"+82",KW:"+965",KG:"+996",LA:"+856",LV:"+371",LB:"+961",LS:"+266",LR:"+231",LY:"+218",LI:"+423",LT:"+370",LU:"+352",MO:"+853",MK:"+389",MG:"+261",MW:"+265",MY:"+60",MV:"+960",ML:"+223",MT:"+356",MH:"+692",MQ:"+596",MR:"+222",MU:"+230",YT:"+262",MX:"+52",FM:"+691",MD:"+373",MC:"+377",MN:"+976",ME:"+382",MS:"+1-664",MA:"+212",MZ:"+258",MM:"+95",NA:"+264",NR:"+674",NP:"+977",NL:"+31",NC:"+687",NZ:"+64",NI:"+505",NE:"+227",NG:"+234",NU:"+683",NF:"+672",MP:"+1-670",NO:"+47",OM:"+968",PK:"+92",PW:"+680",PS:"+970",PA:"+507",PG:"+675",PY:"+595",PE:"+51",PH:"+63",PN:"+64",PL:"+48",PT:"+351",PR:"+1-787",QA:"+974",RE:"+262",RO:"+40",RU:"+7",RW:"+250",BL:"+590",SH:"+290",KN:"+1-869",LC:"+1-758",MF:"+590",PM:"+508",VC:"+1-784",WS:"+685",SM:"+378",ST:"+239",SA:"+966",SN:"+221",RS:"+381",SC:"+248",SL:"+232",SG:"+65",SK:"+421",SI:"+386",SB:"+677",SO:"+252",ZA:"+27",SS:"+211",ES:"+34",LK:"+94",SD:"+249",SR:"+597",SJ:"+47",SZ:"+268",SE:"+46",CH:"+41",SY:"+963",TW:"+886",TJ:"+992",TZ:"+255",TH:"+66",TL:"+670",TG:"+228",TK:"+690",TO:"+676",TT:"+1-868",TN:"+216",TR:"+90",TM:"+993",TC:"+1-649",TV:"+688",VI:"+1-340",UG:"+256",UA:"+380",AE:"+971",GB:"+44",US:"+1",UY:"+598",UZ:"+998",VU:"+678",VA:"+379",VE:"+58",VN:"+84",WF:"+681",EH:"+212",YE:"+967",ZM:"+260",ZW:"+263"};function zl(){De();const{user:s}=be(),{isDarkMode:t}=ne(),[a,o]=n.useState(1),r=750,[p,g]=n.useState(!1),i=n.useMemo(()=>ta().getData(),[]),[$,k]=n.useState("+233 XX XXX XXXX"),j=n.useMemo(()=>i.map(d=>({value:d.value,label:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{countryCode:d.value,svg:!0,style:{width:"1.5em",height:"1.5em"}}),d.label]}),searchLabel:d.label})),[i]),y={control:d=>({...d,padding:"2px",borderColor:t?"#4B5563":"#E5E7EB",backgroundColor:t?"#374151":"white","&:hover":{borderColor:"#FF1B6B"}}),option:(d,b)=>({...d,backgroundColor:b.isSelected?"#FF1B6B":b.isFocused?t?"#4B5563":"#FFE4E4":t?"#374151":"white",color:b.isSelected?"white":t?"#E5E7EB":"#374151","&:hover":{backgroundColor:b.isSelected?"#FF1B6B":t?"#4B5563":"#FFE4E4"}}),menu:d=>({...d,backgroundColor:t?"#374151":"white"}),singleValue:d=>({...d,color:t?"#E5E7EB":"#374151"}),input:d=>({...d,color:t?"#E5E7EB":"#374151"})},[C,P]=n.useState({storeName:"",description:"",contactEmail:s?.email||"",phoneNumber:"",country:{name:"",code:"",flag:""},city:"",postalCode:"",preferredToken:"USDC",preferredNetwork:"polygon",walletAddress:""}),B=d=>{const{name:b,value:h}=d.target;P(D=>({...D,[b]:h}))},v=()=>`SELL_${Math.floor(Math.random()*1e5).toString().padStart(6,"0")}`,I=async d=>{d.preventDefault(),o(3)},A=async d=>{g(!0);try{if(!s){N.error("Please login first");return}const b=v();await yt(te(O,"sellers",b),{sellerId:b,userId:s.uid,...C,status:"active",createdAt:ue(),statistics:{totalSales:0,totalOrders:0,rating:0},balance:{available:0,pending:0},paymentReference:d}),await xe(te(O,"users",s.uid),{isSeller:!0,sellerId:b,updatedAt:ue()}),(await oe(te(O,"users",s.uid))).exists()&&(window.location.href="/merch-store/dashboard"),N.success("Store created successfully!")}catch(b){console.error("Error creating store:",b),N.error("Failed to create store. Please try again.")}finally{g(!1)}},x=()=>{window.PaystackPop.setup({key:"pk_live_6c4619b6e6f7db500ee33c96d03c3db3adf197ae",email:s?.email||C.contactEmail,amount:r*100,currency:"GHS",callback:b=>A(b.reference),onClose:()=>{N.error("Payment cancelled")}}).openIframe()};n.useEffect(()=>{const d=document.createElement("script");return d.src="https://js.paystack.co/v1/inline.js",d.async=!0,document.body.appendChild(d),()=>{document.body.removeChild(d)}},[]);const m=d=>{P(h=>({...h,country:{name:d.searchLabel,code:d.value,flag:`https://flagcdn.com/${d.value.toLowerCase()}.svg`}}));const b=Ii[d.value]||"+233";k(`${b} XX XXX XXXX`)};return e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-2xl mx-auto ${t?"bg-gray-900":""}`,children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsxs("div",{className:`flex items-center ${a>=1?"text-[#FF1B6B]":t?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${a>=1?"border-[#FF1B6B] bg-pink-900/20":t?"border-gray-600":"border-gray-300"} flex items-center justify-center font-semibold transition-colors duration-300`,children:"1"}),e.jsx("span",{className:"ml-2",children:"Information"})]}),e.jsx("div",{className:`w-16 h-0.5 ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full bg-[#FF1B6B] transition-all duration-300",style:{width:a>1?"100%":"0%"}})}),e.jsxs("div",{className:`flex items-center ${a>=2?"text-[#FF1B6B]":t?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${a>=2?"border-[#FF1B6B] bg-pink-900/20":t?"border-gray-600":"border-gray-300"} flex items-center justify-center font-semibold transition-colors duration-300`,children:"2"}),e.jsx("span",{className:"ml-2",children:"Store Info"})]}),e.jsx("div",{className:`w-16 h-0.5 ${t?"bg-gray-700":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full bg-[#FF1B6B] transition-all duration-300",style:{width:a>2?"100%":"0%"}})}),e.jsxs("div",{className:`flex items-center ${a>=3?"text-[#FF1B6B]":t?"text-gray-500":"text-gray-400"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 ${a>=3?"border-[#FF1B6B] bg-pink-900/20":t?"border-gray-600":"border-gray-300"} flex items-center justify-center font-semibold transition-colors duration-300`,children:"3"}),e.jsx("span",{className:"ml-2",children:"Payment"})]})]})}),a===1&&e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 shadow-lg`,children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(sa,{className:"w-16 h-16 text-[#FF1B6B] mx-auto mb-4"}),e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Become a Seller"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Start selling your merchandise with a one-time listing fee"})]}),e.jsxs("div",{className:`${t?"bg-pink-900/20":"bg-pink-50"} rounded-lg p-6 mb-8`,children:[e.jsx("h2",{className:`text-xl font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"What's Included:"}),e.jsx("ul",{className:"space-y-3",children:["List unlimited products","Manage your orders easily","Secure payment processing","Direct customer communication","Flexible withdrawal options"].map((d,b)=>e.jsxs("li",{className:`flex items-center ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsx(Ia,{className:"w-5 h-5 text-[#FF1B6B] mr-2"}),d]},b))})]}),e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:`text-3xl font-bold ${t?"text-gray-100":"text-gray-900"} mb-1`,children:["GHS ",r.toFixed(2),e.jsx("span",{className:`text-sm font-normal ${t?"text-gray-400":"text-gray-500"} ml-1`,children:"one-time fee"})]})}),e.jsx("button",{onClick:()=>o(2),className:"w-full bg-[#FF1B6B] text-white py-3 px-6 rounded-lg font-medium hover:bg-[#D4145A] transition-colors duration-300",children:"Next: Store Details"}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("div",{className:`flex items-center justify-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[e.jsx("span",{children:"Secure payment powered by"}),e.jsx("img",{src:"/paystack.png",alt:"Paystack",className:"h-8 w-auto object-contain ml-2"})]})})]}),a===2&&e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 shadow-lg`,children:[e.jsxs("button",{onClick:()=>o(1),className:`flex items-center ${t?"text-gray-400 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mb-6 transition-colors`,children:[e.jsx(St,{className:"w-5 h-5 mr-2"}),"Back"]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Store Information"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Tell us about your business"})]}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Store Details"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Store Name *"}),e.jsx("input",{type:"text",name:"storeName",value:C.storeName,onChange:B,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Your store name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Description"}),e.jsx("textarea",{name:"description",value:C.description,onChange:B,rows:3,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Tell customers about your store"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Email *"}),e.jsx("input",{type:"email",name:"contactEmail",value:C.contactEmail,onChange:B,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"contact@yourstore.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Phone Number *"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:C.phoneNumber,onChange:B,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:$})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Location"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Country *"}),e.jsx(aa,{options:j,styles:y,onChange:m,required:!0,placeholder:"select",className:"country-select",value:C.country.code?j.find(d=>d.value===C.country.code):null,components:{Option:({children:d,...b})=>e.jsx(Pa.Option,{...b,children:b.data.label})}})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"City *"}),e.jsx("input",{type:"text",name:"city",value:C.city,onChange:B,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Your city"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Postal Code *"}),e.jsx("input",{type:"text",name:"postalCode",value:C.postalCode,onChange:B,required:!0,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"}`,placeholder:"Postal code"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Payment Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Preferred Network *"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-2",children:[{id:"polygon",name:"Polygon",logo:"/polygon.png"},{id:"unichain",name:"Unichain Testnet",logo:"/unichain-logo.png"}].map(d=>e.jsxs("button",{type:"button",onClick:()=>B({target:{name:"preferredNetwork",value:d.id}}),className:`p-4 border rounded-lg transition-colors flex items-center justify-center gap-2 ${C.preferredNetwork===d.id?t?"border-[#FF1B6B] bg-pink-900/20":"border-[#FF1B6B] bg-pink-50":t?"border-gray-600 hover:border-[#FF1B6B] bg-gray-700":"border-gray-200 hover:border-[#FF1B6B]"}`,children:[e.jsx("img",{src:d.logo,alt:`${d.name} logo`,className:"w-6 h-6"}),e.jsx("span",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:d.name})]},d.id))}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Network you want to operate your store on"}),e.jsx("p",{className:"text-amber-600 font-medium mt-1",children:" This selection cannot be changed after store creation"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Preferred Payment Token *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{name:"preferredToken",value:C.preferredToken,onChange:B,required:!0,className:`w-full pl-12 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors appearance-none ${t?"bg-gray-700 border-gray-600 text-gray-200":"border-gray-300 text-gray-900"}`,children:[e.jsx("option",{value:"USDC",children:"USDC (USD Coin)"}),e.jsx("option",{value:"USDT",children:"USDT (Tether)"})]}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2",children:e.jsx("img",{src:`/${C.preferredToken.toLowerCase()}.png`,alt:C.preferredToken,className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mt-1 text-sm",children:[e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Token you want to receive payments in"}),e.jsx("p",{className:"text-amber-600 font-medium mt-1",children:" This selection cannot be changed after store creation"})]})]})]}),e.jsx("div",{className:"pt-6",children:e.jsx("button",{type:"submit",className:`w-full bg-[#FF1B6B] text-white py-3 px-6 rounded-lg font-medium hover:bg-[#D4145A] transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed ${t?"disabled:bg-gray-700 disabled:text-gray-500":"disabled:bg-gray-200 disabled:text-gray-500"}`,disabled:p,children:p?"Processing...":"Next: Proceed to Payment"})})]})]}),a===3&&e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 shadow-lg`,children:[e.jsxs("button",{onClick:()=>o(2),className:`flex items-center ${t?"text-gray-400 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mb-6 transition-colors`,children:[e.jsx(St,{className:"w-5 h-5 mr-2"}),"Back to Store Info"]}),e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Complete Payment"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-600"}`,children:"Pay the one-time listing fee to activate your store"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-gray-700":"bg-gray-50"} rounded-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:`${t?"text-gray-300":"text-gray-600"}`,children:"Listing Fee"}),e.jsxs("span",{className:`font-semibold ${t?"text-gray-200":"text-gray-900"}`,children:["GHS ",r]})]}),e.jsx("div",{className:`border-t ${t?"border-gray-600":"border-gray-200"} pt-4`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:`font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Total"}),e.jsxs("span",{className:`font-bold text-xl ${t?"text-gray-100":"text-gray-900"}`,children:["GHS ",r]})]})})]}),e.jsx("button",{onClick:x,className:`w-full bg-[#FF1B6B] text-white py-3 px-6 rounded-lg font-medium hover:bg-[#D4145A] transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed ${t?"disabled:bg-gray-700 disabled:text-gray-500":"disabled:bg-gray-200 disabled:text-gray-500"}`,disabled:p,children:p?"Processing...":"Pay Now"}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs("div",{className:`flex items-center justify-center text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[e.jsx("span",{children:"Secure payment powered by"}),e.jsx("img",{src:"/paystack.png",alt:"Paystack",className:"h-8 w-auto object-contain ml-2"})]})})]})]})]})}const ss={USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}},we=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Pi=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:`p-6 max-w-7xl mx-auto space-y-8 ${s?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-64 h-8",children:e.jsx(we,{})}),e.jsx("div",{className:"w-96 h-5",children:e.jsx(we,{})})]}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(we,{})}),e.jsx("div",{className:"w-64 h-4",children:e.jsx(we,{})})]}),e.jsx("div",{className:"w-10 h-10 rounded-full",children:e.jsx(we,{})})]}),e.jsxs("div",{className:"flex justify-between items-end mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-56 h-10",children:e.jsx(we,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(we,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(we,{})}),e.jsx("div",{className:"w-40 h-4",children:e.jsx(we,{})})]}),e.jsx("div",{className:"w-40 h-10",children:e.jsx(we,{})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full h-3",children:e.jsx(we,{})}),e.jsx("div",{className:"w-full h-3",children:e.jsx(we,{})}),e.jsx("div",{className:"w-full h-3",children:e.jsx(we,{})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(t=>e.jsx("div",{className:`p-6 rounded-lg shadow-lg ${s?"bg-gray-800":"bg-white"}`,children:e.jsx(we,{})},t))}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(we,{})}),e.jsx("div",{className:"w-32 h-10",children:e.jsx(we,{})})]}),e.jsx("div",{className:"space-y-4",children:[1,2,3].map(t=>e.jsx("div",{className:"h-20 rounded-lg",children:e.jsx(we,{})},t))})]})]})},Ys=({targetDate:s})=>{const[t,a]=n.useState(o());function o(){const r=s-new Date;return r<=0?{days:0,hours:0,minutes:0,seconds:0}:{days:Math.floor(r/(1e3*60*60*24)),hours:Math.floor(r/(1e3*60*60)%24),minutes:Math.floor(r/1e3/60%60),seconds:Math.floor(r/1e3%60)}}return n.useEffect(()=>{const r=setInterval(()=>{a(o())},1e3);return()=>clearInterval(r)},[s]),e.jsxs("div",{className:"font-mono text-sm",children:[t.days,"d ",t.hours.toString().padStart(2,"0"),"h ",t.minutes.toString().padStart(2,"0"),"m ",t.seconds.toString().padStart(2,"0"),"s"]})},Mi=s=>s.status==="delivered"?"100%":s.status==="shipped"?"75%":s.status==="processing"?"50%":s.paymentStatus==="completed"?"25%":"0%",Ri=s=>s.status==="delivered"?"bg-orange-500":s.status==="shipped"?"bg-green-500":s.status==="processing"?"bg-blue-500":s.paymentStatus==="completed"?"bg-gray-500":"bg-gray-200",Gs=2*60*60*1e3,Yl=()=>{const{user:s}=be(),[t,a]=n.useState(!0),[o,r]=n.useState(2.5),[p,g]=n.useState(15),{isDarkMode:i}=ne(),[$,k]=n.useState(null),[j,y]=n.useState({totalProducts:0,totalSales:0,totalCustomers:0,grossRevenue:0,netRevenue:0,balances:{USDC:0,USDT:0}}),[C,P]=n.useState([]),[B,v]=n.useState([]),[I,A]=n.useState(null),[x,m]=n.useState(!1),[d,b]=n.useState("USDC"),[h,D]=n.useState(!1),[V,z]=n.useState([]),[u,F]=n.useState(!1),[l,E]=n.useState(!1);n.useEffect(()=>{s?.uid&&(L(),q(),f())},[s]);const L=async()=>{try{const _=await oe(te(O,"sellers",s.sellerId));if(_.exists()){const ee=_.data();k({...ee,isVerified:ee.verificationStatus==="approved",verificationRequested:ee.verificationStatus==="pending",isRejected:ee.verificationStatus==="rejected",rejectedAt:ee.rejectedAt?.toDate(),rejectionCooldown:ee.rejectionCooldown||72,rejectionReason:ee.rejectionReason})}}catch(_){console.error("Error fetching seller data:",_)}},f=async()=>{try{const _=await oe(te(O,"settings","platform"));if(_.exists()){const ee=_.data();r(ee.platformFee||2.5),g(ee.withdrawalMinimum||15)}}catch(_){console.error("Error fetching platform settings:",_)}},q=async()=>{try{const _=te(O,"sellers",s.sellerId),ee=it(_,se=>{A(se.data())}),Y=de(re(O,"products"),ie("sellerId","==",s.sellerId)),Q=await ge(Y),R=de(re(O,"orders"),ie("sellerId","==",s.sellerId),ye("createdAt","desc")),J=it(R,se=>{const W=se.docs.map(ae=>({id:ae.id,...ae.data()})),Z=new Date,le=W.filter(ae=>{if(ae.paymentStatus==="completed"){if(ae.status==="cancelled"||ae.status==="refunded")return!1;const pe=ae.createdAt.toDate(),Fe=new Date(pe.getTime()+3*24*60*60*1e3);return Z<=Fe}return!1});z(le);const me=de(re(O,"withdrawals"),ie("sellerId","==",s.sellerId),ye("timestamp","desc")),X=it(me,ae=>{const pe=ae.docs.map(ce=>({id:ce.id,...ce.data(),timestamp:ce.data().timestamp?.toDate()}));v(pe);const Fe={USDC:pe.filter(ce=>ce.status==="completed"&&ce.token==="USDC").reduce((ce,He)=>ce+(He.amount||0),0),USDT:pe.filter(ce=>ce.status==="completed"&&ce.token==="USDT").reduce((ce,He)=>ce+(He.amount||0),0)};let Nt=0,We=0;const _e={USDC:{gross:0,net:0},USDT:{gross:0,net:0}},Ye=new Set;W.forEach(ce=>{if(ce.buyerId&&Ye.add(ce.buyerId),ce.paymentStatus==="completed"){const He=ce.createdAt.toDate(),ws=new Date,Ns=new Date(He.getTime()+3*24*60*60*1e3),Zt=ce.total||0,Et=ce.paymentMethod?.token||"USDT";if(ws>=Ns){if(!ce.shippingConfirmed&&new Date(ws.getTime()-Gs)<Ns)return;if(ce.status!=="cancelled"&&ce.status!=="refunded"){Nt+=Zt;const Xt=Zt*.95;We+=Xt,_e[Et]||(_e[Et]={gross:0,net:0}),_e[Et].gross+=Zt,_e[Et].net+=Xt}}}});const et={USDC:parseFloat(Math.max(0,_e.USDC.net-Fe.USDC-(I?.pendingRefunds?.USDC||0)).toFixed(2)),USDT:parseFloat(Math.max(0,_e.USDT.net-Fe.USDT-(I?.pendingRefunds?.USDT||0)).toFixed(2))},tt={USDC:pe.filter(ce=>ce.status==="pending"&&ce.token==="USDC").reduce((ce,He)=>ce+(He.amount||0),0),USDT:pe.filter(ce=>ce.status==="pending"&&ce.token==="USDT").reduce((ce,He)=>ce+(He.amount||0),0)};et.USDC=parseFloat(Math.max(0,et.USDC-tt.USDC).toFixed(2)),et.USDT=parseFloat(Math.max(0,et.USDT-tt.USDT).toFixed(2)),y({totalProducts:Q.size,totalSales:W.filter(ce=>ce.paymentStatus==="completed").length,totalCustomers:Ye.size,grossRevenue:Nt,netRevenue:We,balances:et,pendingRefunds:I?.pendingRefunds||{USDC:0,USDT:0}}),P(W.filter(ce=>ce.paymentStatus==="completed").slice(0,3))});return()=>{ee(),J(),X()}})}catch(_){console.error("Error fetching dashboard data:",_),N.error("Failed to load dashboard data")}finally{a(!1)}},G={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},T={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},S=[{title:"Total Products",icon:e.jsx(Ma,{}),value:j.totalProducts,color:"bg-blue-500"},{title:"Total Sales",icon:e.jsx(ms,{}),value:j.totalSales,color:"bg-green-500"},{title:"Total Customers",icon:e.jsx(Ot,{}),value:j.totalCustomers,color:"bg-purple-500"},{title:"Revenue",icon:e.jsx(Ze,{}),value:e.jsx("div",{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-lg",children:"Current Balance:"}),e.jsxs("div",{className:"text-2xl font-bold",children:["$",(j.balances.USDC+j.balances.USDT).toFixed(2)]}),e.jsx("div",{className:"text-sm opacity-75",children:"All-time Revenue:"}),e.jsxs("div",{className:"text-xl",children:["$",j.grossRevenue.toFixed(2)]}),e.jsxs("div",{className:"text-xs opacity-75",children:["Net (after 5% fee): $",j.netRevenue.toFixed(2)]})]})}),color:"bg-pink-500"}],c=()=>{if(!$?.isRejected||!$.rejectedAt)return!0;const _=$.rejectionCooldown||72,ee=new Date($.rejectedAt.getTime()+_*60*60*1e3);return Date.now()>=ee},w=()=>{if(!$?.rejectedAt)return null;const _=$.rejectionCooldown||72,Y=new Date($.rejectedAt.getTime()+_*60*60*1e3)-Date.now();if(Y<=0)return null;const Q=Math.floor(Y/(60*60*1e3)),R=Math.floor(Y%(60*60*1e3)/(60*1e3));return{hours:Q,minutes:R}},U=async()=>{if(!c()){N.error("Please wait for the cooldown period to end before requesting again");return}E(!0);try{await xe(te(O,"sellers",s.sellerId),{verificationRequested:!0,verificationRequestedAt:ue(),verificationStatus:"pending",rejectedAt:null,rejectionReason:null}),N.success("Verification request submitted successfully!"),await L(),E(!1),F(!1),k(_=>({..._,verificationRequested:!0,verificationStatus:"pending",isRejected:!1,rejectedAt:null,rejectionReason:null}))}catch(_){console.error("Error requesting verification:",_),N.error("Failed to submit verification request"),E(!1)}},H=()=>e.jsx(fe,{appear:!0,show:u,as:n.Fragment,children:e.jsxs(he,{as:"div",className:"relative z-50",onClose:()=>!l&&F(!1),static:!0,children:[e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(fe.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(he.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(Ke,{})}),e.jsx(he.Title,{as:"h3",className:"text-lg font-medium leading-6 text-center text-gray-900",children:"Store Verification Process"}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"The verification process duration is not fixed and depends on several factors:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-500 space-y-2 mb-4",children:[e.jsx("li",{children:"Number of customer reviews"}),e.jsx("li",{children:"Average store rating"}),e.jsx("li",{children:"Customer satisfaction level"}),e.jsx("li",{children:"Quality of products and service"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"We encourage you to provide excellent service to your customers and actively seek their feedback. Positive reviews and high ratings will significantly improve your chances of verification."}),$?.isRejected&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-100 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:"Previous Request Rejected"}),$.rejectionReason&&e.jsxs("p",{className:"text-sm text-red-700 mb-2",children:["Reason: ",$.rejectionReason]}),e.jsx("p",{className:"text-sm text-red-600",children:"Please address any issues mentioned above before requesting verification again."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-gray-100 px-4 py-2 text-sm font-medium text-gray-900 hover:bg-gray-200 focus:outline-none",onClick:()=>F(!1),children:"Cancel"}),e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-transparent bg-[#FF1B6B] px-4 py-2 text-sm font-medium text-white hover:bg-[#D4145A] focus:outline-none",onClick:U,children:"Request Verification"})]})]})})})})]})}),K=()=>{if(!$)return null;if($.isVerified)return e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-100 text-green-800 rounded-lg",children:[e.jsx(Ke,{}),e.jsx("span",{children:"Verified Store"})]});if($.verificationStatus==="rejected"){const _=w();if(_)return e.jsx("div",{className:"bg-red-50 border border-red-100 rounded-lg p-4 max-w-md",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ve,{className:"text-red-500 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-red-800",children:"Verification Request Rejected"}),$.rejectionReason&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:$.rejectionReason}),e.jsxs("div",{className:"text-xs text-gray-600 mt-2",children:["You can request again in ",_.hours,"h ",_.minutes,"m"]})]})]})})}return $.verificationStatus==="pending"?e.jsx("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-yellow-100 text-yellow-800 rounded-lg",children:e.jsx("span",{children:"Verification Pending"})}):e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border-2 border-[#FF1B6B] text-[#FF1B6B] rounded-lg hover:bg-pink-50 transition-colors",disabled:!c(),children:[e.jsx(Ke,{}),e.jsx("span",{children:"Request Verification"})]})};return t?e.jsx(Pi,{}):e.jsxs(e.Fragment,{children:[e.jsx(H,{}),e.jsxs(M.div,{className:`p-6 max-w-7xl mx-auto ${i?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:G,children:[e.jsx(M.div,{className:"mb-8",variants:T,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:`text-3xl font-bold ${i?"text-gray-100":"text-gray-800"}`,children:["Welcome back, ",s?.displayName||"Seller","!"]}),e.jsx("p",{className:`${i?"text-gray-400":"text-gray-600"} mt-2`,children:"Here's what's happening with your store today."})]}),e.jsx("div",{className:"flex justify-end mb-6",children:e.jsx(K,{})})]})}),e.jsx(M.div,{className:"mb-8",variants:T,children:e.jsxs("div",{className:`${i?"bg-gray-800":"bg-white"} rounded-xl shadow-lg p-6`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${i?"text-gray-100":"text-gray-900"}`,children:"Available Balance"}),e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"} mt-1`,children:"Withdraw anytime to your wallet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:`flex items-center gap-2 ${i?"bg-gray-700":"bg-gray-50"} px-3 py-1.5 rounded-lg`,children:[e.jsx("img",{src:I?.preferredNetwork==="unichain"?"/unichain-logo.png":"/polygon.png",alt:I?.preferredNetwork==="unichain"?"Unichain":"Polygon",className:"w-6 h-6 object-contain"}),e.jsxs("span",{className:`text-sm font-medium ${i?"text-gray-300":"text-gray-700"}`,children:[I?.preferredNetwork==="unichain"?"Unichain":"Polygon"," Network"]})]}),e.jsx("div",{className:"p-2 bg-[#FF1B6B] bg-opacity-10 rounded-full",children:e.jsx(rs,{className:"text-[#FF1B6B] text-xl"})})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 mb-6",children:[e.jsxs("div",{className:`flex-grow ${i?"bg-gray-700":"bg-gray-50"} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("img",{src:ss[I?.preferredToken]?.logo,alt:I?.preferredToken,className:"w-6 h-6"}),e.jsxs("div",{className:"text-2xl font-bold text-[#FF1B6B]",children:[j.balances[I?.preferredToken]?.toFixed(2)," ",I?.preferredToken]})]}),e.jsxs("div",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:[" $",j.balances[I?.preferredToken]?.toFixed(2)]}),e.jsx("div",{className:`text-xs ${i?"text-gray-400":"text-gray-500"} mt-1`,children:"Available to withdraw"}),e.jsx("div",{className:`w-full ${i?"bg-gray-600":"bg-gray-200"} rounded-full h-2 mt-2`,children:e.jsx("div",{className:"bg-[#FF1B6B] h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(100,j.balances[I?.preferredToken]/15*100)}%`}})}),e.jsxs("div",{className:`text-xs ${i?"text-gray-400":"text-gray-500"} mt-1`,children:["Min. 15 ",I?.preferredToken," Required"]}),e.jsx("button",{onClick:()=>{!j.balances[I?.preferredToken]||j.balances[I?.preferredToken]<p||(b(I?.preferredToken),m(!0))},disabled:!j.balances[I?.preferredToken]||j.balances[I?.preferredToken]<p,className:`w-full mt-4 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${!j.balances[I?.preferredToken]||j.balances[I?.preferredToken]<p?i?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-[#FF1B6B] text-white hover:bg-[#D4145A]"}`,children:!j.balances[I?.preferredToken]||j.balances[I?.preferredToken]<p?`Min. ${p} ${I?.preferredToken} Required`:`Request ${I?.preferredToken} Withdrawal`})]}),e.jsx("div",{className:`lg:w-1/3 ${i?"bg-gray-700":"bg-gray-50"} rounded-lg p-4`,children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"text-[#FF1B6B] w-5 h-5"}),e.jsx("p",{className:`text-sm ${i?"text-gray-300":"text-gray-600"}`,children:"Gas fees paid from your wallet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:"text-[#FF1B6B] w-5 h-5"}),e.jsx("p",{className:`text-sm ${i?"text-gray-300":"text-gray-600"}`,children:"5% platform fee per sale"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ft,{className:"text-[#FF1B6B] w-5 h-5"}),e.jsxs("p",{className:`text-sm ${i?"text-gray-300":"text-gray-600"}`,children:["Min. withdrawal: 15 ",I?.preferredToken]})]})]})})]})]})}),e.jsx(M.div,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",variants:G,children:S.map((_,ee)=>e.jsx(M.div,{className:`p-6 rounded-lg shadow-lg ${_.color} text-white transform hover:scale-105 transition-transform duration-200`,variants:T,whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold mb-2",children:_.title}),e.jsx("h3",{className:"text-3xl font-bold",children:_.value})]}),e.jsx("div",{className:"text-3xl opacity-80",children:_.icon})]})},_.title))}),e.jsxs(M.div,{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6 mb-8`,variants:T,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${i?"text-gray-100":"text-gray-900"}`,children:"Incoming Payments"}),e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:"Payments pending 3-day shipping confirmation"})]}),e.jsx("button",{onClick:()=>D(!h),className:`p-2 ${i?"hover:bg-gray-700":"hover:bg-gray-100"} rounded-full transition-colors`,children:e.jsx("svg",{className:`w-6 h-6 ${i?"text-gray-400":"text-gray-500"} transform transition-transform ${h?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),e.jsxs("div",{className:`mb-4 p-4 ${i?"bg-pink-900/20 border-pink-800":"bg-[#FF1B6B] bg-opacity-10 border-[#FF1B6B]"} border rounded-lg flex items-start space-x-3`,children:[e.jsx("svg",{className:"w-5 h-5 text-[#FF1B6B] mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-[#FF1B6B] mb-1",children:" Shipping Time Requirement"}),e.jsxs("div",{className:`space-y-2 text-sm ${i?"text-gray-300":"text-gray-700"}`,children:[e.jsx("p",{children:"All orders must be shipped within 3 days of payment. Orders not shipped within this timeframe may be cancelled and refunded to protect buyers."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Buffer Period:"})," For orders awaiting shipping, there is a 2-hour buffer period after the 3-day window before funds become available. This buffer ensures the auto-cancellation system can protect buyers from unshipped orders."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipped Orders:"})," Orders marked as shipped (with tracking number) will not be subject to the buffer period, but funds will still be held for the full 3-day window."]}),e.jsxs("p",{className:`${i?"text-red-400":"text-red-600"}`,children:[e.jsx("strong",{children:"Warning:"})," Falsely marking orders as shipped without actual shipping confirmation may result in penalties if buyers report issues. Please only confirm shipping when you have a valid tracking number."]})]})]})]}),h&&e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:`min-w-full divide-y ${i?"divide-gray-700":"divide-gray-200"}`,children:[e.jsx("thead",{className:`${i?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Order ID"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Date"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Amount"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Token"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Available In"})]})}),e.jsx("tbody",{className:`${i?"divide-y divide-gray-700":"bg-white divide-y divide-gray-200"}`,children:V.map(_=>{const ee=_.createdAt.toDate(),Y=new Date(ee.getTime()+3*24*60*60*1e3),Q=new Date,R=Math.max(0,Math.ceil((Y-Date.now())/(60*60*1e3)));return e.jsxs("tr",{className:i?"bg-gray-800":"bg-white",children:[e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${i?"text-gray-300":"text-gray-900"}`,children:["#",_.id.slice(-6)]}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${i?"text-gray-400":"text-gray-500"}`,children:ee.toLocaleString()}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${i?"text-gray-300":"text-gray-900"}`,children:["$",_.total.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:_.paymentMethod.token==="USDC"?ss.USDC.logo:ss.USDT.logo,alt:_.paymentMethod.token,className:"w-5 h-5 mr-2"}),e.jsx("span",{className:`text-sm ${i?"text-gray-300":"text-gray-900"}`,children:_.paymentMethod.token})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.status==="cancelled"?e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i?"bg-red-900/50 text-red-300":"bg-red-100 text-red-800"}`,children:"Canceled"}):_.shippingConfirmed?e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`text-xs font-medium ${i?"text-green-400":"text-green-600"}`,children:"Shipping Confirmed"}),e.jsxs("span",{className:`text-xs ${i?"text-gray-400":"text-gray-500"}`,children:[_.carrier,": ",_.trackingNumber]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:i?"text-gray-300":"",children:_.status==="delivered"?"Delivered":"Processing"}),e.jsx("div",{className:`relative w-full h-2 ${i?"bg-gray-700":"bg-gray-100"} rounded-full overflow-hidden`,children:e.jsx("div",{className:`absolute left-0 top-0 h-full transition-all duration-300 ${Ri(_)}`,style:{width:Mi(_)}})})]})]}):e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i?"bg-yellow-900/50 text-yellow-300":"bg-yellow-100 text-yellow-800"}`,children:"Awaiting Shipping"})}),e.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm ${i?"text-gray-400":"text-gray-500"}`,children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"3-day period:"}),e.jsx(Ys,{targetDate:Y})]}),Q>=Y&&!_.shippingConfirmed&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs ${i?"text-yellow-400":"text-yellow-600"}`,children:"Buffer period:"}),e.jsx(Ys,{targetDate:new Date(Y.getTime()+Gs)})]}),e.jsx("div",{className:`w-full ${i?"bg-gray-700":"bg-gray-200"} rounded-full h-1.5`,children:e.jsx("div",{className:"bg-[#FF1B6B] h-1.5 rounded-full transition-all duration-500",style:{width:_.shippingConfirmed?`${Math.min(100,(72-R)/72*100)}%`:`${Math.min(100,(72-R-2)/72*100)}%`}})}),_.shippingConfirmed?e.jsx("span",{className:`text-xs ${i?"text-green-400":"text-green-600"}`,children:"No buffer (shipping confirmed)"}):Q>=Y?e.jsx("span",{className:`text-xs ${i?"text-yellow-400":"text-yellow-600"}`,children:"In 2-hour buffer period"}):e.jsx("span",{className:`text-xs ${i?"text-gray-400":"text-gray-500"}`,children:"Awaiting 3-day period"})]})})]},_.id)})})]}),V.length===0&&e.jsx("div",{className:`text-center py-8 ${i?"text-gray-400":"text-gray-500"}`,children:"No incoming payments at the moment"})]})]}),e.jsxs(M.div,{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6 mb-8`,variants:T,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:`text-xl font-semibold ${i?"text-gray-100":"text-gray-800"}`,children:"Recent Activity"}),e.jsx(ve,{to:"/merch-store/orders-received",className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:"View All Orders"})]}),e.jsx(M.div,{className:"space-y-4",variants:G,children:C.length===0?e.jsx(M.div,{variants:T,className:`text-center py-8 ${i?"text-gray-400":"text-gray-500"}`,children:"No orders yet"}):C.map(_=>e.jsxs(M.div,{className:`flex items-center justify-between p-4 ${i?"bg-gray-700":"bg-gray-50"} rounded-lg`,variants:T,children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-2 bg-[#FF1B6B] bg-opacity-10 rounded-full",children:e.jsx(Ft,{className:"text-[#FF1B6B] text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${i?"text-gray-200":"text-gray-800"}`,children:"New order received"}),e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:new Date(_.createdAt?.toDate()).toLocaleString()})]})]}),e.jsxs("span",{className:"text-[#FF1B6B] font-medium",children:["$",_.total.toFixed(2)]})]},_.id))})]}),e.jsxs(M.div,{className:`${i?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6 mb-8`,variants:T,children:[e.jsx("h2",{className:`text-xl font-semibold ${i?"text-gray-100":"text-gray-800"} mb-6`,children:"Withdrawal History"}),B.length>0?e.jsx("div",{className:"w-full",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:`${i?"bg-gray-700":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Date"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Amount"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider w-[300px]`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${i?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Transaction"})]})}),e.jsx("tbody",{className:`${i?"divide-gray-700":"bg-white divide-y divide-gray-200"}`,children:B.map(_=>e.jsxs("tr",{className:i?"bg-gray-800":"bg-white",children:[e.jsx("td",{className:`px-6 py-4 text-sm ${i?"text-gray-300":"text-gray-900"}`,children:_.timestamp?new Date(_.timestamp).toLocaleString():"N/A"}),e.jsxs("td",{className:`px-6 py-4 text-sm ${i?"text-gray-300":"text-gray-900"}`,children:["$",_.amount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.completed?i?"bg-green-900 text-green-200":"bg-green-100 text-green-800":i?"bg-yellow-900 text-yellow-200":"bg-yellow-100 text-yellow-800"}`,children:_.completed?"Completed":"Processing"}),_.isRefund&&e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-medium rounded-full ${i?"bg-blue-900 text-blue-200":"bg-blue-100 text-blue-800"}`,children:"Refund"})]}),e.jsx("td",{className:`px-6 py-4 text-sm ${i?"text-gray-300":"text-gray-900"}`,children:_.transactionHash?e.jsx("a",{href:`${_.network==="unichain"?"https://unichain-sepolia.blockscout.com/tx/":"https://polygonscan.com/tx/"}${_.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#FF1B6B] hover:underline",children:"View Transaction"}):"Pending"})]},_.id))})]})}):e.jsx("div",{className:`text-center py-8 ${i?"text-gray-400":"text-gray-500"}`,children:"No withdrawals yet"})]}),e.jsx(Cn,{isOpen:x,onClose:()=>m(!1),onAccept:async()=>{try{const _=await ze();if(!_){N.error("Please install MetaMask to withdraw funds");return}const ee=await _.request({method:"eth_requestAccounts"});if(ee.length===0){N.error("Please connect your wallet");return}if(ee[0].toLowerCase()!==I.walletAddress.toLowerCase()){N.error("Please use the wallet address registered in your seller settings");return}const Y=d==="USDC"?j.balances.USDC:j.balances.USDT;if(Y<p){N.error(`Minimum withdrawal amount is ${p} ${d}`);return}const Q=I.preferredNetwork==="unichain"?1301:137;if(window.ethereum.networkVersion!==Q.toString())try{Q===1301?await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]})}catch(X){if(X.code===4902)try{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]})}catch{N.error("Failed to add network to MetaMask");return}else{N.error(`Please switch to ${I.preferredNetwork} network in MetaMask`);return}}const J=await new Ae(window.ethereum).getSigner(),se=nt(J,Q.toString()),W=d==="USDC"?Q===1301?"0x31d0220469e10c4E71834a79b1f276d740d3768F":"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359":Q===1301?"0x70262e266E50603AcFc5D58997eF73e5a8775844":"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",Z=ti(Y),le=await se.requestWithdrawal(W,Z),me=N.loading("Processing withdrawal request...");await le.wait(),await Pe(re(O,"withdrawals"),{sellerId:s.sellerId,amount:Y,token:d,fee:0,netAmount:Y,status:"pending",walletAddress:ee[0],network:I.preferredNetwork,timestamp:ue(),requestedAt:Date.now(),processingDays:3,transactionHash:le.hash}),N.dismiss(me),N.success("Withdrawal request submitted successfully"),q()}catch(_){console.error("Withdrawal error:",_),N.error(_.message||"Failed to process withdrawal")}},token:d}),j.pendingRefunds&&(j.pendingRefunds.USDC>0||j.pendingRefunds.USDT>0)&&e.jsx("div",{className:`${i?"bg-yellow-900/20 border-yellow-800":"bg-yellow-50 border-yellow-100"} border rounded-lg p-4 mt-4`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"text-yellow-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${i?"text-yellow-400":"text-yellow-800"}`,children:"Pending Refunds"}),e.jsxs("div",{className:"mt-2 space-y-1",children:[j.pendingRefunds.USDC>0&&e.jsxs("p",{className:`text-sm ${i?"text-yellow-300":"text-yellow-700"}`,children:["USDC: $",j.pendingRefunds.USDC.toFixed(2)]}),j.pendingRefunds.USDT>0&&e.jsxs("p",{className:`text-sm ${i?"text-yellow-300":"text-yellow-700"}`,children:["USDT: $",j.pendingRefunds.USDT.toFixed(2)]})]}),e.jsx("p",{className:`text-xs ${i?"text-yellow-400/80":"text-yellow-600"} mt-2`,children:"These amounts are reserved for potential refunds and have been deducted from your available balance."})]})]})})]})]})},Li=`
  :root {
    color-scheme: light;
  }
  
  .dark input[type="datetime-local"] {
    color-scheme: dark;
    background-color: #1a1b1f !important;
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: invert(1) !important;
    opacity: 0.7;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit {
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #fff !important;
  }

  input[type="datetime-local"] {
    color-scheme: light !important;
    background-color: white !important;
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: none !important;
    color: #1F2937 !important;
    opacity: 0.7;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  input[type="datetime-local"]::-webkit-datetime-edit {
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #1F2937 !important;
  }

  /* Style the checkbox */
  input[type="checkbox"] {
    accent-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:checked {
    background-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:focus {
    box-shadow: 0 0 0 2px rgba(255, 27, 107, 0.3) !important;
  }
`,Ce=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},_i=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("div",{className:"w-48 h-8 mb-6",children:e.jsx(Ce,{})}),e.jsxs("div",{className:`space-y-6 ${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"w-64 h-5",children:e.jsx(Ce,{})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[1,2,3].map(t=>e.jsx("div",{className:"aspect-square",children:e.jsx(Ce,{})},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(Ce,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(Ce,{})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-5",children:e.jsx(Ce,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(Ce,{})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-16 h-5",children:e.jsx(Ce,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(Ce,{})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(Ce,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(Ce,{})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-28 h-5",children:e.jsx(Ce,{})}),e.jsx("div",{className:"w-full h-32",children:e.jsx(Ce,{})})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx("div",{className:"w-32 h-10",children:e.jsx(Ce,{})})})]})]})]})},Qs=["US 6 / EU 39","US 6.5 / EU 39.5","US 7 / EU 40","US 7.5 / EU 40.5","US 8 / EU 41","US 8.5 / EU 41.5","US 9 / EU 42","US 9.5 / EU 42.5","US 10 / EU 43","US 10.5 / EU 43.5","US 11 / EU 44","US 11.5 / EU 44.5","US 12 / EU 45","US 13 / EU 46"],Gl=()=>{const{user:s}=be(),t=De(),{isDarkMode:a}=ne(),[o,r]=n.useState(!0),[p,g]=n.useState(!1);n.useState(!1);const[i,$]=n.useState([]),[k,j]=n.useState([]),[y,C]=n.useState({name:"",description:"",price:"",quantity:"",category:"",subCategory:"",images:[],network:"polygon",acceptedToken:"USDC",tokenLogo:"/logos/usdc.png",shippingFee:0,shippingInfo:"",hasVariants:!1,selectedSizes:[],selectedColors:[],colorQuantities:{},hasDiscount:!1,discountPercent:0}),P=["XS","S","M","L","XL","2XL","3XL"],B=[{name:"Black",value:"#000000"},{name:"White",value:"#FFFFFF"},{name:"Gray",value:"#808080"},{name:"Red",value:"#FF0000"},{name:"Blue",value:"#0000FF"},{name:"Green",value:"#008000"},{name:"Yellow",value:"#FFFF00"},{name:"Purple",value:"#800080"},{name:"Pink",value:"#FFC0CB"},{name:"Brown",value:"#A52A2A"}],v=[{id:"polygon",name:"Polygon",logo:"/polygon.png"},{id:"unichain",name:"Unichain Testnet",logo:"/unichain-logo.png"}],I={"Men's Wear":["T-Shirts","Shirts","Pants","Hoodies","Jackets","Suits"],"Women's Wear":["Dresses","Tops","Skirts","Pants","Blouses","Jackets"],Footwear:["Sneakers","Formal Shoes","Boots","Sandals","Slippers"]},A={"Fashion Accessories":["Bags","Belts","Hats","Scarves","Jewelry"],"Tech Accessories":["Phone Cases","Laptop Bags","Headphone Cases","Tablet Covers","Chargers","Headphones","Speakers","MP3 Players","Sound Systems","Audio Cables"]},[x,m]=n.useState([]),[d,b]=n.useState([]),[h,D]=n.useState({}),V=()=>y.category==="clothing"&&y.subCategory&&y.subCategory.split(" - ")[0]==="Footwear";if(n.useEffect(()=>{V()?(m(Qs),b([]),D({})):(m(["XS","S","M","L","XL","XXL"]),b([]),D({}))},[y.category,y.subCategory]),n.useEffect(()=>{(async()=>{try{if(!s?.sellerId){r(!1);return}const c=await oe(te(O,"sellers",s.sellerId));if(c.exists()){const w=c.data();if(!w.preferredNetwork||!w.preferredToken){r(!1);return}C(U=>({...U,network:w.preferredNetwork,acceptedToken:w.preferredToken,tokenLogo:`/logos/${w.preferredToken.toLowerCase()}.png`,shippingFee:w.shippingFee||0}))}r(!1)}catch(c){console.error("Error loading seller preferences:",c),r(!1)}})()},[s?.sellerId]),o)return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#FF1B6B]"})});if(!y.network||!y.acceptedToken)return e.jsx("div",{className:"max-w-4xl mx-auto p-6",children:e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Network and Payment Preferences Required"}),e.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:e.jsx("p",{children:"Before adding products, you need to set your preferred network and payment token in your store settings."})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>t("/merch/settings"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B]",children:"Go to Settings"})})]})]})})});const z=S=>{const{name:c,value:w}=S.target;C(c==="category"?U=>({...U,category:w,subCategory:"",hasVariants:!1,selectedSizes:[],selectedColors:[]}):U=>({...U,[c]:w}))},u=S=>{const c=Array.from(S.target.files);if(i.length+c.length>5){N.error("Maximum 5 images allowed");return}if(c.filter(H=>H.size>2*1024*1024).length>0){N.error("Each image must be less than 2MB");return}const U=c.map(H=>URL.createObjectURL(H));$(H=>[...H,...c]),j(H=>[...H,...U])},F=S=>{URL.revokeObjectURL(k[S]),$(c=>c.filter((w,U)=>U!==S)),j(c=>c.filter((w,U)=>U!==S))},l=async S=>{const c=S.map(async w=>{const U=Ct($t,`products/${s.uid}/${Date.now()}-${w.name}`),H=await ys(U,w);return fs(H.ref)});return Promise.all(c)},E=async S=>{S.preventDefault(),g(!0);try{if(!s?.sellerId){N.error("You must be a registered seller to add products"),g(!1);return}const c=await oe(te(O,"sellers",s.sellerId));if(!c.exists()){N.error("Seller information not found"),g(!1);return}const w=c.data();if(!y.name||!y.description||!y.price){N.error("Please fill in all required fields"),g(!1);return}if(i.length===0){N.error("Please add at least one product image"),g(!1);return}const U=await l(i);if(V()&&y.hasVariants&&y.selectedSizes.length===0){N.error("Please select at least one shoe size"),g(!1);return}if(y.hasVariants&&Object.values(y.colorQuantities).reduce((Q,R)=>Q+Number(R),0)===0){N.error("Please specify quantities for all selected colors"),g(!1);return}let H=null;y.hasDiscount&&y.discountEndsAt&&(H=new Date(y.discountEndsAt).toISOString());const K=y.hasDiscount?Number(y.price)*(1-Number(y.discountPercent)/100):Number(y.price),_={name:y.name,description:y.description,price:Number(y.price),category:y.category,subCategory:y.subCategory,images:U,network:y.network,acceptedToken:y.acceptedToken,tokenLogo:y.tokenLogo,shippingFee:Number(y.shippingFee),shippingInfo:y.shippingInfo,hasVariants:y.hasVariants,sizes:y.hasVariants?y.selectedSizes:[],colors:y.hasVariants?y.selectedColors:[],colorQuantities:y.hasVariants?y.colorQuantities:{},quantity:y.hasVariants?Object.values(y.colorQuantities).reduce((Y,Q)=>Y+Number(Q),0):Number(y.quantity),hasDiscount:y.hasDiscount,discountPercent:y.hasDiscount?Number(y.discountPercent):0,discountEndsAt:H,discountedPrice:K,status:"active",createdAt:ue(),updatedAt:ue(),sellerId:s.sellerId,sellerName:w.storeName||"Anonymous",soldCount:0};Object.keys(_).forEach(Y=>{(_[Y]===void 0||_[Y]===""||_[Y]===null)&&delete _[Y]});const ee=await Pe(re(O,"products"),_);N.success("Product added successfully"),t(`/merch-store/product/${ee.id}`)}catch(c){console.error("Error adding product:",c),N.error("Failed to add product")}finally{g(!1)}},L=S=>{C(c=>({...c,selectedSizes:c.selectedSizes.includes(S)?c.selectedSizes.filter(w=>w!==S):[...c.selectedSizes,S]}))},f=S=>{C(c=>({...c,selectedColors:c.selectedColors.includes(S.name)?c.selectedColors.filter(w=>w!==S.name):[...c.selectedColors,S.name]}))},q=(S,c)=>{C(w=>({...w,subCategory:`${S} - ${c}`}))},G={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},T={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return o?e.jsx(_i,{}):e.jsxs(M.div,{className:`max-w-4xl mx-auto p-6 ${a?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:G,children:[e.jsx("style",{children:Li}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm p-6`,children:[e.jsxs(M.div,{variants:T,children:[e.jsx("h1",{className:`text-2xl font-bold ${a?"text-gray-100":"text-gray-800"} mb-2`,children:"Add New Product"}),e.jsx("p",{className:`${a?"text-gray-400":"text-gray-500"} text-sm mb-6`,children:"Fill in the details for your new product listing"})]}),e.jsxs("form",{onSubmit:E,className:"space-y-8",children:[e.jsxs(M.div,{variants:T,className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-4`,children:"Product Images (Max 5 images, 2MB each)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[k.map((S,c)=>e.jsxs(M.div,{className:"relative aspect-square rounded-lg overflow-hidden group bg-white",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2},children:[e.jsx("img",{src:S,alt:`Preview ${c+1}`,className:"w-full h-full object-cover"}),e.jsx(M.button,{type:"button",className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>F(c),children:e.jsx(bt,{size:16})})]},S)),k.length<5&&e.jsxs(M.label,{className:`aspect-square rounded-lg border-2 border-dashed ${a?"border-gray-600 hover:border-[#FF1B6B]":"border-gray-300 hover:border-[#FF1B6B]"} flex flex-col items-center justify-center cursor-pointer transition-colors ${a?"bg-gray-800":"bg-white"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Ra,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:`text-sm ${a?"text-gray-400":"text-gray-500"} mt-2`,children:"Add Image"}),e.jsx("input",{type:"file",accept:"image/*",onChange:u,className:"hidden",multiple:!0})]})]})]}),e.jsxs(M.div,{variants:T,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-1`,children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:y.name,onChange:z,required:!0,className:`w-full px-4 py-2 border ${a?"border-gray-600 bg-gray-700 text-white focus:border-[#FF1B6B]":"border-gray-300 bg-white text-gray-900 focus:border-[#FF1B6B]"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors`,placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-1`,children:"Category *"}),e.jsxs("select",{name:"category",value:y.category,onChange:z,required:!0,className:`w-full px-4 py-2 border ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors appearance-none`,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"clothing",children:"Clothing"}),e.jsx("option",{value:"accessories",children:"Accessories"}),e.jsx("option",{value:"electronics",children:"Electronics"}),e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"collectibles",children:"Collectibles"})]})]})]}),(y.category==="clothing"||y.category==="accessories")&&e.jsxs(M.div,{variants:T,className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-4`,children:"Product Type *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(y.category==="clothing"?I:A).map(([S,c])=>e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${a?"text-gray-100":"text-gray-900"} mb-3`,children:S}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:c.map(w=>e.jsx("button",{type:"button",onClick:()=>q(S,w),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors text-left ${y.subCategory===`${S} - ${w}`?"bg-[#FF1B6B] text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:w},w))})]},S))}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${a?"text-gray-100":"text-gray-900"} mb-3`,children:"Selected Category"}),y.subCategory?e.jsxs("div",{className:`${a?"bg-pink-900/20":"bg-pink-50"} border ${a?"border-pink-900/20":"border-pink-100"} rounded-lg p-4`,children:[e.jsxs("p",{className:a?"text-gray-200":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Main Category:"})," ",y.subCategory.split(" - ")[0]]}),e.jsxs("p",{className:`${a?"text-gray-200":"text-gray-700"} mt-2`,children:[e.jsx("span",{className:"font-medium",children:"Sub Category:"})," ",y.subCategory.split(" - ")[1]]})]}):e.jsx("div",{className:`${a?"bg-gray-700/50 border-gray-600 text-gray-400":"bg-gray-50 border-gray-100 text-gray-500"} border rounded-lg p-4`,children:"Please select a category from the left"})]})]})]}),(y.category==="clothing"||y.category==="accessories")&&e.jsxs("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"hasVariants",name:"hasVariants",checked:y.hasVariants,onChange:S=>{C(c=>({...c,hasVariants:S.target.checked,sizes:S.target.checked?c.selectedSizes:[],colors:S.target.checked?c.selectedColors:[]}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasVariants",className:`ml-2 text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"This product has size and color variants"})]}),y.hasVariants&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:V()?Qs.map(S=>e.jsx("button",{type:"button",onClick:()=>L(S),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${y.selectedSizes.includes(S)?"bg-[#FF1B6B] text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:S},S)):P.map(S=>e.jsx("button",{type:"button",onClick:()=>L(S),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${y.selectedSizes.includes(S)?"bg-[#FF1B6B] text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:S},S))})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Colors & Quantities"}),e.jsx("div",{className:"space-y-4",children:B.map(S=>{const c=y.selectedColors.includes(S.name);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>f(S),className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${c?"bg-[#FF1B6B] text-white":a?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{className:"h-4 w-4 rounded-full border border-gray-300 shadow-inner",style:{backgroundColor:S.value}}),e.jsx("span",{children:S.name})]}),c&&e.jsx("div",{className:"flex-1 max-w-[150px]",children:e.jsx("input",{type:"number",min:"0",value:y.colorQuantities[S.name]||"",onChange:w=>{const U=Math.max(0,parseInt(w.target.value)||0);C(H=>({...H,colorQuantities:{...H.colorQuantities,[S.name]:U}}))},className:`w-full px-3 py-1.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors text-sm ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Quantity"})})]},S.name)})}),y.selectedColors.length>0&&e.jsx("div",{className:`mt-4 pt-4 border-t ${a?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:a?"text-gray-400":"text-gray-600",children:"Total Quantity:"}),e.jsx("span",{className:`font-medium ${a?"text-gray-200":"text-gray-900"}`,children:Object.values(y.colorQuantities).reduce((S,c)=>S+c,0)})]})})]})]})]}),e.jsxs(M.div,{variants:T,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-3`,children:"Network & Price"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-3",children:v.filter(S=>S.id===y.network).map(S=>e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-[#FF1B6B] ${a?"bg-pink-900/20":"bg-pink-50"} flex-1 justify-center`,children:[e.jsx("img",{src:S.logo,alt:S.name,className:"w-5 h-5"}),e.jsx("span",{className:`font-medium ${a?"text-gray-200":"text-gray-900"}`,children:S.name})]},S.id))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"price",value:y.price,onChange:z,required:!0,min:"0",step:"0.01",className:`w-full pl-4 pr-24 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"0.00"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-20 border-l ${a?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:y.acceptedToken})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hasDiscount",checked:y.hasDiscount,onChange:S=>{C(c=>({...c,hasDiscount:S.target.checked,discountPercent:S.target.checked?c.discountPercent:0}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasDiscount",className:`text-sm font-medium ${a?"text-gray-200":"text-gray-700"}`,children:"Apply Discount"})]}),y.hasDiscount&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"discountPercent",value:y.discountPercent,onChange:S=>{const c=Math.min(Math.max(0,Number(S.target.value)),99);C(w=>({...w,discountPercent:c,discountedPrice:w.price*(1-c/100)}))},min:"0",max:"99",className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter discount percentage"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-12 border-l ${a?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:"%"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-2`,children:"Discount Ends At"}),e.jsx("input",{type:"datetime-local",name:"discountEndsAt",value:y.discountEndsAt?new Date(y.discountEndsAt).toISOString().substring(0,16):"",onChange:S=>{if(new Date(S.target.value)<=new Date){N.error("Please select a future date and time");return}C(U=>({...U,discountEndsAt:S.target.value}))},min:new Date(new Date().getTime()+6e4).toISOString().slice(0,16),className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`})]}),y.discountPercent>0&&y.price>0&&e.jsxs("div",{className:`${a?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} border rounded-lg p-3`,children:[e.jsxs("p",{className:a?"text-gray-300":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Original Price:"})," ",y.price," ",y.acceptedToken]}),e.jsxs("p",{className:"text-[#FF1B6B] mt-1",children:[e.jsx("span",{className:"font-medium",children:"Discounted Price:"})," ",(y.price*(1-y.discountPercent/100)).toFixed(2)," ",y.acceptedToken]}),e.jsxs("p",{className:`${a?"text-gray-400":"text-gray-500"} mt-1`,children:[e.jsx("span",{className:"font-medium",children:"Savings:"})," ",(y.price*(y.discountPercent/100)).toFixed(2)," ",y.acceptedToken]})]})]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 ${a?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} rounded-lg border mt-2`,children:[e.jsx("img",{src:`/${y.acceptedToken.toLowerCase()}.png`,alt:y.acceptedToken,className:"w-5 h-5 object-contain"}),e.jsxs("p",{className:a?"text-gray-300":"text-gray-700",children:["Buyers will pay in ",e.jsx("span",{className:"font-medium",children:y.acceptedToken})," on ",e.jsx("span",{className:"font-medium",children:v.find(S=>S.id===y.network)?.name||"selected"})]})]})]})]}),e.jsxs("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-3`,children:"Quantity Available"}),e.jsx("input",{type:"number",name:"quantity",value:y.quantity,onChange:z,required:!0,min:"1",className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter available quantity"})]})]}),e.jsxs(M.div,{variants:T,className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-3`,children:"Description *"}),e.jsx("textarea",{name:"description",value:y.description,onChange:z,required:!0,rows:4,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Describe your product..."})]}),e.jsxs(M.div,{variants:T,className:`${a?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${a?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Fee (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`absolute left-3 top-1/2 -translate-y-1/2 ${a?"text-gray-400":"text-gray-500"}`,children:"$"}),e.jsx("input",{type:"number",name:"shippingFee",min:"0",step:"0.01",value:y.shippingFee,disabled:!0,className:`w-full pl-8 pr-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${a?"border-gray-600 bg-gray-700/50 text-gray-400":"border-gray-300 bg-gray-50 text-gray-500"}`,placeholder:"0.00"})]}),e.jsx("p",{className:`mt-1 text-sm ${a?"text-gray-400":"text-gray-500"}`,children:"Shipping fee is set in your store settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${a?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Information"}),e.jsx("input",{type:"text",name:"shippingInfo",value:y.shippingInfo,onChange:z,className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${a?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"e.g., Worldwide shipping available"})]})]})]}),e.jsx(M.div,{variants:T,className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:p,className:`px-8 py-3 rounded-lg font-medium text-white ${p?"bg-gray-400 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"} transition-colors flex items-center gap-2`,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Adding Product..."})]}):"Add Product"})})]})]})]})},Js={USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}},ct=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Ui=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"max-w-5xl mx-auto p-4 space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-32 h-8",children:e.jsx(ct,{})}),e.jsx("div",{className:"w-40 h-10",children:e.jsx(ct,{})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(t=>e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm overflow-hidden`,children:[e.jsx("div",{className:"aspect-square",children:e.jsx(ct,{})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-5",children:e.jsx(ct,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(ct,{})}),e.jsx("div",{className:"w-1/3 h-4",children:e.jsx(ct,{})})]})]},t))})]})},Oi=({images:s})=>{const[t,a]=n.useState(0);return n.useEffect(()=>{if(s.length<=1)return;const o=setInterval(()=>{a(r=>(r+1)%s.length)},3e3);return()=>clearInterval(o)},[s]),e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[e.jsx(At,{initial:!1,children:e.jsx(M.img,{src:s[t],alt:"Product",className:"absolute w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}},t)}),s.length>1&&e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:s.map((o,r)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${r===t?"bg-white":"bg-white/50"}`},r))})]})},qi=({product:s,onConfirm:t,onCancel:a})=>{const{isDarkMode:o}=ne();return e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs(M.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},className:`${o?"bg-gray-800":"bg-white"} rounded-lg p-6 max-w-md w-full`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${o?"text-gray-100":"text-gray-900"}`,children:"Delete Product"}),e.jsx("button",{onClick:a,className:`${o?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-500"}`,children:e.jsx(ht,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.images[0],alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${o?"text-gray-100":"text-gray-900"}`,children:s.name}),e.jsxs("p",{className:`text-sm ${o?"text-gray-400":"text-gray-500"}`,children:["Price: $",s.price]})]})]}),e.jsx("p",{className:`${o?"text-gray-300":"text-gray-600"}`,children:"Are you sure you want to delete this product? This action cannot be undone."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:a,className:`px-4 py-2 ${o?"text-gray-300 bg-gray-700 hover:bg-gray-600":"text-gray-700 bg-gray-100 hover:bg-gray-200"} rounded-lg transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:t,className:"px-4 py-2 text-white bg-red-600 rounded-lg hover:bg-red-700 transition-colors",children:"Delete Product"})]})]})})},Ql=()=>{const s=De(),{user:t}=be(),{isDarkMode:a}=ne(),[o,r]=n.useState([]),[p,g]=n.useState(!0),[i,$]=n.useState(null),[k,j]=n.useState(null);n.useEffect(()=>{t?.sellerId&&Promise.all([C(),y()])},[t]);const y=async()=>{try{const A=await oe(te(O,"sellers",t.sellerId));A.exists()&&j(A.data())}catch(A){console.error("Error fetching seller preferences:",A)}},C=async()=>{try{const A=de(re(O,"products"),ie("sellerId","==",t.sellerId)),m=(await ge(A)).docs.map(d=>{const b=d.data();return!b.acceptedToken&&k?.preferredToken&&(b.acceptedToken=k.preferredToken,b.tokenLogo=Js[k.preferredToken].logo),{id:d.id,...b}});r(m)}catch(A){console.error("Error fetching products:",A),N.error("Failed to load products")}finally{g(!1)}},P=async A=>{$(A)},B=async()=>{try{await jt(te(O,"products",i.id));const A=i.images.map(async x=>{const m=Ct($t,x);return ma(m)});await Promise.all(A),r(x=>x.filter(m=>m.id!==i.id)),N.success("Product deleted successfully")}catch(A){console.error("Error deleting product:",A),N.error("Failed to delete product")}finally{$(null)}},v={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},I={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return p?e.jsx(Ui,{}):e.jsxs(e.Fragment,{children:[e.jsxs(M.div,{className:`max-w-5xl mx-auto p-4 ${a?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:v,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx(M.h1,{className:`text-xl font-bold ${a?"text-gray-100":"text-gray-800"}`,variants:I,children:"My Products"}),e.jsx(M.div,{variants:I,children:e.jsxs(ve,{to:"/merch-store/add-product",className:"flex items-center gap-2 px-3 py-1.5 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:[e.jsx(hs,{className:"text-lg"}),"Add New Product"]})})]}),o.length===0?e.jsxs(M.div,{className:`text-center py-8 ${a?"text-gray-400":"text-gray-500"}`,variants:I,children:[e.jsx("p",{className:"mb-4",children:"You haven't added any products yet."}),e.jsx(ve,{to:"/merch-store/add-product",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Add your first product"})]}):e.jsx(M.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",variants:v,children:o.map(A=>e.jsxs(M.div,{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm overflow-hidden`,variants:I,whileHover:{y:-3},children:[e.jsxs("div",{className:"aspect-square relative group",children:[e.jsx(Oi,{images:A.images}),e.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-3",children:[e.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-1.5 bg-white text-gray-800 rounded-full",onClick:()=>s(`/merch-store/edit-product/${A.id}`),children:e.jsx(La,{className:"text-lg"})}),e.jsx(M.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-1.5 bg-white text-red-500 rounded-full",onClick:()=>P(A),children:e.jsx(bt,{className:"text-lg"})})]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:`font-medium ${a?"text-gray-100":"text-gray-800"} text-sm mb-0.5 truncate`,children:A.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:A.tokenLogo||Js[A.acceptedToken]?.logo,alt:A.acceptedToken,className:"w-5 h-5"}),e.jsxs("p",{className:"text-[#FF1B6B] font-medium text-sm",children:["$",A.price.toFixed(2)]})]}),e.jsxs("p",{className:`text-xs ${a?"text-gray-400":"text-gray-500"}`,children:["Stock: ",A.quantity]})]})]},A.id))})]}),e.jsx(At,{children:i&&e.jsx(qi,{product:i,onConfirm:B,onCancel:()=>$(null)})})]})},Wi=`
  :root {
    color-scheme: light;
  }
  
  .dark input[type="datetime-local"] {
    color-scheme: dark;
    background-color: #1a1b1f !important;
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: invert(1) !important;
    opacity: 0.7;
  }

  .dark input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit {
    color: #fff !important;
  }

  .dark input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #fff !important;
  }

  input[type="datetime-local"] {
    color-scheme: light !important;
    background-color: white !important;
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator {
    filter: none !important;
    color: #1F2937 !important;
    opacity: 0.7;
  }

  input[type="datetime-local"]::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
  }

  input[type="datetime-local"]::-webkit-datetime-edit {
    color: #1F2937 !important;
  }

  input[type="datetime-local"]::-webkit-datetime-edit-fields-wrapper {
    color: #1F2937 !important;
  }

  /* Style the checkbox */
  input[type="checkbox"] {
    accent-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:checked {
    background-color: #FF1B6B !important;
    border-color: #FF1B6B !important;
  }

  input[type="checkbox"]:focus {
    box-shadow: 0 0 0 2px rgba(255, 27, 107, 0.3) !important;
  }
`,Ks={polygon:{name:"Polygon",logo:"/polygon.png",tokens:{USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}}},unichain:{name:"Unichain",logo:"/unichain-logo.png",tokens:{USDT:{logo:"/logos/usdt.png",name:"USDT (Tether)",decimals:6},USDC:{logo:"/logos/usdc.png",name:"USDC (USD Coin)",decimals:6}}}},Hi=["US 6 / EU 39","US 6.5 / EU 39.5","US 7 / EU 40","US 7.5 / EU 40.5","US 8 / EU 41","US 8.5 / EU 41.5","US 9 / EU 42","US 9.5 / EU 42.5","US 10 / EU 43","US 10.5 / EU 43.5","US 11 / EU 44","US 11.5 / EU 44.5","US 12 / EU 45","US 13 / EU 46"],Jl=()=>{const{user:s}=be(),t=De(),{id:a}=Kt(),{isDarkMode:o}=ne(),[r,p]=n.useState(!0),[g,i]=n.useState(!1),[$,k]=n.useState(!1),[j,y]=n.useState(null),[C,P]=n.useState(!1),B={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},[v,I]=n.useState({name:"",description:"",price:"",quantity:"",category:"",subCategory:"",images:[],network:"polygon",acceptedToken:"USDT",tokenLogo:"/logos/usdt.png",shippingFee:0,shippingInfo:"",hasVariants:!1,sizes:[],colors:[],colorQuantities:{},hasDiscount:!1,discountPercent:0}),A={"Men's Wear":["T-Shirts","Shirts","Pants","Hoodies","Jackets","Suits"],"Women's Wear":["Dresses","Tops","Skirts","Pants","Blouses","Jackets"],Footwear:["Sneakers","Formal Shoes","Boots","Sandals","Slippers"]},x={"Fashion Accessories":["Bags","Belts","Hats","Scarves","Jewelry"],"Tech Accessories":["Phone Cases","Laptop Bags","Headphone Cases","Tablet Covers","Chargers","Headphones","Speakers","MP3 Players","Sound Systems","Audio Cables"]};n.useEffect(()=>{m()},[a]),n.useEffect(()=>{if(j){const u=JSON.stringify(j)!==JSON.stringify(v);P(u)}},[v,j]);const m=async()=>{try{const u=await oe(te(O,"products",a));if(u.exists()){const F=u.data();if(F.sellerId!==s.sellerId){N.error("You do not have permission to edit this product"),t("/merch-store/products");return}const l=await oe(te(O,"sellers",s.sellerId));if(l.exists()){const L=l.data();if(!L.preferredNetwork){N.error("Please set your preferred network in settings first"),t("/merch-store/settings");return}F.network=L.preferredNetwork,F.acceptedToken=L.preferredToken,F.shippingFee=L.shippingFee||0}const E={...F,hasVariants:F.hasVariants||!1,sizes:F.sizes||[],colors:F.colors||[],colorQuantities:F.colorQuantities||{}};I(E),y(E)}else N.error("Product not found"),t("/merch-store/products")}catch(u){console.error("Error fetching product:",u),N.error("Failed to load product")}finally{p(!1)}},d=u=>{const{name:F,value:l}=u.target;I(F==="category"?E=>({...E,category:l,subCategory:"",hasVariants:!1,sizes:[],colors:[]}):E=>({...E,[F]:l}))},b=(u,F)=>{I(l=>({...l,subCategory:`${u} - ${F}`}))},h=async u=>{const F=Array.from(u.target.files);if(F.length+v.images.length>5){N.error("Maximum 5 images allowed");return}k(!0);try{const l=F.map(async L=>{if(L.size>2097152)throw new Error("Each image must be less than 2MB");const f=Ct($t,`products/${s.sellerId}/${a}/${L.name}`);return await ys(f,L),fs(f)}),E=await Promise.all(l);I(L=>({...L,images:[...L.images,...E]})),N.success("Images uploaded successfully")}catch(l){console.error("Error uploading images:",l),N.error(l.message||"Failed to upload images")}finally{k(!1)}},D=async(u,F)=>{try{const l=Ct($t,u);await ma(l),I(E=>({...E,images:E.images.filter((L,f)=>f!==F)})),N.success("Image removed successfully")}catch(l){console.error("Error removing image:",l),N.error("Failed to remove image")}},V=async u=>{u.preventDefault(),i(!0);try{if(!v.name||!v.description||!v.price){N.error("Please fill in all required fields"),i(!1);return}if(!v.images||v.images.length===0){N.error("Please upload at least one product image"),i(!1);return}if(z()&&v.hasVariants&&(!v.sizes||v.sizes.length===0)){N.error("Please select at least one size for footwear"),i(!1);return}let F=null;v.hasDiscount&&v.discountPercent&&(F=v.price*(1-v.discountPercent/100));const l={name:v.name,description:v.description,price:parseFloat(v.price),category:v.category,subCategory:v.subCategory,images:v.images,hasVariants:v.hasVariants,hasDiscount:v.hasDiscount,discountPercent:v.hasDiscount?parseFloat(v.discountPercent):null,discountEndsAt:v.hasDiscount?new Date(v.discountEndsAt).toISOString():null,discountedPrice:F,updatedAt:ue()};v.hasVariants&&(l.sizes=v.sizes,l.colors=v.colors,l.colorQuantities=v.colorQuantities),Object.keys(l).forEach(L=>{(l[L]===null||l[L]===void 0)&&delete l[L]});const E=te(O,"products",a);await xe(E,l),N.success("Product updated successfully"),t(`/merch-store/product/${a}`)}catch(F){console.error("Error updating product:",F),N.error("Failed to update product. Please try again.")}finally{i(!1)}},z=()=>v.subCategory&&v.subCategory.split(" - ")[0]==="Footwear";return r?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(M.div,{className:"w-6 h-6 border-2 border-[#FF1B6B] border-t-transparent rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}):e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-4xl mx-auto p-6 ${o?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("style",{children:Wi}),e.jsxs("div",{className:`${o?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm p-6`,children:[e.jsxs(M.div,{children:[e.jsx("h1",{className:`text-2xl font-bold ${o?"text-gray-100":"text-gray-800"} mb-2`,children:"Edit Product"}),e.jsx("p",{className:`${o?"text-gray-400":"text-gray-500"} text-sm mb-6`,children:"Update your product details and listing information"})]}),e.jsxs("form",{onSubmit:V,className:"space-y-8",children:[e.jsxs("div",{className:`${o?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsxs("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-4`,children:["Product Images (",v.images.length,"/5)"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[v.images.map((u,F)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden group bg-white",children:[e.jsx("img",{src:u,alt:`Product ${F+1}`,className:"w-full h-full object-cover"}),e.jsx(M.button,{type:"button",onClick:()=>D(u,F),className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(bt,{size:16})})]},F)),v.images.length<5&&e.jsxs(M.label,{className:`aspect-square rounded-lg border-2 border-dashed ${o?"border-gray-600 hover:border-[#FF1B6B]":"border-gray-300 hover:border-[#FF1B6B]"} flex flex-col items-center justify-center cursor-pointer transition-colors ${o?"bg-gray-800":"bg-white"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(_a,{className:"w-8 h-8 text-gray-400"}),e.jsx("span",{className:`text-sm ${o?"text-gray-400":"text-gray-500"} mt-2`,children:"Add Image"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:h,className:"hidden",disabled:$})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-1`,children:"Product Name *"}),e.jsx("input",{type:"text",name:"name",value:v.name,onChange:d,required:!0,className:`w-full px-4 py-2.5 border ${o?"border-gray-600 bg-gray-700 text-white focus:border-[#FF1B6B]":"border-gray-300 bg-white text-gray-900 focus:border-[#FF1B6B]"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors`,placeholder:"Enter product name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-1`,children:"Category *"}),e.jsxs("select",{name:"category",value:v.category,onChange:d,required:!0,className:`w-full px-4 py-2.5 border ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"} rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors appearance-none`,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"clothing",children:"Clothing"}),e.jsx("option",{value:"accessories",children:"Accessories"}),e.jsx("option",{value:"electronics",children:"Electronics"}),e.jsx("option",{value:"home",children:"Home"}),e.jsx("option",{value:"art",children:"Art"}),e.jsx("option",{value:"collectibles",children:"Collectibles"})]})]})]}),(v.category==="clothing"||v.category==="accessories")&&e.jsxs(M.div,{variants:B,className:`${o?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-4`,children:"Product Type *"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:Object.entries(v.category==="clothing"?A:x).map(([u,F])=>e.jsxs("div",{className:`${o?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${o?"text-gray-100":"text-gray-900"} mb-3`,children:u}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:F.map(l=>e.jsx("button",{type:"button",onClick:()=>b(u,l),className:`px-3 py-2 rounded-lg text-sm font-medium transition-colors text-left ${v.subCategory===`${u} - ${l}`?"bg-[#FF1B6B] text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:l},l))})]},u))}),e.jsxs("div",{className:`${o?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("h3",{className:`font-medium ${o?"text-gray-100":"text-gray-900"} mb-3`,children:"Selected Category"}),v.subCategory?e.jsxs("div",{className:`${o?"bg-pink-900/20":"bg-pink-50"} border ${o?"border-pink-900/20":"border-pink-100"} rounded-lg p-4`,children:[e.jsxs("p",{className:o?"text-gray-200":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Main Category:"})," ",v.subCategory.split(" - ")[0]]}),e.jsxs("p",{className:`${o?"text-gray-200":"text-gray-700"} mt-2`,children:[e.jsx("span",{className:"font-medium",children:"Sub Category:"})," ",v.subCategory.split(" - ")[1]]})]}):e.jsx("div",{className:`${o?"bg-gray-700/50 border-gray-600 text-gray-400":"bg-gray-50 border-gray-100 text-gray-500"} border rounded-lg p-4`,children:"Please select a category from the left"})]})]})]}),e.jsxs("div",{className:`${o?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-3`,children:"Description *"}),e.jsx("textarea",{name:"description",value:v.description,onChange:d,required:!0,rows:4,className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Describe your product..."})]})]}),e.jsxs(M.div,{variants:B,className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${o?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-3`,children:"Network & Price"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-3",children:Object.entries(Ks).filter(([u])=>u===v.network).map(([u,F])=>e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-[#FF1B6B] ${o?"bg-pink-900/20":"bg-pink-50"} flex-1 justify-center`,children:[e.jsx("img",{src:F.logo,alt:F.name,className:"w-5 h-5"}),e.jsx("span",{className:`font-medium ${o?"text-gray-200":"text-gray-900"}`,children:F.name})]},u))}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"price",value:v.price,onChange:d,required:!0,min:"0",step:"0.01",className:`w-full pl-4 pr-24 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"0.00"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-20 border-l ${o?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:v.acceptedToken})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hasDiscount",checked:v.hasDiscount,onChange:u=>{I(F=>({...F,hasDiscount:u.target.checked,discountPercent:u.target.checked?F.discountPercent:0}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasDiscount",className:`text-sm font-medium ${o?"text-gray-200":"text-gray-700"}`,children:"Apply Discount"})]}),v.hasDiscount&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"discountPercent",value:v.discountPercent,onChange:u=>{const F=Math.min(Math.max(0,Number(u.target.value)),99);I(l=>({...l,discountPercent:F,discountedPrice:l.price*(1-F/100)}))},min:"0",max:"99",className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter discount percentage"}),e.jsx("div",{className:`absolute right-0 top-0 bottom-0 w-12 border-l ${o?"border-gray-600 bg-gray-600 text-gray-200":"border-gray-300 bg-gray-50 text-gray-700"} text-sm rounded-r-lg flex items-center justify-center`,children:"%"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-2`,children:"Discount Ends At"}),e.jsx("input",{type:"datetime-local",name:"discountEndsAt",value:v.discountEndsAt?new Date(v.discountEndsAt).toISOString().slice(0,16):"",onChange:u=>{const F=new Date(u.target.value);if(F<=new Date){N.error("Please select a future date and time");return}I(E=>({...E,discountEndsAt:F.toISOString()}))},min:new Date(new Date().getTime()+6e4).toISOString().slice(0,16),className:`w-full pl-4 pr-12 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`})]}),v.discountPercent>0&&v.price>0&&e.jsxs("div",{className:`${o?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} border rounded-lg p-3`,children:[e.jsxs("p",{className:o?"text-gray-300":"text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Original Price:"})," ",v.price," ",v.acceptedToken]}),e.jsxs("p",{className:"text-[#FF1B6B] mt-1",children:[e.jsx("span",{className:"font-medium",children:"Discounted Price:"})," ",(v.price*(1-v.discountPercent/100)).toFixed(2)," ",v.acceptedToken]}),e.jsxs("p",{className:`${o?"text-gray-400":"text-gray-500"} mt-1`,children:[e.jsx("span",{className:"font-medium",children:"Savings:"})," ",(v.price*(v.discountPercent/100)).toFixed(2)," ",v.acceptedToken]})]})]})]}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 ${o?"bg-pink-900/20 border-pink-900/20":"bg-pink-50 border-pink-100"} rounded-lg border mt-2`,children:[e.jsx("img",{src:`/${v.acceptedToken.toLowerCase()}.png`,alt:v.acceptedToken,className:"w-5 h-5 object-contain"}),e.jsxs("p",{className:o?"text-gray-300":"text-gray-700",children:["Buyers will pay in ",e.jsx("span",{className:"font-medium",children:v.acceptedToken})," on ",e.jsx("span",{className:"font-medium",children:Ks[v.network]?.name||"selected"})]})]})]})]}),e.jsxs("div",{className:`${o?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-3`,children:"Quantity Available"}),e.jsx("input",{type:"number",name:"quantity",value:v.quantity,onChange:d,required:!0,min:"1",className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Enter available quantity"})]})]}),(v.category==="clothing"||v.category==="accessories")&&e.jsxs("div",{className:`${o?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"hasVariants",name:"hasVariants",checked:v.hasVariants,onChange:u=>{I(F=>({...F,hasVariants:u.target.checked,sizes:u.target.checked?F.sizes:[],colors:u.target.checked?F.colors:[]}))},className:"h-4 w-4 rounded border-gray-300 text-[#FF1B6B] focus:ring-[#FF1B6B]"}),e.jsx("label",{htmlFor:"hasVariants",className:`ml-2 text-sm font-medium ${o?"text-gray-200":"text-gray-700"}`,children:"This product has size and color variants"})]}),v.hasVariants&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`${o?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z()?Hi.map(u=>e.jsx("button",{type:"button",onClick:()=>{I(F=>({...F,sizes:F.sizes.includes(u)?F.sizes.filter(l=>l!==u):[...F.sizes,u]}))},className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${v.sizes.includes(u)?"bg-[#FF1B6B] text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:u},u)):["XS","S","M","L","XL","2XL","3XL"].map(u=>e.jsx("button",{type:"button",onClick:()=>{I(F=>({...F,sizes:F.sizes.includes(u)?F.sizes.filter(l=>l!==u):[...F.sizes,u]}))},className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${v.sizes.includes(u)?"bg-[#FF1B6B] text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:u},u))})]}),e.jsxs("div",{className:`${o?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-3`,children:"Available Colors & Quantities"}),e.jsx("div",{className:"space-y-4",children:[{name:"Black",code:"#000000"},{name:"White",code:"#FFFFFF"},{name:"Gray",code:"#808080"},{name:"Red",code:"#FF0000"},{name:"Blue",code:"#0000FF"},{name:"Green",code:"#008000"},{name:"Yellow",code:"#FFFF00"},{name:"Purple",code:"#800080"},{name:"Pink",code:"#FFC0CB"},{name:"Brown",code:"#A52A2A"}].map(u=>{const F=v.colors.includes(u.name);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{const l=v.colors.includes(u.name)?v.colors.filter(L=>L!==u.name):[...v.colors,u.name],E={...v.colorQuantities};l.includes(u.name)||delete E[u.name],I(L=>({...L,colors:l,colorQuantities:E}))},className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${F?"bg-[#FF1B6B] text-white":o?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx("span",{className:"h-4 w-4 rounded-full border border-gray-300 shadow-inner",style:{backgroundColor:u.code}}),e.jsx("span",{children:u.name})]}),F&&e.jsx("div",{className:"flex-1 max-w-[150px]",children:e.jsx("input",{type:"number",min:"0",value:v.colorQuantities[u.name]||"",onChange:l=>{const E=Math.max(0,parseInt(l.target.value)||0);I(L=>({...L,colorQuantities:{...L.colorQuantities,[u.name]:E}}))},className:`w-full px-3 py-1.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors text-sm ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"Quantity"})})]},u.name)})}),v.colors.length>0&&e.jsx("div",{className:`mt-4 pt-4 border-t ${o?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:o?"text-gray-400":"text-gray-600",children:"Total Quantity:"}),e.jsx("span",{className:`font-medium ${o?"text-gray-200":"text-gray-900"}`,children:Object.values(v.colorQuantities).reduce((u,F)=>u+F,0)})]})})]})]})]}),e.jsxs(M.div,{variants:B,className:`${o?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${o?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Fee (USD)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:`absolute left-3 top-1/2 -translate-y-1/2 ${o?"text-gray-400":"text-gray-500"}`,children:"$"}),e.jsx("input",{type:"number",name:"shippingFee",min:"0",step:"0.01",value:v.shippingFee,disabled:!0,className:`w-full pl-8 pr-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${o?"border-gray-600 bg-gray-700/50 text-gray-400":"border-gray-300 bg-gray-50 text-gray-500"}`,placeholder:"0.00"})]}),e.jsx("p",{className:`mt-1 text-sm ${o?"text-gray-400":"text-gray-500"}`,children:"Shipping fee is set in your store settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${o?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Information"}),e.jsx("input",{type:"text",name:"shippingInfo",value:v.shippingInfo,onChange:d,className:`w-full px-4 py-2.5 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] transition-colors ${o?"border-gray-600 bg-gray-700 text-white":"border-gray-300 bg-white text-gray-900"}`,placeholder:"e.g., Worldwide shipping available"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>t("/merch-store/products"),className:`px-8 py-3 border-2 ${o?"border-gray-600 text-gray-300 hover:bg-gray-700":"border-gray-300 text-gray-700 hover:bg-gray-50"} rounded-lg transition-colors`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||$||!C,className:`px-8 py-3 rounded-lg font-medium text-white ${g||$||!C?"bg-gray-400 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"} transition-colors flex items-center gap-2`,children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Updating Product..."})]}):$?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),e.jsx("span",{children:"Saving Changes..."})]}):"Save Changes"})]})]})]})]})};_r.register(Ur,Or,qr,Wr,Hr,Vr,zr,Yr,Gr);const Lt=({title:s,value:t,icon:a,trend:o,subtitle:r,secondaryValue:p,withdrawals:g})=>{const{isDarkMode:i}=ne();return e.jsx(M.div,{whileHover:{y:-3},className:`${i?"bg-gray-800":"bg-white"} p-4 rounded-2xl shadow-sm relative group`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:`text-sm ${i?"text-gray-400":"text-gray-500"}`,children:s}),e.jsx("p",{className:`text-xl font-bold ${i?"text-gray-100":"text-gray-900"} mt-1`,children:t}),o&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ra,{className:"text-emerald-500 w-4 h-4"}),e.jsxs("span",{className:"text-xs text-emerald-500",children:[o,"% from last month"]})]}),p&&e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Refunds: ",p]}),r&&e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:`text-xs ${i?"text-gray-400":"text-gray-500"} mt-1 cursor-help`,children:r}),g&&e.jsxs("div",{className:`absolute left-0 bottom-full mb-2 w-48 ${i?"bg-gray-700":"bg-white"} rounded-lg shadow-lg p-3 text-sm opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10`,children:[e.jsx("h4",{className:`font-medium mb-2 ${i?"text-gray-200":"text-gray-900"}`,children:"Withdrawals"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:i?"text-gray-300":"text-gray-700",children:"Completed:"}),e.jsxs("span",{className:`font-medium ${i?"text-gray-200":"text-gray-900"}`,children:["$",g.completed.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-orange-600",children:[e.jsx("span",{children:"Pending:"}),e.jsxs("span",{className:"font-medium",children:["$",g.pending.toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-medium pt-1 border-t ${i?"border-gray-600":"border-gray-200"}`,children:[e.jsx("span",{className:i?"text-gray-200":"text-gray-900",children:"Total:"}),e.jsxs("span",{className:i?"text-gray-200":"text-gray-900",children:["$",(g.completed+g.pending).toFixed(2)]})]})]})]})]})]}),e.jsx("div",{className:`p-2 ${i?"bg-pink-900/20":"bg-pink-50"} rounded-lg`,children:e.jsx(a,{className:"w-5 h-5 text-[#FF1B6B]"})})]})})},$e=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Vi=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-8",children:e.jsx($e,{})}),e.jsx("div",{className:"w-64 h-5",children:e.jsx($e,{})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx($e,{})}),e.jsx("div",{className:"w-40 h-8",children:e.jsx($e,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx($e,{})})]}),e.jsx("div",{className:"w-12 h-12",children:e.jsx($e,{})})]})},t))}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl p-6 shadow-sm`,children:[e.jsx("div",{className:"w-48 h-6 mb-4",children:e.jsx($e,{})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:`text-left border-b ${s?"border-gray-700":"border-gray-200"}`,children:["Order ID","Customer","Products","Total","Date","Status"].map(t=>e.jsx("th",{className:"pb-3",children:e.jsx("div",{className:"w-24 h-4",children:e.jsx($e,{})})},t))})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-700":"divide-gray-200"}`,children:[1,2,3,4,5].map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-20 h-5",children:e.jsx($e,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-32 h-5",children:e.jsx($e,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-24 h-5",children:e.jsx($e,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-24 h-5",children:e.jsx($e,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-32 h-5",children:e.jsx($e,{})})}),e.jsx("td",{className:"py-3",children:e.jsx("div",{className:"w-20 h-6",children:e.jsx($e,{})})})]},t))})]})})]})]})},zi=({orders:s})=>{const{isDarkMode:t}=ne(),a=s.reduce((i,$)=>($.items.forEach(k=>{i[k.name]||(i[k.name]=0),i[k.name]++}),i),{}),o=Object.entries(a).sort(([,i],[,$])=>$-i).slice(0,4),r={labels:o.map(([i])=>i),datasets:[{data:o.map(([,i])=>i),backgroundColor:["rgba(255, 99, 132, 0.9)","rgba(99, 102, 241, 0.9)","rgba(245, 158, 11, 0.9)","rgba(16, 185, 129, 0.9)"],borderWidth:0,borderRadius:2,spacing:2}]},p={cutout:"85%",plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:t?"#374151":"white",titleColor:t?"#F3F4F6":"#111827",bodyColor:t?"#F3F4F6":"#111827",borderColor:t?"#4B5563":"#E5E7EB",borderWidth:1,padding:12,boxPadding:6,usePointStyle:!0,callbacks:{label:function(i){return`${i.label}: ${i.raw} sold`}}}},maintainAspectRatio:!1,layout:{padding:0}},g=o.reduce((i,[,$])=>i+$,0);return e.jsxs("div",{className:`relative h-[140px] ${t?"bg-gray-800":"bg-white"} rounded-lg p-2`,children:[e.jsx("div",{className:"h-[100px]",children:e.jsx(qa,{data:r,options:p})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:g}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:"Total"})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 px-2",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:o.map(([i,$],k)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:r.datasets[0].backgroundColor[k]}}),e.jsx("span",{className:`text-[10px] ${t?"text-gray-300":"text-gray-600"} truncate max-w-[60px]`,title:i,children:i})]},i))})})]})},Yi=({orders:s,isDarkMode:t})=>{const a=s.reduce((r,p)=>(p.items.forEach(g=>{r[g.name]||(r[g.name]={count:0,price:g.price,image:g.image}),r[g.name].count++}),r),{}),o=Object.entries(a).sort(([,r],[,p])=>p.count-r.count).slice(0,3);return e.jsx("div",{className:"space-y-2",children:o.map(([r,p])=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p.image&&e.jsx("img",{src:p.image,alt:r,className:"w-6 h-6 rounded object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:`text-xs font-medium ${t?"text-gray-200":"text-gray-900"} truncate max-w-[120px]`,title:r,children:r}),e.jsxs("p",{className:`text-[10px] ${t?"text-gray-400":"text-gray-500"}`,children:[p.count," sold"]})]})]}),e.jsxs("span",{className:`text-xs font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["$",p.price]})]},r))})},fa=({currentPage:s,totalPages:t,onPageChange:a})=>e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-3",children:[e.jsx("button",{onClick:()=>a(s-1),disabled:s===1,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:""}),[...Array(t)].map((o,r)=>e.jsx("button",{onClick:()=>a(r+1),className:`w-6 h-6 text-xs rounded-full ${s===r+1?"bg-pink-100 text-pink-600":"text-gray-500 hover:bg-gray-100"}`,children:r+1},r+1)),e.jsx("button",{onClick:()=>a(s+1),disabled:s===t,className:"p-1 text-gray-500 hover:text-gray-700 disabled:opacity-50",children:""})]}),Gi=({orders:s,isDarkMode:t})=>{const[a,o]=n.useState(1),r=4,p=s.reduce((y,C)=>(C.items.forEach(P=>{(!y[P.name]||new Date(C.createdAt.toDate())>new Date(y[P.name].soldDate))&&(y[P.name]={name:P.name,price:P.price,image:P.image,soldDate:C.createdAt.toDate()})}),y),{}),g=Object.values(p).sort((y,C)=>C.soldDate-y.soldDate),i=Math.ceil(g.length/r),$=a*r,k=$-r,j=g.slice(k,$);return e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:j.map((y,C)=>e.jsxs("div",{className:`${t?"bg-gray-700/50":"bg-gray-50"} rounded-lg p-2 flex items-center gap-2`,children:[e.jsx("img",{src:y.image,alt:y.name,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:`text-xs font-medium ${t?"text-gray-200":"text-gray-900"} truncate`,title:y.name,children:y.name}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:`text-[11px] ${t?"text-gray-400":"text-gray-500"}`,children:new Date(y.soldDate).toLocaleDateString()}),e.jsxs("span",{className:`text-[11px] font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["$",y.price]})]})]})]},C))}),i>1&&e.jsx(fa,{currentPage:a,totalPages:i,onPageChange:o})]})},Kl=()=>{const{user:s}=be(),{isDarkMode:t}=ne(),[a,o]=n.useState(!0),[r,p]=n.useState({totalRevenue:0,totalOrders:0,totalCustomers:0,recentOrders:[],allOrders:[],allTimeRevenue:0,totalWithdrawn:0,pendingWithdrawals:0}),[g,i]=n.useState(1),$=50,[k,j]=n.useState({labels:[],datasets:[]}),[y,C]=n.useState("Monthly");n.useState([25,30,20,25]);const P={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:t?"#374151":"white",titleColor:t?"#F3F4F6":"#111827",bodyColor:t?"#F3F4F6":"#111827",borderColor:t?"#4B5563":"#E5E7EB",borderWidth:1,padding:12,boxPadding:6,usePointStyle:!0,callbacks:{label:function(d){return`$${d.parsed.y.toFixed(2)}`}}}},scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{font:{size:11},color:t?"#9CA3AF":"#6B7280"}},y:{beginAtZero:!0,grid:{color:t?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.05)",drawBorder:!1},ticks:{font:{size:11},color:t?"#9CA3AF":"#6B7280",callback:function(d){return d>=1e3?"$"+d/1e3+"k":"$"+d}}}},elements:{line:{tension:.4},point:{radius:0}}};n.useEffect(()=>{s&&B()},[s,y]);const B=async()=>{try{const d=new Date,b=new Date(d.getFullYear(),d.getMonth(),1),h=new Date(d.getFullYear(),d.getMonth()-1,1),D=new Date(d.getFullYear(),d.getMonth(),0),V=de(re(O,"orders"),ie("sellerId","==",s.sellerId),ye("createdAt","desc")),z=de(re(O,"withdrawals"),ie("sellerId","==",s.sellerId)),[u,F]=await Promise.all([ge(V),ge(z)]),l=u.docs.map(W=>({id:W.id,...W.data()})),E=l.filter(W=>W.createdAt?.toDate()>=b),L=l.filter(W=>{const Z=W.createdAt?.toDate();return Z>=h&&Z<=D}),f=E.reduce((W,Z)=>Z.status!=="cancelled"&&Z.status!=="refunded"?W+(Z.total||0):W,0),q=L.reduce((W,Z)=>Z.status!=="cancelled"&&Z.status!=="refunded"?W+(Z.total||0):W,0),G=new Set(E.map(W=>W.buyerId)).size,T=new Set(L.map(W=>W.buyerId)).size,S=(W,Z)=>Z===0?W>0?100:0:(W-Z)/Z*100,c=S(f,q),w=S(E.length,L.length),U=S(G,T),H=F.docs.reduce((W,Z)=>{const le=Z.data();return le.status==="completed"?W.completed+=le.amount||0:le.status==="pending"&&(W.pending+=le.amount||0),W},{completed:0,pending:0}),K=l.filter(W=>W.status!=="cancelled"),_=K.reduce((W,Z)=>Z.status==="refunded"?W:W+Z.total,0),ee=K.reduce((W,Z)=>Z.status==="refunded"?W+Z.total:W,0),Y=new Set(K.map(W=>W.buyerId)).size,Q=_,R=Math.max(0,_-H.completed),J=[],se=[];if(y==="Monthly")for(let W=29;W>=0;W--){const Z=new Date(d);Z.setDate(Z.getDate()-W),J.push(Z.toLocaleDateString("default",{month:"short",day:"numeric"}));const le=l.reduce((me,X)=>{const ae=X.createdAt?.toDate();return ae&&ae.getDate()===Z.getDate()&&ae.getMonth()===Z.getMonth()&&ae.getFullYear()===Z.getFullYear()&&X.status!=="cancelled"&&X.status!=="refunded"?me+(X.total||0):me},0);se.push(le)}else for(let W=6;W>=0;W--){const Z=new Date(d);Z.setDate(Z.getDate()-W),J.push(Z.toLocaleDateString("default",{weekday:"short"}));const le=l.reduce((me,X)=>{const ae=X.createdAt?.toDate();return ae&&ae.getDate()===Z.getDate()&&ae.getMonth()===Z.getMonth()&&ae.getFullYear()===Z.getFullYear()&&X.status!=="cancelled"&&X.status!=="refunded"?me+(X.total||0):me},0);se.push(le)}j({labels:J,datasets:[{data:se,fill:!0,backgroundColor:"rgba(255, 27, 107, 0.1)",borderColor:"rgb(255, 27, 107)",pointRadius:0,pointHoverRadius:4,pointHoverBackgroundColor:"rgb(255, 27, 107)",pointHoverBorderColor:"white",pointHoverBorderWidth:2}]}),p({totalRevenue:R,grossRevenue:_,totalRefunds:ee,totalOrders:l.length,totalCustomers:Y,recentOrders:l.slice(0,5),allOrders:l,allTimeRevenue:Q,totalWithdrawn:H.completed,pendingWithdrawals:H.pending,revenueChange:parseFloat(c.toFixed(1)),ordersChange:parseFloat(w.toFixed(1)),customersChange:parseFloat(U.toFixed(1))})}catch(d){console.error("Error fetching sales data:",d),N.error("Failed to load sales data")}finally{o(!1)}},v=g*$,I=v-$,A=r.allOrders.slice(I,v);Math.ceil(r.allOrders.length/$);const x=d=>i(d),m=()=>{try{const d=r.allOrders.map(D=>({"Order ID":D.id,Product:D.items.map(V=>V.name).join(", "),Customer:D.buyerInfo?.name||"Anonymous",Price:D.total,Date:new Date(D.createdAt?.toDate()).toLocaleDateString(),Status:D.status})),b=ts.json_to_sheet(d),h=ts.book_new();ts.book_append_sheet(h,b,"Sales Data"),Qr(h,"sales_data.xlsx"),N.success("Sales data exported successfully")}catch(d){console.error("Error exporting data:",d),N.error("Failed to export sales data")}};return a?e.jsx(Vi,{}):e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:`relative h-screen flex flex-col ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Sales Overview"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:"Monitor your store's performance"})]}),e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:[e.jsx(Ua,{className:"w-5 h-5"}),e.jsx("span",{children:"Export Sales"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:`lg:col-span-2 ${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-4`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Total Revenue"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:["$",r.grossRevenue.toFixed(2)]}),r.revenueChange>0&&e.jsxs("span",{className:"text-sm px-2 py-1 bg-green-100 text-green-600 rounded-full",children:[" ",r.revenueChange,"%"]})]}),e.jsxs("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} mt-1`,children:["Gained $",r.grossRevenue-(r.lastMonthRevenue||0)," this month"]})]}),e.jsxs("select",{value:y,onChange:d=>C(d.target.value),className:`px-3 py-1.5 text-sm border rounded-lg ${t?"border-gray-600 bg-gray-700 text-gray-200":"border-gray-200 bg-white text-gray-700"}`,children:[e.jsx("option",{children:"Monthly"}),e.jsx("option",{children:"Weekly"})]})]}),e.jsx("div",{className:"h-[200px]",children:e.jsx(Oa,{data:k,options:P})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm p-4`,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:`text-sm font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Products Sold"}),e.jsx("div",{className:"h-[140px]",children:e.jsx(zi,{orders:r.allOrders})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:`text-sm font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Top Products"}),e.jsx("button",{className:`text-xs ${t?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:"See all"})]}),e.jsx(Yi,{orders:r.allOrders,isDarkMode:t})]})]}),e.jsx(Gi,{orders:r.allOrders,isDarkMode:t})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Lt,{title:"All Time Revenue",value:`$${r.allTimeRevenue.toFixed(2)}`,icon:Vt,subtitle:`Withdrawn: $${r.totalWithdrawn.toFixed(2)}`,withdrawals:{completed:r.totalWithdrawn,pending:r.pendingWithdrawals}}),e.jsx(Lt,{title:"Net Revenue",value:`$${r.totalRevenue.toFixed(2)}`,icon:Vt,trend:r.revenueChange,secondaryValue:r.totalRefunds>0?`$${r.totalRefunds.toFixed(2)}`:void 0}),e.jsx(Lt,{title:"Total Orders",value:r.totalOrders,icon:Bt,trend:r.ordersChange}),e.jsx(Lt,{title:"Total Customers",value:r.totalCustomers,icon:zt,trend:r.customersChange})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl shadow-sm`,children:[e.jsx("div",{className:`p-4 border-b ${t?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"}`,children:"Recent Orders"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{className:`p-2 ${t?"hover:bg-gray-700":"hover:bg-gray-100"} rounded-lg`,children:e.jsx("svg",{className:`w-5 h-5 ${t?"text-gray-400":"text-gray-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})})})})]})}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`text-left text-sm ${t?"text-gray-400 bg-gray-800":"text-gray-500 bg-gray-50"}`,children:[e.jsx("th",{className:"py-3 px-4 font-medium",children:"#"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Product"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Customer"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Price"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Date"}),e.jsx("th",{className:"py-3 px-4 font-medium",children:"Status"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-100"}`,children:A.slice(0,10).map(d=>e.jsxs("tr",{className:`text-sm ${t?"hover:bg-gray-700":"hover:bg-gray-50"}`,children:[e.jsxs("td",{className:`py-3 px-4 ${t?"text-gray-200":"text-gray-900"}`,children:["#",d.id.slice(-6)]}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[d.items[0]?.image&&e.jsx("img",{src:d.items[0].image,alt:d.items[0].name,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:d.items[0]?.name}),e.jsx("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:d.items.length>1?`+${d.items.length-1} more`:""})]})]})}),e.jsx("td",{className:`py-3 px-4 ${t?"text-gray-200":"text-gray-900"}`,children:d.buyerInfo?.name||"Anonymous"}),e.jsxs("td",{className:`py-3 px-4 ${t?"text-gray-200":"text-gray-900"}`,children:["$",d.total.toFixed(2)]}),e.jsx("td",{className:`py-3 px-4 ${t?"text-gray-400":"text-gray-500"}`,children:new Date(d.createdAt?.toDate()).toLocaleDateString()}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.status==="delivered"?"bg-green-100 text-green-700":d.status==="shipped"?"bg-blue-100 text-blue-700":d.status==="processing"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:d.status})})]},d.id))})]}),A.length===0?e.jsx("div",{className:`text-center py-6 ${t?"text-gray-400":"text-gray-500"}`,children:"No orders yet"}):e.jsx("div",{className:`p-4 border-t ${t?"border-gray-700":"border-gray-100"}`,children:e.jsx(fa,{currentPage:g,totalPages:Math.ceil(r.allOrders.length/10),onPageChange:x})})]})]})]})})})},Qi={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.4,ease:"easeOut"}}},Ee=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Ji=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-8",children:e.jsx(Ee,{})}),e.jsx("div",{className:"w-64 h-5",children:e.jsx(Ee,{})})]}),e.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:"w-24 h-10",children:e.jsx(Ee,{})},t))})]}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm overflow-hidden`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsx("tr",{className:`${s?"bg-gray-700/50":"bg-gray-50"}`,children:["Order Details","Customer","Total","Status","Actions"].map(t=>e.jsx("th",{className:"px-6 py-3",children:e.jsx("div",{className:"w-24 h-4",children:e.jsx(Ee,{})})},t))})}),e.jsx("tbody",{className:`divide-y ${s?"divide-gray-700":"divide-gray-200"}`,children:[1,2,3,4,5].map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-20 h-5",children:e.jsx(Ee,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(Ee,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(Ee,{})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(Ee,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(Ee,{})})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"w-24 h-5",children:e.jsx(Ee,{})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"w-20 h-6",children:e.jsx(Ee,{})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-8 h-8",children:e.jsx(Ee,{})}),e.jsx("div",{className:"w-8 h-8",children:e.jsx(Ee,{})})]})})]},t))})]})})})]})},Ki=({isOpen:s,onClose:t,onSubmit:a,orderId:o})=>{const[r,p]=n.useState(""),[g,i]=n.useState(""),[$,k]=n.useState(!1),{isDarkMode:j}=ne(),y=async C=>{if(C.preventDefault(),!r.trim()||!g.trim()){N.error("Please enter both tracking number and carrier");return}k(!0),await a(o,r,g),k(!1),t()};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsx(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:`${j?"bg-gray-800":"bg-white"} rounded-lg shadow-xl max-w-md w-full`,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:`text-lg font-semibold ${j?"text-gray-100":"text-gray-900"} mb-4`,children:"Enter Shipping Information"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${j?"text-gray-300":"text-gray-700"} mb-1`,children:"Shipping Carrier"}),e.jsxs("select",{value:g,onChange:C=>i(C.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${j?"bg-gray-700 border-gray-600 text-gray-200":"border-gray-300 text-gray-900"}`,required:!0,children:[e.jsx("option",{value:"",children:"Select a carrier"}),e.jsx("option",{value:"fedex",children:"FedEx"}),e.jsx("option",{value:"ups",children:"UPS"}),e.jsx("option",{value:"usps",children:"USPS"}),e.jsx("option",{value:"dhl",children:"DHL"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${j?"text-gray-300":"text-gray-700"} mb-1`,children:"Tracking Number"}),e.jsx("input",{type:"text",value:r,onChange:C=>p(C.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${j?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400"}`,placeholder:"Enter tracking number",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 text-sm font-medium rounded-lg ${j?"text-gray-300 hover:bg-gray-700":"text-gray-700 hover:bg-gray-100"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:$||!r.trim()||!g.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:$?"Confirming...":"Confirm Shipping"})]})]})]})})})]}):null},Zi=({order:s,onClose:t})=>{const{isDarkMode:a}=ne();if(!s)return null;const o=r=>typeof r=="object"&&r.name?r.name:r;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:`text-xl font-semibold ${a?"text-gray-100":"text-gray-900"}`,children:"Order Details"}),e.jsx("button",{onClick:t,className:`${a?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(ht,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Order ID: ",s.id]}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Date: ",new Date(s.createdAt?.toDate()).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${a?"text-gray-200":"text-gray-900"}`,children:"Customer Information"}),e.jsxs("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Name: ",s.buyerInfo?.name]}),s.flag&&e.jsx("img",{src:s.flag,alt:o(s.shippingAddress?.country),className:"w-5 h-4 object-cover rounded-sm shadow-sm"})]}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Email: ",s.buyerInfo?.email]}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Phone: ",s.buyerInfo?.phone]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${a?"text-gray-200":"text-gray-900"}`,children:"Shipping Address"}),e.jsxs("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:s.shippingAddress?.street}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:[s.shippingAddress?.city,", ",s.shippingAddress?.state," ",s.shippingAddress?.postalCode]}),e.jsx("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:o(s.shippingAddress?.country)})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${a?"text-gray-200":"text-gray-900"}`,children:"Items"}),e.jsx("div",{className:"space-y-2",children:s.items.map((r,p)=>e.jsx("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`font-medium ${a?"text-gray-200":"text-gray-900"}`,children:r.name}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Quantity: ",r.quantity]}),r.size&&e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Size: ",r.size]}),r.color&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:`${a?"text-gray-300":"text-gray-600"}`,children:"Color:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:r.color.toLowerCase(),borderColor:r.color.toLowerCase()==="#ffffff"?"#e5e7eb":"transparent"}}),e.jsx("span",{className:`${a?"text-gray-300":"text-gray-600"}`,children:r.color})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-medium ${a?"text-gray-200":"text-gray-900"}`,children:["$",r.price.toFixed(2)]}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Shipping: $",r.shippingFee.toFixed(2)]})]})]})},p))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium mb-2 ${a?"text-gray-200":"text-gray-900"}`,children:"Payment Information"}),e.jsxs("div",{className:`${a?"bg-gray-700/50":"bg-gray-50"} p-4 rounded-lg`,children:[e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Method: ",s.paymentMethod?.type," (",s.paymentMethod?.token,")"]}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Network: ",s.paymentMethod?.network]}),e.jsxs("p",{className:`text-sm ${a?"text-gray-300":"text-gray-600"}`,children:["Wallet: ",s.paymentMethod?.buyerWallet]}),e.jsxs("p",{className:`text-sm font-medium mt-2 ${a?"text-gray-200":"text-gray-900"}`,children:["Total: $",s.total.toFixed(2)]})]})]})]})]})})},Zl=()=>{const{user:s}=be(),{isDarkMode:t}=ne(),[a,o]=n.useState(!0),[r,p]=n.useState([]),[g,i]=n.useState("all"),[$,k]=n.useState(null),[j,y]=n.useState(!1),[C,P]=n.useState(null);n.useEffect(()=>{B()},[s]);const B=async()=>{try{const x=de(re(O,"orders"),ie("sellerId","==",s.sellerId),ye("createdAt","desc")),d=(await ge(x)).docs.map(h=>({id:h.id,...h.data()})),b=d.filter(h=>h.status==="processing"&&!h.balanceUpdated);if(b.length>0){const h=te(O,"sellers",s.sellerId),D=await oe(h);if(D.exists())try{const V=D.data();V.balance||(await xe(h,{balance:{available:0,pending:0}}),V.balance={available:0,pending:0});const z=b.reduce((l,E)=>{const L=parseFloat(E.total);return l+(isNaN(L)?0:L)},0),u={available:parseFloat(V.balance.available||0),pending:parseFloat(V.balance.pending||0)+z};await xe(h,{balance:{available:u.available,pending:u.pending}});const F=bs(O);b.forEach(l=>{const E=te(O,"orders",l.id);F.update(E,{balanceUpdated:!0})}),await F.commit(),console.log("Balance updated successfully:",{previousBalance:V.balance,newBalance:u,totalNewAmount:z,updatedOrders:b.length})}catch(V){console.error("Error updating balance:",V),console.error("Error details:",{sellerId:s.sellerId,sellerData:D.data(),newOrders:b})}}p(d)}catch(x){console.error("Error fetching orders:",x),N.error("Failed to load orders")}finally{o(!1)}},v=async(x,m,d)=>{try{const b=te(O,"orders",x),D=(await oe(b)).data(),V=D.shippingDeadline.toDate();if(Date.now()>V){N.error("Shipping confirmation deadline has passed");return}const z=te(O,"sellers",s.sellerId),F=(await oe(z)).data().balance||{available:0,pending:0},l=Number(D.total||0);await xe(z,{balance:{available:Number((Number(F.available||0)+l).toFixed(2)),pending:Number((Number(F.pending||0)-l).toFixed(2))}}),await xe(b,{status:"shipped",updatedAt:new Date,shippingConfirmed:!0,shippingConfirmedAt:new Date,fundsAvailable:!0,fundsAvailableAt:new Date(Date.now()+14*24*60*60*1e3),trackingNumber:m,carrier:d,shippingStatus:"in_transit"}),p(E=>E.map(L=>L.id===x?{...L,status:"shipped",shippingConfirmed:!0,shippingConfirmedAt:new Date,fundsAvailable:!0,fundsAvailableAt:new Date(Date.now()+14*24*60*60*1e3),trackingNumber:m,carrier:d,shippingStatus:"in_transit"}:L)),N.success("Shipping confirmed successfully")}catch(b){console.error("Error updating order:",b),N.error("Failed to update order")}},I=r.filter(x=>g==="all"?!0:x.status===g),A=x=>{switch(x){case"delivered":return"bg-green-100 text-green-700";case"completed":return"bg-green-100 text-green-700";case"processing":return"bg-blue-100 text-blue-700";case"cancelled":return"bg-red-100 text-red-700";case"pending":default:return"bg-yellow-100 text-yellow-700"}};return a?e.jsx(Ji,{}):e.jsxs(M.div,{className:`max-w-5xl mx-auto p-4 ${t?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:Qi,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Orders Received"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Manage your incoming orders"})]}),e.jsx("div",{className:"flex gap-2",children:["all","processing","completed","cancelled"].map(x=>e.jsx("button",{onClick:()=>i(x),className:`px-4 py-2 rounded-lg text-sm font-medium capitalize transition-colors ${g===x?"bg-[#FF1B6B] text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:x},x))})]}),I.length===0?e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl p-8 text-center`,children:[e.jsx(Bt,{className:`w-12 h-12 ${t?"text-gray-600":"text-gray-400"} mx-auto mb-4`}),e.jsx("h2",{className:`text-xl font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"No Orders Found"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:g==="all"?"You haven't received any orders yet":`No ${g} orders found`})]}):e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-2xl shadow-sm overflow-hidden mt-6`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:`${t?"bg-gray-700/50":"bg-gray-50"}`,children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Order Details"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Customer"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Items"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Total"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Actions"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:I.map(x=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700/50":"hover:bg-gray-50"}`,children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["#",x.id.slice(-6)]}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:new Date(x.createdAt?.toDate()).toLocaleString()})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:x.buyerInfo?.name}),x.flag&&e.jsx("img",{src:x.flag,alt:`${x.shippingAddress?.country} flag`,className:"w-5 h-4 object-cover rounded-sm shadow-sm"})]}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:x.buyerInfo?.email})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"space-y-2",children:x.items.map((m,d)=>e.jsx("div",{className:"text-sm",children:e.jsxs("div",{className:"flex items-center gap-3",children:[m.image&&e.jsx("img",{src:m.image,alt:m.name,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:m.name}),e.jsxs("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:["Qty: ",m.quantity,m.size&&`  Size: ${m.size}`,m.color&&e.jsxs("span",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{children:"Color:"}),e.jsx("span",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:m.color.toLowerCase(),borderColor:m.color.toLowerCase()==="#ffffff"?"#e5e7eb":"transparent"}}),e.jsx("span",{children:m.color})]})]})]})]})},d))})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("p",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["$",x.total.toFixed(2)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${A(x.status)}`,children:x.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>k(x),className:`p-2 ${t?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-600"} transition-colors`,title:"View Details",children:e.jsx(Wa,{className:"w-5 h-5"})}),x.status==="processing"&&!x.shippingConfirmed&&e.jsx("button",{onClick:()=>{P(x.id),y(!0)},className:"px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 hover:bg-green-200",children:"Confirm Shipping"}),x.trackingNumber&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("span",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:[x.carrier.toUpperCase(),": ",x.trackingNumber]}),e.jsx("span",{className:`text-xs font-medium flex items-center gap-1 ${x.shippingStatus==="delivered"?"text-green-600":"text-blue-600"}`,children:x.shippingStatus==="delivered"?e.jsxs(e.Fragment,{children:["Delivered ",e.jsx(ft,{className:"w-4 h-4"})]}):"In Transit"})]})]})})]},x.id))})]})})}),e.jsx(Ki,{isOpen:j,onClose:()=>y(!1),onSubmit:v,orderId:C}),$&&e.jsx(Zi,{order:$,onClose:()=>k(null)})]})},Be=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},Xi=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-8",children:e.jsx(Be,{})}),e.jsx("div",{className:"w-64 h-5",children:e.jsx(Be,{})})]}),e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-xl p-2 shadow-sm`,children:e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(t=>e.jsx("div",{className:"w-32 h-10",children:e.jsx(Be,{})},t))})}),e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-2xl p-6 shadow-sm space-y-6`,children:[e.jsx("div",{className:"grid grid-cols-2 gap-6",children:[1,2].map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(Be,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(Be,{})})]},t))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-40 h-5",children:e.jsx(Be,{})}),e.jsx("div",{className:"w-full h-32",children:e.jsx(Be,{})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-5",children:e.jsx(Be,{})}),e.jsx("div",{className:"w-full h-10",children:e.jsx(Be,{})})]},t))}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(Be,{})}),e.jsx("div",{className:`${s?"bg-gray-700/50":"bg-gray-50"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-5",children:e.jsx(Be,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(Be,{})})]}),e.jsx("div",{className:"w-32 h-10",children:e.jsx(Be,{})})]})})]}),e.jsx("div",{className:"pt-4",children:e.jsx("div",{className:"w-full h-10",children:e.jsx(Be,{})})})]})]})},Xl=()=>{const{user:s}=be(),{isDarkMode:t}=ne(),[a,o]=n.useState(!0),[r,p]=n.useState("profile"),[g,i]=n.useState(!1),[$,k]=n.useState(null),[j,y]=n.useState({fullName:"",email:s?.email||"",phoneNumber:"",shippingAddress:{street:"",city:"",state:"",country:{name:"",code:"",flag:""},postalCode:""}}),[C,P]=n.useState({storeName:"",description:"",contactEmail:"",phoneNumber:"",country:"",city:"",postalCode:"",shippingCountries:[],shippingFee:0,preferredNetwork:""}),[B,v]=n.useState({walletAddress:"",preferredToken:"USDT"}),[I,A]=n.useState(!1),[x,m]=n.useState(null),[d,b]=n.useState(!1),[h,D]=n.useState(null),V=n.useMemo(()=>ta().getData(),[]),z=n.useMemo(()=>V.map(c=>({value:c.value,label:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ht,{countryCode:c.value,svg:!0,style:{width:"1.5em",height:"1.5em"}}),c.label]}),searchLabel:c.label})),[V]),u=n.useMemo(()=>({control:(c,w)=>({...c,padding:"2px",borderColor:t?"#4B5563":"#E5E7EB",backgroundColor:t?"#374151":"white","&:hover":{borderColor:"#FF1B6B"}}),option:(c,w)=>({...c,backgroundColor:w.isSelected?"#FF1B6B":w.isFocused?t?"#4B5563":"#FFE4E4":t?"#374151":"white",color:w.isSelected?"white":t?"#E5E7EB":"#374151","&:hover":{backgroundColor:w.isSelected?"#FF1B6B":t?"#4B5563":"#FFE4E4"}}),menu:c=>({...c,backgroundColor:t?"#374151":"white"}),singleValue:c=>({...c,color:t?"#E5E7EB":"#374151"}),input:c=>({...c,color:t?"#E5E7EB":"#374151"})}),[t]),F=c=>{const w={...j,shippingAddress:{...j.shippingAddress,country:{name:c.searchLabel,code:c.value,flag:`https://flagcdn.com/${c.value.toLowerCase()}.svg`}}};y(w),b(JSON.stringify(w)!==JSON.stringify(h))};n.useEffect(()=>{(async()=>{try{if(!s){o(!1);return}s.isSeller?(p("store"),await f()):(p("profile"),await l())}catch{N.error("Failed to load settings")}finally{o(!1)}})()},[s]);const l=async()=>{try{const c=await oe(te(O,"users",s.uid));if(c.exists()){const w=c.data(),U={fullName:w.fullName||"",email:w.email||s?.email||"",phoneNumber:w.phoneNumber||"",walletAddress:w.walletAddress||"",shippingAddress:{street:w.shippingAddress?.street||"",city:w.shippingAddress?.city||"",state:w.shippingAddress?.state||"",country:w.shippingAddress?.country||{name:"",code:"",flag:""},postalCode:w.shippingAddress?.postalCode||""}};if(y(U),D(JSON.parse(JSON.stringify(U))),b(!1),w.walletAddress&&window.ethereum)try{const H=await window.ethereum.request({method:"eth_accounts"});H.length>0&&H[0].toLowerCase()===w.walletAddress.toLowerCase()&&y(K=>({...K,walletAddress:H[0]}))}catch(H){console.error("Error checking wallet connection:",H)}}}catch(c){console.error("Error fetching buyer profile:",c),N.error("Failed to load profile")}},E=c=>{const{name:w,value:U}=c.target;let H;if(w.includes("shippingAddress.")){const K=w.split(".")[1];H={...j,shippingAddress:{...j.shippingAddress,[K]:U}}}else H={...j,[w]:U};y(H),b(JSON.stringify(H)!==JSON.stringify(h))},L=async c=>{c.preventDefault();try{await yt(te(O,"users",s.uid),{...j,updatedAt:new Date},{merge:!0}),D(JSON.parse(JSON.stringify(j))),b(!1),N.success("Profile updated successfully")}catch{N.error("Failed to update profile")}},f=async()=>{if(s?.sellerId)try{const c=te(O,"sellers",s.sellerId),w=await oe(c);if(w.exists()){const U=w.data(),H={...U,country:U.country?.code?U.country:{name:U.country||"",code:"",flag:""}};P(H),m(H),v({walletAddress:U.walletAddress||"",preferredToken:U.preferredToken||"USDC"})}else{const U=await oe(te(O,"users",s.uid)),H=U.exists()?U.data():{},K={sellerId:s.sellerId,userId:s.uid,storeName:"",description:"",contactEmail:s.email,phoneNumber:"",country:{name:"",code:"",flag:""},city:"",postalCode:"",shippingCountries:[],shippingFee:0,preferredToken:"USDC",preferredNetwork:"",walletAddress:H.walletAddress||"",createdAt:new Date,updatedAt:new Date};await yt(c,K),P(K),m(K),v({walletAddress:H.walletAddress||"",preferredToken:K.preferredToken})}A(!1)}catch{N.error("Failed to load seller settings")}},q=async()=>{try{if(!await ze()){N.error("Please install MetaMask to connect your wallet");return}const w=await window.ethereum.request({method:"eth_requestAccounts"});if(w.length===0){N.error("Please connect your wallet");return}const U=w[0];console.log("Connecting wallet:",U),s.isSeller?(console.log("Updating seller state with wallet:",U),v(H=>(console.log("Previous wallet settings:",H),{...H,walletAddress:U})),P(H=>(console.log("Previous store settings:",H),{...H,walletAddress:U}))):y(H=>({...H,walletAddress:U}));try{if(s.isSeller){console.log("Updating seller document with wallet:",U);const H=te(O,"sellers",s.sellerId);await xe(H,{walletAddress:U,updatedAt:new Date}),await xe(te(O,"users",s.uid),{walletAddress:U,updatedAt:new Date});const K=await oe(H);if(K.exists()){const _=K.data();console.log("Updated seller data:",_),P(_),v(ee=>({...ee,walletAddress:_.walletAddress}))}}else await xe(te(O,"users",s.uid),{walletAddress:U,updatedAt:new Date});N.success("Wallet connected successfully")}catch(H){console.error("Error updating Firestore:",H),N.error("Failed to save wallet connection"),s.isSeller?(v(K=>({...K,walletAddress:""})),P(K=>({...K,walletAddress:""}))):y(K=>({...K,walletAddress:""}))}}catch(c){console.error("Wallet connection error:",c),c.code===4001?N.error("You rejected the connection request"):N.error("Failed to connect wallet")}},G=async()=>{try{s.isSeller?(v(c=>({...c,walletAddress:""})),P(c=>({...c,walletAddress:""}))):y(c=>({...c,walletAddress:""})),s.isSeller?await xe(te(O,"sellers",s.sellerId),{walletAddress:"",updatedAt:new Date}):await xe(te(O,"users",s.uid),{walletAddress:"",updatedAt:new Date}),N.success("Wallet disconnected successfully")}catch(c){console.error("Error disconnecting wallet:",c),N.error("Failed to disconnect wallet"),s.isSeller?(v(w=>({...w,walletAddress:B.walletAddress})),P(w=>({...w,walletAddress:B.walletAddress}))):y(w=>({...w,walletAddress:j.walletAddress}))}},T=async c=>{c.preventDefault();try{await xe(te(O,"sellers",s.sellerId),{...C,updatedAt:new Date}),m(C),A(!1),N.success("Store settings updated successfully")}catch{N.error("Failed to update store settings")}},S=c=>{const{name:w,value:U}=c.target;P(H=>{const K={...H,[w]:U},_=JSON.stringify(K)!==JSON.stringify(x);return A(_),K})};return a?e.jsx(Xi,{}):e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:`max-w-4xl mx-auto p-6 ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{children:[e.jsx("h1",{className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Settings"}),e.jsxs("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-6`,children:["Manage your ",s?.isSeller?"store settings":"profile"," and preferences"]})]}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-xl p-2 shadow-sm mb-6`,children:e.jsx("nav",{className:"flex gap-2",children:s?.isSeller?[{id:"store",label:"Store Settings",icon:sa},{id:"account",label:"Account",icon:zt},{id:"security",label:"Security",icon:Bs}].map(c=>e.jsxs("button",{onClick:()=>p(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r===c.id?"bg-[#FF1B6B] text-white":t?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(c.icon,{className:"w-5 h-5"}),c.label]},c.id)):[{id:"profile",label:"Profile",icon:zt},{id:"shipping",label:"Shipping",icon:Bt},{id:"security",label:"Security",icon:Bs}].map(c=>e.jsxs("button",{onClick:()=>p(c.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r===c.id?"bg-[#FF1B6B] text-white":t?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-gray-100"}`,children:[e.jsx(c.icon,{className:"w-5 h-5"}),c.label]},c.id))})}),e.jsx("div",{className:"space-y-6",children:s?.isSeller?e.jsxs(e.Fragment,{children:[r==="store"&&e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Store Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Store Name"}),e.jsx("input",{type:"text",name:"storeName",value:C.storeName,onChange:S,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Contact Email"}),e.jsx("input",{type:"email",name:"contactEmail",value:C.contactEmail,onChange:S,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Store Description"}),e.jsx("textarea",{name:"description",value:C.description,onChange:S,rows:3,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Country"}),e.jsxs("div",{className:`w-full px-4 py-2 border rounded-lg flex items-center gap-2 \${
                        isDarkMode 
                          ? 'bg-gray-700 border-gray-600 text-gray-200' 
                          : 'bg-gray-50 border-gray-200 text-gray-700'
                      }`,children:[C.country?.code&&e.jsx(Ht,{countryCode:C.country.code,svg:!0,style:{width:"1.5em",height:"1.5em"}}),e.jsx("span",{className:`${t?"text-gray-200":"text-gray-700"}`,children:C.country?.name||"Country not set"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"City"}),e.jsx("input",{type:"text",name:"city",value:C.city,onChange:S,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Postal Code"}),e.jsx("input",{type:"text",name:"postalCode",value:C.postalCode,onChange:S,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Shipping Fee (USD)"}),e.jsxs("div",{className:"relative max-w-xs",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",name:"shippingFee",min:"0",step:"0.01",value:C.shippingFee,onChange:S,className:`w-full pl-8 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"0.00"})]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This fee will be added to all orders from your store"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",disabled:!I,className:`px-6 py-2 rounded-lg transition-colors ${I?"bg-[#FF1B6B] text-white hover:bg-[#D4145A]":`${t?"bg-gray-700 text-gray-500":"bg-gray-200 text-gray-500"} cursor-not-allowed`}`,children:"Save Store Settings"})})]}),r==="account"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Wallet Settings"}),e.jsx("div",{className:`${t?"bg-gray-700":"bg-white"} rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:"Connected Wallet"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} mt-1`,children:B.walletAddress?`${B.walletAddress.slice(0,6)}...${B.walletAddress.slice(-4)}`:"No wallet connected"})]}),e.jsx("div",{className:"flex gap-2",children:B.walletAddress?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:G,className:`px-4 py-2 ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} rounded-lg transition-colors text-sm`,children:"Disconnect"}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Change Wallet"})]}):e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Connect Wallet"})})]})})]}),e.jsxs("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:[e.jsx("h3",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-4`,children:"Network Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-2`,children:"Preferred Network"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[{id:"polygon",name:"Polygon",logo:"/polygon.png"},{id:"unichain",name:"Unichain Testnet",logo:"/unichain-logo.png"}].map(c=>e.jsxs("button",{type:"button",disabled:C.preferredNetwork==="polygon"||C.preferredNetwork==="unichain",onClick:()=>{C.preferredNetwork!=="polygon"&&C.preferredNetwork!=="unichain"&&(k(c),i(!0))},className:`p-4 border rounded-lg transition-colors flex items-center justify-center gap-2 ${C.preferredNetwork===c.id?`border-[#FF1B6B] ${t?"bg-pink-900/20":"bg-pink-50"}`:C.preferredNetwork==="polygon"||C.preferredNetwork==="unichain"?`border-gray-200 opacity-50 cursor-not-allowed ${t?"bg-gray-700":"bg-white"}`:`border-gray-200 hover:border-[#FF1B6B] ${t?"bg-gray-700":"bg-white"}`}`,children:[e.jsx("img",{src:c.logo,alt:`${c.name} logo`,className:"w-6 h-6"}),e.jsx("span",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:c.name})]},c.id))}),g&&$&&e.jsx("div",{className:`mt-4 border border-[#FF1B6B] rounded-lg p-4 ${t?"bg-pink-900/20":"bg-pink-50"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-[#FF1B6B] mt-1",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:`font-medium ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Confirm Network Selection"}),e.jsxs("p",{className:`text-sm ${t?"text-gray-300":"text-gray-600"} mb-4`,children:["Are you sure you want to build your store on ",$.name,"? This is a one-time choice and all your products and transactions will only operate on this network."]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{i(!1),k(null)},className:`px-4 py-2 text-sm ${t?"text-gray-300 hover:text-gray-100":"text-gray-600 hover:text-gray-900"} transition-colors`,children:"Cancel"}),e.jsx("button",{onClick:()=>{P(c=>({...c,preferredNetwork:$.id})),xe(te(O,"sellers",s.sellerId),{preferredNetwork:$.id,updatedAt:new Date}),N.success(`Your store has been permanently set to operate on ${$.name} network`,{style:{background:"#FF1B6B",color:"#fff",padding:"16px",borderRadius:"10px"},iconTheme:{primary:"#fff",secondary:"#FF1B6B"},duration:5e3}),i(!1),k(null)},className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Confirm Selection"})]})]})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:`text-sm ${t?"text-gray-200":"text-gray-500"}`,children:C.preferredNetwork?`Your store operates on ${C.preferredNetwork==="polygon"?"Polygon":"Unichain Testnet"} network.`:"Select the network you want to build your store on. This is a one-time choice and cannot be changed later."}),!C.preferredNetwork&&e.jsx("p",{className:"mt-2 text-sm text-[#FF1B6B]",children:" Warning: Once you select a network, you cannot change it later. All your products and transactions will operate only on the selected network."})]})]})]})]}),r==="security"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Security Settings"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Security settings coming soon"})]})]}):e.jsxs(e.Fragment,{children:[r==="profile"&&e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Wallet"}),e.jsx("div",{className:`${t?"bg-gray-800":"bg-gray-50"} rounded-xl p-6`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${t?"text-gray-200":"text-gray-900"}`,children:"Connected Wallet"}),e.jsx("p",{className:`text-sm ${t?"text-gray-400":"text-gray-500"} mt-1`,children:j.walletAddress?`${j.walletAddress.slice(0,6)}...${j.walletAddress.slice(-4)}`:"No wallet connected"})]}),e.jsx("div",{className:"flex gap-2",children:j.walletAddress?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:G,className:`px-4 py-2 ${t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} rounded-lg transition-colors text-sm`,children:"Disconnect"}),e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Change Wallet"})]}):e.jsx("button",{type:"button",onClick:q,className:"px-4 py-2 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors text-sm",children:"Connect Wallet"})})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",value:j.fullName,onChange:E,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Email"}),e.jsx("input",{type:"email",name:"email",value:j.email,onChange:E,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phoneNumber",value:j.phoneNumber,onChange:E,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`,placeholder:"Your phone number"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:!d,className:`w-full px-4 py-2 rounded-lg transition-colors ${d?"bg-[#FF1B6B] text-white hover:bg-[#D4145A]":`${t?"bg-gray-700 text-gray-500":"bg-gray-200 text-gray-500"} cursor-not-allowed`}`,children:"Save Profile"})})]}),r==="shipping"&&e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Street Address"}),e.jsx("input",{type:"text",name:"shippingAddress.street",value:j.shippingAddress.street,onChange:E,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"City"}),e.jsx("input",{type:"text",name:"shippingAddress.city",value:j.shippingAddress.city,onChange:E,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"State/Province"}),e.jsx("input",{type:"text",name:"shippingAddress.state",value:j.shippingAddress.state,onChange:E,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Country"}),e.jsx(aa,{options:z,styles:u,onChange:F,required:!0,placeholder:"Select country",className:"country-select",value:j.shippingAddress.country?.code?z.find(c=>c.value===j.shippingAddress.country.code):null})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${t?"text-gray-300":"text-gray-700"} mb-1`,children:"Postal Code"}),e.jsx("input",{type:"text",name:"shippingAddress.postalCode",value:j.shippingAddress.postalCode,onChange:E,className:`w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors ${t?"bg-gray-700 border-gray-600 text-gray-100":"bg-white border-gray-300 text-gray-900"}`})]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:!d,className:`w-full px-4 py-2 rounded-lg transition-colors ${d?"bg-[#FF1B6B] text-white hover:bg-[#D4145A]":`${t?"bg-gray-700 text-gray-500":"bg-gray-200 text-gray-500"} cursor-not-allowed`}`,children:"Save Shipping Address"})})]}),r==="security"&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:`text-lg font-semibold ${t?"text-gray-100":"text-gray-900"} mb-2`,children:"Security Settings"}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Security settings coming soon"})]})]})})]})},st=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-100"} rounded-lg`,animate:{opacity:[.3,.6,.3],scale:[.98,1,.98]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})},el=({images:s})=>{const[t,a]=n.useState(0);return n.useEffect(()=>{if(s.length<=1)return;const o=setInterval(()=>{a(r=>(r+1)%s.length)},3e3);return()=>clearInterval(o)},[s]),e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[e.jsx(At,{initial:!1,children:e.jsx(M.img,{src:s[t],alt:"Product",className:"absolute w-full h-full object-cover",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5}},t)}),s.length>1&&e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center gap-1",children:s.map((o,r)=>e.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${r===t?"bg-white":"bg-white/50"}`},r))})]})},tl=()=>e.jsxs("div",{className:"max-w-7xl mx-auto p-4 space-y-6",children:[e.jsxs(M.div,{className:"flex items-center justify-between gap-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"w-full h-12",children:e.jsx(st,{})})}),e.jsx("div",{className:"w-32 h-12",children:e.jsx(st,{})})]}),e.jsx(M.div,{className:"flex gap-2 overflow-x-auto pb-2",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:[1,2,3,4,5].map(s=>e.jsx(M.div,{className:"w-24 h-8 flex-shrink-0",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:s*.05},children:e.jsx(st,{})},s))}),e.jsx(M.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.2},children:[1,2,3,4,5,6,7,8,9,10].map(s=>e.jsxs(M.div,{className:"bg-white rounded-lg shadow-sm overflow-hidden",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:s*.05},children:[e.jsx("div",{className:"aspect-square",children:e.jsx(st,{})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-4",children:e.jsx(st,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(st,{})}),e.jsx("div",{className:"w-1/3 h-4",children:e.jsx(st,{})})]})]},s))})]}),sl=({endsAt:s})=>{const[t,a]=n.useState("");return n.useEffect(()=>{const o=()=>{const p=new Date().getTime(),i=new Date(s).getTime()-p;if(i<=0)return"Ended";const $=Math.floor(i/(1e3*60*60*24)),k=Math.floor(i%(1e3*60*60*24)/(1e3*60*60)),j=Math.floor(i%(1e3*60*60)/(1e3*60)),y=Math.floor(i%(1e3*60)/1e3);let C="";return $>0?C=`${$}d ${k}h ${j}m`:k>0?C=`${k}h ${j}m ${y}s`:j>0?C=`${j}m ${y}s`:C=`${y}s`,C};a(o());const r=setInterval(()=>{const p=o();a(p),p==="Ended"&&clearInterval(r)},1e3);return()=>clearInterval(r)},[s]),e.jsx("span",{className:"font-mono text-lg sm:text-xl font-bold text-[#FF1B6B]",children:t})},al=({product:s})=>{const{isDarkMode:t}=ne(),[a,o]=n.useState(0),[r,p]=n.useState(0);return n.useEffect(()=>{(async()=>{try{const i=re(O,"reviews"),$=de(i,ie("productId","==",s.id)),k=await ge($);let j=0;k.forEach(C=>{j+=C.data().rating});const y=k.size>0?j/k.size:0;o(y),p(k.size)}catch(i){console.error("Error fetching reviews:",i)}})()},[s.id]),e.jsx(M.div,{className:`${t?"bg-gray-800 hover:bg-gray-750":"bg-white hover:bg-gray-50"} rounded-lg shadow-sm overflow-hidden group transition-colors`,whileHover:{y:-3},children:e.jsxs(ve,{to:`/merch-store/product/${s.id}`,children:[e.jsx("div",{className:"aspect-square relative overflow-hidden",children:e.jsx(el,{images:s.images})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:`font-medium ${t?"text-gray-100":"text-gray-800"} mb-1 truncate`,children:s.name}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:s.tokenLogo,alt:s.acceptedToken,className:"w-4 h-4"}),e.jsx("div",{className:"flex items-center gap-1",children:s.hasDiscount?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-[#FF1B6B] font-medium text-sm",children:["$",s.discountedPrice.toFixed(2)]}),e.jsxs("p",{className:`${t?"text-gray-500":"text-gray-400"} text-xs line-through`,children:["$",s.price.toFixed(2)]})]}):e.jsxs("p",{className:"text-[#FF1B6B] font-medium text-sm",children:["$",s.price.toFixed(2)]})})]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full ${t?"bg-gray-700":"bg-gray-100"}`,children:[e.jsx("img",{src:s.network==="polygon"?"/polygon.png":"/unichain-logo.png",alt:s.network,className:"w-4 h-4"}),e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-300":"text-gray-600"} capitalize`,children:s.network})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["by ",s.sellerName]}),s.isSellerVerified&&e.jsxs("div",{className:"group relative inline-flex items-center",children:[e.jsx(Ke,{className:"!w-[10px] !h-[10px] min-w-[10px] min-h-[10px]"}),e.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-1 py-0.5 ${t?"bg-gray-700":"bg-gray-900"} text-white text-[8px] rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10`,children:"Verified Store"})]})]}),e.jsx("p",{className:`text-xs font-medium ${s.quantity>10?"text-green-500":s.quantity>0?"text-orange-500":"text-red-500"}`,children:s.quantity>10?"In Stock":s.quantity>0?`Only ${s.quantity} left`:"Out of Stock"})]}),e.jsxs("div",{className:`flex items-center gap-1 mt-2 pt-2 border-t ${t?"border-gray-700":"border-gray-100"}`,children:[e.jsx(Va,{className:"text-[#FF1B6B] text-base"}),e.jsx("span",{className:`text-sm font-medium ${t?"text-gray-200":"text-gray-700"}`,children:a?a.toFixed(1):"New"}),r>0&&e.jsxs("span",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["(",r,")"]})]})]})]})})},rl=({products:s})=>{const{isDarkMode:t}=ne(),a=()=>{let p=0,g=null;return s.forEach(i=>{if(i.hasDiscount&&i.discountEndsAt){const $=i.discountPercent;$>p&&(p=$);const k=new Date(i.discountEndsAt);(!g||k>g)&&(g=k)}}),{maxDiscount:p,latestEndTime:g}},{maxDiscount:o,latestEndTime:r}=a();return!o||!r?null:e.jsxs("div",{className:`${t?"bg-gradient-to-r from-pink-950/20 via-pink-900/30 to-purple-950/20":"bg-gradient-to-r from-pink-500/5 via-pink-500/10 to-purple-500/5"} rounded-2xl p-6 mb-6 overflow-hidden relative`,children:[e.jsx("div",{className:"flex items-center gap-2 justify-center mb-6",children:e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-[#FF1B6B] text-white rounded-full shadow-lg",children:[e.jsx(za,{className:"text-xl animate-pulse"}),e.jsx("span",{className:"font-bold",children:"Flash Sale  Limited time offer"})]})}),e.jsxs("div",{className:"text-center space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-2xl font-bold tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"UP TO"}),e.jsx("p",{className:"text-5xl sm:text-6xl font-bold tracking-tight",children:e.jsxs("span",{className:"text-[#FF1B6B]",children:[o,"% OFF"]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-3",children:[e.jsx("span",{className:`text-lg font-medium ${t?"text-gray-300":"text-gray-700"}`,children:"Offer ends in:"}),e.jsxs("div",{className:`flex items-center gap-2 ${t?"bg-gray-800/80":"bg-white/80"} px-4 py-2 rounded-lg shadow-sm`,children:[e.jsx(Wt,{className:"text-xl text-[#FF1B6B] animate-pulse"}),e.jsx(sl,{endsAt:r})]})]})]})]})},eo=()=>{const{isDarkMode:s}=ne(),[t,a]=n.useState(!0),[o,r]=n.useState([]),[p,g]=n.useState(""),[i,$]=n.useState("all"),[k,j]=n.useState("latest"),[y,C]=n.useState("all");n.useState(!1);const[P,B]=n.useState(!1),[v,I]=n.useState(!1),A=n.useRef(null),x=n.useRef(null),m=[{value:"latest",label:"Latest"},{value:"price_low",label:"Price: Low to High"},{value:"price_high",label:"Price: High to Low"}],d={"Men's Wear":[{name:"T-Shirts",icon:e.jsx(As,{className:"text-lg"})},{name:"Shirts",icon:e.jsx(Ds,{className:"text-lg"})},{name:"Pants",icon:e.jsx(Es,{className:"text-lg"})},{name:"Hoodies",icon:e.jsx(Xa,{className:"text-lg"})},{name:"Jackets",icon:e.jsx(Is,{className:"text-lg"})},{name:"Suits",icon:e.jsx(er,{className:"text-lg"})}],"Women's Wear":[{name:"Dresses",icon:e.jsx(tr,{className:"text-lg"})},{name:"Tops",icon:e.jsx(As,{className:"text-lg"})},{name:"Skirts",icon:e.jsx(sr,{className:"text-lg"})},{name:"Pants",icon:e.jsx(Es,{className:"text-lg"})},{name:"Blouses",icon:e.jsx(Ds,{className:"text-lg"})},{name:"Jackets",icon:e.jsx(Is,{className:"text-lg"})}],Footwear:[{name:"Sneakers",icon:e.jsx(ar,{className:"text-lg"})},{name:"Formal Shoes",icon:e.jsx("span",{className:"text-lg text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:""})},{name:"Boots",icon:e.jsx(rr,{className:"text-lg"})},{name:"Sandals",icon:e.jsx(nr,{className:"text-lg"})},{name:"Slippers",icon:e.jsx("span",{className:"text-lg text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:""})}]},b={"Fashion Accessories":[{name:"Bags",icon:e.jsx(Ts,{className:"text-lg"})},{name:"Belts",icon:e.jsx(ir,{className:"text-lg"})},{name:"Hats",icon:e.jsx(lr,{className:"text-lg"})},{name:"Scarves",icon:e.jsx("span",{className:"text-lg text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:""})},{name:"Jewelry",icon:e.jsx(or,{className:"text-lg"})}],"Tech Accessories":[{name:"Phone Cases",icon:e.jsx(dr,{className:"text-lg"})},{name:"Laptop Bags",icon:e.jsx(cr,{className:"text-lg"})},{name:"Headphone Cases",icon:e.jsx(xr,{className:"text-lg"})},{name:"Tablet Covers",icon:e.jsx(mr,{className:"text-lg"})},{name:"Chargers",icon:e.jsx(gr,{className:"text-lg"})}]},h=[{id:"all",name:"All Categories",icon:e.jsx(Ya,{className:"text-xl"})},{id:"clothing",name:"Clothing",icon:e.jsx(Ga,{className:"text-xl"}),subcategories:d},{id:"accessories",name:"Accessories",icon:e.jsx(Ts,{className:"text-xl"}),subcategories:b},{id:"electronics",name:"Electronics",icon:e.jsx(Qa,{className:"text-xl"})},{id:"home",name:"Home",icon:e.jsx(Ja,{className:"text-xl"})},{id:"art",name:"Art",icon:e.jsx(Ka,{className:"text-xl"})},{id:"collectibles",name:"Collectibles",icon:e.jsx(Za,{className:"text-xl"})}],D=[{value:"all",label:"All Networks"},{value:"polygon",label:"Polygon"},{value:"unichain",label:"Unichain"}];n.useEffect(()=>{V()},[i,k,y]);const V=async()=>{try{a(!0);let l=re(O,"products");const E=[ie("status","==","active")];if(i!=="all")if(i.includes("-")){const[S,c,w]=i.split("-");E.push(ie("category","==",S)),E.push(ie("subCategory","==",`${c} - ${w}`))}else E.push(ie("category","==",i));y!=="all"&&E.push(ie("network","==",y)),k==="latest"?E.push(ye("createdAt","desc")):k==="price_low"?E.push(ye("price","asc")):k==="price_high"&&E.push(ye("price","desc")),l=de(l,...E,lt(50));const L=await ge(l),f=[...new Set(L.docs.map(S=>S.data().sellerId))],q=await ge(de(re(O,"sellers"),ie("__name__","in",f))),G={};q.docs.forEach(S=>{G[S.id]=S.data().verificationStatus==="approved"});const T=L.docs.map(S=>{const c=S.data();return{id:S.id,...c,isSellerVerified:G[c.sellerId]||!1}});r(T)}catch(l){console.error("Error fetching products:",l),N.error("Failed to load products")}finally{a(!1)}},z=o.filter(l=>l.name.toLowerCase().includes(p.toLowerCase())||l.description.toLowerCase().includes(p.toLowerCase())),u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},F={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return t?e.jsx(tl,{}):e.jsxs(M.div,{className:`max-w-7xl mx-auto p-4 ${s?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:u,children:[e.jsxs(M.div,{variants:F,className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex gap-2 flex-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:`px-4 py-3 ${s?"bg-gray-800 border-gray-700 hover:bg-gray-700":"bg-white border-gray-200 hover:bg-gray-50"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors min-w-[160px] text-left flex items-center gap-2`,children:[e.jsx(Ha,{className:`text-xl ${s?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`${s?"text-gray-200":"text-gray-700"}`,children:h.find(l=>l.id===i)?.name||"All Categories"}),e.jsx("svg",{className:`w-5 h-5 ${s?"text-gray-400":"text-gray-500"} ml-auto transition-transform group-hover:rotate-180`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:`absolute left-0 top-full mt-1 w-[280px] ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-lg shadow-lg border z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200`,children:h.map(l=>e.jsxs("div",{className:"group/item",children:[e.jsxs("button",{onClick:()=>{$(l.id)},className:`w-full px-4 py-2 text-left ${s?"hover:bg-gray-700 text-gray-200 hover:text-[#FF1B6B]":"hover:bg-pink-50 text-gray-700 hover:text-[#FF1B6B]"} flex items-center gap-3`,children:[e.jsx("span",{className:`${s?"text-gray-400":"text-gray-500"} group-hover/item:text-[#FF1B6B] transition-colors`,children:l.icon}),e.jsx("span",{children:l.name}),l.subcategories&&e.jsx("svg",{className:`w-4 h-4 ${s?"text-gray-400":"text-gray-500"} ml-auto`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),l.subcategories&&e.jsx("div",{className:`absolute left-[279px] top-0 w-[280px] ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-lg shadow-lg border invisible opacity-0 group-hover/item:visible group-hover/item:opacity-100 transition-all duration-200`,children:Object.entries(l.subcategories).map(([E,L])=>e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:`px-2 py-1 text-sm font-medium ${s?"text-gray-200":"text-gray-900"}`,children:E}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:L.map(f=>e.jsxs("button",{onClick:()=>{$(`${l.id}-${E}-${f.name}`)},className:`px-2 py-1 text-sm ${s?"text-gray-300 hover:bg-gray-700":"text-gray-600 hover:bg-pink-50"} hover:text-[#FF1B6B] rounded text-left flex items-center gap-2`,children:[e.jsx("span",{className:"text-gray-400 group-hover/item:text-[#FF1B6B] transition-colors",children:f.icon}),e.jsx("span",{children:f.name})]},f.name))})]},E))})]},l.id))})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Search products...",value:p,onChange:l=>g(l.target.value),className:`w-full pl-12 pr-4 py-3 ${s?"bg-gray-800 border-gray-700 text-gray-200 placeholder-gray-400":"bg-white border-gray-200 text-gray-900 placeholder-gray-400"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors`}),e.jsx(na,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 text-xl"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",ref:A,onMouseEnter:()=>B(!0),onMouseLeave:()=>B(!1),children:[e.jsxs("button",{type:"button",className:`px-4 py-3 ${s?"bg-gray-800 border-gray-700 hover:bg-gray-700":"bg-white border-gray-200 hover:bg-gray-50"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors min-w-[160px] text-left flex items-center justify-between`,children:[e.jsx("span",{className:s?"text-gray-200":"text-gray-700",children:D.find(l=>l.value===y)?.label||"All Networks"}),e.jsx("svg",{className:`w-5 h-5 ${s?"text-gray-400":"text-gray-500"} transition-transform ${P?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),P&&e.jsx("div",{className:`absolute z-10 w-full mt-1 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-lg border`,children:D.map(l=>e.jsx("button",{onClick:()=>C(l.value),className:`w-full px-4 py-2 text-left ${y===l.value?"bg-pink-50 text-[#FF1B6B]":s?"text-gray-200 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"} first:rounded-t-lg last:rounded-b-lg`,children:l.label},l.value))})]}),e.jsxs("div",{className:"relative",ref:x,onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[e.jsxs("button",{type:"button",className:`px-4 py-3 ${s?"bg-gray-800 border-gray-700 hover:bg-gray-700":"bg-white border-gray-200 hover:bg-gray-50"} rounded-lg border focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors min-w-[160px] text-left flex items-center justify-between`,children:[e.jsx("span",{className:s?"text-gray-200":"text-gray-700",children:m.find(l=>l.value===k)?.label||"Latest"}),e.jsx("svg",{className:`w-5 h-5 ${s?"text-gray-400":"text-gray-500"} transition-transform ${v?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),v&&e.jsx("div",{className:`absolute z-10 w-full mt-1 ${s?"bg-gray-800 border-gray-700":"bg-white border-gray-200"} rounded-lg shadow-lg border`,children:m.map(l=>e.jsx("button",{onClick:()=>j(l.value),className:`w-full px-4 py-2 text-left ${k===l.value?"bg-pink-50 text-[#FF1B6B]":s?"text-gray-200 hover:bg-gray-700":"text-gray-700 hover:bg-gray-50"} first:rounded-t-lg last:rounded-b-lg`,children:l.label},l.value))})]})]})]}),e.jsx(M.div,{variants:F,children:e.jsx(rl,{products:o})}),e.jsx(M.div,{variants:F,children:e.jsx($n,{products:o})}),z.length===0?e.jsx(M.div,{variants:F,className:"text-center py-12",children:e.jsx("p",{className:`${s?"text-gray-400":"text-gray-500"}`,children:"No products found."})}):e.jsx(M.div,{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",variants:u,children:z.map(l=>e.jsx(al,{product:l},l.id))})]})},Ne=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},nl=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:`max-w-7xl mx-auto p-4 ${s?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden",children:e.jsx(Ne,{})}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:[1,2,3,4].map(t=>e.jsx("div",{className:"aspect-square rounded-lg overflow-hidden",children:e.jsx(Ne,{})},t))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-3/4 h-8",children:e.jsx(Ne,{})}),e.jsx("div",{className:"w-1/2 h-6",children:e.jsx(Ne,{})}),e.jsx("div",{className:"w-full h-32",children:e.jsx(Ne,{})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8",children:e.jsx(Ne,{})}),e.jsx("div",{className:"w-24 h-8",children:e.jsx(Ne,{})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-32 h-10",children:e.jsx(Ne,{})}),e.jsx("div",{className:"w-full h-12",children:e.jsx(Ne,{})})]}),e.jsx("div",{className:"border-t pt-6 mt-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden",children:e.jsx(Ne,{})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-4",children:e.jsx(Ne,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(Ne,{})})]})]})})]})]}),e.jsxs("div",{className:"mt-12 space-y-4",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(Ne,{})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"aspect-square",children:e.jsx(Ne,{})}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-4",children:e.jsx(Ne,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(Ne,{})}),e.jsx("div",{className:"w-1/3 h-4",children:e.jsx(Ne,{})})]})]},t))})]})]})},to=()=>{const{id:s}=Kt(),t=De(),{user:a,updateCartCount:o}=be(),[r,p]=n.useState(null),{isDarkMode:g}=ne(),[i,$]=n.useState(null),[k,j]=n.useState(1),[y,C]=n.useState(!0),[P,B]=n.useState(0),[v,I]=n.useState([]),[A,x]=n.useState(0),[m,d]=n.useState(""),[b,h]=n.useState(""),[D,V]=n.useState(!1);n.useEffect(()=>{if(!s)return;(async()=>{C(!0);try{const w=await oe(te(O,"products",s));if(w.exists()){const U={id:w.id,...w.data()};if(p(U),U.sellerId){const H=await oe(te(O,"sellers",U.sellerId));H.exists()&&$({id:H.id,...H.data()})}z()}}catch(w){console.error("Error fetching product:",w),N.error("Failed to load product details")}finally{C(!1)}})()},[s]),n.useEffect(()=>{if(r){const U=(r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price)*k,H=r.shippingFee||0,K=U+H;x(K)}},[k,r]);const z=async()=>{try{const c=await oe(te(O,"products",s));if(c.exists()){const w=c.data();let U=de(re(O,"products"),ie("sellerId","==",w.sellerId),ie("status","==","active"),lt(4)),H=await ge(U),K=H.docs.map(_=>({id:_.id,..._.data()})).filter(_=>_.id!==s);K.length===0&&(U=de(re(O,"products"),ie("category","==",w.category),ie("status","==","active"),lt(4)),H=await ge(U),K=H.docs.map(_=>({id:_.id,..._.data()})).filter(_=>_.id!==s)),I(K)}}catch(c){console.error("Error fetching similar products:",c)}},u=c=>{if(!b&&r.hasVariants){N.error("Please select a color first");return}const w=r.hasVariants?r.colorQuantities[b]:r.quantity,U=Math.max(1,Math.min(w,k+c));j(U)},F=async()=>{try{if(!a){N.error("Please login to add items to cart"),t("/merch-store/login");return}if(r.category==="clothing"&&r.hasVariants){if(!m){N.error("Please select a size");return}if(!b){N.error("Please select a color");return}}const c=await oe(te(O,"products",s));if(!c.exists()){N.error("Product not found");return}const w=c.data(),U=r.hasVariants?w.colorQuantities?.[b]||0:w.quantity,H=de(re(O,"cart"),ie("userId","==",a.uid),ie("productId","==",s),ie("size","==",m||null),ie("color","==",b||null));if(((await ge(H)).docs[0]?.data()?.quantity||0)+k>U){N.error(`Sorry, only ${U} items available in ${b||"stock"}`);return}const Y=N.loading("Adding to cart..."),Q=re(O,"cart"),R=de(Q,ie("userId","==",a.uid),ie("productId","==",s),ie("size","==",m||null),ie("color","==",b||null)),J=await ge(R);if(J.empty)await Pe(Q,{userId:a.uid,productId:s,quantity:k,size:m||null,color:b||null,addedAt:ue(),price:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price,isDiscounted:r.hasDiscount&&new Date<new Date(r.discountEndsAt),originalPrice:r.price,discountedPrice:r.discountedPrice,discountEndsAt:r.discountEndsAt}),N.dismiss(Y),N.success(`Added ${k} item${k>1?"s":""} to cart`);else{const se=J.docs[0],W=se.data().quantity;await xe(te(O,"cart",se.id),{quantity:W+k,price:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price,isDiscounted:r.hasDiscount&&new Date<new Date(r.discountEndsAt),originalPrice:r.price,discountedPrice:r.discountedPrice,discountEndsAt:r.discountEndsAt}),N.dismiss(Y),N.success(`Updated quantity in cart (+${k})`)}await o(a.uid)}catch(c){console.error("Error adding to cart:",c),N.error("Failed to add to cart")}},l=async()=>{try{if(!a){N.error("Please login to purchase items"),t("/merch-store/login");return}if(r.category==="clothing"&&r.hasVariants){if(!m){N.error("Please select a size");return}if(!b){N.error("Please select a color");return}}const c=await oe(te(O,"products",s));if(!c.exists()){N.error("Product not found");return}const w=c.data(),U=r.hasVariants?w.colorQuantities?.[b]||0:w.quantity;if(k>U){N.error(`Sorry, only ${U} items available in ${b||"stock"}`);return}const H=N.loading("Processing..."),K=de(re(O,"cart"),ie("userId","==",a.uid)),ee=(await ge(K)).docs.map(Y=>jt(Y.ref));await Promise.all(ee),await Pe(re(O,"cart"),{userId:a.uid,productId:s,quantity:k,size:m||null,color:b||null,addedAt:ue(),price:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?r.discountedPrice:r.price,isDiscounted:r.hasDiscount&&new Date<new Date(r.discountEndsAt),originalPrice:r.price,discountedPrice:r.discountedPrice,discountEndsAt:r.discountEndsAt}),await o(a.uid),N.dismiss(H),t("/merch-store/checkout"),await S(s,b,k)}catch(c){console.error("Error processing buy now:",c),N.error("Failed to process. Please try again.")}},E=async()=>{if(!a){N.error("Please log in to contact the store");return}try{const c=N.loading("Starting conversation..."),w=de(re(O,"conversations"),ie("participants","array-contains",a.uid),ie("sellerId","==",r.sellerId)),U=await ge(w);let H;if(!U.empty)H=U.docs[0].id,await Pe(re(O,"messages"),{conversationId:H,senderId:a.uid,text:"Hi, I'm interested in this product:",timestamp:ue(),productCard:{productId:r.id,name:r.name,description:r.description,price:r.price,image:r.images[0]}}),await xe(te(O,"conversations",H),{lastMessage:"Hi, I'm interested in this product:",lastMessageTime:ue(),[`unreadCount.${r.sellerId}`]:(U.docs[0].data().unreadCount?.[r.sellerId]||0)+1,updatedAt:ue()});else{const K=await Pe(re(O,"conversations"),{participants:[a.uid,r.sellerId],buyerId:a.uid,sellerId:r.sellerId,buyerName:a.displayName||"Token Factory Shopper",sellerName:r.sellerName,isVerifiedSeller:i?.verificationStatus==="approved",unreadCount:{[r.sellerId]:1,[a.uid]:0},createdAt:ue(),updatedAt:ue()});H=K.id,await Pe(re(O,"messages"),{conversationId:K.id,senderId:a.uid,text:"Hi, I'm interested in this product:",timestamp:ue(),productCard:{productId:r.id,name:r.name,description:r.description,price:r.price,image:r.images[0]}}),await xe(K,{lastMessage:"Hi, I'm interested in this product:",lastMessageTime:ue()})}N.dismiss(c),N.success("Message sent successfully!"),t(`/merch-store/inbox/${H}`)}catch(c){console.error("Error creating conversation:",c),N.error("Failed to start conversation")}},L={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},f={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},q=()=>{if(!i||!r)return null;const c={sepolia:"11155111",polygon:"137",unichain:"1301"},w=i.preferredNetwork?.toLowerCase(),U=c[w];if(!U)return console.warn("Invalid network name:",w),null;const H=r.acceptedToken,_={11155111:{USDC:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",USDT:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0"},137:{USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F"},1301:{USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F",USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844"}}[U]?.[H];return _||(console.warn(`No contract address found for token ${H} on network ${U}`),null)},G=async()=>{const c=q();c&&(await navigator.clipboard.writeText(c),V(!0),setTimeout(()=>V(!1),2e3))},T=c=>c?`${c.slice(0,6)}...${c.slice(-4)}`:"",S=async(c,w,U)=>{const H=te(O,"products",c),K=await oe(H);if(!K.exists())throw new Error("Product not found");const _=K.data();if(_.hasVariants&&w){const ee=_.colorQuantities[w]||0,Y=Math.max(0,ee-U),Q={..._.colorQuantities,[w]:Y},R=Object.values(Q).reduce((J,se)=>J+se,0);await xe(H,{colorQuantities:Q,quantity:R})}else{const ee=Math.max(0,_.quantity-U);await xe(H,{quantity:ee})}};return y?e.jsx(nl,{}):r?e.jsx("div",{className:`container mx-auto px-4 py-8 ${g?"bg-gray-900":"bg-white"}`,children:e.jsxs(M.div,{className:"max-w-6xl mx-auto p-4",initial:"hidden",animate:"visible",variants:L,children:[e.jsxs(M.button,{variants:f,onClick:()=>t(-1),className:`flex items-center gap-2 ${g?"text-gray-300 hover:text-[#FF1B6B]":"text-gray-600 hover:text-[#FF1B6B]"} mb-6`,children:[e.jsx(St,{className:"text-xl"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs(M.div,{variants:f,className:"space-y-4",children:[e.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden relative",children:[e.jsx("img",{src:r.images[P],alt:r.name,className:"w-full h-full object-cover"}),r.hasDiscount&&new Date<new Date(r.discountEndsAt)&&e.jsxs(M.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"absolute bottom-0 left-0 right-0 bg-[#FF1B6B] text-white px-4 py-2.5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),e.jsxs("span",{className:"font-bold",children:[r.discountPercent,"% OFF"]})]}),e.jsxs("div",{className:"text-sm flex items-center gap-2",children:[e.jsx("span",{children:""}),e.jsxs("span",{children:["Ends in ",e.jsx(Bn,{endsAt:r.discountEndsAt})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.images.map((c,w)=>e.jsx("button",{onClick:()=>B(w),className:`aspect-square rounded-lg overflow-hidden border-2 transition-colors ${P===w?"border-[#FF1B6B]":"border-transparent hover:border-gray-200"}`,children:e.jsx("img",{src:c,alt:`${r.name} ${w+1}`,className:"w-full h-full object-cover"})},w))})]}),e.jsxs(M.div,{variants:f,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("h1",{className:`text-2xl font-bold ${g?"text-gray-100":"text-gray-800"} mb-2`,children:r.name}),i&&e.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 ${g?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"} rounded-lg border shrink-0`,children:[e.jsx("span",{className:`text-sm font-medium ${g?"text-gray-300":"text-gray-700"}`,children:i.storeName}),i.verificationStatus==="approved"&&e.jsxs("div",{className:"group relative inline-flex items-center",children:[e.jsx(Ke,{className:"!w-[10px] !h-[10px] min-w-[10px] min-h-[10px]"}),e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-1 py-0.5 bg-gray-900 text-white text-[8px] rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10",children:"Verified Store"})]}),i.country?.code&&e.jsx(Ht,{countryCode:i.country.code,svg:!0,style:{width:"1.2em",height:"1.2em"},className:"rounded-sm shadow-sm"})]})]}),e.jsx("p",{className:`${g?"text-gray-300":"text-gray-600"}`,children:r.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:r.tokenLogo,alt:r.acceptedToken,className:"w-6 h-6"}),e.jsx("div",{className:"flex flex-col",children:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-[#FF1B6B]",children:[r.acceptedToken," ",r.discountedPrice.toFixed(2)]}),e.jsxs("span",{className:"text-lg line-through text-gray-400",children:[r.acceptedToken," ",r.price.toFixed(2)]})]}),e.jsxs("div",{className:"text-sm text-[#FF1B6B]",children:["Save ",r.acceptedToken," ",(r.price-r.discountedPrice).toFixed(2)]})]}):e.jsxs("span",{className:"text-2xl font-bold text-[#FF1B6B]",children:[r.acceptedToken," ",r.price.toFixed(2)]})})]}),e.jsx("div",{className:`px-4 py-2 rounded-lg font-medium ${r.quantity>10?g?"bg-green-900/20 text-green-400":"bg-green-100 text-green-700":r.quantity>0?g?"bg-orange-900/20 text-orange-400":"bg-orange-100 text-orange-700":g?"bg-red-900/20 text-red-400":"bg-red-100 text-red-700"}`,children:r.quantity>10?"In Stock":r.quantity>0?`Only ${r.quantity} left`:"Out of Stock"})]}),r.hasVariants&&e.jsxs("div",{className:"space-y-4",children:[r.sizes.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"} block mb-3`,children:"Select Size"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.sizes.map(c=>e.jsx("button",{onClick:()=>d(c),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${m===c?"bg-[#FF1B6B] text-white":g?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:c},c))})]}),r.colors.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"} block mb-3`,children:"Select Color"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.colors.map(c=>{const w=r.colorQuantities[c]>0;return e.jsxs("button",{onClick:()=>h(c),disabled:!w,className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${b===c?"bg-[#FF1B6B] text-white":w?g?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200":g?"bg-gray-800 text-gray-500 cursor-not-allowed":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:[e.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:c.toLowerCase()}}),e.jsx("span",{children:c}),e.jsxs("span",{className:"text-xs",children:["(",r.colorQuantities[c]||0,")"]})]},c)})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"}`,children:"Quantity:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u(-1),disabled:k<=1,className:"p-1 rounded-full hover:bg-pink-50 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx(ia,{className:"text-xl"})}),e.jsx("span",{className:"w-12 text-center font-medium",children:k}),e.jsx("button",{onClick:()=>u(1),disabled:k>=r.quantity,className:"p-1 rounded-full hover:bg-pink-50 disabled:opacity-50 disabled:hover:bg-transparent",children:e.jsx(hs,{className:"text-xl"})})]})]}),e.jsxs("div",{className:`${g?"bg-gray-800":"bg-gray-50"} p-4 rounded-lg space-y-2`,children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"}`,children:"Subtotal:"}),e.jsx("div",{className:"text-right",children:r.hasDiscount&&new Date<new Date(r.discountEndsAt)?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:`font-medium ${g?"text-gray-200":"text-gray-900"}`,children:[r.acceptedToken," ",(r.discountedPrice*k).toFixed(2)]}),e.jsxs("div",{className:"text-xs text-gray-400 line-through",children:[r.acceptedToken," ",(r.price*k).toFixed(2)]})]}):e.jsxs("span",{className:`font-medium ${g?"text-gray-200":"text-gray-900"}`,children:[r.acceptedToken," ",(r.price*k).toFixed(2)]})})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"}`,children:"Shipping Fee:"}),e.jsxs("span",{className:`font-medium ${g?"text-gray-200":"text-gray-900"}`,children:[r.acceptedToken," ",(r.shippingFee||0).toFixed(2)]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between font-medium",children:[e.jsx("span",{className:`${g?"text-gray-200":"text-gray-900"}`,children:"Total:"}),e.jsxs("span",{className:"text-[#FF1B6B]",children:[r.acceptedToken," ",A.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("button",{onClick:F,className:`flex-1 flex items-center justify-center gap-2 py-3 ${g?"bg-gray-800 text-gray-200 hover:bg-gray-700 hover:text-[#FF1B6B]":"bg-gray-100 text-gray-800 hover:bg-gray-100 hover:text-[#FF1B6B]"} rounded-lg transition-colors`,children:[e.jsx(ur,{className:"text-xl"}),"Add to Cart"]}),e.jsxs("button",{onClick:l,className:"flex-1 flex items-center justify-center gap-2 py-3 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:[e.jsx(ut,{className:"text-xl"}),"Buy Now"]})]}),e.jsxs("button",{onClick:E,className:`w-full flex items-center justify-center gap-2 py-3 ${g?"bg-gray-800 border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-gray-700":"bg-white border-2 border-[#FF1B6B] text-[#FF1B6B] hover:bg-pink-50"} rounded-lg transition-colors mt-2`,children:[e.jsx(ps,{className:"text-xl"}),"Contact Store"]})]}),e.jsxs("div",{className:`border-t ${g?"border-gray-700":"border-gray-200"} pt-6 space-y-6`,children:[e.jsx("h2",{className:`text-xl font-semibold ${g?"text-gray-100":"text-gray-800"} mb-4`,children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx("div",{className:`${g?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"}`,children:"Category"}),e.jsx("span",{className:`${g?"text-gray-100":"text-gray-800"} font-medium`,children:r.category.charAt(0).toUpperCase()+r.category.slice(1)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"}`,children:"Payment Token"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:r.tokenLogo,alt:r.acceptedToken,className:"w-4 h-4"}),e.jsx("span",{className:`${g?"text-gray-100":"text-gray-800"} font-medium`,children:r.acceptedToken})]})]})]})}),e.jsx("div",{className:`${g?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"}`,children:"Token Contract"}),q()&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("div",{className:"px-2 py-1 rounded-full bg-purple-100 text-purple-700 text-xs font-medium",children:i?.preferredNetwork?.toUpperCase()})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`${g?"bg-gray-700":"bg-gray-50"} rounded-lg overflow-hidden`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`px-4 py-2.5 font-mono text-sm ${g?"text-gray-300":"text-gray-700"}`,children:q()?T(q()):"Network or token not configured"}),q()&&e.jsx("button",{onClick:G,className:"px-4 py-2.5 text-gray-400 hover:text-[#FF1B6B] transition-colors",title:"Copy full contract address",children:e.jsx(hr,{className:`text-lg ${D?"text-[#FF1B6B]":""}`})})]})}),D&&e.jsx("div",{className:"absolute -right-2 top-1/2 -translate-y-1/2 transform translate-x-full",children:e.jsx("span",{className:"bg-[#FF1B6B] text-white text-xs px-2 py-1 rounded",children:"Copied!"})})]}),q()&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1.5",children:[e.jsx("svg",{className:"w-3.5 h-3.5 text-[#FF1B6B]",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Copy to acquire ",r.acceptedToken," on ",i?.preferredNetwork?.toLowerCase()==="sepolia"?"Sepolia":i?.preferredNetwork?.toLowerCase()==="polygon"?"Polygon":i?.preferredNetwork?.toLowerCase()==="unichain"?"Unichain":"Unknown"," network"]})]})}),r.category==="clothing"&&r.hasVariants&&e.jsx("div",{className:`${g?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm md:col-span-2`,children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"} block mb-3`,children:"Available Sizes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.sizes.map(c=>e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${g?"text-gray-200 bg-gray-700":"text-gray-700 bg-gray-50"}`,children:c},c))})]}),e.jsxs("div",{children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"} block mb-3`,children:"Available Colors"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.colors.map(c=>e.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full ${g?"bg-gray-700":"bg-gray-50"}`,children:[e.jsx("span",{className:"w-3 h-3 rounded-full border border-gray-200",style:{backgroundColor:c.toLowerCase()}}),e.jsx("span",{className:`text-sm font-medium ${g?"text-gray-200":"text-gray-700"}`,children:c})]},c))})]})]})})]})]}),e.jsxs("div",{className:`border-t ${g?"border-gray-700":"border-gray-200"} pt-6 mt-6`,children:[e.jsx("h3",{className:`text-xl font-semibold ${g?"text-gray-100":"text-gray-800"} mb-4`,children:"Shipping Details"}),e.jsxs("div",{className:`${g?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm space-y-4`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`${g?"text-gray-300":"text-gray-600"}`,children:"Shipping Fee"}),e.jsxs("span",{className:"font-medium text-[#FF1B6B]",children:["$",r.shippingFee?.toFixed(2)||"0.00"]})]}),r.shippingInfo&&e.jsxs("div",{className:`pt-4 border-t ${g?"border-gray-700":"border-gray-200"}`,children:[e.jsx("h4",{className:`text-sm font-medium ${g?"text-gray-200":"text-gray-700"} mb-2`,children:"Shipping Information"}),e.jsx("p",{className:`text-sm ${g?"text-gray-400":"text-gray-600"} leading-relaxed`,children:r.shippingInfo})]})]})]})]})]}),v.length>0&&e.jsxs(M.div,{variants:f,className:`mt-12 border-t ${g?"border-gray-700":"border-gray-200"} pt-8`,children:[e.jsx("h2",{className:`text-xl font-bold ${g?"text-gray-100":"text-gray-800"} mb-2`,children:v[0].sellerId===r.sellerId?`More from ${r.sellerName}`:"Similar Products"}),e.jsx("p",{className:`${g?"text-gray-400":"text-gray-500"} text-sm mb-6`,children:v[0].sellerId===r.sellerId?"Check out other items from this store":"You might also like these products"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:v.map(c=>e.jsx(M.div,{className:`${g?"bg-gray-800":"bg-white"} rounded-lg shadow-sm overflow-hidden group`,whileHover:{y:-3},children:e.jsxs("button",{onClick:()=>{t(`/merch-store/product/${c.id}`),window.scrollTo(0,0)},className:"w-full text-left",children:[e.jsx("div",{className:"aspect-square relative overflow-hidden",children:e.jsx("img",{src:c.images[0],alt:c.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("h3",{className:`font-medium ${g?"text-gray-200":"text-gray-800"} mb-1 truncate`,children:c.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:c.tokenLogo,alt:c.acceptedToken,className:"w-4 h-4"}),e.jsxs("p",{className:"text-[#FF1B6B] font-medium",children:["$",c.price.toFixed(2)]})]}),e.jsxs("p",{className:`text-xs ${g?"text-gray-400":"text-gray-500"} mt-1`,children:["by ",c.sellerName]})]})]})},c.id))})]}),e.jsx(M.div,{variants:f,className:`mt-12 border-t ${g?"border-gray-700":"border-gray-200"} pt-8`,children:e.jsx("div",{className:`${g?"bg-gray-800":"bg-white"} p-6 rounded-2xl shadow-sm`,children:e.jsx(Tn,{productId:s})})})]})}):e.jsx("div",{className:`min-h-screen ${g?"bg-gray-900":"bg-gray-50"} flex items-center justify-center`,children:e.jsx("div",{className:`${g?"text-gray-400":"text-gray-500"}`,children:"Product not found"})})},ke=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},il=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:`max-w-7xl mx-auto p-4 ${s?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-32 h-8",children:e.jsx(ke,{})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:[1,2,3].map(t=>e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4`,children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx(ke,{})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-5",children:e.jsx(ke,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(ke,{})}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx("div",{className:"w-32 h-8",children:e.jsx(ke,{})}),e.jsx("div",{className:"w-24 h-8",children:e.jsx(ke,{})})]})]})]})},t))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6 space-y-4`,children:[e.jsx("div",{className:"w-40 h-6",children:e.jsx(ke,{})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(ke,{})}),e.jsx("div",{className:"w-20 h-4",children:e.jsx(ke,{})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(ke,{})}),e.jsx("div",{className:"w-20 h-4",children:e.jsx(ke,{})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(ke,{})}),e.jsx("div",{className:"w-20 h-4",children:e.jsx(ke,{})})]})]}),e.jsx("div",{className:`border-t ${s?"border-gray-700":"border-gray-200"} pt-4 mt-4`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"w-32 h-6",children:e.jsx(ke,{})}),e.jsx("div",{className:"w-28 h-6",children:e.jsx(ke,{})})]})}),e.jsx("div",{className:"w-full h-12 mt-6",children:e.jsx(ke,{})})]})})]})]})},so=()=>{const{user:s,updateCartCount:t}=be(),{isDarkMode:a}=ne(),[o,r]=n.useState(!0),[p,g]=n.useState([]),[i,$]=n.useState(2.5),k=De();n.useEffect(()=>{y(),j()},[s]);const j=async()=>{try{const x=await oe(te(O,"settings","platform"));if(x.exists()){const m=x.data();$(m.platformFee||2.5)}}catch(x){console.error("Error fetching platform fee:",x),$(2.5)}},y=async()=>{try{const x=de(re(O,"cart"),ie("userId","==",s.uid)),m=await ge(x),d=[];for(const b of m.docs){const h=b.data(),D=await oe(te(O,"products",h.productId));if(D.exists()){const V=D.data();d.push({id:b.id,quantity:h.quantity,product:{id:D.id,...V}})}}g(d)}catch(x){console.error("Error fetching cart items:",x),N.error("Failed to load cart items")}finally{r(!1)}},C=async(x,m)=>{try{const d=te(O,"cart",x),b=p.find(V=>V.id===x),h=await oe(te(O,"products",b.product.id));if(!h.exists()){N.error("Product not found");return}const D=h.data().quantity;if(m>D){N.error(`Sorry, only ${D} items available in stock`);return}await xe(d,{quantity:m}),g(V=>V.map(z=>z.id===x?{...z,quantity:m}:z))}catch(d){console.error("Error updating quantity:",d),N.error("Failed to update quantity")}},P=async x=>{try{await jt(te(O,"cart",x)),g(m=>m.filter(d=>d.id!==x)),await t(s.uid),N.success("Item removed from cart")}catch(m){console.error("Error removing item:",m),N.error("Failed to remove item")}},B=()=>p.reduce((x,m)=>{const b=m.product.hasDiscount&&new Date<new Date(m.product.discountEndsAt)?m.product.discountedPrice:m.product.price;return x+b*m.quantity},0),v=()=>{if(p.length===0){N.error("Your cart is empty");return}k("/merch-store/checkout")},I={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},A={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}};return o?e.jsx(il,{}):e.jsxs(M.div,{className:`max-w-4xl mx-auto p-4 space-y-6 ${a?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:I,children:[e.jsx(M.h1,{variants:A,className:`text-2xl font-bold ${a?"text-gray-100":"text-gray-800"}`,children:"Shopping Cart"}),p.length===0?e.jsxs(M.div,{variants:A,className:`text-center py-12 ${a?"bg-gray-800":"bg-white"} rounded-lg`,children:[e.jsx("p",{className:`${a?"text-gray-400":"text-gray-500"} mb-4`,children:"Your cart is empty"}),e.jsx(ve,{to:"/merch-store",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Continue Shopping"})]}):e.jsxs(e.Fragment,{children:[e.jsx(M.div,{variants:I,className:"space-y-4",children:p.map(x=>e.jsxs(M.div,{variants:A,className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-4 flex gap-4 items-center`,children:[e.jsx(ve,{to:`/merch-store/product/${x.product.id}`,className:"w-24 h-24 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:x.product.images[0],alt:x.product.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ve,{to:`/merch-store/product/${x.product.id}`,className:`font-medium ${a?"text-gray-100 hover:text-[#FF1B6B]":"text-gray-800 hover:text-[#FF1B6B]"}`,children:x.product.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("img",{src:x.product.tokenLogo,alt:x.product.acceptedToken,className:"w-4 h-4"}),e.jsx("span",{className:"text-[#FF1B6B] font-medium",children:x.product.hasDiscount&&new Date<new Date(x.product.discountEndsAt)?e.jsxs(e.Fragment,{children:["$",x.product.discountedPrice.toFixed(2),e.jsxs("span",{className:`text-sm ${a?"text-gray-500":"text-gray-400"} line-through ml-1`,children:["$",x.product.price.toFixed(2)]})]}):`$${x.product.price.toFixed(2)}`})]}),e.jsxs("p",{className:`text-sm ${a?"text-gray-400":"text-gray-500"} mt-1`,children:["Sold by ",x.product.sellerName]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(x.id,x.quantity-1),className:`p-1 rounded-full ${a?"hover:bg-gray-700":"hover:bg-gray-100"} ${a?"text-gray-300":"text-gray-600"}`,disabled:x.quantity<=1,children:e.jsx(ia,{className:"text-lg"})}),e.jsx("span",{className:`w-8 text-center ${a?"text-gray-300":"text-gray-600"}`,children:x.quantity}),e.jsx("button",{onClick:()=>C(x.id,x.quantity+1),className:`p-1 rounded-full ${a?"hover:bg-gray-700":"hover:bg-gray-100"} ${a?"text-gray-300":"text-gray-600"}`,disabled:x.quantity>=x.product.quantity,children:e.jsx(hs,{className:"text-lg"})})]}),e.jsx("button",{onClick:()=>P(x.id),className:`p-2 ${a?"text-gray-500 hover:text-red-400":"text-gray-400 hover:text-red-500"} transition-colors`,children:e.jsx(bt,{className:"text-xl"})})]})]},x.id))}),e.jsxs(M.div,{variants:A,className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-6 space-y-4`,children:[e.jsx("h2",{className:`font-bold ${a?"text-gray-100":"text-gray-800"}`,children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"Subtotal"}),e.jsxs("span",{className:`${a?"text-gray-300":"text-gray-600"}`,children:["$",B().toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-bold ${a?"text-gray-100":"text-gray-800"} pt-2 border-t ${a?"border-gray-700":"border-gray-200"}`,children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",B().toFixed(2)]})]})]}),e.jsx("button",{onClick:v,className:"w-full py-3 bg-[#FF1B6B] text-white rounded-lg font-medium hover:bg-[#D4145A] transition-colors",children:"Proceed to Checkout"})]})]})]})},Ie=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},ll=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"max-w-7xl mx-auto p-4",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"w-32 h-8",children:e.jsx(Ie,{})})}),e.jsx("div",{className:"space-y-6",children:[1,2,3].map(t=>e.jsxs("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-48 h-5",children:e.jsx(Ie,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(Ie,{})})]}),e.jsx("div",{className:"w-24 h-8",children:e.jsx(Ie,{})})]}),e.jsx("div",{className:`border-t ${s?"border-gray-700":"border-gray-200"} pt-4 space-y-4`,children:[1,2].map(a=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx(Ie,{})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"w-3/4 h-5",children:e.jsx(Ie,{})}),e.jsx("div",{className:"w-1/2 h-4",children:e.jsx(Ie,{})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-4",children:e.jsx(Ie,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(Ie,{})})]})]})]},a))}),e.jsx("div",{className:`border-t ${s?"border-gray-700":"border-gray-200"} mt-4 pt-4`,children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-32 h-4",children:e.jsx(Ie,{})}),e.jsx("div",{className:"w-48 h-4",children:e.jsx(Ie,{})})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"w-32 h-6",children:e.jsx(Ie,{})}),e.jsx("div",{className:"w-24 h-4",children:e.jsx(Ie,{})})]})]})})]},t))})]})},ol=({isOpen:s,onClose:t,order:a})=>{const[o,r]=n.useState(!1),[p,g]=n.useState(!1),[i,$]=n.useState(""),{isDarkMode:k}=ne();n.useEffect(()=>{j()},[]);const j=async()=>{try{const B=await ze();if(B){const v=await B.request({method:"eth_accounts"});v.length>0&&($(v[0]),g(!0))}}catch(B){console.error("Error checking wallet connection:",B)}},y=async()=>{if(a.status!=="cancelled"){N.error("Only cancelled orders are eligible for refund requests");return}r(!0);try{const B=await oe(te(O,"sellers",a.sellerId));if(!B.exists())throw new Error(`Seller not found with ID: ${a.sellerId}`);const v=B.data().walletAddress,I=a.paymentMethod?.buyerWallet;if(!I||!pt(I))throw new Error("Invalid buyer wallet address");if(!v||!pt(v))throw new Error(`Invalid seller wallet address: ${v}`);const A=a.total*.95,x={orderId:a.id,buyerId:a.buyerId,sellerId:a.sellerId,amount:A,originalAmount:a.total,paymentAddress:I,status:"pending",createdAt:ue(),network:a.paymentMethod.network,orderDetails:{items:a.items,total:a.total,paymentMethod:a.paymentMethod}};await Pe(re(O,"refundRequests"),x),N.success("Refund request submitted successfully"),t()}catch(B){console.error("Error submitting refund request:",B),N.error(B.message||"Failed to submit refund request")}finally{r(!1)}};if(!s)return null;const C=a.total*.05,P=a.total*.95;return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:`${k?"bg-gray-800":"bg-white"} rounded-lg p-6 max-w-md w-full mx-4`,children:[e.jsx("h2",{className:`text-xl font-semibold ${k?"text-gray-100":"text-gray-900"} mb-4`,children:"Request Refund"}),a.status!=="cancelled"?e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"text-yellow-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800",children:"Not Eligible for Refund"}),e.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:[`Only cancelled orders are eligible for refund requests. This order's status is "`,a.status,'".']})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"text-blue-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Refund Processing Time"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Refund requests typically take up to 1 week to process."})]})]})}),e.jsx("div",{className:"mb-4 p-4 bg-pink-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"text-[#FF1B6B] text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Platform Fee Notice"}),e.jsxs("p",{className:"text-sm text-[#FF1B6B]/80 mt-1",children:["The 5% platform fee ($",C.toFixed(2),") is non-refundable as it was deducted at the time of purchase."]})]})]})})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${k?"text-gray-300":"text-gray-700"} mb-1`,children:"Order ID"}),e.jsx("input",{type:"text",value:`#${a.id.slice(-6)}`,disabled:!0,className:`w-full px-3 py-2 ${k?"bg-gray-700 text-gray-200 border-gray-600":"bg-gray-50 text-gray-700 border-gray-300"} border rounded-lg`})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${k?"text-gray-300":"text-gray-700"} mb-1`,children:"Payment Address"}),e.jsx("input",{type:"text",value:a.paymentMethod.buyerWallet,disabled:!0,className:`w-full px-3 py-2 ${k?"bg-gray-700 text-gray-200 border-gray-600":"bg-gray-50 text-gray-700 border-gray-300"} border rounded-lg`})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${k?"text-gray-300":"text-gray-700"} mb-1`,children:"Original Amount"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`/${a.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:a.paymentMethod?.token||"USDT",className:"w-5 h-5"}),e.jsx("input",{type:"text",value:`$${a.total.toFixed(2)}`,disabled:!0,className:`flex-1 px-3 py-2 ${k?"bg-gray-700 text-gray-200 border-gray-600":"bg-gray-50 text-gray-700 border-gray-300"} border rounded-lg line-through`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-[#FF1B6B] mb-1",children:"Refund Amount (after 5% platform fee)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:`/${a.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:a.paymentMethod?.token||"USDT",className:"w-5 h-5"}),e.jsx("input",{type:"text",value:`$${P.toFixed(2)}`,disabled:!0,className:`flex-1 px-3 py-2 bg-[#FF1B6B]/5 border border-[#FF1B6B]/20 rounded-lg ${k?"text-gray-200":"text-gray-700"} font-medium`})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:t,className:`px-4 py-2 ${k?"text-gray-300 hover:text-gray-100":"text-gray-700 hover:text-gray-900"}`,children:"Cancel"}),e.jsx("button",{onClick:y,disabled:o||a.status!=="cancelled",className:`px-4 py-2 rounded-lg text-white ${a.status!=="cancelled"?"bg-gray-400 cursor-not-allowed":o?"bg-[#FF1B6B] opacity-50 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"}`,children:o?"Submitting...":"Submit Refund Request"})]})]})})},dl=({isOpen:s,onClose:t,onConfirm:a,orderId:o})=>{const[r,p]=n.useState(!1),{isDarkMode:g}=ne(),i=async()=>{p(!0),await a(o),p(!1),t()};return s?e.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50",children:[e.jsx("div",{className:`fixed inset-0 ${g?"bg-gray-900":"bg-white"} bg-opacity-90`,onClick:t}),e.jsxs("div",{className:`${g?"bg-gray-800":"bg-white"} rounded-lg shadow-xl max-w-md w-full mx-4 p-6 relative z-50`,children:[e.jsx("h3",{className:`text-xl font-semibold ${g?"text-gray-100":"text-gray-900"} mb-4`,children:"Confirm Delivery"}),e.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"text-blue-500 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Please confirm that you have received your order."}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"This will help release the payment to the seller."})]})]})}),e.jsx("div",{className:"mb-4 p-4 bg-pink-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"text-[#FF1B6B] text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Automatic Fund Release Notice"}),e.jsx("p",{className:"text-sm text-[#FF1B6B]/80 mt-1",children:"If delivery is not confirmed within 2-3 weeks of shipping and no complaint is raised about non-receipt while tracking shows delivered, the seller's funds will be automatically released."})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 ${g?"text-gray-300 hover:text-gray-100":"text-gray-700 hover:text-gray-900"}`,children:"Cancel"}),e.jsx("button",{onClick:i,disabled:r,className:"px-4 py-2 rounded-lg text-white bg-[#FF1B6B] hover:bg-[#D4145A] disabled:opacity-50",children:r?"Confirming...":"Confirm Delivery"})]})]})]}):null},cl=({isOpen:s,onClose:t,order:a,item:o})=>{const[r,p]=n.useState(0),[g,i]=n.useState(""),[$,k]=n.useState(null),[j,y]=n.useState(""),[C,P]=n.useState(!1),{user:B}=be(),{isDarkMode:v}=ne(),I=x=>{const m=x.target.files[0];if(m){if(m.size>2*1024*1024){N.error("Image must be less than 2MB");return}k(m);const d=new FileReader;d.onloadend=()=>{y(d.result)},d.readAsDataURL(m)}},A=async x=>{if(x.preventDefault(),!r){N.error("Please select a rating");return}P(!0);try{let m="";if($){const b=Ct($t,`reviews/${o.productId}/${B.uid}_${Date.now()}`);await ys(b,$),m=await fs(b)}const d={productId:o.productId,orderId:a.id,userId:B.uid,sellerId:o.sellerId||a.sellerId,rating:r,review:g.trim(),image:m,createdAt:new Date,userName:B.displayName||B.email?.split("@")[0]||"Anonymous",productName:o.name,productImage:o.image};await Pe(re(O,"reviews"),d),N.success("Review submitted successfully"),t()}catch(m){console.error("Error submitting review:",m),N.error("Failed to submit review")}finally{P(!1)}};return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:e.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:`${v?"bg-gray-800":"bg-white"} rounded-lg shadow-xl max-w-md w-full p-6`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:`text-lg font-semibold ${v?"text-gray-100":"text-gray-900"}`,children:"Write a Review"}),e.jsx("button",{onClick:t,className:`${v?"text-gray-400 hover:text-gray-300":"text-gray-500 hover:text-gray-700"}`,children:e.jsx(ht,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:`flex items-center gap-3 p-3 ${v?"bg-gray-700":"bg-gray-50"} rounded-lg mb-4`,children:[e.jsx("img",{src:o.image,alt:o.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h4",{className:`font-medium ${v?"text-gray-100":"text-gray-900"}`,children:o.name}),e.jsxs("p",{className:`text-sm ${v?"text-gray-400":"text-gray-500"}`,children:["Order #",a.id.slice(-6)]})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${v?"text-gray-300":"text-gray-700"} mb-1`,children:"Rating"}),e.jsx("div",{className:"flex items-center gap-1",children:[1,2,3,4,5].map(x=>e.jsx("button",{type:"button",onClick:()=>p(x),className:"focus:outline-none",children:e.jsx(kt,{className:`w-6 h-6 ${x<=r?"text-[#FF1B6B]":v?"text-gray-600":"text-gray-300"}`})},x))})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${v?"text-gray-300":"text-gray-700"} mb-1`,children:"Review"}),e.jsx("textarea",{value:g,onChange:x=>i(x.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${v?"bg-gray-700 border-gray-600 text-gray-200 placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-400"}`,rows:"4",placeholder:"Share your experience with this product..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${v?"text-gray-300":"text-gray-700"} mb-1`,children:"Add Image (optional)"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden"}),e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 border rounded-lg ${v?"border-gray-600 hover:bg-gray-700":"border-gray-300 hover:bg-gray-50"}`,children:[e.jsx(jr,{className:`w-5 h-5 ${v?"text-gray-400":"text-gray-500"}`}),e.jsx("span",{className:`text-sm ${v?"text-gray-300":"text-gray-700"}`,children:"Choose Image"})]})]}),j&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:j,alt:"Preview",className:"w-16 h-16 rounded-lg object-cover"}),e.jsx("button",{type:"button",onClick:()=>{k(null),y("")},className:"absolute -top-2 -right-2 bg-red-100 text-red-600 rounded-full p-0.5",children:e.jsx(ht,{className:"w-4 h-4"})})]})]})]}),e.jsx("button",{type:"submit",disabled:C,className:"w-full py-2 px-4 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#FF1B6B]/90 disabled:opacity-50",children:C?"Submitting...":"Submit Review"})]})]})})]}):null},ao=()=>{const{user:s}=be(),{isDarkMode:t}=ne(),[a,o]=n.useState(!0),[r,p]=n.useState([]),[g,i]=n.useState(null),[$,k]=n.useState(!1),[j,y]=n.useState(!1),[C,P]=n.useState(null),[B,v]=n.useState(!1),[I,A]=n.useState(null),[x,m]=n.useState(!1),[d,b]=n.useState(null);n.useEffect(()=>{h()},[s]);const h=async()=>{try{const l=de(re(O,"orders"),ie("buyerId","==",s.uid),ye("createdAt","desc")),L=(await ge(l)).docs.map(f=>({id:f.id,...f.data()}));p(L)}catch(l){console.error("Error fetching orders:",l),N.error("Failed to load orders")}finally{o(!1)}},D=l=>{switch(l.toLowerCase()){case"pending":return"bg-yellow-100 text-yellow-700";case"processing":return"bg-blue-100 text-blue-700";case"shipped":return"bg-purple-100 text-purple-700";case"delivered":return"bg-green-100 text-green-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}},V={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},z={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},u=async l=>{try{const E=te(O,"orders",l);await xe(E,{status:"delivered",deliveredAt:new Date,shippingStatus:"delivered",deliveryConfirmedByBuyer:!0}),p(L=>L.map(f=>f.id===l?{...f,status:"delivered",deliveredAt:new Date,shippingStatus:"delivered",deliveryConfirmedByBuyer:!0}:f)),N.success("Delivery confirmed successfully")}catch(E){console.error("Error confirming delivery:",E),N.error("Failed to confirm delivery")}},F=l=>{A({trackingNumber:l.trackingNumber,carrier:l.carrier}),v(!0)};return a?e.jsx(ll,{}):e.jsxs(M.div,{className:`max-w-4xl mx-auto p-4 space-y-6 ${t?"bg-gray-900":"bg-gray-50"}`,initial:"hidden",animate:"visible",variants:V,children:[e.jsx(M.h1,{variants:z,className:`text-2xl font-bold ${t?"text-gray-100":"text-gray-800"}`,children:"My Orders"}),r.length===0?e.jsxs(M.div,{variants:z,className:`text-center py-12 ${t?"bg-gray-800":"bg-white"} rounded-lg`,children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(Bt,{className:`text-4xl ${t?"text-gray-600":"text-gray-400"}`})}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"} mb-4`,children:"You haven't placed any orders yet"}),e.jsx(ve,{to:"/merch-store",className:"text-[#FF1B6B] hover:text-[#D4145A] font-medium",children:"Start Shopping"})]}):e.jsx(M.div,{variants:V,className:"space-y-4",children:r.map(l=>e.jsxs(M.div,{variants:z,className:`${t?"bg-gray-800":"bg-white"} rounded-lg p-4`,children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:`font-medium ${t?"text-gray-100":"text-gray-800"}`,children:["Order #",l.id.slice(-6)]}),e.jsx("span",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:new Date(l.createdAt?.seconds*1e3).toLocaleDateString()})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${D(l.status)}`,children:l.status})]}),e.jsx("div",{className:`border-t ${t?"border-gray-700":"border-gray-100"}`,children:l.items.map(E=>e.jsxs("div",{className:"flex items-center gap-3 py-3",children:[e.jsx(ve,{to:`/merch-store/product/${E.productId}`,className:"w-14 h-14 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:E.image,alt:E.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(ve,{to:`/merch-store/product/${E.productId}`,className:`font-medium ${t?"text-gray-100 hover:text-[#FF1B6B]":"text-gray-800 hover:text-[#FF1B6B]"} block truncate`,children:E.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("img",{src:`/${l.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:l.paymentMethod?.token||"USDT",className:"w-4 h-4"}),e.jsxs("span",{className:"text-[#FF1B6B] font-medium",children:["$",E.price.toFixed(2)]}),e.jsxs("span",{className:`text-sm ${t?"text-gray-400":"text-gray-500"}`,children:[" ",E.quantity]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="delivered"&&e.jsxs("button",{onClick:()=>{i(l),b(E),m(!0)},className:"text-sm text-[#FF1B6B] hover:text-[#FF1B6B]/80 font-medium flex items-center gap-1",children:[e.jsx(pr,{className:"w-4 h-4"}),"Write a Review"]}),e.jsx(la,{className:`text-xl ${t?"text-gray-500":"text-gray-400"}`})]})]},E.productId))}),e.jsxs("div",{className:`border-t ${t?"border-gray-700":"border-gray-100"} pt-3`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"Total Amount"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:`/${l.paymentMethod?.token?.toLowerCase()||"usdt"}.png`,alt:l.paymentMethod?.token||"USDT",className:"w-4 h-4"}),e.jsxs("span",{className:`font-medium ${t?"text-gray-100":"text-gray-800"}`,children:["$",l.total.toFixed(2)]})]})]}),l.status==="shipped"&&e.jsxs("span",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["Estimated Delivery: ",new Date(l.createdAt?.seconds*1e3+14*24*60*60*1e3).toLocaleDateString()]})]}),l.trackingNumber&&e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:`text-sm ${t?"text-gray-300":"text-gray-700"}`,children:[e.jsx("span",{className:"font-medium",children:l.carrier||"other"})," Tracking:",e.jsx("span",{className:"ml-1 font-medium",children:l.trackingNumber})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.status==="shipped"&&!l.deliveryConfirmedByBuyer&&e.jsx("button",{onClick:()=>{P(l.id),y(!0)},className:"px-3 py-1 text-sm font-medium rounded-full bg-green-100 text-green-800 hover:bg-green-200 transition-colors",children:"Confirm Delivery"}),e.jsx("button",{onClick:()=>F(l),className:"px-3 py-1 text-sm font-medium rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors",children:"Track Package"}),l.shippingStatus==="in_transit"?e.jsxs("div",{className:"flex items-center gap-1 text-blue-600",children:[e.jsx(yr,{className:"text-base"}),e.jsx("span",{className:"font-medium",children:"In Transit"})]}):l.deliveryConfirmedByBuyer?e.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[e.jsx(fr,{className:"text-base"}),e.jsx("span",{className:"font-medium",children:"Delivered"})]}):e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(br,{className:"text-base"}),e.jsx("span",{className:"font-medium",children:"Processing"})]})]})]})]}),e.jsx("div",{className:`flex justify-end mt-3 pt-3 border-t ${t?"border-gray-700":"border-gray-100"}`,children:e.jsx("button",{onClick:()=>{i(l),k(!0)},className:"px-4 py-2 text-sm font-medium text-[#FF1B6B] hover:text-[#D4145A] transition-colors",children:"Request Refund"})})]},l.id))}),g&&e.jsx(ol,{isOpen:$,onClose:()=>{k(!1),i(null)},order:g}),e.jsx(dl,{isOpen:j,onClose:()=>y(!1),onConfirm:u,orderId:C}),I&&e.jsx(An,{isOpen:B,onClose:()=>{v(!1),A(null)},trackingNumber:I.trackingNumber,carrier:I.carrier}),d&&e.jsx(cl,{isOpen:x,onClose:()=>{m(!1),b(null)},order:g,item:d})]})},xl={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},_t={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},ro=()=>{const s=De(),{user:t}=be(),{isDarkMode:a}=ne(),[o,r]=n.useState([]),[p,g]=n.useState(null),[i,$]=n.useState(!0),[k,j]=n.useState(!1),[y,C]=n.useState(""),[P,B]=n.useState(""),[v,I]=n.useState(null),[A,x]=n.useState({subtotal:0,shippingTotal:0,total:0}),[m,d]=n.useState("0"),[b,h]=n.useState(""),[D,V]=n.useState(!1);n.useEffect(()=>{t&&(async()=>{try{const f=de(re(O,"cart"),ie("userId","==",t.uid)),q=await ge(f),G=[];let T=0,S=0;for(const w of q.docs){const U=w.data(),H=await oe(te(O,"products",U.productId));if(H.exists()){const K=H.data(),ee=K.hasDiscount&&new Date<new Date(K.discountEndsAt)?K.discountedPrice:K.price;G.push({id:w.id,...U,product:{id:U.productId,...K}}),T+=ee*U.quantity,S+=K.shippingFee||0}}if(r(G),x({subtotal:T,shippingTotal:S,total:T+S}),G.length>0){const w=G[0].product.network==="unichain"?1301:G[0].product.network==="polygon"?137:Number(G[0].product.network);if(I(w),B(G[0].product.acceptedToken),window.ethereum&&window.ethereum.networkVersion!==w.toString())try{w===1301?await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x515"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]})}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]})})}catch{}}const c=await oe(te(O,"users",t.uid));if(c.exists()){const w=c.data(),U=w.shippingAddress&&w.shippingAddress.street&&w.shippingAddress.city&&w.shippingAddress.state&&w.shippingAddress.postalCode&&w.shippingAddress.country;if(U&&!w.flag&&w.shippingAddress?.country)try{const H=typeof w.shippingAddress.country=="object"?w.shippingAddress.country.code:w.shippingAddress.country,_=String(H).trim().toLowerCase().split(" ")[0].slice(0,2);if(_){const ee=`https://flagcdn.com/${_}.svg`;await xe(te(O,"users",t.uid),{flag:ee}),w.flag=ee}}catch(H){console.error("Error setting flag URL:",H)}g({...w,hasCompleteAddress:U}),w.walletAddress&&(j(!0),C(w.walletAddress))}$(!1)}catch(f){console.error("Error loading checkout data:",f),N.error("Failed to load checkout data"),$(!1)}})()},[t]);const z=async()=>{try{if(!y||!P||!v||(window.ethereum.networkVersion!==v.toString()&&(v===1301?await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x515"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]})}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}).catch(async()=>{await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]})})),!js[v]?.[P]))return;const f=new Ae(window.ethereum),G=await Us(f,v,P).balanceOf(y);d(Ue(G,6))}catch{d("0")}};n.useEffect(()=>{k&&P&&v&&y&&z()},[k,P,v,y]);const u=async()=>{if(!p?.shippingAddress||!p?.shippingAddress?.street||!p?.shippingAddress?.city||!p?.shippingAddress?.state||!p?.shippingAddress?.postalCode||!p?.shippingAddress?.country){N.error("Please add a complete shipping address in your profile settings"),s("/merch-store/settings");return}if(!k){N.error("Please connect your wallet in your profile settings first"),s("/merch-store/settings");return}if(o.length===0){N.error("Your cart is empty");return}if(parseFloat(m)<A.total){N.error(`Insufficient ${P} balance`);return}V(!0);const L=N.loading("Processing your order...");try{if(window.ethereum.networkVersion!==v.toString()){h("Switching network...");try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:`0x${Number(v).toString(16)}`}]})}catch{N.dismiss(L),N.error(`Please switch to ${_s[v]} network in MetaMask`),V(!1);return}}const q=await new Ae(window.ethereum).getSigner(),G=nt(q,v),T=Us(q,v,P);if(!G.address||!T.address)throw new Error("Invalid contract addresses");const S=qe(A.total.toFixed(6),6);if(h("Checking token approval..."),await T.allowance(y,G.address)<S){h("Approving token spending...");const _=qe("0.01",6),ee=S+_;console.log("Total Amount:",Ue(S,6)),console.log("Approval Amount with buffer:",Ue(ee,6)),await(await T.approve(G.address,ee)).wait()}const w={},U=o.map(async _=>{const ee=_.product.sellerId;if(!w[ee]){const Y=await oe(te(O,"sellers",ee));if(!Y.exists())throw new Error(`Seller ${ee} not found`);const Q=Y.data();if(!Q.walletAddress)throw new Error(`Seller ${ee} has no wallet connected`);const R=ga(Q.walletAddress);w[ee]={seller:R,amount:0,items:[]}}return ee});await Promise.all(U),o.forEach(_=>{const ee=_.product.sellerId,R=(_.product.hasDiscount&&new Date<new Date(_.product.discountEndsAt)?_.product.discountedPrice:_.product.price)*_.quantity+(_.product.shippingFee||0);w[ee].amount+=R,w[ee].items.push(_)});let H=0;for(const[_,ee]of Object.entries(w)){H++,h(`Processing order ${H}/${Object.keys(w).length}...`);const Y=qe(ee.amount.toFixed(6),6);console.log("Seller order amount:",Ue(Y,6));const R=await(await G.createOrder(ee.seller,T.address,Y)).wait();console.log("Transaction receipt:",R);const J=R.logs.find(me=>{try{const X=G.interface.parseLog(me);return console.log("Parsed log:",X),X.name==="OrderCreated"}catch{return!1}});if(!J)throw console.error("OrderCreated event not found in logs"),console.log("All logs:",R.logs),new Error("Failed to get order ID from transaction");const se=G.interface.parseLog(J);console.log("Parsed OrderCreated event:",se);const W=se.args.orderId.toString();console.log("Order ID from event:",W),h("Saving order details...");const Z=ee.items.map(async me=>{const X=te(O,"products",me.product.id),ae=await oe(X);if(ae.exists()){const pe=ae.data().quantity,Fe=Math.max(0,pe-me.quantity);await xe(X,{quantity:Fe})}});await Promise.all(Z);const le=await Pe(re(O,"orders"),{numericOrderId:W,buyerId:t.uid,sellerId:_,sellerName:ee.items[0].product.sellerName,items:ee.items.map(me=>({productId:me.product.id,name:me.product.name,image:me.product.images[0],quantity:me.quantity,price:me.product.price,shippingFee:me.product.shippingFee||0,size:me.size||null,color:me.color||null})),status:"processing",paymentStatus:"completed",paymentMethod:{type:"crypto",token:P,network:v,buyerWallet:y},buyerInfo:{name:p.name,email:p.email,phone:p.phoneNumber||null},flag:typeof p.shippingAddress.country=="object"&&p.shippingAddress.country.code?`https://flagcdn.com/${p.shippingAddress.country.code.toLowerCase()}.svg`:null,shippingAddress:p.shippingAddress,subtotal:ee.amount,total:ee.amount,createdAt:ue(),shippingConfirmed:!1,shippingConfirmedAt:null,fundsAvailable:!1,fundsAvailableAt:null,shippingDeadline:Ps.fromMillis(Date.now()+72*60*60*1e3),fundsReleaseDate:Ps.fromMillis(Date.now()+15*24*60*60*1e3)})}const K=o.map(_=>jt(te(O,"cart",_.id)));await Promise.all(K),N.dismiss(L),N.success("Order placed successfully!"),s("/merch-store/orders")}catch(f){N.dismiss(L),N.error(f.message||"Failed to place order. Please try again.")}finally{V(!1),h("")}},F=p?.hasCompleteAddress,l=!k||o.length===0||!F||D||parseFloat(m)<A.total,E=()=>p?.shippingAddress?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`${a?"text-gray-100":"text-gray-900"}`,children:p.shippingAddress.street}),e.jsxs("p",{className:`${a?"text-gray-100":"text-gray-900"}`,children:[p.shippingAddress.city,", ",p.shippingAddress.postalCode]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:`${a?"text-gray-100":"text-gray-900"}`,children:typeof p.shippingAddress.country=="object"?p.shippingAddress.country.name:p.shippingAddress.country}),typeof p.shippingAddress.country=="object"&&p.shippingAddress.country.code&&e.jsx("img",{src:`https://flagcdn.com/w20/${p.shippingAddress.country.code.toLowerCase()}.png`,alt:p.shippingAddress.country.name,className:"w-5 h-auto"})]}),e.jsx("button",{onClick:()=>s("/merch-store/settings"),className:"text-[#FF1B6B] hover:text-[#D4145A] transition-colors mt-2",children:"Edit Address"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:`${a?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B]",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-[#FF1B6B]",children:"Shipping Address Required"}),e.jsx("p",{className:`mt-1 text-sm ${a?"text-gray-400":"text-gray-600"}`,children:"Please add your shipping address to continue with the checkout process."})]})]})}),e.jsxs("button",{onClick:()=>s("/merch-store/settings"),className:"w-full px-4 py-3 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),"Add Shipping Address"]})]});return i?e.jsx("div",{className:`min-h-screen ${a?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center`,children:e.jsx(M.div,{animate:{scale:[1,1.2,1],opacity:[1,.8,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},className:"w-12 h-12 rounded-full border-4 border-[#FF1B6B] border-t-transparent"})}):e.jsx(M.div,{variants:xl,initial:"hidden",animate:"visible",className:`min-h-screen ${a?"bg-gray-900":"bg-[#FFF5F7]"} p-4 md:p-8`,children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(M.h1,{variants:_t,className:`text-3xl font-bold ${a?"text-gray-100":"text-gray-900"} mb-8`,children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(M.div,{variants:_t,className:"lg:col-span-2 space-y-6",children:[e.jsxs(M.div,{variants:_t,className:`${a?"bg-gray-800":"bg-white"} rounded-lg p-6`,children:[e.jsx("h2",{className:`font-bold ${a?"text-gray-100":"text-gray-800"} mb-4`,children:"Order Summary"}),o.map(L=>e.jsxs("div",{className:`flex items-start space-x-4 mb-4 pb-4 ${a?"border-gray-700":"border-b"} last:border-b-0`,children:[e.jsx("img",{src:L.product.images[0],alt:L.product.name,className:"w-20 h-20 object-cover rounded-lg"}),e.jsxs("div",{className:"flex-1 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`font-medium ${a?"text-gray-100":"text-gray-800"}`,children:L.product.name}),e.jsxs("div",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-1`,children:[e.jsxs("p",{children:["Quantity: ",L.quantity]}),L.size&&e.jsxs("p",{children:["Size: ",L.size]}),L.color&&e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{children:"Color:"}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:L.color.toLowerCase(),borderColor:L.color.toLowerCase()==="#ffffff"?"#e5e7eb":"transparent"}}),L.color]})]})]})]}),e.jsxs("div",{className:"text-right",children:[L.product.hasDiscount&&new Date<new Date(L.product.discountEndsAt)?e.jsx(e.Fragment,{children:e.jsxs("p",{className:`${a?"text-gray-100":"text-gray-800"}`,children:["$",(L.product.discountedPrice*L.quantity).toFixed(2),e.jsxs("span",{className:`text-sm ${a?"text-gray-500":"text-gray-400"} line-through ml-1`,children:["$",(L.product.price*L.quantity).toFixed(2)]})]})}):e.jsxs("p",{className:`${a?"text-gray-100":"text-gray-800"}`,children:["$",(L.product.price*L.quantity).toFixed(2)]}),L.product.shippingFee>0&&e.jsxs("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:["+ $",L.product.shippingFee.toFixed(2)," shipping"]})]})]})]},L.id)),e.jsxs("div",{className:`${a?"border-gray-700":"border-t"} pt-4 mt-4 space-y-2`,children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"Subtotal"}),e.jsxs("span",{className:`${a?"text-gray-100":"text-gray-600"}`,children:["$",A.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"Shipping"}),e.jsxs("span",{className:`${a?"text-gray-100":"text-gray-600"}`,children:["$",A.shippingTotal.toFixed(2)]})]}),e.jsxs("div",{className:`flex justify-between font-bold ${a?"text-gray-100 border-gray-700":"text-gray-800 border-t"} pt-2`,children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",A.total.toFixed(2)]})]})]})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:[e.jsx("h2",{className:`text-xl font-semibold ${a?"text-gray-100":"text-gray-900"} mb-4`,children:"Shipping Address"}),E()]})]}),e.jsxs(M.div,{variants:_t,className:"lg:col-span-1 space-y-4",children:[e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4 max-w-sm mx-auto`,children:[e.jsx("h2",{className:`text-lg font-semibold ${a?"text-gray-100":"text-gray-900"} mb-4`,children:"Payment Method"}),k?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 ${a?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:`w-5 h-5 ${a?"text-gray-400":"text-gray-600"}`}),e.jsxs("span",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:[y.slice(0,6),"...",y.slice(-4)]})]}),e.jsx("button",{onClick:()=>s("/merch-store/settings"),className:"text-sm text-[#FF1B6B] hover:text-[#D4145A]",children:"Change in Settings"})]}),e.jsx("div",{className:`p-3 ${a?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(wr,{className:`w-5 h-5 ${a?"text-gray-400":"text-gray-600"}`}),e.jsx("span",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:"Network Required:"})]}),e.jsx("span",{className:`text-sm font-medium ${a?"text-gray-100":"text-gray-900"}`,children:_s[v]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:`text-sm font-medium ${a?"text-gray-300":"text-gray-700"}`,children:"Payment Token"}),e.jsx("div",{className:`p-3 rounded-lg border-2 border-[#FF1B6B] ${a?"bg-pink-900/20":"bg-pink-50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:o[0]?.product?.tokenLogo,alt:P,className:"w-5 h-5"}),e.jsx("span",{className:`${a?"text-gray-100":"text-gray-900"}`,children:P})]}),e.jsxs("span",{className:`text-sm ${a?"text-gray-400":"text-gray-600"}`,children:["Balance: ",parseFloat(m).toFixed(2)," ",P]})]})})]}),b&&e.jsx("div",{className:`mt-4 p-3 ${a?"bg-blue-900/20":"bg-blue-50"} rounded-lg`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-blue-500 border-t-transparent"}),e.jsx("span",{className:`text-sm ${a?"text-blue-300":"text-blue-600"}`,children:b})]})})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"Please connect your wallet in your profile settings first."}),e.jsxs("button",{onClick:()=>s("/merch-store/settings"),className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-[#FF1B6B] text-white hover:bg-[#D4145A] transition-colors",children:[e.jsx(ut,{className:"w-5 h-5"}),e.jsx("span",{children:"Go to Settings"})]})]})]}),e.jsxs("div",{className:`${a?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4 max-w-sm mx-auto`,children:[e.jsx("h2",{className:`text-lg font-semibold ${a?"text-gray-100":"text-gray-900"} mb-4`,children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"Subtotal"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:o[0]?.product?.tokenLogo,alt:P,className:"w-4 h-4"}),e.jsxs("span",{className:`${a?"text-gray-100":"text-gray-600"}`,children:["$",A.subtotal.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:`${a?"text-gray-400":"text-gray-600"}`,children:"Shipping"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:o[0]?.product?.tokenLogo,alt:P,className:"w-4 h-4"}),e.jsxs("span",{className:`${a?"text-gray-100":"text-gray-600"}`,children:["$",A.shippingTotal.toFixed(2)]})]})]}),e.jsx("div",{className:`h-px ${a?"bg-gray-700":"bg-gray-200"} my-2`}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{className:`${a?"text-gray-100":"text-gray-900"}`,children:"Total"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("img",{src:o[0]?.product?.tokenLogo,alt:P,className:"w-4 h-4"}),e.jsxs("span",{className:`${a?"text-gray-100":"text-gray-900"}`,children:["$",A.total.toFixed(2)]})]})]})]}),!D&&e.jsxs(e.Fragment,{children:[!k&&e.jsx("div",{className:`mt-4 p-3 ${a?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Wallet Not Connected"}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-1`,children:"Please connect your wallet in settings to enable order placement."})]})]})}),k&&!F&&e.jsx("div",{className:`mt-4 p-3 ${a?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Shipping Address Required"}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-1`,children:"Please add your shipping address in settings to enable order placement."})]})]})}),k&&F&&parseFloat(m)<A.total&&e.jsx("div",{className:`mt-4 p-3 ${a?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Insufficient Balance"}),e.jsxs("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-1`,children:["Your ",P," balance is too low to complete this purchase."]})]})]})}),k&&F&&o.length===0&&e.jsx("div",{className:`mt-4 p-3 ${a?"bg-pink-900/20 border-pink-800/30":"bg-pink-50 border-pink-200"} border rounded-lg`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"h-5 w-5 text-[#FF1B6B] mt-0.5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-[#FF1B6B]",children:"Empty Cart"}),e.jsx("p",{className:`text-sm ${a?"text-gray-400":"text-gray-600"} mt-1`,children:"Add items to your cart to proceed with checkout."})]})]})})]}),e.jsx("button",{onClick:u,disabled:l,className:`w-full mt-6 px-4 py-3 rounded-lg text-white transition-colors ${l?`${a?"bg-gray-700":"bg-gray-300"} cursor-not-allowed`:"bg-[#FF1B6B] hover:bg-[#D4145A] disabled:opacity-50 disabled:cursor-not-allowed"}`,children:D?"Processing Order...":k?F?parseFloat(m)<A.total?`Insufficient ${P} Balance`:o.length===0?"Cart is Empty":"Place Order":"Add Shipping Address to Continue":"Connect Wallet to Continue"})]})]})]})]})})};function ml(){const[s,t]=n.useState([]),[a,o]=n.useState(!0),[r,p]=n.useState(null),g=async()=>{try{o(!0),p(null);const i=de(re(O,"withdrawals"),ye("timestamp","desc"),lt(10)),k=(await ge(i)).docs.map(j=>{const y=j.data();return{id:j.id,...y,timestamp:y.timestamp?.toDate?.()||null,processedAt:y.processedAt?.toDate?.()||null}}).filter(Boolean);t(k)}catch(i){console.error("Error fetching recent withdrawals:",i),p("Failed to fetch recent withdrawals")}finally{o(!1)}};return n.useEffect(()=>{g()},[]),a?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})})]}):r?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"text-red-500 dark:text-red-400 text-center",children:r})]}):!s||s.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"No recent withdrawals"})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Withdrawals"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Token"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Network"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Transaction"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:i.timestamp?new Date(i.timestamp).toLocaleString():"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:[i.amount?.toFixed(2)||"0.00"," ",i.token||"N/A"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/logos/${i.token?.toLowerCase()||"usdt"}.png`,alt:i.token||"Token",className:"w-5 h-5 mr-2"}),i.token||"N/A"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:i.network==="unichain"?"/unichain-logo.png":"/polygon.png",alt:i.network||"Network",className:"w-5 h-5 mr-2"}),i.network==="unichain"?"Unichain Testnet":"Polygon"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${i.status==="completed"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":i.status==="pending"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"}`,children:i.status||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300",children:i.transactionHash?e.jsx("a",{href:`${i.network==="unichain"?"https://unichain-sepolia.blockscout.com/tx/":"https://polygonscan.com/tx/"}${i.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#FF1B6B] hover:text-[#D4145A] dark:text-[#FF1B6B] dark:hover:text-[#D4145A]",children:"View"}):"N/A"})]},i.id))})]})})]})}const Qe="0x5828D525fe00902AE22f2270Ac714616651894fF",gl=()=>e.jsxs(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 dark:bg-gray-700 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-24"})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-8 w-24 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]})]})]}),ul=()=>e.jsxs(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-48 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(2)].map((s,t)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full mr-2"}),e.jsx("div",{className:"h-5 bg-gray-200 dark:bg-gray-600 rounded w-32"})]}),e.jsx("div",{className:"space-y-4",children:[...Array(2)].map((a,o)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 dark:bg-gray-600 rounded-full mr-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-16"})]}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-24"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 bg-gray-200 dark:bg-gray-600 rounded flex-grow"}),e.jsx("div",{className:"h-8 w-20 bg-gray-200 dark:bg-gray-600 rounded"})]})]},o))})]},t))})]}),as=s=>s===1301?{USDT:"0x70262e266E50603AcFc5D58997eF73e5a8775844",USDC:"0x31d0220469e10c4E71834a79b1f276d740d3768F"}:s===137?{USDT:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",USDC:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359"}:null;function no(){const[s,t]=n.useState([]),[a,o]=n.useState(!0),[r,p]=n.useState(null),[g,i]=n.useState(!1),[$,k]=n.useState(""),{chain:j}=Xe(),{switchNetwork:y}=Ln();localStorage.getItem("admin-theme");const[C,P]=n.useState({unichain:{USDT:{fees:"0",amount:"",loading:!1,error:null},USDC:{fees:"0",amount:"",loading:!1,error:null}},polygon:{USDT:{fees:"0",amount:"",loading:!1,error:null},USDC:{fees:"0",amount:"",loading:!1,error:null}}});n.useEffect(()=>{(async()=>{try{const h=await ze();if(h){const D=await h.request({method:"eth_accounts"});D.length>0&&D[0].toLowerCase()===Qe.toLowerCase()&&(k(D[0]),i(!0))}}catch(h){console.error("Error checking wallet connection:",h)}})()},[]),n.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",b=>{b.length===0||b[0].toLowerCase()!==Qe.toLowerCase()?(i(!1),k("")):(k(b[0]),i(!0))})},[]),n.useEffect(()=>{g&&$.toLowerCase()===Qe.toLowerCase()?B():o(!1)},[g,$]);const B=async()=>{if(!(!g||$.toLowerCase()!==Qe.toLowerCase()))try{const b=de(re(O,"withdrawals"),ie("status","==","pending"),ye("timestamp","desc")),h=await ge(b),V=[...new Set(h.docs.map(l=>l.data().sellerId))].map(l=>oe(te(O,"sellers",l))),z=await Promise.all(V),u={};z.forEach(l=>{l.exists()&&(u[l.id]=l.data())});const F=h.docs.map(l=>{const E=l.data(),L=u[E.sellerId]||{};return{id:l.id,...E,storeName:L.storeName||"Unknown Store",storeId:`SELL_${E.sellerId}`,storeAvatar:L.avatarUrl||null}});t(F)}catch(b){console.error("Error fetching withdrawals:",b),N.error("Failed to fetch withdrawal requests")}finally{o(!1)}},v=async b=>{if(!g||$.toLowerCase()!==Qe.toLowerCase()){N.error("Please connect your admin wallet");return}p(b.id);try{const h=b.network==="unichain"?"1301":"137",D=Number(h);if(j?.id!==D&&y)try{await y(D),await new Promise(f=>setTimeout(f,1e3))}catch{throw new Error(`Failed to switch to ${h==="1301"?"Unichain":"Polygon"} network`)}const z=await new Ae(window.ethereum).getSigner(),u=await nt(z,D);if(!u)throw new Error("Could not get contract instance");const F=qe(b.amount.toString(),6),l=b.token==="USDT"?D===1301?"0x70262e266E50603AcFc5D58997eF73e5a8775844":"0xc2132D05D31c914a87C6611C10748AEb04B58e8F":D===1301?"0x31d0220469e10c4E71834a79b1f276d740d3768F":"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359";N.loading("Please confirm the transaction in MetaMask...",{id:"withdrawal"});const E=await u.approveWithdrawal(b.walletAddress,l,F);if(N.loading("Processing withdrawal...",{id:"withdrawal"}),(await E.wait()).status===1){await xe(te(O,"withdrawals",b.id),{status:"completed",completedAt:ue(),transactionHash:E.hash});const f=te(O,"sellers",b.sellerId),q=await oe(f);if(q.exists()){const G=q.data().balance||0;await xe(f,{balance:Math.max(0,G-b.amount)})}N.success("Withdrawal approved successfully",{id:"withdrawal"}),await B()}else throw new Error("Transaction failed")}catch(h){console.error("Error approving withdrawal:",h),N.error(h.message.includes("user rejected")?"Transaction was rejected":h.message||"Failed to approve withdrawal",{id:"withdrawal"})}finally{p(null)}},I=async b=>{if(!(!g||$.toLowerCase()!==Qe.toLowerCase()))try{await xe(te(O,"withdrawals",b),{status:"rejected",processedAt:new Date}),N.success("Withdrawal rejected"),B()}catch(h){console.error("Error rejecting withdrawal:",h),N.error("Failed to reject withdrawal")}},A=async()=>{console.log("Starting to fetch platform fees..."),P(b=>({unichain:{USDT:{...b.unichain.USDT,loading:!0,error:null},USDC:{...b.unichain.USDC,loading:!0,error:null}},polygon:{USDT:{...b.polygon.USDT,loading:!0,error:null},USDC:{...b.polygon.USDC,loading:!0,error:null}}}));try{const b=["function balanceOf(address) view returns (uint256)"];console.log("Connecting to Unichain network...");const h=new os("https://sepolia.unichain.org"),D=await nt(h,"1301"),V=as(1301);console.log("Connecting to Polygon network...");const z=new os("https://polygon-mainnet.g.alchemy.com/v2/Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N"),u=await nt(z,"137"),F=as(137);let l={unichain:{USDT:{amount:"",fees:"0",loading:!1,error:null},USDC:{amount:"",fees:"0",loading:!1,error:null}},polygon:{USDT:{amount:"",fees:"0",loading:!1,error:null},USDC:{amount:"",fees:"0",loading:!1,error:null}}};if(D&&V)try{const L=await new je(V.USDT,b,h).balanceOf(D.target);l.unichain.USDT={amount:"",fees:Ue(L,6),loading:!1,error:null};const q=await new je(V.USDC,b,h).balanceOf(D.target);l.unichain.USDC={amount:"",fees:Ue(q,6),loading:!1,error:null}}catch(E){console.error("Error fetching Unichain balances:",E),l.unichain.USDT.error="Failed to fetch balance",l.unichain.USDC.error="Failed to fetch balance"}if(u&&F)try{const L=await new je(F.USDT,b,z).balanceOf(u.target);l.polygon.USDT={amount:"",fees:Ue(L,6),loading:!1,error:null};const q=await new je(F.USDC,b,z).balanceOf(u.target);l.polygon.USDC={amount:"",fees:Ue(q,6),loading:!1,error:null}}catch(E){console.error("Error fetching Polygon balances:",E),l.polygon.USDT.error="Failed to fetch balance",l.polygon.USDC.error="Failed to fetch balance"}P(l)}catch(b){console.error("Error in fetchPlatformFees:",b),N.error("Failed to fetch platform fees")}};n.useEffect(()=>{let b;const h=async()=>{if(g)try{await A()}catch(D){console.error("Error in fetchAndSetFees:",D)}};return h(),g&&(b=setInterval(h,6e4)),()=>{b&&(console.log("Clearing platform fees interval"),clearInterval(b))}},[g]);const x=()=>{console.log("Manually refreshing platform fees..."),A()},m=(b,h,D)=>{P(V=>({...V,[b]:{...V[b],[h]:{...V[b][h],amount:D}}}))},d=async(b,h)=>{if(!g||$.toLowerCase()!==Qe.toLowerCase()){N.error("Please connect your admin wallet");return}const D=C[b][h].amount;if(!D||parseFloat(D)<=0){N.error("Please enter a valid amount");return}try{N.loading("Preparing transaction...",{id:"platform-fee-withdrawal"});const V=b==="unichain"?1301:137;if(console.log("Starting withdrawal process:",{network:b,token:h,chainId:V,amount:D}),await window.ethereum.request({method:"eth_requestAccounts"}),Number(window.ethereum.networkVersion)!==V){console.log("Switching network to:",V);try{V===137?await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x89"}]}):await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x515"}]}),await new Promise(S=>setTimeout(S,2e3))}catch(S){if(S.code===4902)try{V===137?await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x89",chainName:"Polygon Mainnet",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},rpcUrls:["https://polygon-rpc.com/"],blockExplorerUrls:["https://polygonscan.com/"]}]}):await window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainId:"0x515",chainName:"Unichain Testnet",nativeCurrency:{name:"UNW",symbol:"UNW",decimals:18},rpcUrls:["https://sepolia.unichain.org"],blockExplorerUrls:["https://unichain-sepolia.blockscout.com"]}]}),await new Promise(c=>setTimeout(c,2e3))}catch(c){console.error("Failed to add network:",c),N.error(`Failed to add ${b} network to MetaMask`,{id:"platform-fee-withdrawal"});return}console.error("Network switch failed:",S),N.error(`Failed to switch to ${b} network`,{id:"platform-fee-withdrawal"});return}}if(Number(window.ethereum.networkVersion)!==V){N.error(`Please switch to ${b} network in MetaMask`,{id:"platform-fee-withdrawal"});return}console.log("Getting provider and signer...");const l=await new Ae(window.ethereum).getSigner();console.log("Getting contract instance...");const E=await nt(l,V.toString());if(!E){N.error("Could not get contract instance",{id:"platform-fee-withdrawal"});return}const L=as(V);if(!L){N.error(`No token addresses found for chain ${V}`,{id:"platform-fee-withdrawal"});return}const f=L[h];if(!f){N.error(`No address found for token ${h} on chain ${V}`,{id:"platform-fee-withdrawal"});return}console.log("Contract and token details:",{contractAddress:E.target,tokenAddress:f,withdrawAmount:D});const q=qe(D.toString(),6);N.loading("Please confirm the transaction in MetaMask...",{id:"platform-fee-withdrawal"});const G=await E.withdrawPlatformFees(f,q,{gasLimit:5e5});console.log("Transaction submitted:",G.hash),N.loading("Processing platform fee withdrawal...",{id:"platform-fee-withdrawal"});const T=await G.wait();if(console.log("Transaction receipt:",T),T.status===1){const S=te(re(O,"withdrawals"));await yt(S,{id:S.id,amount:parseFloat(D),token:h,network:b,status:"completed",type:"platform_fee",walletAddress:$,timestamp:new Date,transactionHash:G.hash,processedAt:new Date,processedBy:$}),N.success(`Successfully withdrew ${D} ${h}`,{id:"platform-fee-withdrawal"}),P(c=>({...c,[b]:{...c[b],[h]:{...c[b][h],amount:""}}})),A()}else throw new Error("Transaction failed")}catch(V){console.error("Error withdrawing platform fees:",V),N.error(V.message||"Failed to withdraw platform fees",{id:"platform-fee-withdrawal"})}};return a?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-48"}),e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-10 w-32 bg-gray-200 dark:bg-gray-700 rounded"})]}),e.jsx(ul,{}),[...Array(3)].map((b,h)=>e.jsx(gl,{},h))]}):!g||$.toLowerCase()!==Qe.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(gt,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Please connect your admin wallet to access the withdrawals page."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Withdrawal Requests"}),e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Refresh Balances"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Platform Fee Withdrawals"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-6 h-6 mr-2"}),e.jsx("h3",{className:"text-md font-medium text-gray-900 dark:text-white",children:"Unichain Network"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdt.png",alt:"USDT",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDT"})]}),e.jsx("div",{className:"text-right",children:C.unichain.USDT.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):C.unichain.USDT.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:C.unichain.USDT.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(C.unichain.USDT.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:C.unichain.USDT.amount,onChange:b=>m("unichain","USDT",b.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>d("unichain","USDT"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdc.png",alt:"USDC",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDC"})]}),e.jsx("div",{className:"text-right",children:C.unichain.USDC.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):C.unichain.USDC.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:C.unichain.USDC.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(C.unichain.USDC.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:C.unichain.USDC.amount,onChange:b=>m("unichain","USDC",b.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>d("unichain","USDC"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("img",{src:"/polygon.png",alt:"Polygon",className:"w-6 h-6 mr-2"}),e.jsx("h3",{className:"text-md font-medium text-gray-900 dark:text-white",children:"Polygon Network"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdt.png",alt:"USDT",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDT"})]}),e.jsx("div",{className:"text-right",children:C.polygon.USDT.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):C.polygon.USDT.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:C.polygon.USDT.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(C.polygon.USDT.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:C.polygon.USDT.amount,onChange:b=>m("polygon","USDT",b.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>d("polygon","USDT"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:"/logos/usdc.png",alt:"USDC",className:"w-6 h-6 mr-2"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"USDC"})]}),e.jsx("div",{className:"text-right",children:C.polygon.USDC.loading?e.jsx("div",{className:"w-4 h-4 border-2 border-[#FF1B6B] border-t-transparent rounded-full animate-spin ml-auto"}):C.polygon.USDC.error?e.jsx("div",{className:"text-sm text-red-500 dark:text-red-400",children:C.polygon.USDC.error}):e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Platform Fees: $",parseFloat(C.polygon.USDC.fees||0).toFixed(2)]})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"number",value:C.polygon.USDC.amount,onChange:b=>m("polygon","USDC",b.target.value),placeholder:"Enter amount",className:"block w-full px-3 py-1 text-sm rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-600 border-gray-300 dark:border-gray-500 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"}),e.jsx("button",{onClick:()=>d("polygon","USDC"),className:"px-3 py-1 text-sm font-medium text-white bg-[#FF1B6B] rounded hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:"Withdraw"})]})]})]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden mb-8",children:s.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No pending withdrawal requests"}):e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[15%]",children:"Store"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[10%]",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[10%]",children:"Token"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[12%]",children:"Network"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[18%]",children:"Wallet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[15%]",children:"Requested"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider w-[20%]",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:b.storeName||"Unknown Store"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:b.storeId})]})}),e.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",b.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:`/logos/${b.token.toLowerCase()}.png`,alt:b.token,className:"w-5 h-5 mr-2"}),b.token]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:b.network==="unichain"?"/unichain-logo.png":"/polygon.png",alt:b.network==="unichain"?"Unichain Testnet":"Polygon",className:"w-5 h-5 mr-2"}),b.network==="unichain"?"Unichain Testnet":"Polygon"]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"truncate max-w-[120px]",children:b.walletAddress}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(b.walletAddress),N.success("Wallet address copied!")},className:"text-[#FF1B6B] hover:text-[#D4145A] dark:hover:text-[#FF1B6B]",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),e.jsx("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"})]})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(b.timestamp?.toDate()).toLocaleString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:r===b.id?e.jsxs("button",{disabled:!0,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-[#FF1B6B] opacity-50 cursor-not-allowed",children:[e.jsx(Nr,{className:"mr-1 animate-spin"}),"Processing..."]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-grow bg-gray-200 dark:bg-gray-700 rounded-full h-2 relative group",children:(()=>{const D=Date.now()-b.requestedAt,V=Math.min(100,D/12096e5*100),z=D>=12096e5;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-[#FF1B6B] h-2 rounded-full transition-all duration-500",style:{width:`${V}%`}}),e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity absolute -top-[80px] left-1/2 transform -translate-x-1/2 z-50",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg rounded-lg p-3 w-[280px]",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gt,{className:"text-[#FF1B6B] mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Withdrawal Hold Period"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-xs mt-1",children:z?"Ready for approval! The holding period has passed.":"Withdrawals are held for 14 days before they can be approved to ensure all orders are delivered and no disputes are pending."}),!z&&e.jsxs("p",{className:"text-[#FF1B6B] text-xs mt-1 font-medium",children:["Time remaining: ",Math.ceil((12096e5-D)/(1e3*60*60*24))," days"]})]})]})}),e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 -bottom-2",children:e.jsx("div",{className:"border-8 border-transparent border-t-white dark:border-t-gray-800"})})]})]})})()}),e.jsx("button",{onClick:()=>I(b.id),className:"p-1.5 rounded-full text-gray-500 hover:text-white hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:focus:ring-offset-gray-800 transition-colors",title:"Reject withdrawal",children:e.jsx(qt,{className:"w-4 h-4"})})]}),Date.now()-b.requestedAt>=12096e5&&e.jsxs("button",{onClick:()=>v(b),className:"w-full inline-flex items-center justify-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] dark:focus:ring-offset-gray-800",children:[e.jsx(mt,{className:"mr-1"}),"Approve"]})]})})]},b.id))})]})}),e.jsx(ml,{})]})}const at="0x5828D525fe00902AE22f2270Ac714616651894fF";function io(){const[s,t]=n.useState({withdrawalMinimum:5,platformFee:2.5,withdrawalProcessingTime:"1",maintenanceMode:!1}),[a,o]=n.useState(!0),[r,p]=n.useState(!1),[g,i]=n.useState({type:"",text:""}),[$,k]=n.useState(!1),[j,y]=n.useState(""),C=localStorage.getItem("admin-theme")||"light";n.useEffect(()=>{(async()=>{try{const A=await ze();if(A){const x=await A.request({method:"eth_accounts"});x.length>0&&x[0].toLowerCase()===at.toLowerCase()&&(y(x[0]),k(!0))}}catch(A){console.error("Error checking wallet connection:",A)}})()},[]),n.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",I=>{I.length===0||I[0].toLowerCase()!==at.toLowerCase()?(k(!1),y("")):(y(I[0]),k(!0))})},[]),n.useEffect(()=>{$&&j.toLowerCase()===at.toLowerCase()?P():o(!1)},[$,j]);const P=async()=>{if(!(!$||j.toLowerCase()!==at.toLowerCase()))try{const I=await oe(te(O,"settings","platform"));I.exists()?t(I.data()):await yt(te(O,"settings","platform"),s)}catch(I){console.error("Error fetching settings:",I),i({type:"error",text:"Failed to load settings"})}finally{o(!1)}},B=async I=>{if(I.preventDefault(),!(!$||j.toLowerCase()!==at.toLowerCase())){p(!0),i({type:"",text:""});try{await yt(te(O,"settings","platform"),s),i({type:"success",text:"Settings updated successfully"}),N.success("Settings updated successfully")}catch(A){console.error("Error updating settings:",A),i({type:"error",text:"Failed to update settings"}),N.error("Failed to update settings")}finally{p(!1)}}},v=I=>{const{name:A,value:x,type:m,checked:d}=I.target;t(b=>({...b,[A]:m==="checkbox"?d:m==="number"?parseFloat(x):x}))};return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):!$||j.toLowerCase()!==at.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(gt,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:`text-2xl font-bold ${C==="dark"?"text-white":"text-gray-800"} mb-2`,children:"Access Denied"}),e.jsx("p",{className:`${C==="dark"?"text-gray-300":"text-gray-600"} text-center mb-6`,children:"Please connect your admin wallet to access platform settings."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-bold text-[#FF1B6B] mb-6",children:"Platform Settings"}),e.jsx("div",{className:`${C==="dark"?"bg-gray-800":"bg-white"} rounded-lg shadow-lg p-6`,children:e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${C==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Minimum Withdrawal Amount (USDT)"}),e.jsx("input",{type:"number",name:"withdrawalMinimum",value:s.withdrawalMinimum,onChange:v,className:`block w-full px-3 py-2 rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${C==="dark"?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"}`,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${C==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Platform Fee (%)"}),e.jsx("input",{type:"number",name:"platformFee",value:s.platformFee,onChange:v,className:`block w-full px-3 py-2 rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${C==="dark"?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"}`,min:"0",max:"100",step:"0.1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:`block text-sm font-medium ${C==="dark"?"text-gray-300":"text-gray-700"} mb-2`,children:"Withdrawal Processing Time (days)"}),e.jsx("input",{type:"text",name:"withdrawalProcessingTime",value:s.withdrawalProcessingTime,onChange:v,className:`block w-full px-3 py-2 rounded-md shadow-sm focus:ring-[#FF1B6B] focus:border-[#FF1B6B] ${C==="dark"?"bg-gray-700 border-gray-600 text-white":"border-gray-300 text-gray-900"}`})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"maintenanceMode",checked:s.maintenanceMode,onChange:v,className:"h-4 w-4 text-[#FF1B6B] focus:ring-[#FF1B6B] border-gray-300 rounded"}),e.jsx("label",{className:`ml-2 block text-sm ${C==="dark"?"text-gray-300":"text-gray-900"}`,children:"Maintenance Mode"})]}),g.text&&e.jsx("div",{className:`p-4 rounded-md ${g.type==="success"?C==="dark"?"bg-green-900 text-green-300":"bg-green-50 text-green-800":C==="dark"?"bg-red-900 text-red-300":"bg-red-50 text-red-800"}`,children:g.text}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:r||!$||j.toLowerCase()!==at.toLowerCase(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50",children:[e.jsx(vr,{className:"mr-2"}),r?"Saving...":"Save Changes"]})})]})})]})}const rt="0x5828D525fe00902AE22f2270Ac714616651894fF",hl=()=>e.jsxs(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-6 bg-gray-200 dark:bg-gray-700 rounded w-32 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-48"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-8 w-32 bg-gray-200 dark:bg-gray-700 rounded"}),e.jsx("div",{className:"h-8 w-24 bg-gray-200 dark:bg-gray-700 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-2/3"})]})]})]}),pl=()=>e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsx("tr",{children:[...Array(9)].map((s,t)=>e.jsx("th",{className:"px-6 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-600 rounded w-24"})},t))})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[...Array(5)].map((s,t)=>e.jsx("tr",{children:[...Array(9)].map((a,o)=>e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-20"})},o))},t))})]})})}),yl=({isOpen:s,onClose:t,onSubmit:a,refundRequest:o})=>{const[r,p]=n.useState(""),[g,i]=n.useState(!1),$=async()=>{if(!r.trim()){N.error("Please enter the transaction hash");return}i(!0);try{await a(r),t()}catch(k){console.error("Error submitting transaction hash:",k),N.error("Failed to submit transaction hash")}finally{i(!1)}};return s?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Submit Transaction Hash"}),e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(gt,{className:"text-blue-500 dark:text-blue-400 text-lg mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:"Refund Details"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:["Amount: $",o.amount.toFixed(2)," ",o.order.paymentMethod.token]}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:["To: ",o.paymentAddress.slice(0,6),"...",o.paymentAddress.slice(-4)]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Transaction Hash"}),e.jsx("input",{type:"text",value:r,onChange:k=>p(k.target.value),placeholder:"0x...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-[#FF1B6B] focus:border-[#FF1B6B] bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400"})]})}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:$,disabled:g,className:`px-4 py-2 rounded-lg text-white ${g?"bg-[#FF1B6B] opacity-50 cursor-not-allowed":"bg-[#FF1B6B] hover:bg-[#D4145A]"}`,children:g?"Submitting...":"Submit & Approve"})]})]})}):null};function lo(){be();const[s,t]=n.useState(!0),[a,o]=n.useState([]),[r,p]=n.useState([]),[g,i]=n.useState(!1),[$,k]=n.useState(""),[j,y]=n.useState(null),[C,P]=n.useState(!1),[B,v]=n.useState("pending"),[I,A]=n.useState(1),[x,m]=n.useState(1),d=10;localStorage.getItem("admin-theme"),n.useEffect(()=>{b()},[]),n.useEffect(()=>{window.ethereum&&window.ethereum.on("accountsChanged",f=>{f.length===0||f[0].toLowerCase()!==rt.toLowerCase()?(i(!1),k("")):(k(f[0]),i(!0))})},[]),n.useEffect(()=>{g&&$.toLowerCase()===rt.toLowerCase()?h():t(!1)},[g,$]);const b=async()=>{try{const f=await ze();if(f){const q=await f.request({method:"eth_accounts"});q.length>0&&q[0].toLowerCase()===rt.toLowerCase()&&(k(q[0]),i(!0))}}catch(f){console.error("Error checking wallet connection:",f)}},h=async()=>{if(!(!g||$.toLowerCase()!==rt.toLowerCase()))try{const f=de(re(O,"refundRequests"),ie("status","==","pending"),ye("createdAt","desc")),q=await ge(f),G=de(re(O,"refundRequests"),ie("status","in",["approved","rejected"]),ye("processedAt","desc")),T=await ge(G),S=await Promise.all(q.docs.map(async w=>{const U=w.data(),H=te(O,"orders",U.orderId),K=await oe(H);return{id:w.id,...U,order:K.exists()?{id:K.id,...K.data()}:null,createdAt:U.createdAt?.toDate()}})),c=await Promise.all(T.docs.map(async w=>{const U=w.data(),H=te(O,"orders",U.orderId),K=await oe(H),_=te(O,"users",U.buyerId),ee=await oe(_),Y=ee.exists()?ee.data():null,Q=te(O,"sellers",U.sellerId),R=await oe(Q),J=R.exists()?R.data():null;return{id:w.id,...U,order:K.exists()?{id:K.id,...K.data()}:null,buyerName:Y?.name||"Unknown Buyer",sellerName:J?.storeName||J?.name||"Unknown Seller",createdAt:U.createdAt?.toDate(),processedAt:U.processedAt?.toDate()}}));o(S),p(c)}catch(f){console.error("Error fetching refund requests:",f),N.error("Failed to fetch refund requests")}finally{t(!1)}},D=async f=>{if(!g||$.toLowerCase()!==rt.toLowerCase()){N.error("Please connect your admin wallet");return}try{const q=await oe(te(O,"orders",f.orderId));if(!q.exists()){N.error("Order not found");return}const G=q.data(),T=G.numericOrderId;if(!T){console.error("Missing numericOrderId in order:",G),N.error("Order ID not found. This might be an old order.");return}const S=G.paymentMethod?.buyerWallet;console.log("Raw buyer address from order:",S);let c;try{c=ga(S),console.log("Formatted buyer address:",c)}catch(Fe){console.error("Error formatting buyer address:",Fe),N.error("Invalid buyer wallet address format");return}if(!pt(c)){console.error("Address validation failed:",{original:S,formatted:c}),N.error("Invalid buyer wallet address in order");return}console.log("Full refund details:",{numericOrderId:T,buyerAddress:c,orderData:G,refundRequest:f,network:G.paymentMethod?.network,token:G.paymentMethod?.token});const w=await oe(te(O,"sellers",f.sellerId));if(!w.exists()){N.error("Seller not found");return}const U=w.data().walletAddress;if(!pt(U)){console.error("Invalid seller address:",U),N.error("Invalid seller wallet address");return}const H=new Ae(window.ethereum),K=await H.getSigner(),_=f.order.paymentMethod.network,ee=_.toString(),Y=f.order.paymentMethod.token;if(!js[ee]?.[Y]){N.error(`Unsupported token ${Y} on network ${ee}`);return}const R=await nt(H,ee);if(!R){N.error("Failed to get contract instance");return}const J=R.connect(K),se=Number(f.amount).toFixed(6);console.log("Rounded refund amount:",se);const W=qe(se,6);console.log("Parsed refund amount:",W.toString());const Z=N.loading("Processing refund...");console.log("Processing refund with params:",{orderId:T,buyerAddress:c,sellerAddress:U,refundAmount:W.toString(),token:Y,network:ee,roundedAmount:se});const le=await J.processRefund(T,c,U,W);await le.wait(),await Pe(re(O,"withdrawals"),{sellerId:f.sellerId,amount:Number(se),token:Y,fee:0,netAmount:Number(se),status:"completed",walletAddress:c,network:_===1301?"unichain":"polygon",timestamp:ue(),requestedAt:Date.now(),completedAt:Date.now(),transactionHash:le.hash,refundRequestId:f.id,type:"refund"}),await xe(te(O,"refundRequests",f.id),{status:"approved",processedAt:ue(),transactionHash:le.hash}),await xe(te(O,"orders",f.orderId),{status:"refunded"});const me=te(O,"sellers",f.sellerId),X=await oe(me);if(X.exists()){const Fe=X.data().balance||0;await xe(me,{balance:Math.max(0,Fe-Number(se))})}const ae=te(O,"sellers",f.sellerId),pe=await oe(ae);if(pe.exists()){const Fe=pe.data().netRevenue||0,Nt=pe.data().monthlyRevenue||{},We=new Date,_e=`${We.getFullYear()}-${(We.getMonth()+1).toString().padStart(2,"0")}`,Ye={...Nt};Ye[_e]=(Ye[_e]||0)-Number(se),await xe(ae,{netRevenue:Math.max(0,Fe-Number(se)),monthlyRevenue:Ye,lastUpdated:ue()}),console.log("Updated seller revenue:",{previousRevenue:Fe,refundAmount:Number(se),newRevenue:Math.max(0,Fe-Number(se))})}N.dismiss(Z),N.success("Refund processed successfully"),h()}catch(q){console.error("Error processing refund:",q),N.error(q.message.includes("user rejected")?"Transaction was rejected":q.message||"Failed to process refund")}},V=async f=>{try{await xe(te(O,"refundRequests",j.id),{status:"approved",processedAt:new Date,transactionHash:f}),await xe(te(O,"orders",j.orderId),{status:"refunded"});const q=de(re(O,"withdrawals"),ie("refundRequestId","==",j.id),lt(1)),G=await ge(q);G.empty||await xe(te(O,"withdrawals",G.docs[0].id),{status:"completed",completedAt:new Date,completionTxHash:f}),N.success("Refund approved successfully"),h()}catch(q){throw console.error("Error updating refund status:",q),q}},z=async f=>{if(!g||$.toLowerCase()!==rt.toLowerCase()){N.error("Please connect your admin wallet");return}try{await xe(te(O,"refundRequests",f),{status:"rejected",processedAt:new Date}),N.success("Refund request rejected"),h()}catch(q){console.error("Error rejecting refund:",q),N.error("Failed to reject refund request")}},u=x*d,F=u-d,l=r.slice(F,u),E=Math.ceil(r.length/d),L=f=>m(f);return n.useEffect(()=>{A(1),m(1)},[B]),s?e.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-64"}),e.jsx("div",{className:"flex gap-2",children:[...Array(2)].map((f,q)=>e.jsx(M.div,{initial:{opacity:.6},animate:{opacity:1},transition:{repeat:1/0,duration:1.5,ease:"easeInOut"},className:"h-10 w-32 bg-gray-200 dark:bg-gray-700 rounded-lg"},q))})]}),B==="pending"?e.jsx("div",{className:"space-y-6",children:[...Array(3)].map((f,q)=>e.jsx(hl,{},q))}):e.jsx(pl,{})]}):!g||$.toLowerCase()!==rt.toLowerCase()?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] p-6",children:[e.jsx(gt,{className:"w-16 h-16 text-[#FF1B6B] mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Please connect your admin wallet to access the refunds page."})]}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Refunds Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v("pending"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${B==="pending"?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Pending Requests"}),e.jsx("button",{onClick:()=>v("history"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${B==="history"?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:"Refunds History"})]})]}),B==="pending"?a.length===0?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No pending refund requests"})}):e.jsx("div",{className:"grid gap-6",children:a.map(f=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Order #",f.orderId.slice(-6)]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Requested on ",f.createdAt.toLocaleString()]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>D(f),className:"flex items-center gap-1 px-3 py-1 bg-[#FF1B6B] text-white rounded-lg hover:bg-[#D4145A] transition-colors",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Request Withdrawal"]}),e.jsxs("button",{onClick:()=>z(f.id),className:"flex items-center gap-1 px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:[e.jsx(qt,{className:"w-4 h-4"}),"Reject"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Buyer ID:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:f.buyerId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Seller ID:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:f.sellerId})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Refund Amount:"}),e.jsxs("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:["$",f.amount.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Payment Address:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300 break-all",children:f.paymentAddress})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Token:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:f.order?.paymentMethod?.token})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Network:"}),e.jsx("span",{className:"ml-2 text-sm text-gray-900 dark:text-gray-300",children:f.order?.paymentMethod?.network===1301?"Unichain":"Polygon"})]})]})]})]},f.id))}):e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden",children:r.length===0?e.jsx("div",{className:"p-6 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No refund history found"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsx("tr",{children:["Order ID","Buyer","Seller","Amount","Status","Token","Network","Processed On","Transaction"].map(f=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:f},f))})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:l.map(f=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["#",f.orderId.slice(-6)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:f.buyerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:f.sellerName}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",f.amount.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${f.status==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-400":"bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-400"}`,children:f.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:f.order?.paymentMethod?.token}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:f.order?.paymentMethod?.network===1301?"Unichain":"Polygon"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:f.processedAt.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.transactionHash?e.jsx("a",{href:`${f.order?.paymentMethod?.network===1301?"https://unichain-sepolia.blockscout.com/":"https://polygonscan.com"}/tx/${f.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-[#FF1B6B] hover:text-[#D4145A] dark:text-pink-400 dark:hover:text-pink-300",children:"View"}):"-"})]},f.id))})]})}),E>1&&e.jsx("div",{className:"px-4 py-3 flex items-center justify-center border-t border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"flex gap-1",children:Array.from({length:E},(f,q)=>e.jsx("button",{onClick:()=>L(q+1),className:`px-2 py-1 text-xs font-medium rounded-md transition-colors ${x===q+1?"bg-[#FF1B6B] text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:q+1},q+1))})})]})}),e.jsx(yl,{isOpen:C,onClose:()=>{P(!1),y(null)},onSubmit:V,refundRequest:j})]})}function oo(){const{user:s}=be(),{isDarkMode:t}=ne(),[a,o]=n.useState(!0),[r,p]=n.useState([]),[g,i]=n.useState(1),$=10;n.useEffect(()=>{s?.sellerId&&k()},[s]);const k=async()=>{try{const I=de(re(O,"refundRequests"),ie("sellerId","==",s.sellerId),ye("createdAt","desc")),A=await ge(I),x=await Promise.all(A.docs.map(async m=>{const d=m.data();try{const b=te(O,"orders",d.orderId),D=(await oe(b)).data();return{id:m.id,...d,buyerName:D?.buyerInfo?.name||D?.buyerId||"Anonymous",createdAt:d.createdAt?.toDate(),processedAt:d.processedAt?.toDate()}}catch(b){return console.error("Error fetching order:",b),{id:m.id,...d,buyerName:d.buyerId||"Anonymous",createdAt:d.createdAt?.toDate(),processedAt:d.processedAt?.toDate()}}}));p(x)}catch(I){console.error("Error fetching refund requests:",I),N.error("Failed to fetch refund requests")}finally{o(!1)}},j=I=>{switch(I){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},y=g*$,C=y-$,P=r.slice(C,y),B=Math.ceil(r.length/$),v=I=>i(I);return a?e.jsx("div",{className:`flex items-center justify-center min-h-[200px] ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"w-8 h-8 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin"})}):e.jsx("div",{className:`p-4 ${t?"bg-gray-900":"bg-gray-50"}`,children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h1",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:"Buyers Refunds"})}),r.length===0?e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow p-4 text-center`,children:[e.jsx(Ve,{className:`w-12 h-12 ${t?"text-gray-600":"text-gray-400"} mx-auto mb-4`}),e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No refund requests found"})]}):e.jsxs("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow overflow-hidden`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:`${t?"bg-gray-700/50":"bg-gray-50"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Order ID"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Buyer"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Amount"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Status"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Requested On"}),e.jsx("th",{className:`px-4 py-2 text-left text-xs font-medium ${t?"text-gray-300":"text-gray-500"} uppercase tracking-wider`,children:"Processed On"})]})}),e.jsx("tbody",{className:`${t?"bg-gray-800 divide-y divide-gray-700":"bg-white divide-y divide-gray-200"}`,children:P.map(I=>e.jsxs("tr",{className:`${t?"hover:bg-gray-700/50":"hover:bg-gray-50"}`,children:[e.jsxs("td",{className:`px-4 py-3 whitespace-nowrap text-sm font-medium ${t?"text-gray-200":"text-gray-900"}`,children:["#",I.orderId.slice(-6)]}),e.jsx("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-300":"text-gray-500"}`,children:I.buyerName}),e.jsxs("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-200":"text-gray-900"}`,children:["$",I.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${j(I.status)}`,children:I.status})}),e.jsx("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-300":"text-gray-500"}`,children:I.createdAt.toLocaleString()}),e.jsx("td",{className:`px-4 py-3 whitespace-nowrap text-sm ${t?"text-gray-300":"text-gray-500"}`,children:I.processedAt?I.processedAt.toLocaleString():"-"})]},I.id))})]})}),B>1&&e.jsx("div",{className:`px-4 py-3 flex items-center justify-center ${t?"border-t border-gray-700":"border-t border-gray-200"}`,children:e.jsx("div",{className:"flex gap-1",children:Array.from({length:B},(I,A)=>e.jsx("button",{onClick:()=>v(A+1),className:`px-2 py-1 text-xs font-medium rounded-md transition-colors ${g===A+1?"bg-[#FF1B6B] text-white":t?"bg-gray-700 text-gray-300 hover:bg-gray-600":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:A+1},A+1))})})]}),e.jsx("div",{className:`mt-4 ${t?"bg-blue-900/20":"bg-blue-50"} border ${t?"border-blue-800/30":"border-blue-200"} rounded-lg p-3`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:`text-base mt-0.5 ${t?"text-blue-400":"text-blue-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${t?"text-blue-300":"text-blue-800"}`,children:"About Refund Requests"}),e.jsx("p",{className:`text-sm mt-1 ${t?"text-blue-300/90":"text-blue-700"}`,children:"Refund requests are automatically created when buyers request refunds for cancelled orders. Our platform will process and handle these refunds, ensuring proper deduction from your account balance. The refunded amount will be automatically deducted from your total sales."})]})]})})]})})}const xt=()=>{const{isDarkMode:s}=ne();return e.jsx(M.div,{className:`w-full h-full ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.4,.7,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})},fl=()=>{const{isDarkMode:s}=ne();return e.jsx("div",{className:"space-y-6",children:[1,2,3].map(t=>e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-6`,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-48 h-6",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(xt,{})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-24 h-4",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-36 h-4",children:e.jsx(xt,{})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-28 h-4",children:e.jsx(xt,{})}),e.jsx("div",{className:"w-32 h-4",children:e.jsx(xt,{})})]})]})]})},t))})},bl=s=>{switch(s){case"approved":return e.jsx(Cr,{className:"w-5 h-5 text-green-500"});case"rejected":return e.jsx(Sr,{className:"w-5 h-5 text-red-500"});default:return e.jsx(Fr,{className:"w-5 h-5 text-yellow-500"})}},jl=(s,t)=>{switch(s){case"approved":return t?"bg-[#FF1B6B]/20 border border-[#FF1B6B]/30 text-[#FF1B6B]":"bg-[#FF1B6B]/10 border border-[#FF1B6B]/20 text-[#FF1B6B]";case"rejected":return t?"bg-red-900/20 border border-red-800/30 text-red-400":"bg-red-50 border border-red-200 text-red-700";default:return t?"bg-yellow-900/20 border border-yellow-800/30 text-yellow-400":"bg-yellow-50 border border-yellow-200 text-yellow-700"}},wl=s=>{switch(s){case"approved":return"Approved";case"rejected":return"Rejected";default:return"Processing"}};function co(){const{user:s}=be(),{isDarkMode:t}=ne(),[a,o]=n.useState(!0),[r,p]=n.useState([]);n.useEffect(()=>{s?.uid&&g()},[s]);const g=async()=>{try{const i=de(re(O,"refundRequests"),ie("buyerId","==",s.uid),ye("createdAt","desc")),k=(await ge(i)).docs.map(j=>({id:j.id,...j.data(),createdAt:j.data().createdAt?.toDate(),processedAt:j.data().processedAt?.toDate()}));p(k)}catch(i){console.error("Error fetching refunds:",i),N.error("Failed to load refund history")}finally{o(!1)}};return a?e.jsx(fl,{}):e.jsxs("div",{className:`max-w-2xl mx-auto p-4 space-y-4 ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsx("h1",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-800"}`,children:"Buyers Refunds"}),r.length===0?e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow-sm p-4 text-center`,children:e.jsx("p",{className:`${t?"text-gray-400":"text-gray-500"}`,children:"No refund requests found"})}):e.jsx("div",{className:"space-y-3",children:r.map(i=>e.jsx("div",{className:`${t?"bg-gray-800":"bg-white"} rounded-lg shadow-sm border ${t?"border-gray-700 hover:border-[#FF1B6B]":"border-gray-100 hover:border-[#FF1B6B]"} transition-colors duration-200`,children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h3",{className:`text-base font-semibold ${t?"text-gray-100":"text-gray-800"}`,children:["Order #",i.orderId.slice(-6)]}),e.jsxs("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium flex items-center gap-1.5 ${jl(i.status,t)}`,children:[bl(i.status),wl(i.status)]})]}),e.jsxs("p",{className:`text-xs ${t?"text-gray-400":"text-gray-500"}`,children:["Requested on ",i.createdAt.toLocaleString()]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:`${t?"bg-[#FF1B6B]/10":"bg-[#FF1B6B]/5"} p-3 rounded-lg`,children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:`text-xs font-semibold ${t?"text-gray-300":"text-gray-700"}`,children:"Amount"})}),e.jsxs("p",{className:`text-xl font-bold ${t?"text-gray-100":"text-gray-900"}`,children:["$",i.amount.toFixed(2)," ",e.jsx("span",{className:"text-[#FF1B6B]",children:i.orderDetails.paymentMethod.token})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Payment Address"}),e.jsx("div",{className:`${t?"bg-gray-700":"bg-gray-50"} p-2 rounded-lg`,children:e.jsx("code",{className:`text-xs ${t?"text-gray-200":"text-gray-800"} break-all font-mono`,children:i.paymentAddress})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Network"}),e.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1.5 ${t?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:e.jsx("span",{className:`text-xs ${t?"text-gray-200":"text-gray-800"}`,children:i.orderDetails.paymentMethod.network===1301?"Unichain":"Polygon"})})]}),i.status==="approved"&&i.transactionHash&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Transaction Hash"}),e.jsx("div",{className:`${t?"bg-[#FF1B6B]/10 border-[#FF1B6B]/20":"bg-[#FF1B6B]/5 border-[#FF1B6B]/10"} border p-2 rounded-lg`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("code",{className:`text-xs ${t?"text-gray-200":"text-gray-800"} font-mono truncate`,children:i.transactionHash}),e.jsxs("a",{href:`${i.orderDetails.paymentMethod.network===1301?"https://unichain-sepolia.blockscout.com/tx/":"https://polygonscan.com/tx/"}${i.transactionHash}`,target:"_blank",rel:"noopener noreferrer",className:"ml-2 flex items-center gap-1 text-[#FF1B6B] hover:text-[#D4145A] transition-colors",children:[e.jsx("span",{className:"text-xs font-medium",children:"View"}),e.jsx(kr,{className:"w-3.5 h-3.5"})]})]})})]}),i.status!=="pending"&&e.jsxs("div",{children:[e.jsx("span",{className:`text-xs font-medium ${t?"text-gray-400":"text-gray-600"} block mb-1`,children:"Processed on"}),e.jsx("div",{className:`inline-flex items-center gap-2 px-2.5 py-1.5 ${t?"bg-gray-700":"bg-gray-50"} rounded-lg`,children:e.jsx("span",{className:`text-xs ${t?"text-gray-200":"text-gray-800"}`,children:i.processedAt.toLocaleString()})})]})]})]})]})},i.id))})]})}function xo(){const{isDarkMode:s}=ne(),t=[{title:"Platform Overview",icon:e.jsx($r,{className:"w-6 h-6"}),items:["These terms govern your use of our platform and services","You must be 18 years or older to use the platform","By using the platform, you agree to these terms and conditions","We reserve the right to update these terms with notice to users"]},{title:"Platform Fees and Charges",icon:e.jsx(Ze,{className:"w-6 h-6"}),items:["5% platform fee is automatically deducted from each sale","Refund requests will have a 5% fee deducted (platform fee is non-refundable)","Minimum withdrawal amount: 5 USDC/USDT for sellers","Admin can update platform fees (maximum 10%)"]},{title:"Order Processing and Shipping",icon:e.jsx(Br,{className:"w-6 h-6"}),items:["Sellers have 3 days to confirm shipping for orders","Orders not shipped within 3 days may be automatically cancelled","Sellers must provide valid tracking information when confirming shipping","Buyers are responsible for providing correct delivery addresses"]},{title:"Refunds and Cancellations",icon:e.jsx(Zs,{className:"w-6 h-6"}),items:["Only cancelled orders are eligible for refund requests","Refund requests typically take up to 1 week to process","Refunds will be processed to the original payment address","Platform fees (5%) are non-refundable on refunded orders","3-day window to request refund for cancelled orders"]},{title:"Payment and Withdrawals",icon:e.jsx(Ze,{className:"w-6 h-6"}),items:["Supported payment tokens: USDT and USDC","Payments are processed on either Unichain or Polygon network","Sellers are responsible for gas fees during withdrawals","Withdrawals are processed on the seller's selected network","Platform may hold funds for pending refunds","Withdrawal processing requires confirmation of delivery for all orders in the timeframe","If buyers don't confirm delivery, withdrawals will be processed 2-3 weeks after shipping confirmation"]},{title:"Seller Obligations",icon:e.jsx(Tr,{className:"w-6 h-6"}),items:["Sellers must maintain accurate product listings","Sellers are responsible for order fulfillment within the 3-day window","Sellers must handle shipping and provide tracking information","False shipping confirmations will result in rejected withdrawal requests","Sellers' available balance reflects total sales minus platform fees and pending refunds","Sellers must comply with all applicable laws and regulations","Posting of NSFW content is strictly prohibited and will result in immediate account termination","Platform reserves the right to delete seller accounts without notice for NSFW violations"]},{title:"Buyer Protection",icon:e.jsx(Ar,{className:"w-6 h-6"}),items:["3-day window to request refund for cancelled orders","Refund amounts will be processed minus the 5% platform fee","Buyers can track order status and shipping information","Buyers can view refund request status and transaction details","Platform maintains records of all transactions for buyer security"]},{title:"Account Security",icon:e.jsx(Dr,{className:"w-6 h-6"}),items:["Users are responsible for maintaining account security","Account credentials must not be shared with third parties","Users must notify us immediately of any unauthorized access","We reserve the right to suspend accounts for security violations"]},{title:"Platform Rights",icon:e.jsx(Er,{className:"w-6 h-6"}),items:["The platform reserves the right to pause operations if necessary","Admin can update platform fees (maximum 10%)","Platform may hold funds for pending refunds","Platform maintains records of all transactions and activities","We may modify or terminate services with notice to users","Any suspicious activity or attempts to manipulate sales will result in immediate account termination","Platform monitors and audits all transactions for potential manipulation"]}];return e.jsxs("div",{className:`max-w-5xl mx-auto px-4 py-8 ${s?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:`text-3xl font-bold mb-4 ${s?"text-gray-100":"text-gray-900"}`,children:"Terms and Conditions"}),e.jsx("p",{className:`${s?"text-gray-400":"text-gray-600"} max-w-2xl mx-auto`,children:"Please read these terms and conditions carefully before using the MerchStore platform. These terms outline the rules and regulations for the use of our services."})]}),e.jsx("div",{className:"space-y-8",children:t.map((a,o)=>e.jsx("div",{className:`${s?"bg-gray-800":"bg-white"} rounded-lg shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300`,children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"p-3 bg-[#FF1B6B]/10 rounded-lg text-[#FF1B6B]",children:a.icon}),e.jsx("h2",{className:`text-xl font-semibold ${s?"text-gray-100":"text-gray-900"}`,children:a.title})]}),e.jsx("ul",{className:"space-y-3",children:a.items.map((r,p)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#FF1B6B] mt-1.5",children:""}),e.jsx("span",{className:`${s?"text-gray-300":"text-gray-600"}`,children:r})]},p))})]})},a.title))}),e.jsxs("div",{className:"mt-12 text-center text-sm",children:[e.jsxs("p",{className:`${s?"text-gray-400":"text-gray-500"}`,children:["Last updated: ",new Date().toLocaleDateString()]}),e.jsx("p",{className:`mt-2 ${s?"text-gray-400":"text-gray-500"}`,children:"By using the MerchStore platform, you agree to these terms and conditions. We reserve the right to modify these terms at any time."})]})]})}function mo(){const{isDarkMode:s}=ne(),[t,a]=n.useState(""),[o,r]=n.useState(!1),{resetPassword:p}=be(),g=async i=>{i.preventDefault(),r(!0);try{await p(t)}catch($){N.error($.message)}finally{r(!1)}};return e.jsx("div",{className:`min-h-screen ${s?"bg-gray-900":"bg-[#FFF5F7]"} flex items-center justify-center p-4`,children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`max-w-md w-full space-y-8 ${s?"bg-gray-800":"bg-white"} p-8 rounded-2xl shadow-xl`,children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:`text-3xl font-bold ${s?"text-white":"text-gray-900"}`,children:"Reset Password"}),e.jsx("p",{className:`mt-2 text-sm ${s?"text-gray-300":"text-gray-600"}`,children:"Enter your email address and we'll send you a link to reset your password."})]}),e.jsxs("form",{onSubmit:g,className:"mt-8 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:`block text-sm font-medium ${s?"text-gray-200":"text-gray-700"}`,children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t,onChange:i=>a(i.target.value),className:`mt-1 block w-full px-3 py-2 border ${s?"border-gray-600 bg-gray-700 text-white placeholder-gray-400":"border-gray-300 text-gray-900 placeholder-gray-500"} rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors`,placeholder:"Enter your email"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Sending reset link...":"Send reset link"}),e.jsx("div",{className:"text-center",children:e.jsx(ve,{to:"/merch-store/login",className:`text-sm font-medium ${s?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"}`,children:"Back to login"})})]})]})]})})}function go(){const[s,t]=n.useState(""),[a,o]=n.useState(""),[r,p]=n.useState(!1),[g,i]=n.useState(!0),[$,k]=n.useState(""),j=De(),y=Jt();n.useEffect(()=>{const B=new URLSearchParams(y.search).get("oobCode");if(!B){N.error("Invalid password reset link"),j("/merch-store/login");return}Jr(Ls,B).then(()=>{k(B),i(!1)}).catch(v=>{console.error("Error verifying reset code:",v),N.error("This password reset link has expired or is invalid"),j("/merch-store/login")})},[j,y]);const C=async P=>{if(P.preventDefault(),s!==a){N.error("Passwords do not match");return}if(s.length<6){N.error("Password must be at least 6 characters long");return}p(!0);try{await Kr(Ls,$,s),N.success("Password reset successful! Please sign in with your new password."),j("/merch-store/login")}catch(B){console.error("Error resetting password:",B),N.error(B.message)}finally{p(!1)}};return g?e.jsx("div",{className:"min-h-screen bg-[#FFF5F7] flex items-center justify-center p-4",children:e.jsxs(M.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-[#FF1B6B] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Verifying reset link..."})]})}):e.jsx("div",{className:"min-h-screen bg-[#FFF5F7] flex items-center justify-center p-4",children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-xl",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Set New Password"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Please enter your new password below."})]}),e.jsxs("form",{onSubmit:C,className:"mt-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:s,onChange:P=>t(P.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm New Password"}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:P=>o(P.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-[#FF1B6B] focus:border-[#FF1B6B] transition-colors",placeholder:"Confirm new password"})]})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-[#FF1B6B] hover:bg-[#D4145A] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#FF1B6B] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:r?"Resetting password...":"Reset Password"})]})]})})}const Nl=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-4 border-r",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(M.div,{className:`h-7 w-32 ${s?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsx("div",{className:"overflow-y-auto",children:[...Array(5)].map((t,a)=>e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx(M.div,{className:`h-5 w-32 ${s?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:a*.1}}),e.jsx(M.div,{className:`h-3 w-3 ${s?"bg-gray-700":"bg-gray-200"} rounded-full`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:a*.1}})]}),e.jsx(M.div,{className:`h-4 w-48 ${s?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:a*.1}})]},a))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(M.div,{className:`h-6 w-32 ${s?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsxs("div",{className:"p-4 space-y-4",children:[[...Array(6)].map((t,a)=>e.jsx("div",{className:`flex ${a%2===0?"justify-end":"justify-start"}`,children:e.jsx(M.div,{className:`rounded-lg h-10 ${a%2===0?"bg-pink-100":s?"bg-gray-700":"bg-gray-200"} ${a%2===0?"w-64":"w-48"}`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:a*.1}})},a)),e.jsx("div",{className:"flex justify-start",children:e.jsx(M.div,{className:`w-[280px] h-[300px] ${s?"bg-gray-700":"bg-gray-200"} rounded-xl`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]}),e.jsx("div",{className:"p-4 border-t mt-auto",children:e.jsx(M.div,{className:`h-10 ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]})]})},vl=({message:s,currentUser:t})=>{if(s.senderId!==t.uid)return null;const a=o=>o?o.toDate().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[e.jsx("span",{className:"text-gray-400",children:a(s.timestamp)}),e.jsxs("div",{className:"text-gray-400",children:[!s.delivered&&e.jsx(ft,{className:"text-sm"}),s.delivered&&!s.read&&e.jsx(Yt,{className:"text-sm"}),s.delivered&&s.read&&e.jsx(Yt,{className:"text-sm text-[#FF1B6B]"})]})]})},kl=({message:s,currentUser:t,onEdit:a,onDelete:o})=>{const[r,p]=n.useState(!1),[g,i]=n.useState(s.text),$=s.senderId===t.uid,k=De(),{isDarkMode:j}=ne(),y=B=>e.jsx("div",{className:`my-4 ${$?"ml-auto":""} max-w-[280px]`,children:e.jsxs("button",{onClick:()=>k(`/merch-store/product/${B.productId}`),className:`w-full rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow ${$?j?"border-pink-900/20":"border-pink-100":j?"border-gray-700":"border-gray-100"}`,children:[e.jsx("img",{src:B.image,alt:B.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:`p-3 ${j?"bg-gray-800":"bg-white"} text-left`,children:[e.jsx("h4",{className:`font-medium ${j?"text-gray-100":"text-gray-800"}`,children:B.name}),e.jsx("p",{className:`text-sm ${j?"text-gray-400":"text-gray-500"} mt-1`,children:B.description}),e.jsxs("p",{className:"font-medium mt-2 text-[#FF1B6B]",children:["$",B.price.toFixed(2)]})]})]})}),C=()=>{a(s.id,g),p(!1)},P=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),C()),B.key==="Escape"&&(p(!1),i(s.text))};return e.jsx("div",{className:`mb-6 ${$?"text-right":""}`,children:e.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:e.jsx("div",{className:"inline-block relative group",children:r?e.jsxs("div",{className:"flex flex-col gap-2 min-w-[300px]",children:[e.jsx("textarea",{value:g,onChange:B=>i(B.target.value),onKeyDown:P,className:`w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] min-h-[100px] resize-none ${j?"bg-gray-700 border-gray-600 text-gray-100":"border-gray-200 text-gray-900"}`,autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("button",{onClick:C,className:`px-3 py-1.5 text-[#FF1B6B] ${j?"hover:bg-pink-900/20":"hover:bg-pink-50"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(ft,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Save"})]}),e.jsxs("button",{onClick:()=>{p(!1),i(s.text)},className:`px-3 py-1.5 ${j?"text-gray-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-100"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(ht,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:`inline-block max-w-[80%] relative ${$?"ml-auto":""}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[$&&!s.productCard&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>p(!0),className:`p-1.5 ${j?"text-gray-400 hover:text-[#FF1B6B] hover:bg-pink-900/20":"text-gray-500 hover:text-[#FF1B6B] hover:bg-pink-50"} rounded-full transition-colors`,children:e.jsx(da,{className:"text-sm"})}),e.jsx("button",{onClick:()=>o(s.id),className:`p-1.5 ${j?"text-gray-400 hover:text-red-500 hover:bg-red-900/20":"text-gray-500 hover:text-red-500 hover:bg-red-50"} rounded-full transition-colors`,children:e.jsx(bt,{className:"text-sm"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:`rounded-2xl px-4 py-2.5 ${$?"bg-[#FF1B6B] text-white":j?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-800"}`,children:e.jsx("p",{className:"whitespace-pre-wrap break-words text-left",children:s.text})}),s.edited&&e.jsx("div",{className:`text-xs ${j?"text-gray-500":"text-gray-400"} mt-0.5 text-right`,children:"edited"}),s.productCard&&y(s.productCard),e.jsx(vl,{message:s,currentUser:t})]})]})})})})})})},uo=()=>{const{conversationId:s}=Kt(),t=De(),{user:a}=be(),[o,r]=n.useState([]),[p,g]=n.useState(null),[i,$]=n.useState([]),[k,j]=n.useState(""),y=n.useRef(null),[C,P]=n.useState(!0),{isDarkMode:B}=ne();n.useEffect(()=>{if(!a)return;const x=de(re(O,"conversations"),ie("participants","array-contains",a.uid),ye("updatedAt","desc")),m=it(x,d=>{const b=d.docs.map(h=>({id:h.id,...h.data()}));r(b),P(!1)});return()=>m()},[a]),n.useEffect(()=>{if(!s)return;const x=de(re(O,"messages"),ie("conversationId","==",s),ye("timestamp","asc")),m=it(x,d=>{const b=d.docs.map(h=>({id:h.id,...h.data()}));if($(b),p){const h=d.docs.filter(D=>D.data().senderId!==a.uid&&(!D.data().read||!D.data().delivered));if(h.length>0){const D=bs(O);h.forEach(V=>{D.update(V.ref,{delivered:!0,read:!0})}),D.commit()}xe(te(O,"conversations",s),{[`unreadCount.${a.uid}`]:0})}});return()=>m()},[s,p]),n.useEffect(()=>{const x=o.find(m=>m.id===s);g(x)},[s,o]),n.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[i]);const v=async x=>{if(x.preventDefault(),!k.trim())return;const m=k.trim();j("");try{await Pe(re(O,"messages"),{conversationId:s,senderId:a.uid,text:m,timestamp:ue(),delivered:!1,read:!1}),await xe(te(O,"conversations",s),{lastMessage:m,lastMessageTime:ue(),[`unreadCount.${p.sellerId}`]:(p.unreadCount?.[p.sellerId]||0)+1,updatedAt:ue()})}catch(d){console.error("Error sending message:",d),N.error("Failed to send message"),j(m)}},I=async(x,m)=>{if(m.trim())try{await xe(te(O,"messages",x),{text:m.trim(),edited:!0,editedAt:ue()})}catch(d){console.error("Error editing message:",d),N.error("Failed to edit message")}},A=async x=>{try{await jt(te(O,"messages",x)),N.success("Message deleted")}catch(m){console.error("Error deleting message:",m),N.error("Failed to delete message")}};return C?e.jsx("div",{className:`min-h-screen ${B?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${B?"bg-gray-800":"bg-white"} rounded-xl shadow-sm overflow-hidden`,children:e.jsx(Nl,{})})})}):e.jsx("div",{className:`min-h-screen ${B?"bg-gray-900":"bg-gradient-to-br from-gray-50 to-pink-50/30"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${B?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden backdrop-blur-xl`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:`col-span-4 border-r ${B?"border-gray-700":"border-gray-100"}`,children:[e.jsx("div",{className:`p-6 border-b ${B?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-semibold ${B?"text-gray-100":"text-gray-800"}`,children:"Messages"})}),e.jsx("div",{className:"overflow-y-auto h-[calc(100vh-12rem)] scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-gray-50",children:o.map(x=>e.jsx("button",{onClick:()=>t(`/merch-store/inbox/${x.id}`),className:`w-full p-6 border-b ${B?"border-gray-700 hover:bg-gray-700/50":"border-gray-100 hover:bg-gray-50/80"} transition-all ${x.id===s?B?"bg-gray-700/50":"bg-gray-50/80":""}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("h3",{className:`font-medium ${B?"text-gray-100":"text-gray-800"} truncate ${x.unreadCount?.[a.uid]>0?"font-bold":""}`,children:a.uid===x.buyerId?x.sellerName:x.buyerName}),x.isVerifiedSeller&&a.uid===x.buyerId&&e.jsxs("div",{className:"group relative inline-flex items-center shrink-0",children:[e.jsx(Ke,{className:"!w-[10px] !h-[10px] min-w-[10px] min-h-[10px]"}),e.jsx("div",{className:`absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-1 py-0.5 ${B?"bg-gray-800":"bg-gray-900"} text-white text-[8px] rounded opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 whitespace-nowrap z-10`,children:"Verified Store"})]})]}),e.jsx("p",{className:`text-sm truncate ${x.unreadCount?.[a.uid]>0?B?"text-gray-100 font-medium":"text-gray-900 font-medium":B?"text-gray-400":"text-gray-500"}`,children:x.lastMessage||"No messages yet"}),x.unreadCount?.[a.uid]>0&&e.jsxs("div",{className:"mt-1 text-xs text-[#FF1B6B]",children:[x.unreadCount[a.uid]," new ",x.unreadCount[a.uid]===1?"message":"messages"]})]}),x.unreadCount?.[a.uid]>0&&e.jsx("span",{className:"bg-[#FF1B6B] text-white text-xs px-2.5 py-1.5 rounded-full ml-3 shrink-0",children:x.unreadCount[a.uid]})]})},x.id))})]}),e.jsx("div",{className:`col-span-8 ${B?"bg-gray-800":"bg-white"}`,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`p-6 border-b ${B?"border-gray-700 bg-gray-800/80":"border-gray-100 bg-white/80"} backdrop-blur-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"md:hidden hover:text-[#FF1B6B] transition-colors",children:e.jsx(St,{className:"text-xl"})}),e.jsx("h3",{className:`font-medium ${B?"text-gray-100":"text-gray-800"}`,children:a.uid===p.buyerId?p.sellerName:p.buyerName})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto h-[calc(100vh-16rem)] no-scrollbar",children:[i.map(x=>e.jsx(kl,{message:x,currentUser:a,onEdit:I,onDelete:A},x.id)),e.jsx("div",{ref:y})]}),e.jsx("form",{onSubmit:v,className:`p-4 border-t ${B?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:k,onChange:x=>j(x.target.value),placeholder:"Type a message...",className:`flex-1 px-4 py-3 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] transition-all ${B?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400":"border-gray-200 text-gray-900"}`}),e.jsx("button",{type:"submit",className:"px-5 py-3 bg-[#FF1B6B] text-white rounded-xl hover:bg-[#D4145A] transition-colors",children:e.jsx(oa,{className:"text-xl"})})]})})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:`w-16 h-16 mb-4 ${B?"text-gray-600":"text-gray-300"}`,children:e.jsx(ps,{className:"w-full h-full"})}),e.jsx("p",{className:B?"text-gray-400":"text-gray-500",children:"Select a conversation to start messaging"})]})})]})})})})},Fl=()=>{const{isDarkMode:s}=ne();return e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-4 border-r",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(M.div,{className:`h-7 w-48 ${s?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsx("div",{className:"overflow-y-auto",children:[...Array(5)].map((t,a)=>e.jsxs("div",{className:"p-4 border-b",children:[e.jsx(M.div,{className:`h-5 w-32 ${s?"bg-gray-700":"bg-gray-200"} rounded mb-2`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:a*.1}}),e.jsx(M.div,{className:`h-4 w-48 ${s?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:a*.1}})]},a))})]}),e.jsxs("div",{className:"col-span-8",children:[e.jsx("div",{className:"p-4 border-b",children:e.jsx(M.div,{className:`h-6 w-32 ${s?"bg-gray-700":"bg-gray-200"} rounded`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})}),e.jsxs("div",{className:"p-4 space-y-4",children:[[...Array(6)].map((t,a)=>e.jsx("div",{className:`flex ${a%2===0?"justify-end":"justify-start"}`,children:e.jsx(M.div,{className:`rounded-lg h-10 ${a%2===0?"bg-pink-100":s?"bg-gray-700":"bg-gray-200"} ${a%2===0?"w-64":"w-48"}`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0,delay:a*.1}})},a)),e.jsx("div",{className:"flex justify-start",children:e.jsx(M.div,{className:`w-[280px] h-[300px] ${s?"bg-gray-700":"bg-gray-200"} rounded-xl`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]}),e.jsx("div",{className:"p-4 border-t mt-auto",children:e.jsx(M.div,{className:`h-10 ${s?"bg-gray-700":"bg-gray-200"} rounded-lg`,animate:{opacity:[.5,.8,.5]},transition:{duration:1.5,repeat:1/0}})})]})]})},Sl=({message:s,currentUser:t})=>{if(s.senderId!==t.uid)return null;const a=o=>o?o.toDate().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[e.jsx("span",{className:"text-gray-400",children:a(s.timestamp)}),e.jsxs("div",{className:"text-gray-400",children:[!s.delivered&&e.jsx(ft,{className:"text-sm"}),s.delivered&&!s.read&&e.jsx(Yt,{className:"text-sm"}),s.delivered&&s.read&&e.jsx(Yt,{className:"text-sm text-[#FF1B6B]"})]})]})},Cl=({message:s,currentUser:t,onEdit:a,onDelete:o})=>{const[r,p]=n.useState(!1),[g,i]=n.useState(s.text),$=s.senderId===t.uid,k=De(),{isDarkMode:j}=ne(),y=B=>e.jsx("div",{className:`my-4 ${$?"ml-auto":""} max-w-[280px]`,children:e.jsxs("button",{onClick:()=>k(`/merch-store/product/${B.productId}`),className:`w-full rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow ${$?j?"border-pink-900/20":"border-pink-100":j?"border-gray-700":"border-gray-100"}`,children:[e.jsx("img",{src:B.image,alt:B.name,className:"w-full h-48 object-cover"}),e.jsxs("div",{className:`p-3 ${j?"bg-gray-800":"bg-white"} text-left`,children:[e.jsx("h4",{className:`font-medium ${j?"text-gray-100":"text-gray-800"}`,children:B.name}),e.jsx("p",{className:`text-sm ${j?"text-gray-400":"text-gray-500"} mt-1`,children:B.description}),e.jsxs("p",{className:"font-medium mt-2 text-[#FF1B6B]",children:["$",B.price.toFixed(2)]})]})]})}),C=()=>{a(s.id,g),p(!1)},P=B=>{B.key==="Enter"&&!B.shiftKey&&(B.preventDefault(),C()),B.key==="Escape"&&(p(!1),i(s.text))};return e.jsx("div",{className:`mb-6 ${$?"text-right":""}`,children:e.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2},children:e.jsx("div",{className:"inline-block relative group",children:r?e.jsxs("div",{className:"flex flex-col gap-2 min-w-[300px]",children:[e.jsx("textarea",{value:g,onChange:B=>i(B.target.value),onKeyDown:P,className:`w-full px-4 py-2.5 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] min-h-[100px] resize-none ${j?"bg-gray-700 border-gray-600 text-gray-100":"border-gray-200 text-gray-900"}`,autoFocus:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("button",{onClick:C,className:`px-3 py-1.5 text-[#FF1B6B] ${j?"hover:bg-pink-900/20":"hover:bg-pink-50"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(ft,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Save"})]}),e.jsxs("button",{onClick:()=>{p(!1),i(s.text)},className:`px-3 py-1.5 ${j?"text-gray-400 hover:bg-gray-700":"text-gray-500 hover:bg-gray-100"} rounded-full transition-colors flex items-center gap-1`,children:[e.jsx(ht,{className:"text-xl"}),e.jsx("span",{className:"text-sm",children:"Cancel"})]})]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:`inline-block max-w-[80%] relative ${$?"ml-auto":""}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[$&&!s.productCard&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>p(!0),className:`p-1.5 ${j?"text-gray-400 hover:text-[#FF1B6B] hover:bg-pink-900/20":"text-gray-500 hover:text-[#FF1B6B] hover:bg-pink-50"} rounded-full transition-colors`,children:e.jsx(da,{className:"text-sm"})}),e.jsx("button",{onClick:()=>o(s.id),className:`p-1.5 ${j?"text-gray-400 hover:text-red-500 hover:bg-red-900/20":"text-gray-500 hover:text-red-500 hover:bg-red-50"} rounded-full transition-colors`,children:e.jsx(bt,{className:"text-sm"})})]}),e.jsxs("div",{children:[e.jsx("div",{className:`rounded-2xl px-4 py-2.5 ${$?"bg-[#FF1B6B] text-white":j?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-800"}`,children:e.jsx("p",{className:"whitespace-pre-wrap break-words text-left",children:s.text})}),s.edited&&e.jsx("div",{className:`text-xs ${j?"text-gray-500":"text-gray-400"} mt-0.5 text-right`,children:"edited"}),s.productCard&&y(s.productCard),e.jsx(Sl,{message:s,currentUser:t})]})]})})})})})})},ho=()=>{const{conversationId:s}=Kt(),t=De(),{user:a}=be(),[o,r]=n.useState([]),[p,g]=n.useState(null),[i,$]=n.useState([]),[k,j]=n.useState(""),y=n.useRef(null),[C,P]=n.useState(!0),{isDarkMode:B}=ne();n.useEffect(()=>{if(!a)return;const x=de(re(O,"conversations"),ie("participants","array-contains",a.sellerId),ye("updatedAt","desc")),m=it(x,d=>{const b=d.docs.map(h=>({id:h.id,...h.data()}));r(b),P(!1)});return()=>m()},[a]),n.useEffect(()=>{if(!s)return;const x=de(re(O,"messages"),ie("conversationId","==",s),ye("timestamp","asc")),m=it(x,d=>{const b=d.docs.map(h=>({id:h.id,...h.data()}));if($(b),p){const h=d.docs.filter(D=>D.data().senderId!==a.uid&&(!D.data().read||!D.data().delivered));if(h.length>0){const D=bs(O);h.forEach(V=>{D.update(V.ref,{delivered:!0,read:!0})}),D.commit()}xe(te(O,"conversations",s),{[`unreadCount.${a.sellerId}`]:0})}});return()=>m()},[s,p]),n.useEffect(()=>{const x=o.find(m=>m.id===s);g(x)},[s,o]),n.useEffect(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[i]);const v=async x=>{if(x.preventDefault(),!k.trim())return;const m=k.trim();j("");try{await Pe(re(O,"messages"),{conversationId:s,senderId:a.uid,text:m,timestamp:ue(),delivered:!1,read:!1}),await xe(te(O,"conversations",s),{lastMessage:m,lastMessageTime:ue(),[`unreadCount.${p.buyerId}`]:(p.unreadCount?.[p.buyerId]||0)+1,updatedAt:ue()})}catch(d){console.error("Error sending message:",d),N.error("Failed to send message"),j(m)}},I=async(x,m)=>{if(m.trim())try{await xe(te(O,"messages",x),{text:m.trim(),edited:!0,editedAt:ue()})}catch(d){console.error("Error editing message:",d),N.error("Failed to edit message")}},A=async x=>{try{await jt(te(O,"messages",x)),N.success("Message deleted")}catch(m){console.error("Error deleting message:",m),N.error("Failed to delete message")}};return C?e.jsx("div",{className:`min-h-screen ${B?"bg-gray-900":"bg-gray-50"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${B?"bg-gray-800":"bg-white"} rounded-xl shadow-sm overflow-hidden`,children:e.jsx(Fl,{})})})}):e.jsx("div",{className:`min-h-screen ${B?"bg-gray-900":"bg-gradient-to-br from-gray-50 to-pink-50/30"}`,children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx("div",{className:`${B?"bg-gray-800 border-gray-700":"bg-white border-gray-100"} rounded-2xl shadow-sm border overflow-hidden backdrop-blur-xl`,children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsxs("div",{className:`col-span-4 border-r ${B?"border-gray-700":"border-gray-100"}`,children:[e.jsx("div",{className:`p-6 border-b ${B?"border-gray-700":"border-gray-100"}`,children:e.jsx("h2",{className:`text-xl font-semibold ${B?"text-gray-100":"text-gray-800"}`,children:"Customer Messages"})}),e.jsx("div",{className:"overflow-y-auto h-[calc(100vh-12rem)] scrollbar-thin scrollbar-thumb-gray-200 scrollbar-track-gray-50",children:o.map(x=>e.jsx("button",{onClick:()=>t(`/merch-store/seller/inbox/${x.id}`),className:`w-full p-6 border-b ${B?"border-gray-700 hover:bg-gray-700/50":"border-gray-100 hover:bg-gray-50/80"} transition-all ${x.id===s?B?"bg-gray-700/50":"bg-gray-50/80":""}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex items-center gap-1.5 mb-1",children:e.jsx("h3",{className:`font-medium ${B?"text-gray-100":"text-gray-800"} truncate ${x.unreadCount?.[a.sellerId]>0?"font-bold":""}`,children:x.buyerName})}),e.jsx("p",{className:`text-sm truncate ${x.unreadCount?.[a.sellerId]>0?B?"text-gray-100 font-medium":"text-gray-900 font-medium":B?"text-gray-400":"text-gray-500"}`,children:x.lastMessage||"No messages yet"}),x.unreadCount?.[a.sellerId]>0&&e.jsxs("div",{className:"mt-1 text-xs text-[#FF1B6B]",children:[x.unreadCount[a.sellerId]," new ",x.unreadCount[a.sellerId]===1?"message":"messages"]})]}),x.unreadCount?.[a.sellerId]>0&&e.jsx("span",{className:"bg-[#FF1B6B] text-white text-xs px-2.5 py-1.5 rounded-full ml-3 shrink-0",children:x.unreadCount[a.sellerId]})]})},x.id))})]}),e.jsx("div",{className:`col-span-8 ${B?"bg-gray-800":"bg-white"}`,children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`p-6 border-b ${B?"border-gray-700 bg-gray-800/80":"border-gray-100 bg-white/80"} backdrop-blur-sm`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>t(-1),className:"md:hidden hover:text-[#FF1B6B] transition-colors",children:e.jsx(St,{className:"text-xl"})}),e.jsx("h3",{className:`font-medium ${B?"text-gray-100":"text-gray-800"}`,children:p.buyerName})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto h-[calc(100vh-16rem)] no-scrollbar",children:[i.map(x=>e.jsx(Cl,{message:x,currentUser:a,onEdit:I,onDelete:A},x.id)),e.jsx("div",{ref:y})]}),e.jsx("form",{onSubmit:v,className:`p-4 border-t ${B?"border-gray-700":"border-gray-100"}`,children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:k,onChange:x=>j(x.target.value),placeholder:"Type a message...",className:`flex-1 px-4 py-3 border rounded-xl focus:outline-none focus:border-[#FF1B6B] focus:ring-1 focus:ring-[#FF1B6B] transition-all ${B?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400":"border-gray-200 text-gray-900"}`}),e.jsx("button",{type:"submit",className:"px-5 py-3 bg-[#FF1B6B] text-white rounded-xl hover:bg-[#D4145A] transition-colors",children:e.jsx(oa,{className:"text-xl"})})]})})]}):e.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-500",children:[e.jsx("div",{className:`w-16 h-16 mb-4 ${B?"text-gray-600":"text-gray-300"}`,children:e.jsx(ps,{className:"w-full h-full"})}),e.jsx("p",{className:B?"text-gray-400":"text-gray-500",children:"Select a conversation to start messaging"})]})})]})})})})},Ut=({title:s,value:t,icon:a,trend:o,subtitle:r,secondaryValue:p})=>e.jsx(M.div,{whileHover:{y:-3},className:"bg-white dark:bg-gray-800 p-4 rounded-2xl shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white mt-1",children:t}),o&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(ra,{className:"text-emerald-500 w-4 h-4"}),e.jsxs("span",{className:"text-xs text-emerald-500",children:[o,"% from last month"]})]}),p&&e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:["Refunds: ",p]}),r&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:r})]}),e.jsx("div",{className:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg",children:e.jsx(a,{className:"w-5 h-5 text-[#FF1B6B]"})})]})}),po=()=>{const[s,t]=n.useState(!1),[a,o]=n.useState([]),[r,p]=n.useState([]),[g,i]=n.useState(null),[$,k]=n.useState([]),[j,y]=n.useState(""),[C,P]=n.useState(1);n.useState(!0);const B=5;n.useEffect(()=>{v(),I()},[]),n.useEffect(()=>{const D=a.filter(V=>V.storeName.toLowerCase().includes(j.toLowerCase())||V.id.toLowerCase().includes(j.toLowerCase())).sort((V,z)=>z.metrics.allTimeRevenue-V.metrics.allTimeRevenue);p(D),P(1)},[j,a]);const v=async()=>{try{const h=de(re(O,"sellers"),ye("storeName")),V=(await ge(h)).docs.map(u=>{const F=u.data(),l=F.country||{};return typeof l=="string"?{id:u.id,...F,country:{code:l.trim().toLowerCase().slice(0,2),name:l}}:l.code?{id:u.id,...F,country:{...l,code:l.code.trim().toLowerCase()}}:{id:u.id,...F}}),z=await Promise.all(V.map(async u=>{const F=new Date,l=new Date(F.getFullYear(),F.getMonth(),1),E=new Date(F.getFullYear(),F.getMonth()-1,1),L=new Date(F.getFullYear(),F.getMonth(),0),f=de(re(O,"orders"),ie("sellerId","==",u.id)),G=(await ge(f)).docs.map(W=>({id:W.id,...W.data()})),T=de(re(O,"withdrawals"),ie("sellerId","==",u.id)),c=(await ge(T)).docs.map(W=>{const Z=W.data();return{id:W.id,...Z,createdAt:Z.requestedAt?new Date(Z.requestedAt):null}});c.sort((W,Z)=>{const le=W.createdAt?.toDate?.()||new Date(W.createdAt||0);return(Z.createdAt?.toDate?.()||new Date(Z.createdAt||0))-le});const w=c.reduce((W,Z)=>(Z.status==="completed"?W.completed+=Z.amount||0:Z.status==="pending"&&(W.pending+=Z.amount||0),W),{completed:0,pending:0}),U=G.filter(W=>(W.createdAt?.toDate?.()||new Date(W.createdAt||0))>=l),H=G.filter(W=>{const Z=W.createdAt?.toDate?.()||new Date(W.createdAt||0);return Z>=E&&Z<=L}),K=G.filter(W=>W.status!=="cancelled"),_=K.reduce((W,Z)=>Z.status==="refunded"?W:W+(Z.total||0),0),ee=_,Y=_-w.completed,Q=new Set(K.map(W=>W.buyerId)).size,R=(W,Z)=>Z===0?W>0?100:0:(W-Z)/Z*100,J=U.reduce((W,Z)=>Z.status!=="refunded"&&Z.status!=="cancelled"?W+(Z.total||0):W,0),se=H.reduce((W,Z)=>Z.status!=="refunded"&&Z.status!=="cancelled"?W+(Z.total||0):W,0);return{...u,metrics:{allTimeRevenue:ee,totalWithdrawn:w.completed,pendingWithdrawals:w.pending,netRevenue:Y,totalOrders:G.length,totalCustomers:Q,revenueChange:parseFloat(R(J,se).toFixed(1)),ordersChange:parseFloat(R(U.length,H.length).toFixed(1)),customersChange:parseFloat(R(new Set(U.map(W=>W.buyerId)).size,new Set(H.map(W=>W.buyerId)).size).toFixed(1))},withdrawalHistory:c.sort((W,Z)=>(Z.requestedAt||0)-(W.requestedAt||0)).map(W=>({id:W.id,amount:W.amount||0,status:W.status,createdAt:W.requestedAt?new Date(W.requestedAt):null,network:W.network,walletAddress:W.walletAddress}))}}));o(z)}catch(h){console.error("Error fetching stores data:",h),N.error("Failed to load stores data")}finally{t(!1)}},I=async()=>{try{const h=de(re(O,"withdrawals"),ye("requestedAt","desc")),V=(await ge(h)).docs.map(z=>({id:z.id,...z.data(),createdAt:z.data().requestedAt?new Date(z.data().requestedAt):null}));k(V)}catch(h){console.error("Error fetching withdrawal history:",h),N.error("Failed to load withdrawal history")}},A=C*B,x=A-B,m=r.slice(x,A),d=Math.ceil(r.length/B),b=h=>{h>0&&h<=d&&P(h)};return s?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Stores Revenue"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search stores...",value:j,onChange:h=>y(h.target.value),className:"pl-10 pr-4 py-2 border border-gray-200 dark:border-gray-700 rounded-lg w-64 focus:outline-none focus:ring-2 focus:ring-pink-100 focus:border-[#FF1B6B] bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),e.jsx(na,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"})]})]}),e.jsx("div",{className:"grid gap-6 mb-6",children:m.map(h=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:h.storeName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Store ID: ",h.id]}),h.country?.code&&e.jsx("img",{src:`https://flagcdn.com/${h.country.code.toLowerCase()}.svg`,alt:h.country.name||"Store country flag",className:"w-3.5 h-2.5 object-cover rounded-[2px] shadow-sm"})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${h.verificationStatus==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-300"}`,children:h.verificationStatus==="approved"?"Verified":"Unverified"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(Ut,{title:"All Time Revenue",value:`$${h.metrics.allTimeRevenue.toFixed(2)}`,icon:Vt,subtitle:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsxs("span",{children:["Withdrawn: $",h.metrics.totalWithdrawn.toFixed(2)]}),h.metrics.pendingWithdrawals>0&&e.jsxs("span",{className:"text-yellow-600",children:["(-$",h.metrics.pendingWithdrawals.toFixed(2)," pending)"]})]})}),e.jsx(Ut,{title:"Net Revenue",value:`$${h.metrics.netRevenue.toFixed(2)}`,icon:Vt,trend:h.metrics.revenueChange}),e.jsx(Ut,{title:"Total Orders",value:h.metrics.totalOrders,icon:Bt,trend:h.metrics.ordersChange}),e.jsx(Ut,{title:"Total Customers",value:h.metrics.totalCustomers,icon:zt,trend:h.metrics.customersChange})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("button",{onClick:D=>{D.stopPropagation(),i(g===h.id?null:h.id)},className:"w-full flex items-center justify-between mb-4 text-gray-900 dark:text-white hover:text-[#FF1B6B] dark:hover:text-[#FF1B6B] transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ir,{className:"w-5 h-5"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Withdrawal History"})]}),e.jsx(ns,{className:`w-5 h-5 transition-transform duration-200 ${g===h.id?"rotate-180":""}`})]}),e.jsx(At,{children:g===h.id&&e.jsx(M.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-sm text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3",children:"Store Name"}),e.jsx("th",{className:"px-4 py-3",children:"Date"}),e.jsx("th",{className:"px-4 py-3",children:"Amount"}),e.jsx("th",{className:"px-4 py-3",children:"Token"}),e.jsx("th",{className:"px-4 py-3",children:"Network"}),e.jsx("th",{className:"px-4 py-3",children:"Wallet Address"}),e.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:[h.withdrawalHistory.map(D=>e.jsxs("tr",{className:"text-sm hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:h.storeName}),e.jsx("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:D.createdAt?(D.createdAt?.toDate?.()||new Date(D.createdAt)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date available"}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:["$",D.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[D.token==="USDC"?e.jsx("img",{src:"/usdc.png",alt:"USDC",className:"w-4 h-4 object-contain"}):e.jsx("img",{src:"/usdt.png",alt:"USDT",className:"w-4 h-4 object-contain"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:D.token||"USDT"})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[D.network==="polygon"?e.jsx("img",{src:"/polygon.png",alt:"Polygon",className:"w-4 h-4 object-contain"}):D.network==="unichain"?e.jsx("img",{src:"/unichain-logo.png",alt:"Unichain",className:"w-4 h-4 object-contain"}):null,e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:D.network})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4 text-[#FF1B6B]"}),e.jsxs("span",{className:"font-mono text-xs text-gray-700 dark:text-gray-300",children:[D.walletAddress.slice(0,6),"...",D.walletAddress.slice(-4)]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${D.status==="completed"?"bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-300":"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300"}`,children:D.status})})]},D.id)),h.withdrawalHistory.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-4 py-3 text-center text-gray-500 dark:text-gray-400",children:"No withdrawal history"})})]})]})})})})]})]},h.id))}),d>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>b(C-1),disabled:C===1,className:`p-2 rounded-lg ${C===1?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx(Pr,{className:"w-5 h-5"})}),Array.from({length:d},(h,D)=>D+1).map(h=>e.jsx("button",{onClick:()=>b(h),className:`w-8 h-8 rounded-lg text-sm font-medium ${C===h?"bg-[#FF1B6B] text-white":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:h},h)),e.jsx("button",{onClick:()=>b(C+1),disabled:C===d,className:`p-2 rounded-lg ${C===d?"text-gray-400 dark:text-gray-600 cursor-not-allowed":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:e.jsx(la,{className:"w-5 h-5"})})]})]})};export{_l as A,Ol as B,so as C,Jl as E,ql as F,Ll as H,uo as I,Hl as L,Wl as M,ao as O,to as P,co as R,Rl as S,xo as T,Ul as a,Pl as b,Je as c,Ml as d,eo as e,Vl as f,zl as g,ro as h,Yl as i,Ql as j,Gl as k,Kl as l,Zl as m,oo as n,Xl as o,mo as p,go as q,ho as r,no as s,lo as t,io as u,po as v,Il as w};
