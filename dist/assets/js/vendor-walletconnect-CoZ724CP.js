import{s as Rl,x as kf,r as $l,H as P2,c as Df,e as Mf}from"./vendor-stablelib-CqeRPt7t.js";import{d as dn}from"./vendor-m-BMrh0xrN.js";import{e as ht,c as ss}from"./vendor-e-BAzhHmIV.js";import{_ as Lf}from"./rainbow-utils-BNXFv0tM.js";import{f as lt,t as Xe,d as nl,g as T2}from"./vendor-u-C_I5LO-p.js";import{c as N2,a9 as jf}from"./vendor-d-0o7eJBx7.js";import{g as os,c as Un,a as A2}from"./vendor-a-DTa6tF4e.js";import{z as k2,A as D2}from"./vendor-s-TuUARqME.js";import{b as M2}from"./vendor-f-Cth8Ya-u.js";import{c as L2,g as Md,s as j2,d as U2,k as q2,e as W2,Y as H2,_ as z2}from"./vendor-i-QmFmXgsK.js";import{D as To,b as F2,h as Ld,y as V2}from"./vendor-p-CyOive9t.js";import{J as B2,K as de,L as Re,M as j,N as mr,O as Je}from"./vendor-l-CfR6lwhX.js";import{o as jd,b as K2}from"./vendor-c-Cp8dGTsr.js";import{f as G2}from"./vendor-t-BWxlVkay.js";import{a as Uf,b as qf}from"./vendor-q-DQjQg5mj.js";import{i as ge,n as oe,t as ut,e as pe}from"./vendor-lit-DqIZwSbB.js";var G={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var il=function(r,e){return il=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},il(r,e)};function Y2(r,e){il(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var sl=function(){return sl=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},sl.apply(this,arguments)};function Z2(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function J2(r,e,t,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,t,i);else for(var d=r.length-1;d>=0;d--)(l=r[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function Q2(r,e){return function(t,i){e(t,i,r)}}function X2(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function eE(r,e,t,i){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(b){try{g(i.next(b))}catch(I){l(I)}}function m(b){try{g(i.throw(b))}catch(I){l(I)}}function g(b){b.done?c(b.value):o(b.value).then(d,m)}g((i=i.apply(r,e||[])).next())})}function tE(r,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(g){return function(b){return m([g,b])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(c=g[0]&2?o.return:g[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,g[1])).done)return c;switch(o=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(b){g=[6,b],o=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function rE(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function nE(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function ol(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wf(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return c}function iE(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(Wf(arguments[e]));return r}function sE(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)i[o]=c[l];return i}function Xi(r){return this instanceof Xi?(this.v=r,this):new Xi(r)}function oE(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){i[S]&&(o[S]=function(k){return new Promise(function(A,M){c.push([S,k,A,M])>1||d(S,k)})})}function d(S,k){try{m(i[S](k))}catch(A){I(c[0][3],A)}}function m(S){S.value instanceof Xi?Promise.resolve(S.value.v).then(g,b):I(c[0][2],S)}function g(S){d("next",S)}function b(S){d("throw",S)}function I(S,k){S(k),c.shift(),c.length&&d(c[0][0],c[0][1])}}function aE(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,c){e[o]=r[o]?function(l){return(t=!t)?{value:Xi(r[o](l)),done:o==="return"}:c?c(l):l}:c}}function cE(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ol=="function"?ol(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(c){t[c]=r[c]&&function(l){return new Promise(function(d,m){l=r[c](l),o(d,m,l.done,l.value)})}}function o(c,l,d,m){Promise.resolve(m).then(function(g){c({value:g,done:d})},l)}}function lE(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function uE(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function hE(r){return r&&r.__esModule?r:{default:r}}function dE(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function pE(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const fE=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return sl},__asyncDelegator:aE,__asyncGenerator:oE,__asyncValues:cE,__await:Xi,__awaiter:eE,__classPrivateFieldGet:dE,__classPrivateFieldSet:pE,__createBinding:rE,__decorate:J2,__exportStar:nE,__extends:Y2,__generator:tE,__importDefault:hE,__importStar:uE,__makeTemplateObject:lE,__metadata:X2,__param:Q2,__read:Wf,__rest:Z2,__spread:iE,__spreadArrays:sE,__values:ol},Symbol.toStringTag,{value:"Module"})),No=os(fE);var gc={},ki={},Ud;function gE(){if(Ud)return ki;Ud=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.delay=void 0;function r(e){return new Promise(t=>{setTimeout(()=>{t(!0)},e)})}return ki.delay=r,ki}var rn={},mc={},nn={},qd;function mE(){return qd||(qd=1,Object.defineProperty(nn,"__esModule",{value:!0}),nn.ONE_THOUSAND=nn.ONE_HUNDRED=void 0,nn.ONE_HUNDRED=100,nn.ONE_THOUSAND=1e3),nn}var wc={},Wd;function wE(){return Wd||(Wd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.ONE_YEAR=r.FOUR_WEEKS=r.THREE_WEEKS=r.TWO_WEEKS=r.ONE_WEEK=r.THIRTY_DAYS=r.SEVEN_DAYS=r.FIVE_DAYS=r.THREE_DAYS=r.ONE_DAY=r.TWENTY_FOUR_HOURS=r.TWELVE_HOURS=r.SIX_HOURS=r.THREE_HOURS=r.ONE_HOUR=r.SIXTY_MINUTES=r.THIRTY_MINUTES=r.TEN_MINUTES=r.FIVE_MINUTES=r.ONE_MINUTE=r.SIXTY_SECONDS=r.THIRTY_SECONDS=r.TEN_SECONDS=r.FIVE_SECONDS=r.ONE_SECOND=void 0,r.ONE_SECOND=1,r.FIVE_SECONDS=5,r.TEN_SECONDS=10,r.THIRTY_SECONDS=30,r.SIXTY_SECONDS=60,r.ONE_MINUTE=r.SIXTY_SECONDS,r.FIVE_MINUTES=r.ONE_MINUTE*5,r.TEN_MINUTES=r.ONE_MINUTE*10,r.THIRTY_MINUTES=r.ONE_MINUTE*30,r.SIXTY_MINUTES=r.ONE_MINUTE*60,r.ONE_HOUR=r.SIXTY_MINUTES,r.THREE_HOURS=r.ONE_HOUR*3,r.SIX_HOURS=r.ONE_HOUR*6,r.TWELVE_HOURS=r.ONE_HOUR*12,r.TWENTY_FOUR_HOURS=r.ONE_HOUR*24,r.ONE_DAY=r.TWENTY_FOUR_HOURS,r.THREE_DAYS=r.ONE_DAY*3,r.FIVE_DAYS=r.ONE_DAY*5,r.SEVEN_DAYS=r.ONE_DAY*7,r.THIRTY_DAYS=r.ONE_DAY*30,r.ONE_WEEK=r.SEVEN_DAYS,r.TWO_WEEKS=r.ONE_WEEK*2,r.THREE_WEEKS=r.ONE_WEEK*3,r.FOUR_WEEKS=r.ONE_WEEK*4,r.ONE_YEAR=r.ONE_DAY*365}(wc)),wc}var Hd;function Hf(){return Hd||(Hd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=No;e.__exportStar(mE(),r),e.__exportStar(wE(),r)}(mc)),mc}var zd;function vE(){if(zd)return rn;zd=1,Object.defineProperty(rn,"__esModule",{value:!0}),rn.fromMiliseconds=rn.toMiliseconds=void 0;const r=Hf();function e(i){return i*r.ONE_THOUSAND}rn.toMiliseconds=e;function t(i){return Math.floor(i/r.ONE_THOUSAND)}return rn.fromMiliseconds=t,rn}var Fd;function yE(){return Fd||(Fd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=No;e.__exportStar(gE(),r),e.__exportStar(vE(),r)}(gc)),gc}var qn={},Vd;function _E(){if(Vd)return qn;Vd=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(t){if(this.timestamps.has(t))throw new Error(`Watch already started for label: ${t}`);this.timestamps.set(t,{started:Date.now()})}stop(t){const i=this.get(t);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${t}`);const o=Date.now()-i.started;this.timestamps.set(t,{started:i.started,elapsed:o})}get(t){const i=this.timestamps.get(t);if(typeof i>"u")throw new Error(`No timestamp found for label: ${t}`);return i}elapsed(t){const i=this.get(t);return i.elapsed||Date.now()-i.started}}return qn.Watch=r,qn.default=r,qn}var vc={},Di={},Bd;function bE(){if(Bd)return Di;Bd=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.IWatch=void 0;class r{}return Di.IWatch=r,Di}var Kd;function EE(){return Kd||(Kd=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),No.__exportStar(bE(),r)}(vc)),vc}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=No;e.__exportStar(yE(),r),e.__exportStar(_E(),r),e.__exportStar(EE(),r),e.__exportStar(Hf(),r)})(G);var be={};Object.defineProperty(be,"__esModule",{value:!0});var zf=be.getLocalStorage=Jf=be.getLocalStorageOrThrow=Zf=be.getCrypto=Yf=be.getCryptoOrThrow=Pl=be.getLocation=Gf=be.getLocationOrThrow=ko=be.getNavigator=Kf=be.getNavigatorOrThrow=Ao=be.getDocument=Bf=be.getDocumentOrThrow=Vf=be.getFromWindowOrThrow=Ff=be.getFromWindow=void 0;function mn(r){let e;return typeof window<"u"&&typeof window[r]<"u"&&(e=window[r]),e}var Ff=be.getFromWindow=mn;function ii(r){const e=mn(r);if(!e)throw new Error(`${r} is not defined in Window`);return e}var Vf=be.getFromWindowOrThrow=ii;function IE(){return ii("document")}var Bf=be.getDocumentOrThrow=IE;function SE(){return mn("document")}var Ao=be.getDocument=SE;function xE(){return ii("navigator")}var Kf=be.getNavigatorOrThrow=xE;function OE(){return mn("navigator")}var ko=be.getNavigator=OE;function CE(){return ii("location")}var Gf=be.getLocationOrThrow=CE;function RE(){return mn("location")}var Pl=be.getLocation=RE;function $E(){return ii("crypto")}var Yf=be.getCryptoOrThrow=$E;function PE(){return mn("crypto")}var Zf=be.getCrypto=PE;function TE(){return ii("localStorage")}var Jf=be.getLocalStorageOrThrow=TE;function NE(){return mn("localStorage")}zf=be.getLocalStorage=NE;var Tl={};Object.defineProperty(Tl,"__esModule",{value:!0});var Nl=Tl.getWindowMetadata=void 0;const Gd=be;function AE(){let r,e;try{r=Gd.getDocumentOrThrow(),e=Gd.getLocationOrThrow()}catch{return null}function t(){const I=r.getElementsByTagName("link"),S=[];for(let k=0;k<I.length;k++){const A=I[k],M=A.getAttribute("rel");if(M&&M.toLowerCase().indexOf("icon")>-1){const q=A.getAttribute("href");if(q)if(q.toLowerCase().indexOf("https:")===-1&&q.toLowerCase().indexOf("http:")===-1&&q.indexOf("//")!==0){let L=e.protocol+"//"+e.host;if(q.indexOf("/")===0)L+=q;else{const E=e.pathname.split("/");E.pop();const O=E.join("/");L+=O+"/"+q}S.push(L)}else if(q.indexOf("//")===0){const L=e.protocol+q;S.push(L)}else S.push(q)}}return S}function i(...I){const S=r.getElementsByTagName("meta");for(let k=0;k<S.length;k++){const A=S[k],M=["itemprop","property","name"].map(q=>A.getAttribute(q)).filter(q=>q?I.includes(q):!1);if(M.length&&M){const q=A.getAttribute("content");if(q)return q}}return""}function o(){let I=i("name","og:site_name","og:title","twitter:title");return I||(I=r.title),I}function c(){return i("description","og:description","twitter:description","keywords")}const l=o(),d=c(),m=e.origin,g=t();return{description:d,url:m,icons:g,name:l}}Nl=Tl.getWindowMetadata=AE;var es={};(function(r){const e=D2,t=N2,i=k2,o=M2,c=E=>E==null,l=Symbol("encodeFragmentIdentifier");function d(E){switch(E.arrayFormat){case"index":return O=>(C,R)=>{const D=C.length;return R===void 0||E.skipNull&&R===null||E.skipEmptyString&&R===""?C:R===null?[...C,[b(O,E),"[",D,"]"].join("")]:[...C,[b(O,E),"[",b(D,E),"]=",b(R,E)].join("")]};case"bracket":return O=>(C,R)=>R===void 0||E.skipNull&&R===null||E.skipEmptyString&&R===""?C:R===null?[...C,[b(O,E),"[]"].join("")]:[...C,[b(O,E),"[]=",b(R,E)].join("")];case"colon-list-separator":return O=>(C,R)=>R===void 0||E.skipNull&&R===null||E.skipEmptyString&&R===""?C:R===null?[...C,[b(O,E),":list="].join("")]:[...C,[b(O,E),":list=",b(R,E)].join("")];case"comma":case"separator":case"bracket-separator":{const O=E.arrayFormat==="bracket-separator"?"[]=":"=";return C=>(R,D)=>D===void 0||E.skipNull&&D===null||E.skipEmptyString&&D===""?R:(D=D===null?"":D,R.length===0?[[b(C,E),O,b(D,E)].join("")]:[[R,b(D,E)].join(E.arrayFormatSeparator)])}default:return O=>(C,R)=>R===void 0||E.skipNull&&R===null||E.skipEmptyString&&R===""?C:R===null?[...C,b(O,E)]:[...C,[b(O,E),"=",b(R,E)].join("")]}}function m(E){let O;switch(E.arrayFormat){case"index":return(C,R,D)=>{if(O=/\[(\d*)\]$/.exec(C),C=C.replace(/\[\d*\]$/,""),!O){D[C]=R;return}D[C]===void 0&&(D[C]={}),D[C][O[1]]=R};case"bracket":return(C,R,D)=>{if(O=/(\[\])$/.exec(C),C=C.replace(/\[\]$/,""),!O){D[C]=R;return}if(D[C]===void 0){D[C]=[R];return}D[C]=[].concat(D[C],R)};case"colon-list-separator":return(C,R,D)=>{if(O=/(:list)$/.exec(C),C=C.replace(/:list$/,""),!O){D[C]=R;return}if(D[C]===void 0){D[C]=[R];return}D[C]=[].concat(D[C],R)};case"comma":case"separator":return(C,R,D)=>{const V=typeof R=="string"&&R.includes(E.arrayFormatSeparator),F=typeof R=="string"&&!V&&I(R,E).includes(E.arrayFormatSeparator);R=F?I(R,E):R;const B=V||F?R.split(E.arrayFormatSeparator).map(X=>I(X,E)):R===null?R:I(R,E);D[C]=B};case"bracket-separator":return(C,R,D)=>{const V=/(\[\])$/.test(C);if(C=C.replace(/\[\]$/,""),!V){D[C]=R&&I(R,E);return}const F=R===null?[]:R.split(E.arrayFormatSeparator).map(B=>I(B,E));if(D[C]===void 0){D[C]=F;return}D[C]=[].concat(D[C],F)};default:return(C,R,D)=>{if(D[C]===void 0){D[C]=R;return}D[C]=[].concat(D[C],R)}}}function g(E){if(typeof E!="string"||E.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function b(E,O){return O.encode?O.strict?e(E):encodeURIComponent(E):E}function I(E,O){return O.decode?t(E):E}function S(E){return Array.isArray(E)?E.sort():typeof E=="object"?S(Object.keys(E)).sort((O,C)=>Number(O)-Number(C)).map(O=>E[O]):E}function k(E){const O=E.indexOf("#");return O!==-1&&(E=E.slice(0,O)),E}function A(E){let O="";const C=E.indexOf("#");return C!==-1&&(O=E.slice(C)),O}function M(E){E=k(E);const O=E.indexOf("?");return O===-1?"":E.slice(O+1)}function q(E,O){return O.parseNumbers&&!Number.isNaN(Number(E))&&typeof E=="string"&&E.trim()!==""?E=Number(E):O.parseBooleans&&E!==null&&(E.toLowerCase()==="true"||E.toLowerCase()==="false")&&(E=E.toLowerCase()==="true"),E}function L(E,O){O=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},O),g(O.arrayFormatSeparator);const C=m(O),R=Object.create(null);if(typeof E!="string"||(E=E.trim().replace(/^[?#&]/,""),!E))return R;for(const D of E.split("&")){if(D==="")continue;let[V,F]=i(O.decode?D.replace(/\+/g," "):D,"=");F=F===void 0?null:["comma","separator","bracket-separator"].includes(O.arrayFormat)?F:I(F,O),C(I(V,O),F,R)}for(const D of Object.keys(R)){const V=R[D];if(typeof V=="object"&&V!==null)for(const F of Object.keys(V))V[F]=q(V[F],O);else R[D]=q(V,O)}return O.sort===!1?R:(O.sort===!0?Object.keys(R).sort():Object.keys(R).sort(O.sort)).reduce((D,V)=>{const F=R[V];return F&&typeof F=="object"&&!Array.isArray(F)?D[V]=S(F):D[V]=F,D},Object.create(null))}r.extract=M,r.parse=L,r.stringify=(E,O)=>{if(!E)return"";O=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},O),g(O.arrayFormatSeparator);const C=F=>O.skipNull&&c(E[F])||O.skipEmptyString&&E[F]==="",R=d(O),D={};for(const F of Object.keys(E))C(F)||(D[F]=E[F]);const V=Object.keys(D);return O.sort!==!1&&V.sort(O.sort),V.map(F=>{const B=E[F];return B===void 0?"":B===null?b(F,O):Array.isArray(B)?B.length===0&&O.arrayFormat==="bracket-separator"?b(F,O)+"[]":B.reduce(R(F),[]).join("&"):b(F,O)+"="+b(B,O)}).filter(F=>F.length>0).join("&")},r.parseUrl=(E,O)=>{O=Object.assign({decode:!0},O);const[C,R]=i(E,"#");return Object.assign({url:C.split("?")[0]||"",query:L(M(E),O)},O&&O.parseFragmentIdentifier&&R?{fragmentIdentifier:I(R,O)}:{})},r.stringifyUrl=(E,O)=>{O=Object.assign({encode:!0,strict:!0,[l]:!0},O);const C=k(E.url).split("?")[0]||"",R=r.extract(E.url),D=r.parse(R,{sort:!1}),V=Object.assign(D,E.query);let F=r.stringify(V,O);F&&(F=`?${F}`);let B=A(E.url);return E.fragmentIdentifier&&(B=`#${O[l]?b(E.fragmentIdentifier,O):E.fragmentIdentifier}`),`${C}${F}${B}`},r.pick=(E,O,C)=>{C=Object.assign({parseFragmentIdentifier:!0,[l]:!1},C);const{url:R,query:D,fragmentIdentifier:V}=r.parseUrl(E,C);return r.stringifyUrl({url:R,query:o(D,O),fragmentIdentifier:V},C)},r.exclude=(E,O,C)=>{const R=Array.isArray(O)?D=>!O.includes(D):(D,V)=>!O(D,V);return r.pick(E,R,C)}})(es);const kE={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}},DE=":";function ME(r){const[e,t]=r.split(DE);return{namespace:e,reference:t}}function LE(r,e=[]){const t=[];return Object.keys(r).forEach(i=>{if(e.length&&!e.includes(i))return;const o=r[i];t.push(...o.accounts)}),t}function Qf(r,e){return r.includes(":")?[r]:e.chains||[]}const Xf="base10",Qe="base16",al="base64pad",Al="utf8",eg=0,wn=1,jE=0,Yd=1,cl=12,kl=32;function UE(){const r=kf.generateKeyPair();return{privateKey:Xe(r.secretKey,Qe),publicKey:Xe(r.publicKey,Qe)}}function ll(){const r=$l.randomBytes(kl);return Xe(r,Qe)}function qE(r,e){const t=kf.sharedKey(lt(r,Qe),lt(e,Qe),!0),i=new P2(Rl.SHA256,t).expand(kl);return Xe(i,Qe)}function WE(r){const e=Rl.hash(lt(r,Qe));return Xe(e,Qe)}function Qn(r){const e=Rl.hash(lt(r,Al));return Xe(e,Qe)}function HE(r){return lt(`${r}`,Xf)}function as(r){return Number(Xe(r,Xf))}function zE(r){const e=HE(typeof r.type<"u"?r.type:eg);if(as(e)===wn&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof r.senderPublicKey<"u"?lt(r.senderPublicKey,Qe):void 0,i=typeof r.iv<"u"?lt(r.iv,Qe):$l.randomBytes(cl),o=new Df.ChaCha20Poly1305(lt(r.symKey,Qe)).seal(i,lt(r.message,Al));return VE({type:e,sealed:o,iv:i,senderPublicKey:t})}function FE(r){const e=new Df.ChaCha20Poly1305(lt(r.symKey,Qe)),{sealed:t,iv:i}=Io(r.encoded),o=e.open(i,t);if(o===null)throw new Error("Failed to decrypt");return Xe(o,Al)}function VE(r){if(as(r.type)===wn){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return Xe(nl([r.type,r.senderPublicKey,r.iv,r.sealed]),al)}return Xe(nl([r.type,r.iv,r.sealed]),al)}function Io(r){const e=lt(r,al),t=e.slice(jE,Yd),i=Yd;if(as(t)===wn){const d=i+kl,m=d+cl,g=e.slice(i,d),b=e.slice(d,m),I=e.slice(m);return{type:t,sealed:I,iv:b,senderPublicKey:g}}const o=i+cl,c=e.slice(i,o),l=e.slice(o);return{type:t,sealed:l,iv:c}}function BE(r,e){const t=Io(r);return tg({type:as(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?Xe(t.senderPublicKey,Qe):void 0,receiverPublicKey:e?.receiverPublicKey})}function tg(r){const e=r?.type||eg;if(e===wn){if(typeof r?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof r?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:r?.senderPublicKey,receiverPublicKey:r?.receiverPublicKey}}function Zd(r){return r.type===wn&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}var KE=Object.defineProperty,Jd=Object.getOwnPropertySymbols,GE=Object.prototype.hasOwnProperty,YE=Object.prototype.propertyIsEnumerable,Qd=(r,e,t)=>e in r?KE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Xd=(r,e)=>{for(var t in e||(e={}))GE.call(e,t)&&Qd(r,t,e[t]);if(Jd)for(var t of Jd(e))YE.call(e,t)&&Qd(r,t,e[t]);return r};const ZE="ReactNative",bt={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},JE="js";function Dl(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function si(){return!Ao()&&!!ko()&&navigator.product===ZE}function oi(){return!Dl()&&!!ko()&&!!Ao()}function cs(){return si()?bt.reactNative:Dl()?bt.node:oi()?bt.browser:bt.unknown}function QE(){var r;try{return si()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function XE(r,e){let t=es.parse(r);return t=Xd(Xd({},t),e),r=es.stringify(t),r}function e5(){return Nl()||{name:"",description:"",url:"",icons:[""]}}function t5(){if(cs()===bt.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:t,Version:i}=global.Platform;return[t,i].join("-")}const r=jf();if(r===null)return"unknown";const e=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[e,r.name,r.version].join("-"):[e,r.version].join("-")}function r5(){var r;const e=cs();return e===bt.browser?[e,((r=Pl())==null?void 0:r.host)||"unknown"].join(":"):e}function n5(r,e,t){const i=t5(),o=r5();return[[r,e].join("-"),[JE,t].join("-"),i,o].join("/")}function i5({protocol:r,version:e,relayUrl:t,sdkVersion:i,auth:o,projectId:c,useOnCloseEvent:l,bundleId:d}){const m=t.split("?"),g=n5(r,e,i),b={auth:o,ua:g,projectId:c,useOnCloseEvent:l||void 0,origin:d||void 0},I=XE(m[1]||"",b);return m[0]+"?"+I}function pn(r,e){return r.filter(t=>e.includes(t)).length===r.length}function rg(r){return Object.fromEntries(r.entries())}function ng(r){return new Map(Object.entries(r))}function Kn(r=G.FIVE_MINUTES,e){const t=G.toMiliseconds(r||G.FIVE_MINUTES);let i,o,c;return{resolve:l=>{c&&i&&(clearTimeout(c),i(l))},reject:l=>{c&&o&&(clearTimeout(c),o(l))},done:()=>new Promise((l,d)=>{c=setTimeout(()=>{d(new Error(e))},t),i=l,o=d})}}function ts(r,e,t){return new Promise(async(i,o)=>{const c=setTimeout(()=>o(new Error(t)),e);try{const l=await r;i(l)}catch(l){o(l)}clearTimeout(c)})}function ig(r,e){if(typeof e=="string"&&e.startsWith(`${r}:`))return e;if(r.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(r.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${r}`)}function s5(r){return ig("topic",r)}function o5(r){return ig("id",r)}function sg(r){const[e,t]=r.split(":"),i={id:void 0,topic:void 0};if(e==="topic"&&typeof t=="string")i.topic=t;else if(e==="id"&&Number.isInteger(Number(t)))i.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${t}`);return i}function Wt(r,e){return G.fromMiliseconds(Date.now()+G.toMiliseconds(r))}function Nr(r){return Date.now()>=G.toMiliseconds(r)}function Ae(r,e){return`${r}${e?`:${e}`:""}`}function Xn(r=[],e=[]){return[...new Set([...r,...e])]}async function a5({id:r,topic:e,wcDeepLink:t}){try{if(!t)return;let o=(typeof t=="string"?JSON.parse(t):t)?.href;if(typeof o!="string")return;o.endsWith("/")&&(o=o.slice(0,-1));const c=`${o}/wc?requestId=${r}&sessionTopic=${e}`,l=cs();l===bt.browser?c.startsWith("https://")?window.open(c,"_blank","noreferrer noopener"):window.open(c,"_self","noreferrer noopener"):l===bt.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(c)}catch(i){console.error(i)}}async function c5(r,e){try{return await r.getItem(e)||(oi()?localStorage.getItem(e):void 0)}catch(t){console.error(t)}}const l5="irn";function ul(r){return r?.relay||{protocol:l5}}function yo(r){const e=kE[r];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${r}`);return e}var u5=Object.defineProperty,ep=Object.getOwnPropertySymbols,h5=Object.prototype.hasOwnProperty,d5=Object.prototype.propertyIsEnumerable,tp=(r,e,t)=>e in r?u5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,p5=(r,e)=>{for(var t in e||(e={}))h5.call(e,t)&&tp(r,t,e[t]);if(ep)for(var t of ep(e))d5.call(e,t)&&tp(r,t,e[t]);return r};function f5(r,e="-"){const t={},i="relay"+e;return Object.keys(r).forEach(o=>{if(o.startsWith(i)){const c=o.replace(i,""),l=r[o];t[c]=l}}),t}function rp(r){r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),o=r.substring(e+1,t).split("@"),c=typeof t<"u"?r.substring(t):"",l=es.parse(c);return{protocol:i,topic:g5(o[0]),version:parseInt(o[1],10),symKey:l.symKey,relay:f5(l)}}function g5(r){return r.startsWith("//")?r.substring(2):r}function m5(r,e="-"){const t="relay",i={};return Object.keys(r).forEach(o=>{const c=t+e+o;r[o]&&(i[c]=r[o])}),i}function w5(r){return`${r.protocol}:${r.topic}@${r.version}?`+es.stringify(p5({symKey:r.symKey},m5(r.relay)))}var v5=Object.defineProperty,y5=Object.defineProperties,_5=Object.getOwnPropertyDescriptors,np=Object.getOwnPropertySymbols,b5=Object.prototype.hasOwnProperty,E5=Object.prototype.propertyIsEnumerable,ip=(r,e,t)=>e in r?v5(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,I5=(r,e)=>{for(var t in e||(e={}))b5.call(e,t)&&ip(r,t,e[t]);if(np)for(var t of np(e))E5.call(e,t)&&ip(r,t,e[t]);return r},S5=(r,e)=>y5(r,_5(e));function ai(r){const e=[];return r.forEach(t=>{const[i,o]=t.split(":");e.push(`${i}:${o}`)}),e}function x5(r){const e=[];return Object.values(r).forEach(t=>{e.push(...ai(t.accounts))}),e}function O5(r,e){const t=[];return Object.values(r).forEach(i=>{ai(i.accounts).includes(e)&&t.push(...i.methods)}),t}function C5(r,e){const t=[];return Object.values(r).forEach(i=>{ai(i.accounts).includes(e)&&t.push(...i.events)}),t}function R5(r,e){const t=_o(r,e);if(t)throw new Error(t.message);const i={};for(const[o,c]of Object.entries(r))i[o]={methods:c.methods,events:c.events,chains:c.accounts.map(l=>`${l.split(":")[0]}:${l.split(":")[1]}`)};return i}function Do(r){return r.includes(":")}function Yn(r){return Do(r)?r.split(":")[0]:r}function y9(r){var e,t,i;const o={};if(!fn(r))return o;for(const[c,l]of Object.entries(r)){const d=Do(c)?[c]:l.chains,m=l.methods||[],g=l.events||[],b=Yn(c);o[b]=S5(I5({},o[b]),{chains:Xn(d,(e=o[b])==null?void 0:e.chains),methods:Xn(m,(t=o[b])==null?void 0:t.methods),events:Xn(g,(i=o[b])==null?void 0:i.events)})}return o}const $5={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},P5={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function U(r,e){const{message:t,code:i}=P5[r];return{message:e?`${t} ${e}`:t,code:i}}function $e(r,e){const{message:t,code:i}=$5[r];return{message:e?`${t} ${e}`:t,code:i}}function Jt(r,e){return!!Array.isArray(r)}function fn(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function ct(r){return typeof r>"u"}function Ue(r,e){return e&&ct(r)?!0:typeof r=="string"&&!!r.trim().length}function Ml(r,e){return typeof r=="number"&&!isNaN(r)}function T5(r,e){const{requiredNamespaces:t}=e,i=Object.keys(r.namespaces),o=Object.keys(t);let c=!0;return pn(o,i)?(i.forEach(l=>{const{accounts:d,methods:m,events:g}=r.namespaces[l],b=ai(d),I=t[l];(!pn(Qf(l,I),b)||!pn(I.methods,m)||!pn(I.events,g))&&(c=!1)}),c):!1}function So(r){return Ue(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function N5(r){if(Ue(r,!1)&&r.includes(":")){const e=r.split(":");if(e.length===3){const t=e[0]+":"+e[1];return!!e[2]&&So(t)}}return!1}function A5(r){if(Ue(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function k5(r){var e;return(e=r?.proposer)==null?void 0:e.publicKey}function D5(r){return r?.topic}function M5(r,e){let t=null;return Ue(r?.publicKey,!1)||(t=U("MISSING_OR_INVALID",`${e} controller public key should be a string`)),t}function sp(r){let e=!0;return Jt(r)?r.length&&(e=r.every(t=>Ue(t,!1))):e=!1,e}function L5(r,e,t){let i=null;return Jt(e)&&e.length?e.forEach(o=>{i||So(o)||(i=$e("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):So(r)||(i=$e("UNSUPPORTED_CHAINS",`${t}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function j5(r,e,t){let i=null;return Object.entries(r).forEach(([o,c])=>{if(i)return;const l=L5(o,Qf(o,c),`${e} ${t}`);l&&(i=l)}),i}function U5(r,e){let t=null;return Jt(r)?r.forEach(i=>{t||N5(i)||(t=$e("UNSUPPORTED_ACCOUNTS",`${e}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):t=$e("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function q5(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const o=U5(i?.accounts,`${e} namespace`);o&&(t=o)}),t}function W5(r,e){let t=null;return sp(r?.methods)?sp(r?.events)||(t=$e("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):t=$e("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),t}function og(r,e){let t=null;return Object.values(r).forEach(i=>{if(t)return;const o=W5(i,`${e}, namespace`);o&&(t=o)}),t}function H5(r,e,t){let i=null;if(r&&fn(r)){const o=og(r,e);o&&(i=o);const c=j5(r,e,t);c&&(i=c)}else i=U("MISSING_OR_INVALID",`${e}, ${t} should be an object with data`);return i}function _o(r,e){let t=null;if(r&&fn(r)){const i=og(r,e);i&&(t=i);const o=q5(r,e);o&&(t=o)}else t=U("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return t}function ag(r){return Ue(r.protocol,!0)}function z5(r,e){let t=!1;return r?r&&Jt(r)&&r.length&&r.forEach(i=>{t=ag(i)}):t=!0,t}function F5(r){return typeof r=="number"}function ot(r){return typeof r<"u"&&typeof r!==null}function V5(r){return!(!r||typeof r!="object"||!r.code||!Ml(r.code)||!r.message||!Ue(r.message,!1))}function B5(r){return!(ct(r)||!Ue(r.method,!1))}function K5(r){return!(ct(r)||ct(r.result)&&ct(r.error)||!Ml(r.id)||!Ue(r.jsonrpc,!1))}function G5(r){return!(ct(r)||!Ue(r.name,!1))}function op(r,e){return!(!So(e)||!x5(r).includes(e))}function Y5(r,e,t){return Ue(t,!1)?O5(r,e).includes(t):!1}function Z5(r,e,t){return Ue(t,!1)?C5(r,e).includes(t):!1}function ap(r,e,t){let i=null;const o=J5(r),c=Q5(e),l=Object.keys(o),d=Object.keys(c),m=cp(Object.keys(r)),g=cp(Object.keys(e)),b=m.filter(I=>!g.includes(I));return b.length&&(i=U("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${b.toString()}
      Received: ${Object.keys(e).toString()}`)),pn(l,d)||(i=U("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${l.toString()}
      Approved: ${d.toString()}`)),Object.keys(e).forEach(I=>{if(!I.includes(":")||i)return;const S=ai(e[I].accounts);S.includes(I)||(i=U("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${I}
        Required: ${I}
        Approved: ${S.toString()}`))}),l.forEach(I=>{i||(pn(o[I].methods,c[I].methods)?pn(o[I].events,c[I].events)||(i=U("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${I}`)):i=U("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${I}`))}),i}function J5(r){const e={};return Object.keys(r).forEach(t=>{var i;t.includes(":")?e[t]=r[t]:(i=r[t].chains)==null||i.forEach(o=>{e[o]={methods:r[t].methods,events:r[t].events}})}),e}function cp(r){return[...new Set(r.map(e=>e.includes(":")?e.split(":")[0]:e))]}function Q5(r){const e={};return Object.keys(r).forEach(t=>{t.includes(":")?e[t]=r[t]:ai(r[t].accounts)?.forEach(o=>{e[o]={accounts:r[t].accounts.filter(c=>c.includes(`${o}:`)),methods:r[t].methods,events:r[t].events}})}),e}function X5(r,e){return Ml(r)&&r<=e.max&&r>=e.min}function lp(){const r=cs();return new Promise(e=>{switch(r){case bt.browser:e(e3());break;case bt.reactNative:e(t3());break;case bt.node:e(r3());break;default:e(!0)}})}function e3(){return oi()&&navigator?.onLine}async function t3(){return si()&&typeof global<"u"&&global!=null&&global.NetInfo?(await(global==null?void 0:global.NetInfo.fetch()))?.isConnected:!0}function r3(){return!0}function n3(r){switch(cs()){case bt.browser:i3(r);break;case bt.reactNative:s3(r);break}}function i3(r){!si()&&oi()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function s3(r){si()&&typeof global<"u"&&global!=null&&global.NetInfo&&global?.NetInfo.addEventListener(e=>r(e?.isConnected))}const yc={};let io=class{static get(e){return yc[e]}static set(e,t){yc[e]=t}static delete(e){delete yc[e]}};const o3=r=>JSON.stringify(r,(e,t)=>typeof t=="bigint"?t.toString()+"n":t),a3=r=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,t=r.replace(e,'$1"$2n"$3');return JSON.parse(t,(i,o)=>typeof o=="string"&&o.match(/^\d+n$/)?BigInt(o.substring(0,o.length-1)):o)};function ci(r){if(typeof r!="string")throw new Error(`Cannot safe json parse value of type ${typeof r}`);try{return a3(r)}catch{return r}}function Ur(r){return typeof r=="string"?r:o3(r)||""}const c3="idb-keyval";var l3=(r={})=>{const e=r.base&&r.base.length>0?`${r.base}:`:"",t=o=>e+o;let i;return r.dbName&&r.storeName&&(i=L2(r.dbName,r.storeName)),{name:c3,options:r,async hasItem(o){return!(typeof await Md(t(o),i)>"u")},async getItem(o){return await Md(t(o),i)??null},setItem(o,c){return j2(t(o),c,i)},removeItem(o){return U2(t(o),i)},getKeys(){return q2(i)},clear(){return W2(i)}}};const u3="WALLET_CONNECT_V2_INDEXED_DB",h3="keyvaluestorage";let d3=class{constructor(){this.indexedDb=T2({driver:l3({dbName:u3,storeName:h3})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const t=await this.indexedDb.getItem(e);if(t!==null)return t}async setItem(e,t){await this.indexedDb.setItem(e,Ur(t))}async removeItem(e){await this.indexedDb.removeItem(e)}};var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},bo={exports:{}};(function(){let r;function e(){}r=e,r.prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},r.prototype.setItem=function(t,i){this[t]=String(i)},r.prototype.removeItem=function(t){delete this[t]},r.prototype.clear=function(){const t=this;Object.keys(t).forEach(function(i){t[i]=void 0,delete t[i]})},r.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},r.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof _c<"u"&&_c.localStorage?bo.exports=_c.localStorage:typeof window<"u"&&window.localStorage?bo.exports=window.localStorage:bo.exports=new e})();function p3(r){var e;return[r[0],ci((e=r[1])!=null?e:"")]}let f3=class{constructor(){this.localStorage=bo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(p3)}async getItem(e){const t=this.localStorage.getItem(e);if(t!==null)return ci(t)}async setItem(e,t){this.localStorage.setItem(e,Ur(t))}async removeItem(e){this.localStorage.removeItem(e)}};const g3="wc_storage_version",up=1,m3=async(r,e,t)=>{const i=g3,o=await e.getItem(i);if(o&&o>=up){t(e);return}const c=await r.getKeys();if(!c.length){t(e);return}const l=[];for(;c.length;){const d=c.shift();if(!d)continue;const m=d.toLowerCase();if(m.includes("wc@")||m.includes("walletconnect")||m.includes("wc_")||m.includes("wallet_connect")){const g=await r.getItem(d);await e.setItem(d,g),l.push(d)}}await e.setItem(i,up),t(e),w3(r,l)},w3=async(r,e)=>{e.length&&e.forEach(async t=>{await r.removeItem(t)})};let v3=class{constructor(){this.initialized=!1,this.setInitialized=t=>{this.storage=t,this.initialized=!0};const e=new f3;this.storage=e;try{const t=new d3;m3(e,t,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const t=setInterval(()=>{this.initialized&&(clearInterval(t),e())},20)})}};var li={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var hl=function(r,e){return hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},hl(r,e)};function y3(r,e){hl(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var dl=function(){return dl=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},dl.apply(this,arguments)};function _3(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function b3(r,e,t,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,t,i);else for(var d=r.length-1;d>=0;d--)(l=r[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function E3(r,e){return function(t,i){e(t,i,r)}}function I3(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function S3(r,e,t,i){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(b){try{g(i.next(b))}catch(I){l(I)}}function m(b){try{g(i.throw(b))}catch(I){l(I)}}function g(b){b.done?c(b.value):o(b.value).then(d,m)}g((i=i.apply(r,e||[])).next())})}function x3(r,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(g){return function(b){return m([g,b])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(c=g[0]&2?o.return:g[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,g[1])).done)return c;switch(o=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(b){g=[6,b],o=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function O3(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function C3(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function pl(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cg(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return c}function R3(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(cg(arguments[e]));return r}function $3(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)i[o]=c[l];return i}function rs(r){return this instanceof rs?(this.v=r,this):new rs(r)}function P3(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){i[S]&&(o[S]=function(k){return new Promise(function(A,M){c.push([S,k,A,M])>1||d(S,k)})})}function d(S,k){try{m(i[S](k))}catch(A){I(c[0][3],A)}}function m(S){S.value instanceof rs?Promise.resolve(S.value.v).then(g,b):I(c[0][2],S)}function g(S){d("next",S)}function b(S){d("throw",S)}function I(S,k){S(k),c.shift(),c.length&&d(c[0][0],c[0][1])}}function T3(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,c){e[o]=r[o]?function(l){return(t=!t)?{value:rs(r[o](l)),done:o==="return"}:c?c(l):l}:c}}function N3(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof pl=="function"?pl(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(c){t[c]=r[c]&&function(l){return new Promise(function(d,m){l=r[c](l),o(d,m,l.done,l.value)})}}function o(c,l,d,m){Promise.resolve(m).then(function(g){c({value:g,done:d})},l)}}function A3(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function k3(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function D3(r){return r&&r.__esModule?r:{default:r}}function M3(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function L3(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const j3=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return dl},__asyncDelegator:T3,__asyncGenerator:P3,__asyncValues:N3,__await:rs,__awaiter:S3,__classPrivateFieldGet:M3,__classPrivateFieldSet:L3,__createBinding:O3,__decorate:b3,__exportStar:C3,__extends:y3,__generator:x3,__importDefault:D3,__importStar:k3,__makeTemplateObject:A3,__metadata:I3,__param:E3,__read:cg,__rest:_3,__spread:R3,__spreadArrays:$3,__values:pl},Symbol.toStringTag,{value:"Module"})),Mo=os(j3);var Mi={},bc={},Li={};class vn{}const U3=Object.freeze(Object.defineProperty({__proto__:null,IEvents:vn},Symbol.toStringTag,{value:"Module"})),q3=os(U3);var hp;function W3(){if(hp)return Li;hp=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.IHeartBeat=void 0;const r=q3;class e extends r.IEvents{constructor(i){super()}}return Li.IHeartBeat=e,Li}var dp;function lg(){return dp||(dp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Mo.__exportStar(W3(),r)}(bc)),bc}var Ec={},sn={},pp;function H3(){if(pp)return sn;pp=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.HEARTBEAT_EVENTS=sn.HEARTBEAT_INTERVAL=void 0;const r=G;return sn.HEARTBEAT_INTERVAL=r.FIVE_SECONDS,sn.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},sn}var fp;function ug(){return fp||(fp=1,function(r){Object.defineProperty(r,"__esModule",{value:!0}),Mo.__exportStar(H3(),r)}(Ec)),Ec}var gp;function z3(){if(gp)return Mi;gp=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.HeartBeat=void 0;const r=Mo,e=ht,t=G,i=lg(),o=ug();class c extends i.IHeartBeat{constructor(d){super(d),this.events=new e.EventEmitter,this.interval=o.HEARTBEAT_INTERVAL,this.interval=d?.interval||o.HEARTBEAT_INTERVAL}static init(d){return r.__awaiter(this,void 0,void 0,function*(){const m=new c(d);return yield m.init(),m})}init(){return r.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(d,m){this.events.on(d,m)}once(d,m){this.events.once(d,m)}off(d,m){this.events.off(d,m)}removeListener(d,m){this.events.removeListener(d,m)}initialize(){return r.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),t.toMiliseconds(this.interval))})}pulse(){this.events.emit(o.HEARTBEAT_EVENTS.pulse)}}return Mi.HeartBeat=c,Mi}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=Mo;e.__exportStar(z3(),r),e.__exportStar(lg(),r),e.__exportStar(ug(),r)})(li);const F3={level:"info"},ls="custom_context";var V3=Object.defineProperty,B3=Object.defineProperties,K3=Object.getOwnPropertyDescriptors,mp=Object.getOwnPropertySymbols,G3=Object.prototype.hasOwnProperty,Y3=Object.prototype.propertyIsEnumerable,wp=(r,e,t)=>e in r?V3(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Z3=(r,e)=>{for(var t in e||(e={}))G3.call(e,t)&&wp(r,t,e[t]);if(mp)for(var t of mp(e))Y3.call(e,t)&&wp(r,t,e[t]);return r},J3=(r,e)=>B3(r,K3(e));function Lo(r){return J3(Z3({},r),{level:r?.level||F3.level})}function Q3(r,e=ls){return r[e]||""}function X3(r,e,t=ls){return r[t]=e,r}function dt(r,e=ls){let t="";return typeof r.bindings>"u"?t=Q3(r,e):t=r.bindings().context||"",t}function eI(r,e,t=ls){const i=dt(r,t);return i.trim()?`${i}/${e}`:e}function pt(r,e,t=ls){const i=eI(r,e,t),o=r.child({context:i});return X3(o,i,t)}let tI=class extends vn{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}},rI=class extends vn{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}},nI=class{constructor(e,t){this.logger=e,this.core=t}},iI=class extends vn{constructor(e,t){super(),this.relayer=e,this.logger=t}},sI=class extends vn{constructor(e){super()}},oI=class{constructor(e,t,i,o){this.core=e,this.logger=t,this.name=i}},aI=class extends vn{constructor(e,t){super(),this.relayer=e,this.logger=t}},cI=class extends vn{constructor(e,t){super(),this.core=e,this.logger=t}},lI=class{constructor(e,t){this.projectId=e,this.logger=t}},uI=class{constructor(e,t){this.projectId=e,this.logger=t}},hI=class{constructor(e){this.opts=e,this.protocol="wc",this.version=2}},dI=class{constructor(e){this.client=e}};const pI="EdDSA",fI="JWT",hg=".",dg="base64url",gI="utf8",mI="utf8",wI=":",vI="did",yI="key",vp="base58btc",_I="z",bI="K36",EI=32;function xo(r){return Xe(lt(Ur(r),gI),dg)}function pg(r){const e=lt(bI,vp),t=_I+Xe(nl([e,r]),vp);return[vI,yI,t].join(wI)}function II(r){return Xe(r,dg)}function SI(r){return lt([xo(r.header),xo(r.payload)].join(hg),mI)}function xI(r){return[xo(r.header),xo(r.payload),II(r.signature)].join(hg)}function yp(r=$l.randomBytes(EI)){return Mf.generateKeyPairFromSeed(r)}async function OI(r,e,t,i,o=G.fromMiliseconds(Date.now())){const c={alg:pI,typ:fI},l=pg(i.publicKey),d=o+t,m={iss:l,sub:r,aud:e,iat:o,exp:d},g=SI({header:c,payload:m}),b=Mf.sign(i.secretKey,g);return xI({header:c,payload:m,signature:b})}const CI="PARSE_ERROR",RI="INVALID_REQUEST",$I="METHOD_NOT_FOUND",PI="INVALID_PARAMS",fg="INTERNAL_ERROR",Ll="SERVER_ERROR",TI=[-32700,-32600,-32601,-32602,-32603],Qi={[CI]:{code:-32700,message:"Parse error"},[RI]:{code:-32600,message:"Invalid Request"},[$I]:{code:-32601,message:"Method not found"},[PI]:{code:-32602,message:"Invalid params"},[fg]:{code:-32603,message:"Internal error"},[Ll]:{code:-32e3,message:"Server error"}},gg=Ll;function NI(r){return TI.includes(r)}function _p(r){return Object.keys(Qi).includes(r)?Qi[r]:Qi[gg]}function AI(r){const e=Object.values(Qi).find(t=>t.code===r);return e||Qi[gg]}function mg(r,e,t){return r.message.includes("getaddrinfo ENOTFOUND")||r.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${t} RPC url at ${e}`):r}var yn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var fl=function(r,e){return fl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o])},fl(r,e)};function kI(r,e){fl(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var gl=function(){return gl=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++){t=arguments[i];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},gl.apply(this,arguments)};function DI(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(r);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(r,i[o])&&(t[i[o]]=r[i[o]]);return t}function MI(r,e,t,i){var o=arguments.length,c=o<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(r,e,t,i);else for(var d=r.length-1;d>=0;d--)(l=r[d])&&(c=(o<3?l(c):o>3?l(e,t,c):l(e,t))||c);return o>3&&c&&Object.defineProperty(e,t,c),c}function LI(r,e){return function(t,i){e(t,i,r)}}function jI(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function UI(r,e,t,i){function o(c){return c instanceof t?c:new t(function(l){l(c)})}return new(t||(t=Promise))(function(c,l){function d(b){try{g(i.next(b))}catch(I){l(I)}}function m(b){try{g(i.throw(b))}catch(I){l(I)}}function g(b){b.done?c(b.value):o(b.value).then(d,m)}g((i=i.apply(r,e||[])).next())})}function qI(r,e){var t={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,o,c,l;return l={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function d(g){return function(b){return m([g,b])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,o&&(c=g[0]&2?o.return:g[0]?o.throw||((c=o.return)&&c.call(o),0):o.next)&&!(c=c.call(o,g[1])).done)return c;switch(o=0,c&&(g=[g[0]&2,c.value]),g[0]){case 0:case 1:c=g;break;case 4:return t.label++,{value:g[1],done:!1};case 5:t.label++,o=g[1],g=[0];continue;case 7:g=t.ops.pop(),t.trys.pop();continue;default:if(c=t.trys,!(c=c.length>0&&c[c.length-1])&&(g[0]===6||g[0]===2)){t=0;continue}if(g[0]===3&&(!c||g[1]>c[0]&&g[1]<c[3])){t.label=g[1];break}if(g[0]===6&&t.label<c[1]){t.label=c[1],c=g;break}if(c&&t.label<c[2]){t.label=c[2],t.ops.push(g);break}c[2]&&t.ops.pop(),t.trys.pop();continue}g=e.call(r,t)}catch(b){g=[6,b],o=0}finally{i=c=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function WI(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function HI(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function ml(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wg(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),o,c=[],l;try{for(;(e===void 0||e-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(d){l={error:d}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(l)throw l.error}}return c}function zI(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(wg(arguments[e]));return r}function FI(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),o=0,e=0;e<t;e++)for(var c=arguments[e],l=0,d=c.length;l<d;l++,o++)i[o]=c[l];return i}function ns(r){return this instanceof ns?(this.v=r,this):new ns(r)}function VI(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),o,c=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(S){i[S]&&(o[S]=function(k){return new Promise(function(A,M){c.push([S,k,A,M])>1||d(S,k)})})}function d(S,k){try{m(i[S](k))}catch(A){I(c[0][3],A)}}function m(S){S.value instanceof ns?Promise.resolve(S.value.v).then(g,b):I(c[0][2],S)}function g(S){d("next",S)}function b(S){d("throw",S)}function I(S,k){S(k),c.shift(),c.length&&d(c[0][0],c[0][1])}}function BI(r){var e,t;return e={},i("next"),i("throw",function(o){throw o}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(o,c){e[o]=r[o]?function(l){return(t=!t)?{value:ns(r[o](l)),done:o==="return"}:c?c(l):l}:c}}function KI(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof ml=="function"?ml(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(c){t[c]=r[c]&&function(l){return new Promise(function(d,m){l=r[c](l),o(d,m,l.done,l.value)})}}function o(c,l,d,m){Promise.resolve(m).then(function(g){c({value:g,done:d})},l)}}function GI(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function YI(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function ZI(r){return r&&r.__esModule?r:{default:r}}function JI(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function QI(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}const XI=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return gl},__asyncDelegator:BI,__asyncGenerator:VI,__asyncValues:KI,__await:ns,__awaiter:UI,__classPrivateFieldGet:JI,__classPrivateFieldSet:QI,__createBinding:WI,__decorate:MI,__exportStar:HI,__extends:kI,__generator:qI,__importDefault:ZI,__importStar:YI,__makeTemplateObject:GI,__metadata:jI,__param:LI,__read:wg,__rest:DI,__spread:zI,__spreadArrays:FI,__values:ml},Symbol.toStringTag,{value:"Module"})),e4=os(XI);var lr={},bp;function t4(){if(bp)return lr;bp=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.isBrowserCryptoAvailable=lr.getSubtleCrypto=lr.getBrowerCrypto=void 0;function r(){return(Un===null||Un===void 0?void 0:Un.crypto)||(Un===null||Un===void 0?void 0:Un.msCrypto)||{}}lr.getBrowerCrypto=r;function e(){const i=r();return i.subtle||i.webkitSubtle}lr.getSubtleCrypto=e;function t(){return!!r()&&!!e()}return lr.isBrowserCryptoAvailable=t,lr}var ur={},Ep;function r4(){if(Ep)return ur;Ep=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.isBrowser=ur.isNode=ur.isReactNative=void 0;function r(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}ur.isReactNative=r;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}ur.isNode=e;function t(){return!r()&&!e()}return ur.isBrowser=t,ur}(function(r){Object.defineProperty(r,"__esModule",{value:!0});const e=e4;e.__exportStar(t4(),r),e.__exportStar(r4(),r)})(yn);function jo(r=3){const e=Date.now()*Math.pow(10,r),t=Math.floor(Math.random()*Math.pow(10,r));return e+t}function Uo(r=6){return BigInt(jo(r))}function Dr(r,e,t){return{id:t||jo(),jsonrpc:"2.0",method:r,params:e}}function qo(r,e){return{id:r,jsonrpc:"2.0",result:e}}function ti(r,e,t){return{id:r,jsonrpc:"2.0",error:n4(e,t)}}function n4(r,e){return typeof r>"u"?_p(fg):(typeof r=="string"&&(r=Object.assign(Object.assign({},_p(Ll)),{message:r})),typeof e<"u"&&(r.data=e),NI(r.code)&&(r=AI(r.code)),r)}class vg{}let i4=class extends vg{constructor(e){super()}};class s4 extends vg{constructor(){super()}}let jl=class extends s4{constructor(e){super()}};const o4="^https?:",a4="^wss?:";function c4(r){const e=r.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function yg(r,e){const t=c4(r);return typeof t>"u"?!1:new RegExp(e).test(t)}function Ip(r){return yg(r,o4)}function Sp(r){return yg(r,a4)}function l4(r){return new RegExp("wss?://localhost(:d{2,5})?").test(r)}function _g(r){return typeof r=="object"&&"id"in r&&"jsonrpc"in r&&r.jsonrpc==="2.0"}function Ul(r){return _g(r)&&"method"in r}function ui(r){return _g(r)&&(gr(r)||_t(r))}function gr(r){return"result"in r}function _t(r){return"error"in r}let u4=class extends jl{constructor(e){super(e),this.events=new ht.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Dr(e.method,e.params||[],e.id||Uo().toString()),t)}async requestStrict(e,t){return new Promise(async(i,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{_t(c)?o(c.error):i(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ui(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const h4=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),d4=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",xp=r=>r.split("?")[0],Op=10,p4=h4();let f4=class{constructor(e){if(this.url=e,this.events=new ht.EventEmitter,this.registering=!1,!Sp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(typeof this.socket>"u"){t(new Error("Connection already closed"));return}this.socket.onclose=i=>{this.onClose(i),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ur(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!Sp(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return o(new Error("WebSocket connection is missing or invalid"));i(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,i)=>{const o=new URLSearchParams(e).get("origin"),c=yn.isReactNative()?{headers:{origin:o}}:{rejectUnauthorized:!l4(e)},l=new p4(e,[],c);d4()?l.onerror=d=>{const m=d;i(this.emitError(m.error))}:l.on("error",d=>{i(this.emitError(d))}),l.onopen=()=>{this.onOpen(l),t(l)}})}onOpen(e){e.onmessage=t=>this.onPayload(t),e.onclose=t=>this.onClose(t),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?ci(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),c=ti(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return mg(e,xp(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Op&&this.events.setMaxListeners(Op)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${xp(this.url)}`));return this.events.emit("register_error",t),t}};var g4={};function m4(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),i=0;i<t.length;i++)t[i]=255;for(var o=0;o<r.length;o++){var c=r.charAt(o),l=c.charCodeAt(0);if(t[l]!==255)throw new TypeError(c+" is ambiguous");t[l]=o}var d=r.length,m=r.charAt(0),g=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function I(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var M=0,q=0,L=0,E=A.length;L!==E&&A[L]===0;)L++,M++;for(var O=(E-L)*b+1>>>0,C=new Uint8Array(O);L!==E;){for(var R=A[L],D=0,V=O-1;(R!==0||D<q)&&V!==-1;V--,D++)R+=256*C[V]>>>0,C[V]=R%d>>>0,R=R/d>>>0;if(R!==0)throw new Error("Non-zero carry");q=D,L++}for(var F=O-q;F!==O&&C[F]===0;)F++;for(var B=m.repeat(M);F<O;++F)B+=r.charAt(C[F]);return B}function S(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var M=0;if(A[M]!==" "){for(var q=0,L=0;A[M]===m;)q++,M++;for(var E=(A.length-M)*g+1>>>0,O=new Uint8Array(E);A[M];){var C=t[A.charCodeAt(M)];if(C===255)return;for(var R=0,D=E-1;(C!==0||R<L)&&D!==-1;D--,R++)C+=d*O[D]>>>0,O[D]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");L=R,M++}if(A[M]!==" "){for(var V=E-L;V!==E&&O[V]===0;)V++;for(var F=new Uint8Array(q+(E-V)),B=q;V!==E;)F[B++]=O[V++];return F}}}function k(A){var M=S(A);if(M)return M;throw new Error(`Non-${e} character`)}return{encode:I,decodeUnsafe:S,decode:k}}var w4=m4,v4=w4;const bg=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},y4=r=>new TextEncoder().encode(r),_4=r=>new TextDecoder().decode(r);class b4{constructor(e,t,i){this.name=e,this.prefix=t,this.baseEncode=i}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}let E4=class{constructor(e,t,i){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=i}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Eg(this,e)}};class I4{constructor(e){this.decoders=e}or(e){return Eg(this,e)}decode(e){const t=e[0],i=this.decoders[t];if(i)return i.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Eg=(r,e)=>new I4({...r.decoders||{[r.prefix]:r},...e.decoders||{[e.prefix]:e}});class S4{constructor(e,t,i,o){this.name=e,this.prefix=t,this.baseEncode=i,this.baseDecode=o,this.encoder=new b4(e,t,i),this.decoder=new E4(e,t,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Wo=({name:r,prefix:e,encode:t,decode:i})=>new S4(r,e,t,i),us=({prefix:r,name:e,alphabet:t})=>{const{encode:i,decode:o}=v4(t,e);return Wo({prefix:r,name:e,encode:i,decode:c=>bg(o(c))})},x4=(r,e,t,i)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let c=r.length;for(;r[c-1]==="=";)--c;const l=new Uint8Array(c*t/8|0);let d=0,m=0,g=0;for(let b=0;b<c;++b){const I=o[r[b]];if(I===void 0)throw new SyntaxError(`Non-${i} character`);m=m<<t|I,d+=t,d>=8&&(d-=8,l[g++]=255&m>>d)}if(d>=t||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return l},O4=(r,e,t)=>{const i=e[e.length-1]==="=",o=(1<<t)-1;let c="",l=0,d=0;for(let m=0;m<r.length;++m)for(d=d<<8|r[m],l+=8;l>t;)l-=t,c+=e[o&d>>l];if(l&&(c+=e[o&d<<t-l]),i)for(;c.length*t&7;)c+="=";return c},He=({name:r,prefix:e,bitsPerChar:t,alphabet:i})=>Wo({prefix:e,name:r,encode(o){return O4(o,i,t)},decode(o){return x4(o,i,t,r)}}),C4=Wo({prefix:"\0",name:"identity",encode:r=>_4(r),decode:r=>y4(r)});var R4=Object.freeze({__proto__:null,identity:C4});const $4=He({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var P4=Object.freeze({__proto__:null,base2:$4});const T4=He({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var N4=Object.freeze({__proto__:null,base8:T4});const A4=us({prefix:"9",name:"base10",alphabet:"0123456789"});var k4=Object.freeze({__proto__:null,base10:A4});const D4=He({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),M4=He({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var L4=Object.freeze({__proto__:null,base16:D4,base16upper:M4});const j4=He({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),U4=He({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),q4=He({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),W4=He({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),H4=He({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),z4=He({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),F4=He({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),V4=He({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),B4=He({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var K4=Object.freeze({__proto__:null,base32:j4,base32upper:U4,base32pad:q4,base32padupper:W4,base32hex:H4,base32hexupper:z4,base32hexpad:F4,base32hexpadupper:V4,base32z:B4});const G4=us({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Y4=us({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Z4=Object.freeze({__proto__:null,base36:G4,base36upper:Y4});const J4=us({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Q4=us({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var X4=Object.freeze({__proto__:null,base58btc:J4,base58flickr:Q4});const e6=He({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),t6=He({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),r6=He({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),n6=He({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var i6=Object.freeze({__proto__:null,base64:e6,base64pad:t6,base64url:r6,base64urlpad:n6});const Ig=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),s6=Ig.reduce((r,e,t)=>(r[t]=e,r),[]),o6=Ig.reduce((r,e,t)=>(r[e.codePointAt(0)]=t,r),[]);function a6(r){return r.reduce((e,t)=>(e+=s6[t],e),"")}function c6(r){const e=[];for(const t of r){const i=o6[t.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${t}`);e.push(i)}return new Uint8Array(e)}const l6=Wo({prefix:"🚀",name:"base256emoji",encode:a6,decode:c6});var u6=Object.freeze({__proto__:null,base256emoji:l6}),h6=Sg,Cp=128,d6=127,p6=~d6,f6=Math.pow(2,31);function Sg(r,e,t){e=e||[],t=t||0;for(var i=t;r>=f6;)e[t++]=r&255|Cp,r/=128;for(;r&p6;)e[t++]=r&255|Cp,r>>>=7;return e[t]=r|0,Sg.bytes=t-i+1,e}var g6=wl,m6=128,Rp=127;function wl(r,i){var t=0,i=i||0,o=0,c=i,l,d=r.length;do{if(c>=d)throw wl.bytes=0,new RangeError("Could not decode varint");l=r[c++],t+=o<28?(l&Rp)<<o:(l&Rp)*Math.pow(2,o),o+=7}while(l>=m6);return wl.bytes=c-i,t}var w6=Math.pow(2,7),v6=Math.pow(2,14),y6=Math.pow(2,21),_6=Math.pow(2,28),b6=Math.pow(2,35),E6=Math.pow(2,42),I6=Math.pow(2,49),S6=Math.pow(2,56),x6=Math.pow(2,63),O6=function(r){return r<w6?1:r<v6?2:r<y6?3:r<_6?4:r<b6?5:r<E6?6:r<I6?7:r<S6?8:r<x6?9:10},C6={encode:h6,decode:g6,encodingLength:O6},xg=C6;const $p=(r,e,t=0)=>(xg.encode(r,e,t),e),Pp=r=>xg.encodingLength(r),vl=(r,e)=>{const t=e.byteLength,i=Pp(r),o=i+Pp(t),c=new Uint8Array(o+t);return $p(r,c,0),$p(t,c,i),c.set(e,o),new R6(r,t,e,c)};class R6{constructor(e,t,i,o){this.code=e,this.size=t,this.digest=i,this.bytes=o}}const Og=({name:r,code:e,encode:t})=>new $6(r,e,t);class $6{constructor(e,t,i){this.name=e,this.code=t,this.encode=i}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?vl(this.code,t):t.then(i=>vl(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Cg=r=>async e=>new Uint8Array(await crypto.subtle.digest(r,e)),P6=Og({name:"sha2-256",code:18,encode:Cg("SHA-256")}),T6=Og({name:"sha2-512",code:19,encode:Cg("SHA-512")});var N6=Object.freeze({__proto__:null,sha256:P6,sha512:T6});const Rg=0,A6="identity",$g=bg,k6=r=>vl(Rg,$g(r)),D6={code:Rg,name:A6,encode:$g,digest:k6};var M6=Object.freeze({__proto__:null,identity:D6});new TextEncoder,new TextDecoder;const Tp={...R4,...P4,...N4,...k4,...L4,...K4,...Z4,...X4,...i6,...u6};({...N6,...M6});function Pg(r){return globalThis.Buffer!=null?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):r}function L6(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Pg(globalThis.Buffer.allocUnsafe(r)):new Uint8Array(r)}function Tg(r,e,t,i){return{name:r,prefix:e,encoder:{name:r,prefix:e,encode:t},decoder:{decode:i}}}const Np=Tg("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Ic=Tg("ascii","a",r=>{let e="a";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return e},r=>{r=r.substring(1);const e=L6(r.length);for(let t=0;t<r.length;t++)e[t]=r.charCodeAt(t);return e}),j6={utf8:Np,"utf-8":Np,hex:Tp.base16,latin1:Ic,ascii:Ic,binary:Ic,...Tp};function U6(r,e="utf8"){const t=j6[e];if(!t)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Pg(globalThis.Buffer.from(r,"utf-8")):t.decoder.decode(`${t.prefix}${r}`)}const Ng="wc",q6=2,ql="core",qr=`${Ng}@2:${ql}:`,W6={name:ql,logger:"error"},H6={database:":memory:"},z6="crypto",Ap="client_ed25519_seed",F6=G.ONE_DAY,V6="keychain",B6="0.3",K6="messages",G6="0.3",Y6=G.SIX_HOURS,Z6="publisher",Ag="irn",J6="error",kg="wss://relay.walletconnect.com",kp="wss://relay.walletconnect.org",Q6="relayer",Be={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},X6="_subscription",hr={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},e7=G.ONE_SECOND,t7="2.11.0",r7=1e4,n7="0.3",i7="WALLETCONNECT_CLIENT_ID",qt={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},s7="subscription",o7="0.3",a7=G.FIVE_SECONDS*1e3,c7="pairing",l7="0.3",ji={wc_pairingDelete:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:G.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:G.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:G.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:G.ONE_DAY,prompt:!1,tag:0},res:{ttl:G.ONE_DAY,prompt:!1,tag:0}}},Zi={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Kt={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},u7="history",h7="0.3",d7="expirer",At={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},p7="0.3",Sc="verify-api",Zn="https://verify.walletconnect.com",yl="https://verify.walletconnect.org",f7=[Zn,yl],g7="echo",m7="https://echo.walletconnect.com";let w7=class{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name=V6,this.version=B6,this.initialized=!1,this.storagePrefix=qr,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,o)=>{this.isInitialized(),this.keychain.set(i,o),await this.persist()},this.get=i=>{this.isInitialized();const o=this.keychain.get(i);if(typeof o>"u"){const{message:c}=U("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(c)}return o},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=e,this.logger=pt(t,this.name)}get context(){return dt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,rg(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ng(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}};class v7{constructor(e,t,i){this.core=e,this.logger=t,this.name=z6,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=o=>(this.isInitialized(),this.keychain.has(o)),this.getClientId=async()=>{this.isInitialized();const o=await this.getClientSeed(),c=yp(o);return pg(c.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const o=UE();return this.setPrivateKey(o.publicKey,o.privateKey)},this.signJWT=async o=>{this.isInitialized();const c=await this.getClientSeed(),l=yp(c),d=ll();return await OI(d,o,F6,l)},this.generateSharedKey=(o,c,l)=>{this.isInitialized();const d=this.getPrivateKey(o),m=qE(d,c);return this.setSymKey(m,l)},this.setSymKey=async(o,c)=>{this.isInitialized();const l=c||WE(o);return await this.keychain.set(l,o),l},this.deleteKeyPair=async o=>{this.isInitialized(),await this.keychain.del(o)},this.deleteSymKey=async o=>{this.isInitialized(),await this.keychain.del(o)},this.encode=async(o,c,l)=>{this.isInitialized();const d=tg(l),m=Ur(c);if(Zd(d)){const S=d.senderPublicKey,k=d.receiverPublicKey;o=await this.generateSharedKey(S,k)}const g=this.getSymKey(o),{type:b,senderPublicKey:I}=d;return zE({type:b,symKey:g,message:m,senderPublicKey:I})},this.decode=async(o,c,l)=>{this.isInitialized();const d=BE(c,l);if(Zd(d)){const m=d.receiverPublicKey,g=d.senderPublicKey;o=await this.generateSharedKey(m,g)}try{const m=this.getSymKey(o),g=FE({symKey:m,encoded:c});return ci(g)}catch(m){this.logger.error(`Failed to decode message from topic: '${o}', clientId: '${await this.getClientId()}'`),this.logger.error(m)}},this.getPayloadType=o=>{const c=Io(o);return as(c.type)},this.getPayloadSenderPublicKey=o=>{const c=Io(o);return c.senderPublicKey?Xe(c.senderPublicKey,Qe):void 0},this.core=e,this.logger=pt(t,this.name),this.keychain=i||new w7(this.core,this.logger)}get context(){return dt(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ap)}catch{e=ll(),await this.keychain.set(Ap,e)}return U6(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}}let y7=class extends nI{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name=K6,this.version=G6,this.initialized=!1,this.storagePrefix=qr,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,o)=>{this.isInitialized();const c=Qn(o);let l=this.messages.get(i);return typeof l>"u"&&(l={}),typeof l[c]<"u"||(l[c]=o,this.messages.set(i,l),await this.persist()),c},this.get=i=>{this.isInitialized();let o=this.messages.get(i);return typeof o>"u"&&(o={}),o},this.has=(i,o)=>{this.isInitialized();const c=this.get(i),l=Qn(o);return typeof c[l]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=pt(e,this.name),this.core=t}get context(){return dt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,rg(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?ng(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}};class _7 extends iI{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new ht.EventEmitter,this.name=Z6,this.queue=new Map,this.publishTimeout=G.toMiliseconds(G.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(i,o,c)=>{var l;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:c}});try{const d=c?.ttl||Y6,m=ul(c),g=c?.prompt||!1,b=c?.tag||0,I=c?.id||Uo().toString(),S={topic:i,message:o,opts:{ttl:d,relay:m,prompt:g,tag:b,id:I}},k=setTimeout(()=>this.queue.set(I,S),this.publishTimeout);try{await await ts(this.rpcPublish(i,o,d,m,g,b,I),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(I),this.relayer.events.emit(Be.publish,S)}catch(A){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(l=c?.internal)!=null&&l.throwOnFailedPublish)throw this.removeRequestFromQueue(I),A;return}finally{clearTimeout(k)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:o,opts:c}})}catch(d){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(d),d}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.relayer=e,this.logger=pt(t,this.name),this.registerEventListeners()}get context(){return dt(this.logger)}rpcPublish(e,t,i,o,c,l,d){var m,g,b,I;const S={method:yo(o.protocol).publish,params:{topic:e,message:t,ttl:i,prompt:c,tag:l},id:d};return ct((m=S.params)==null?void 0:m.prompt)&&((g=S.params)==null||delete g.prompt),ct((b=S.params)==null?void 0:b.tag)&&((I=S.params)==null||delete I.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:S}),this.relayer.request(S)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:t,message:i,opts:o}=e;await this.publish(t,i,o)})}registerEventListeners(){this.relayer.core.heartbeat.on(li.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Be.connection_stalled);return}this.checkQueue()}),this.relayer.on(Be.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class b7{constructor(){this.map=new Map,this.set=(e,t)=>{const i=this.get(e);this.exists(e,t)||this.map.set(e,[...i,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const i=this.get(e);if(!this.exists(e,t))return;const o=i.filter(c=>c!==t);if(!o.length){this.map.delete(e);return}this.map.set(e,o)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var E7=Object.defineProperty,I7=Object.defineProperties,S7=Object.getOwnPropertyDescriptors,Dp=Object.getOwnPropertySymbols,x7=Object.prototype.hasOwnProperty,O7=Object.prototype.propertyIsEnumerable,Mp=(r,e,t)=>e in r?E7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ui=(r,e)=>{for(var t in e||(e={}))x7.call(e,t)&&Mp(r,t,e[t]);if(Dp)for(var t of Dp(e))O7.call(e,t)&&Mp(r,t,e[t]);return r},xc=(r,e)=>I7(r,S7(e));let C7=class extends aI{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new b7,this.events=new ht.EventEmitter,this.name=s7,this.version=o7,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=qr,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}});try{const c=ul(o),l={topic:i,relay:c};this.pending.set(i,l);const d=await this.rpcSubscribe(i,c);return this.onSubscribe(d,l),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:o}}),d}catch(c){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(c),c}},this.unsubscribe=async(i,o)=>{await this.restartToComplete(),this.isInitialized(),typeof o?.id<"u"?await this.unsubscribeById(i,o.id,o):await this.unsubscribeByTopic(i,o)},this.isSubscribed=async i=>this.topics.includes(i)?!0:await new Promise((o,c)=>{const l=new G.Watch;l.start(this.pendingSubscriptionWatchLabel);const d=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),o(!0)),l.elapsed(this.pendingSubscriptionWatchLabel)>=a7&&(clearInterval(d),l.stop(this.pendingSubscriptionWatchLabel),c(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=pt(t,this.name),this.clientId=""}get context(){return dt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let i=!1;try{i=this.getSubscription(e).topic===t}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const i=this.topicMap.get(e);await Promise.all(i.map(async o=>await this.unsubscribeById(e,o,t)))}async unsubscribeById(e,t,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}});try{const o=ul(i);await this.rpcUnsubscribe(e,t,o);const c=$e("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,c),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:i}})}catch(o){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(o),o}}async rpcSubscribe(e,t){const i={method:yo(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{await await ts(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Be.connection_stalled)}return Qn(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t=e[0].relay,i={method:yo(t.protocol).batchSubscribe,params:{topics:e.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await ts(this.relayer.request(i),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Be.connection_stalled)}}rpcUnsubscribe(e,t,i){const o={method:yo(i.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o}),this.relayer.request(o)}onSubscribe(e,t){this.setSubscription(e,xc(Ui({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(t=>{this.setSubscription(t.id,Ui({},t)),this.pending.delete(t.topic)})}async onUnsubscribe(e,t,i){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,i),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Ui({},t)),this.topicMap.set(t.topic,e),this.events.emit(qt.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:i}=U("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const i=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(i.topic,e),this.events.emit(qt.deleted,xc(Ui({},i),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(qt.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(i)}}this.events.emit(qt.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:t}=U("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);Jt(t)&&this.onBatchSubscribe(t.map((i,o)=>xc(Ui({},e[o]),{id:i})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(li.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Be.connect,async()=>{await this.onConnect()}),this.relayer.on(Be.disconnect,()=>{this.onDisconnect()}),this.events.on(qt.created,async e=>{const t=qt.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(qt.deleted,async e=>{const t=qt.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}};var R7=Object.defineProperty,Lp=Object.getOwnPropertySymbols,$7=Object.prototype.hasOwnProperty,P7=Object.prototype.propertyIsEnumerable,jp=(r,e,t)=>e in r?R7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,T7=(r,e)=>{for(var t in e||(e={}))$7.call(e,t)&&jp(r,t,e[t]);if(Lp)for(var t of Lp(e))P7.call(e,t)&&jp(r,t,e[t]);return r};class N7 extends sI{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new ht.EventEmitter,this.name=Q6,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async t=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(t)}catch(i){throw this.logger.debug("Failed to Publish Request"),this.logger.error(i),i}},this.onPayloadHandler=t=>{this.onProviderPayload(t)},this.onConnectHandler=()=>{this.events.emit(Be.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=t=>{this.logger.error(t),this.events.emit(Be.error,t),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(hr.payload,this.onPayloadHandler),this.provider.on(hr.connect,this.onConnectHandler),this.provider.on(hr.disconnect,this.onDisconnectHandler),this.provider.on(hr.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?pt(e.logger,this.name):To(Lo({level:e.logger||J6})),this.messages=new y7(this.logger,e.core),this.subscriber=new C7(this,this.logger),this.publisher=new _7(this,this.logger),this.relayUrl=e?.relayUrl||kg,this.projectId=e.projectId,this.bundleId=QE(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${kp}...`),await this.restartTransport(kp)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},r7)}get context(){return dt(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,i){this.isInitialized(),await this.publisher.publish(e,t,i),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var i;this.isInitialized();let o=((i=this.subscriber.topicMap.get(e))==null?void 0:i[0])||"";if(o)return o;let c;const l=d=>{d.topic===e&&(this.subscriber.off(qt.created,l),c())};return await Promise.all([new Promise(d=>{c=d,this.subscriber.on(qt.created,l)}),new Promise(async d=>{o=await this.subscriber.subscribe(e,t),d()})]),o}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await ts(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(t=>{if(!this.initialized)return t();this.subscriber.once(qt.resubscribed,()=>{t()})}),new Promise(async(t,i)=>{try{await ts(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(o){i(o);return}t()})])}catch(t){this.logger.error(t);const i=t;if(!this.isConnectionStalled(i.message))throw t;this.provider.events.emit(hr.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await lp())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new u4(new f4(i5({sdkVersion:t7,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:i}=e;await this.messages.set(t,i)}async shouldIgnoreMessageEvent(e){const{topic:t,message:i}=e;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const o=this.messages.has(t,i);return o&&this.logger.debug(`Ignoring duplicate message: ${i}`),o}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Ul(e)){if(!e.method.endsWith(X6))return;const t=e.params,{topic:i,message:o,publishedAt:c}=t.data,l={topic:i,message:o,publishedAt:c};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(T7({type:"event",event:t.id},l)),this.events.emit(t.id,l),await this.acknowledgePayload(e),await this.onMessageEvent(l)}else ui(e)&&this.events.emit(Be.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Be.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=qo(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(hr.payload,this.onPayloadHandler),this.provider.off(hr.connect,this.onConnectHandler),this.provider.off(hr.disconnect,this.onDisconnectHandler),this.provider.off(hr.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Be.connection_stalled,()=>{this.restartTransport().catch(t=>this.logger.error(t))});let e=await lp();n3(async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(i=>this.logger.error(i))))})}onProviderDisconnect(){this.events.emit(Be.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},G.toMiliseconds(e7)))}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var A7=Object.defineProperty,Up=Object.getOwnPropertySymbols,k7=Object.prototype.hasOwnProperty,D7=Object.prototype.propertyIsEnumerable,qp=(r,e,t)=>e in r?A7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Wp=(r,e)=>{for(var t in e||(e={}))k7.call(e,t)&&qp(r,t,e[t]);if(Up)for(var t of Up(e))D7.call(e,t)&&qp(r,t,e[t]);return r};let Ho=class extends oI{constructor(e,t,i,o=qr,c=void 0){super(e,t,i,o),this.core=e,this.logger=t,this.name=i,this.map=new Map,this.version=n7,this.cached=[],this.initialized=!1,this.storagePrefix=qr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(l=>{this.getKey&&l!==null&&!ct(l)?this.map.set(this.getKey(l),l):k5(l)?this.map.set(l.id,l):D5(l)&&this.map.set(l.topic,l)}),this.cached=[],this.initialized=!0)},this.set=async(l,d)=>{this.isInitialized(),this.map.has(l)?await this.update(l,d):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:l,value:d}),this.map.set(l,d),await this.persist())},this.get=l=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:l}),this.getData(l)),this.getAll=l=>(this.isInitialized(),l?this.values.filter(d=>Object.keys(l).every(m=>B2(d[m],l[m]))):this.values),this.update=async(l,d)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:l,update:d});const m=Wp(Wp({},this.getData(l)),d);this.map.set(l,m),await this.persist()},this.delete=async(l,d)=>{this.isInitialized(),this.map.has(l)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:l,reason:d}),this.map.delete(l),await this.persist())},this.logger=pt(t,this.name),this.storagePrefix=o,this.getKey=c}get context(){return dt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:i}=U("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:t}=U("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}},M7=class{constructor(e,t){this.core=e,this.logger=t,this.name=c7,this.version=l7,this.events=new ss,this.initialized=!1,this.storagePrefix=qr,this.ignoredPayloadTypes=[wn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async()=>{this.isInitialized();const i=ll(),o=await this.core.crypto.setSymKey(i),c=Wt(G.FIVE_MINUTES),l={protocol:Ag},d={topic:o,expiry:c,relay:l,active:!1},m=w5({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:i,relay:l});return await this.pairings.set(o,d),await this.core.relayer.subscribe(o),this.core.expirer.set(o,c),{topic:o,uri:m}},this.pair=async i=>{this.isInitialized(),this.isValidPair(i);const{topic:o,symKey:c,relay:l}=rp(i.uri);let d;if(this.pairings.keys.includes(o)&&(d=this.pairings.get(o),d.active))throw new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);const m=Wt(G.FIVE_MINUTES),g={topic:o,relay:l,expiry:m,active:!1};return await this.pairings.set(o,g),this.core.expirer.set(o,m),i.activatePairing&&await this.activate({topic:o}),this.events.emit(Zi.create,g),this.core.crypto.keychain.has(o)||(await this.core.crypto.setSymKey(c,o),await this.core.relayer.subscribe(o,{relay:l})),g},this.activate=async({topic:i})=>{this.isInitialized();const o=Wt(G.THIRTY_DAYS);await this.pairings.update(i,{active:!0,expiry:o}),this.core.expirer.set(i,o)},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:o}=i;if(this.pairings.keys.includes(o)){const c=await this.sendRequest(o,"wc_pairingPing",{}),{done:l,resolve:d,reject:m}=Kn();this.events.once(Ae("pairing_ping",c),({error:g})=>{g?m(g):d()}),await l()}},this.updateExpiry=async({topic:i,expiry:o})=>{this.isInitialized(),await this.pairings.update(i,{expiry:o})},this.updateMetadata=async({topic:i,metadata:o})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:o})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:o}=i;this.pairings.keys.includes(o)&&(await this.sendRequest(o,"wc_pairingDelete",$e("USER_DISCONNECTED")),await this.deletePairing(o))},this.sendRequest=async(i,o,c)=>{const l=Dr(o,c),d=await this.core.crypto.encode(i,l),m=ji[o].req;return this.core.history.set(i,l),this.core.relayer.publish(i,d,m),l.id},this.sendResult=async(i,o,c)=>{const l=qo(i,c),d=await this.core.crypto.encode(o,l),m=await this.core.history.get(o,i),g=ji[m.request.method].res;await this.core.relayer.publish(o,d,g),await this.core.history.resolve(l)},this.sendError=async(i,o,c)=>{const l=ti(i,c),d=await this.core.crypto.encode(o,l),m=await this.core.history.get(o,i),g=ji[m.request.method]?ji[m.request.method].res:ji.unregistered_method.res;await this.core.relayer.publish(o,d,g),await this.core.history.resolve(l)},this.deletePairing=async(i,o)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,$e("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),o?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(o=>Nr(o.expiry));await Promise.all(i.map(o=>this.deletePairing(o.topic)))},this.onRelayEventRequest=i=>{const{topic:o,payload:c}=i;switch(c.method){case"wc_pairingPing":return this.onPairingPingRequest(o,c);case"wc_pairingDelete":return this.onPairingDeleteRequest(o,c);default:return this.onUnknownRpcMethodRequest(o,c)}},this.onRelayEventResponse=async i=>{const{topic:o,payload:c}=i,l=(await this.core.history.get(o,c.id)).request.method;switch(l){case"wc_pairingPing":return this.onPairingPingResponse(o,c);default:return this.onUnknownRpcMethodResponse(l)}},this.onPairingPingRequest=async(i,o)=>{const{id:c}=o;try{this.isValidPing({topic:i}),await this.sendResult(c,i,!0),this.events.emit(Zi.ping,{id:c,topic:i})}catch(l){await this.sendError(c,i,l),this.logger.error(l)}},this.onPairingPingResponse=(i,o)=>{const{id:c}=o;setTimeout(()=>{gr(o)?this.events.emit(Ae("pairing_ping",c),{}):_t(o)&&this.events.emit(Ae("pairing_ping",c),{error:o.error})},500)},this.onPairingDeleteRequest=async(i,o)=>{const{id:c}=o;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(Zi.delete,{id:c,topic:i})}catch(l){await this.sendError(c,i,l),this.logger.error(l)}},this.onUnknownRpcMethodRequest=async(i,o)=>{const{id:c,method:l}=o;try{if(this.registeredMethods.includes(l))return;const d=$e("WC_METHOD_UNSUPPORTED",l);await this.sendError(c,i,d),this.logger.error(d)}catch(d){await this.sendError(c,i,d),this.logger.error(d)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error($e("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=i=>{var o;if(!ot(i)){const{message:l}=U("MISSING_OR_INVALID",`pair() params: ${i}`);throw new Error(l)}if(!A5(i.uri)){const{message:l}=U("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw new Error(l)}const c=rp(i.uri);if(!((o=c?.relay)!=null&&o.protocol)){const{message:l}=U("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(l)}if(!(c!=null&&c.symKey)){const{message:l}=U("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(l)}},this.isValidPing=async i=>{if(!ot(i)){const{message:c}=U("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(c)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidDisconnect=async i=>{if(!ot(i)){const{message:c}=U("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(c)}const{topic:o}=i;await this.isValidPairingTopic(o)},this.isValidPairingTopic=async i=>{if(!Ue(i,!1)){const{message:o}=U("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(o)}if(!this.pairings.keys.includes(i)){const{message:o}=U("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(o)}if(Nr(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:o}=U("EXPIRED",`pairing topic: ${i}`);throw new Error(o)}},this.core=e,this.logger=pt(t,this.name),this.pairings=new Ho(this.core,this.logger,this.name,this.storagePrefix)}get context(){return dt(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Be.message,async e=>{const{topic:t,message:i}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const o=await this.core.crypto.decode(t,i);try{Ul(o)?(this.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ui(o)&&(await this.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.core.history.delete(t,o.id))}catch(c){this.logger.error(c)}})}registerExpirerEvents(){this.core.expirer.on(At.expired,async e=>{const{topic:t}=sg(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit(Zi.expire,{topic:t}))})}};class L7 extends rI{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new ht.EventEmitter,this.name=u7,this.version=h7,this.cached=[],this.initialized=!1,this.storagePrefix=qr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,o,c)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:o,chainId:c}),this.records.has(o.id))return;const l={id:o.id,topic:i,request:{method:o.method,params:o.params||null},chainId:c,expiry:Wt(G.THIRTY_DAYS)};this.records.set(l.id,l),this.events.emit(Kt.created,l)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const o=await this.getRecord(i.id);typeof o.response>"u"&&(o.response=_t(i)?{error:i.error}:{result:i.result},this.records.set(o.id,o),this.events.emit(Kt.updated,o))},this.get=async(i,o)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:o}),await this.getRecord(o)),this.delete=(i,o)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:o}),this.values.forEach(c=>{if(c.topic===i){if(typeof o<"u"&&c.id!==o)return;this.records.delete(c.id),this.events.emit(Kt.deleted,c)}})},this.exists=async(i,o)=>(this.isInitialized(),this.records.has(o)?(await this.getRecord(o)).topic===i:!1),this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=pt(t,this.name)}get context(){return dt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(t=>{if(typeof t.response<"u")return;const i={topic:t.topic,request:Dr(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(i)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:i}=U("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(i)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Kt.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:t}=U("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Kt.created,e=>{const t=Kt.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Kt.updated,e=>{const t=Kt.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(Kt.deleted,e=>{const t=Kt.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(li.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{G.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}}let j7=class extends cI{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new ht.EventEmitter,this.name=d7,this.version=p7,this.cached=[],this.initialized=!1,this.storagePrefix=qr,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const o=this.formatTarget(i);return typeof this.getExpiration(o)<"u"}catch{return!1}},this.set=(i,o)=>{this.isInitialized();const c=this.formatTarget(i),l={target:c,expiry:o};this.expirations.set(c,l),this.checkExpiry(c,l),this.events.emit(At.created,{target:c,expiration:l})},this.get=i=>{this.isInitialized();const o=this.formatTarget(i);return this.getExpiration(o)},this.del=i=>{if(this.isInitialized(),this.has(i)){const o=this.formatTarget(i),c=this.getExpiration(o);this.expirations.delete(o),this.events.emit(At.deleted,{target:o,expiration:c})}},this.on=(i,o)=>{this.events.on(i,o)},this.once=(i,o)=>{this.events.once(i,o)},this.off=(i,o)=>{this.events.off(i,o)},this.removeListener=(i,o)=>{this.events.removeListener(i,o)},this.logger=pt(t,this.name)}get context(){return dt(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return s5(e);if(typeof e=="number")return o5(e);const{message:t}=U("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(At.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:t}=U("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(t),new Error(t)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:i}=U("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(i),new Error(i)}return t}checkExpiry(e,t){const{expiry:i}=t;G.toMiliseconds(i)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(At.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(li.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(At.created,e=>{const t=At.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(At.expired,e=>{const t=At.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(At.deleted,e=>{const t=At.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}}},U7=class extends lI{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=Sc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async i=>{if(this.verifyDisabled||si()||!oi())return;const o=this.getVerifyUrl(i?.verifyUrl);this.verifyUrl!==o&&this.removeIframe(),this.verifyUrl=o;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c)}if(!this.initialized){this.removeIframe(),this.verifyUrl=yl;try{await this.createIframe()}catch(c){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(c),this.verifyDisabled=!0}}},this.register=async i=>{this.initialized?this.sendPost(i.attestationId):(this.addToQueue(i.attestationId),await this.init())},this.resolve=async i=>{if(this.isDevEnv)return"";const o=this.getVerifyUrl(i?.verifyUrl);let c;try{c=await this.fetchAttestation(i.attestationId,o)}catch(l){this.logger.info(`failed to resolve attestation: ${i.attestationId} from url: ${o}`),this.logger.info(l),c=await this.fetchAttestation(i.attestationId,yl)}return c},this.fetchAttestation=async(i,o)=>{this.logger.info(`resolving attestation: ${i} from url: ${o}`);const c=this.startAbortTimer(G.ONE_SECOND*2),l=await fetch(`${o}/attestation/${i}`,{signal:this.abortController.signal});return clearTimeout(c),l.status===200?await l.json():void 0},this.addToQueue=i=>{this.queue.push(i)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(i=>this.sendPost(i)),this.queue=[])},this.sendPost=i=>{var o;try{if(!this.iframe)return;(o=this.iframe.contentWindow)==null||o.postMessage(i,"*"),this.logger.info(`postMessage sent: ${i} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let i;const o=c=>{c.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",o),i())};await Promise.race([new Promise(c=>{if(document.getElementById(Sc))return c();window.addEventListener("message",o);const l=document.createElement("iframe");l.id=Sc,l.src=`${this.verifyUrl}/${this.projectId}`,l.style.display="none",document.body.append(l),this.iframe=l,i=c}),new Promise((c,l)=>setTimeout(()=>{window.removeEventListener("message",o),l("verify iframe load timeout")},G.toMiliseconds(G.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=i=>{let o=i||Zn;return f7.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${Zn}`),o=Zn),o},this.logger=pt(t,this.name),this.verifyUrl=Zn,this.abortController=new AbortController,this.isDevEnv=Dl()&&g4.IS_VITEST}get context(){return dt(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),G.toMiliseconds(e))}},q7=class extends uI{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.context=g7,this.registerDeviceToken=async i=>{const{clientId:o,token:c,notificationType:l,enableEncrypted:d=!1}=i,m=`${m7}/${this.projectId}/clients`;await H2(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:o,type:l,token:c,always_raw:d})})},this.logger=pt(t,this.context)}};var W7=Object.defineProperty,Hp=Object.getOwnPropertySymbols,H7=Object.prototype.hasOwnProperty,z7=Object.prototype.propertyIsEnumerable,zp=(r,e,t)=>e in r?W7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fp=(r,e)=>{for(var t in e||(e={}))H7.call(e,t)&&zp(r,t,e[t]);if(Hp)for(var t of Hp(e))z7.call(e,t)&&zp(r,t,e[t]);return r};let F7=class Dg extends tI{constructor(e){super(e),this.protocol=Ng,this.version=q6,this.name=ql,this.events=new ht.EventEmitter,this.initialized=!1,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||kg,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:To(Lo({level:e?.logger||W6.logger}));this.logger=pt(t,this.name),this.heartbeat=new li.HeartBeat,this.crypto=new v7(this,this.logger,e?.keychain),this.history=new L7(this,this.logger),this.expirer=new j7(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new v3(Fp(Fp({},H6),e?.storageOptions)),this.relayer=new N7({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new M7(this,this.logger),this.verify=new U7(this.projectId||"",this.logger),this.echoClient=new q7(this.projectId||"",this.logger)}static async init(e){const t=new Dg(e);await t.initialize();const i=await t.crypto.getClientId();return await t.storage.setItem(i7,i),t}get context(){return dt(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}};const V7=F7,Mg="wc",Lg=2,jg="client",Wl=`${Mg}@${Lg}:${jg}:`,Oc={name:jg,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Vp="WALLETCONNECT_DEEPLINK_CHOICE",B7="proposal",Ug="Proposal expired",K7="session",so=G.SEVEN_DAYS,G7="engine",qi={wc_sessionPropose:{req:{ttl:G.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1104},res:{ttl:G.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1106},res:{ttl:G.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:G.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:G.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:G.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:G.ONE_DAY,prompt:!1,tag:1112},res:{ttl:G.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:G.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:G.THIRTY_SECONDS,prompt:!1,tag:1115}}},Cc={min:G.FIVE_MINUTES,max:G.SEVEN_DAYS},dr={idle:"IDLE",active:"ACTIVE"},Y7="request",Z7=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var J7=Object.defineProperty,Q7=Object.defineProperties,X7=Object.getOwnPropertyDescriptors,Bp=Object.getOwnPropertySymbols,e8=Object.prototype.hasOwnProperty,t8=Object.prototype.propertyIsEnumerable,Kp=(r,e,t)=>e in r?J7(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,st=(r,e)=>{for(var t in e||(e={}))e8.call(e,t)&&Kp(r,t,e[t]);if(Bp)for(var t of Bp(e))t8.call(e,t)&&Kp(r,t,e[t]);return r},Wi=(r,e)=>Q7(r,X7(e));class r8 extends dI{constructor(e){super(e),this.name=G7,this.events=new ss,this.initialized=!1,this.ignoredPayloadTypes=[wn],this.requestQueue={state:dr.idle,queue:[]},this.sessionRequestQueue={state:dr.idle,queue:[]},this.requestQueueDelay=G.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(qi)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},G.toMiliseconds(this.requestQueueDelay)))},this.connect=async t=>{await this.isInitialized();const i=Wi(st({},t),{requiredNamespaces:t.requiredNamespaces||{},optionalNamespaces:t.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:o,requiredNamespaces:c,optionalNamespaces:l,sessionProperties:d,relays:m}=i;let g=o,b,I=!1;if(g&&(I=this.client.core.pairing.pairings.get(g).active),!g||!I){const{topic:O,uri:C}=await this.client.core.pairing.create();g=O,b=C}const S=await this.client.core.crypto.generateKeyPair(),k=st({requiredNamespaces:c,optionalNamespaces:l,relays:m??[{protocol:Ag}],proposer:{publicKey:S,metadata:this.client.metadata}},d&&{sessionProperties:d}),{reject:A,resolve:M,done:q}=Kn(G.FIVE_MINUTES,Ug);if(this.events.once(Ae("session_connect"),async({error:O,session:C})=>{if(O)A(O);else if(C){C.self.publicKey=S;const R=Wi(st({},C),{requiredNamespaces:C.requiredNamespaces,optionalNamespaces:C.optionalNamespaces});await this.client.session.set(C.topic,R),await this.setExpiry(C.topic,C.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:C.peer.metadata}),M(R)}}),!g){const{message:O}=U("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(O)}const L=await this.sendRequest({topic:g,method:"wc_sessionPropose",params:k}),E=Wt(G.FIVE_MINUTES);return await this.setProposal(L,st({id:L,expiry:E},k)),{uri:b,approval:q}},this.pair=async t=>(await this.isInitialized(),await this.client.core.pairing.pair(t)),this.approve=async t=>{await this.isInitialized(),await this.isValidApprove(t);const{id:i,relayProtocol:o,namespaces:c,sessionProperties:l}=t,d=this.client.proposal.get(i);let{pairingTopic:m,proposer:g,requiredNamespaces:b,optionalNamespaces:I}=d;m=m||"",fn(b)||(b=R5(c,"approve()"));const S=await this.client.core.crypto.generateKeyPair(),k=g.publicKey,A=await this.client.core.crypto.generateSharedKey(S,k);m&&i&&(await this.client.core.pairing.updateMetadata({topic:m,metadata:g.metadata}),await this.sendResult({id:i,topic:m,result:{relay:{protocol:o??"irn"},responderPublicKey:S}}),await this.client.proposal.delete(i,$e("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:m}));const M=st({relay:{protocol:o??"irn"},namespaces:c,requiredNamespaces:b,optionalNamespaces:I,pairingTopic:m,controller:{publicKey:S,metadata:this.client.metadata},expiry:Wt(so)},l&&{sessionProperties:l});await this.client.core.relayer.subscribe(A),await this.sendRequest({topic:A,method:"wc_sessionSettle",params:M,throwOnFailedPublish:!0});const q=Wi(st({},M),{topic:A,pairingTopic:m,acknowledged:!1,self:M.controller,peer:{publicKey:g.publicKey,metadata:g.metadata},controller:S});return await this.client.session.set(A,q),await this.setExpiry(A,Wt(so)),{topic:A,acknowledged:()=>new Promise(L=>setTimeout(()=>L(this.client.session.get(A)),500))}},this.reject=async t=>{await this.isInitialized(),await this.isValidReject(t);const{id:i,reason:o}=t,{pairingTopic:c}=this.client.proposal.get(i);c&&(await this.sendError(i,c,o),await this.client.proposal.delete(i,$e("USER_DISCONNECTED")))},this.update=async t=>{await this.isInitialized(),await this.isValidUpdate(t);const{topic:i,namespaces:o}=t,c=await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:o}}),{done:l,resolve:d,reject:m}=Kn();return this.events.once(Ae("session_update",c),({error:g})=>{g?m(g):d()}),await this.client.session.update(i,{namespaces:o}),{acknowledged:l}},this.extend=async t=>{await this.isInitialized(),await this.isValidExtend(t);const{topic:i}=t,o=await this.sendRequest({topic:i,method:"wc_sessionExtend",params:{}}),{done:c,resolve:l,reject:d}=Kn();return this.events.once(Ae("session_extend",o),({error:m})=>{m?d(m):l()}),await this.setExpiry(i,Wt(so)),{acknowledged:c}},this.request=async t=>{await this.isInitialized(),await this.isValidRequest(t);const{chainId:i,request:o,topic:c,expiry:l}=t,d=jo(),{done:m,resolve:g,reject:b}=Kn(l,"Request expired. Please try again.");return this.events.once(Ae("session_request",d),({error:I,result:S})=>{I?b(I):g(S)}),await Promise.all([new Promise(async I=>{await this.sendRequest({clientRpcId:d,topic:c,method:"wc_sessionRequest",params:{request:o,chainId:i},expiry:l,throwOnFailedPublish:!0}).catch(S=>b(S)),this.client.events.emit("session_request_sent",{topic:c,request:o,chainId:i,id:d}),I()}),new Promise(async I=>{const S=await c5(this.client.core.storage,Vp);a5({id:d,topic:c,wcDeepLink:S}),I()}),m()]).then(I=>I[2])},this.respond=async t=>{await this.isInitialized(),await this.isValidRespond(t);const{topic:i,response:o}=t,{id:c}=o;gr(o)?await this.sendResult({id:c,topic:i,result:o.result,throwOnFailedPublish:!0}):_t(o)&&await this.sendError(c,i,o.error),this.cleanupAfterResponse(t)},this.ping=async t=>{await this.isInitialized(),await this.isValidPing(t);const{topic:i}=t;if(this.client.session.keys.includes(i)){const o=await this.sendRequest({topic:i,method:"wc_sessionPing",params:{}}),{done:c,resolve:l,reject:d}=Kn();this.events.once(Ae("session_ping",o),({error:m})=>{m?d(m):l()}),await c()}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async t=>{await this.isInitialized(),await this.isValidEmit(t);const{topic:i,event:o,chainId:c}=t;await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:o,chainId:c}})},this.disconnect=async t=>{await this.isInitialized(),await this.isValidDisconnect(t);const{topic:i}=t;this.client.session.keys.includes(i)?(await this.sendRequest({topic:i,method:"wc_sessionDelete",params:$e("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(i)):await this.client.core.pairing.disconnect({topic:i})},this.find=t=>(this.isInitialized(),this.client.session.getAll().filter(i=>T5(i,t))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async t=>{if(t.pairingTopic)try{const i=this.client.core.pairing.pairings.get(t.pairingTopic),o=this.client.core.pairing.pairings.getAll().filter(c=>{var l,d;return((l=c.peerMetadata)==null?void 0:l.url)&&((d=c.peerMetadata)==null?void 0:d.url)===t.peer.metadata.url&&c.topic&&c.topic!==i.topic});if(o.length===0)return;this.client.logger.info(`Cleaning up ${o.length} duplicate pairing(s)`),await Promise.all(o.map(c=>this.client.core.pairing.disconnect({topic:c.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async(t,i)=>{const{self:o}=this.client.session.get(t);await this.client.core.relayer.unsubscribe(t),this.client.session.delete(t,$e("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(t)&&await this.client.core.crypto.deleteSymKey(t),i||this.client.core.expirer.del(t),this.client.core.storage.removeItem(Vp).catch(c=>this.client.logger.warn(c)),this.getPendingSessionRequests().forEach(c=>{c.topic===t&&this.deletePendingSessionRequest(c.id,$e("USER_DISCONNECTED"))})},this.deleteProposal=async(t,i)=>{await Promise.all([this.client.proposal.delete(t,$e("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(t)])},this.deletePendingSessionRequest=async(t,i,o=!1)=>{await Promise.all([this.client.pendingRequest.delete(t,i),o?Promise.resolve():this.client.core.expirer.del(t)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(c=>c.id!==t),o&&(this.sessionRequestQueue.state=dr.idle)},this.setExpiry=async(t,i)=>{this.client.session.keys.includes(t)&&await this.client.session.update(t,{expiry:i}),this.client.core.expirer.set(t,i)},this.setProposal=async(t,i)=>{await this.client.proposal.set(t,i),this.client.core.expirer.set(t,i.expiry)},this.setPendingSessionRequest=async t=>{const i=qi.wc_sessionRequest.req.ttl,{id:o,topic:c,params:l,verifyContext:d}=t;await this.client.pendingRequest.set(o,{id:o,topic:c,params:l,verifyContext:d}),i&&this.client.core.expirer.set(o,Wt(i))},this.sendRequest=async t=>{const{topic:i,method:o,params:c,expiry:l,relayRpcId:d,clientRpcId:m,throwOnFailedPublish:g}=t,b=Dr(o,c,m);if(oi()&&Z7.includes(o)){const k=Qn(JSON.stringify(b));this.client.core.verify.register({attestationId:k})}const I=await this.client.core.crypto.encode(i,b),S=qi[o].req;return l&&(S.ttl=l),d&&(S.id=d),this.client.core.history.set(i,b),g?(S.internal=Wi(st({},S.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,I,S)):this.client.core.relayer.publish(i,I,S).catch(k=>this.client.logger.error(k)),b.id},this.sendResult=async t=>{const{id:i,topic:o,result:c,throwOnFailedPublish:l}=t,d=qo(i,c),m=await this.client.core.crypto.encode(o,d),g=await this.client.core.history.get(o,i),b=qi[g.request.method].res;l?(b.internal=Wi(st({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,m,b)):this.client.core.relayer.publish(o,m,b).catch(I=>this.client.logger.error(I)),await this.client.core.history.resolve(d)},this.sendError=async(t,i,o)=>{const c=ti(t,o),l=await this.client.core.crypto.encode(i,c),d=await this.client.core.history.get(i,t),m=qi[d.request.method].res;this.client.core.relayer.publish(i,l,m),await this.client.core.history.resolve(c)},this.cleanup=async()=>{const t=[],i=[];this.client.session.getAll().forEach(o=>{Nr(o.expiry)&&t.push(o.topic)}),this.client.proposal.getAll().forEach(o=>{Nr(o.expiry)&&i.push(o.id)}),await Promise.all([...t.map(o=>this.deleteSession(o)),...i.map(o=>this.deleteProposal(o))])},this.onRelayEventRequest=async t=>{this.requestQueue.queue.push(t),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===dr.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=dr.active;const t=this.requestQueue.queue.shift();if(t)try{this.processRequest(t),await new Promise(i=>setTimeout(i,300))}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=dr.idle},this.processRequest=t=>{const{topic:i,payload:o}=t,c=o.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeRequest(i,o);case"wc_sessionSettle":return this.onSessionSettleRequest(i,o);case"wc_sessionUpdate":return this.onSessionUpdateRequest(i,o);case"wc_sessionExtend":return this.onSessionExtendRequest(i,o);case"wc_sessionPing":return this.onSessionPingRequest(i,o);case"wc_sessionDelete":return this.onSessionDeleteRequest(i,o);case"wc_sessionRequest":return this.onSessionRequest(i,o);case"wc_sessionEvent":return this.onSessionEventRequest(i,o);default:return this.client.logger.info(`Unsupported request method ${c}`)}},this.onRelayEventResponse=async t=>{const{topic:i,payload:o}=t,c=(await this.client.core.history.get(i,o.id)).request.method;switch(c){case"wc_sessionPropose":return this.onSessionProposeResponse(i,o);case"wc_sessionSettle":return this.onSessionSettleResponse(i,o);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,o);case"wc_sessionExtend":return this.onSessionExtendResponse(i,o);case"wc_sessionPing":return this.onSessionPingResponse(i,o);case"wc_sessionRequest":return this.onSessionRequestResponse(i,o);default:return this.client.logger.info(`Unsupported response method ${c}`)}},this.onRelayEventUnknownPayload=t=>{const{topic:i}=t,{message:o}=U("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(o)},this.onSessionProposeRequest=async(t,i)=>{const{params:o,id:c}=i;try{this.isValidConnect(st({},i.params));const l=Wt(G.FIVE_MINUTES),d=st({id:c,pairingTopic:t,expiry:l},o);await this.setProposal(c,d);const m=Qn(JSON.stringify(i)),g=await this.getVerifyContext(m,d.proposer.metadata);this.client.events.emit("session_proposal",{id:c,params:d,verifyContext:g})}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.onSessionProposeResponse=async(t,i)=>{const{id:o}=i;if(gr(i)){const{result:c}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:c});const l=this.client.proposal.get(o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:l});const d=l.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:d});const m=c.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:m});const g=await this.client.core.crypto.generateSharedKey(d,m);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const b=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:b}),await this.client.core.pairing.activate({topic:t})}else _t(i)&&(await this.client.proposal.delete(o,$e("USER_DISCONNECTED")),this.events.emit(Ae("session_connect"),{error:i.error}))},this.onSessionSettleRequest=async(t,i)=>{const{id:o,params:c}=i;try{this.isValidSessionSettleRequest(c);const{relay:l,controller:d,expiry:m,namespaces:g,requiredNamespaces:b,optionalNamespaces:I,sessionProperties:S,pairingTopic:k}=i.params,A=st({topic:t,relay:l,expiry:m,namespaces:g,acknowledged:!0,pairingTopic:k,requiredNamespaces:b,optionalNamespaces:I,controller:d.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:d.publicKey,metadata:d.metadata}},S&&{sessionProperties:S});await this.sendResult({id:i.id,topic:t,result:!0}),this.events.emit(Ae("session_connect"),{session:A}),this.cleanupDuplicatePairings(A)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionSettleResponse=async(t,i)=>{const{id:o}=i;gr(i)?(await this.client.session.update(t,{acknowledged:!0}),this.events.emit(Ae("session_approve",o),{})):_t(i)&&(await this.client.session.delete(t,$e("USER_DISCONNECTED")),this.events.emit(Ae("session_approve",o),{error:i.error}))},this.onSessionUpdateRequest=async(t,i)=>{const{params:o,id:c}=i;try{const l=`${t}_session_update`,d=io.get(l);if(d&&this.isRequestOutOfSync(d,c)){this.client.logger.info(`Discarding out of sync request - ${c}`);return}this.isValidUpdate(st({topic:t},o)),await this.client.session.update(t,{namespaces:o.namespaces}),await this.sendResult({id:c,topic:t,result:!0}),this.client.events.emit("session_update",{id:c,topic:t,params:o}),io.set(l,c)}catch(l){await this.sendError(c,t,l),this.client.logger.error(l)}},this.isRequestOutOfSync=(t,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3)),this.onSessionUpdateResponse=(t,i)=>{const{id:o}=i;gr(i)?this.events.emit(Ae("session_update",o),{}):_t(i)&&this.events.emit(Ae("session_update",o),{error:i.error})},this.onSessionExtendRequest=async(t,i)=>{const{id:o}=i;try{this.isValidExtend({topic:t}),await this.setExpiry(t,Wt(so)),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_extend",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionExtendResponse=(t,i)=>{const{id:o}=i;gr(i)?this.events.emit(Ae("session_extend",o),{}):_t(i)&&this.events.emit(Ae("session_extend",o),{error:i.error})},this.onSessionPingRequest=async(t,i)=>{const{id:o}=i;try{this.isValidPing({topic:t}),await this.sendResult({id:o,topic:t,result:!0}),this.client.events.emit("session_ping",{id:o,topic:t})}catch(c){await this.sendError(o,t,c),this.client.logger.error(c)}},this.onSessionPingResponse=(t,i)=>{const{id:o}=i;setTimeout(()=>{gr(i)?this.events.emit(Ae("session_ping",o),{}):_t(i)&&this.events.emit(Ae("session_ping",o),{error:i.error})},500)},this.onSessionDeleteRequest=async(t,i)=>{const{id:o}=i;try{this.isValidDisconnect({topic:t,reason:i.params}),await Promise.all([new Promise(c=>{this.client.core.relayer.once(Be.publish,async()=>{c(await this.deleteSession(t))})}),this.sendResult({id:o,topic:t,result:!0})]),this.client.events.emit("session_delete",{id:o,topic:t})}catch(c){this.client.logger.error(c)}},this.onSessionRequest=async(t,i)=>{const{id:o,params:c}=i;try{this.isValidRequest(st({topic:t},c));const l=Qn(JSON.stringify(Dr("wc_sessionRequest",c,o))),d=this.client.session.get(t),m=await this.getVerifyContext(l,d.peer.metadata),g={id:o,topic:t,params:c,verifyContext:m};await this.setPendingSessionRequest(g),this.addSessionRequestToSessionRequestQueue(g),this.processSessionRequestQueue()}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.onSessionRequestResponse=(t,i)=>{const{id:o}=i;gr(i)?this.events.emit(Ae("session_request",o),{result:i.result}):_t(i)&&this.events.emit(Ae("session_request",o),{error:i.error})},this.onSessionEventRequest=async(t,i)=>{const{id:o,params:c}=i;try{const l=`${t}_session_event_${c.event.name}`,d=io.get(l);if(d&&this.isRequestOutOfSync(d,o)){this.client.logger.info(`Discarding out of sync request - ${o}`);return}this.isValidEmit(st({topic:t},c)),this.client.events.emit("session_event",{id:o,topic:t,params:c}),io.set(l,o)}catch(l){await this.sendError(o,t,l),this.client.logger.error(l)}},this.addSessionRequestToSessionRequestQueue=t=>{this.sessionRequestQueue.queue.push(t)},this.cleanupAfterResponse=t=>{this.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=dr.idle,this.processSessionRequestQueue()},G.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===dr.active){this.client.logger.info("session request queue is already active.");return}const t=this.sessionRequestQueue.queue[0];if(!t){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=dr.active,this.client.events.emit("session_request",t)}catch(i){this.client.logger.error(i)}},this.onPairingCreated=t=>{if(t.active)return;const i=this.client.proposal.getAll().find(o=>o.pairingTopic===t.topic);i&&this.onSessionProposeRequest(t.topic,Dr("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id))},this.isValidConnect=async t=>{if(!ot(t)){const{message:m}=U("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(t)}`);throw new Error(m)}const{pairingTopic:i,requiredNamespaces:o,optionalNamespaces:c,sessionProperties:l,relays:d}=t;if(ct(i)||await this.isValidPairingTopic(i),!z5(d)){const{message:m}=U("MISSING_OR_INVALID",`connect() relays: ${d}`);throw new Error(m)}!ct(o)&&fn(o)!==0&&this.validateNamespaces(o,"requiredNamespaces"),!ct(c)&&fn(c)!==0&&this.validateNamespaces(c,"optionalNamespaces"),ct(l)||this.validateSessionProps(l,"sessionProperties")},this.validateNamespaces=(t,i)=>{const o=H5(t,"connect()",i);if(o)throw new Error(o.message)},this.isValidApprove=async t=>{if(!ot(t))throw new Error(U("MISSING_OR_INVALID",`approve() params: ${t}`).message);const{id:i,namespaces:o,relayProtocol:c,sessionProperties:l}=t;await this.isValidProposalId(i);const d=this.client.proposal.get(i),m=_o(o,"approve()");if(m)throw new Error(m.message);const g=ap(d.requiredNamespaces,o,"approve()");if(g)throw new Error(g.message);if(!Ue(c,!0)){const{message:b}=U("MISSING_OR_INVALID",`approve() relayProtocol: ${c}`);throw new Error(b)}ct(l)||this.validateSessionProps(l,"sessionProperties")},this.isValidReject=async t=>{if(!ot(t)){const{message:c}=U("MISSING_OR_INVALID",`reject() params: ${t}`);throw new Error(c)}const{id:i,reason:o}=t;if(await this.isValidProposalId(i),!V5(o)){const{message:c}=U("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(o)}`);throw new Error(c)}},this.isValidSessionSettleRequest=t=>{if(!ot(t)){const{message:g}=U("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${t}`);throw new Error(g)}const{relay:i,controller:o,namespaces:c,expiry:l}=t;if(!ag(i)){const{message:g}=U("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const d=M5(o,"onSessionSettleRequest()");if(d)throw new Error(d.message);const m=_o(c,"onSessionSettleRequest()");if(m)throw new Error(m.message);if(Nr(l)){const{message:g}=U("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async t=>{if(!ot(t)){const{message:m}=U("MISSING_OR_INVALID",`update() params: ${t}`);throw new Error(m)}const{topic:i,namespaces:o}=t;await this.isValidSessionTopic(i);const c=this.client.session.get(i),l=_o(o,"update()");if(l)throw new Error(l.message);const d=ap(c.requiredNamespaces,o,"update()");if(d)throw new Error(d.message)},this.isValidExtend=async t=>{if(!ot(t)){const{message:o}=U("MISSING_OR_INVALID",`extend() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionTopic(i)},this.isValidRequest=async t=>{if(!ot(t)){const{message:m}=U("MISSING_OR_INVALID",`request() params: ${t}`);throw new Error(m)}const{topic:i,request:o,chainId:c,expiry:l}=t;await this.isValidSessionTopic(i);const{namespaces:d}=this.client.session.get(i);if(!op(d,c)){const{message:m}=U("MISSING_OR_INVALID",`request() chainId: ${c}`);throw new Error(m)}if(!B5(o)){const{message:m}=U("MISSING_OR_INVALID",`request() ${JSON.stringify(o)}`);throw new Error(m)}if(!Y5(d,c,o.method)){const{message:m}=U("MISSING_OR_INVALID",`request() method: ${o.method}`);throw new Error(m)}if(l&&!X5(l,Cc)){const{message:m}=U("MISSING_OR_INVALID",`request() expiry: ${l}. Expiry must be a number (in seconds) between ${Cc.min} and ${Cc.max}`);throw new Error(m)}},this.isValidRespond=async t=>{var i;if(!ot(t)){const{message:l}=U("MISSING_OR_INVALID",`respond() params: ${t}`);throw new Error(l)}const{topic:o,response:c}=t;try{await this.isValidSessionTopic(o)}catch(l){throw(i=t?.response)!=null&&i.id&&this.cleanupAfterResponse(t),l}if(!K5(c)){const{message:l}=U("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(c)}`);throw new Error(l)}},this.isValidPing=async t=>{if(!ot(t)){const{message:o}=U("MISSING_OR_INVALID",`ping() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async t=>{if(!ot(t)){const{message:d}=U("MISSING_OR_INVALID",`emit() params: ${t}`);throw new Error(d)}const{topic:i,event:o,chainId:c}=t;await this.isValidSessionTopic(i);const{namespaces:l}=this.client.session.get(i);if(!op(l,c)){const{message:d}=U("MISSING_OR_INVALID",`emit() chainId: ${c}`);throw new Error(d)}if(!G5(o)){const{message:d}=U("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}if(!Z5(l,c,o.name)){const{message:d}=U("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(o)}`);throw new Error(d)}},this.isValidDisconnect=async t=>{if(!ot(t)){const{message:o}=U("MISSING_OR_INVALID",`disconnect() params: ${t}`);throw new Error(o)}const{topic:i}=t;await this.isValidSessionOrPairingTopic(i)},this.getVerifyContext=async(t,i)=>{const o={verified:{verifyUrl:i.verifyUrl||Zn,validation:"UNKNOWN",origin:i.url||""}};try{const c=await this.client.core.verify.resolve({attestationId:t,verifyUrl:i.verifyUrl});c&&(o.verified.origin=c.origin,o.verified.isScam=c.isScam,o.verified.validation=c.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(c){this.client.logger.info(c)}return this.client.logger.info(`Verify context: ${JSON.stringify(o)}`),o},this.validateSessionProps=(t,i)=>{Object.values(t).forEach(o=>{if(!Ue(o,!1)){const{message:c}=U("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(o)}`);throw new Error(c)}})}}async isInitialized(){if(!this.initialized){const{message:e}=U("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Be.message,async e=>{const{topic:t,message:i}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(i)))return;const o=await this.client.core.crypto.decode(t,i);try{Ul(o)?(this.client.core.history.set(t,o),this.onRelayEventRequest({topic:t,payload:o})):ui(o)?(await this.client.core.history.resolve(o),await this.onRelayEventResponse({topic:t,payload:o}),this.client.core.history.delete(t,o.id)):this.onRelayEventUnknownPayload({topic:t,payload:o})}catch(c){this.client.logger.error(c)}})}registerExpirerEvents(){this.client.core.expirer.on(At.expired,async e=>{const{topic:t,id:i}=sg(e.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,U("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(Zi.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!Ue(e,!1)){const{message:t}=U("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=U("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Nr(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=U("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Ue(e,!1)){const{message:t}=U("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=U("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Nr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=U("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(Ue(e,!1)){const{message:t}=U("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}else{const{message:t}=U("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}async isValidProposalId(e){if(!F5(e)){const{message:t}=U("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=U("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Nr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=U("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class n8 extends Ho{constructor(e,t){super(e,t,B7,Wl),this.core=e,this.logger=t}}let i8=class extends Ho{constructor(e,t){super(e,t,K7,Wl),this.core=e,this.logger=t}};class s8 extends Ho{constructor(e,t){super(e,t,Y7,Wl,i=>i.id),this.core=e,this.logger=t}}let o8=class qg extends hI{constructor(e){super(e),this.protocol=Mg,this.version=Lg,this.name=Oc.name,this.events=new ht.EventEmitter,this.on=(i,o)=>this.events.on(i,o),this.once=(i,o)=>this.events.once(i,o),this.off=(i,o)=>this.events.off(i,o),this.removeListener=(i,o)=>this.events.removeListener(i,o),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(o){throw this.logger.error(o.message),o}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(o){throw this.logger.error(o.message),o}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(o){throw this.logger.error(o.message),o}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(o){throw this.logger.error(o.message),o}},this.update=async i=>{try{return await this.engine.update(i)}catch(o){throw this.logger.error(o.message),o}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(o){throw this.logger.error(o.message),o}},this.request=async i=>{try{return await this.engine.request(i)}catch(o){throw this.logger.error(o.message),o}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(o){throw this.logger.error(o.message),o}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(o){throw this.logger.error(o.message),o}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(o){throw this.logger.error(o.message),o}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(o){throw this.logger.error(o.message),o}},this.find=i=>{try{return this.engine.find(i)}catch(o){throw this.logger.error(o.message),o}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.name=e?.name||Oc.name,this.metadata=e?.metadata||e5();const t=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:To(Lo({level:e?.logger||Oc.logger}));this.core=e?.core||new V7(e),this.logger=pt(t,this.name),this.session=new i8(this.core,this.logger),this.proposal=new n8(this.core,this.logger),this.pendingRequest=new s8(this.core,this.logger),this.engine=new r8(this)}static async init(e){const t=new qg(e);return await t.initialize(),t}get context(){return dt(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}};var a8=Object.defineProperty,c8=Object.defineProperties,l8=Object.getOwnPropertyDescriptors,Gp=Object.getOwnPropertySymbols,u8=Object.prototype.hasOwnProperty,h8=Object.prototype.propertyIsEnumerable,Yp=(r,e,t)=>e in r?a8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Zp=(r,e)=>{for(var t in e||(e={}))u8.call(e,t)&&Yp(r,t,e[t]);if(Gp)for(var t of Gp(e))h8.call(e,t)&&Yp(r,t,e[t]);return r},Jp=(r,e)=>c8(r,l8(e));const d8={Accept:"application/json","Content-Type":"application/json"},p8="POST",Qp={headers:d8,method:p8},Xp=10;let wr=class{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new ht.EventEmitter,this.isAvailable=!1,this.registering=!1,!Ip(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=Ur(e),i=await(await jd(this.url,Jp(Zp({},Qp),{body:t}))).json();this.onPayload({data:i})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!Ip(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const t=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=t||this.events.listenerCount("open")>=t)&&this.events.setMaxListeners(t+1),new Promise((i,o)=>{this.events.once("register_error",c=>{this.resetMaxListeners(),o(c)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return o(new Error("HTTP connection is missing or invalid"));i()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=Ur({id:1,jsonrpc:"2.0",method:"test",params:[]});await jd(e,Jp(Zp({},Qp),{body:t}))}this.onOpen()}catch(t){const i=this.parseError(t);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t=typeof e.data=="string"?ci(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const i=this.parseError(t),o=i.message||i.toString(),c=ti(e,o);this.events.emit("payload",c)}parseError(e,t=this.url){return mg(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Xp&&this.events.setMaxListeners(Xp)}};class Fr extends jl{constructor(e){super(e),this.events=new ht.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Dr(e.method,e.params||[],e.id||Uo().toString()),t)}async requestStrict(e,t){return new Promise(async(i,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{_t(c)?o(c.error):i(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ui(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}const ef="error",f8="wss://relay.walletconnect.com",g8="wc",m8="universal_provider",tf=`${g8}@2:${m8}:`,w8="https://rpc.walletconnect.com/v1/",vr={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Hi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_l={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,e){(function(){var t,i="4.17.21",o=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",d="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",g=500,b="__lodash_placeholder__",I=1,S=2,k=4,A=1,M=2,q=1,L=2,E=4,O=8,C=16,R=32,D=64,V=128,F=256,B=512,X=30,ne="...",Me=800,It=16,et=1,yr=2,St=3,Qt=1/0,Ht=9007199254740991,En=17976931348623157e292,Br=NaN,zt=4294967295,H0=zt-1,z0=zt>>>1,F0=[["ary",V],["bind",q],["bindKey",L],["curry",O],["curryRight",C],["flip",B],["partial",R],["partialRight",D],["rearg",F]],In="[object Arguments]",ds="[object Array]",V0="[object AsyncFunction]",di="[object Boolean]",pi="[object Date]",B0="[object DOMException]",ps="[object Error]",fs="[object Function]",su="[object GeneratorFunction]",kt="[object Map]",fi="[object Number]",K0="[object Null]",Xt="[object Object]",ou="[object Promise]",G0="[object Proxy]",gi="[object RegExp]",Dt="[object Set]",mi="[object String]",gs="[object Symbol]",Y0="[object Undefined]",wi="[object WeakMap]",Z0="[object WeakSet]",vi="[object ArrayBuffer]",Sn="[object DataView]",Go="[object Float32Array]",Yo="[object Float64Array]",Zo="[object Int8Array]",Jo="[object Int16Array]",Qo="[object Int32Array]",Xo="[object Uint8Array]",ea="[object Uint8ClampedArray]",ta="[object Uint16Array]",ra="[object Uint32Array]",J0=/\b__p \+= '';/g,Q0=/\b(__p \+=) '' \+/g,X0=/(__e\(.*?\)|\b__t\)) \+\n'';/g,au=/&(?:amp|lt|gt|quot|#39);/g,cu=/[&<>"']/g,em=RegExp(au.source),tm=RegExp(cu.source),rm=/<%-([\s\S]+?)%>/g,nm=/<%([\s\S]+?)%>/g,lu=/<%=([\s\S]+?)%>/g,im=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sm=/^\w*$/,om=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,na=/[\\^$.*+?()[\]{}|]/g,am=RegExp(na.source),ia=/^\s+/,cm=/\s/,lm=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,um=/\{\n\/\* \[wrapped with (.+)\] \*/,hm=/,? & /,dm=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pm=/[()=,{}\[\]\/\s]/,fm=/\\(\\)?/g,gm=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,uu=/\w*$/,mm=/^[-+]0x[0-9a-f]+$/i,wm=/^0b[01]+$/i,vm=/^\[object .+?Constructor\]$/,ym=/^0o[0-7]+$/i,_m=/^(?:0|[1-9]\d*)$/,bm=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ms=/($^)/,Em=/['\n\r\u2028\u2029\\]/g,ws="\\ud800-\\udfff",Im="\\u0300-\\u036f",Sm="\\ufe20-\\ufe2f",xm="\\u20d0-\\u20ff",hu=Im+Sm+xm,du="\\u2700-\\u27bf",pu="a-z\\xdf-\\xf6\\xf8-\\xff",Om="\\xac\\xb1\\xd7\\xf7",Cm="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Rm="\\u2000-\\u206f",$m=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fu="A-Z\\xc0-\\xd6\\xd8-\\xde",gu="\\ufe0e\\ufe0f",mu=Om+Cm+Rm+$m,sa="['’]",Pm="["+ws+"]",wu="["+mu+"]",vs="["+hu+"]",vu="\\d+",Tm="["+du+"]",yu="["+pu+"]",_u="[^"+ws+mu+vu+du+pu+fu+"]",oa="\\ud83c[\\udffb-\\udfff]",Nm="(?:"+vs+"|"+oa+")",bu="[^"+ws+"]",aa="(?:\\ud83c[\\udde6-\\uddff]){2}",ca="[\\ud800-\\udbff][\\udc00-\\udfff]",xn="["+fu+"]",Eu="\\u200d",Iu="(?:"+yu+"|"+_u+")",Am="(?:"+xn+"|"+_u+")",Su="(?:"+sa+"(?:d|ll|m|re|s|t|ve))?",xu="(?:"+sa+"(?:D|LL|M|RE|S|T|VE))?",Ou=Nm+"?",Cu="["+gu+"]?",km="(?:"+Eu+"(?:"+[bu,aa,ca].join("|")+")"+Cu+Ou+")*",Dm="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ru=Cu+Ou+km,Lm="(?:"+[Tm,aa,ca].join("|")+")"+Ru,jm="(?:"+[bu+vs+"?",vs,aa,ca,Pm].join("|")+")",Um=RegExp(sa,"g"),qm=RegExp(vs,"g"),la=RegExp(oa+"(?="+oa+")|"+jm+Ru,"g"),Wm=RegExp([xn+"?"+yu+"+"+Su+"(?="+[wu,xn,"$"].join("|")+")",Am+"+"+xu+"(?="+[wu,xn+Iu,"$"].join("|")+")",xn+"?"+Iu+"+"+Su,xn+"+"+xu,Mm,Dm,vu,Lm].join("|"),"g"),Hm=RegExp("["+Eu+ws+hu+gu+"]"),zm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vm=-1,Ee={};Ee[Go]=Ee[Yo]=Ee[Zo]=Ee[Jo]=Ee[Qo]=Ee[Xo]=Ee[ea]=Ee[ta]=Ee[ra]=!0,Ee[In]=Ee[ds]=Ee[vi]=Ee[di]=Ee[Sn]=Ee[pi]=Ee[ps]=Ee[fs]=Ee[kt]=Ee[fi]=Ee[Xt]=Ee[gi]=Ee[Dt]=Ee[mi]=Ee[wi]=!1;var _e={};_e[In]=_e[ds]=_e[vi]=_e[Sn]=_e[di]=_e[pi]=_e[Go]=_e[Yo]=_e[Zo]=_e[Jo]=_e[Qo]=_e[kt]=_e[fi]=_e[Xt]=_e[gi]=_e[Dt]=_e[mi]=_e[gs]=_e[Xo]=_e[ea]=_e[ta]=_e[ra]=!0,_e[ps]=_e[fs]=_e[wi]=!1;var Bm={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Km={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ym={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zm=parseFloat,Jm=parseInt,$u=typeof Hi=="object"&&Hi&&Hi.Object===Object&&Hi,Qm=typeof self=="object"&&self&&self.Object===Object&&self,qe=$u||Qm||Function("return this")(),ua=e&&!e.nodeType&&e,Kr=ua&&!0&&r&&!r.nodeType&&r,Pu=Kr&&Kr.exports===ua,ha=Pu&&$u.process,xt=function(){try{var y=Kr&&Kr.require&&Kr.require("util").types;return y||ha&&ha.binding&&ha.binding("util")}catch{}}(),Tu=xt&&xt.isArrayBuffer,Nu=xt&&xt.isDate,Au=xt&&xt.isMap,ku=xt&&xt.isRegExp,Du=xt&&xt.isSet,Mu=xt&&xt.isTypedArray;function ft(y,$,x){switch(x.length){case 0:return y.call($);case 1:return y.call($,x[0]);case 2:return y.call($,x[0],x[1]);case 3:return y.call($,x[0],x[1],x[2])}return y.apply($,x)}function Xm(y,$,x,z){for(var ee=-1,fe=y==null?0:y.length;++ee<fe;){var ke=y[ee];$(z,ke,x(ke),y)}return z}function Ot(y,$){for(var x=-1,z=y==null?0:y.length;++x<z&&$(y[x],x,y)!==!1;);return y}function e1(y,$){for(var x=y==null?0:y.length;x--&&$(y[x],x,y)!==!1;);return y}function Lu(y,$){for(var x=-1,z=y==null?0:y.length;++x<z;)if(!$(y[x],x,y))return!1;return!0}function _r(y,$){for(var x=-1,z=y==null?0:y.length,ee=0,fe=[];++x<z;){var ke=y[x];$(ke,x,y)&&(fe[ee++]=ke)}return fe}function ys(y,$){var x=y==null?0:y.length;return!!x&&On(y,$,0)>-1}function da(y,$,x){for(var z=-1,ee=y==null?0:y.length;++z<ee;)if(x($,y[z]))return!0;return!1}function Ie(y,$){for(var x=-1,z=y==null?0:y.length,ee=Array(z);++x<z;)ee[x]=$(y[x],x,y);return ee}function br(y,$){for(var x=-1,z=$.length,ee=y.length;++x<z;)y[ee+x]=$[x];return y}function pa(y,$,x,z){var ee=-1,fe=y==null?0:y.length;for(z&&fe&&(x=y[++ee]);++ee<fe;)x=$(x,y[ee],ee,y);return x}function t1(y,$,x,z){var ee=y==null?0:y.length;for(z&&ee&&(x=y[--ee]);ee--;)x=$(x,y[ee],ee,y);return x}function fa(y,$){for(var x=-1,z=y==null?0:y.length;++x<z;)if($(y[x],x,y))return!0;return!1}var r1=ga("length");function n1(y){return y.split("")}function i1(y){return y.match(dm)||[]}function ju(y,$,x){var z;return x(y,function(ee,fe,ke){if($(ee,fe,ke))return z=fe,!1}),z}function _s(y,$,x,z){for(var ee=y.length,fe=x+(z?1:-1);z?fe--:++fe<ee;)if($(y[fe],fe,y))return fe;return-1}function On(y,$,x){return $===$?m1(y,$,x):_s(y,Uu,x)}function s1(y,$,x,z){for(var ee=x-1,fe=y.length;++ee<fe;)if(z(y[ee],$))return ee;return-1}function Uu(y){return y!==y}function qu(y,$){var x=y==null?0:y.length;return x?wa(y,$)/x:Br}function ga(y){return function($){return $==null?t:$[y]}}function ma(y){return function($){return y==null?t:y[$]}}function Wu(y,$,x,z,ee){return ee(y,function(fe,ke,ye){x=z?(z=!1,fe):$(x,fe,ke,ye)}),x}function o1(y,$){var x=y.length;for(y.sort($);x--;)y[x]=y[x].value;return y}function wa(y,$){for(var x,z=-1,ee=y.length;++z<ee;){var fe=$(y[z]);fe!==t&&(x=x===t?fe:x+fe)}return x}function va(y,$){for(var x=-1,z=Array(y);++x<y;)z[x]=$(x);return z}function a1(y,$){return Ie($,function(x){return[x,y[x]]})}function Hu(y){return y&&y.slice(0,Bu(y)+1).replace(ia,"")}function gt(y){return function($){return y($)}}function ya(y,$){return Ie($,function(x){return y[x]})}function yi(y,$){return y.has($)}function zu(y,$){for(var x=-1,z=y.length;++x<z&&On($,y[x],0)>-1;);return x}function Fu(y,$){for(var x=y.length;x--&&On($,y[x],0)>-1;);return x}function c1(y,$){for(var x=y.length,z=0;x--;)y[x]===$&&++z;return z}var l1=ma(Bm),u1=ma(Km);function h1(y){return"\\"+Ym[y]}function d1(y,$){return y==null?t:y[$]}function Cn(y){return Hm.test(y)}function p1(y){return zm.test(y)}function f1(y){for(var $,x=[];!($=y.next()).done;)x.push($.value);return x}function _a(y){var $=-1,x=Array(y.size);return y.forEach(function(z,ee){x[++$]=[ee,z]}),x}function Vu(y,$){return function(x){return y($(x))}}function Er(y,$){for(var x=-1,z=y.length,ee=0,fe=[];++x<z;){var ke=y[x];(ke===$||ke===b)&&(y[x]=b,fe[ee++]=x)}return fe}function bs(y){var $=-1,x=Array(y.size);return y.forEach(function(z){x[++$]=z}),x}function g1(y){var $=-1,x=Array(y.size);return y.forEach(function(z){x[++$]=[z,z]}),x}function m1(y,$,x){for(var z=x-1,ee=y.length;++z<ee;)if(y[z]===$)return z;return-1}function w1(y,$,x){for(var z=x+1;z--;)if(y[z]===$)return z;return z}function Rn(y){return Cn(y)?y1(y):r1(y)}function Mt(y){return Cn(y)?_1(y):n1(y)}function Bu(y){for(var $=y.length;$--&&cm.test(y.charAt($)););return $}var v1=ma(Gm);function y1(y){for(var $=la.lastIndex=0;la.test(y);)++$;return $}function _1(y){return y.match(la)||[]}function b1(y){return y.match(Wm)||[]}var E1=function y($){$=$==null?qe:$n.defaults(qe.Object(),$,$n.pick(qe,Fm));var x=$.Array,z=$.Date,ee=$.Error,fe=$.Function,ke=$.Math,ye=$.Object,ba=$.RegExp,I1=$.String,Ct=$.TypeError,Es=x.prototype,S1=fe.prototype,Pn=ye.prototype,Is=$["__core-js_shared__"],Ss=S1.toString,ve=Pn.hasOwnProperty,x1=0,Ku=function(){var n=/[^.]+$/.exec(Is&&Is.keys&&Is.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),xs=Pn.toString,O1=Ss.call(ye),C1=qe._,R1=ba("^"+Ss.call(ve).replace(na,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Os=Pu?$.Buffer:t,Ir=$.Symbol,Cs=$.Uint8Array,Gu=Os?Os.allocUnsafe:t,Rs=Vu(ye.getPrototypeOf,ye),Yu=ye.create,Zu=Pn.propertyIsEnumerable,$s=Es.splice,Ju=Ir?Ir.isConcatSpreadable:t,_i=Ir?Ir.iterator:t,Gr=Ir?Ir.toStringTag:t,Ps=function(){try{var n=Xr(ye,"defineProperty");return n({},"",{}),n}catch{}}(),$1=$.clearTimeout!==qe.clearTimeout&&$.clearTimeout,P1=z&&z.now!==qe.Date.now&&z.now,T1=$.setTimeout!==qe.setTimeout&&$.setTimeout,Ts=ke.ceil,Ns=ke.floor,Ea=ye.getOwnPropertySymbols,N1=Os?Os.isBuffer:t,Qu=$.isFinite,A1=Es.join,k1=Vu(ye.keys,ye),De=ke.max,ze=ke.min,D1=z.now,M1=$.parseInt,Xu=ke.random,L1=Es.reverse,Ia=Xr($,"DataView"),bi=Xr($,"Map"),Sa=Xr($,"Promise"),Tn=Xr($,"Set"),Ei=Xr($,"WeakMap"),Ii=Xr(ye,"create"),As=Ei&&new Ei,Nn={},j1=en(Ia),U1=en(bi),q1=en(Sa),W1=en(Tn),H1=en(Ei),ks=Ir?Ir.prototype:t,Si=ks?ks.valueOf:t,eh=ks?ks.toString:t;function p(n){if(Ce(n)&&!re(n)&&!(n instanceof le)){if(n instanceof Rt)return n;if(ve.call(n,"__wrapped__"))return td(n)}return new Rt(n)}var An=function(){function n(){}return function(s){if(!xe(s))return{};if(Yu)return Yu(s);n.prototype=s;var a=new n;return n.prototype=t,a}}();function Ds(){}function Rt(n,s){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=t}p.templateSettings={escape:rm,evaluate:nm,interpolate:lu,variable:"",imports:{_:p}},p.prototype=Ds.prototype,p.prototype.constructor=p,Rt.prototype=An(Ds.prototype),Rt.prototype.constructor=Rt;function le(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=zt,this.__views__=[]}function z1(){var n=new le(this.__wrapped__);return n.__actions__=tt(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=tt(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=tt(this.__views__),n}function F1(){if(this.__filtered__){var n=new le(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function V1(){var n=this.__wrapped__.value(),s=this.__dir__,a=re(n),u=s<0,h=a?n.length:0,f=nv(0,h,this.__views__),w=f.start,v=f.end,_=v-w,P=u?v:w-1,T=this.__iteratees__,N=T.length,W=0,K=ze(_,this.__takeCount__);if(!a||!u&&h==_&&K==_)return Sh(n,this.__actions__);var J=[];e:for(;_--&&W<K;){P+=s;for(var se=-1,Q=n[P];++se<N;){var ce=T[se],ue=ce.iteratee,vt=ce.type,Ye=ue(Q);if(vt==yr)Q=Ye;else if(!Ye){if(vt==et)continue e;break e}}J[W++]=Q}return J}le.prototype=An(Ds.prototype),le.prototype.constructor=le;function Yr(n){var s=-1,a=n==null?0:n.length;for(this.clear();++s<a;){var u=n[s];this.set(u[0],u[1])}}function B1(){this.__data__=Ii?Ii(null):{},this.size=0}function K1(n){var s=this.has(n)&&delete this.__data__[n];return this.size-=s?1:0,s}function G1(n){var s=this.__data__;if(Ii){var a=s[n];return a===m?t:a}return ve.call(s,n)?s[n]:t}function Y1(n){var s=this.__data__;return Ii?s[n]!==t:ve.call(s,n)}function Z1(n,s){var a=this.__data__;return this.size+=this.has(n)?0:1,a[n]=Ii&&s===t?m:s,this}Yr.prototype.clear=B1,Yr.prototype.delete=K1,Yr.prototype.get=G1,Yr.prototype.has=Y1,Yr.prototype.set=Z1;function er(n){var s=-1,a=n==null?0:n.length;for(this.clear();++s<a;){var u=n[s];this.set(u[0],u[1])}}function J1(){this.__data__=[],this.size=0}function Q1(n){var s=this.__data__,a=Ms(s,n);if(a<0)return!1;var u=s.length-1;return a==u?s.pop():$s.call(s,a,1),--this.size,!0}function X1(n){var s=this.__data__,a=Ms(s,n);return a<0?t:s[a][1]}function ew(n){return Ms(this.__data__,n)>-1}function tw(n,s){var a=this.__data__,u=Ms(a,n);return u<0?(++this.size,a.push([n,s])):a[u][1]=s,this}er.prototype.clear=J1,er.prototype.delete=Q1,er.prototype.get=X1,er.prototype.has=ew,er.prototype.set=tw;function tr(n){var s=-1,a=n==null?0:n.length;for(this.clear();++s<a;){var u=n[s];this.set(u[0],u[1])}}function rw(){this.size=0,this.__data__={hash:new Yr,map:new(bi||er),string:new Yr}}function nw(n){var s=Gs(this,n).delete(n);return this.size-=s?1:0,s}function iw(n){return Gs(this,n).get(n)}function sw(n){return Gs(this,n).has(n)}function ow(n,s){var a=Gs(this,n),u=a.size;return a.set(n,s),this.size+=a.size==u?0:1,this}tr.prototype.clear=rw,tr.prototype.delete=nw,tr.prototype.get=iw,tr.prototype.has=sw,tr.prototype.set=ow;function Zr(n){var s=-1,a=n==null?0:n.length;for(this.__data__=new tr;++s<a;)this.add(n[s])}function aw(n){return this.__data__.set(n,m),this}function cw(n){return this.__data__.has(n)}Zr.prototype.add=Zr.prototype.push=aw,Zr.prototype.has=cw;function Lt(n){var s=this.__data__=new er(n);this.size=s.size}function lw(){this.__data__=new er,this.size=0}function uw(n){var s=this.__data__,a=s.delete(n);return this.size=s.size,a}function hw(n){return this.__data__.get(n)}function dw(n){return this.__data__.has(n)}function pw(n,s){var a=this.__data__;if(a instanceof er){var u=a.__data__;if(!bi||u.length<o-1)return u.push([n,s]),this.size=++a.size,this;a=this.__data__=new tr(u)}return a.set(n,s),this.size=a.size,this}Lt.prototype.clear=lw,Lt.prototype.delete=uw,Lt.prototype.get=hw,Lt.prototype.has=dw,Lt.prototype.set=pw;function th(n,s){var a=re(n),u=!a&&tn(n),h=!a&&!u&&Rr(n),f=!a&&!u&&!h&&Ln(n),w=a||u||h||f,v=w?va(n.length,I1):[],_=v.length;for(var P in n)(s||ve.call(n,P))&&!(w&&(P=="length"||h&&(P=="offset"||P=="parent")||f&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||sr(P,_)))&&v.push(P);return v}function rh(n){var s=n.length;return s?n[Da(0,s-1)]:t}function fw(n,s){return Ys(tt(n),Jr(s,0,n.length))}function gw(n){return Ys(tt(n))}function xa(n,s,a){(a!==t&&!jt(n[s],a)||a===t&&!(s in n))&&rr(n,s,a)}function xi(n,s,a){var u=n[s];(!(ve.call(n,s)&&jt(u,a))||a===t&&!(s in n))&&rr(n,s,a)}function Ms(n,s){for(var a=n.length;a--;)if(jt(n[a][0],s))return a;return-1}function mw(n,s,a,u){return Sr(n,function(h,f,w){s(u,h,a(h),w)}),u}function nh(n,s){return n&&Vt(s,Le(s),n)}function ww(n,s){return n&&Vt(s,nt(s),n)}function rr(n,s,a){s=="__proto__"&&Ps?Ps(n,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):n[s]=a}function Oa(n,s){for(var a=-1,u=s.length,h=x(u),f=n==null;++a<u;)h[a]=f?t:oc(n,s[a]);return h}function Jr(n,s,a){return n===n&&(a!==t&&(n=n<=a?n:a),s!==t&&(n=n>=s?n:s)),n}function $t(n,s,a,u,h,f){var w,v=s&I,_=s&S,P=s&k;if(a&&(w=h?a(n,u,h,f):a(n)),w!==t)return w;if(!xe(n))return n;var T=re(n);if(T){if(w=sv(n),!v)return tt(n,w)}else{var N=Fe(n),W=N==fs||N==su;if(Rr(n))return Ch(n,v);if(N==Xt||N==In||W&&!h){if(w=_||W?{}:Bh(n),!v)return _?Gw(n,ww(w,n)):Kw(n,nh(w,n))}else{if(!_e[N])return h?n:{};w=ov(n,N,v)}}f||(f=new Lt);var K=f.get(n);if(K)return K;f.set(n,w),bd(n)?n.forEach(function(Q){w.add($t(Q,s,a,Q,n,f))}):yd(n)&&n.forEach(function(Q,ce){w.set(ce,$t(Q,s,a,ce,n,f))});var J=P?_?Ba:Va:_?nt:Le,se=T?t:J(n);return Ot(se||n,function(Q,ce){se&&(ce=Q,Q=n[ce]),xi(w,ce,$t(Q,s,a,ce,n,f))}),w}function vw(n){var s=Le(n);return function(a){return ih(a,n,s)}}function ih(n,s,a){var u=a.length;if(n==null)return!u;for(n=ye(n);u--;){var h=a[u],f=s[h],w=n[h];if(w===t&&!(h in n)||!f(w))return!1}return!0}function sh(n,s,a){if(typeof n!="function")throw new Ct(l);return Ni(function(){n.apply(t,a)},s)}function Oi(n,s,a,u){var h=-1,f=ys,w=!0,v=n.length,_=[],P=s.length;if(!v)return _;a&&(s=Ie(s,gt(a))),u?(f=da,w=!1):s.length>=o&&(f=yi,w=!1,s=new Zr(s));e:for(;++h<v;){var T=n[h],N=a==null?T:a(T);if(T=u||T!==0?T:0,w&&N===N){for(var W=P;W--;)if(s[W]===N)continue e;_.push(T)}else f(s,N,u)||_.push(T)}return _}var Sr=Nh(Ft),oh=Nh(Ra,!0);function yw(n,s){var a=!0;return Sr(n,function(u,h,f){return a=!!s(u,h,f),a}),a}function Ls(n,s,a){for(var u=-1,h=n.length;++u<h;){var f=n[u],w=s(f);if(w!=null&&(v===t?w===w&&!wt(w):a(w,v)))var v=w,_=f}return _}function _w(n,s,a,u){var h=n.length;for(a=ie(a),a<0&&(a=-a>h?0:h+a),u=u===t||u>h?h:ie(u),u<0&&(u+=h),u=a>u?0:Id(u);a<u;)n[a++]=s;return n}function ah(n,s){var a=[];return Sr(n,function(u,h,f){s(u,h,f)&&a.push(u)}),a}function We(n,s,a,u,h){var f=-1,w=n.length;for(a||(a=cv),h||(h=[]);++f<w;){var v=n[f];s>0&&a(v)?s>1?We(v,s-1,a,u,h):br(h,v):u||(h[h.length]=v)}return h}var Ca=Ah(),ch=Ah(!0);function Ft(n,s){return n&&Ca(n,s,Le)}function Ra(n,s){return n&&ch(n,s,Le)}function js(n,s){return _r(s,function(a){return or(n[a])})}function Qr(n,s){s=Or(s,n);for(var a=0,u=s.length;n!=null&&a<u;)n=n[Bt(s[a++])];return a&&a==u?n:t}function lh(n,s,a){var u=s(n);return re(n)?u:br(u,a(n))}function Ke(n){return n==null?n===t?Y0:K0:Gr&&Gr in ye(n)?rv(n):gv(n)}function $a(n,s){return n>s}function bw(n,s){return n!=null&&ve.call(n,s)}function Ew(n,s){return n!=null&&s in ye(n)}function Iw(n,s,a){return n>=ze(s,a)&&n<De(s,a)}function Pa(n,s,a){for(var u=a?da:ys,h=n[0].length,f=n.length,w=f,v=x(f),_=1/0,P=[];w--;){var T=n[w];w&&s&&(T=Ie(T,gt(s))),_=ze(T.length,_),v[w]=!a&&(s||h>=120&&T.length>=120)?new Zr(w&&T):t}T=n[0];var N=-1,W=v[0];e:for(;++N<h&&P.length<_;){var K=T[N],J=s?s(K):K;if(K=a||K!==0?K:0,!(W?yi(W,J):u(P,J,a))){for(w=f;--w;){var se=v[w];if(!(se?yi(se,J):u(n[w],J,a)))continue e}W&&W.push(J),P.push(K)}}return P}function Sw(n,s,a,u){return Ft(n,function(h,f,w){s(u,a(h),f,w)}),u}function Ci(n,s,a){s=Or(s,n),n=Zh(n,s);var u=n==null?n:n[Bt(Tt(s))];return u==null?t:ft(u,n,a)}function uh(n){return Ce(n)&&Ke(n)==In}function xw(n){return Ce(n)&&Ke(n)==vi}function Ow(n){return Ce(n)&&Ke(n)==pi}function Ri(n,s,a,u,h){return n===s?!0:n==null||s==null||!Ce(n)&&!Ce(s)?n!==n&&s!==s:Cw(n,s,a,u,Ri,h)}function Cw(n,s,a,u,h,f){var w=re(n),v=re(s),_=w?ds:Fe(n),P=v?ds:Fe(s);_=_==In?Xt:_,P=P==In?Xt:P;var T=_==Xt,N=P==Xt,W=_==P;if(W&&Rr(n)){if(!Rr(s))return!1;w=!0,T=!1}if(W&&!T)return f||(f=new Lt),w||Ln(n)?zh(n,s,a,u,h,f):ev(n,s,_,a,u,h,f);if(!(a&A)){var K=T&&ve.call(n,"__wrapped__"),J=N&&ve.call(s,"__wrapped__");if(K||J){var se=K?n.value():n,Q=J?s.value():s;return f||(f=new Lt),h(se,Q,a,u,f)}}return W?(f||(f=new Lt),tv(n,s,a,u,h,f)):!1}function Rw(n){return Ce(n)&&Fe(n)==kt}function Ta(n,s,a,u){var h=a.length,f=h,w=!u;if(n==null)return!f;for(n=ye(n);h--;){var v=a[h];if(w&&v[2]?v[1]!==n[v[0]]:!(v[0]in n))return!1}for(;++h<f;){v=a[h];var _=v[0],P=n[_],T=v[1];if(w&&v[2]){if(P===t&&!(_ in n))return!1}else{var N=new Lt;if(u)var W=u(P,T,_,n,s,N);if(!(W===t?Ri(T,P,A|M,u,N):W))return!1}}return!0}function hh(n){if(!xe(n)||uv(n))return!1;var s=or(n)?R1:vm;return s.test(en(n))}function $w(n){return Ce(n)&&Ke(n)==gi}function Pw(n){return Ce(n)&&Fe(n)==Dt}function Tw(n){return Ce(n)&&to(n.length)&&!!Ee[Ke(n)]}function dh(n){return typeof n=="function"?n:n==null?it:typeof n=="object"?re(n)?gh(n[0],n[1]):fh(n):kd(n)}function Na(n){if(!Ti(n))return k1(n);var s=[];for(var a in ye(n))ve.call(n,a)&&a!="constructor"&&s.push(a);return s}function Nw(n){if(!xe(n))return fv(n);var s=Ti(n),a=[];for(var u in n)u=="constructor"&&(s||!ve.call(n,u))||a.push(u);return a}function Aa(n,s){return n<s}function ph(n,s){var a=-1,u=rt(n)?x(n.length):[];return Sr(n,function(h,f,w){u[++a]=s(h,f,w)}),u}function fh(n){var s=Ga(n);return s.length==1&&s[0][2]?Gh(s[0][0],s[0][1]):function(a){return a===n||Ta(a,n,s)}}function gh(n,s){return Za(n)&&Kh(s)?Gh(Bt(n),s):function(a){var u=oc(a,n);return u===t&&u===s?ac(a,n):Ri(s,u,A|M)}}function Us(n,s,a,u,h){n!==s&&Ca(s,function(f,w){if(h||(h=new Lt),xe(f))Aw(n,s,w,a,Us,u,h);else{var v=u?u(Qa(n,w),f,w+"",n,s,h):t;v===t&&(v=f),xa(n,w,v)}},nt)}function Aw(n,s,a,u,h,f,w){var v=Qa(n,a),_=Qa(s,a),P=w.get(_);if(P){xa(n,a,P);return}var T=f?f(v,_,a+"",n,s,w):t,N=T===t;if(N){var W=re(_),K=!W&&Rr(_),J=!W&&!K&&Ln(_);T=_,W||K||J?re(v)?T=v:Pe(v)?T=tt(v):K?(N=!1,T=Ch(_,!0)):J?(N=!1,T=Rh(_,!0)):T=[]:Ai(_)||tn(_)?(T=v,tn(v)?T=Sd(v):(!xe(v)||or(v))&&(T=Bh(_))):N=!1}N&&(w.set(_,T),h(T,_,u,f,w),w.delete(_)),xa(n,a,T)}function mh(n,s){var a=n.length;if(a)return s+=s<0?a:0,sr(s,a)?n[s]:t}function wh(n,s,a){s.length?s=Ie(s,function(f){return re(f)?function(w){return Qr(w,f.length===1?f[0]:f)}:f}):s=[it];var u=-1;s=Ie(s,gt(Z()));var h=ph(n,function(f,w,v){var _=Ie(s,function(P){return P(f)});return{criteria:_,index:++u,value:f}});return o1(h,function(f,w){return Bw(f,w,a)})}function kw(n,s){return vh(n,s,function(a,u){return ac(n,u)})}function vh(n,s,a){for(var u=-1,h=s.length,f={};++u<h;){var w=s[u],v=Qr(n,w);a(v,w)&&$i(f,Or(w,n),v)}return f}function Dw(n){return function(s){return Qr(s,n)}}function ka(n,s,a,u){var h=u?s1:On,f=-1,w=s.length,v=n;for(n===s&&(s=tt(s)),a&&(v=Ie(n,gt(a)));++f<w;)for(var _=0,P=s[f],T=a?a(P):P;(_=h(v,T,_,u))>-1;)v!==n&&$s.call(v,_,1),$s.call(n,_,1);return n}function yh(n,s){for(var a=n?s.length:0,u=a-1;a--;){var h=s[a];if(a==u||h!==f){var f=h;sr(h)?$s.call(n,h,1):ja(n,h)}}return n}function Da(n,s){return n+Ns(Xu()*(s-n+1))}function Mw(n,s,a,u){for(var h=-1,f=De(Ts((s-n)/(a||1)),0),w=x(f);f--;)w[u?f:++h]=n,n+=a;return w}function Ma(n,s){var a="";if(!n||s<1||s>Ht)return a;do s%2&&(a+=n),s=Ns(s/2),s&&(n+=n);while(s);return a}function ae(n,s){return Xa(Yh(n,s,it),n+"")}function Lw(n){return rh(jn(n))}function jw(n,s){var a=jn(n);return Ys(a,Jr(s,0,a.length))}function $i(n,s,a,u){if(!xe(n))return n;s=Or(s,n);for(var h=-1,f=s.length,w=f-1,v=n;v!=null&&++h<f;){var _=Bt(s[h]),P=a;if(_==="__proto__"||_==="constructor"||_==="prototype")return n;if(h!=w){var T=v[_];P=u?u(T,_,v):t,P===t&&(P=xe(T)?T:sr(s[h+1])?[]:{})}xi(v,_,P),v=v[_]}return n}var _h=As?function(n,s){return As.set(n,s),n}:it,Uw=Ps?function(n,s){return Ps(n,"toString",{configurable:!0,enumerable:!1,value:lc(s),writable:!0})}:it;function qw(n){return Ys(jn(n))}function Pt(n,s,a){var u=-1,h=n.length;s<0&&(s=-s>h?0:h+s),a=a>h?h:a,a<0&&(a+=h),h=s>a?0:a-s>>>0,s>>>=0;for(var f=x(h);++u<h;)f[u]=n[u+s];return f}function Ww(n,s){var a;return Sr(n,function(u,h,f){return a=s(u,h,f),!a}),!!a}function qs(n,s,a){var u=0,h=n==null?u:n.length;if(typeof s=="number"&&s===s&&h<=z0){for(;u<h;){var f=u+h>>>1,w=n[f];w!==null&&!wt(w)&&(a?w<=s:w<s)?u=f+1:h=f}return h}return La(n,s,it,a)}function La(n,s,a,u){var h=0,f=n==null?0:n.length;if(f===0)return 0;s=a(s);for(var w=s!==s,v=s===null,_=wt(s),P=s===t;h<f;){var T=Ns((h+f)/2),N=a(n[T]),W=N!==t,K=N===null,J=N===N,se=wt(N);if(w)var Q=u||J;else P?Q=J&&(u||W):v?Q=J&&W&&(u||!K):_?Q=J&&W&&!K&&(u||!se):K||se?Q=!1:Q=u?N<=s:N<s;Q?h=T+1:f=T}return ze(f,H0)}function bh(n,s){for(var a=-1,u=n.length,h=0,f=[];++a<u;){var w=n[a],v=s?s(w):w;if(!a||!jt(v,_)){var _=v;f[h++]=w===0?0:w}}return f}function Eh(n){return typeof n=="number"?n:wt(n)?Br:+n}function mt(n){if(typeof n=="string")return n;if(re(n))return Ie(n,mt)+"";if(wt(n))return eh?eh.call(n):"";var s=n+"";return s=="0"&&1/n==-Qt?"-0":s}function xr(n,s,a){var u=-1,h=ys,f=n.length,w=!0,v=[],_=v;if(a)w=!1,h=da;else if(f>=o){var P=s?null:Qw(n);if(P)return bs(P);w=!1,h=yi,_=new Zr}else _=s?[]:v;e:for(;++u<f;){var T=n[u],N=s?s(T):T;if(T=a||T!==0?T:0,w&&N===N){for(var W=_.length;W--;)if(_[W]===N)continue e;s&&_.push(N),v.push(T)}else h(_,N,a)||(_!==v&&_.push(N),v.push(T))}return v}function ja(n,s){return s=Or(s,n),n=Zh(n,s),n==null||delete n[Bt(Tt(s))]}function Ih(n,s,a,u){return $i(n,s,a(Qr(n,s)),u)}function Ws(n,s,a,u){for(var h=n.length,f=u?h:-1;(u?f--:++f<h)&&s(n[f],f,n););return a?Pt(n,u?0:f,u?f+1:h):Pt(n,u?f+1:0,u?h:f)}function Sh(n,s){var a=n;return a instanceof le&&(a=a.value()),pa(s,function(u,h){return h.func.apply(h.thisArg,br([u],h.args))},a)}function Ua(n,s,a){var u=n.length;if(u<2)return u?xr(n[0]):[];for(var h=-1,f=x(u);++h<u;)for(var w=n[h],v=-1;++v<u;)v!=h&&(f[h]=Oi(f[h]||w,n[v],s,a));return xr(We(f,1),s,a)}function xh(n,s,a){for(var u=-1,h=n.length,f=s.length,w={};++u<h;){var v=u<f?s[u]:t;a(w,n[u],v)}return w}function qa(n){return Pe(n)?n:[]}function Wa(n){return typeof n=="function"?n:it}function Or(n,s){return re(n)?n:Za(n,s)?[n]:ed(me(n))}var Hw=ae;function Cr(n,s,a){var u=n.length;return a=a===t?u:a,!s&&a>=u?n:Pt(n,s,a)}var Oh=$1||function(n){return qe.clearTimeout(n)};function Ch(n,s){if(s)return n.slice();var a=n.length,u=Gu?Gu(a):new n.constructor(a);return n.copy(u),u}function Ha(n){var s=new n.constructor(n.byteLength);return new Cs(s).set(new Cs(n)),s}function zw(n,s){var a=s?Ha(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.byteLength)}function Fw(n){var s=new n.constructor(n.source,uu.exec(n));return s.lastIndex=n.lastIndex,s}function Vw(n){return Si?ye(Si.call(n)):{}}function Rh(n,s){var a=s?Ha(n.buffer):n.buffer;return new n.constructor(a,n.byteOffset,n.length)}function $h(n,s){if(n!==s){var a=n!==t,u=n===null,h=n===n,f=wt(n),w=s!==t,v=s===null,_=s===s,P=wt(s);if(!v&&!P&&!f&&n>s||f&&w&&_&&!v&&!P||u&&w&&_||!a&&_||!h)return 1;if(!u&&!f&&!P&&n<s||P&&a&&h&&!u&&!f||v&&a&&h||!w&&h||!_)return-1}return 0}function Bw(n,s,a){for(var u=-1,h=n.criteria,f=s.criteria,w=h.length,v=a.length;++u<w;){var _=$h(h[u],f[u]);if(_){if(u>=v)return _;var P=a[u];return _*(P=="desc"?-1:1)}}return n.index-s.index}function Ph(n,s,a,u){for(var h=-1,f=n.length,w=a.length,v=-1,_=s.length,P=De(f-w,0),T=x(_+P),N=!u;++v<_;)T[v]=s[v];for(;++h<w;)(N||h<f)&&(T[a[h]]=n[h]);for(;P--;)T[v++]=n[h++];return T}function Th(n,s,a,u){for(var h=-1,f=n.length,w=-1,v=a.length,_=-1,P=s.length,T=De(f-v,0),N=x(T+P),W=!u;++h<T;)N[h]=n[h];for(var K=h;++_<P;)N[K+_]=s[_];for(;++w<v;)(W||h<f)&&(N[K+a[w]]=n[h++]);return N}function tt(n,s){var a=-1,u=n.length;for(s||(s=x(u));++a<u;)s[a]=n[a];return s}function Vt(n,s,a,u){var h=!a;a||(a={});for(var f=-1,w=s.length;++f<w;){var v=s[f],_=u?u(a[v],n[v],v,a,n):t;_===t&&(_=n[v]),h?rr(a,v,_):xi(a,v,_)}return a}function Kw(n,s){return Vt(n,Ya(n),s)}function Gw(n,s){return Vt(n,Fh(n),s)}function Hs(n,s){return function(a,u){var h=re(a)?Xm:mw,f=s?s():{};return h(a,n,Z(u,2),f)}}function kn(n){return ae(function(s,a){var u=-1,h=a.length,f=h>1?a[h-1]:t,w=h>2?a[2]:t;for(f=n.length>3&&typeof f=="function"?(h--,f):t,w&&Ge(a[0],a[1],w)&&(f=h<3?t:f,h=1),s=ye(s);++u<h;){var v=a[u];v&&n(s,v,u,f)}return s})}function Nh(n,s){return function(a,u){if(a==null)return a;if(!rt(a))return n(a,u);for(var h=a.length,f=s?h:-1,w=ye(a);(s?f--:++f<h)&&u(w[f],f,w)!==!1;);return a}}function Ah(n){return function(s,a,u){for(var h=-1,f=ye(s),w=u(s),v=w.length;v--;){var _=w[n?v:++h];if(a(f[_],_,f)===!1)break}return s}}function Yw(n,s,a){var u=s&q,h=Pi(n);function f(){var w=this&&this!==qe&&this instanceof f?h:n;return w.apply(u?a:this,arguments)}return f}function kh(n){return function(s){s=me(s);var a=Cn(s)?Mt(s):t,u=a?a[0]:s.charAt(0),h=a?Cr(a,1).join(""):s.slice(1);return u[n]()+h}}function Dn(n){return function(s){return pa(Nd(Td(s).replace(Um,"")),n,"")}}function Pi(n){return function(){var s=arguments;switch(s.length){case 0:return new n;case 1:return new n(s[0]);case 2:return new n(s[0],s[1]);case 3:return new n(s[0],s[1],s[2]);case 4:return new n(s[0],s[1],s[2],s[3]);case 5:return new n(s[0],s[1],s[2],s[3],s[4]);case 6:return new n(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new n(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var a=An(n.prototype),u=n.apply(a,s);return xe(u)?u:a}}function Zw(n,s,a){var u=Pi(n);function h(){for(var f=arguments.length,w=x(f),v=f,_=Mn(h);v--;)w[v]=arguments[v];var P=f<3&&w[0]!==_&&w[f-1]!==_?[]:Er(w,_);if(f-=P.length,f<a)return Uh(n,s,zs,h.placeholder,t,w,P,t,t,a-f);var T=this&&this!==qe&&this instanceof h?u:n;return ft(T,this,w)}return h}function Dh(n){return function(s,a,u){var h=ye(s);if(!rt(s)){var f=Z(a,3);s=Le(s),a=function(v){return f(h[v],v,h)}}var w=n(s,a,u);return w>-1?h[f?s[w]:w]:t}}function Mh(n){return ir(function(s){var a=s.length,u=a,h=Rt.prototype.thru;for(n&&s.reverse();u--;){var f=s[u];if(typeof f!="function")throw new Ct(l);if(h&&!w&&Ks(f)=="wrapper")var w=new Rt([],!0)}for(u=w?u:a;++u<a;){f=s[u];var v=Ks(f),_=v=="wrapper"?Ka(f):t;_&&Ja(_[0])&&_[1]==(V|O|R|F)&&!_[4].length&&_[9]==1?w=w[Ks(_[0])].apply(w,_[3]):w=f.length==1&&Ja(f)?w[v]():w.thru(f)}return function(){var P=arguments,T=P[0];if(w&&P.length==1&&re(T))return w.plant(T).value();for(var N=0,W=a?s[N].apply(this,P):T;++N<a;)W=s[N].call(this,W);return W}})}function zs(n,s,a,u,h,f,w,v,_,P){var T=s&V,N=s&q,W=s&L,K=s&(O|C),J=s&B,se=W?t:Pi(n);function Q(){for(var ce=arguments.length,ue=x(ce),vt=ce;vt--;)ue[vt]=arguments[vt];if(K)var Ye=Mn(Q),yt=c1(ue,Ye);if(u&&(ue=Ph(ue,u,h,K)),f&&(ue=Th(ue,f,w,K)),ce-=yt,K&&ce<P){var Te=Er(ue,Ye);return Uh(n,s,zs,Q.placeholder,a,ue,Te,v,_,P-ce)}var Ut=N?a:this,cr=W?Ut[n]:n;return ce=ue.length,v?ue=mv(ue,v):J&&ce>1&&ue.reverse(),T&&_<ce&&(ue.length=_),this&&this!==qe&&this instanceof Q&&(cr=se||Pi(cr)),cr.apply(Ut,ue)}return Q}function Lh(n,s){return function(a,u){return Sw(a,n,s(u),{})}}function Fs(n,s){return function(a,u){var h;if(a===t&&u===t)return s;if(a!==t&&(h=a),u!==t){if(h===t)return u;typeof a=="string"||typeof u=="string"?(a=mt(a),u=mt(u)):(a=Eh(a),u=Eh(u)),h=n(a,u)}return h}}function za(n){return ir(function(s){return s=Ie(s,gt(Z())),ae(function(a){var u=this;return n(s,function(h){return ft(h,u,a)})})})}function Vs(n,s){s=s===t?" ":mt(s);var a=s.length;if(a<2)return a?Ma(s,n):s;var u=Ma(s,Ts(n/Rn(s)));return Cn(s)?Cr(Mt(u),0,n).join(""):u.slice(0,n)}function Jw(n,s,a,u){var h=s&q,f=Pi(n);function w(){for(var v=-1,_=arguments.length,P=-1,T=u.length,N=x(T+_),W=this&&this!==qe&&this instanceof w?f:n;++P<T;)N[P]=u[P];for(;_--;)N[P++]=arguments[++v];return ft(W,h?a:this,N)}return w}function jh(n){return function(s,a,u){return u&&typeof u!="number"&&Ge(s,a,u)&&(a=u=t),s=ar(s),a===t?(a=s,s=0):a=ar(a),u=u===t?s<a?1:-1:ar(u),Mw(s,a,u,n)}}function Bs(n){return function(s,a){return typeof s=="string"&&typeof a=="string"||(s=Nt(s),a=Nt(a)),n(s,a)}}function Uh(n,s,a,u,h,f,w,v,_,P){var T=s&O,N=T?w:t,W=T?t:w,K=T?f:t,J=T?t:f;s|=T?R:D,s&=~(T?D:R),s&E||(s&=~(q|L));var se=[n,s,h,K,N,J,W,v,_,P],Q=a.apply(t,se);return Ja(n)&&Jh(Q,se),Q.placeholder=u,Qh(Q,n,s)}function Fa(n){var s=ke[n];return function(a,u){if(a=Nt(a),u=u==null?0:ze(ie(u),292),u&&Qu(a)){var h=(me(a)+"e").split("e"),f=s(h[0]+"e"+(+h[1]+u));return h=(me(f)+"e").split("e"),+(h[0]+"e"+(+h[1]-u))}return s(a)}}var Qw=Tn&&1/bs(new Tn([,-0]))[1]==Qt?function(n){return new Tn(n)}:dc;function qh(n){return function(s){var a=Fe(s);return a==kt?_a(s):a==Dt?g1(s):a1(s,n(s))}}function nr(n,s,a,u,h,f,w,v){var _=s&L;if(!_&&typeof n!="function")throw new Ct(l);var P=u?u.length:0;if(P||(s&=~(R|D),u=h=t),w=w===t?w:De(ie(w),0),v=v===t?v:ie(v),P-=h?h.length:0,s&D){var T=u,N=h;u=h=t}var W=_?t:Ka(n),K=[n,s,a,u,h,T,N,f,w,v];if(W&&pv(K,W),n=K[0],s=K[1],a=K[2],u=K[3],h=K[4],v=K[9]=K[9]===t?_?0:n.length:De(K[9]-P,0),!v&&s&(O|C)&&(s&=~(O|C)),!s||s==q)var J=Yw(n,s,a);else s==O||s==C?J=Zw(n,s,v):(s==R||s==(q|R))&&!h.length?J=Jw(n,s,a,u):J=zs.apply(t,K);var se=W?_h:Jh;return Qh(se(J,K),n,s)}function Wh(n,s,a,u){return n===t||jt(n,Pn[a])&&!ve.call(u,a)?s:n}function Hh(n,s,a,u,h,f){return xe(n)&&xe(s)&&(f.set(s,n),Us(n,s,t,Hh,f),f.delete(s)),n}function Xw(n){return Ai(n)?t:n}function zh(n,s,a,u,h,f){var w=a&A,v=n.length,_=s.length;if(v!=_&&!(w&&_>v))return!1;var P=f.get(n),T=f.get(s);if(P&&T)return P==s&&T==n;var N=-1,W=!0,K=a&M?new Zr:t;for(f.set(n,s),f.set(s,n);++N<v;){var J=n[N],se=s[N];if(u)var Q=w?u(se,J,N,s,n,f):u(J,se,N,n,s,f);if(Q!==t){if(Q)continue;W=!1;break}if(K){if(!fa(s,function(ce,ue){if(!yi(K,ue)&&(J===ce||h(J,ce,a,u,f)))return K.push(ue)})){W=!1;break}}else if(!(J===se||h(J,se,a,u,f))){W=!1;break}}return f.delete(n),f.delete(s),W}function ev(n,s,a,u,h,f,w){switch(a){case Sn:if(n.byteLength!=s.byteLength||n.byteOffset!=s.byteOffset)return!1;n=n.buffer,s=s.buffer;case vi:return!(n.byteLength!=s.byteLength||!f(new Cs(n),new Cs(s)));case di:case pi:case fi:return jt(+n,+s);case ps:return n.name==s.name&&n.message==s.message;case gi:case mi:return n==s+"";case kt:var v=_a;case Dt:var _=u&A;if(v||(v=bs),n.size!=s.size&&!_)return!1;var P=w.get(n);if(P)return P==s;u|=M,w.set(n,s);var T=zh(v(n),v(s),u,h,f,w);return w.delete(n),T;case gs:if(Si)return Si.call(n)==Si.call(s)}return!1}function tv(n,s,a,u,h,f){var w=a&A,v=Va(n),_=v.length,P=Va(s),T=P.length;if(_!=T&&!w)return!1;for(var N=_;N--;){var W=v[N];if(!(w?W in s:ve.call(s,W)))return!1}var K=f.get(n),J=f.get(s);if(K&&J)return K==s&&J==n;var se=!0;f.set(n,s),f.set(s,n);for(var Q=w;++N<_;){W=v[N];var ce=n[W],ue=s[W];if(u)var vt=w?u(ue,ce,W,s,n,f):u(ce,ue,W,n,s,f);if(!(vt===t?ce===ue||h(ce,ue,a,u,f):vt)){se=!1;break}Q||(Q=W=="constructor")}if(se&&!Q){var Ye=n.constructor,yt=s.constructor;Ye!=yt&&"constructor"in n&&"constructor"in s&&!(typeof Ye=="function"&&Ye instanceof Ye&&typeof yt=="function"&&yt instanceof yt)&&(se=!1)}return f.delete(n),f.delete(s),se}function ir(n){return Xa(Yh(n,t,id),n+"")}function Va(n){return lh(n,Le,Ya)}function Ba(n){return lh(n,nt,Fh)}var Ka=As?function(n){return As.get(n)}:dc;function Ks(n){for(var s=n.name+"",a=Nn[s],u=ve.call(Nn,s)?a.length:0;u--;){var h=a[u],f=h.func;if(f==null||f==n)return h.name}return s}function Mn(n){var s=ve.call(p,"placeholder")?p:n;return s.placeholder}function Z(){var n=p.iteratee||uc;return n=n===uc?dh:n,arguments.length?n(arguments[0],arguments[1]):n}function Gs(n,s){var a=n.__data__;return lv(s)?a[typeof s=="string"?"string":"hash"]:a.map}function Ga(n){for(var s=Le(n),a=s.length;a--;){var u=s[a],h=n[u];s[a]=[u,h,Kh(h)]}return s}function Xr(n,s){var a=d1(n,s);return hh(a)?a:t}function rv(n){var s=ve.call(n,Gr),a=n[Gr];try{n[Gr]=t;var u=!0}catch{}var h=xs.call(n);return u&&(s?n[Gr]=a:delete n[Gr]),h}var Ya=Ea?function(n){return n==null?[]:(n=ye(n),_r(Ea(n),function(s){return Zu.call(n,s)}))}:pc,Fh=Ea?function(n){for(var s=[];n;)br(s,Ya(n)),n=Rs(n);return s}:pc,Fe=Ke;(Ia&&Fe(new Ia(new ArrayBuffer(1)))!=Sn||bi&&Fe(new bi)!=kt||Sa&&Fe(Sa.resolve())!=ou||Tn&&Fe(new Tn)!=Dt||Ei&&Fe(new Ei)!=wi)&&(Fe=function(n){var s=Ke(n),a=s==Xt?n.constructor:t,u=a?en(a):"";if(u)switch(u){case j1:return Sn;case U1:return kt;case q1:return ou;case W1:return Dt;case H1:return wi}return s});function nv(n,s,a){for(var u=-1,h=a.length;++u<h;){var f=a[u],w=f.size;switch(f.type){case"drop":n+=w;break;case"dropRight":s-=w;break;case"take":s=ze(s,n+w);break;case"takeRight":n=De(n,s-w);break}}return{start:n,end:s}}function iv(n){var s=n.match(um);return s?s[1].split(hm):[]}function Vh(n,s,a){s=Or(s,n);for(var u=-1,h=s.length,f=!1;++u<h;){var w=Bt(s[u]);if(!(f=n!=null&&a(n,w)))break;n=n[w]}return f||++u!=h?f:(h=n==null?0:n.length,!!h&&to(h)&&sr(w,h)&&(re(n)||tn(n)))}function sv(n){var s=n.length,a=new n.constructor(s);return s&&typeof n[0]=="string"&&ve.call(n,"index")&&(a.index=n.index,a.input=n.input),a}function Bh(n){return typeof n.constructor=="function"&&!Ti(n)?An(Rs(n)):{}}function ov(n,s,a){var u=n.constructor;switch(s){case vi:return Ha(n);case di:case pi:return new u(+n);case Sn:return zw(n,a);case Go:case Yo:case Zo:case Jo:case Qo:case Xo:case ea:case ta:case ra:return Rh(n,a);case kt:return new u;case fi:case mi:return new u(n);case gi:return Fw(n);case Dt:return new u;case gs:return Vw(n)}}function av(n,s){var a=s.length;if(!a)return n;var u=a-1;return s[u]=(a>1?"& ":"")+s[u],s=s.join(a>2?", ":" "),n.replace(lm,`{
/* [wrapped with `+s+`] */
`)}function cv(n){return re(n)||tn(n)||!!(Ju&&n&&n[Ju])}function sr(n,s){var a=typeof n;return s=s??Ht,!!s&&(a=="number"||a!="symbol"&&_m.test(n))&&n>-1&&n%1==0&&n<s}function Ge(n,s,a){if(!xe(a))return!1;var u=typeof s;return(u=="number"?rt(a)&&sr(s,a.length):u=="string"&&s in a)?jt(a[s],n):!1}function Za(n,s){if(re(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||wt(n)?!0:sm.test(n)||!im.test(n)||s!=null&&n in ye(s)}function lv(n){var s=typeof n;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?n!=="__proto__":n===null}function Ja(n){var s=Ks(n),a=p[s];if(typeof a!="function"||!(s in le.prototype))return!1;if(n===a)return!0;var u=Ka(a);return!!u&&n===u[0]}function uv(n){return!!Ku&&Ku in n}var hv=Is?or:fc;function Ti(n){var s=n&&n.constructor,a=typeof s=="function"&&s.prototype||Pn;return n===a}function Kh(n){return n===n&&!xe(n)}function Gh(n,s){return function(a){return a==null?!1:a[n]===s&&(s!==t||n in ye(a))}}function dv(n){var s=Xs(n,function(u){return a.size===g&&a.clear(),u}),a=s.cache;return s}function pv(n,s){var a=n[1],u=s[1],h=a|u,f=h<(q|L|V),w=u==V&&a==O||u==V&&a==F&&n[7].length<=s[8]||u==(V|F)&&s[7].length<=s[8]&&a==O;if(!(f||w))return n;u&q&&(n[2]=s[2],h|=a&q?0:E);var v=s[3];if(v){var _=n[3];n[3]=_?Ph(_,v,s[4]):v,n[4]=_?Er(n[3],b):s[4]}return v=s[5],v&&(_=n[5],n[5]=_?Th(_,v,s[6]):v,n[6]=_?Er(n[5],b):s[6]),v=s[7],v&&(n[7]=v),u&V&&(n[8]=n[8]==null?s[8]:ze(n[8],s[8])),n[9]==null&&(n[9]=s[9]),n[0]=s[0],n[1]=h,n}function fv(n){var s=[];if(n!=null)for(var a in ye(n))s.push(a);return s}function gv(n){return xs.call(n)}function Yh(n,s,a){return s=De(s===t?n.length-1:s,0),function(){for(var u=arguments,h=-1,f=De(u.length-s,0),w=x(f);++h<f;)w[h]=u[s+h];h=-1;for(var v=x(s+1);++h<s;)v[h]=u[h];return v[s]=a(w),ft(n,this,v)}}function Zh(n,s){return s.length<2?n:Qr(n,Pt(s,0,-1))}function mv(n,s){for(var a=n.length,u=ze(s.length,a),h=tt(n);u--;){var f=s[u];n[u]=sr(f,a)?h[f]:t}return n}function Qa(n,s){if(!(s==="constructor"&&typeof n[s]=="function")&&s!="__proto__")return n[s]}var Jh=Xh(_h),Ni=T1||function(n,s){return qe.setTimeout(n,s)},Xa=Xh(Uw);function Qh(n,s,a){var u=s+"";return Xa(n,av(u,wv(iv(u),a)))}function Xh(n){var s=0,a=0;return function(){var u=D1(),h=It-(u-a);if(a=u,h>0){if(++s>=Me)return arguments[0]}else s=0;return n.apply(t,arguments)}}function Ys(n,s){var a=-1,u=n.length,h=u-1;for(s=s===t?u:s;++a<s;){var f=Da(a,h),w=n[f];n[f]=n[a],n[a]=w}return n.length=s,n}var ed=dv(function(n){var s=[];return n.charCodeAt(0)===46&&s.push(""),n.replace(om,function(a,u,h,f){s.push(h?f.replace(fm,"$1"):u||a)}),s});function Bt(n){if(typeof n=="string"||wt(n))return n;var s=n+"";return s=="0"&&1/n==-Qt?"-0":s}function en(n){if(n!=null){try{return Ss.call(n)}catch{}try{return n+""}catch{}}return""}function wv(n,s){return Ot(F0,function(a){var u="_."+a[0];s&a[1]&&!ys(n,u)&&n.push(u)}),n.sort()}function td(n){if(n instanceof le)return n.clone();var s=new Rt(n.__wrapped__,n.__chain__);return s.__actions__=tt(n.__actions__),s.__index__=n.__index__,s.__values__=n.__values__,s}function vv(n,s,a){(a?Ge(n,s,a):s===t)?s=1:s=De(ie(s),0);var u=n==null?0:n.length;if(!u||s<1)return[];for(var h=0,f=0,w=x(Ts(u/s));h<u;)w[f++]=Pt(n,h,h+=s);return w}function yv(n){for(var s=-1,a=n==null?0:n.length,u=0,h=[];++s<a;){var f=n[s];f&&(h[u++]=f)}return h}function _v(){var n=arguments.length;if(!n)return[];for(var s=x(n-1),a=arguments[0],u=n;u--;)s[u-1]=arguments[u];return br(re(a)?tt(a):[a],We(s,1))}var bv=ae(function(n,s){return Pe(n)?Oi(n,We(s,1,Pe,!0)):[]}),Ev=ae(function(n,s){var a=Tt(s);return Pe(a)&&(a=t),Pe(n)?Oi(n,We(s,1,Pe,!0),Z(a,2)):[]}),Iv=ae(function(n,s){var a=Tt(s);return Pe(a)&&(a=t),Pe(n)?Oi(n,We(s,1,Pe,!0),t,a):[]});function Sv(n,s,a){var u=n==null?0:n.length;return u?(s=a||s===t?1:ie(s),Pt(n,s<0?0:s,u)):[]}function xv(n,s,a){var u=n==null?0:n.length;return u?(s=a||s===t?1:ie(s),s=u-s,Pt(n,0,s<0?0:s)):[]}function Ov(n,s){return n&&n.length?Ws(n,Z(s,3),!0,!0):[]}function Cv(n,s){return n&&n.length?Ws(n,Z(s,3),!0):[]}function Rv(n,s,a,u){var h=n==null?0:n.length;return h?(a&&typeof a!="number"&&Ge(n,s,a)&&(a=0,u=h),_w(n,s,a,u)):[]}function rd(n,s,a){var u=n==null?0:n.length;if(!u)return-1;var h=a==null?0:ie(a);return h<0&&(h=De(u+h,0)),_s(n,Z(s,3),h)}function nd(n,s,a){var u=n==null?0:n.length;if(!u)return-1;var h=u-1;return a!==t&&(h=ie(a),h=a<0?De(u+h,0):ze(h,u-1)),_s(n,Z(s,3),h,!0)}function id(n){var s=n==null?0:n.length;return s?We(n,1):[]}function $v(n){var s=n==null?0:n.length;return s?We(n,Qt):[]}function Pv(n,s){var a=n==null?0:n.length;return a?(s=s===t?1:ie(s),We(n,s)):[]}function Tv(n){for(var s=-1,a=n==null?0:n.length,u={};++s<a;){var h=n[s];u[h[0]]=h[1]}return u}function sd(n){return n&&n.length?n[0]:t}function Nv(n,s,a){var u=n==null?0:n.length;if(!u)return-1;var h=a==null?0:ie(a);return h<0&&(h=De(u+h,0)),On(n,s,h)}function Av(n){var s=n==null?0:n.length;return s?Pt(n,0,-1):[]}var kv=ae(function(n){var s=Ie(n,qa);return s.length&&s[0]===n[0]?Pa(s):[]}),Dv=ae(function(n){var s=Tt(n),a=Ie(n,qa);return s===Tt(a)?s=t:a.pop(),a.length&&a[0]===n[0]?Pa(a,Z(s,2)):[]}),Mv=ae(function(n){var s=Tt(n),a=Ie(n,qa);return s=typeof s=="function"?s:t,s&&a.pop(),a.length&&a[0]===n[0]?Pa(a,t,s):[]});function Lv(n,s){return n==null?"":A1.call(n,s)}function Tt(n){var s=n==null?0:n.length;return s?n[s-1]:t}function jv(n,s,a){var u=n==null?0:n.length;if(!u)return-1;var h=u;return a!==t&&(h=ie(a),h=h<0?De(u+h,0):ze(h,u-1)),s===s?w1(n,s,h):_s(n,Uu,h,!0)}function Uv(n,s){return n&&n.length?mh(n,ie(s)):t}var qv=ae(od);function od(n,s){return n&&n.length&&s&&s.length?ka(n,s):n}function Wv(n,s,a){return n&&n.length&&s&&s.length?ka(n,s,Z(a,2)):n}function Hv(n,s,a){return n&&n.length&&s&&s.length?ka(n,s,t,a):n}var zv=ir(function(n,s){var a=n==null?0:n.length,u=Oa(n,s);return yh(n,Ie(s,function(h){return sr(h,a)?+h:h}).sort($h)),u});function Fv(n,s){var a=[];if(!(n&&n.length))return a;var u=-1,h=[],f=n.length;for(s=Z(s,3);++u<f;){var w=n[u];s(w,u,n)&&(a.push(w),h.push(u))}return yh(n,h),a}function ec(n){return n==null?n:L1.call(n)}function Vv(n,s,a){var u=n==null?0:n.length;return u?(a&&typeof a!="number"&&Ge(n,s,a)?(s=0,a=u):(s=s==null?0:ie(s),a=a===t?u:ie(a)),Pt(n,s,a)):[]}function Bv(n,s){return qs(n,s)}function Kv(n,s,a){return La(n,s,Z(a,2))}function Gv(n,s){var a=n==null?0:n.length;if(a){var u=qs(n,s);if(u<a&&jt(n[u],s))return u}return-1}function Yv(n,s){return qs(n,s,!0)}function Zv(n,s,a){return La(n,s,Z(a,2),!0)}function Jv(n,s){var a=n==null?0:n.length;if(a){var u=qs(n,s,!0)-1;if(jt(n[u],s))return u}return-1}function Qv(n){return n&&n.length?bh(n):[]}function Xv(n,s){return n&&n.length?bh(n,Z(s,2)):[]}function ey(n){var s=n==null?0:n.length;return s?Pt(n,1,s):[]}function ty(n,s,a){return n&&n.length?(s=a||s===t?1:ie(s),Pt(n,0,s<0?0:s)):[]}function ry(n,s,a){var u=n==null?0:n.length;return u?(s=a||s===t?1:ie(s),s=u-s,Pt(n,s<0?0:s,u)):[]}function ny(n,s){return n&&n.length?Ws(n,Z(s,3),!1,!0):[]}function iy(n,s){return n&&n.length?Ws(n,Z(s,3)):[]}var sy=ae(function(n){return xr(We(n,1,Pe,!0))}),oy=ae(function(n){var s=Tt(n);return Pe(s)&&(s=t),xr(We(n,1,Pe,!0),Z(s,2))}),ay=ae(function(n){var s=Tt(n);return s=typeof s=="function"?s:t,xr(We(n,1,Pe,!0),t,s)});function cy(n){return n&&n.length?xr(n):[]}function ly(n,s){return n&&n.length?xr(n,Z(s,2)):[]}function uy(n,s){return s=typeof s=="function"?s:t,n&&n.length?xr(n,t,s):[]}function tc(n){if(!(n&&n.length))return[];var s=0;return n=_r(n,function(a){if(Pe(a))return s=De(a.length,s),!0}),va(s,function(a){return Ie(n,ga(a))})}function ad(n,s){if(!(n&&n.length))return[];var a=tc(n);return s==null?a:Ie(a,function(u){return ft(s,t,u)})}var hy=ae(function(n,s){return Pe(n)?Oi(n,s):[]}),dy=ae(function(n){return Ua(_r(n,Pe))}),py=ae(function(n){var s=Tt(n);return Pe(s)&&(s=t),Ua(_r(n,Pe),Z(s,2))}),fy=ae(function(n){var s=Tt(n);return s=typeof s=="function"?s:t,Ua(_r(n,Pe),t,s)}),gy=ae(tc);function my(n,s){return xh(n||[],s||[],xi)}function wy(n,s){return xh(n||[],s||[],$i)}var vy=ae(function(n){var s=n.length,a=s>1?n[s-1]:t;return a=typeof a=="function"?(n.pop(),a):t,ad(n,a)});function cd(n){var s=p(n);return s.__chain__=!0,s}function yy(n,s){return s(n),n}function Zs(n,s){return s(n)}var _y=ir(function(n){var s=n.length,a=s?n[0]:0,u=this.__wrapped__,h=function(f){return Oa(f,n)};return s>1||this.__actions__.length||!(u instanceof le)||!sr(a)?this.thru(h):(u=u.slice(a,+a+(s?1:0)),u.__actions__.push({func:Zs,args:[h],thisArg:t}),new Rt(u,this.__chain__).thru(function(f){return s&&!f.length&&f.push(t),f}))});function by(){return cd(this)}function Ey(){return new Rt(this.value(),this.__chain__)}function Iy(){this.__values__===t&&(this.__values__=Ed(this.value()));var n=this.__index__>=this.__values__.length,s=n?t:this.__values__[this.__index__++];return{done:n,value:s}}function Sy(){return this}function xy(n){for(var s,a=this;a instanceof Ds;){var u=td(a);u.__index__=0,u.__values__=t,s?h.__wrapped__=u:s=u;var h=u;a=a.__wrapped__}return h.__wrapped__=n,s}function Oy(){var n=this.__wrapped__;if(n instanceof le){var s=n;return this.__actions__.length&&(s=new le(this)),s=s.reverse(),s.__actions__.push({func:Zs,args:[ec],thisArg:t}),new Rt(s,this.__chain__)}return this.thru(ec)}function Cy(){return Sh(this.__wrapped__,this.__actions__)}var Ry=Hs(function(n,s,a){ve.call(n,a)?++n[a]:rr(n,a,1)});function $y(n,s,a){var u=re(n)?Lu:yw;return a&&Ge(n,s,a)&&(s=t),u(n,Z(s,3))}function Py(n,s){var a=re(n)?_r:ah;return a(n,Z(s,3))}var Ty=Dh(rd),Ny=Dh(nd);function Ay(n,s){return We(Js(n,s),1)}function ky(n,s){return We(Js(n,s),Qt)}function Dy(n,s,a){return a=a===t?1:ie(a),We(Js(n,s),a)}function ld(n,s){var a=re(n)?Ot:Sr;return a(n,Z(s,3))}function ud(n,s){var a=re(n)?e1:oh;return a(n,Z(s,3))}var My=Hs(function(n,s,a){ve.call(n,a)?n[a].push(s):rr(n,a,[s])});function Ly(n,s,a,u){n=rt(n)?n:jn(n),a=a&&!u?ie(a):0;var h=n.length;return a<0&&(a=De(h+a,0)),ro(n)?a<=h&&n.indexOf(s,a)>-1:!!h&&On(n,s,a)>-1}var jy=ae(function(n,s,a){var u=-1,h=typeof s=="function",f=rt(n)?x(n.length):[];return Sr(n,function(w){f[++u]=h?ft(s,w,a):Ci(w,s,a)}),f}),Uy=Hs(function(n,s,a){rr(n,a,s)});function Js(n,s){var a=re(n)?Ie:ph;return a(n,Z(s,3))}function qy(n,s,a,u){return n==null?[]:(re(s)||(s=s==null?[]:[s]),a=u?t:a,re(a)||(a=a==null?[]:[a]),wh(n,s,a))}var Wy=Hs(function(n,s,a){n[a?0:1].push(s)},function(){return[[],[]]});function Hy(n,s,a){var u=re(n)?pa:Wu,h=arguments.length<3;return u(n,Z(s,4),a,h,Sr)}function zy(n,s,a){var u=re(n)?t1:Wu,h=arguments.length<3;return u(n,Z(s,4),a,h,oh)}function Fy(n,s){var a=re(n)?_r:ah;return a(n,eo(Z(s,3)))}function Vy(n){var s=re(n)?rh:Lw;return s(n)}function By(n,s,a){(a?Ge(n,s,a):s===t)?s=1:s=ie(s);var u=re(n)?fw:jw;return u(n,s)}function Ky(n){var s=re(n)?gw:qw;return s(n)}function Gy(n){if(n==null)return 0;if(rt(n))return ro(n)?Rn(n):n.length;var s=Fe(n);return s==kt||s==Dt?n.size:Na(n).length}function Yy(n,s,a){var u=re(n)?fa:Ww;return a&&Ge(n,s,a)&&(s=t),u(n,Z(s,3))}var Zy=ae(function(n,s){if(n==null)return[];var a=s.length;return a>1&&Ge(n,s[0],s[1])?s=[]:a>2&&Ge(s[0],s[1],s[2])&&(s=[s[0]]),wh(n,We(s,1),[])}),Qs=P1||function(){return qe.Date.now()};function Jy(n,s){if(typeof s!="function")throw new Ct(l);return n=ie(n),function(){if(--n<1)return s.apply(this,arguments)}}function hd(n,s,a){return s=a?t:s,s=n&&s==null?n.length:s,nr(n,V,t,t,t,t,s)}function dd(n,s){var a;if(typeof s!="function")throw new Ct(l);return n=ie(n),function(){return--n>0&&(a=s.apply(this,arguments)),n<=1&&(s=t),a}}var rc=ae(function(n,s,a){var u=q;if(a.length){var h=Er(a,Mn(rc));u|=R}return nr(n,u,s,a,h)}),pd=ae(function(n,s,a){var u=q|L;if(a.length){var h=Er(a,Mn(pd));u|=R}return nr(s,u,n,a,h)});function fd(n,s,a){s=a?t:s;var u=nr(n,O,t,t,t,t,t,s);return u.placeholder=fd.placeholder,u}function gd(n,s,a){s=a?t:s;var u=nr(n,C,t,t,t,t,t,s);return u.placeholder=gd.placeholder,u}function md(n,s,a){var u,h,f,w,v,_,P=0,T=!1,N=!1,W=!0;if(typeof n!="function")throw new Ct(l);s=Nt(s)||0,xe(a)&&(T=!!a.leading,N="maxWait"in a,f=N?De(Nt(a.maxWait)||0,s):f,W="trailing"in a?!!a.trailing:W);function K(Te){var Ut=u,cr=h;return u=h=t,P=Te,w=n.apply(cr,Ut),w}function J(Te){return P=Te,v=Ni(ce,s),T?K(Te):w}function se(Te){var Ut=Te-_,cr=Te-P,Dd=s-Ut;return N?ze(Dd,f-cr):Dd}function Q(Te){var Ut=Te-_,cr=Te-P;return _===t||Ut>=s||Ut<0||N&&cr>=f}function ce(){var Te=Qs();if(Q(Te))return ue(Te);v=Ni(ce,se(Te))}function ue(Te){return v=t,W&&u?K(Te):(u=h=t,w)}function vt(){v!==t&&Oh(v),P=0,u=_=h=v=t}function Ye(){return v===t?w:ue(Qs())}function yt(){var Te=Qs(),Ut=Q(Te);if(u=arguments,h=this,_=Te,Ut){if(v===t)return J(_);if(N)return Oh(v),v=Ni(ce,s),K(_)}return v===t&&(v=Ni(ce,s)),w}return yt.cancel=vt,yt.flush=Ye,yt}var Qy=ae(function(n,s){return sh(n,1,s)}),Xy=ae(function(n,s,a){return sh(n,Nt(s)||0,a)});function e_(n){return nr(n,B)}function Xs(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new Ct(l);var a=function(){var u=arguments,h=s?s.apply(this,u):u[0],f=a.cache;if(f.has(h))return f.get(h);var w=n.apply(this,u);return a.cache=f.set(h,w)||f,w};return a.cache=new(Xs.Cache||tr),a}Xs.Cache=tr;function eo(n){if(typeof n!="function")throw new Ct(l);return function(){var s=arguments;switch(s.length){case 0:return!n.call(this);case 1:return!n.call(this,s[0]);case 2:return!n.call(this,s[0],s[1]);case 3:return!n.call(this,s[0],s[1],s[2])}return!n.apply(this,s)}}function t_(n){return dd(2,n)}var r_=Hw(function(n,s){s=s.length==1&&re(s[0])?Ie(s[0],gt(Z())):Ie(We(s,1),gt(Z()));var a=s.length;return ae(function(u){for(var h=-1,f=ze(u.length,a);++h<f;)u[h]=s[h].call(this,u[h]);return ft(n,this,u)})}),nc=ae(function(n,s){var a=Er(s,Mn(nc));return nr(n,R,t,s,a)}),wd=ae(function(n,s){var a=Er(s,Mn(wd));return nr(n,D,t,s,a)}),n_=ir(function(n,s){return nr(n,F,t,t,t,s)});function i_(n,s){if(typeof n!="function")throw new Ct(l);return s=s===t?s:ie(s),ae(n,s)}function s_(n,s){if(typeof n!="function")throw new Ct(l);return s=s==null?0:De(ie(s),0),ae(function(a){var u=a[s],h=Cr(a,0,s);return u&&br(h,u),ft(n,this,h)})}function o_(n,s,a){var u=!0,h=!0;if(typeof n!="function")throw new Ct(l);return xe(a)&&(u="leading"in a?!!a.leading:u,h="trailing"in a?!!a.trailing:h),md(n,s,{leading:u,maxWait:s,trailing:h})}function a_(n){return hd(n,1)}function c_(n,s){return nc(Wa(s),n)}function l_(){if(!arguments.length)return[];var n=arguments[0];return re(n)?n:[n]}function u_(n){return $t(n,k)}function h_(n,s){return s=typeof s=="function"?s:t,$t(n,k,s)}function d_(n){return $t(n,I|k)}function p_(n,s){return s=typeof s=="function"?s:t,$t(n,I|k,s)}function f_(n,s){return s==null||ih(n,s,Le(s))}function jt(n,s){return n===s||n!==n&&s!==s}var g_=Bs($a),m_=Bs(function(n,s){return n>=s}),tn=uh(function(){return arguments}())?uh:function(n){return Ce(n)&&ve.call(n,"callee")&&!Zu.call(n,"callee")},re=x.isArray,w_=Tu?gt(Tu):xw;function rt(n){return n!=null&&to(n.length)&&!or(n)}function Pe(n){return Ce(n)&&rt(n)}function v_(n){return n===!0||n===!1||Ce(n)&&Ke(n)==di}var Rr=N1||fc,y_=Nu?gt(Nu):Ow;function __(n){return Ce(n)&&n.nodeType===1&&!Ai(n)}function b_(n){if(n==null)return!0;if(rt(n)&&(re(n)||typeof n=="string"||typeof n.splice=="function"||Rr(n)||Ln(n)||tn(n)))return!n.length;var s=Fe(n);if(s==kt||s==Dt)return!n.size;if(Ti(n))return!Na(n).length;for(var a in n)if(ve.call(n,a))return!1;return!0}function E_(n,s){return Ri(n,s)}function I_(n,s,a){a=typeof a=="function"?a:t;var u=a?a(n,s):t;return u===t?Ri(n,s,t,a):!!u}function ic(n){if(!Ce(n))return!1;var s=Ke(n);return s==ps||s==B0||typeof n.message=="string"&&typeof n.name=="string"&&!Ai(n)}function S_(n){return typeof n=="number"&&Qu(n)}function or(n){if(!xe(n))return!1;var s=Ke(n);return s==fs||s==su||s==V0||s==G0}function vd(n){return typeof n=="number"&&n==ie(n)}function to(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Ht}function xe(n){var s=typeof n;return n!=null&&(s=="object"||s=="function")}function Ce(n){return n!=null&&typeof n=="object"}var yd=Au?gt(Au):Rw;function x_(n,s){return n===s||Ta(n,s,Ga(s))}function O_(n,s,a){return a=typeof a=="function"?a:t,Ta(n,s,Ga(s),a)}function C_(n){return _d(n)&&n!=+n}function R_(n){if(hv(n))throw new ee(c);return hh(n)}function $_(n){return n===null}function P_(n){return n==null}function _d(n){return typeof n=="number"||Ce(n)&&Ke(n)==fi}function Ai(n){if(!Ce(n)||Ke(n)!=Xt)return!1;var s=Rs(n);if(s===null)return!0;var a=ve.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&Ss.call(a)==O1}var sc=ku?gt(ku):$w;function T_(n){return vd(n)&&n>=-Ht&&n<=Ht}var bd=Du?gt(Du):Pw;function ro(n){return typeof n=="string"||!re(n)&&Ce(n)&&Ke(n)==mi}function wt(n){return typeof n=="symbol"||Ce(n)&&Ke(n)==gs}var Ln=Mu?gt(Mu):Tw;function N_(n){return n===t}function A_(n){return Ce(n)&&Fe(n)==wi}function k_(n){return Ce(n)&&Ke(n)==Z0}var D_=Bs(Aa),M_=Bs(function(n,s){return n<=s});function Ed(n){if(!n)return[];if(rt(n))return ro(n)?Mt(n):tt(n);if(_i&&n[_i])return f1(n[_i]());var s=Fe(n),a=s==kt?_a:s==Dt?bs:jn;return a(n)}function ar(n){if(!n)return n===0?n:0;if(n=Nt(n),n===Qt||n===-Qt){var s=n<0?-1:1;return s*En}return n===n?n:0}function ie(n){var s=ar(n),a=s%1;return s===s?a?s-a:s:0}function Id(n){return n?Jr(ie(n),0,zt):0}function Nt(n){if(typeof n=="number")return n;if(wt(n))return Br;if(xe(n)){var s=typeof n.valueOf=="function"?n.valueOf():n;n=xe(s)?s+"":s}if(typeof n!="string")return n===0?n:+n;n=Hu(n);var a=wm.test(n);return a||ym.test(n)?Jm(n.slice(2),a?2:8):mm.test(n)?Br:+n}function Sd(n){return Vt(n,nt(n))}function L_(n){return n?Jr(ie(n),-Ht,Ht):n===0?n:0}function me(n){return n==null?"":mt(n)}var j_=kn(function(n,s){if(Ti(s)||rt(s)){Vt(s,Le(s),n);return}for(var a in s)ve.call(s,a)&&xi(n,a,s[a])}),xd=kn(function(n,s){Vt(s,nt(s),n)}),no=kn(function(n,s,a,u){Vt(s,nt(s),n,u)}),U_=kn(function(n,s,a,u){Vt(s,Le(s),n,u)}),q_=ir(Oa);function W_(n,s){var a=An(n);return s==null?a:nh(a,s)}var H_=ae(function(n,s){n=ye(n);var a=-1,u=s.length,h=u>2?s[2]:t;for(h&&Ge(s[0],s[1],h)&&(u=1);++a<u;)for(var f=s[a],w=nt(f),v=-1,_=w.length;++v<_;){var P=w[v],T=n[P];(T===t||jt(T,Pn[P])&&!ve.call(n,P))&&(n[P]=f[P])}return n}),z_=ae(function(n){return n.push(t,Hh),ft(Od,t,n)});function F_(n,s){return ju(n,Z(s,3),Ft)}function V_(n,s){return ju(n,Z(s,3),Ra)}function B_(n,s){return n==null?n:Ca(n,Z(s,3),nt)}function K_(n,s){return n==null?n:ch(n,Z(s,3),nt)}function G_(n,s){return n&&Ft(n,Z(s,3))}function Y_(n,s){return n&&Ra(n,Z(s,3))}function Z_(n){return n==null?[]:js(n,Le(n))}function J_(n){return n==null?[]:js(n,nt(n))}function oc(n,s,a){var u=n==null?t:Qr(n,s);return u===t?a:u}function Q_(n,s){return n!=null&&Vh(n,s,bw)}function ac(n,s){return n!=null&&Vh(n,s,Ew)}var X_=Lh(function(n,s,a){s!=null&&typeof s.toString!="function"&&(s=xs.call(s)),n[s]=a},lc(it)),eb=Lh(function(n,s,a){s!=null&&typeof s.toString!="function"&&(s=xs.call(s)),ve.call(n,s)?n[s].push(a):n[s]=[a]},Z),tb=ae(Ci);function Le(n){return rt(n)?th(n):Na(n)}function nt(n){return rt(n)?th(n,!0):Nw(n)}function rb(n,s){var a={};return s=Z(s,3),Ft(n,function(u,h,f){rr(a,s(u,h,f),u)}),a}function nb(n,s){var a={};return s=Z(s,3),Ft(n,function(u,h,f){rr(a,h,s(u,h,f))}),a}var ib=kn(function(n,s,a){Us(n,s,a)}),Od=kn(function(n,s,a,u){Us(n,s,a,u)}),sb=ir(function(n,s){var a={};if(n==null)return a;var u=!1;s=Ie(s,function(f){return f=Or(f,n),u||(u=f.length>1),f}),Vt(n,Ba(n),a),u&&(a=$t(a,I|S|k,Xw));for(var h=s.length;h--;)ja(a,s[h]);return a});function ob(n,s){return Cd(n,eo(Z(s)))}var ab=ir(function(n,s){return n==null?{}:kw(n,s)});function Cd(n,s){if(n==null)return{};var a=Ie(Ba(n),function(u){return[u]});return s=Z(s),vh(n,a,function(u,h){return s(u,h[0])})}function cb(n,s,a){s=Or(s,n);var u=-1,h=s.length;for(h||(h=1,n=t);++u<h;){var f=n==null?t:n[Bt(s[u])];f===t&&(u=h,f=a),n=or(f)?f.call(n):f}return n}function lb(n,s,a){return n==null?n:$i(n,s,a)}function ub(n,s,a,u){return u=typeof u=="function"?u:t,n==null?n:$i(n,s,a,u)}var Rd=qh(Le),$d=qh(nt);function hb(n,s,a){var u=re(n),h=u||Rr(n)||Ln(n);if(s=Z(s,4),a==null){var f=n&&n.constructor;h?a=u?new f:[]:xe(n)?a=or(f)?An(Rs(n)):{}:a={}}return(h?Ot:Ft)(n,function(w,v,_){return s(a,w,v,_)}),a}function db(n,s){return n==null?!0:ja(n,s)}function pb(n,s,a){return n==null?n:Ih(n,s,Wa(a))}function fb(n,s,a,u){return u=typeof u=="function"?u:t,n==null?n:Ih(n,s,Wa(a),u)}function jn(n){return n==null?[]:ya(n,Le(n))}function gb(n){return n==null?[]:ya(n,nt(n))}function mb(n,s,a){return a===t&&(a=s,s=t),a!==t&&(a=Nt(a),a=a===a?a:0),s!==t&&(s=Nt(s),s=s===s?s:0),Jr(Nt(n),s,a)}function wb(n,s,a){return s=ar(s),a===t?(a=s,s=0):a=ar(a),n=Nt(n),Iw(n,s,a)}function vb(n,s,a){if(a&&typeof a!="boolean"&&Ge(n,s,a)&&(s=a=t),a===t&&(typeof s=="boolean"?(a=s,s=t):typeof n=="boolean"&&(a=n,n=t)),n===t&&s===t?(n=0,s=1):(n=ar(n),s===t?(s=n,n=0):s=ar(s)),n>s){var u=n;n=s,s=u}if(a||n%1||s%1){var h=Xu();return ze(n+h*(s-n+Zm("1e-"+((h+"").length-1))),s)}return Da(n,s)}var yb=Dn(function(n,s,a){return s=s.toLowerCase(),n+(a?Pd(s):s)});function Pd(n){return cc(me(n).toLowerCase())}function Td(n){return n=me(n),n&&n.replace(bm,l1).replace(qm,"")}function _b(n,s,a){n=me(n),s=mt(s);var u=n.length;a=a===t?u:Jr(ie(a),0,u);var h=a;return a-=s.length,a>=0&&n.slice(a,h)==s}function bb(n){return n=me(n),n&&tm.test(n)?n.replace(cu,u1):n}function Eb(n){return n=me(n),n&&am.test(n)?n.replace(na,"\\$&"):n}var Ib=Dn(function(n,s,a){return n+(a?"-":"")+s.toLowerCase()}),Sb=Dn(function(n,s,a){return n+(a?" ":"")+s.toLowerCase()}),xb=kh("toLowerCase");function Ob(n,s,a){n=me(n),s=ie(s);var u=s?Rn(n):0;if(!s||u>=s)return n;var h=(s-u)/2;return Vs(Ns(h),a)+n+Vs(Ts(h),a)}function Cb(n,s,a){n=me(n),s=ie(s);var u=s?Rn(n):0;return s&&u<s?n+Vs(s-u,a):n}function Rb(n,s,a){n=me(n),s=ie(s);var u=s?Rn(n):0;return s&&u<s?Vs(s-u,a)+n:n}function $b(n,s,a){return a||s==null?s=0:s&&(s=+s),M1(me(n).replace(ia,""),s||0)}function Pb(n,s,a){return(a?Ge(n,s,a):s===t)?s=1:s=ie(s),Ma(me(n),s)}function Tb(){var n=arguments,s=me(n[0]);return n.length<3?s:s.replace(n[1],n[2])}var Nb=Dn(function(n,s,a){return n+(a?"_":"")+s.toLowerCase()});function Ab(n,s,a){return a&&typeof a!="number"&&Ge(n,s,a)&&(s=a=t),a=a===t?zt:a>>>0,a?(n=me(n),n&&(typeof s=="string"||s!=null&&!sc(s))&&(s=mt(s),!s&&Cn(n))?Cr(Mt(n),0,a):n.split(s,a)):[]}var kb=Dn(function(n,s,a){return n+(a?" ":"")+cc(s)});function Db(n,s,a){return n=me(n),a=a==null?0:Jr(ie(a),0,n.length),s=mt(s),n.slice(a,a+s.length)==s}function Mb(n,s,a){var u=p.templateSettings;a&&Ge(n,s,a)&&(s=t),n=me(n),s=no({},s,u,Wh);var h=no({},s.imports,u.imports,Wh),f=Le(h),w=ya(h,f),v,_,P=0,T=s.interpolate||ms,N="__p += '",W=ba((s.escape||ms).source+"|"+T.source+"|"+(T===lu?gm:ms).source+"|"+(s.evaluate||ms).source+"|$","g"),K="//# sourceURL="+(ve.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vm+"]")+`
`;n.replace(W,function(Q,ce,ue,vt,Ye,yt){return ue||(ue=vt),N+=n.slice(P,yt).replace(Em,h1),ce&&(v=!0,N+=`' +
__e(`+ce+`) +
'`),Ye&&(_=!0,N+=`';
`+Ye+`;
__p += '`),ue&&(N+=`' +
((__t = (`+ue+`)) == null ? '' : __t) +
'`),P=yt+Q.length,Q}),N+=`';
`;var J=ve.call(s,"variable")&&s.variable;if(!J)N=`with (obj) {
`+N+`
}
`;else if(pm.test(J))throw new ee(d);N=(_?N.replace(J0,""):N).replace(Q0,"$1").replace(X0,"$1;"),N="function("+(J||"obj")+`) {
`+(J?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(_?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+N+`return __p
}`;var se=Ad(function(){return fe(f,K+"return "+N).apply(t,w)});if(se.source=N,ic(se))throw se;return se}function Lb(n){return me(n).toLowerCase()}function jb(n){return me(n).toUpperCase()}function Ub(n,s,a){if(n=me(n),n&&(a||s===t))return Hu(n);if(!n||!(s=mt(s)))return n;var u=Mt(n),h=Mt(s),f=zu(u,h),w=Fu(u,h)+1;return Cr(u,f,w).join("")}function qb(n,s,a){if(n=me(n),n&&(a||s===t))return n.slice(0,Bu(n)+1);if(!n||!(s=mt(s)))return n;var u=Mt(n),h=Fu(u,Mt(s))+1;return Cr(u,0,h).join("")}function Wb(n,s,a){if(n=me(n),n&&(a||s===t))return n.replace(ia,"");if(!n||!(s=mt(s)))return n;var u=Mt(n),h=zu(u,Mt(s));return Cr(u,h).join("")}function Hb(n,s){var a=X,u=ne;if(xe(s)){var h="separator"in s?s.separator:h;a="length"in s?ie(s.length):a,u="omission"in s?mt(s.omission):u}n=me(n);var f=n.length;if(Cn(n)){var w=Mt(n);f=w.length}if(a>=f)return n;var v=a-Rn(u);if(v<1)return u;var _=w?Cr(w,0,v).join(""):n.slice(0,v);if(h===t)return _+u;if(w&&(v+=_.length-v),sc(h)){if(n.slice(v).search(h)){var P,T=_;for(h.global||(h=ba(h.source,me(uu.exec(h))+"g")),h.lastIndex=0;P=h.exec(T);)var N=P.index;_=_.slice(0,N===t?v:N)}}else if(n.indexOf(mt(h),v)!=v){var W=_.lastIndexOf(h);W>-1&&(_=_.slice(0,W))}return _+u}function zb(n){return n=me(n),n&&em.test(n)?n.replace(au,v1):n}var Fb=Dn(function(n,s,a){return n+(a?" ":"")+s.toUpperCase()}),cc=kh("toUpperCase");function Nd(n,s,a){return n=me(n),s=a?t:s,s===t?p1(n)?b1(n):i1(n):n.match(s)||[]}var Ad=ae(function(n,s){try{return ft(n,t,s)}catch(a){return ic(a)?a:new ee(a)}}),Vb=ir(function(n,s){return Ot(s,function(a){a=Bt(a),rr(n,a,rc(n[a],n))}),n});function Bb(n){var s=n==null?0:n.length,a=Z();return n=s?Ie(n,function(u){if(typeof u[1]!="function")throw new Ct(l);return[a(u[0]),u[1]]}):[],ae(function(u){for(var h=-1;++h<s;){var f=n[h];if(ft(f[0],this,u))return ft(f[1],this,u)}})}function Kb(n){return vw($t(n,I))}function lc(n){return function(){return n}}function Gb(n,s){return n==null||n!==n?s:n}var Yb=Mh(),Zb=Mh(!0);function it(n){return n}function uc(n){return dh(typeof n=="function"?n:$t(n,I))}function Jb(n){return fh($t(n,I))}function Qb(n,s){return gh(n,$t(s,I))}var Xb=ae(function(n,s){return function(a){return Ci(a,n,s)}}),e2=ae(function(n,s){return function(a){return Ci(n,a,s)}});function hc(n,s,a){var u=Le(s),h=js(s,u);a==null&&!(xe(s)&&(h.length||!u.length))&&(a=s,s=n,n=this,h=js(s,Le(s)));var f=!(xe(a)&&"chain"in a)||!!a.chain,w=or(n);return Ot(h,function(v){var _=s[v];n[v]=_,w&&(n.prototype[v]=function(){var P=this.__chain__;if(f||P){var T=n(this.__wrapped__),N=T.__actions__=tt(this.__actions__);return N.push({func:_,args:arguments,thisArg:n}),T.__chain__=P,T}return _.apply(n,br([this.value()],arguments))})}),n}function t2(){return qe._===this&&(qe._=C1),this}function dc(){}function r2(n){return n=ie(n),ae(function(s){return mh(s,n)})}var n2=za(Ie),i2=za(Lu),s2=za(fa);function kd(n){return Za(n)?ga(Bt(n)):Dw(n)}function o2(n){return function(s){return n==null?t:Qr(n,s)}}var a2=jh(),c2=jh(!0);function pc(){return[]}function fc(){return!1}function l2(){return{}}function u2(){return""}function h2(){return!0}function d2(n,s){if(n=ie(n),n<1||n>Ht)return[];var a=zt,u=ze(n,zt);s=Z(s),n-=zt;for(var h=va(u,s);++a<n;)s(a);return h}function p2(n){return re(n)?Ie(n,Bt):wt(n)?[n]:tt(ed(me(n)))}function f2(n){var s=++x1;return me(n)+s}var g2=Fs(function(n,s){return n+s},0),m2=Fa("ceil"),w2=Fs(function(n,s){return n/s},1),v2=Fa("floor");function y2(n){return n&&n.length?Ls(n,it,$a):t}function _2(n,s){return n&&n.length?Ls(n,Z(s,2),$a):t}function b2(n){return qu(n,it)}function E2(n,s){return qu(n,Z(s,2))}function I2(n){return n&&n.length?Ls(n,it,Aa):t}function S2(n,s){return n&&n.length?Ls(n,Z(s,2),Aa):t}var x2=Fs(function(n,s){return n*s},1),O2=Fa("round"),C2=Fs(function(n,s){return n-s},0);function R2(n){return n&&n.length?wa(n,it):0}function $2(n,s){return n&&n.length?wa(n,Z(s,2)):0}return p.after=Jy,p.ary=hd,p.assign=j_,p.assignIn=xd,p.assignInWith=no,p.assignWith=U_,p.at=q_,p.before=dd,p.bind=rc,p.bindAll=Vb,p.bindKey=pd,p.castArray=l_,p.chain=cd,p.chunk=vv,p.compact=yv,p.concat=_v,p.cond=Bb,p.conforms=Kb,p.constant=lc,p.countBy=Ry,p.create=W_,p.curry=fd,p.curryRight=gd,p.debounce=md,p.defaults=H_,p.defaultsDeep=z_,p.defer=Qy,p.delay=Xy,p.difference=bv,p.differenceBy=Ev,p.differenceWith=Iv,p.drop=Sv,p.dropRight=xv,p.dropRightWhile=Ov,p.dropWhile=Cv,p.fill=Rv,p.filter=Py,p.flatMap=Ay,p.flatMapDeep=ky,p.flatMapDepth=Dy,p.flatten=id,p.flattenDeep=$v,p.flattenDepth=Pv,p.flip=e_,p.flow=Yb,p.flowRight=Zb,p.fromPairs=Tv,p.functions=Z_,p.functionsIn=J_,p.groupBy=My,p.initial=Av,p.intersection=kv,p.intersectionBy=Dv,p.intersectionWith=Mv,p.invert=X_,p.invertBy=eb,p.invokeMap=jy,p.iteratee=uc,p.keyBy=Uy,p.keys=Le,p.keysIn=nt,p.map=Js,p.mapKeys=rb,p.mapValues=nb,p.matches=Jb,p.matchesProperty=Qb,p.memoize=Xs,p.merge=ib,p.mergeWith=Od,p.method=Xb,p.methodOf=e2,p.mixin=hc,p.negate=eo,p.nthArg=r2,p.omit=sb,p.omitBy=ob,p.once=t_,p.orderBy=qy,p.over=n2,p.overArgs=r_,p.overEvery=i2,p.overSome=s2,p.partial=nc,p.partialRight=wd,p.partition=Wy,p.pick=ab,p.pickBy=Cd,p.property=kd,p.propertyOf=o2,p.pull=qv,p.pullAll=od,p.pullAllBy=Wv,p.pullAllWith=Hv,p.pullAt=zv,p.range=a2,p.rangeRight=c2,p.rearg=n_,p.reject=Fy,p.remove=Fv,p.rest=i_,p.reverse=ec,p.sampleSize=By,p.set=lb,p.setWith=ub,p.shuffle=Ky,p.slice=Vv,p.sortBy=Zy,p.sortedUniq=Qv,p.sortedUniqBy=Xv,p.split=Ab,p.spread=s_,p.tail=ey,p.take=ty,p.takeRight=ry,p.takeRightWhile=ny,p.takeWhile=iy,p.tap=yy,p.throttle=o_,p.thru=Zs,p.toArray=Ed,p.toPairs=Rd,p.toPairsIn=$d,p.toPath=p2,p.toPlainObject=Sd,p.transform=hb,p.unary=a_,p.union=sy,p.unionBy=oy,p.unionWith=ay,p.uniq=cy,p.uniqBy=ly,p.uniqWith=uy,p.unset=db,p.unzip=tc,p.unzipWith=ad,p.update=pb,p.updateWith=fb,p.values=jn,p.valuesIn=gb,p.without=hy,p.words=Nd,p.wrap=c_,p.xor=dy,p.xorBy=py,p.xorWith=fy,p.zip=gy,p.zipObject=my,p.zipObjectDeep=wy,p.zipWith=vy,p.entries=Rd,p.entriesIn=$d,p.extend=xd,p.extendWith=no,hc(p,p),p.add=g2,p.attempt=Ad,p.camelCase=yb,p.capitalize=Pd,p.ceil=m2,p.clamp=mb,p.clone=u_,p.cloneDeep=d_,p.cloneDeepWith=p_,p.cloneWith=h_,p.conformsTo=f_,p.deburr=Td,p.defaultTo=Gb,p.divide=w2,p.endsWith=_b,p.eq=jt,p.escape=bb,p.escapeRegExp=Eb,p.every=$y,p.find=Ty,p.findIndex=rd,p.findKey=F_,p.findLast=Ny,p.findLastIndex=nd,p.findLastKey=V_,p.floor=v2,p.forEach=ld,p.forEachRight=ud,p.forIn=B_,p.forInRight=K_,p.forOwn=G_,p.forOwnRight=Y_,p.get=oc,p.gt=g_,p.gte=m_,p.has=Q_,p.hasIn=ac,p.head=sd,p.identity=it,p.includes=Ly,p.indexOf=Nv,p.inRange=wb,p.invoke=tb,p.isArguments=tn,p.isArray=re,p.isArrayBuffer=w_,p.isArrayLike=rt,p.isArrayLikeObject=Pe,p.isBoolean=v_,p.isBuffer=Rr,p.isDate=y_,p.isElement=__,p.isEmpty=b_,p.isEqual=E_,p.isEqualWith=I_,p.isError=ic,p.isFinite=S_,p.isFunction=or,p.isInteger=vd,p.isLength=to,p.isMap=yd,p.isMatch=x_,p.isMatchWith=O_,p.isNaN=C_,p.isNative=R_,p.isNil=P_,p.isNull=$_,p.isNumber=_d,p.isObject=xe,p.isObjectLike=Ce,p.isPlainObject=Ai,p.isRegExp=sc,p.isSafeInteger=T_,p.isSet=bd,p.isString=ro,p.isSymbol=wt,p.isTypedArray=Ln,p.isUndefined=N_,p.isWeakMap=A_,p.isWeakSet=k_,p.join=Lv,p.kebabCase=Ib,p.last=Tt,p.lastIndexOf=jv,p.lowerCase=Sb,p.lowerFirst=xb,p.lt=D_,p.lte=M_,p.max=y2,p.maxBy=_2,p.mean=b2,p.meanBy=E2,p.min=I2,p.minBy=S2,p.stubArray=pc,p.stubFalse=fc,p.stubObject=l2,p.stubString=u2,p.stubTrue=h2,p.multiply=x2,p.nth=Uv,p.noConflict=t2,p.noop=dc,p.now=Qs,p.pad=Ob,p.padEnd=Cb,p.padStart=Rb,p.parseInt=$b,p.random=vb,p.reduce=Hy,p.reduceRight=zy,p.repeat=Pb,p.replace=Tb,p.result=cb,p.round=O2,p.runInContext=y,p.sample=Vy,p.size=Gy,p.snakeCase=Nb,p.some=Yy,p.sortedIndex=Bv,p.sortedIndexBy=Kv,p.sortedIndexOf=Gv,p.sortedLastIndex=Yv,p.sortedLastIndexBy=Zv,p.sortedLastIndexOf=Jv,p.startCase=kb,p.startsWith=Db,p.subtract=C2,p.sum=R2,p.sumBy=$2,p.template=Mb,p.times=d2,p.toFinite=ar,p.toInteger=ie,p.toLength=Id,p.toLower=Lb,p.toNumber=Nt,p.toSafeInteger=L_,p.toString=me,p.toUpper=jb,p.trim=Ub,p.trimEnd=qb,p.trimStart=Wb,p.truncate=Hb,p.unescape=zb,p.uniqueId=f2,p.upperCase=Fb,p.upperFirst=cc,p.each=ld,p.eachRight=ud,p.first=sd,hc(p,function(){var n={};return Ft(p,function(s,a){ve.call(p.prototype,a)||(n[a]=s)}),n}(),{chain:!1}),p.VERSION=i,Ot(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){p[n].placeholder=p}),Ot(["drop","take"],function(n,s){le.prototype[n]=function(a){a=a===t?1:De(ie(a),0);var u=this.__filtered__&&!s?new le(this):this.clone();return u.__filtered__?u.__takeCount__=ze(a,u.__takeCount__):u.__views__.push({size:ze(a,zt),type:n+(u.__dir__<0?"Right":"")}),u},le.prototype[n+"Right"]=function(a){return this.reverse()[n](a).reverse()}}),Ot(["filter","map","takeWhile"],function(n,s){var a=s+1,u=a==et||a==St;le.prototype[n]=function(h){var f=this.clone();return f.__iteratees__.push({iteratee:Z(h,3),type:a}),f.__filtered__=f.__filtered__||u,f}}),Ot(["head","last"],function(n,s){var a="take"+(s?"Right":"");le.prototype[n]=function(){return this[a](1).value()[0]}}),Ot(["initial","tail"],function(n,s){var a="drop"+(s?"":"Right");le.prototype[n]=function(){return this.__filtered__?new le(this):this[a](1)}}),le.prototype.compact=function(){return this.filter(it)},le.prototype.find=function(n){return this.filter(n).head()},le.prototype.findLast=function(n){return this.reverse().find(n)},le.prototype.invokeMap=ae(function(n,s){return typeof n=="function"?new le(this):this.map(function(a){return Ci(a,n,s)})}),le.prototype.reject=function(n){return this.filter(eo(Z(n)))},le.prototype.slice=function(n,s){n=ie(n);var a=this;return a.__filtered__&&(n>0||s<0)?new le(a):(n<0?a=a.takeRight(-n):n&&(a=a.drop(n)),s!==t&&(s=ie(s),a=s<0?a.dropRight(-s):a.take(s-n)),a)},le.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},le.prototype.toArray=function(){return this.take(zt)},Ft(le.prototype,function(n,s){var a=/^(?:filter|find|map|reject)|While$/.test(s),u=/^(?:head|last)$/.test(s),h=p[u?"take"+(s=="last"?"Right":""):s],f=u||/^find/.test(s);h&&(p.prototype[s]=function(){var w=this.__wrapped__,v=u?[1]:arguments,_=w instanceof le,P=v[0],T=_||re(w),N=function(ce){var ue=h.apply(p,br([ce],v));return u&&W?ue[0]:ue};T&&a&&typeof P=="function"&&P.length!=1&&(_=T=!1);var W=this.__chain__,K=!!this.__actions__.length,J=f&&!W,se=_&&!K;if(!f&&T){w=se?w:new le(this);var Q=n.apply(w,v);return Q.__actions__.push({func:Zs,args:[N],thisArg:t}),new Rt(Q,W)}return J&&se?n.apply(this,v):(Q=this.thru(N),J?u?Q.value()[0]:Q.value():Q)})}),Ot(["pop","push","shift","sort","splice","unshift"],function(n){var s=Es[n],a=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",u=/^(?:pop|shift)$/.test(n);p.prototype[n]=function(){var h=arguments;if(u&&!this.__chain__){var f=this.value();return s.apply(re(f)?f:[],h)}return this[a](function(w){return s.apply(re(w)?w:[],h)})}}),Ft(le.prototype,function(n,s){var a=p[s];if(a){var u=a.name+"";ve.call(Nn,u)||(Nn[u]=[]),Nn[u].push({name:s,func:a})}}),Nn[zs(t,L).name]=[{name:"wrapper",func:t}],le.prototype.clone=z1,le.prototype.reverse=F1,le.prototype.value=V1,p.prototype.at=_y,p.prototype.chain=by,p.prototype.commit=Ey,p.prototype.next=Iy,p.prototype.plant=xy,p.prototype.reverse=Oy,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=Cy,p.prototype.first=p.prototype.head,_i&&(p.prototype[_i]=Sy),p},$n=E1();Kr?((Kr.exports=$n)._=$n,ua._=$n):qe._=$n}).call(Hi)})(_l,_l.exports);var v8=Object.defineProperty,y8=Object.defineProperties,_8=Object.getOwnPropertyDescriptors,rf=Object.getOwnPropertySymbols,b8=Object.prototype.hasOwnProperty,E8=Object.prototype.propertyIsEnumerable,nf=(r,e,t)=>e in r?v8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,oo=(r,e)=>{for(var t in e||(e={}))b8.call(e,t)&&nf(r,t,e[t]);if(rf)for(var t of rf(e))E8.call(e,t)&&nf(r,t,e[t]);return r},I8=(r,e)=>y8(r,_8(e));function Wr(r,e,t){var i;const o=ME(r);return((i=e.rpcMap)==null?void 0:i[o.reference])||`${w8}?chainId=${o.namespace}:${o.reference}&projectId=${t}`}function _n(r){return r.includes(":")?r.split(":")[1]:r}function Wg(r){return r.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function S8(r,e){const t=Object.keys(e.namespaces).filter(o=>o.includes(r));if(!t.length)return[];const i=[];return t.forEach(o=>{const c=e.namespaces[o].accounts;i.push(...c)}),i}function x8(r={},e={}){const t=sf(r),i=sf(e);return _l.exports.merge(t,i)}function sf(r){var e,t,i,o;const c={};if(!fn(r))return c;for(const[l,d]of Object.entries(r)){const m=Do(l)?[l]:d.chains,g=d.methods||[],b=d.events||[],I=d.rpcMap||{},S=Yn(l);c[S]=I8(oo(oo({},c[S]),d),{chains:Xn(m,(e=c[S])==null?void 0:e.chains),methods:Xn(g,(t=c[S])==null?void 0:t.methods),events:Xn(b,(i=c[S])==null?void 0:i.events),rpcMap:oo(oo({},I),(o=c[S])==null?void 0:o.rpcMap)})}return c}function O8(r){return r.includes(":")?r.split(":")[2]:r}function C8(r){const e={};for(const[t,i]of Object.entries(r)){const o=i.methods||[],c=i.events||[],l=i.accounts||[],d=Do(t)?[t]:i.chains?i.chains:Wg(i.accounts);e[t]={chains:d,methods:o,events:c,accounts:l}}return e}function Rc(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):r.includes(":")?Number(r.split(":")[1]):Number(r)}const Hg={},Se=r=>Hg[r],$c=(r,e)=>{Hg[r]=e};class R8{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=_n(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Wr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fr(new wr(i,Se("disableProviderPing")))}}class $8{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const i=t||Wr(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fr(new wr(i,Se("disableProviderPing")))}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=parseInt(_n(t));e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,i;let o=e.request.params?(t=e.request.params[0])==null?void 0:t.chainId:"0x0";o=o.startsWith("0x")?o:`0x${o}`;const c=parseInt(o,16);if(this.isChainApproved(c))this.setDefaultChain(`${c}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:o}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${c}`);else throw new Error(`Failed to switch to chain 'eip155:${c}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class P8{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=_n(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Wr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fr(new wr(i,Se("disableProviderPing")))}}class T8{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=_n(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Wr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fr(new wr(i,Se("disableProviderPing")))}}class N8{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{const i=this.getCardanoRPCUrl(t),o=_n(t);e[o]=this.createHttpProvider(o,i)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||this.getCardanoRPCUrl(e);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fr(new wr(i,Se("disableProviderPing")))}}class A8{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=_n(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Wr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fr(new wr(i,Se("disableProviderPing")))}}class k8{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;const o=_n(t);e[o]=this.createHttpProvider(o,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Wr(e,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);return new Fr(new wr(i,Se("disableProviderPing")))}}class D8{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Se("events"),this.client=Se("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const i=t||Wr(`${this.name}:${e}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,i)}this.events.emit(vr.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(t=>t.split(":")[1]===this.chainId.toString()).map(t=>t.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(t=>{var i;e[t]=this.createHttpProvider(t,(i=this.namespace.rpcMap)==null?void 0:i[t])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const i=this.createHttpProvider(e,t);i&&(this.httpProviders[e]=i)}createHttpProvider(e,t){const i=t||Wr(e,this.namespace);return typeof i>"u"?void 0:new Fr(new wr(i,Se("disableProviderPing")))}}var M8=Object.defineProperty,L8=Object.defineProperties,j8=Object.getOwnPropertyDescriptors,of=Object.getOwnPropertySymbols,U8=Object.prototype.hasOwnProperty,q8=Object.prototype.propertyIsEnumerable,af=(r,e,t)=>e in r?M8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ao=(r,e)=>{for(var t in e||(e={}))U8.call(e,t)&&af(r,t,e[t]);if(of)for(var t of of(e))q8.call(e,t)&&af(r,t,e[t]);return r},Pc=(r,e)=>L8(r,j8(e));class Hl{constructor(e){this.events=new ss,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof e?.logger<"u"&&typeof e?.logger!="string"?e.logger:To(Lo({level:e?.logger||ef})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new Hl(e);return await t.initialize(),t}async request(e,t){const[i,o]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(i).request({request:ao({},e),chainId:`${i}:${o}`,topic:this.session.topic})}sendAsync(e,t,i){const o=new Date().getTime();this.request(e,i).then(c=>t(null,qo(o,c))).catch(c=>t(c,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:$e("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:o}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await o().then(c=>{this.session=c,this.namespaces||(this.namespaces=C8(c.namespaces),this.persist("namespaces",this.namespaces))}).catch(c=>{if(c.message!==Ug)throw c;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[i,o]=this.validateChain(e);this.getProvider(i).setDefaultChain(o,t)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(Jt(t)){for(const i of t)e.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await o8.init({logger:this.providerOpts.logger||ef,relayUrl:this.providerOpts.relayUrl||f8,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(t=>Yn(t)))];$c("client",this.client),$c("events",this.events),$c("disableProviderPing",this.disableProviderPing),e.forEach(t=>{if(!this.session)return;const i=S8(t,this.session),o=Wg(i),c=x8(this.namespaces,this.optionalNamespaces),l=Pc(ao({},c[t]),{accounts:i,chains:o});switch(t){case"eip155":this.rpcProviders[t]=new $8({namespace:l});break;case"solana":this.rpcProviders[t]=new P8({namespace:l});break;case"cosmos":this.rpcProviders[t]=new T8({namespace:l});break;case"polkadot":this.rpcProviders[t]=new R8({namespace:l});break;case"cip34":this.rpcProviders[t]=new N8({namespace:l});break;case"elrond":this.rpcProviders[t]=new A8({namespace:l});break;case"multiversx":this.rpcProviders[t]=new k8({namespace:l});break;case"near":this.rpcProviders[t]=new D8({namespace:l});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:t}=e,{event:i}=t;if(i.name==="accountsChanged"){const o=i.data;o&&Jt(o)&&this.events.emit("accountsChanged",o.map(O8))}else if(i.name==="chainChanged"){const o=t.chainId,c=t.event.data,l=Yn(o),d=Rc(o)!==Rc(c)?`${l}:${Rc(c)}`:o;this.onChainChanged(d)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var i;const{namespaces:o}=t,c=(i=this.client)==null?void 0:i.session.get(e);this.session=Pc(ao({},c),{namespaces:o}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Pc(ao({},$e("USER_DISCONNECTED")),{data:e.topic}))}),this.on(vr.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace((t=this.session)==null?void 0:t.namespaces[e])})}setNamespaces(e){const{namespaces:t,optionalNamespaces:i,sessionProperties:o}=e;t&&Object.keys(t).length&&(this.namespaces=t),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=o,this.persist("namespaces",t),this.persist("optionalNamespaces",i)}validateChain(e){const[t,i]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,i];if(t&&!Object.keys(this.namespaces||{}).map(l=>Yn(l)).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&i)return[t,i];const o=Yn(Object.keys(this.namespaces)[0]),c=this.rpcProviders[o].getDefaultChain();return[o,c]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var i;if(!this.namespaces)return;const[o,c]=this.validateChain(e);t||this.getProvider(o).setDefaultChain(c),((i=this.namespaces[o])!=null?i:this.namespaces[`${o}:${c}`]).defaultChain=c,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",c)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${tf}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${tf}/${e}`)}}const W8=Hl,H8="wc",z8="ethereum_provider",F8=`${H8}@2:${z8}:`,V8="https://rpc.walletconnect.com/v1/",Oo=["eth_sendTransaction","personal_sign"],zg=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],Co=["chainChanged","accountsChanged"],Fg=["chainChanged","accountsChanged","message","disconnect","connect"];var B8=Object.defineProperty,K8=Object.defineProperties,G8=Object.getOwnPropertyDescriptors,cf=Object.getOwnPropertySymbols,Y8=Object.prototype.hasOwnProperty,Z8=Object.prototype.propertyIsEnumerable,lf=(r,e,t)=>e in r?B8(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ji=(r,e)=>{for(var t in e||(e={}))Y8.call(e,t)&&lf(r,t,e[t]);if(cf)for(var t of cf(e))Z8.call(e,t)&&lf(r,t,e[t]);return r},uf=(r,e)=>K8(r,G8(e));function Ro(r){return Number(r[0].split(":")[1])}function Tc(r){return`0x${r.toString(16)}`}function J8(r){const{chains:e,optionalChains:t,methods:i,optionalMethods:o,events:c,optionalEvents:l,rpcMap:d}=r;if(!Jt(e))throw new Error("Invalid chains");const m={chains:e,methods:i||Oo,events:c||Co,rpcMap:Ji({},e.length?{[Ro(e)]:d[Ro(e)]}:{})},g=c?.filter(k=>!Co.includes(k)),b=i?.filter(k=>!Oo.includes(k));if(!t&&!l&&!o&&!(g!=null&&g.length)&&!(b!=null&&b.length))return{required:e.length?m:void 0};const I=g?.length&&b?.length||!t,S={chains:[...new Set(I?m.chains.concat(t||[]):t)],methods:[...new Set(m.methods.concat(o!=null&&o.length?o:zg))],events:[...new Set(m.events.concat(l!=null&&l.length?l:Fg))],rpcMap:d};return{required:e.length?m:void 0,optional:t.length?S:void 0}}let Vg=class Bg{constructor(){this.events=new ht.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=F8,this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const t=new Bg;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:t,optional:i}=J8(this.rpc);try{const o=await new Promise(async(l,d)=>{var m;this.rpc.showQrModal&&((m=this.modal)==null||m.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),d(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(uf(Ji({namespaces:Ji({},t&&{[this.namespace]:t})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:e?.pairingTopic})).then(g=>{l(g)}).catch(g=>{d(new Error(g.message))})});if(!o)return;const c=LE(o.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:Tc(this.chainId)})}catch(o){throw this.signer.logger.error(o),o}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:t}=e,{event:i}=t;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",Tc(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",uf(Ji({},$e("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,i;this.rpc.showQrModal&&((t=this.modal)==null||t.closeModal(),(i=this.modal)==null||i.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const t=e.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",Tc(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){const[t,i,o]=e.split(":");return{chainId:`${t}:${i}`,address:o}}setAccounts(e){this.accounts=e.filter(t=>this.parseChainId(this.parseAccountId(t).chainId)===this.chainId).map(t=>this.parseAccountId(t).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,i;const o=(t=e?.chains)!=null?t:[],c=(i=e?.optionalChains)!=null?i:[],l=o.concat(c);if(!l.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const d=o.length?e?.methods||Oo:[],m=o.length?e?.events||Co:[],g=e?.optionalMethods||[],b=e?.optionalEvents||[],I=e?.rpcMap||this.buildRpcMap(l,e.projectId),S=e?.qrModalOptions||void 0;return{chains:o?.map(k=>this.formatChainId(k)),optionalChains:c.map(k=>this.formatChainId(k)),methods:d,events:m,optionalMethods:g,optionalEvents:b,rpcMap:I,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:S,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){const i={};return e.forEach(o=>{i[o]=this.getRpcUrl(o,t)}),i}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Ro(this.rpc.chains):Ro(this.rpc.optionalChains),this.signer=await W8.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let t;try{const{WalletConnectModal:i}=await Lf(()=>Promise.resolve().then(()=>yC),void 0);t=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(t)try{this.modal=new t(Ji({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:t,optionalChains:i,rpcMap:o}=e;t&&Jt(t)&&(this.rpc.chains=t.map(c=>this.formatChainId(c)),t.forEach(c=>{this.rpc.rpcMap[c]=o?.[c]||this.getRpcUrl(c)})),i&&Jt(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i?.map(c=>this.formatChainId(c)),i.forEach(c=>{this.rpc.rpcMap[c]=o?.[c]||this.getRpcUrl(c)}))}getRpcUrl(e,t){var i;return((i=this.rpc.rpcMap)==null?void 0:i[e])||`${V8}?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(t=>this.parseAccount(t))}};const Q8=Vg,J9=Object.freeze(Object.defineProperty({__proto__:null,EthereumProvider:Q8,OPTIONAL_EVENTS:Fg,OPTIONAL_METHODS:zg,REQUIRED_EVENTS:Co,REQUIRED_METHODS:Oo,default:Vg},Symbol.toStringTag,{value:"Module"}));let hf=class extends jl{constructor(e){super(e),this.events=new ht.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Dr(e.method,e.params||[],e.id||Uo().toString()),t)}async requestStrict(e,t){return new Promise(async(i,o)=>{if(!this.connection.connected)try{await this.open()}catch(c){o(c)}this.events.on(`${e.id}`,c=>{_t(c)?o(c.error):i(c.result)});try{await this.connection.send(e,t)}catch(c){o(c)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),ui(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}};const Nc="Session currently connected",on="Session currently disconnected",X8="Session Rejected",eS="Missing JSON RPC response",tS='JSON-RPC success response must include "result" field',rS='JSON-RPC error response must include "error" field',nS='JSON RPC request must have valid "method" value',iS='JSON RPC request must have valid "id" value',sS="Missing one of the required parameters: bridge / uri / session",df="JSON RPC response format is invalid",oS="URI format is invalid",aS="QRCode Modal not provided",pf="User close QRCode Modal",cS=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],lS=["wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],zl=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign",...lS],bl="WALLETCONNECT_DEEPLINK_CHOICE",uS={1:"mainnet",3:"ropsten",4:"rinkeby",5:"goerli",42:"kovan"},Fl="hex",Vl="utf8",hS="binary",dS="buffer",pS="array",fS="typed-array",gS="array-buffer",zo="0";function ri(r){return new Uint8Array(r)}function Bl(r,e=!1){const t=r.toString(Fl);return e?hs(t):t}function Kl(r){return r.toString(Vl)}function Kg(r){return r.readUIntBE(0,r.length)}function hi(r){return G2(r)}function Mr(r,e=!1){return Bl(hi(r),e)}function Gg(r){return Kl(hi(r))}function Yg(r){return Kg(hi(r))}function Gl(r){return Buffer.from(ni(r),Fl)}function Lr(r){return ri(Gl(r))}function mS(r){return Kl(Gl(r))}function wS(r){return Yg(Lr(r))}function Yl(r){return Buffer.from(r,Vl)}function Zg(r){return ri(Yl(r))}function vS(r,e=!1){return Bl(Yl(r),e)}function yS(r){const e=parseInt(r,10);return LS(MS(e),"Number can only safely store up to 53 bits"),e}function _S(r){return SS(Zl(r))}function bS(r){return Jl(Zl(r))}function ES(r,e){return xS(Zl(r),e)}function IS(r){return`${r}`}function Zl(r){const e=(r>>>0).toString(2);return Xl(e)}function SS(r){return hi(Jl(r))}function Jl(r){return new Uint8Array(TS(r).map(e=>parseInt(e,2)))}function xS(r,e){return Mr(Jl(r),e)}function OS(r){return!(typeof r!="string"||!new RegExp(/^[01]+$/).test(r)||r.length%8!==0)}function Jg(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||e&&r.length!==2+2*e)}function Fo(r){return Buffer.isBuffer(r)}function Ql(r){return z2.strict(r)&&!Fo(r)}function Qg(r){return!Ql(r)&&!Fo(r)&&typeof r.byteLength<"u"}function CS(r){return Fo(r)?dS:Ql(r)?fS:Qg(r)?gS:Array.isArray(r)?pS:typeof r}function RS(r){return OS(r)?hS:Jg(r)?Fl:Vl}function $S(...r){return Buffer.concat(r)}function Xg(...r){let e=[];return r.forEach(t=>e=e.concat(Array.from(t))),new Uint8Array([...e])}function PS(r,e=8){const t=r%e;return t?(r-t)/e*e+e:r}function TS(r,e=8){const t=Xl(r).match(new RegExp(`.{${e}}`,"gi"));return Array.from(t||[])}function Xl(r,e=8,t=zo){return NS(r,PS(r.length,e),t)}function NS(r,e,t=zo){return jS(r,e,!0,t)}function ni(r){return r.replace(/^0x/,"")}function hs(r){return r.startsWith("0x")?r:`0x${r}`}function AS(r){return r=ni(r),r=Xl(r,2),r&&(r=hs(r)),r}function kS(r){const e=r.startsWith("0x");return r=ni(r),r=r.startsWith(zo)?r.substring(1):r,e?hs(r):r}function DS(r){return typeof r>"u"}function MS(r){return!DS(r)}function LS(r,e){if(!r)throw new Error(e)}function jS(r,e,t,i=zo){const o=e-r.length;let c=r;return o>0&&(c=i.repeat(o)+r),c}function $o(r){return hi(new Uint8Array(r))}function US(r){return Gg(new Uint8Array(r))}function e0(r,e){return Mr(new Uint8Array(r),!e)}function qS(r){return Yg(new Uint8Array(r))}function WS(...r){return Lr(r.map(e=>Mr(new Uint8Array(e))).join("")).buffer}function t0(r){return ri(r).buffer}function HS(r){return Kl(r)}function zS(r,e){return Bl(r,!e)}function FS(r){return Kg(r)}function VS(...r){return $S(...r)}function BS(r){return Zg(r).buffer}function KS(r){return Yl(r)}function GS(r,e){return vS(r,!e)}function YS(r){return yS(r)}function ZS(r){return Gl(r)}function r0(r){return Lr(r).buffer}function JS(r){return mS(r)}function QS(r){return wS(r)}function XS(r){return _S(r)}function ex(r){return bS(r).buffer}function tx(r){return IS(r)}function n0(r,e){return ES(Number(r),!e)}const rx=Ff,nx=Vf,ix=Bf,sx=Ao,ox=Kf,i0=ko,ax=Gf,s0=Pl,cx=Yf,lx=Zf,ux=Jf,Vo=zf;function Bo(r){return jf(r)}function Ko(){const r=Bo();return r&&r.os?r.os:void 0}function o0(){const r=Ko();return r?r.toLowerCase().includes("android"):!1}function a0(){const r=Ko();return r?r.toLowerCase().includes("ios")||r.toLowerCase().includes("mac")&&navigator.maxTouchPoints>1:!1}function c0(){return Ko()?o0()||a0():!1}function l0(){const r=Bo();return r&&r.name?r.name.toLowerCase()==="node":!1}function u0(){return!l0()&&!!i0()}const h0=ci,d0=Ur;function eu(r,e){const t=d0(e),i=Vo();i&&i.setItem(r,t)}function tu(r){let e=null,t=null;const i=Vo();return i&&(t=i.getItem(r)),e=t&&h0(t),e}function ru(r){const e=Vo();e&&e.removeItem(r)}function El(){return Nl()}function hx(r){return AS(r)}function dx(r){return hs(r)}function px(r){return ni(r)}function fx(r){return kS(hs(r))}const p0=jo;function Eo(){return((e,t)=>{for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t})()}function gx(){console.warn("DEPRECATION WARNING: This WalletConnect client library will be deprecated in favor of @walletconnect/client. Please check docs.walletconnect.org to learn more about this migration!")}function f0(r,e){let t;const i=uS[r];return i&&(t=`https://${i}.infura.io/v3/${e}`),t}function g0(r,e){let t;const i=f0(r,e.infuraId);return e.custom&&e.custom[r]?t=e.custom[r]:i&&(t=i),t}function mx(r,e){const t=encodeURIComponent(r);return e.universalLink?`${e.universalLink}/wc?uri=${t}`:e.deepLink?`${e.deepLink}${e.deepLink.endsWith(":")?"//":"/"}wc?uri=${t}`:""}function wx(r){const e=r.href.split("?")[0];eu(bl,Object.assign(Object.assign({},r),{href:e}))}function m0(r,e){return r.filter(t=>t.name.toLowerCase().includes(e.toLowerCase()))[0]}function vx(r,e){let t=r;return e&&(t=e.map(i=>m0(r,i)).filter(Boolean)),t}function yx(r,e){return async(...i)=>new Promise((o,c)=>{const l=(d,m)=>{(d===null||typeof d>"u")&&c(d),o(m)};r.apply(e,[...i,l])})}function w0(r){const e=r.message||"Failed or Rejected Request";let t=-32e3;if(r&&!r.code)switch(e){case"Parse error":t=-32700;break;case"Invalid request":t=-32600;break;case"Method not found":t=-32601;break;case"Invalid params":t=-32602;break;case"Internal error":t=-32603;break;default:t=-32e3;break}const i={code:t,message:e};return r.data&&(i.data=r.data),i}const v0="https://registry.walletconnect.com";function _x(){return v0+"/api/v2/wallets"}function bx(){return v0+"/api/v2/dapps"}function y0(r,e="mobile"){var t;return{name:r.name||"",shortName:r.metadata.shortName||"",color:r.metadata.colors.primary||"",logo:(t=r.image_url.sm)!==null&&t!==void 0?t:"",universalLink:r[e].universal||"",deepLink:r[e].native||""}}function Ex(r,e="mobile"){return Object.values(r).filter(t=>!!t[e].universal||!!t[e].native).map(t=>y0(t,e))}function _0(r){const e=r.indexOf("?")!==-1?r.indexOf("?"):void 0;return typeof e<"u"?r.substr(e):""}function b0(r,e){let t=nu(r);return t=Object.assign(Object.assign({},t),e),r=E0(t),r}function nu(r){return Uf.parse(r)}function E0(r){return Uf.stringify(r)}function I0(r){return typeof r.bridge<"u"}function S0(r){const e=r.indexOf(":"),t=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,e),o=r.substring(e+1,t);function c(I){const k=I.split("@");return{handshakeTopic:k[0],version:parseInt(k[1],10)}}const l=c(o),d=typeof t<"u"?r.substr(t):"";function m(I){const S=nu(I);return{key:S.key||"",bridge:S.bridge||""}}const g=m(d);return Object.assign(Object.assign({protocol:i},l),g)}function Ix(r){return r===""||typeof r=="string"&&r.trim()===""}function Sx(r){return!(r&&r.length)}function xx(r){return Fo(r)}function Ox(r){return Ql(r)}function Cx(r){return Qg(r)}function Rx(r){return CS(r)}function $x(r){return RS(r)}function Px(r,e){return Jg(r,e)}function Tx(r){return typeof r.params=="object"}function x0(r){return typeof r.method<"u"}function Jn(r){return typeof r.result<"u"}function is(r){return typeof r.error<"u"}function Il(r){return typeof r.event<"u"}function O0(r){return cS.includes(r)||r.startsWith("wc_")}function C0(r){return r.method.startsWith("wc_")?!0:!zl.includes(r.method)}const Nx=Object.freeze(Object.defineProperty({__proto__:null,addHexPrefix:dx,appendToQueryString:b0,concatArrayBuffers:WS,concatBuffers:VS,convertArrayBufferToBuffer:$o,convertArrayBufferToHex:e0,convertArrayBufferToNumber:qS,convertArrayBufferToUtf8:US,convertBufferToArrayBuffer:t0,convertBufferToHex:zS,convertBufferToNumber:FS,convertBufferToUtf8:HS,convertHexToArrayBuffer:r0,convertHexToBuffer:ZS,convertHexToNumber:QS,convertHexToUtf8:JS,convertNumberToArrayBuffer:ex,convertNumberToBuffer:XS,convertNumberToHex:n0,convertNumberToUtf8:tx,convertUtf8ToArrayBuffer:BS,convertUtf8ToBuffer:KS,convertUtf8ToHex:GS,convertUtf8ToNumber:YS,detectEnv:Bo,detectOS:Ko,formatIOSMobile:mx,formatMobileRegistry:Ex,formatMobileRegistryEntry:y0,formatQueryString:E0,formatRpcError:w0,getClientMeta:El,getCrypto:lx,getCryptoOrThrow:cx,getDappRegistryUrl:bx,getDocument:sx,getDocumentOrThrow:ix,getEncoding:$x,getFromWindow:rx,getFromWindowOrThrow:nx,getInfuraRpcUrl:f0,getLocal:tu,getLocalStorage:Vo,getLocalStorageOrThrow:ux,getLocation:s0,getLocationOrThrow:ax,getMobileLinkRegistry:vx,getMobileRegistryEntry:m0,getNavigator:i0,getNavigatorOrThrow:ox,getQueryString:_0,getRpcUrl:g0,getType:Rx,getWalletRegistryUrl:_x,isAndroid:o0,isArrayBuffer:Cx,isBrowser:u0,isBuffer:xx,isEmptyArray:Sx,isEmptyString:Ix,isHexString:Px,isIOS:a0,isInternalEvent:Il,isJsonRpcRequest:x0,isJsonRpcResponseError:is,isJsonRpcResponseSuccess:Jn,isJsonRpcSubscription:Tx,isMobile:c0,isNode:l0,isReservedEvent:O0,isSilentPayload:C0,isTypedArray:Ox,isWalletConnectSession:I0,logDeprecationWarning:gx,parseQueryString:nu,parseWalletConnectUri:S0,payloadId:p0,promisify:yx,removeHexLeadingZeros:fx,removeHexPrefix:px,removeLocal:ru,safeJsonParse:h0,safeJsonStringify:d0,sanitizeHex:hx,saveMobileLinkInfo:wx,setLocal:eu,uuid:Eo},Symbol.toStringTag,{value:"Module"}));class Ax{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(e,t){this._eventEmitters.push({event:e,callback:t})}trigger(e){let t=[];e&&(t=this._eventEmitters.filter(i=>i.event===e)),t.forEach(i=>{i.callback()})}}const kx=typeof global.WebSocket<"u"?global.WebSocket:require("ws");class Dx{constructor(e){if(this.opts=e,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=e.protocol,this._version=e.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=e.subscriptions||[],this._netMonitor=e.netMonitor||new Ax,!e.url||typeof e.url!="string")throw new Error("Missing or invalid WebSocket url");this._url=e.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(e){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(e){}get connecting(){return this.readyState===0}set connected(e){}get connected(){return this.readyState===1}set closing(e){}get closing(){return this.readyState===2}set closed(e){}get closed(){return this.readyState===3}open(){this._socketCreate()}close(){this._socketClose()}send(e,t,i){if(!t||typeof t!="string")throw new Error("Missing or invalid topic field");this._socketSend({topic:t,type:"pub",payload:e,silent:!!i})}subscribe(e){this._socketSend({topic:e,type:"sub",payload:"",silent:!0})}on(e,t){this._events.push({event:e,callback:t})}_socketCreate(){if(this._nextSocket)return;const e=Mx(this._url,this._protocol,this._version);if(this._nextSocket=new kx(e),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=t=>this._socketReceive(t),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=t=>this._socketError(t),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(e){const t=JSON.stringify(e);this._socket&&this._socket.readyState===1?this._socket.send(t):(this._setToQueue(e),this._socketCreate())}async _socketReceive(e){let t;try{t=JSON.parse(e.data)}catch{return}if(this._socketSend({topic:t.topic,type:"ack",payload:"",silent:!0}),this._socket&&this._socket.readyState===1){const i=this._events.filter(o=>o.event==="message");i&&i.length&&i.forEach(o=>o.callback(t))}}_socketError(e){const t=this._events.filter(i=>i.event==="error");t&&t.length&&t.forEach(i=>i.callback(e))}_queueSubscriptions(){this._subscriptions.forEach(t=>this._queue.push({topic:t,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(e){this._queue.push(e)}_pushQueue(){this._queue.forEach(t=>this._socketSend(t)),this._queue=[]}}function Mx(r,e,t){var i,o;const l=(r.startsWith("https")?r.replace("https","wss"):r.startsWith("http")?r.replace("http","ws"):r).split("?"),d=u0()?{protocol:e,version:t,env:"browser",host:((i=s0())===null||i===void 0?void 0:i.host)||""}:{protocol:e,version:t,env:((o=Bo())===null||o===void 0?void 0:o.name)||""},m=b0(_0(l[1]||""),d);return l[0]+"?"+m}class Lx{constructor(){this._eventEmitters=[]}subscribe(e){this._eventEmitters.push(e)}unsubscribe(e){this._eventEmitters=this._eventEmitters.filter(t=>t.event!==e)}trigger(e){let t=[],i;x0(e)?i=e.method:Jn(e)||is(e)?i=`response:${e.id}`:Il(e)?i=e.event:i="",i&&(t=this._eventEmitters.filter(o=>o.event===i)),(!t||!t.length)&&!O0(i)&&!Il(i)&&(t=this._eventEmitters.filter(o=>o.event==="call_request")),t.forEach(o=>{if(is(e)){const c=new Error(e.error.message);o.callback(c,null)}else o.callback(null,e)})}}class jx{constructor(e="walletconnect"){this.storageId=e}getSession(){let e=null;const t=tu(this.storageId);return t&&I0(t)&&(e=t),e}setSession(e){return eu(this.storageId,e),e}removeSession(){ru(this.storageId)}}const Ux="walletconnect.org",qx="abcdefghijklmnopqrstuvwxyz0123456789",R0=qx.split("").map(r=>`https://${r}.bridge.walletconnect.org`);function Wx(r){let e=r.indexOf("//")>-1?r.split("/")[2]:r.split("/")[0];return e=e.split(":")[0],e=e.split("?")[0],e}function Hx(r){return Wx(r).split(".").slice(-2).join(".")}function zx(){return Math.floor(Math.random()*R0.length)}function Fx(){return R0[zx()]}function Vx(r){return Hx(r)===Ux}function Bx(r){return Vx(r)?Fx():r}class Kx{constructor(e){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new Lx,this._clientMeta=El()||e.connectorOpts.clientMeta||null,this._cryptoLib=e.cryptoLib,this._sessionStorage=e.sessionStorage||new jx(e.connectorOpts.storageId),this._qrcodeModal=e.connectorOpts.qrcodeModal,this._qrcodeModalOptions=e.connectorOpts.qrcodeModalOptions,this._signingMethods=[...zl,...e.connectorOpts.signingMethods||[]],!e.connectorOpts.bridge&&!e.connectorOpts.uri&&!e.connectorOpts.session)throw new Error(sS);e.connectorOpts.bridge&&(this.bridge=Bx(e.connectorOpts.bridge)),e.connectorOpts.uri&&(this.uri=e.connectorOpts.uri);const t=e.connectorOpts.session||this._getStorageSession();t&&(this.session=t),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=e.transport||new Dx({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),e.connectorOpts.uri&&this._subscribeToSessionRequest(),e.pushServerOpts&&this._registerPushServer(e.pushServerOpts)}set bridge(e){e&&(this._bridge=e)}get bridge(){return this._bridge}set key(e){if(!e)return;const t=r0(e);this._key=t}get key(){return this._key?e0(this._key,!0):""}set clientId(e){e&&(this._clientId=e)}get clientId(){let e=this._clientId;return e||(e=this._clientId=Eo()),this._clientId}set peerId(e){e&&(this._peerId=e)}get peerId(){return this._peerId}set clientMeta(e){}get clientMeta(){let e=this._clientMeta;return e||(e=this._clientMeta=El()),e}set peerMeta(e){this._peerMeta=e}get peerMeta(){return this._peerMeta}set handshakeTopic(e){e&&(this._handshakeTopic=e)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(e){e&&(this._handshakeId=e)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(e){if(!e)return;const{handshakeTopic:t,bridge:i,key:o}=this._parseUri(e);this.handshakeTopic=t,this.bridge=i,this.key=o}set chainId(e){this._chainId=e}get chainId(){return this._chainId}set networkId(e){this._networkId=e}get networkId(){return this._networkId}set accounts(e){this._accounts=e}get accounts(){return this._accounts}set rpcUrl(e){this._rpcUrl=e}get rpcUrl(){return this._rpcUrl}set connected(e){}get connected(){return this._connected}set pending(e){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(e){e&&(this._connected=e.connected,this.accounts=e.accounts,this.chainId=e.chainId,this.bridge=e.bridge,this.key=e.key,this.clientId=e.clientId,this.clientMeta=e.clientMeta,this.peerId=e.peerId,this.peerMeta=e.peerMeta,this.handshakeId=e.handshakeId,this.handshakeTopic=e.handshakeTopic)}on(e,t){const i={event:e,callback:t};this._eventManager.subscribe(i)}off(e){this._eventManager.unsubscribe(e)}async createInstantRequest(e){this._key=await this._generateKey();const t=this._formatRequest({method:"wc_instantRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,request:this._formatRequest(e)}]});this.handshakeId=t.id,this.handshakeTopic=Eo(),this._eventManager.trigger({event:"display_uri",params:[this.uri]}),this.on("modal_closed",()=>{throw new Error(pf)});const i=()=>{this.killSession()};try{const o=await this._sendCallRequest(t);return o&&i(),o}catch(o){throw i(),o}}async connect(e){if(!this._qrcodeModal)throw new Error(aS);return this.connected?{chainId:this.chainId,accounts:this.accounts}:(await this.createSession(e),new Promise(async(t,i)=>{this.on("modal_closed",()=>i(new Error(pf))),this.on("connect",(o,c)=>{if(o)return i(o);t(c.params[0])})}))}async createSession(e){if(this._connected)throw new Error(Nc);if(this.pending)return;this._key=await this._generateKey();const t=this._formatRequest({method:"wc_sessionRequest",params:[{peerId:this.clientId,peerMeta:this.clientMeta,chainId:e&&e.chainId?e.chainId:null}]});this.handshakeId=t.id,this.handshakeTopic=Eo(),this._sendSessionRequest(t,"Session update rejected",{topic:this.handshakeTopic}),this._eventManager.trigger({event:"display_uri",params:[this.uri]})}approveSession(e){if(this._connected)throw new Error(Nc);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta},i={id:this.handshakeId,jsonrpc:"2.0",result:t};this._sendResponse(i),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(e){if(this._connected)throw new Error(Nc);const t=e&&e.message?e.message:X8,i=this._formatResponse({id:this.handshakeId,error:{message:t}});this._sendResponse(i),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession()}updateSession(e){if(!this._connected)throw new Error(on);this.chainId=e.chainId,this.accounts=e.accounts,this.networkId=e.networkId||0,this.rpcUrl=e.rpcUrl||"";const t={approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl},i=this._formatRequest({method:"wc_sessionUpdate",params:[t]});this._sendSessionRequest(i,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}async killSession(e){const t=e?e.message:"Session Disconnected",i={approved:!1,chainId:null,networkId:null,accounts:null},o=this._formatRequest({method:"wc_sessionUpdate",params:[i]});await this._sendRequest(o),this._handleSessionDisconnect(t)}async sendTransaction(e){if(!this._connected)throw new Error(on);const t=e,i=this._formatRequest({method:"eth_sendTransaction",params:[t]});return await this._sendCallRequest(i)}async signTransaction(e){if(!this._connected)throw new Error(on);const t=e,i=this._formatRequest({method:"eth_signTransaction",params:[t]});return await this._sendCallRequest(i)}async signMessage(e){if(!this._connected)throw new Error(on);const t=this._formatRequest({method:"eth_sign",params:e});return await this._sendCallRequest(t)}async signPersonalMessage(e){if(!this._connected)throw new Error(on);const t=this._formatRequest({method:"personal_sign",params:e});return await this._sendCallRequest(t)}async signTypedData(e){if(!this._connected)throw new Error(on);const t=this._formatRequest({method:"eth_signTypedData",params:e});return await this._sendCallRequest(t)}async updateChain(e){if(!this._connected)throw new Error("Session currently disconnected");const t=this._formatRequest({method:"wallet_updateChain",params:[e]});return await this._sendCallRequest(t)}unsafeSend(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),new Promise((i,o)=>{this._subscribeToResponse(e.id,(c,l)=>{if(c){o(c);return}if(!l)throw new Error(eS);i(l)})})}async sendCustomRequest(e,t){if(!this._connected)throw new Error(on);switch(e.method){case"eth_accounts":return this.accounts;case"eth_chainId":return n0(this.chainId);case"eth_sendTransaction":case"eth_signTransaction":e.params;break;case"personal_sign":e.params;break}const i=this._formatRequest(e);return await this._sendCallRequest(i,t)}approveRequest(e){if(Jn(e)){const t=this._formatResponse(e);this._sendResponse(t)}else throw new Error(tS)}rejectRequest(e){if(is(e)){const t=this._formatResponse(e);this._sendResponse(t)}else throw new Error(rS)}transportClose(){this._transport.close()}async _sendRequest(e,t){const i=this._formatRequest(e),o=await this._encrypt(i),c=typeof t?.topic<"u"?t.topic:this.peerId,l=JSON.stringify(o),d=typeof t?.forcePushNotification<"u"?!t.forcePushNotification:C0(i);this._transport.send(l,c,d)}async _sendResponse(e){const t=await this._encrypt(e),i=this.peerId,o=JSON.stringify(t);this._transport.send(o,i,!0)}async _sendSessionRequest(e,t,i){this._sendRequest(e,i),this._subscribeToSessionResponse(e.id,t)}_sendCallRequest(e,t){return this._sendRequest(e,t),this._eventManager.trigger({event:"call_request_sent",params:[{request:e,options:t}]}),this._subscribeToCallResponse(e.id)}_formatRequest(e){if(typeof e.method>"u")throw new Error(nS);return{id:typeof e.id>"u"?p0():e.id,jsonrpc:"2.0",method:e.method,params:typeof e.params>"u"?[]:e.params}}_formatResponse(e){if(typeof e.id>"u")throw new Error(iS);const t={id:e.id,jsonrpc:"2.0"};if(is(e)){const i=w0(e.error);return Object.assign(Object.assign(Object.assign({},t),e),{error:i})}else if(Jn(e))return Object.assign(Object.assign({},t),e);throw new Error(df)}_handleSessionDisconnect(e){const t=e||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),ru(bl)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:t}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(e,t){t?t.approved?(this._connected?(t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,t.chainId&&(this.chainId=t.chainId),t.accounts&&(this.accounts=t.accounts),t.peerId&&!this.peerId&&(this.peerId=t.peerId),t.peerMeta&&!this.peerMeta&&(this.peerMeta=t.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(e):this._handleSessionDisconnect(e)}async _handleIncomingMessages(e){if(![this.clientId,this.handshakeTopic].includes(e.topic))return;let i;try{i=JSON.parse(e.payload)}catch{return}const o=await this._decrypt(i);o&&this._eventManager.trigger(o)}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(e,t){this.on(`response:${e}`,t)}_subscribeToSessionResponse(e,t){this._subscribeToResponse(e,(i,o)=>{if(i){this._handleSessionResponse(i.message);return}Jn(o)?this._handleSessionResponse(t,o.result):o.error&&o.error.message?this._handleSessionResponse(o.error.message):this._handleSessionResponse(t)})}_subscribeToCallResponse(e){return new Promise((t,i)=>{this._subscribeToResponse(e,(o,c)=>{if(o){i(o);return}Jn(c)?t(c.result):c.error&&c.error.message?i(c.error):i(new Error(df))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(e,t)=>{const{request:i}=t.params[0];if(c0()&&this._signingMethods.includes(i.method)){const o=tu(bl);o&&(window.location.href=o.href)}}),this.on("wc_sessionRequest",(e,t)=>{e&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:e.toString()}]}),this.handshakeId=t.id,this.peerId=t.params[0].peerId,this.peerMeta=t.params[0].peerMeta;const i=Object.assign(Object.assign({},t),{method:"session_request"});this._eventManager.trigger(i)}),this.on("wc_sessionUpdate",(e,t)=>{e&&this._handleSessionResponse(e.message),this._handleSessionResponse("Session disconnected",t.params[0])})}_initTransport(){this._transport.on("message",e=>this._handleIncomingMessages(e)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){const e=this.protocol,t=this.handshakeTopic,i=this.version,o=encodeURIComponent(this.bridge),c=this.key;return`${e}:${t}@${i}?bridge=${o}&key=${c}`}_parseUri(e){const t=S0(e);if(t.protocol===this.protocol){if(!t.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const i=t.handshakeTopic;if(!t.bridge)throw Error("Invalid or missing bridge url parameter value");const o=decodeURIComponent(t.bridge);if(!t.key)throw Error("Invalid or missing key parameter value");const c=t.key;return{handshakeTopic:i,bridge:o,key:c}}else throw new Error(oS)}async _generateKey(){return this._cryptoLib?await this._cryptoLib.generateKey():null}async _encrypt(e){const t=this._key;return this._cryptoLib&&t?await this._cryptoLib.encrypt(e,t):null}async _decrypt(e){const t=this._key;return this._cryptoLib&&t?await this._cryptoLib.decrypt(e,t):null}_getStorageSession(){let e=null;return this._sessionStorage&&(e=this._sessionStorage.getSession()),e}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(e){if(!e.url||typeof e.url!="string")throw Error("Invalid or missing pushServerOpts.url parameter value");if(!e.type||typeof e.type!="string")throw Error("Invalid or missing pushServerOpts.type parameter value");if(!e.token||typeof e.token!="string")throw Error("Invalid or missing pushServerOpts.token parameter value");const t={bridge:this.bridge,topic:this.clientId,type:e.type,token:e.token,peerName:"",language:e.language||""};this.on("connect",async(i,o)=>{if(i)throw i;if(e.peerMeta){const c=o.params[0].peerMeta.name;t.peerName=c}try{if(!(await(await fetch(`${e.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}})}}function Gx(r){return yn.getBrowerCrypto().getRandomValues(new Uint8Array(r))}const $0=256,P0=$0,Yx=$0,Hr="AES-CBC",Zx=`SHA-${P0}`,Sl="HMAC",Jx="encrypt",Qx="decrypt",Xx="sign",eO="verify";function tO(r){return r===Hr?{length:P0,name:Hr}:{hash:{name:Zx},name:Sl}}function rO(r){return r===Hr?[Jx,Qx]:[Xx,eO]}async function iu(r,e=Hr){return yn.getSubtleCrypto().importKey("raw",r,tO(e),!0,rO(e))}async function nO(r,e,t){const i=yn.getSubtleCrypto(),o=await iu(e,Hr),c=await i.encrypt({iv:r,name:Hr},o,t);return new Uint8Array(c)}async function iO(r,e,t){const i=yn.getSubtleCrypto(),o=await iu(e,Hr),c=await i.decrypt({iv:r,name:Hr},o,t);return new Uint8Array(c)}async function sO(r,e){const t=yn.getSubtleCrypto(),i=await iu(r,Sl),o=await t.sign({length:Yx,name:Sl},i,e);return new Uint8Array(o)}function oO(r,e,t){return nO(r,e,t)}function aO(r,e,t){return iO(r,e,t)}async function T0(r,e){return await sO(r,e)}async function N0(r){const e=(r||256)/8,t=Gx(e);return t0(hi(t))}async function A0(r,e){const t=Lr(r.data),i=Lr(r.iv),o=Lr(r.hmac),c=Mr(o,!1),l=Xg(t,i),d=await T0(e,l),m=Mr(d,!1);return ni(c)===ni(m)}async function cO(r,e,t){const i=ri($o(e)),o=t||await N0(128),c=ri($o(o)),l=Mr(c,!1),d=JSON.stringify(r),m=Zg(d),g=await oO(c,i,m),b=Mr(g,!1),I=Xg(g,c),S=await T0(i,I),k=Mr(S,!1);return{data:b,hmac:k,iv:l}}async function lO(r,e){const t=ri($o(e));if(!t)throw new Error("Missing key: required for decryption");if(!await A0(r,t))return null;const o=Lr(r.data),c=Lr(r.iv),l=await aO(c,t,o),d=Gg(l);let m;try{m=JSON.parse(d)}catch{return null}return m}const uO=Object.freeze(Object.defineProperty({__proto__:null,decrypt:lO,encrypt:cO,generateKey:N0,verifyHmac:A0},Symbol.toStringTag,{value:"Module"}));class hO extends Kx{constructor(e,t){super({cryptoLib:uO,connectorOpts:e,pushServerOpts:t})}}const dO=os(Nx);function k0(r){return r&&typeof r=="object"&&"default"in r?r.default:r}var Ze=dO,D0=k0(qf),pO=k0(K2),H=F2;function fO(r){D0.toString(r,{type:"terminal"}).then(console.log)}var gO=`:root {
  --animation-duration: 300ms;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animated {
  animation-duration: var(--animation-duration);
  animation-fill-mode: both;
}

.fadeIn {
  animation-name: fadeIn;
}

.fadeOut {
  animation-name: fadeOut;
}

#walletconnect-wrapper {
  -webkit-user-select: none;
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  left: 0;
  pointer-events: none;
  position: fixed;
  top: 0;
  user-select: none;
  width: 100%;
  z-index: 99999999999999;
}

.walletconnect-modal__headerLogo {
  height: 21px;
}

.walletconnect-modal__header p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
  align-items: flex-start;
  display: flex;
  flex: 1;
  margin-left: 5px;
}

.walletconnect-modal__close__wrapper {
  position: absolute;
  top: 0px;
  right: 0px;
  z-index: 10000;
  background: white;
  border-radius: 26px;
  padding: 6px;
  box-sizing: border-box;
  width: 26px;
  height: 26px;
  cursor: pointer;
}

.walletconnect-modal__close__icon {
  position: relative;
  top: 7px;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotate(45deg);
}

.walletconnect-modal__close__line1 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
}

.walletconnect-modal__close__line2 {
  position: absolute;
  width: 100%;
  border: 1px solid rgb(48, 52, 59);
  transform: rotate(90deg);
}

.walletconnect-qrcode__base {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  background: rgba(37, 41, 46, 0.95);
  height: 100%;
  left: 0;
  pointer-events: auto;
  position: fixed;
  top: 0;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  width: 100%;
  will-change: opacity;
  padding: 40px;
  box-sizing: border-box;
}

.walletconnect-qrcode__text {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 10px 0 20px 0;
  text-align: center;
  width: 100%;
}

@media only screen and (max-width: 768px) {
  .walletconnect-qrcode__text {
    font-size: 4vw;
  }
}

@media only screen and (max-width: 320px) {
  .walletconnect-qrcode__text {
    font-size: 14px;
  }
}

.walletconnect-qrcode__image {
  width: calc(100% - 30px);
  box-sizing: border-box;
  cursor: none;
  margin: 0 auto;
}

.walletconnect-qrcode__notification {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  font-size: 16px;
  padding: 16px 20px;
  border-radius: 16px;
  text-align: center;
  transition: all 0.1s ease-in-out;
  background: white;
  color: black;
  margin-bottom: -60px;
  opacity: 0;
}

.walletconnect-qrcode__notification.notification__show {
  opacity: 1;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__header {
    height: 130px;
  }
  .walletconnect-modal__base {
    overflow: auto;
  }
}

@media only screen and (min-device-width: 415px) and (max-width: 768px) {
  #content {
    max-width: 768px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 375px) and (max-width: 415px) {
  #content {
    max-width: 414px;
    box-sizing: border-box;
  }
}

@media only screen and (min-width: 320px) and (max-width: 375px) {
  #content {
    max-width: 375px;
    box-sizing: border-box;
  }
}

@media only screen and (max-width: 320px) {
  #content {
    max-width: 320px;
    box-sizing: border-box;
  }
}

.walletconnect-modal__base {
  -webkit-font-smoothing: antialiased;
  background: #ffffff;
  border-radius: 24px;
  box-shadow: 0 10px 50px 5px rgba(0, 0, 0, 0.4);
  font-family: ui-rounded, "SF Pro Rounded", "SF Pro Text", medium-content-sans-serif-font,
    -apple-system, BlinkMacSystemFont, ui-sans-serif, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell,
    "Open Sans", "Helvetica Neue", sans-serif;
  margin-top: 41px;
  padding: 24px 24px 22px;
  pointer-events: auto;
  position: relative;
  text-align: center;
  transition: 0.4s cubic-bezier(0.19, 1, 0.22, 1);
  will-change: transform;
  overflow: visible;
  transform: translateY(-50%);
  top: 50%;
  max-width: 500px;
  margin: auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__base {
    padding: 24px 12px;
  }
}

.walletconnect-modal__base .hidden {
  transform: translateY(150%);
  transition: 0.125s cubic-bezier(0.4, 0, 1, 1);
}

.walletconnect-modal__header {
  align-items: center;
  display: flex;
  height: 26px;
  left: 0;
  justify-content: space-between;
  position: absolute;
  top: -42px;
  width: 100%;
}

.walletconnect-modal__base .wc-logo {
  align-items: center;
  display: flex;
  height: 26px;
  margin-top: 15px;
  padding-bottom: 15px;
  pointer-events: auto;
}

.walletconnect-modal__base .wc-logo div {
  background-color: #3399ff;
  height: 21px;
  margin-right: 5px;
  mask-image: url("images/wc-logo.svg") center no-repeat;
  width: 32px;
}

.walletconnect-modal__base .wc-logo p {
  color: #ffffff;
  font-size: 20px;
  font-weight: 600;
  margin: 0;
}

.walletconnect-modal__base h2 {
  color: rgba(60, 66, 82, 0.6);
  font-size: 16px;
  font-weight: 600;
  letter-spacing: 0;
  line-height: 1.1875em;
  margin: 0 0 19px 0;
  text-align: center;
  width: 100%;
}

.walletconnect-modal__base__row {
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  align-items: center;
  border-radius: 20px;
  cursor: pointer;
  display: flex;
  height: 56px;
  justify-content: space-between;
  padding: 0 15px;
  position: relative;
  margin: 0px 0px 8px;
  text-align: left;
  transition: 0.15s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  will-change: transform;
  text-decoration: none;
}

.walletconnect-modal__base__row:hover {
  background: rgba(60, 66, 82, 0.06);
}

.walletconnect-modal__base__row:active {
  background: rgba(60, 66, 82, 0.06);
  transform: scale(0.975);
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}

.walletconnect-modal__base__row__h3 {
  color: #25292e;
  font-size: 20px;
  font-weight: 700;
  margin: 0;
  padding-bottom: 3px;
}

.walletconnect-modal__base__row__right {
  align-items: center;
  display: flex;
  justify-content: center;
}

.walletconnect-modal__base__row__right__app-icon {
  border-radius: 8px;
  height: 34px;
  margin: 0 11px 2px 0;
  width: 34px;
  background-size: 100%;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-modal__base__row__right__caret {
  height: 18px;
  opacity: 0.3;
  transition: 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  width: 8px;
  will-change: opacity;
}

.walletconnect-modal__base__row:hover .caret,
.walletconnect-modal__base__row:active .caret {
  opacity: 0.6;
}

.walletconnect-modal__mobile__toggle {
  width: 80%;
  display: flex;
  margin: 0 auto;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  margin-bottom: 18px;
  background: #d4d5d9;
}

.walletconnect-modal__single_wallet {
  display: flex;
  justify-content: center;
  margin-top: 7px;
  margin-bottom: 18px;
}

.walletconnect-modal__single_wallet a {
  cursor: pointer;
  color: rgb(64, 153, 255);
  font-size: 21px;
  font-weight: 800;
  text-decoration: none !important;
  margin: 0 auto;
}

.walletconnect-modal__mobile__toggle_selector {
  width: calc(50% - 8px);
  background: white;
  position: absolute;
  border-radius: 5px;
  height: calc(100% - 8px);
  top: 4px;
  transition: all 0.2s ease-in-out;
  transform: translate3d(4px, 0, 0);
}

.walletconnect-modal__mobile__toggle.right__selected .walletconnect-modal__mobile__toggle_selector {
  transform: translate3d(calc(100% + 12px), 0, 0);
}

.walletconnect-modal__mobile__toggle a {
  font-size: 12px;
  width: 50%;
  text-align: center;
  padding: 8px;
  margin: 0;
  font-weight: 600;
  z-index: 1;
}

.walletconnect-modal__footer {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}

@media only screen and (max-width: 768px) {
  .walletconnect-modal__footer {
    margin-top: 5vw;
  }
}

.walletconnect-modal__footer a {
  cursor: pointer;
  color: #898d97;
  font-size: 15px;
  margin: 0 auto;
}

@media only screen and (max-width: 320px) {
  .walletconnect-modal__footer a {
    font-size: 14px;
  }
}

.walletconnect-connect__buttons__wrapper {
  max-height: 44vh;
}

.walletconnect-connect__buttons__wrapper__android {
  margin: 50% 0;
}

.walletconnect-connect__buttons__wrapper__wrap {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  margin: 10px 0;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__buttons__wrapper__wrap {
    margin-top: 40px;
  }
}

.walletconnect-connect__button {
  background-color: rgb(64, 153, 255);
  padding: 12px;
  border-radius: 8px;
  text-decoration: none;
  color: rgb(255, 255, 255);
  font-weight: 500;
}

.walletconnect-connect__button__icon_anchor {
  cursor: pointer;
  display: flex;
  justify-content: flex-start;
  align-items: center;
  margin: 8px;
  width: 42px;
  justify-self: center;
  flex-direction: column;
  text-decoration: none !important;
}

@media only screen and (max-width: 320px) {
  .walletconnect-connect__button__icon_anchor {
    margin: 4px;
  }
}

.walletconnect-connect__button__icon {
  border-radius: 10px;
  height: 42px;
  margin: 0;
  width: 42px;
  background-size: cover !important;
  box-shadow: 0 4px 12px 0 rgba(37, 41, 46, 0.25);
}

.walletconnect-connect__button__text {
  color: #424952;
  font-size: 2.7vw;
  text-decoration: none !important;
  padding: 0;
  margin-top: 1.8vw;
  font-weight: 600;
}

@media only screen and (min-width: 768px) {
  .walletconnect-connect__button__text {
    font-size: 16px;
    margin-top: 12px;
  }
}

.walletconnect-search__input {
  border: none;
  background: #d4d5d9;
  border-style: none;
  padding: 8px 16px;
  outline: none;
  font-style: normal;
  font-stretch: normal;
  font-size: 16px;
  font-style: normal;
  font-stretch: normal;
  line-height: normal;
  letter-spacing: normal;
  text-align: left;
  border-radius: 8px;
  width: calc(100% - 16px);
  margin: 0;
  margin-bottom: 8px;
}
`;typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));function mO(r,e){try{var t=r()}catch(i){return e(i)}return t&&t.then?t.then(void 0,e):t}var wO="data:image/svg+xml,%3C?xml version='1.0' encoding='UTF-8'?%3E %3Csvg width='300px' height='185px' viewBox='0 0 300 185' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3E %3C!-- Generator: Sketch 49.3 (51167) - http://www.bohemiancoding.com/sketch --%3E %3Ctitle%3EWalletConnect%3C/title%3E %3Cdesc%3ECreated with Sketch.%3C/desc%3E %3Cdefs%3E%3C/defs%3E %3Cg id='Page-1' stroke='none' stroke-width='1' fill='none' fill-rule='evenodd'%3E %3Cg id='walletconnect-logo-alt' fill='%233B99FC' fill-rule='nonzero'%3E %3Cpath d='M61.4385429,36.2562612 C110.349767,-11.6319051 189.65053,-11.6319051 238.561752,36.2562612 L244.448297,42.0196786 C246.893858,44.4140867 246.893858,48.2961898 244.448297,50.690599 L224.311602,70.406102 C223.088821,71.6033071 221.106302,71.6033071 219.883521,70.406102 L211.782937,62.4749541 C177.661245,29.0669724 122.339051,29.0669724 88.2173582,62.4749541 L79.542302,70.9685592 C78.3195204,72.1657633 76.337001,72.1657633 75.1142214,70.9685592 L54.9775265,51.2530561 C52.5319653,48.8586469 52.5319653,44.9765439 54.9775265,42.5821357 L61.4385429,36.2562612 Z M280.206339,77.0300061 L298.128036,94.5769031 C300.573585,96.9713 300.573599,100.85338 298.128067,103.247793 L217.317896,182.368927 C214.872352,184.763353 210.907314,184.76338 208.461736,182.368989 C208.461726,182.368979 208.461714,182.368967 208.461704,182.368957 L151.107561,126.214385 C150.496171,125.615783 149.504911,125.615783 148.893521,126.214385 C148.893517,126.214389 148.893514,126.214393 148.89351,126.214396 L91.5405888,182.368927 C89.095052,184.763359 85.1300133,184.763399 82.6844276,182.369014 C82.6844133,182.369 82.684398,182.368986 82.6843827,182.36897 L1.87196327,103.246785 C-0.573596939,100.852377 -0.573596939,96.9702735 1.87196327,94.5758653 L19.7936929,77.028998 C22.2392531,74.6345898 26.2042918,74.6345898 28.6498531,77.028998 L86.0048306,133.184355 C86.6162214,133.782957 87.6074796,133.782957 88.2188704,133.184355 C88.2188796,133.184346 88.2188878,133.184338 88.2188969,133.184331 L145.571,77.028998 C148.016505,74.6345347 151.981544,74.6344449 154.427161,77.028798 C154.427195,77.0288316 154.427229,77.0288653 154.427262,77.028899 L211.782164,133.184331 C212.393554,133.782932 213.384814,133.782932 213.996204,133.184331 L271.350179,77.0300061 C273.79574,74.6355969 277.760778,74.6355969 280.206339,77.0300061 Z' id='WalletConnect'%3E%3C/path%3E %3C/g%3E %3C/g%3E %3C/svg%3E",vO="WalletConnect",yO=300,_O="rgb(64, 153, 255)",M0="walletconnect-wrapper",ff="walletconnect-style-sheet",L0="walletconnect-qrcode-modal",bO="walletconnect-qrcode-close",j0="walletconnect-qrcode-text",EO="walletconnect-connect-button";function IO(r){return H.createElement("div",{className:"walletconnect-modal__header"},H.createElement("img",{src:wO,className:"walletconnect-modal__headerLogo"}),H.createElement("p",null,vO),H.createElement("div",{className:"walletconnect-modal__close__wrapper",onClick:r.onClose},H.createElement("div",{id:bO,className:"walletconnect-modal__close__icon"},H.createElement("div",{className:"walletconnect-modal__close__line1"}),H.createElement("div",{className:"walletconnect-modal__close__line2"}))))}function SO(r){return H.createElement("a",{className:"walletconnect-connect__button",href:r.href,id:EO+"-"+r.name,onClick:r.onClick,rel:"noopener noreferrer",style:{backgroundColor:r.color},target:"_blank"},r.name)}var xO="data:image/svg+xml,%3Csvg width='8' height='18' viewBox='0 0 8 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M0.586301 0.213898C0.150354 0.552968 0.0718197 1.18124 0.41089 1.61719L5.2892 7.88931C5.57007 8.25042 5.57007 8.75608 5.2892 9.11719L0.410889 15.3893C0.071819 15.8253 0.150353 16.4535 0.586301 16.7926C1.02225 17.1317 1.65052 17.0531 1.98959 16.6172L6.86791 10.3451C7.7105 9.26174 7.7105 7.74476 6.86791 6.66143L1.98959 0.38931C1.65052 -0.0466374 1.02225 -0.125172 0.586301 0.213898Z' fill='%233C4252'/%3E %3C/svg%3E";function OO(r){var e=r.color,t=r.href,i=r.name,o=r.logo,c=r.onClick;return H.createElement("a",{className:"walletconnect-modal__base__row",href:t,onClick:c,rel:"noopener noreferrer",target:"_blank"},H.createElement("h3",{className:"walletconnect-modal__base__row__h3"},i),H.createElement("div",{className:"walletconnect-modal__base__row__right"},H.createElement("div",{className:"walletconnect-modal__base__row__right__app-icon",style:{background:"url('"+o+"') "+e,backgroundSize:"100%"}}),H.createElement("img",{src:xO,className:"walletconnect-modal__base__row__right__caret"})))}function CO(r){var e=r.color,t=r.href,i=r.name,o=r.logo,c=r.onClick,l=window.innerWidth<768?(i.length>8?2.5:2.7)+"vw":"inherit";return H.createElement("a",{className:"walletconnect-connect__button__icon_anchor",href:t,onClick:c,rel:"noopener noreferrer",target:"_blank"},H.createElement("div",{className:"walletconnect-connect__button__icon",style:{background:"url('"+o+"') "+e,backgroundSize:"100%"}}),H.createElement("div",{style:{fontSize:l},className:"walletconnect-connect__button__text"},i))}var RO=5,Ac=12;function $O(r){var e=Ze.isAndroid(),t=H.useState(""),i=t[0],o=t[1],c=H.useState(""),l=c[0],d=c[1],m=H.useState(1),g=m[0],b=m[1],I=l?r.links.filter(function(C){return C.name.toLowerCase().includes(l.toLowerCase())}):r.links,S=r.errorMessage,k=l||I.length>RO,A=Math.ceil(I.length/Ac),M=[(g-1)*Ac+1,g*Ac],q=I.length?I.filter(function(C,R){return R+1>=M[0]&&R+1<=M[1]}):[],L=!e&&A>1,E=void 0;function O(C){o(C.target.value),clearTimeout(E),C.target.value?E=setTimeout(function(){d(C.target.value),b(1)},1e3):(o(""),d(""),b(1))}return H.createElement("div",null,H.createElement("p",{id:j0,className:"walletconnect-qrcode__text"},e?r.text.connect_mobile_wallet:r.text.choose_preferred_wallet),!e&&H.createElement("input",{className:"walletconnect-search__input",placeholder:"Search",value:i,onChange:O}),H.createElement("div",{className:"walletconnect-connect__buttons__wrapper"+(e?"__android":k&&I.length?"__wrap":"")},e?H.createElement(SO,{name:r.text.connect,color:_O,href:r.uri,onClick:H.useCallback(function(){Ze.saveMobileLinkInfo({name:"Unknown",href:r.uri})},[])}):q.length?q.map(function(C){var R=C.color,D=C.name,V=C.shortName,F=C.logo,B=Ze.formatIOSMobile(r.uri,C),X=H.useCallback(function(){Ze.saveMobileLinkInfo({name:D,href:B})},[q]);return k?H.createElement(CO,{color:R,href:B,name:V||D,logo:F,onClick:X}):H.createElement(OO,{color:R,href:B,name:D,logo:F,onClick:X})}):H.createElement(H.Fragment,null,H.createElement("p",null,S.length?r.errorMessage:r.links.length&&!I.length?r.text.no_wallets_found:r.text.loading))),L&&H.createElement("div",{className:"walletconnect-modal__footer"},Array(A).fill(0).map(function(C,R){var D=R+1,V=g===D;return H.createElement("a",{style:{margin:"auto 10px",fontWeight:V?"bold":"normal"},onClick:function(){return b(D)}},D)})))}function PO(r){var e=!!r.message.trim();return H.createElement("div",{className:"walletconnect-qrcode__notification"+(e?" notification__show":"")},r.message)}var TO=function(r){try{var e="";return Promise.resolve(D0.toString(r,{margin:0,type:"svg"})).then(function(t){return typeof t=="string"&&(e=t.replace("<svg",'<svg class="walletconnect-qrcode__image"')),e})}catch(t){return Promise.reject(t)}};function NO(r){var e=H.useState(""),t=e[0],i=e[1],o=H.useState(""),c=o[0],l=o[1];H.useEffect(function(){try{return Promise.resolve(TO(r.uri)).then(function(m){l(m)})}catch(m){Promise.reject(m)}},[]);var d=function(){var m=pO(r.uri);m?(i(r.text.copied_to_clipboard),setInterval(function(){return i("")},1200)):(i("Error"),setInterval(function(){return i("")},1200))};return H.createElement("div",null,H.createElement("p",{id:j0,className:"walletconnect-qrcode__text"},r.text.scan_qrcode_with_wallet),H.createElement("div",{dangerouslySetInnerHTML:{__html:c}}),H.createElement("div",{className:"walletconnect-modal__footer"},H.createElement("a",{onClick:d},r.text.copy_to_clipboard)),H.createElement(PO,{message:t}))}function AO(r){var e=Ze.isAndroid(),t=Ze.isMobile(),i=t?r.qrcodeModalOptions&&r.qrcodeModalOptions.mobileLinks?r.qrcodeModalOptions.mobileLinks:void 0:r.qrcodeModalOptions&&r.qrcodeModalOptions.desktopLinks?r.qrcodeModalOptions.desktopLinks:void 0,o=H.useState(!1),c=o[0],l=o[1],d=H.useState(!1),m=d[0],g=d[1],b=H.useState(!t),I=b[0],S=b[1],k={mobile:t,text:r.text,uri:r.uri,qrcodeModalOptions:r.qrcodeModalOptions},A=H.useState(""),M=A[0],q=A[1],L=H.useState(!1),E=L[0],O=L[1],C=H.useState([]),R=C[0],D=C[1],V=H.useState(""),F=V[0],B=V[1],X=function(){m||c||i&&!i.length||R.length>0||H.useEffect(function(){var Me=function(){try{if(e)return Promise.resolve();l(!0);var It=mO(function(){var et=r.qrcodeModalOptions&&r.qrcodeModalOptions.registryUrl?r.qrcodeModalOptions.registryUrl:Ze.getWalletRegistryUrl();return Promise.resolve(fetch(et)).then(function(yr){return Promise.resolve(yr.json()).then(function(St){var Qt=St.listings,Ht=t?"mobile":"desktop",En=Ze.getMobileLinkRegistry(Ze.formatMobileRegistry(Qt,Ht),i);l(!1),g(!0),B(En.length?"":r.text.no_supported_wallets),D(En);var Br=En.length===1;Br&&(q(Ze.formatIOSMobile(r.uri,En[0])),S(!0)),O(Br)})})},function(et){l(!1),g(!0),B(r.text.something_went_wrong),console.error(et)});return Promise.resolve(It&&It.then?It.then(function(){}):void 0)}catch(et){return Promise.reject(et)}};Me()})};X();var ne=t?I:!I;return H.createElement("div",{id:L0,className:"walletconnect-qrcode__base animated fadeIn"},H.createElement("div",{className:"walletconnect-modal__base"},H.createElement(IO,{onClose:r.onClose}),E&&I?H.createElement("div",{className:"walletconnect-modal__single_wallet"},H.createElement("a",{onClick:function(){return Ze.saveMobileLinkInfo({name:R[0].name,href:M})},href:M,rel:"noopener noreferrer",target:"_blank"},r.text.connect_with+" "+(E?R[0].name:"")+" ›")):e||c||!c&&R.length?H.createElement("div",{className:"walletconnect-modal__mobile__toggle"+(ne?" right__selected":"")},H.createElement("div",{className:"walletconnect-modal__mobile__toggle_selector"}),t?H.createElement(H.Fragment,null,H.createElement("a",{onClick:function(){return S(!1),X()}},r.text.mobile),H.createElement("a",{onClick:function(){return S(!0)}},r.text.qrcode)):H.createElement(H.Fragment,null,H.createElement("a",{onClick:function(){return S(!0)}},r.text.qrcode),H.createElement("a",{onClick:function(){return S(!1),X()}},r.text.desktop))):null,H.createElement("div",null,I||!e&&!c&&!R.length?H.createElement(NO,Object.assign({},k)):H.createElement($O,Object.assign({},k,{links:R,errorMessage:F})))))}var kO={choose_preferred_wallet:"Wähle bevorzugte Wallet",connect_mobile_wallet:"Verbinde mit Mobile Wallet",scan_qrcode_with_wallet:"Scanne den QR-code mit einer WalletConnect kompatiblen Wallet",connect:"Verbinden",qrcode:"QR-Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"In die Zwischenablage kopieren",copied_to_clipboard:"In die Zwischenablage kopiert!",connect_with:"Verbinden mit Hilfe von",loading:"Laden...",something_went_wrong:"Etwas ist schief gelaufen",no_supported_wallets:"Es gibt noch keine unterstützten Wallet",no_wallets_found:"keine Wallet gefunden"},DO={choose_preferred_wallet:"Choose your preferred wallet",connect_mobile_wallet:"Connect to Mobile Wallet",scan_qrcode_with_wallet:"Scan QR code with a WalletConnect-compatible wallet",connect:"Connect",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copy to clipboard",copied_to_clipboard:"Copied to clipboard!",connect_with:"Connect with",loading:"Loading...",something_went_wrong:"Something went wrong",no_supported_wallets:"There are no supported wallets yet",no_wallets_found:"No wallets found"},MO={choose_preferred_wallet:"Elige tu billetera preferida",connect_mobile_wallet:"Conectar a billetera móvil",scan_qrcode_with_wallet:"Escanea el código QR con una billetera compatible con WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvil",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Conectar mediante",loading:"Cargando...",something_went_wrong:"Algo salió mal",no_supported_wallets:"Todavía no hay billeteras compatibles",no_wallets_found:"No se encontraron billeteras"},LO={choose_preferred_wallet:"Choisissez votre portefeuille préféré",connect_mobile_wallet:"Se connecter au portefeuille mobile",scan_qrcode_with_wallet:"Scannez le QR code avec un portefeuille compatible WalletConnect",connect:"Se connecter",qrcode:"QR Code",mobile:"Mobile",desktop:"Desktop",copy_to_clipboard:"Copier",copied_to_clipboard:"Copié!",connect_with:"Connectez-vous à l'aide de",loading:"Chargement...",something_went_wrong:"Quelque chose a mal tourné",no_supported_wallets:"Il n'y a pas encore de portefeuilles pris en charge",no_wallets_found:"Aucun portefeuille trouvé"},jO={choose_preferred_wallet:"원하는 지갑을 선택하세요",connect_mobile_wallet:"모바일 지갑과 연결",scan_qrcode_with_wallet:"WalletConnect 지원 지갑에서 QR코드를 스캔하세요",connect:"연결",qrcode:"QR 코드",mobile:"모바일",desktop:"데스크탑",copy_to_clipboard:"클립보드에 복사",copied_to_clipboard:"클립보드에 복사되었습니다!",connect_with:"와 연결하다",loading:"로드 중...",something_went_wrong:"문제가 발생했습니다.",no_supported_wallets:"아직 지원되는 지갑이 없습니다",no_wallets_found:"지갑을 찾을 수 없습니다"},UO={choose_preferred_wallet:"Escolha sua carteira preferida",connect_mobile_wallet:"Conectar-se à carteira móvel",scan_qrcode_with_wallet:"Ler o código QR com uma carteira compatível com WalletConnect",connect:"Conectar",qrcode:"Código QR",mobile:"Móvel",desktop:"Desktop",copy_to_clipboard:"Copiar",copied_to_clipboard:"Copiado!",connect_with:"Ligar por meio de",loading:"Carregamento...",something_went_wrong:"Algo correu mal",no_supported_wallets:"Ainda não há carteiras suportadas",no_wallets_found:"Nenhuma carteira encontrada"},qO={choose_preferred_wallet:"选择你的钱包",connect_mobile_wallet:"连接至移动端钱包",scan_qrcode_with_wallet:"使用兼容 WalletConnect 的钱包扫描二维码",connect:"连接",qrcode:"二维码",mobile:"移动",desktop:"桌面",copy_to_clipboard:"复制到剪贴板",copied_to_clipboard:"复制到剪贴板成功！",connect_with:"通过以下方式连接",loading:"正在加载...",something_went_wrong:"出了问题",no_supported_wallets:"目前还没有支持的钱包",no_wallets_found:"没有找到钱包"},WO={choose_preferred_wallet:"کیف پول مورد نظر خود را انتخاب کنید",connect_mobile_wallet:"به کیف پول موبایل وصل شوید",scan_qrcode_with_wallet:"کد QR را با یک کیف پول سازگار با WalletConnect اسکن کنید",connect:"اتصال",qrcode:"کد QR",mobile:"سیار",desktop:"دسکتاپ",copy_to_clipboard:"کپی به کلیپ بورد",copied_to_clipboard:"در کلیپ بورد کپی شد!",connect_with:"ارتباط با",loading:"...بارگذاری",something_went_wrong:"مشکلی پیش آمد",no_supported_wallets:"هنوز هیچ کیف پول پشتیبانی شده ای وجود ندارد",no_wallets_found:"هیچ کیف پولی پیدا نشد"},gf={de:kO,en:DO,es:MO,fr:LO,ko:jO,pt:UO,zh:qO,fa:WO};function HO(){var r=Ze.getDocumentOrThrow(),e=r.getElementById(ff);e&&r.head.removeChild(e);var t=r.createElement("style");t.setAttribute("id",ff),t.innerText=gO,r.head.appendChild(t)}function zO(){var r=Ze.getDocumentOrThrow(),e=r.createElement("div");return e.setAttribute("id",M0),r.body.appendChild(e),e}function U0(){var r=Ze.getDocumentOrThrow(),e=r.getElementById(L0);e&&(e.className=e.className.replace("fadeIn","fadeOut"),setTimeout(function(){var t=r.getElementById(M0);t&&r.body.removeChild(t)},yO))}function FO(r){return function(){U0(),r&&r()}}function VO(){var r=Ze.getNavigatorOrThrow().language.split("-")[0]||"en";return gf[r]||gf.en}function BO(r,e,t){HO();var i=zO();H.render(H.createElement(AO,{text:VO(),uri:r,onClose:FO(e),qrcodeModalOptions:t}),i)}function KO(){U0()}var q0=function(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"};function GO(r,e,t){console.log(r),q0()?fO(r):BO(r,e,t)}function YO(){q0()||KO()}var ZO={open:GO,close:YO},JO=ZO;const QO=A2(JO);class XO extends i4{constructor(e){super(),this.events=new ss,this.accounts=[],this.chainId=1,this.pending=!1,this.bridge="https://bridge.walletconnect.org",this.qrcode=!0,this.qrcodeModalOptions=void 0,this.opts=e,this.chainId=e?.chainId||this.chainId,this.wc=this.register(e)}get connected(){return typeof this.wc<"u"&&this.wc.connected}get connecting(){return this.pending}get connector(){return this.wc=this.register(this.opts),this.wc}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e){if(this.connected){this.onOpen();return}return new Promise((t,i)=>{this.on("error",o=>{i(o)}),this.on("open",()=>{t()}),this.create(e)})}async close(){typeof this.wc>"u"||(this.wc.connected&&this.wc.killSession(),this.onClose())}async send(e){this.wc=this.register(this.opts),this.connected||await this.open(),this.sendPayload(e).then(t=>this.events.emit("payload",t)).catch(t=>this.events.emit("payload",ti(e.id,t.message)))}register(e){if(this.wc)return this.wc;this.opts=e||this.opts,this.bridge=e?.connector?e.connector.bridge:e?.bridge||"https://bridge.walletconnect.org",this.qrcode=typeof e?.qrcode>"u"||e.qrcode!==!1,this.chainId=typeof e?.chainId<"u"?e.chainId:this.chainId,this.qrcodeModalOptions=e?.qrcodeModalOptions;const t={bridge:this.bridge,qrcodeModal:this.qrcode?QO:void 0,qrcodeModalOptions:this.qrcodeModalOptions,storageId:e?.storageId,signingMethods:e?.signingMethods,clientMeta:e?.clientMeta};if(this.wc=typeof e?.connector<"u"?e.connector:new hO(t),typeof this.wc>"u")throw new Error("Failed to register WalletConnect connector");return this.wc.accounts.length&&(this.accounts=this.wc.accounts),this.wc.chainId&&(this.chainId=this.wc.chainId),this.registerConnectorEvents(),this.wc}onOpen(e){this.pending=!1,e&&(this.wc=e),this.events.emit("open")}onClose(){this.pending=!1,this.wc&&(this.wc=void 0),this.events.emit("close")}onError(e,t="Failed or Rejected Request",i=-32e3){const o={id:e.id,jsonrpc:e.jsonrpc,error:{code:i,message:t}};return this.events.emit("payload",o),o}create(e){this.wc=this.register(this.opts),this.chainId=e||this.chainId,!(this.connected||this.pending)&&(this.pending=!0,this.registerConnectorEvents(),this.wc.createSession({chainId:this.chainId}).then(()=>this.events.emit("created")).catch(t=>this.events.emit("error",t)))}registerConnectorEvents(){this.wc=this.register(this.opts),this.wc.on("connect",e=>{var t,i;if(e){this.events.emit("error",e);return}this.accounts=((t=this.wc)===null||t===void 0?void 0:t.accounts)||[],this.chainId=((i=this.wc)===null||i===void 0?void 0:i.chainId)||this.chainId,this.onOpen()}),this.wc.on("disconnect",e=>{if(e){this.events.emit("error",e);return}this.onClose()}),this.wc.on("modal_closed",()=>{this.events.emit("error",new Error("User closed modal"))}),this.wc.on("session_update",(e,t)=>{const{accounts:i,chainId:o}=t.params[0];(!this.accounts||i&&this.accounts!==i)&&(this.accounts=i,this.events.emit("accountsChanged",i)),(!this.chainId||o&&this.chainId!==o)&&(this.chainId=o,this.events.emit("chainChanged",o))})}async sendPayload(e){this.wc=this.register(this.opts);try{const t=await this.wc.unsafeSend(e);return this.sanitizeResponse(t)}catch(t){return this.onError(e,t.message)}}sanitizeResponse(e){return typeof e.error<"u"&&typeof e.error.code>"u"?ti(e.id,e.error.message,e.error.data):e}}class eC{constructor(e){this.events=new ss,this.rpc={infuraId:e?.infuraId,custom:e?.rpc},this.signer=new hf(new XO(e));const t=this.signer.connection.chainId||e?.chainId||1;this.http=this.setHttpProvider(t),this.registerEventListeners()}get connected(){return this.signer.connection.connected}get connector(){return this.signer.connection.connector}get accounts(){return this.signer.connection.accounts}get chainId(){return this.signer.connection.chainId}get rpcUrl(){var e;return((e=this.http)===null||e===void 0?void 0:e.connection).url||""}async request(e){switch(e.method){case"eth_requestAccounts":return await this.connect(),this.signer.connection.accounts;case"eth_accounts":return this.signer.connection.accounts;case"eth_chainId":return this.signer.connection.chainId}if(zl.includes(e.method))return this.signer.request(e);if(typeof this.http>"u")throw new Error(`Cannot request JSON-RPC method (${e.method}) without provided rpc url`);return this.http.request(e)}sendAsync(e,t){this.request(e).then(i=>t(null,i)).catch(i=>t(i,void 0))}async enable(){return await this.request({method:"eth_requestAccounts"})}async connect(){this.signer.connection.connected||await this.signer.connect()}async disconnect(){this.signer.connection.connected&&await this.signer.disconnect()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}registerEventListeners(){this.signer.connection.on("accountsChanged",e=>{this.events.emit("accountsChanged",e)}),this.signer.connection.on("chainChanged",e=>{this.http=this.setHttpProvider(e),this.events.emit("chainChanged",e)}),this.signer.on("disconnect",()=>{this.events.emit("disconnect")})}setHttpProvider(e){const t=g0(e,this.rpc);return typeof t>"u"?void 0:new hf(new wr(t))}}const X9=Object.freeze(Object.defineProperty({__proto__:null,default:eC},Symbol.toStringTag,{value:"Module"})),Po={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_17TRACK_API_KEY:"90E44878A5030837C5293798DC6081CD",VITE_ADMIN_WALLET:"0x5828D525fe00902AE22f2270Ac714616651894fF",VITE_ALCHEMY_API_KEY:"Gwa0xpQWE3hHxyKllpxbGQmkRLNhV51N",VITE_CHAIN_FEES:"0.02,0.05,0.01,369",VITE_ETHERSCAN_API_KEY:"JE5C1JTK2C629S4T8XVWD125CE37QZ83QS",VITE_FACTORY_ADDRESS_10143:"0xcfFa6b6D71666B96a87ce5B61bFB32Da5E42F426",VITE_FACTORY_ADDRESS_11155111:"0x08cC7f28438f6da583CB1822adE16f891F91FB98",VITE_FACTORY_ADDRESS_130:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_FACTORY_ADDRESS_1301:"0x08a58b1628Fb449635078355Be83e181EFBe3948",VITE_FACTORY_ADDRESS_137:"0xacdaB1829DB264fC00Ad0254332142F8e6d8fC0F",VITE_FACTORY_ADDRESS_1828369849:"0x66Bb79905CF563679CDBCB09700fAD295F4f794B",VITE_FIREBASE_API_KEY:"AIzaSyDlfQMHiTf2vlpOdQA7gsiPK9PcITwBCc8",VITE_FIREBASE_APP_ID:"1:235589319121:web:05d9cd3aeaed3d62d748f0",VITE_FIREBASE_AUTH_DOMAIN:"tokenfactory-bbe1a.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-SJ14LLN724",VITE_FIREBASE_MESSAGING_SENDER_ID:"235589319121",VITE_FIREBASE_PROJECT_ID:"tokenfactory-bbe1a",VITE_FIREBASE_STORAGE_BUCKET:"tokenfactory-bbe1a.firebasestorage.app",VITE_MAILJET_API_KEY:"12622e0080c3a1c247990785dd1d0691",VITE_MAILJET_SECRET_KEY:"d9870d511fd1850d97b702f5f43247e6",VITE_MERCH_FIREBASE_API_KEY:"AIzaSyADTuh7W2jR3iCVo3nmDXUEVcCoM92szTg",VITE_MERCH_FIREBASE_APP_ID:"1:946488133747:web:1cefa3eab5250023218206",VITE_MERCH_FIREBASE_AUTH_DOMAIN:"merch-store-581c9.firebaseapp.com",VITE_MERCH_FIREBASE_MEASUREMENT_ID:"G-JKNYX3PJWDP\0R\0I\0V\0A\0T\0E\0_\0K\0E\0Y\0=\0y\0o\0u\0r\0_\0p\0r\0i\0v\0a\0t\0e\0_\0k\0e\0y\0",VITE_MERCH_FIREBASE_MESSAGING_SENDER_ID:"946488133747",VITE_MERCH_FIREBASE_PROJECT_ID:"merch-store-581c9",VITE_MERCH_FIREBASE_STORAGE_BUCKET:"merch-store-581c9.firebasestorage.app",VITE_MERCH_PLATFORM_ADDRESS_1301:"0xCCc38F4174BfE412e8e05Ae666037A70349ea36B",VITE_MERCH_PLATFORM_ADDRESS_137:"0x2571F240AA2Ca27Af06e5848f891efceB27d1626",VITE_NFT1155_IMPLEMENTATION_MONAD_TESTNET:"0xf7087037fA2c021e61eEcBFb5235678dC9D2586e",VITE_NFT1155_IMPLEMENTATION_MOONWALKER:"0xBE339Ee485dD54375949Eb51CA4b80bCC994dee0",VITE_NFT1155_IMPLEMENTATION_POLYGON:"0x2Bab33d0D290f952BeBF50d44f8B015058a76A52",VITE_NFT1155_IMPLEMENTATION_SEPOLIA:"0xc558f0e1d3b0676abba36027642819e0351fbcb5",VITE_NFT1155_IMPLEMENTATION_UNICHAIN:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_MAINNET:"0xfA4e5A906F03A1a2522CbAA32346aD8B8Db0EAE2",VITE_NFT1155_IMPLEMENTATION_UNICHAIN_TESTNET:"0x274D1a150B3E86E8AaF590fED8b7D04f0540D6FC",VITE_NFT721_IMPLEMENTATION_MONAD_TESTNET:"0xBF098eDe4264fd46Dc2da4b6E87d1dF39271e7C9",VITE_NFT721_IMPLEMENTATION_MOONWALKER:"0xF4815EF47E2fe9479485Ac00f2D904eB358DA7c1",VITE_NFT721_IMPLEMENTATION_POLYGON:"0x4f227F5f8e4659AB79bF3993ce547BE929f60185",VITE_NFT721_IMPLEMENTATION_SEPOLIA:"0x725f7a6eda7216f11f2c1ac6e382f05f947378e8",VITE_NFT721_IMPLEMENTATION_UNICHAIN:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT721_IMPLEMENTATION_UNICHAIN_MAINNET:"0x15433E7Ebdd06d56eD6FEC60132cB8DBceC42245",VITE_NFT721_IMPLEMENTATION_UNICHAIN_TESTNET:"0x7168BCd7AB292A0494592BDFD1E71Dc712F6aa32",VITE_NFT_FACTORY_MONAD_TESTNET:"0x0F77FfbBc7E546f55Eb5f8bdA014f7cAB610Ae02",VITE_NFT_FACTORY_MOONWALKER:"0xb6D0Ac1a2465f0a5C2e06476d9a97348111efAD8",VITE_NFT_FACTORY_POLYGON:"0x8ae42C5f973fb9908b6636F3b8B91bc23B27Fa66",VITE_NFT_FACTORY_SEPOLIA:"0xfb9c2ebfacb84cc5843a4c01fd8cf3d1a9e3423d",VITE_NFT_FACTORY_UNICHAIN:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_NFT_FACTORY_UNICHAIN_MAINNET:"0x099D0E74a30b439bECDac2c8AF362cc7Cf7f0F73",VITE_NFT_FACTORY_UNICHAIN_TESTNET:"0x5B63598728e1cE2041d2aDbA14B81d668f766857",VITE_PAYSTACK_PUBLIC_KEY:"pk_live_6c4619b6e6f7db500ee33c96d03c3db3adf197ae",VITE_PINATA_JWT:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySW5mb3JtYXRpb24iOnsiaWQiOiI1ZDJiMzkyNC01YzUwLTQ0ZDYtYmU0ZC1hN2VkYmNjYWRlYmIiLCJlbWFpbCI6IndpcnJtZTI4QGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJwaW5fcG9saWN5Ijp7InJlZ2lvbnMiOlt7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6IkZSQTEifSx7ImRlc2lyZWRSZXBsaWNhdGlvbkNvdW50IjoxLCJpZCI6Ik5ZQzEifV0sInZlcnNpb24iOjF9LCJtZmFfZW5hYmxlZCI6ZmFsc2UsInN0YXR1cyI6IkFDVElWRSJ9LCJhdXRoZW50aWNhdGlvblR5cGUiOiJzY29wZWRLZXkiLCJzY29wZWRLZXlLZXkiOiI4NWZjNDZiYmE0Mjk4NjM0MzFkNCIsInNjb3BlZEtleVNlY3JldCI6IjJjODljZGU5OWI3MmM0MDMzOTFkNTEwZmJjZTkyYTBlYWRjN2ZlM2M0OTRiNjdiM2U2NDJhNjNiMjdiMjY0NzMiLCJleHAiOjE3NjQxOTMzMjd9.qeejf72tn4UJEvrutzTznukw5us21k-hjWJiHtV-c1M",VITE_POLYGONSCAN_API_KEY:"264JGIIIMW61H1F8J33BZFQWJNSGPDR9S9",VITE_ROUTER_ADDRESS_11155111:"0xeE567Fe1712Faf6149d80dA1E6934E354124CfE3",VITE_ROUTER_ADDRESS_1301:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_ROUTER_ADDRESS_137:"0xa5E0829CaCEd8fFDD4De3c43696c57F7D7A678ff",VITE_ROUTER_ADDRESS_UNICHAIN:"0x920b806E40A00E02E7D2b94fFc89860fDaEd3640",VITE_SUPPORTED_CHAINS:"11155111,137,1301,1828369849,10143",VITE_UNICHAIN_EXPLORER_API_KEY:"F2STYRDMGGEY6NY3H2FXCYKBD971WSX5DX",VITE_UNICHAIN_EXPLORER_URL:"https://unichain-sepolia.blockscout.com",VITE_UNICHAIN_RPC_URL:"https://sepolia.unichain.org",VITE_UNICHAIN_USDC_ADDRESS:"0x31d0220469e10c4E71834a79b1f276d740d3768F",VITE_UNICHAIN_USDT_ADDRESS:"0x70262e266E50603AcFc5D58997eF73e5a8775844",VITE_USDC_ADDRESS_POLYGON:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",VITE_USDC_ADDRESS_SEPOLIA:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",VITE_USDT_ADDRESS_POLYGON:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",VITE_USDT_ADDRESS_SEPOLIA:"0xaA8E23Fb1079EA71e0a56F48a2aA51851D8433D0",VITE_WALLET_CONNECT_PROJECT_ID:"3f6cfb67c10d3242035f4bd4580e9bf9"},kc=r=>typeof r=="object"&&r!==null,Ar=new WeakMap,co=new WeakSet,tC=(r=Object.is,e=(g,b)=>new Proxy(g,b),t=g=>kc(g)&&!co.has(g)&&(Array.isArray(g)||!(Symbol.iterator in g))&&!(g instanceof WeakMap)&&!(g instanceof WeakSet)&&!(g instanceof Error)&&!(g instanceof Number)&&!(g instanceof Date)&&!(g instanceof String)&&!(g instanceof RegExp)&&!(g instanceof ArrayBuffer),i=g=>{switch(g.status){case"fulfilled":return g.value;case"rejected":throw g.reason;default:throw g}},o=new WeakMap,c=(g,b,I=i)=>{const S=o.get(g);if(S?.[0]===b)return S[1];const k=Array.isArray(g)?[]:Object.create(Object.getPrototypeOf(g));return Ld(k,!0),o.set(g,[b,k]),Reflect.ownKeys(g).forEach(A=>{if(Object.getOwnPropertyDescriptor(k,A))return;const M=Reflect.get(g,A),q={value:M,enumerable:!0,configurable:!0};if(co.has(M))Ld(M,!1);else if(M instanceof Promise)delete q.value,q.get=()=>I(M);else if(Ar.has(M)){const[L,E]=Ar.get(M);q.value=c(L,E(),I)}Object.defineProperty(k,A,q)}),Object.preventExtensions(k)},l=new WeakMap,d=[1,1],m=g=>{if(!kc(g))throw new Error("object required");const b=l.get(g);if(b)return b;let I=d[0];const S=new Set,k=(B,X=++d[0])=>{I!==X&&(I=X,S.forEach(ne=>ne(B,X)))};let A=d[1];const M=(B=++d[1])=>(A!==B&&!S.size&&(A=B,L.forEach(([X])=>{const ne=X[1](B);ne>I&&(I=ne)})),I),q=B=>(X,ne)=>{const Me=[...X];Me[1]=[B,...Me[1]],k(Me,ne)},L=new Map,E=(B,X)=>{if((Po?"production":void 0)!=="production"&&L.has(B))throw new Error("prop listener already exists");if(S.size){const ne=X[3](q(B));L.set(B,[X,ne])}else L.set(B,[X])},O=B=>{var X;const ne=L.get(B);ne&&(L.delete(B),(X=ne[1])==null||X.call(ne))},C=B=>(S.add(B),S.size===1&&L.forEach(([ne,Me],It)=>{if((Po?"production":void 0)!=="production"&&Me)throw new Error("remove already exists");const et=ne[3](q(It));L.set(It,[ne,et])}),()=>{S.delete(B),S.size===0&&L.forEach(([ne,Me],It)=>{Me&&(Me(),L.set(It,[ne]))})}),R=Array.isArray(g)?[]:Object.create(Object.getPrototypeOf(g)),V=e(R,{deleteProperty(B,X){const ne=Reflect.get(B,X);O(X);const Me=Reflect.deleteProperty(B,X);return Me&&k(["delete",[X],ne]),Me},set(B,X,ne,Me){const It=Reflect.has(B,X),et=Reflect.get(B,X,Me);if(It&&(r(et,ne)||l.has(ne)&&r(et,l.get(ne))))return!0;O(X),kc(ne)&&(ne=V2(ne)||ne);let yr=ne;if(ne instanceof Promise)ne.then(St=>{ne.status="fulfilled",ne.value=St,k(["resolve",[X],St])}).catch(St=>{ne.status="rejected",ne.reason=St,k(["reject",[X],St])});else{!Ar.has(ne)&&t(ne)&&(yr=m(ne));const St=!co.has(yr)&&Ar.get(yr);St&&E(X,St)}return Reflect.set(B,X,yr,Me),k(["set",[X],ne,et]),!0}});l.set(g,V);const F=[R,M,c,C];return Ar.set(V,F),Reflect.ownKeys(g).forEach(B=>{const X=Object.getOwnPropertyDescriptor(g,B);"value"in X&&(V[B]=g[B],delete X.value,delete X.writable),Object.defineProperty(R,B,X)}),V})=>[m,Ar,co,r,e,t,i,o,c,l,d],[rC]=tC();function Vr(r={}){return rC(r)}function bn(r,e,t){const i=Ar.get(r);(Po?"production":void 0)!=="production"&&!i&&console.warn("Please use proxy object");let o;const c=[],l=i[3];let d=!1;const g=l(b=>{c.push(b),o||(o=Promise.resolve().then(()=>{o=void 0,d&&e(c.splice(0))}))});return d=!0,()=>{d=!1,g()}}function nC(r,e){const t=Ar.get(r);(Po?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[i,o,c]=t;return c(i,o(),e)}const je=Vr({history:["ConnectWallet"],view:"ConnectWallet",data:void 0}),Oe={state:je,subscribe(r){return bn(je,()=>r(je))},push(r,e){r!==je.view&&(je.view=r,e&&(je.data=e),je.history.push(r))},reset(r){je.view=r,je.history=[r]},replace(r){je.history.length>1&&(je.history[je.history.length-1]=r,je.view=r)},goBack(){if(je.history.length>1){je.history.pop();const[r]=je.history.slice(-1);je.view=r}},setData(r){je.data=r}},Y={WALLETCONNECT_DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",WCM_VERSION:"WCM_VERSION",RECOMMENDED_WALLET_AMOUNT:9,isMobile(){return typeof window<"u"?!!(window.matchMedia("(pointer:coarse)").matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent)):!1},isAndroid(){return Y.isMobile()&&navigator.userAgent.toLowerCase().includes("android")},isIos(){const r=navigator.userAgent.toLowerCase();return Y.isMobile()&&(r.includes("iphone")||r.includes("ipad"))},isHttpUrl(r){return r.startsWith("http://")||r.startsWith("https://")},isArray(r){return Array.isArray(r)&&r.length>0},formatNativeUrl(r,e,t){if(Y.isHttpUrl(r))return this.formatUniversalUrl(r,e,t);let i=r;i.includes("://")||(i=r.replaceAll("/","").replaceAll(":",""),i=`${i}://`),i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,t);const o=encodeURIComponent(e);return`${i}wc?uri=${o}`},formatUniversalUrl(r,e,t){if(!Y.isHttpUrl(r))return this.formatNativeUrl(r,e,t);let i=r;i.endsWith("/")||(i=`${i}/`),this.setWalletConnectDeepLink(i,t);const o=encodeURIComponent(e);return`${i}wc?uri=${o}`},async wait(r){return new Promise(e=>{setTimeout(e,r)})},openHref(r,e){window.open(r,e,"noreferrer noopener")},setWalletConnectDeepLink(r,e){try{localStorage.setItem(Y.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:r,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},setWalletConnectAndroidDeepLink(r){try{const[e]=r.split("?");localStorage.setItem(Y.WALLETCONNECT_DEEPLINK_CHOICE,JSON.stringify({href:e,name:"Android"}))}catch{console.info("Unable to set WalletConnect android deep link")}},removeWalletConnectDeepLink(){try{localStorage.removeItem(Y.WALLETCONNECT_DEEPLINK_CHOICE)}catch{console.info("Unable to remove WalletConnect deep link")}},setModalVersionInStorage(){try{typeof localStorage<"u"&&localStorage.setItem(Y.WCM_VERSION,"2.6.2")}catch{console.info("Unable to set Web3Modal version in storage")}},getWalletRouterData(){var r;const e=(r=Oe.state.data)==null?void 0:r.Wallet;if(!e)throw new Error('Missing "Wallet" view data');return e}},iC=typeof location<"u"&&(location.hostname.includes("localhost")||location.protocol.includes("https")),Ve=Vr({enabled:iC,userSessionId:"",events:[],connectedWalletId:void 0}),W0={state:Ve,subscribe(r){return bn(Ve.events,()=>r(nC(Ve.events[Ve.events.length-1])))},initialize(){Ve.enabled&&typeof(crypto==null?void 0:crypto.randomUUID)<"u"&&(Ve.userSessionId=crypto.randomUUID())},setConnectedWalletId(r){Ve.connectedWalletId=r},click(r){if(Ve.enabled){const e={type:"CLICK",name:r.name,userSessionId:Ve.userSessionId,timestamp:Date.now(),data:r};Ve.events.push(e)}},track(r){if(Ve.enabled){const e={type:"TRACK",name:r.name,userSessionId:Ve.userSessionId,timestamp:Date.now(),data:r};Ve.events.push(e)}},view(r){if(Ve.enabled){const e={type:"VIEW",name:r.name,userSessionId:Ve.userSessionId,timestamp:Date.now(),data:r};Ve.events.push(e)}}},Gt=Vr({chains:void 0,walletConnectUri:void 0,isAuth:!1,isCustomDesktop:!1,isCustomMobile:!1,isDataLoaded:!1,isUiLoaded:!1}),Ne={state:Gt,subscribe(r){return bn(Gt,()=>r(Gt))},setChains(r){Gt.chains=r},setWalletConnectUri(r){Gt.walletConnectUri=r},setIsCustomDesktop(r){Gt.isCustomDesktop=r},setIsCustomMobile(r){Gt.isCustomMobile=r},setIsDataLoaded(r){Gt.isDataLoaded=r},setIsUiLoaded(r){Gt.isUiLoaded=r},setIsAuth(r){Gt.isAuth=r}},lo=Vr({projectId:"",mobileWallets:void 0,desktopWallets:void 0,walletImages:void 0,chains:void 0,enableAuthMode:!1,enableExplorer:!0,explorerExcludedWalletIds:void 0,explorerRecommendedWalletIds:void 0,termsOfServiceUrl:void 0,privacyPolicyUrl:void 0}),Et={state:lo,subscribe(r){return bn(lo,()=>r(lo))},setConfig(r){var e,t;W0.initialize(),Ne.setChains(r.chains),Ne.setIsAuth(!!r.enableAuthMode),Ne.setIsCustomMobile(!!((e=r.mobileWallets)!=null&&e.length)),Ne.setIsCustomDesktop(!!((t=r.desktopWallets)!=null&&t.length)),Y.setModalVersionInStorage(),Object.assign(lo,r)}};var sC=Object.defineProperty,mf=Object.getOwnPropertySymbols,oC=Object.prototype.hasOwnProperty,aC=Object.prototype.propertyIsEnumerable,wf=(r,e,t)=>e in r?sC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,cC=(r,e)=>{for(var t in e||(e={}))oC.call(e,t)&&wf(r,t,e[t]);if(mf)for(var t of mf(e))aC.call(e,t)&&wf(r,t,e[t]);return r};const xl="https://explorer-api.walletconnect.com",Ol="wcm",Cl="js-2.6.2";async function uo(r,e){const t=cC({sdkType:Ol,sdkVersion:Cl},e),i=new URL(r,xl);return i.searchParams.append("projectId",Et.state.projectId),Object.entries(t).forEach(([o,c])=>{c&&i.searchParams.append(o,String(c))}),(await fetch(i)).json()}const an={async getDesktopListings(r){return uo("/w3m/v1/getDesktopListings",r)},async getMobileListings(r){return uo("/w3m/v1/getMobileListings",r)},async getInjectedListings(r){return uo("/w3m/v1/getInjectedListings",r)},async getAllListings(r){return uo("/w3m/v1/getAllListings",r)},getWalletImageUrl(r){return`${xl}/w3m/v1/getWalletImage/${r}?projectId=${Et.state.projectId}&sdkType=${Ol}&sdkVersion=${Cl}`},getAssetImageUrl(r){return`${xl}/w3m/v1/getAssetImage/${r}?projectId=${Et.state.projectId}&sdkType=${Ol}&sdkVersion=${Cl}`}};var lC=Object.defineProperty,vf=Object.getOwnPropertySymbols,uC=Object.prototype.hasOwnProperty,hC=Object.prototype.propertyIsEnumerable,yf=(r,e,t)=>e in r?lC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,dC=(r,e)=>{for(var t in e||(e={}))uC.call(e,t)&&yf(r,t,e[t]);if(vf)for(var t of vf(e))hC.call(e,t)&&yf(r,t,e[t]);return r};const _f=Y.isMobile(),Yt=Vr({wallets:{listings:[],total:0,page:1},search:{listings:[],total:0,page:1},recomendedWallets:[]}),at={state:Yt,async getRecomendedWallets(){const{explorerRecommendedWalletIds:r,explorerExcludedWalletIds:e}=Et.state;if(r==="NONE"||e==="ALL"&&!r)return Yt.recomendedWallets;if(Y.isArray(r)){const t={recommendedIds:r.join(",")},{listings:i}=await an.getAllListings(t),o=Object.values(i);o.sort((c,l)=>{const d=r.indexOf(c.id),m=r.indexOf(l.id);return d-m}),Yt.recomendedWallets=o}else{const{chains:t,isAuth:i}=Ne.state,o=t?.join(","),c=Y.isArray(e),l={page:1,sdks:i?"auth_v1":void 0,entries:Y.RECOMMENDED_WALLET_AMOUNT,chains:o,version:2,excludedIds:c?e.join(","):void 0},{listings:d}=_f?await an.getMobileListings(l):await an.getDesktopListings(l);Yt.recomendedWallets=Object.values(d)}return Yt.recomendedWallets},async getWallets(r){const e=dC({},r),{explorerRecommendedWalletIds:t,explorerExcludedWalletIds:i}=Et.state,{recomendedWallets:o}=Yt;if(i==="ALL")return Yt.wallets;o.length?e.excludedIds=o.map(I=>I.id).join(","):Y.isArray(t)&&(e.excludedIds=t.join(",")),Y.isArray(i)&&(e.excludedIds=[e.excludedIds,i].filter(Boolean).join(",")),Ne.state.isAuth&&(e.sdks="auth_v1");const{page:c,search:l}=r,{listings:d,total:m}=_f?await an.getMobileListings(e):await an.getDesktopListings(e),g=Object.values(d),b=l?"search":"wallets";return Yt[b]={listings:[...Yt[b].listings,...g],total:m,page:c??1},{listings:g,total:m}},getWalletImageUrl(r){return an.getWalletImageUrl(r)},getAssetImageUrl(r){return an.getAssetImageUrl(r)},resetSearch(){Yt.search={listings:[],total:0,page:1}}},Wn=Vr({open:!1}),gn={state:Wn,subscribe(r){return bn(Wn,()=>r(Wn))},async open(r){return new Promise(e=>{const{isUiLoaded:t,isDataLoaded:i}=Ne.state;if(Y.removeWalletConnectDeepLink(),Ne.setWalletConnectUri(r?.uri),Ne.setChains(r?.chains),Oe.reset("ConnectWallet"),t&&i)Wn.open=!0,e();else{const o=setInterval(()=>{const c=Ne.state;c.isUiLoaded&&c.isDataLoaded&&(clearInterval(o),Wn.open=!0,e())},200)}})},close(){Wn.open=!1}};var pC=Object.defineProperty,bf=Object.getOwnPropertySymbols,fC=Object.prototype.hasOwnProperty,gC=Object.prototype.propertyIsEnumerable,Ef=(r,e,t)=>e in r?pC(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,mC=(r,e)=>{for(var t in e||(e={}))fC.call(e,t)&&Ef(r,t,e[t]);if(bf)for(var t of bf(e))gC.call(e,t)&&Ef(r,t,e[t]);return r};function wC(){return typeof matchMedia<"u"&&matchMedia("(prefers-color-scheme: dark)").matches}const zi=Vr({themeMode:wC()?"dark":"light"}),zr={state:zi,subscribe(r){return bn(zi,()=>r(zi))},setThemeConfig(r){const{themeMode:e,themeVariables:t}=r;e&&(zi.themeMode=e),t&&(zi.themeVariables=mC({},t))}},cn=Vr({open:!1,message:"",variant:"success"}),kr={state:cn,subscribe(r){return bn(cn,()=>r(cn))},openToast(r,e){cn.open=!0,cn.message=r,cn.variant=e},closeToast(){cn.open=!1}};class vC{constructor(e){this.openModal=gn.open,this.closeModal=gn.close,this.subscribeModal=gn.subscribe,this.setTheme=zr.setThemeConfig,zr.setThemeConfig(e),Et.setConfig(e),this.initUi()}async initUi(){if(typeof window<"u"){await Lf(()=>Promise.resolve().then(()=>r9),void 0);const e=document.createElement("wcm-modal");document.body.insertAdjacentElement("beforeend",e),Ne.setIsUiLoaded(!0)}}}const yC=Object.freeze(Object.defineProperty({__proto__:null,WalletConnectModal:vC},Symbol.toStringTag,{value:"Module"}));var _C=Object.defineProperty,If=Object.getOwnPropertySymbols,bC=Object.prototype.hasOwnProperty,EC=Object.prototype.propertyIsEnumerable,Sf=(r,e,t)=>e in r?_C(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Dc=(r,e)=>{for(var t in e||(e={}))bC.call(e,t)&&Sf(r,t,e[t]);if(If)for(var t of If(e))EC.call(e,t)&&Sf(r,t,e[t]);return r};function IC(){var r;const e=(r=zr.state.themeMode)!=null?r:"dark",t={light:{foreground:{1:"rgb(20,20,20)",2:"rgb(121,134,134)",3:"rgb(158,169,169)"},background:{1:"rgb(255,255,255)",2:"rgb(241,243,243)",3:"rgb(228,231,231)"},overlay:"rgba(0,0,0,0.1)"},dark:{foreground:{1:"rgb(228,231,231)",2:"rgb(148,158,158)",3:"rgb(110,119,119)"},background:{1:"rgb(20,20,20)",2:"rgb(39,42,42)",3:"rgb(59,64,64)"},overlay:"rgba(255,255,255,0.1)"}}[e];return{"--wcm-color-fg-1":t.foreground[1],"--wcm-color-fg-2":t.foreground[2],"--wcm-color-fg-3":t.foreground[3],"--wcm-color-bg-1":t.background[1],"--wcm-color-bg-2":t.background[2],"--wcm-color-bg-3":t.background[3],"--wcm-color-overlay":t.overlay}}function xf(){return{"--wcm-accent-color":"#3396FF","--wcm-accent-fill-color":"#FFFFFF","--wcm-z-index":"89","--wcm-background-color":"#3396FF","--wcm-background-border-radius":"8px","--wcm-container-border-radius":"30px","--wcm-wallet-icon-border-radius":"15px","--wcm-wallet-icon-large-border-radius":"30px","--wcm-wallet-icon-small-border-radius":"7px","--wcm-input-border-radius":"28px","--wcm-button-border-radius":"10px","--wcm-notification-border-radius":"36px","--wcm-secondary-button-border-radius":"28px","--wcm-icon-button-border-radius":"50%","--wcm-button-hover-highlight-border-radius":"10px","--wcm-text-big-bold-size":"20px","--wcm-text-big-bold-weight":"600","--wcm-text-big-bold-line-height":"24px","--wcm-text-big-bold-letter-spacing":"-0.03em","--wcm-text-big-bold-text-transform":"none","--wcm-text-xsmall-bold-size":"10px","--wcm-text-xsmall-bold-weight":"700","--wcm-text-xsmall-bold-line-height":"12px","--wcm-text-xsmall-bold-letter-spacing":"0.02em","--wcm-text-xsmall-bold-text-transform":"uppercase","--wcm-text-xsmall-regular-size":"12px","--wcm-text-xsmall-regular-weight":"600","--wcm-text-xsmall-regular-line-height":"14px","--wcm-text-xsmall-regular-letter-spacing":"-0.03em","--wcm-text-xsmall-regular-text-transform":"none","--wcm-text-small-thin-size":"14px","--wcm-text-small-thin-weight":"500","--wcm-text-small-thin-line-height":"16px","--wcm-text-small-thin-letter-spacing":"-0.03em","--wcm-text-small-thin-text-transform":"none","--wcm-text-small-regular-size":"14px","--wcm-text-small-regular-weight":"600","--wcm-text-small-regular-line-height":"16px","--wcm-text-small-regular-letter-spacing":"-0.03em","--wcm-text-small-regular-text-transform":"none","--wcm-text-medium-regular-size":"16px","--wcm-text-medium-regular-weight":"600","--wcm-text-medium-regular-line-height":"20px","--wcm-text-medium-regular-letter-spacing":"-0.03em","--wcm-text-medium-regular-text-transform":"none","--wcm-font-family":"-apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', Roboto, Ubuntu, 'Helvetica Neue', sans-serif","--wcm-font-feature-settings":"'tnum' on, 'lnum' on, 'case' on","--wcm-success-color":"rgb(38,181,98)","--wcm-error-color":"rgb(242, 90, 103)","--wcm-overlay-background-color":"rgba(0, 0, 0, 0.3)","--wcm-overlay-backdrop-filter":"none"}}const he={getPreset(r){return xf()[r]},setTheme(){const r=document.querySelector(":root"),{themeVariables:e}=zr.state;if(r){const t=Dc(Dc(Dc({},IC()),xf()),e);Object.entries(t).forEach(([i,o])=>r.style.setProperty(i,o))}},globalCss:ge`*,::after,::before{margin:0;padding:0;box-sizing:border-box;font-style:normal;text-rendering:optimizeSpeed;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-tap-highlight-color:transparent;backface-visibility:hidden}button{cursor:pointer;display:flex;justify-content:center;align-items:center;position:relative;border:none;background-color:transparent;transition:all .2s ease}@media (hover:hover) and (pointer:fine){button:active{transition:all .1s ease;transform:scale(.93)}}button::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;transition:background-color,.2s ease}button:disabled{cursor:not-allowed}button svg,button wcm-text{position:relative;z-index:1}input{border:none;outline:0;appearance:none}img{display:block}::selection{color:var(--wcm-accent-fill-color);background:var(--wcm-accent-color)}`},SC=ge`button{border-radius:var(--wcm-secondary-button-border-radius);height:28px;padding:0 10px;background-color:var(--wcm-accent-color)}button path{fill:var(--wcm-accent-fill-color)}button::after{border-radius:inherit;border:1px solid var(--wcm-color-overlay)}button:disabled::after{background-color:transparent}.wcm-icon-left svg{margin-right:5px}.wcm-icon-right svg{margin-left:5px}button:active::after{background-color:var(--wcm-color-overlay)}.wcm-ghost,.wcm-ghost:active::after,.wcm-outline{background-color:transparent}.wcm-ghost:active{opacity:.5}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}.wcm-ghost:hover::after{background-color:transparent}.wcm-ghost:hover{opacity:.5}}button:disabled{background-color:var(--wcm-color-bg-3);pointer-events:none}.wcm-ghost::after{border-color:transparent}.wcm-ghost path{fill:var(--wcm-color-fg-2)}.wcm-outline path{fill:var(--wcm-accent-color)}.wcm-outline:disabled{background-color:transparent;opacity:.5}`;var xC=Object.defineProperty,OC=Object.getOwnPropertyDescriptor,Hn=(r,e,t,i)=>{for(var o=i>1?void 0:i?OC(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&xC(e,t,o),o};let $r=class extends de{constructor(){super(...arguments),this.disabled=!1,this.iconLeft=void 0,this.iconRight=void 0,this.onClick=()=>null,this.variant="default"}render(){const r={"wcm-icon-left":this.iconLeft!==void 0,"wcm-icon-right":this.iconRight!==void 0,"wcm-ghost":this.variant==="ghost","wcm-outline":this.variant==="outline"};let e="inverse";return this.variant==="ghost"&&(e="secondary"),this.variant==="outline"&&(e="accent"),j`<button class="${mr(r)}" ?disabled="${this.disabled}" @click="${this.onClick}">${this.iconLeft}<wcm-text variant="small-regular" color="${e}"><slot></slot></wcm-text>${this.iconRight}</button>`}};$r.styles=[he.globalCss,SC],Hn([oe({type:Boolean})],$r.prototype,"disabled",2),Hn([oe()],$r.prototype,"iconLeft",2),Hn([oe()],$r.prototype,"iconRight",2),Hn([oe()],$r.prototype,"onClick",2),Hn([oe()],$r.prototype,"variant",2),$r=Hn([pe("wcm-button")],$r);const CC=ge`:host{display:inline-block}button{padding:0 15px 1px;height:40px;border-radius:var(--wcm-button-border-radius);color:var(--wcm-accent-fill-color);background-color:var(--wcm-accent-color)}button::after{content:'';top:0;bottom:0;left:0;right:0;position:absolute;background-color:transparent;border-radius:inherit;transition:background-color .2s ease;border:1px solid var(--wcm-color-overlay)}button:active::after{background-color:var(--wcm-color-overlay)}button:disabled{padding-bottom:0;background-color:var(--wcm-color-bg-3);color:var(--wcm-color-fg-3)}.wcm-secondary{color:var(--wcm-accent-color);background-color:transparent}.wcm-secondary::after{display:none}@media(hover:hover){button:hover::after{background-color:var(--wcm-color-overlay)}}`;var RC=Object.defineProperty,$C=Object.getOwnPropertyDescriptor,Mc=(r,e,t,i)=>{for(var o=i>1?void 0:i?$C(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&RC(e,t,o),o};let Fi=class extends de{constructor(){super(...arguments),this.disabled=!1,this.variant="primary"}render(){const r={"wcm-secondary":this.variant==="secondary"};return j`<button ?disabled="${this.disabled}" class="${mr(r)}"><slot></slot></button>`}};Fi.styles=[he.globalCss,CC],Mc([oe({type:Boolean})],Fi.prototype,"disabled",2),Mc([oe()],Fi.prototype,"variant",2),Fi=Mc([pe("wcm-button-big")],Fi);const PC=ge`:host{background-color:var(--wcm-color-bg-2);border-top:1px solid var(--wcm-color-bg-3)}div{padding:10px 20px;display:inherit;flex-direction:inherit;align-items:inherit;width:inherit;justify-content:inherit}`;var TC=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Lc=class extends de{render(){return j`<div><slot></slot></div>`}};Lc.styles=[he.globalCss,PC],Lc=TC([pe("wcm-info-footer")],Lc);const we={CROSS_ICON:Re`<svg width="12" height="12" viewBox="0 0 12 12"><path d="M9.94 11A.75.75 0 1 0 11 9.94L7.414 6.353a.5.5 0 0 1 0-.708L11 2.061A.75.75 0 1 0 9.94 1L6.353 4.586a.5.5 0 0 1-.708 0L2.061 1A.75.75 0 0 0 1 2.06l3.586 3.586a.5.5 0 0 1 0 .708L1 9.939A.75.75 0 1 0 2.06 11l3.586-3.586a.5.5 0 0 1 .708 0L9.939 11Z" fill="#fff"/></svg>`,WALLET_CONNECT_LOGO:Re`<svg width="178" height="29" viewBox="0 0 178 29" id="wcm-wc-logo"><path d="M10.683 7.926c5.284-5.17 13.85-5.17 19.134 0l.636.623a.652.652 0 0 1 0 .936l-2.176 2.129a.343.343 0 0 1-.478 0l-.875-.857c-3.686-3.607-9.662-3.607-13.348 0l-.937.918a.343.343 0 0 1-.479 0l-2.175-2.13a.652.652 0 0 1 0-.936l.698-.683Zm23.633 4.403 1.935 1.895a.652.652 0 0 1 0 .936l-8.73 8.543a.687.687 0 0 1-.956 0L20.37 17.64a.172.172 0 0 0-.239 0l-6.195 6.063a.687.687 0 0 1-.957 0l-8.73-8.543a.652.652 0 0 1 0-.936l1.936-1.895a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .239 0l6.195-6.064a.687.687 0 0 1 .957 0l6.196 6.064a.172.172 0 0 0 .24 0l6.195-6.064a.687.687 0 0 1 .956 0ZM48.093 20.948l2.338-9.355c.139-.515.258-1.07.416-1.942.12.872.258 1.427.357 1.942l2.022 9.355h4.181l3.528-13.874h-3.21l-1.943 8.523a24.825 24.825 0 0 0-.456 2.457c-.158-.931-.317-1.625-.495-2.438l-1.883-8.542h-4.201l-2.042 8.542a41.204 41.204 0 0 0-.475 2.438 41.208 41.208 0 0 0-.476-2.438l-1.903-8.542h-3.349l3.508 13.874h4.083ZM63.33 21.304c1.585 0 2.596-.654 3.11-1.605-.059.297-.078.595-.078.892v.357h2.655V15.22c0-2.735-1.248-4.32-4.3-4.32-2.636 0-4.36 1.466-4.52 3.487h2.914c.1-.891.734-1.426 1.705-1.426.911 0 1.407.515 1.407 1.11 0 .435-.258.693-1.03.792l-1.388.159c-2.061.257-3.825 1.01-3.825 3.19 0 1.982 1.645 3.092 3.35 3.092Zm.891-2.041c-.773 0-1.348-.436-1.348-1.19 0-.733.655-1.09 1.645-1.268l.674-.119c.575-.118.892-.218 1.09-.396v.912c0 1.228-.892 2.06-2.06 2.06ZM70.398 7.074v13.874h2.874V7.074h-2.874ZM74.934 7.074v13.874h2.874V7.074h-2.874ZM84.08 21.304c2.735 0 4.5-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922H81.92ZM94.92 21.146c.633 0 1.248-.1 1.525-.179v-2.18c-.218.04-.475.06-.693.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.338v-2.24h-2.338V7.788H91.47v3.448H89.37v2.24h2.1v4.201c0 2.3 1.15 3.469 3.45 3.469ZM104.62 21.304c3.924 0 6.302-2.299 6.599-5.608h-3.111c-.238 1.803-1.506 3.032-3.369 3.032-2.2 0-3.746-1.784-3.746-4.796 0-2.953 1.605-4.638 3.805-4.638 1.883 0 2.953 1.15 3.171 2.834h3.191c-.317-3.448-2.854-5.41-6.342-5.41-3.984 0-7.036 2.695-7.036 7.214 0 4.677 2.676 7.372 6.838 7.372ZM117.449 21.304c2.993 0 5.114-1.882 5.114-5.172 0-3.23-2.121-5.233-5.114-5.233-2.972 0-5.093 2.002-5.093 5.233 0 3.29 2.101 5.172 5.093 5.172Zm0-2.22c-1.327 0-2.18-1.09-2.18-2.952 0-1.903.892-2.973 2.18-2.973 1.308 0 2.2 1.07 2.2 2.973 0 1.862-.872 2.953-2.2 2.953ZM126.569 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.229-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM137.464 20.948v-5.689c0-1.208.753-2.1 1.823-2.1 1.011 0 1.606.773 1.606 2.06v5.729h2.873v-6.144c0-2.339-1.228-3.905-3.428-3.905-1.526 0-2.458.734-2.953 1.606a5.31 5.31 0 0 0 .079-.892v-.377h-2.874v9.712h2.874ZM149.949 21.304c2.735 0 4.499-1.546 4.697-3.567h-2.893c-.139.892-.892 1.387-1.804 1.387-1.228 0-2.12-.99-2.14-2.358h6.897v-.555c0-3.21-1.764-5.312-4.816-5.312-2.933 0-4.994 2.062-4.994 5.173 0 3.37 2.12 5.232 5.053 5.232Zm-2.16-6.421c.119-1.11.932-1.922 2.081-1.922 1.11 0 1.883.772 1.903 1.922h-3.984ZM160.876 21.304c3.013 0 4.658-1.645 4.975-4.201h-2.874c-.099 1.07-.713 1.982-2.001 1.982-1.309 0-2.2-1.21-2.2-2.993 0-1.942 1.03-2.933 2.259-2.933 1.209 0 1.803.872 1.883 1.882h2.873c-.218-2.358-1.823-4.142-4.776-4.142-2.874 0-5.153 1.903-5.153 5.193 0 3.25 1.923 5.212 5.014 5.212ZM172.067 21.146c.634 0 1.248-.1 1.526-.179v-2.18c-.218.04-.476.06-.694.06-1.05 0-1.427-.595-1.427-1.566v-3.805h2.339v-2.24h-2.339V7.788h-2.854v3.448h-2.1v2.24h2.1v4.201c0 2.3 1.15 3.469 3.449 3.469Z" fill="#fff"/></svg>`,WALLET_CONNECT_ICON:Re`<svg width="28" height="20" viewBox="0 0 28 20"><g clip-path="url(#a)"><path d="M7.386 6.482c3.653-3.576 9.575-3.576 13.228 0l.44.43a.451.451 0 0 1 0 .648L19.55 9.033a.237.237 0 0 1-.33 0l-.606-.592c-2.548-2.496-6.68-2.496-9.228 0l-.648.634a.237.237 0 0 1-.33 0L6.902 7.602a.451.451 0 0 1 0-.647l.483-.473Zm16.338 3.046 1.339 1.31a.451.451 0 0 1 0 .648l-6.035 5.909a.475.475 0 0 1-.662 0L14.083 13.2a.119.119 0 0 0-.166 0l-4.283 4.194a.475.475 0 0 1-.662 0l-6.035-5.91a.451.451 0 0 1 0-.647l1.338-1.31a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0l4.283 4.194c.046.044.12.044.166 0l4.283-4.194a.475.475 0 0 1 .662 0Z" fill="#000000"/></g><defs><clipPath id="a"><path fill="#ffffff" d="M0 0h28v20H0z"/></clipPath></defs></svg>`,WALLET_CONNECT_ICON_COLORED:Re`<svg width="96" height="96" fill="none"><path fill="#fff" d="M25.322 33.597c12.525-12.263 32.83-12.263 45.355 0l1.507 1.476a1.547 1.547 0 0 1 0 2.22l-5.156 5.048a.814.814 0 0 1-1.134 0l-2.074-2.03c-8.737-8.555-22.903-8.555-31.64 0l-2.222 2.175a.814.814 0 0 1-1.134 0l-5.156-5.049a1.547 1.547 0 0 1 0-2.22l1.654-1.62Zm56.019 10.44 4.589 4.494a1.547 1.547 0 0 1 0 2.22l-20.693 20.26a1.628 1.628 0 0 1-2.267 0L48.283 56.632a.407.407 0 0 0-.567 0L33.03 71.012a1.628 1.628 0 0 1-2.268 0L10.07 50.75a1.547 1.547 0 0 1 0-2.22l4.59-4.494a1.628 1.628 0 0 1 2.267 0l14.687 14.38c.156.153.41.153.567 0l14.685-14.38a1.628 1.628 0 0 1 2.268 0l14.687 14.38c.156.153.41.153.567 0l14.686-14.38a1.628 1.628 0 0 1 2.268 0Z"/><path stroke="#000" d="M25.672 33.954c12.33-12.072 32.325-12.072 44.655 0l1.508 1.476a1.047 1.047 0 0 1 0 1.506l-5.157 5.048a.314.314 0 0 1-.434 0l-2.074-2.03c-8.932-8.746-23.409-8.746-32.34 0l-2.222 2.174a.314.314 0 0 1-.434 0l-5.157-5.048a1.047 1.047 0 0 1 0-1.506l1.655-1.62Zm55.319 10.44 4.59 4.494a1.047 1.047 0 0 1 0 1.506l-20.694 20.26a1.128 1.128 0 0 1-1.568 0l-14.686-14.38a.907.907 0 0 0-1.267 0L32.68 70.655a1.128 1.128 0 0 1-1.568 0L10.42 50.394a1.047 1.047 0 0 1 0-1.506l4.59-4.493a1.128 1.128 0 0 1 1.567 0l14.687 14.379a.907.907 0 0 0 1.266 0l-.35-.357.35.357 14.686-14.38a1.128 1.128 0 0 1 1.568 0l14.687 14.38a.907.907 0 0 0 1.267 0l14.686-14.38a1.128 1.128 0 0 1 1.568 0Z"/></svg>`,BACK_ICON:Re`<svg width="10" height="18" viewBox="0 0 10 18"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.735.179a.75.75 0 0 1 .087 1.057L2.92 8.192a1.25 1.25 0 0 0 0 1.617l5.902 6.956a.75.75 0 1 1-1.144.97L1.776 10.78a2.75 2.75 0 0 1 0-3.559L7.678.265A.75.75 0 0 1 8.735.18Z" fill="#fff"/></svg>`,COPY_ICON:Re`<svg width="24" height="24" fill="none"><path fill="#fff" fill-rule="evenodd" d="M7.01 7.01c.03-1.545.138-2.5.535-3.28A5 5 0 0 1 9.73 1.545C10.8 1 12.2 1 15 1c2.8 0 4.2 0 5.27.545a5 5 0 0 1 2.185 2.185C23 4.8 23 6.2 23 9c0 2.8 0 4.2-.545 5.27a5 5 0 0 1-2.185 2.185c-.78.397-1.735.505-3.28.534l-.001.01c-.03 1.54-.138 2.493-.534 3.27a5 5 0 0 1-2.185 2.186C13.2 23 11.8 23 9 23c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C1 19.2 1 17.8 1 15c0-2.8 0-4.2.545-5.27A5 5 0 0 1 3.73 7.545C4.508 7.149 5.46 7.04 7 7.01h.01ZM15 15.5c-1.425 0-2.403-.001-3.162-.063-.74-.06-1.139-.172-1.427-.319a3.5 3.5 0 0 1-1.53-1.529c-.146-.288-.257-.686-.318-1.427C8.501 11.403 8.5 10.425 8.5 9c0-1.425.001-2.403.063-3.162.06-.74.172-1.139.318-1.427a3.5 3.5 0 0 1 1.53-1.53c.288-.146.686-.257 1.427-.318.759-.062 1.737-.063 3.162-.063 1.425 0 2.403.001 3.162.063.74.06 1.139.172 1.427.318a3.5 3.5 0 0 1 1.53 1.53c.146.288.257.686.318 1.427.062.759.063 1.737.063 3.162 0 1.425-.001 2.403-.063 3.162-.06.74-.172 1.139-.319 1.427a3.5 3.5 0 0 1-1.529 1.53c-.288.146-.686.257-1.427.318-.759.062-1.737.063-3.162.063ZM7 8.511c-.444.009-.825.025-1.162.052-.74.06-1.139.172-1.427.318a3.5 3.5 0 0 0-1.53 1.53c-.146.288-.257.686-.318 1.427-.062.759-.063 1.737-.063 3.162 0 1.425.001 2.403.063 3.162.06.74.172 1.139.318 1.427a3.5 3.5 0 0 0 1.53 1.53c.288.146.686.257 1.427.318.759.062 1.737.063 3.162.063 1.425 0 2.403-.001 3.162-.063.74-.06 1.139-.172 1.427-.319a3.5 3.5 0 0 0 1.53-1.53c.146-.287.257-.685.318-1.426.027-.337.043-.718.052-1.162H15c-2.8 0-4.2 0-5.27-.545a5 5 0 0 1-2.185-2.185C7 13.2 7 11.8 7 9v-.489Z" clip-rule="evenodd"/></svg>`,RETRY_ICON:Re`<svg width="15" height="16" viewBox="0 0 15 16"><path d="M6.464 2.03A.75.75 0 0 0 5.403.97L2.08 4.293a1 1 0 0 0 0 1.414L5.403 9.03a.75.75 0 0 0 1.06-1.06L4.672 6.177a.25.25 0 0 1 .177-.427h2.085a4 4 0 1 1-3.93 4.746c-.077-.407-.405-.746-.82-.746-.414 0-.755.338-.7.748a5.501 5.501 0 1 0 5.45-6.248H4.848a.25.25 0 0 1-.177-.427L6.464 2.03Z" fill="#fff"/></svg>`,DESKTOP_ICON:Re`<svg width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C2.204 1 3.13 1 4.98 1h6.04c1.85 0 2.775 0 3.466.394a3 3 0 0 1 1.12 1.12C16 3.204 16 4.13 16 5.98v1.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C13.796 12 12.87 12 11.02 12H4.98c-1.85 0-2.775 0-3.466-.394a3 3 0 0 1-1.12-1.12C0 9.796 0 8.87 0 7.02V5.98ZM4.98 2.5h6.04c.953 0 1.568.001 2.034.043.446.04.608.108.69.154a1.5 1.5 0 0 1 .559.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033v1.04c0 .952-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.046-.243.114-.69.154-.466.042-1.08.043-2.033.043H4.98c-.952 0-1.568-.001-2.034-.043-.446-.04-.608-.108-.69-.154a1.5 1.5 0 0 1-.559-.56c-.046-.08-.114-.243-.154-.69-.042-.465-.043-1.08-.043-2.033V5.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.046.243-.114.69-.154.465-.042 1.08-.043 2.033-.043Z" fill="#fff"/><path d="M4 14.25a.75.75 0 0 1 .75-.75h6.5a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,MOBILE_ICON:Re`<svg width="16" height="16" viewBox="0 0 16 16"><path d="M6.75 5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M3 4.98c0-1.85 0-2.775.394-3.466a3 3 0 0 1 1.12-1.12C5.204 0 6.136 0 8 0s2.795 0 3.486.394a3 3 0 0 1 1.12 1.12C13 2.204 13 3.13 13 4.98v6.04c0 1.85 0 2.775-.394 3.466a3 3 0 0 1-1.12 1.12C10.796 16 9.864 16 8 16s-2.795 0-3.486-.394a3 3 0 0 1-1.12-1.12C3 13.796 3 12.87 3 11.02V4.98Zm8.5 0v6.04c0 .953-.001 1.568-.043 2.034-.04.446-.108.608-.154.69a1.499 1.499 0 0 1-.56.559c-.08.045-.242.113-.693.154-.47.042-1.091.043-2.05.043-.959 0-1.58-.001-2.05-.043-.45-.04-.613-.109-.693-.154a1.5 1.5 0 0 1-.56-.56c-.046-.08-.114-.243-.154-.69-.042-.466-.043-1.08-.043-2.033V4.98c0-.952.001-1.568.043-2.034.04-.446.108-.608.154-.69a1.5 1.5 0 0 1 .56-.559c.08-.045.243-.113.693-.154C6.42 1.501 7.041 1.5 8 1.5c.959 0 1.58.001 2.05.043.45.04.613.109.693.154a1.5 1.5 0 0 1 .56.56c.046.08.114.243.154.69.042.465.043 1.08.043 2.033Z" fill="#fff"/></svg>`,ARROW_DOWN_ICON:Re`<svg width="14" height="14" viewBox="0 0 14 14"><path d="M2.28 7.47a.75.75 0 0 0-1.06 1.06l5.25 5.25a.75.75 0 0 0 1.06 0l5.25-5.25a.75.75 0 0 0-1.06-1.06l-3.544 3.543a.25.25 0 0 1-.426-.177V.75a.75.75 0 0 0-1.5 0v10.086a.25.25 0 0 1-.427.176L2.28 7.47Z" fill="#fff"/></svg>`,ARROW_UP_RIGHT_ICON:Re`<svg width="15" height="14" fill="none"><path d="M4.5 1.75A.75.75 0 0 1 5.25 1H12a1.5 1.5 0 0 1 1.5 1.5v6.75a.75.75 0 0 1-1.5 0V4.164a.25.25 0 0 0-.427-.176L4.061 11.5A.75.75 0 0 1 3 10.44l7.513-7.513a.25.25 0 0 0-.177-.427H5.25a.75.75 0 0 1-.75-.75Z" fill="#fff"/></svg>`,ARROW_RIGHT_ICON:Re`<svg width="6" height="14" viewBox="0 0 6 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M2.181 1.099a.75.75 0 0 1 1.024.279l2.433 4.258a2.75 2.75 0 0 1 0 2.729l-2.433 4.257a.75.75 0 1 1-1.303-.744L4.335 7.62a1.25 1.25 0 0 0 0-1.24L1.902 2.122a.75.75 0 0 1 .28-1.023Z" fill="#fff"/></svg>`,QRCODE_ICON:Re`<svg width="25" height="24" viewBox="0 0 25 24"><path d="M23.748 9a.748.748 0 0 0 .748-.752c-.018-2.596-.128-4.07-.784-5.22a6 6 0 0 0-2.24-2.24c-1.15-.656-2.624-.766-5.22-.784a.748.748 0 0 0-.752.748c0 .414.335.749.748.752 1.015.007 1.82.028 2.494.088.995.09 1.561.256 1.988.5.7.398 1.28.978 1.679 1.678.243.427.41.993.498 1.988.061.675.082 1.479.09 2.493a.753.753 0 0 0 .75.749ZM3.527.788C4.677.132 6.152.022 8.747.004A.748.748 0 0 1 9.5.752a.753.753 0 0 1-.749.752c-1.014.007-1.818.028-2.493.088-.995.09-1.561.256-1.988.5-.7.398-1.28.978-1.679 1.678-.243.427-.41.993-.499 1.988-.06.675-.081 1.479-.088 2.493A.753.753 0 0 1 1.252 9a.748.748 0 0 1-.748-.752c.018-2.596.128-4.07.784-5.22a6 6 0 0 1 2.24-2.24ZM1.252 15a.748.748 0 0 0-.748.752c.018 2.596.128 4.07.784 5.22a6 6 0 0 0 2.24 2.24c1.15.656 2.624.766 5.22.784a.748.748 0 0 0 .752-.748.753.753 0 0 0-.749-.752c-1.014-.007-1.818-.028-2.493-.089-.995-.089-1.561-.255-1.988-.498a4.5 4.5 0 0 1-1.679-1.68c-.243-.426-.41-.992-.499-1.987-.06-.675-.081-1.479-.088-2.493A.753.753 0 0 0 1.252 15ZM22.996 15.749a.753.753 0 0 1 .752-.749c.415 0 .751.338.748.752-.018 2.596-.128 4.07-.784 5.22a6 6 0 0 1-2.24 2.24c-1.15.656-2.624.766-5.22.784a.748.748 0 0 1-.752-.748c0-.414.335-.749.748-.752 1.015-.007 1.82-.028 2.494-.089.995-.089 1.561-.255 1.988-.498a4.5 4.5 0 0 0 1.679-1.68c.243-.426.41-.992.498-1.987.061-.675.082-1.479.09-2.493Z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 4a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 11h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 4H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1ZM13.5 6.5A2.5 2.5 0 0 1 16 4h2a2.5 2.5 0 0 1 2.5 2.5v2A2.5 2.5 0 0 1 18 11h-2a2.5 2.5 0 0 1-2.5-2.5v-2Zm2.5-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1ZM7 13a2.5 2.5 0 0 0-2.5 2.5v2A2.5 2.5 0 0 0 7 20h2a2.5 2.5 0 0 0 2.5-2.5v-2A2.5 2.5 0 0 0 9 13H7Zm2 1.5H7a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1Z" fill="#fff"/><path d="M13.5 15.5c0-.465 0-.697.038-.89a2 2 0 0 1 1.572-1.572C15.303 13 15.535 13 16 13v2.5h-2.5ZM18 13c.465 0 .697 0 .89.038a2 2 0 0 1 1.572 1.572c.038.193.038.425.038.89H18V13ZM18 17.5h2.5c0 .465 0 .697-.038.89a2 2 0 0 1-1.572 1.572C18.697 20 18.465 20 18 20v-2.5ZM13.5 17.5H16V20c-.465 0-.697 0-.89-.038a2 2 0 0 1-1.572-1.572c-.038-.193-.038-.425-.038-.89Z" fill="#fff"/></svg>`,SCAN_ICON:Re`<svg width="16" height="16" fill="none"><path fill="#fff" d="M10 15.216c0 .422.347.763.768.74 1.202-.064 2.025-.222 2.71-.613a5.001 5.001 0 0 0 1.865-1.866c.39-.684.549-1.507.613-2.709a.735.735 0 0 0-.74-.768.768.768 0 0 0-.76.732c-.009.157-.02.306-.032.447-.073.812-.206 1.244-.384 1.555-.31.545-.761.996-1.306 1.306-.311.178-.743.311-1.555.384-.141.013-.29.023-.447.032a.768.768 0 0 0-.732.76ZM10 .784c0 .407.325.737.732.76.157.009.306.02.447.032.812.073 1.244.206 1.555.384a3.5 3.5 0 0 1 1.306 1.306c.178.311.311.743.384 1.555.013.142.023.29.032.447a.768.768 0 0 0 .76.732.734.734 0 0 0 .74-.768c-.064-1.202-.222-2.025-.613-2.71A5 5 0 0 0 13.477.658c-.684-.39-1.507-.549-2.709-.613a.735.735 0 0 0-.768.74ZM5.232.044A.735.735 0 0 1 6 .784a.768.768 0 0 1-.732.76c-.157.009-.305.02-.447.032-.812.073-1.244.206-1.555.384A3.5 3.5 0 0 0 1.96 3.266c-.178.311-.311.743-.384 1.555-.013.142-.023.29-.032.447A.768.768 0 0 1 .784 6a.735.735 0 0 1-.74-.768c.064-1.202.222-2.025.613-2.71A5 5 0 0 1 2.523.658C3.207.267 4.03.108 5.233.044ZM5.268 14.456a.768.768 0 0 1 .732.76.734.734 0 0 1-.768.74c-1.202-.064-2.025-.222-2.71-.613a5 5 0 0 1-1.865-1.866c-.39-.684-.549-1.507-.613-2.709A.735.735 0 0 1 .784 10c.407 0 .737.325.76.732.009.157.02.306.032.447.073.812.206 1.244.384 1.555a3.5 3.5 0 0 0 1.306 1.306c.311.178.743.311 1.555.384.142.013.29.023.447.032Z"/></svg>`,CHECKMARK_ICON:Re`<svg width="13" height="12" viewBox="0 0 13 12"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.155.132a.75.75 0 0 1 .232 1.035L5.821 11.535a1 1 0 0 1-1.626.09L.665 7.21a.75.75 0 1 1 1.17-.937L4.71 9.867a.25.25 0 0 0 .406-.023L11.12.364a.75.75 0 0 1 1.035-.232Z" fill="#fff"/></svg>`,SEARCH_ICON:Re`<svg width="20" height="21"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.432 13.992c-.354-.353-.91-.382-1.35-.146a5.5 5.5 0 1 1 2.265-2.265c-.237.441-.208.997.145 1.35l3.296 3.296a.75.75 0 1 1-1.06 1.061l-3.296-3.296Zm.06-5a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" fill="#949E9E"/></svg>`,WALLET_PLACEHOLDER:Re`<svg width="60" height="60" fill="none" viewBox="0 0 60 60"><g clip-path="url(#q)"><path id="wallet-placeholder-fill" fill="#fff" d="M0 24.9c0-9.251 0-13.877 1.97-17.332a15 15 0 0 1 5.598-5.597C11.023 0 15.648 0 24.9 0h10.2c9.252 0 13.877 0 17.332 1.97a15 15 0 0 1 5.597 5.598C60 11.023 60 15.648 60 24.9v10.2c0 9.252 0 13.877-1.97 17.332a15.001 15.001 0 0 1-5.598 5.597C48.977 60 44.352 60 35.1 60H24.9c-9.251 0-13.877 0-17.332-1.97a15 15 0 0 1-5.597-5.598C0 48.977 0 44.352 0 35.1V24.9Z"/><path id="wallet-placeholder-dash" stroke="#000" stroke-dasharray="4 4" stroke-width="1.5" d="M.04 41.708a231.598 231.598 0 0 1-.039-4.403l.75-.001L.75 35.1v-2.55H0v-5.1h.75V24.9l.001-2.204h-.75c.003-1.617.011-3.077.039-4.404l.75.016c.034-1.65.099-3.08.218-4.343l-.746-.07c.158-1.678.412-3.083.82-4.316l.713.236c.224-.679.497-1.296.827-1.875a14.25 14.25 0 0 1 1.05-1.585L3.076 5.9A15 15 0 0 1 5.9 3.076l.455.596a14.25 14.25 0 0 1 1.585-1.05c.579-.33 1.196-.603 1.875-.827l-.236-.712C10.812.674 12.217.42 13.895.262l.07.746C15.23.89 16.66.824 18.308.79l-.016-.75C19.62.012 21.08.004 22.695.001l.001.75L24.9.75h2.55V0h5.1v.75h2.55l2.204.001v-.75c1.617.003 3.077.011 4.404.039l-.016.75c1.65.034 3.08.099 4.343.218l.07-.746c1.678.158 3.083.412 4.316.82l-.236.713c.679.224 1.296.497 1.875.827a14.24 14.24 0 0 1 1.585 1.05l.455-.596A14.999 14.999 0 0 1 56.924 5.9l-.596.455c.384.502.735 1.032 1.05 1.585.33.579.602 1.196.827 1.875l.712-.236c.409 1.233.663 2.638.822 4.316l-.747.07c.119 1.264.184 2.694.218 4.343l.75-.016c.028 1.327.036 2.787.039 4.403l-.75.001.001 2.204v2.55H60v5.1h-.75v2.55l-.001 2.204h.75a231.431 231.431 0 0 1-.039 4.404l-.75-.016c-.034 1.65-.099 3.08-.218 4.343l.747.07c-.159 1.678-.413 3.083-.822 4.316l-.712-.236a10.255 10.255 0 0 1-.827 1.875 14.242 14.242 0 0 1-1.05 1.585l.596.455a14.997 14.997 0 0 1-2.824 2.824l-.455-.596c-.502.384-1.032.735-1.585 1.05-.579.33-1.196.602-1.875.827l.236.712c-1.233.409-2.638.663-4.316.822l-.07-.747c-1.264.119-2.694.184-4.343.218l.016.75c-1.327.028-2.787.036-4.403.039l-.001-.75-2.204.001h-2.55V60h-5.1v-.75H24.9l-2.204-.001v.75a231.431 231.431 0 0 1-4.404-.039l.016-.75c-1.65-.034-3.08-.099-4.343-.218l-.07.747c-1.678-.159-3.083-.413-4.316-.822l.236-.712a10.258 10.258 0 0 1-1.875-.827 14.252 14.252 0 0 1-1.585-1.05l-.455.596A14.999 14.999 0 0 1 3.076 54.1l.596-.455a14.24 14.24 0 0 1-1.05-1.585 10.259 10.259 0 0 1-.827-1.875l-.712.236C.674 49.188.42 47.783.262 46.105l.746-.07C.89 44.77.824 43.34.79 41.692l-.75.016Z"/><path fill="#fff" fill-rule="evenodd" d="M35.643 32.145c-.297-.743-.445-1.114-.401-1.275a.42.42 0 0 1 .182-.27c.134-.1.463-.1 1.123-.1.742 0 1.499.046 2.236-.05a6 6 0 0 0 5.166-5.166c.051-.39.051-.855.051-1.784 0-.928 0-1.393-.051-1.783a6 6 0 0 0-5.166-5.165c-.39-.052-.854-.052-1.783-.052h-7.72c-4.934 0-7.401 0-9.244 1.051a8 8 0 0 0-2.985 2.986C16.057 22.28 16.003 24.58 16 29 15.998 31.075 16 33.15 16 35.224A7.778 7.778 0 0 0 23.778 43H28.5c1.394 0 2.09 0 2.67-.116a6 6 0 0 0 4.715-4.714c.115-.58.115-1.301.115-2.744 0-1.31 0-1.964-.114-2.49a4.998 4.998 0 0 0-.243-.792Z" clip-rule="evenodd"/><path fill="#9EA9A9" fill-rule="evenodd" d="M37 18h-7.72c-2.494 0-4.266.002-5.647.126-1.361.122-2.197.354-2.854.728a6.5 6.5 0 0 0-2.425 2.426c-.375.657-.607 1.492-.729 2.853-.11 1.233-.123 2.777-.125 4.867 0 .7 0 1.05.097 1.181.096.13.182.181.343.2.163.02.518-.18 1.229-.581a6.195 6.195 0 0 1 3.053-.8H37c.977 0 1.32-.003 1.587-.038a4.5 4.5 0 0 0 3.874-3.874c.036-.268.039-.611.039-1.588 0-.976-.003-1.319-.038-1.587a4.5 4.5 0 0 0-3.875-3.874C38.32 18.004 37.977 18 37 18Zm-7.364 12.5h-7.414a4.722 4.722 0 0 0-4.722 4.723 6.278 6.278 0 0 0 6.278 6.278H28.5c1.466 0 1.98-.008 2.378-.087a4.5 4.5 0 0 0 3.535-3.536c.08-.397.087-.933.087-2.451 0-1.391-.009-1.843-.08-2.17a3.5 3.5 0 0 0-2.676-2.676c-.328-.072-.762-.08-2.108-.08Z" clip-rule="evenodd"/></g><defs><clipPath id="q"><path fill="#fff" d="M0 0h60v60H0z"/></clipPath></defs></svg>`,GLOBE_ICON:Re`<svg width="16" height="16" fill="none" viewBox="0 0 16 16"><path fill="#fff" fill-rule="evenodd" d="M15.5 8a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0Zm-2.113.75c.301 0 .535.264.47.558a6.01 6.01 0 0 1-2.867 3.896c-.203.116-.42-.103-.334-.32.409-1.018.691-2.274.797-3.657a.512.512 0 0 1 .507-.477h1.427Zm.47-2.058c.065.294-.169.558-.47.558H11.96a.512.512 0 0 1-.507-.477c-.106-1.383-.389-2.638-.797-3.656-.087-.217.13-.437.333-.32a6.01 6.01 0 0 1 2.868 3.895Zm-4.402.558c.286 0 .515-.24.49-.525-.121-1.361-.429-2.534-.83-3.393-.279-.6-.549-.93-.753-1.112a.535.535 0 0 0-.724 0c-.204.182-.474.513-.754 1.112-.4.859-.708 2.032-.828 3.393a.486.486 0 0 0 .49.525h2.909Zm-5.415 0c.267 0 .486-.21.507-.477.106-1.383.389-2.638.797-3.656.087-.217-.13-.437-.333-.32a6.01 6.01 0 0 0-2.868 3.895c-.065.294.169.558.47.558H4.04ZM2.143 9.308c-.065-.294.169-.558.47-.558H4.04c.267 0 .486.21.507.477.106 1.383.389 2.639.797 3.657.087.217-.13.436-.333.32a6.01 6.01 0 0 1-2.868-3.896Zm3.913-.033a.486.486 0 0 1 .49-.525h2.909c.286 0 .515.24.49.525-.121 1.361-.428 2.535-.83 3.394-.279.6-.549.93-.753 1.112a.535.535 0 0 1-.724 0c-.204-.182-.474-.513-.754-1.112-.4-.859-.708-2.033-.828-3.394Z" clip-rule="evenodd"/></svg>`},NC=ge`.wcm-toolbar-placeholder{top:0;bottom:0;left:0;right:0;width:100%;position:absolute;display:block;pointer-events:none;height:100px;border-radius:calc(var(--wcm-background-border-radius) * .9);background-color:var(--wcm-background-color);background-position:center;background-size:cover}.wcm-toolbar{height:38px;display:flex;position:relative;margin:5px 15px 5px 5px;justify-content:space-between;align-items:center}.wcm-toolbar img,.wcm-toolbar svg{height:28px;object-position:left center;object-fit:contain}#wcm-wc-logo path{fill:var(--wcm-accent-fill-color)}button{width:28px;height:28px;border-radius:var(--wcm-icon-button-border-radius);border:0;display:flex;justify-content:center;align-items:center;cursor:pointer;background-color:var(--wcm-color-bg-1);box-shadow:0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-bg-2)}button svg{display:block;object-position:center}button path{fill:var(--wcm-color-fg-1)}.wcm-toolbar div{display:flex}@media(hover:hover){button:hover{background-color:var(--wcm-color-bg-2)}}`;var AC=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let jc=class extends de{render(){return j`<div class="wcm-toolbar-placeholder"></div><div class="wcm-toolbar">${we.WALLET_CONNECT_LOGO} <button @click="${gn.close}">${we.CROSS_ICON}</button></div>`}};jc.styles=[he.globalCss,NC],jc=AC([pe("wcm-modal-backcard")],jc);const kC=ge`main{padding:20px;padding-top:0;width:100%}`;var DC=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Uc=class extends de{render(){return j`<main><slot></slot></main>`}};Uc.styles=[he.globalCss,kC],Uc=DC([pe("wcm-modal-content")],Uc);const MC=ge`footer{padding:10px;display:flex;flex-direction:column;align-items:inherit;justify-content:inherit;border-top:1px solid var(--wcm-color-bg-2)}`;var LC=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let qc=class extends de{render(){return j`<footer><slot></slot></footer>`}};qc.styles=[he.globalCss,MC],qc=LC([pe("wcm-modal-footer")],qc);const jC=ge`header{display:flex;justify-content:center;align-items:center;padding:20px;position:relative}.wcm-border{border-bottom:1px solid var(--wcm-color-bg-2);margin-bottom:20px}header button{padding:15px 20px}header button:active{opacity:.5}@media(hover:hover){header button:hover{opacity:.5}}.wcm-back-btn{position:absolute;left:0}.wcm-action-btn{position:absolute;right:0}path{fill:var(--wcm-accent-color)}`;var UC=Object.defineProperty,qC=Object.getOwnPropertyDescriptor,Vi=(r,e,t,i)=>{for(var o=i>1?void 0:i?qC(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&UC(e,t,o),o};let ln=class extends de{constructor(){super(...arguments),this.title="",this.onAction=void 0,this.actionIcon=void 0,this.border=!1}backBtnTemplate(){return j`<button class="wcm-back-btn" @click="${Oe.goBack}">${we.BACK_ICON}</button>`}actionBtnTemplate(){return j`<button class="wcm-action-btn" @click="${this.onAction}">${this.actionIcon}</button>`}render(){const r={"wcm-border":this.border},e=Oe.state.history.length>1,t=this.title?j`<wcm-text variant="big-bold">${this.title}</wcm-text>`:j`<slot></slot>`;return j`<header class="${mr(r)}">${e?this.backBtnTemplate():null} ${t} ${this.onAction?this.actionBtnTemplate():null}</header>`}};ln.styles=[he.globalCss,jC],Vi([oe()],ln.prototype,"title",2),Vi([oe()],ln.prototype,"onAction",2),Vi([oe()],ln.prototype,"actionIcon",2),Vi([oe({type:Boolean})],ln.prototype,"border",2),ln=Vi([pe("wcm-modal-header")],ln);const te={MOBILE_BREAKPOINT:600,WCM_RECENT_WALLET_DATA:"WCM_RECENT_WALLET_DATA",EXPLORER_WALLET_URL:"https://explorer.walletconnect.com/?type=wallet",getShadowRootElement(r,e){const t=r.renderRoot.querySelector(e);if(!t)throw new Error(`${e} not found`);return t},getWalletIcon({id:r,image_id:e}){const{walletImages:t}=Et.state;return t!=null&&t[r]?t[r]:e?at.getWalletImageUrl(e):""},getWalletName(r,e=!1){return e&&r.length>8?`${r.substring(0,8)}..`:r},isMobileAnimation(){return window.innerWidth<=te.MOBILE_BREAKPOINT},async preloadImage(r){const e=new Promise((t,i)=>{const o=new Image;o.onload=t,o.onerror=i,o.crossOrigin="anonymous",o.src=r});return Promise.race([e,Y.wait(3e3)])},getErrorMessage(r){return r instanceof Error?r.message:"Unknown Error"},debounce(r,e=500){let t;return(...i)=>{function o(){r(...i)}t&&clearTimeout(t),t=setTimeout(o,e)}},handleMobileLinking(r){const{walletConnectUri:e}=Ne.state,{mobile:t,name:i}=r,o=t?.native,c=t?.universal;te.setRecentWallet(r);function l(d){let m="";o?m=Y.formatUniversalUrl(o,d,i):c&&(m=Y.formatNativeUrl(c,d,i)),Y.openHref(m,"_self")}e&&l(e)},handleAndroidLinking(){const{walletConnectUri:r}=Ne.state;r&&(Y.setWalletConnectAndroidDeepLink(r),Y.openHref(r,"_self"))},async handleUriCopy(){const{walletConnectUri:r}=Ne.state;if(r)try{await navigator.clipboard.writeText(r),kr.openToast("Link copied","success")}catch{kr.openToast("Failed to copy","error")}},getCustomImageUrls(){const{walletImages:r}=Et.state,e=Object.values(r??{});return Object.values(e)},truncate(r,e=8){return r.length<=e?r:`${r.substring(0,4)}...${r.substring(r.length-4)}`},setRecentWallet(r){try{localStorage.setItem(te.WCM_RECENT_WALLET_DATA,JSON.stringify(r))}catch{console.info("Unable to set recent wallet")}},getRecentWallet(){try{const r=localStorage.getItem(te.WCM_RECENT_WALLET_DATA);return r?JSON.parse(r):void 0}catch{console.info("Unable to get recent wallet")}},caseSafeIncludes(r,e){return r.toUpperCase().includes(e.toUpperCase())},openWalletExplorerUrl(){Y.openHref(te.EXPLORER_WALLET_URL,"_blank")},getCachedRouterWalletPlatforms(){const{desktop:r,mobile:e}=Y.getWalletRouterData(),t=!!r?.native,i=!!r?.universal,o=!!e?.native||!!e?.universal;return{isDesktop:t,isMobile:o,isWeb:i}},goToConnectingView(r){Oe.setData({Wallet:r});const e=Y.isMobile(),{isDesktop:t,isWeb:i,isMobile:o}=te.getCachedRouterWalletPlatforms();e?o?Oe.push("MobileConnecting"):i?Oe.push("WebConnecting"):Oe.push("InstallWallet"):t?Oe.push("DesktopConnecting"):i?Oe.push("WebConnecting"):o?Oe.push("MobileQrcodeConnecting"):Oe.push("InstallWallet")}},WC=ge`.wcm-router{overflow:hidden;will-change:transform}.wcm-content{display:flex;flex-direction:column}`;var HC=Object.defineProperty,zC=Object.getOwnPropertyDescriptor,Wc=(r,e,t,i)=>{for(var o=i>1?void 0:i?zC(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&HC(e,t,o),o};let Bi=class extends de{constructor(){super(),this.view=Oe.state.view,this.prevView=Oe.state.view,this.unsubscribe=void 0,this.oldHeight="0px",this.resizeObserver=void 0,this.unsubscribe=Oe.subscribe(r=>{this.view!==r.view&&this.onChangeRoute()})}firstUpdated(){this.resizeObserver=new ResizeObserver(([r])=>{const e=`${r.contentRect.height}px`;this.oldHeight!=="0px"&&dn(this.routerEl,{height:[this.oldHeight,e]},{duration:.2}),this.oldHeight=e}),this.resizeObserver.observe(this.contentEl)}disconnectedCallback(){var r,e;(r=this.unsubscribe)==null||r.call(this),(e=this.resizeObserver)==null||e.disconnect()}get routerEl(){return te.getShadowRootElement(this,".wcm-router")}get contentEl(){return te.getShadowRootElement(this,".wcm-content")}viewTemplate(){switch(this.view){case"ConnectWallet":return j`<wcm-connect-wallet-view></wcm-connect-wallet-view>`;case"DesktopConnecting":return j`<wcm-desktop-connecting-view></wcm-desktop-connecting-view>`;case"MobileConnecting":return j`<wcm-mobile-connecting-view></wcm-mobile-connecting-view>`;case"WebConnecting":return j`<wcm-web-connecting-view></wcm-web-connecting-view>`;case"MobileQrcodeConnecting":return j`<wcm-mobile-qr-connecting-view></wcm-mobile-qr-connecting-view>`;case"WalletExplorer":return j`<wcm-wallet-explorer-view></wcm-wallet-explorer-view>`;case"Qrcode":return j`<wcm-qrcode-view></wcm-qrcode-view>`;case"InstallWallet":return j`<wcm-install-wallet-view></wcm-install-wallet-view>`;default:return j`<div>Not Found</div>`}}async onChangeRoute(){await dn(this.routerEl,{opacity:[1,0],scale:[1,1.02]},{duration:.15,delay:.1}).finished,this.view=Oe.state.view,dn(this.routerEl,{opacity:[0,1],scale:[.99,1]},{duration:.37,delay:.05})}render(){return j`<div class="wcm-router"><div class="wcm-content">${this.viewTemplate()}</div></div>`}};Bi.styles=[he.globalCss,WC],Wc([ut()],Bi.prototype,"view",2),Wc([ut()],Bi.prototype,"prevView",2),Bi=Wc([pe("wcm-modal-router")],Bi);const FC=ge`div{height:36px;width:max-content;display:flex;justify-content:center;align-items:center;padding:9px 15px 11px;position:absolute;top:12px;box-shadow:0 6px 14px -6px rgba(10,16,31,.3),0 10px 32px -4px rgba(10,16,31,.15);z-index:2;left:50%;transform:translateX(-50%);pointer-events:none;backdrop-filter:blur(20px) saturate(1.8);-webkit-backdrop-filter:blur(20px) saturate(1.8);border-radius:var(--wcm-notification-border-radius);border:1px solid var(--wcm-color-overlay);background-color:var(--wcm-color-overlay)}svg{margin-right:5px}@-moz-document url-prefix(){div{background-color:var(--wcm-color-bg-3)}}.wcm-success path{fill:var(--wcm-accent-color)}.wcm-error path{fill:var(--wcm-error-color)}`;var VC=Object.defineProperty,BC=Object.getOwnPropertyDescriptor,Of=(r,e,t,i)=>{for(var o=i>1?void 0:i?BC(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&VC(e,t,o),o};let ho=class extends de{constructor(){super(),this.open=!1,this.unsubscribe=void 0,this.timeout=void 0,this.unsubscribe=kr.subscribe(r=>{r.open?(this.open=!0,this.timeout=setTimeout(()=>kr.closeToast(),2200)):(this.open=!1,clearTimeout(this.timeout))})}disconnectedCallback(){var r;(r=this.unsubscribe)==null||r.call(this),clearTimeout(this.timeout),kr.closeToast()}render(){const{message:r,variant:e}=kr.state,t={"wcm-success":e==="success","wcm-error":e==="error"};return this.open?j`<div class="${mr(t)}">${e==="success"?we.CHECKMARK_ICON:null} ${e==="error"?we.CROSS_ICON:null}<wcm-text variant="small-regular">${r}</wcm-text></div>`:null}};ho.styles=[he.globalCss,FC],Of([ut()],ho.prototype,"open",2),ho=Of([pe("wcm-modal-toast")],ho);const KC=.1,Cf=2.5,pr=7;function Hc(r,e,t){return r===e?!1:(r-e<0?e-r:r-e)<=t+KC}function GC(r,e){const t=Array.prototype.slice.call(qf.create(r,{errorCorrectionLevel:e}).modules.data,0),i=Math.sqrt(t.length);return t.reduce((o,c,l)=>(l%i===0?o.push([c]):o[o.length-1].push(c))&&o,[])}const YC={generate(r,e,t){const i="#141414",o="#ffffff",c=[],l=GC(r,"Q"),d=e/l.length,m=[{x:0,y:0},{x:1,y:0},{x:0,y:1}];m.forEach(({x:A,y:M})=>{const q=(l.length-pr)*d*A,L=(l.length-pr)*d*M,E=.45;for(let O=0;O<m.length;O+=1){const C=d*(pr-O*2);c.push(Re`<rect fill="${O%2===0?i:o}" height="${C}" rx="${C*E}" ry="${C*E}" width="${C}" x="${q+d*O}" y="${L+d*O}">`)}});const g=Math.floor((t+25)/d),b=l.length/2-g/2,I=l.length/2+g/2-1,S=[];l.forEach((A,M)=>{A.forEach((q,L)=>{if(l[M][L]&&!(M<pr&&L<pr||M>l.length-(pr+1)&&L<pr||M<pr&&L>l.length-(pr+1))&&!(M>b&&M<I&&L>b&&L<I)){const E=M*d+d/2,O=L*d+d/2;S.push([E,O])}})});const k={};return S.forEach(([A,M])=>{k[A]?k[A].push(M):k[A]=[M]}),Object.entries(k).map(([A,M])=>{const q=M.filter(L=>M.every(E=>!Hc(L,E,d)));return[Number(A),q]}).forEach(([A,M])=>{M.forEach(q=>{c.push(Re`<circle cx="${A}" cy="${q}" fill="${i}" r="${d/Cf}">`)})}),Object.entries(k).filter(([A,M])=>M.length>1).map(([A,M])=>{const q=M.filter(L=>M.some(E=>Hc(L,E,d)));return[Number(A),q]}).map(([A,M])=>{M.sort((L,E)=>L<E?-1:1);const q=[];for(const L of M){const E=q.find(O=>O.some(C=>Hc(L,C,d)));E?E.push(L):q.push([L])}return[A,q.map(L=>[L[0],L[L.length-1]])]}).forEach(([A,M])=>{M.forEach(([q,L])=>{c.push(Re`<line x1="${A}" x2="${A}" y1="${q}" y2="${L}" stroke="${i}" stroke-width="${d/(Cf/2)}" stroke-linecap="round">`)})}),c}},ZC=ge`@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}div{position:relative;user-select:none;display:block;overflow:hidden;aspect-ratio:1/1;animation:fadeIn ease .2s}.wcm-dark{background-color:#fff;border-radius:var(--wcm-container-border-radius);padding:18px;box-shadow:0 2px 5px #000}svg:first-child,wcm-wallet-image{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{transform:translateY(-50%) translateX(-50%)}wcm-wallet-image{width:25%;height:25%;border-radius:var(--wcm-wallet-icon-border-radius)}svg:first-child{transform:translateY(-50%) translateX(-50%) scale(.9)}svg:first-child path:first-child{fill:var(--wcm-accent-color)}svg:first-child path:last-child{stroke:var(--wcm-color-overlay)}`;var JC=Object.defineProperty,QC=Object.getOwnPropertyDescriptor,zn=(r,e,t,i)=>{for(var o=i>1?void 0:i?QC(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&JC(e,t,o),o};let fr=class extends de{constructor(){super(...arguments),this.uri="",this.size=0,this.imageId=void 0,this.walletId=void 0,this.imageUrl=void 0}svgTemplate(){const r=zr.state.themeMode==="light"?this.size:this.size-36;return Re`<svg height="${r}" width="${r}">${YC.generate(this.uri,r,r/4)}</svg>`}render(){const r={"wcm-dark":zr.state.themeMode==="dark"};return j`<div style="${`width: ${this.size}px`}" class="${mr(r)}">${this.walletId||this.imageUrl?j`<wcm-wallet-image walletId="${Je(this.walletId)}" imageId="${Je(this.imageId)}" imageUrl="${Je(this.imageUrl)}"></wcm-wallet-image>`:we.WALLET_CONNECT_ICON_COLORED} ${this.svgTemplate()}</div>`}};fr.styles=[he.globalCss,ZC],zn([oe()],fr.prototype,"uri",2),zn([oe({type:Number})],fr.prototype,"size",2),zn([oe()],fr.prototype,"imageId",2),zn([oe()],fr.prototype,"walletId",2),zn([oe()],fr.prototype,"imageUrl",2),fr=zn([pe("wcm-qrcode")],fr);const XC=ge`:host{position:relative;height:28px;width:80%}input{width:100%;height:100%;line-height:28px!important;border-radius:var(--wcm-input-border-radius);font-style:normal;font-family:-apple-system,system-ui,BlinkMacSystemFont,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',sans-serif;font-feature-settings:'case' on;font-weight:500;font-size:16px;letter-spacing:-.03em;padding:0 10px 0 34px;transition:.2s all ease;color:var(--wcm-color-fg-1);background-color:var(--wcm-color-bg-3);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay);caret-color:var(--wcm-accent-color)}input::placeholder{color:var(--wcm-color-fg-2)}svg{left:10px;top:4px;pointer-events:none;position:absolute;width:20px;height:20px}input:focus-within{box-shadow:inset 0 0 0 1px var(--wcm-accent-color)}path{fill:var(--wcm-color-fg-2)}`;var eR=Object.defineProperty,tR=Object.getOwnPropertyDescriptor,Rf=(r,e,t,i)=>{for(var o=i>1?void 0:i?tR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&eR(e,t,o),o};let po=class extends de{constructor(){super(...arguments),this.onChange=()=>null}render(){return j`<input type="text" @input="${this.onChange}" placeholder="Search wallets"> ${we.SEARCH_ICON}`}};po.styles=[he.globalCss,XC],Rf([oe()],po.prototype,"onChange",2),po=Rf([pe("wcm-search-input")],po);const rR=ge`@keyframes rotate{100%{transform:rotate(360deg)}}@keyframes dash{0%{stroke-dasharray:1,150;stroke-dashoffset:0}50%{stroke-dasharray:90,150;stroke-dashoffset:-35}100%{stroke-dasharray:90,150;stroke-dashoffset:-124}}svg{animation:rotate 2s linear infinite;display:flex;justify-content:center;align-items:center}svg circle{stroke-linecap:round;animation:dash 1.5s ease infinite;stroke:var(--wcm-accent-color)}`;var nR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let zc=class extends de{render(){return j`<svg viewBox="0 0 50 50" width="24" height="24"><circle cx="25" cy="25" r="20" fill="none" stroke-width="4" stroke="#fff"/></svg>`}};zc.styles=[he.globalCss,rR],zc=nR([pe("wcm-spinner")],zc);const iR=ge`span{font-style:normal;font-family:var(--wcm-font-family);font-feature-settings:var(--wcm-font-feature-settings)}.wcm-xsmall-bold{font-family:var(--wcm-text-xsmall-bold-font-family);font-weight:var(--wcm-text-xsmall-bold-weight);font-size:var(--wcm-text-xsmall-bold-size);line-height:var(--wcm-text-xsmall-bold-line-height);letter-spacing:var(--wcm-text-xsmall-bold-letter-spacing);text-transform:var(--wcm-text-xsmall-bold-text-transform)}.wcm-xsmall-regular{font-family:var(--wcm-text-xsmall-regular-font-family);font-weight:var(--wcm-text-xsmall-regular-weight);font-size:var(--wcm-text-xsmall-regular-size);line-height:var(--wcm-text-xsmall-regular-line-height);letter-spacing:var(--wcm-text-xsmall-regular-letter-spacing);text-transform:var(--wcm-text-xsmall-regular-text-transform)}.wcm-small-thin{font-family:var(--wcm-text-small-thin-font-family);font-weight:var(--wcm-text-small-thin-weight);font-size:var(--wcm-text-small-thin-size);line-height:var(--wcm-text-small-thin-line-height);letter-spacing:var(--wcm-text-small-thin-letter-spacing);text-transform:var(--wcm-text-small-thin-text-transform)}.wcm-small-regular{font-family:var(--wcm-text-small-regular-font-family);font-weight:var(--wcm-text-small-regular-weight);font-size:var(--wcm-text-small-regular-size);line-height:var(--wcm-text-small-regular-line-height);letter-spacing:var(--wcm-text-small-regular-letter-spacing);text-transform:var(--wcm-text-small-regular-text-transform)}.wcm-medium-regular{font-family:var(--wcm-text-medium-regular-font-family);font-weight:var(--wcm-text-medium-regular-weight);font-size:var(--wcm-text-medium-regular-size);line-height:var(--wcm-text-medium-regular-line-height);letter-spacing:var(--wcm-text-medium-regular-letter-spacing);text-transform:var(--wcm-text-medium-regular-text-transform)}.wcm-big-bold{font-family:var(--wcm-text-big-bold-font-family);font-weight:var(--wcm-text-big-bold-weight);font-size:var(--wcm-text-big-bold-size);line-height:var(--wcm-text-big-bold-line-height);letter-spacing:var(--wcm-text-big-bold-letter-spacing);text-transform:var(--wcm-text-big-bold-text-transform)}:host(*){color:var(--wcm-color-fg-1)}.wcm-color-primary{color:var(--wcm-color-fg-1)}.wcm-color-secondary{color:var(--wcm-color-fg-2)}.wcm-color-tertiary{color:var(--wcm-color-fg-3)}.wcm-color-inverse{color:var(--wcm-accent-fill-color)}.wcm-color-accnt{color:var(--wcm-accent-color)}.wcm-color-error{color:var(--wcm-error-color)}`;var sR=Object.defineProperty,oR=Object.getOwnPropertyDescriptor,Fc=(r,e,t,i)=>{for(var o=i>1?void 0:i?oR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&sR(e,t,o),o};let Ki=class extends de{constructor(){super(...arguments),this.variant="medium-regular",this.color="primary"}render(){const r={"wcm-big-bold":this.variant==="big-bold","wcm-medium-regular":this.variant==="medium-regular","wcm-small-regular":this.variant==="small-regular","wcm-small-thin":this.variant==="small-thin","wcm-xsmall-regular":this.variant==="xsmall-regular","wcm-xsmall-bold":this.variant==="xsmall-bold","wcm-color-primary":this.color==="primary","wcm-color-secondary":this.color==="secondary","wcm-color-tertiary":this.color==="tertiary","wcm-color-inverse":this.color==="inverse","wcm-color-accnt":this.color==="accent","wcm-color-error":this.color==="error"};return j`<span><slot class="${mr(r)}"></slot></span>`}};Ki.styles=[he.globalCss,iR],Fc([oe()],Ki.prototype,"variant",2),Fc([oe()],Ki.prototype,"color",2),Ki=Fc([pe("wcm-text")],Ki);const aR=ge`button{width:100%;height:100%;border-radius:var(--wcm-button-hover-highlight-border-radius);display:flex;align-items:flex-start}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}button>div{width:80px;padding:5px 0;display:flex;flex-direction:column;align-items:center}wcm-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:center}wcm-wallet-image{height:60px;width:60px;transition:all .2s ease;border-radius:var(--wcm-wallet-icon-border-radius);margin-bottom:5px}.wcm-sublabel{margin-top:2px}`;var cR=Object.defineProperty,lR=Object.getOwnPropertyDescriptor,Pr=(r,e,t,i)=>{for(var o=i>1?void 0:i?lR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&cR(e,t,o),o};let Zt=class extends de{constructor(){super(...arguments),this.onClick=()=>null,this.name="",this.walletId="",this.label=void 0,this.imageId=void 0,this.installed=!1,this.recent=!1}sublabelTemplate(){return this.recent?j`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">RECENT</wcm-text>`:this.installed?j`<wcm-text class="wcm-sublabel" variant="xsmall-bold" color="tertiary">INSTALLED</wcm-text>`:null}handleClick(){W0.click({name:"WALLET_BUTTON",walletId:this.walletId}),this.onClick()}render(){var r;return j`<button @click="${this.handleClick.bind(this)}"><div><wcm-wallet-image walletId="${this.walletId}" imageId="${Je(this.imageId)}"></wcm-wallet-image><wcm-text variant="xsmall-regular">${(r=this.label)!=null?r:te.getWalletName(this.name,!0)}</wcm-text>${this.sublabelTemplate()}</div></button>`}};Zt.styles=[he.globalCss,aR],Pr([oe()],Zt.prototype,"onClick",2),Pr([oe()],Zt.prototype,"name",2),Pr([oe()],Zt.prototype,"walletId",2),Pr([oe()],Zt.prototype,"label",2),Pr([oe()],Zt.prototype,"imageId",2),Pr([oe({type:Boolean})],Zt.prototype,"installed",2),Pr([oe({type:Boolean})],Zt.prototype,"recent",2),Zt=Pr([pe("wcm-wallet-button")],Zt);const uR=ge`:host{display:block}div{overflow:hidden;position:relative;border-radius:inherit;width:100%;height:100%;background-color:var(--wcm-color-overlay)}svg{position:relative;width:100%;height:100%}div::after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;border-radius:inherit;border:1px solid var(--wcm-color-overlay)}div img{width:100%;height:100%;object-fit:cover;object-position:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var hR=Object.defineProperty,dR=Object.getOwnPropertyDescriptor,fo=(r,e,t,i)=>{for(var o=i>1?void 0:i?dR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&hR(e,t,o),o};let Fn=class extends de{constructor(){super(...arguments),this.walletId="",this.imageId=void 0,this.imageUrl=void 0}render(){var r;const e=(r=this.imageUrl)!=null&&r.length?this.imageUrl:te.getWalletIcon({id:this.walletId,image_id:this.imageId});return j`${e.length?j`<div><img crossorigin="anonymous" src="${e}" alt="${this.id}"></div>`:we.WALLET_PLACEHOLDER}`}};Fn.styles=[he.globalCss,uR],fo([oe()],Fn.prototype,"walletId",2),fo([oe()],Fn.prototype,"imageId",2),fo([oe()],Fn.prototype,"imageUrl",2),Fn=fo([pe("wcm-wallet-image")],Fn);var pR=Object.defineProperty,fR=Object.getOwnPropertyDescriptor,$f=(r,e,t,i)=>{for(var o=i>1?void 0:i?fR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&pR(e,t,o),o};let Vc=class extends de{constructor(){super(),this.preload=!0,this.preloadData()}async loadImages(r){try{r!=null&&r.length&&await Promise.all(r.map(async e=>te.preloadImage(e)))}catch{console.info("Unsuccessful attempt at preloading some images",r)}}async preloadListings(){if(Et.state.enableExplorer){await at.getRecomendedWallets(),Ne.setIsDataLoaded(!0);const{recomendedWallets:r}=at.state,e=r.map(t=>te.getWalletIcon(t));await this.loadImages(e)}else Ne.setIsDataLoaded(!0)}async preloadCustomImages(){const r=te.getCustomImageUrls();await this.loadImages(r)}async preloadData(){try{this.preload&&(this.preload=!1,await Promise.all([this.preloadListings(),this.preloadCustomImages()]))}catch(r){console.error(r),kr.openToast("Failed preloading","error")}}};$f([ut()],Vc.prototype,"preload",2),Vc=$f([pe("wcm-explorer-context")],Vc);var gR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Pf=class extends de{constructor(){super(),this.unsubscribeTheme=void 0,he.setTheme(),this.unsubscribeTheme=zr.subscribe(he.setTheme)}disconnectedCallback(){var r;(r=this.unsubscribeTheme)==null||r.call(this)}};Pf=gR([pe("wcm-theme-context")],Pf);const mR=ge`@keyframes scroll{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(calc(-70px * 9),0,0)}}.wcm-slider{position:relative;overflow-x:hidden;padding:10px 0;margin:0 -20px;width:calc(100% + 40px)}.wcm-track{display:flex;width:calc(70px * 18);animation:scroll 20s linear infinite;opacity:.7}.wcm-track svg{margin:0 5px}wcm-wallet-image{width:60px;height:60px;margin:0 5px;border-radius:var(--wcm-wallet-icon-border-radius)}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-title{display:flex;align-items:center;margin-bottom:10px}.wcm-title svg{margin-right:6px}.wcm-title path{fill:var(--wcm-accent-color)}wcm-modal-footer .wcm-title{padding:0 10px}wcm-button-big{position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);filter:drop-shadow(0 0 17px var(--wcm-color-bg-1))}wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-info-footer wcm-text{text-align:center;margin-bottom:15px}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var wR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Bc=class extends de{onGoToQrcode(){Oe.push("Qrcode")}render(){const{recomendedWallets:r}=at.state,e=[...r,...r],t=Y.RECOMMENDED_WALLET_AMOUNT*2;return j`<wcm-modal-header title="Connect your wallet" .onAction="${this.onGoToQrcode}" .actionIcon="${we.QRCODE_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-title">${we.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">WalletConnect</wcm-text></div><div class="wcm-slider"><div class="wcm-track">${[...Array(t)].map((i,o)=>{const c=e[o%e.length];return c?j`<wcm-wallet-image walletId="${c.id}" imageId="${c.image_id}"></wcm-wallet-image>`:we.WALLET_PLACEHOLDER})}</div><wcm-button-big @click="${te.handleAndroidLinking}"><wcm-text variant="medium-regular" color="inverse">Select Wallet</wcm-text></wcm-button-big></div></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">Choose WalletConnect to see supported apps on your device</wcm-text></wcm-info-footer>`}};Bc.styles=[he.globalCss,mR],Bc=wR([pe("wcm-android-wallet-selection")],Bc);const vR=ge`@keyframes loading{to{stroke-dashoffset:0}}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(1px,0,0)}30%,50%,70%{transform:translate3d(-2px,0,0)}40%,60%{transform:translate3d(2px,0,0)}}:host{display:flex;flex-direction:column;align-items:center}div{position:relative;width:110px;height:110px;display:flex;justify-content:center;align-items:center;margin:40px 0 20px 0;transform:translate3d(0,0,0)}svg{position:absolute;width:110px;height:110px;fill:none;stroke:transparent;stroke-linecap:round;stroke-width:2px;top:0;left:0}use{stroke:var(--wcm-accent-color);animation:loading 1s linear infinite}wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:90px;height:90px}wcm-text{margin-bottom:40px}.wcm-error svg{stroke:var(--wcm-error-color)}.wcm-error use{display:none}.wcm-error{animation:shake .4s cubic-bezier(.36,.07,.19,.97) both}.wcm-stale svg,.wcm-stale use{display:none}`;var yR=Object.defineProperty,_R=Object.getOwnPropertyDescriptor,Vn=(r,e,t,i)=>{for(var o=i>1?void 0:i?_R(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&yR(e,t,o),o};let Tr=class extends de{constructor(){super(...arguments),this.walletId=void 0,this.imageId=void 0,this.isError=!1,this.isStale=!1,this.label=""}svgLoaderTemplate(){var r,e;const t=(e=(r=zr.state.themeVariables)==null?void 0:r["--wcm-wallet-icon-large-border-radius"])!=null?e:he.getPreset("--wcm-wallet-icon-large-border-radius");let i=0;t.includes("%")?i=88/100*parseInt(t,10):i=parseInt(t,10),i*=1.17;const o=317-i*1.57,c=425-i*1.8;return j`<svg viewBox="0 0 110 110" width="110" height="110"><rect id="wcm-loader" x="2" y="2" width="106" height="106" rx="${i}"/><use xlink:href="#wcm-loader" stroke-dasharray="106 ${o}" stroke-dashoffset="${c}"></use></svg>`}render(){const r={"wcm-error":this.isError,"wcm-stale":this.isStale};return j`<div class="${mr(r)}">${this.svgLoaderTemplate()}<wcm-wallet-image walletId="${Je(this.walletId)}" imageId="${Je(this.imageId)}"></wcm-wallet-image></div><wcm-text variant="medium-regular" color="${this.isError?"error":"primary"}">${this.isError?"Connection declined":this.label}</wcm-text>`}};Tr.styles=[he.globalCss,vR],Vn([oe()],Tr.prototype,"walletId",2),Vn([oe()],Tr.prototype,"imageId",2),Vn([oe({type:Boolean})],Tr.prototype,"isError",2),Vn([oe({type:Boolean})],Tr.prototype,"isStale",2),Vn([oe()],Tr.prototype,"label",2),Tr=Vn([pe("wcm-connector-waiting")],Tr);const ei={manualWallets(){var r,e;const{mobileWallets:t,desktopWallets:i}=Et.state,o=(r=ei.recentWallet())==null?void 0:r.id,c=Y.isMobile()?t:i,l=c?.filter(d=>o!==d.id);return(e=Y.isMobile()?l?.map(({id:d,name:m,links:g})=>({id:d,name:m,mobile:g,links:g})):l?.map(({id:d,name:m,links:g})=>({id:d,name:m,desktop:g,links:g})))!=null?e:[]},recentWallet(){return te.getRecentWallet()},recomendedWallets(r=!1){var e;const t=r||(e=ei.recentWallet())==null?void 0:e.id,{recomendedWallets:i}=at.state;return i.filter(o=>t!==o.id)}},jr={onConnecting(r){te.goToConnectingView(r)},manualWalletsTemplate(){return ei.manualWallets().map(r=>j`<wcm-wallet-button walletId="${r.id}" name="${r.name}" .onClick="${()=>this.onConnecting(r)}"></wcm-wallet-button>`)},recomendedWalletsTemplate(r=!1){return ei.recomendedWallets(r).map(e=>j`<wcm-wallet-button name="${e.name}" walletId="${e.id}" imageId="${e.image_id}" .onClick="${()=>this.onConnecting(e)}"></wcm-wallet-button>`)},recentWalletTemplate(){const r=ei.recentWallet();if(r)return j`<wcm-wallet-button name="${r.name}" walletId="${r.id}" imageId="${Je(r.image_id)}" .recent="${!0}" .onClick="${()=>this.onConnecting(r)}"></wcm-wallet-button>`}},bR=ge`.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between}.wcm-desktop-title,.wcm-mobile-title{display:flex;align-items:center}.wcm-mobile-title{justify-content:space-between;margin-bottom:20px;margin-top:-10px}.wcm-desktop-title{margin-bottom:10px;padding:0 10px}.wcm-subtitle{display:flex;align-items:center}.wcm-subtitle:last-child path{fill:var(--wcm-color-fg-3)}.wcm-desktop-title svg,.wcm-mobile-title svg{margin-right:6px}.wcm-desktop-title path,.wcm-mobile-title path{fill:var(--wcm-accent-color)}`;var ER=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Kc=class extends de{render(){const{explorerExcludedWalletIds:r,enableExplorer:e}=Et.state,t=r!=="ALL"&&e,i=jr.manualWalletsTemplate(),o=jr.recomendedWalletsTemplate();let c=[jr.recentWalletTemplate(),...i,...o];c=c.filter(Boolean);const l=c.length>4||t;let d=[];l?d=c.slice(0,3):d=c;const m=!!d.length;return j`<wcm-modal-header .border="${!0}" title="Connect your wallet" .onAction="${te.handleUriCopy}" .actionIcon="${we.COPY_ICON}"></wcm-modal-header><wcm-modal-content><div class="wcm-mobile-title"><div class="wcm-subtitle">${we.MOBILE_ICON}<wcm-text variant="small-regular" color="accent">Mobile</wcm-text></div><div class="wcm-subtitle">${we.SCAN_ICON}<wcm-text variant="small-regular" color="secondary">Scan with your wallet</wcm-text></div></div><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>${m?j`<wcm-modal-footer><div class="wcm-desktop-title">${we.DESKTOP_ICON}<wcm-text variant="small-regular" color="accent">Desktop</wcm-text></div><div class="wcm-grid">${d} ${l?j`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-footer>`:null}`}};Kc.styles=[he.globalCss,bR],Kc=ER([pe("wcm-desktop-wallet-selection")],Kc);const IR=ge`div{background-color:var(--wcm-color-bg-2);padding:10px 20px 15px 20px;border-top:1px solid var(--wcm-color-bg-3);text-align:center}a{color:var(--wcm-accent-color);text-decoration:none;transition:opacity .2s ease-in-out;display:inline}a:active{opacity:.8}@media(hover:hover){a:hover{opacity:.8}}`;var SR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Gc=class extends de{render(){const{termsOfServiceUrl:r,privacyPolicyUrl:e}=Et.state;return r??e?j`<div><wcm-text variant="small-regular" color="secondary">By connecting your wallet to this app, you agree to the app's ${r?j`<a href="${r}" target="_blank" rel="noopener noreferrer">Terms of Service</a>`:null} ${r&&e?"and":null} ${e?j`<a href="${e}" target="_blank" rel="noopener noreferrer">Privacy Policy</a>`:null}</wcm-text></div>`:null}};Gc.styles=[he.globalCss,IR],Gc=SR([pe("wcm-legal-notice")],Gc);const xR=ge`div{display:grid;grid-template-columns:repeat(4,80px);margin:0 -10px;justify-content:space-between;row-gap:10px}`;var OR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Yc=class extends de{onQrcode(){Oe.push("Qrcode")}render(){const{explorerExcludedWalletIds:r,enableExplorer:e}=Et.state,t=r!=="ALL"&&e,i=jr.manualWalletsTemplate(),o=jr.recomendedWalletsTemplate();let c=[jr.recentWalletTemplate(),...i,...o];c=c.filter(Boolean);const l=c.length>8||t;let d=[];l?d=c.slice(0,7):d=c;const m=!!d.length;return j`<wcm-modal-header title="Connect your wallet" .onAction="${this.onQrcode}" .actionIcon="${we.QRCODE_ICON}"></wcm-modal-header>${m?j`<wcm-modal-content><div>${d} ${l?j`<wcm-view-all-wallets-button></wcm-view-all-wallets-button>`:null}</div></wcm-modal-content>`:null}`}};Yc.styles=[he.globalCss,xR],Yc=OR([pe("wcm-mobile-wallet-selection")],Yc);const CR=ge`:host{all:initial}.wcm-overlay{top:0;bottom:0;left:0;right:0;position:fixed;z-index:var(--wcm-z-index);overflow:hidden;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;background-color:var(--wcm-overlay-background-color);backdrop-filter:var(--wcm-overlay-backdrop-filter)}@media(max-height:720px) and (orientation:landscape){.wcm-overlay{overflow:scroll;align-items:flex-start;padding:20px 0}}.wcm-active{pointer-events:auto}.wcm-container{position:relative;max-width:360px;width:100%;outline:0;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) var(--wcm-container-border-radius) var(--wcm-container-border-radius);border:1px solid var(--wcm-color-overlay);overflow:hidden}.wcm-card{width:100%;position:relative;border-radius:var(--wcm-container-border-radius);overflow:hidden;box-shadow:0 6px 14px -6px rgba(10,16,31,.12),0 10px 32px -4px rgba(10,16,31,.1),0 0 0 1px var(--wcm-color-overlay);background-color:var(--wcm-color-bg-1);color:var(--wcm-color-fg-1)}@media(max-width:600px){.wcm-container{max-width:440px;border-radius:var(--wcm-background-border-radius) var(--wcm-background-border-radius) 0 0}.wcm-card{border-radius:var(--wcm-container-border-radius) var(--wcm-container-border-radius) 0 0}.wcm-overlay{align-items:flex-end}}@media(max-width:440px){.wcm-container{border:0}}`;var RR=Object.defineProperty,$R=Object.getOwnPropertyDescriptor,Zc=(r,e,t,i)=>{for(var o=i>1?void 0:i?$R(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&RR(e,t,o),o};let Gn=class extends de{constructor(){super(),this.open=!1,this.active=!1,this.unsubscribeModal=void 0,this.abortController=void 0,this.unsubscribeModal=gn.subscribe(r=>{r.open?this.onOpenModalEvent():this.onCloseModalEvent()})}disconnectedCallback(){var r;(r=this.unsubscribeModal)==null||r.call(this)}get overlayEl(){return te.getShadowRootElement(this,".wcm-overlay")}get containerEl(){return te.getShadowRootElement(this,".wcm-container")}toggleBodyScroll(r){document.querySelector("body")&&(r?document.getElementById("wcm-styles")?.remove():document.head.insertAdjacentHTML("beforeend",'<style id="wcm-styles">html,body{touch-action:none;overflow:hidden;overscroll-behavior:contain;}</style>'))}onCloseModal(r){r.target===r.currentTarget&&gn.close()}onOpenModalEvent(){this.toggleBodyScroll(!1),this.addKeyboardEvents(),this.open=!0,setTimeout(async()=>{const r=te.isMobileAnimation()?{y:["50vh","0vh"]}:{scale:[.98,1]},e=.1,t=.2;await Promise.all([dn(this.overlayEl,{opacity:[0,1]},{delay:e,duration:t}).finished,dn(this.containerEl,r,{delay:e,duration:t}).finished]),this.active=!0},0)}async onCloseModalEvent(){this.toggleBodyScroll(!0),this.removeKeyboardEvents();const r=te.isMobileAnimation()?{y:["0vh","50vh"]}:{scale:[1,.98]},e=.2;await Promise.all([dn(this.overlayEl,{opacity:[1,0]},{duration:e}).finished,dn(this.containerEl,r,{duration:e}).finished]),this.containerEl.removeAttribute("style"),this.active=!1,this.open=!1}addKeyboardEvents(){this.abortController=new AbortController,window.addEventListener("keydown",r=>{var e;r.key==="Escape"?gn.close():r.key==="Tab"&&((e=r.target)!=null&&e.tagName.includes("wcm-")||this.containerEl.focus())},this.abortController),this.containerEl.focus()}removeKeyboardEvents(){var r;(r=this.abortController)==null||r.abort(),this.abortController=void 0}render(){const r={"wcm-overlay":!0,"wcm-active":this.active};return j`<wcm-explorer-context></wcm-explorer-context><wcm-theme-context></wcm-theme-context><div id="wcm-modal" class="${mr(r)}" @click="${this.onCloseModal}" role="alertdialog" aria-modal="true"><div class="wcm-container" tabindex="0">${this.open?j`<wcm-modal-backcard></wcm-modal-backcard><div class="wcm-card"><wcm-modal-router></wcm-modal-router><wcm-modal-toast></wcm-modal-toast></div>`:null}</div></div>`}};Gn.styles=[he.globalCss,CR],Zc([ut()],Gn.prototype,"open",2),Zc([ut()],Gn.prototype,"active",2),Gn=Zc([pe("wcm-modal")],Gn);const PR=ge`div{display:flex;margin-top:15px}slot{display:inline-block;margin:0 5px}wcm-button{margin:0 5px}`;var TR=Object.defineProperty,NR=Object.getOwnPropertyDescriptor,Gi=(r,e,t,i)=>{for(var o=i>1?void 0:i?NR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&TR(e,t,o),o};let un=class extends de{constructor(){super(...arguments),this.isMobile=!1,this.isDesktop=!1,this.isWeb=!1,this.isRetry=!1}onMobile(){Y.isMobile()?Oe.replace("MobileConnecting"):Oe.replace("MobileQrcodeConnecting")}onDesktop(){Oe.replace("DesktopConnecting")}onWeb(){Oe.replace("WebConnecting")}render(){return j`<div>${this.isRetry?j`<slot></slot>`:null} ${this.isMobile?j`<wcm-button .onClick="${this.onMobile}" .iconLeft="${we.MOBILE_ICON}" variant="outline">Mobile</wcm-button>`:null} ${this.isDesktop?j`<wcm-button .onClick="${this.onDesktop}" .iconLeft="${we.DESKTOP_ICON}" variant="outline">Desktop</wcm-button>`:null} ${this.isWeb?j`<wcm-button .onClick="${this.onWeb}" .iconLeft="${we.GLOBE_ICON}" variant="outline">Web</wcm-button>`:null}</div>`}};un.styles=[he.globalCss,PR],Gi([oe({type:Boolean})],un.prototype,"isMobile",2),Gi([oe({type:Boolean})],un.prototype,"isDesktop",2),Gi([oe({type:Boolean})],un.prototype,"isWeb",2),Gi([oe({type:Boolean})],un.prototype,"isRetry",2),un=Gi([pe("wcm-platform-selection")],un);const AR=ge`button{display:flex;flex-direction:column;padding:5px 10px;border-radius:var(--wcm-button-hover-highlight-border-radius);height:100%;justify-content:flex-start}.wcm-icons{width:60px;height:60px;display:flex;flex-wrap:wrap;padding:7px;border-radius:var(--wcm-wallet-icon-border-radius);justify-content:space-between;align-items:center;margin-bottom:5px;background-color:var(--wcm-color-bg-2);box-shadow:inset 0 0 0 1px var(--wcm-color-overlay)}button:active{background-color:var(--wcm-color-overlay)}@media(hover:hover){button:hover{background-color:var(--wcm-color-overlay)}}.wcm-icons img{width:21px;height:21px;object-fit:cover;object-position:center;border-radius:calc(var(--wcm-wallet-icon-border-radius)/ 2);border:1px solid var(--wcm-color-overlay)}.wcm-icons svg{width:21px;height:21px}.wcm-icons img:nth-child(1),.wcm-icons img:nth-child(2),.wcm-icons svg:nth-child(1),.wcm-icons svg:nth-child(2){margin-bottom:4px}wcm-text{width:100%;text-align:center}#wallet-placeholder-fill{fill:var(--wcm-color-bg-3)}#wallet-placeholder-dash{stroke:var(--wcm-color-overlay)}`;var kR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Jc=class extends de{onClick(){Oe.push("WalletExplorer")}render(){const{recomendedWallets:r}=at.state,e=ei.manualWallets(),t=[...r,...e].reverse().slice(0,4);return j`<button @click="${this.onClick}"><div class="wcm-icons">${t.map(i=>{const o=te.getWalletIcon(i);if(o)return j`<img crossorigin="anonymous" src="${o}">`;const c=te.getWalletIcon({id:i.id});return c?j`<img crossorigin="anonymous" src="${c}">`:we.WALLET_PLACEHOLDER})} ${[...Array(4-t.length)].map(()=>we.WALLET_PLACEHOLDER)}</div><wcm-text variant="xsmall-regular">View All</wcm-text></button>`}};Jc.styles=[he.globalCss,AR],Jc=kR([pe("wcm-view-all-wallets-button")],Jc);const DR=ge`.wcm-qr-container{width:100%;display:flex;justify-content:center;align-items:center;aspect-ratio:1/1}`;var MR=Object.defineProperty,LR=Object.getOwnPropertyDescriptor,go=(r,e,t,i)=>{for(var o=i>1?void 0:i?LR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&MR(e,t,o),o};let Bn=class extends de{constructor(){super(),this.walletId="",this.imageId="",this.uri="",setTimeout(()=>{const{walletConnectUri:r}=Ne.state;this.uri=r},0)}get overlayEl(){return te.getShadowRootElement(this,".wcm-qr-container")}render(){return j`<div class="wcm-qr-container">${this.uri?j`<wcm-qrcode size="${this.overlayEl.offsetWidth}" uri="${this.uri}" walletId="${Je(this.walletId)}" imageId="${Je(this.imageId)}"></wcm-qrcode>`:j`<wcm-spinner></wcm-spinner>`}</div>`}};Bn.styles=[he.globalCss,DR],go([oe()],Bn.prototype,"walletId",2),go([oe()],Bn.prototype,"imageId",2),go([ut()],Bn.prototype,"uri",2),Bn=go([pe("wcm-walletconnect-qr")],Bn);var jR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Qc=class extends de{viewTemplate(){return Y.isAndroid()?j`<wcm-android-wallet-selection></wcm-android-wallet-selection>`:Y.isMobile()?j`<wcm-mobile-wallet-selection></wcm-mobile-wallet-selection>`:j`<wcm-desktop-wallet-selection></wcm-desktop-wallet-selection>`}render(){return j`${this.viewTemplate()}<wcm-legal-notice></wcm-legal-notice>`}};Qc.styles=[he.globalCss],Qc=jR([pe("wcm-connect-wallet-view")],Qc);const UR=ge`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var qR=Object.defineProperty,WR=Object.getOwnPropertyDescriptor,Tf=(r,e,t,i)=>{for(var o=i>1?void 0:i?WR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&qR(e,t,o),o};let mo=class extends de{constructor(){super(),this.isError=!1,this.openDesktopApp()}onFormatAndRedirect(r){const{desktop:e,name:t}=Y.getWalletRouterData(),i=e?.native;if(i){const o=Y.formatNativeUrl(i,r,t);Y.openHref(o,"_self")}}openDesktopApp(){const{walletConnectUri:r}=Ne.state,e=Y.getWalletRouterData();te.setRecentWallet(e),r&&this.onFormatAndRedirect(r)}render(){const{name:r,id:e,image_id:t}=Y.getWalletRouterData(),{isMobile:i,isWeb:o}=te.getCachedRouterWalletPlatforms();return j`<wcm-modal-header title="${r}" .onAction="${te.handleUriCopy}" .actionIcon="${we.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Je(t)}" label="${`Continue in ${r}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Connection can continue loading if ${r} is not installed on your device`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isWeb="${o}" .isRetry="${!0}"><wcm-button .onClick="${this.openDesktopApp.bind(this)}" .iconRight="${we.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};mo.styles=[he.globalCss,UR],Tf([ut()],mo.prototype,"isError",2),mo=Tf([pe("wcm-desktop-connecting-view")],mo);const HR=ge`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}wcm-button{margin-top:15px}`;var zR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let Xc=class extends de{onInstall(r){r&&Y.openHref(r,"_blank")}render(){const{name:r,id:e,image_id:t,homepage:i}=Y.getWalletRouterData();return j`<wcm-modal-header title="${r}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Je(t)}" label="Not Detected" .isStale="${!0}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Download ${r} to continue. If multiple browser extensions are installed, disable non ${r} ones and try again`}</wcm-text><wcm-button .onClick="${()=>this.onInstall(i)}" .iconLeft="${we.ARROW_DOWN_ICON}">Download</wcm-button></wcm-info-footer>`}};Xc.styles=[he.globalCss,HR],Xc=zR([pe("wcm-install-wallet-view")],Xc);const FR=ge`wcm-wallet-image{border-radius:var(--wcm-wallet-icon-large-border-radius);width:96px;height:96px;margin-bottom:20px}wcm-info-footer{display:flex;width:100%}.wcm-app-store{justify-content:space-between}.wcm-app-store wcm-wallet-image{margin-right:10px;margin-bottom:0;width:28px;height:28px;border-radius:var(--wcm-wallet-icon-small-border-radius)}.wcm-app-store div{display:flex;align-items:center}.wcm-app-store wcm-button{margin-right:-10px}.wcm-note{flex-direction:column;align-items:center;padding:5px 0}.wcm-note wcm-text{text-align:center}wcm-platform-selection{margin-top:-15px}.wcm-note wcm-text{margin-top:15px}.wcm-note wcm-text span{color:var(--wcm-accent-color)}`;var VR=Object.defineProperty,BR=Object.getOwnPropertyDescriptor,Nf=(r,e,t,i)=>{for(var o=i>1?void 0:i?BR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&VR(e,t,o),o};let wo=class extends de{constructor(){super(),this.isError=!1,this.openMobileApp()}onFormatAndRedirect(r,e=!1){const{mobile:t,name:i}=Y.getWalletRouterData(),o=t?.native,c=t?.universal;if(o&&!e){const l=Y.formatNativeUrl(o,r,i);Y.openHref(l,"_self")}else if(c){const l=Y.formatUniversalUrl(c,r,i);Y.openHref(l,"_self")}}openMobileApp(r=!1){const{walletConnectUri:e}=Ne.state,t=Y.getWalletRouterData();te.setRecentWallet(t),e&&this.onFormatAndRedirect(e,r)}onGoToAppStore(r){r&&Y.openHref(r,"_blank")}render(){const{name:r,id:e,image_id:t,app:i,mobile:o}=Y.getWalletRouterData(),{isWeb:c}=te.getCachedRouterWalletPlatforms(),l=i?.ios,d=o?.universal;return j`<wcm-modal-header title="${r}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Je(t)}" label="Tap 'Open' to continue…" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer class="wcm-note"><wcm-platform-selection .isWeb="${c}" .isRetry="${!0}"><wcm-button .onClick="${()=>this.openMobileApp(!1)}" .iconRight="${we.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection>${d?j`<wcm-text color="secondary" variant="small-thin">Still doesn't work? <span tabindex="0" @click="${()=>this.openMobileApp(!0)}">Try this alternate link</span></wcm-text>`:null}</wcm-info-footer><wcm-info-footer class="wcm-app-store"><div><wcm-wallet-image walletId="${e}" imageId="${Je(t)}"></wcm-wallet-image><wcm-text>${`Get ${r}`}</wcm-text></div><wcm-button .iconRight="${we.ARROW_RIGHT_ICON}" .onClick="${()=>this.onGoToAppStore(l)}" variant="ghost">App Store</wcm-button></wcm-info-footer>`}};wo.styles=[he.globalCss,FR],Nf([ut()],wo.prototype,"isError",2),wo=Nf([pe("wcm-mobile-connecting-view")],wo);const KR=ge`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var GR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let el=class extends de{render(){const{name:r,id:e,image_id:t}=Y.getWalletRouterData(),{isDesktop:i,isWeb:o}=te.getCachedRouterWalletPlatforms();return j`<wcm-modal-header title="${r}" .onAction="${te.handleUriCopy}" .actionIcon="${we.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr walletId="${e}" imageId="${Je(t)}"></wcm-walletconnect-qr></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`Scan this QR Code with your phone's camera or inside ${r} app`}</wcm-text><wcm-platform-selection .isDesktop="${i}" .isWeb="${o}"></wcm-platform-selection></wcm-info-footer>`}};el.styles=[he.globalCss,KR],el=GR([pe("wcm-mobile-qr-connecting-view")],el);var YR=(r,e,t,i)=>{for(var o=e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=l(o)||o);return o};let tl=class extends de{render(){return j`<wcm-modal-header title="Scan the code" .onAction="${te.handleUriCopy}" .actionIcon="${we.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-walletconnect-qr></wcm-walletconnect-qr></wcm-modal-content>`}};tl.styles=[he.globalCss],tl=YR([pe("wcm-qrcode-view")],tl);const ZR=ge`wcm-modal-content{height:clamp(200px,60vh,600px);display:block;overflow:scroll;scrollbar-width:none;position:relative;margin-top:1px}.wcm-grid{display:grid;grid-template-columns:repeat(4,80px);justify-content:space-between;margin:-15px -10px;padding-top:20px}wcm-modal-content::after,wcm-modal-content::before{content:'';position:fixed;pointer-events:none;z-index:1;width:100%;height:20px;opacity:1}wcm-modal-content::before{box-shadow:0 -1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(var(--wcm-color-bg-1),rgba(255,255,255,0))}wcm-modal-content::after{box-shadow:0 1px 0 0 var(--wcm-color-bg-1);background:linear-gradient(rgba(255,255,255,0),var(--wcm-color-bg-1));top:calc(100% - 20px)}wcm-modal-content::-webkit-scrollbar{display:none}.wcm-placeholder-block{display:flex;justify-content:center;align-items:center;height:100px;overflow:hidden}.wcm-empty,.wcm-loading{display:flex}.wcm-loading .wcm-placeholder-block{height:100%}.wcm-end-reached .wcm-placeholder-block{height:0;opacity:0}.wcm-empty .wcm-placeholder-block{opacity:1;height:100%}wcm-wallet-button{margin:calc((100% - 60px)/ 3) 0}`;var JR=Object.defineProperty,QR=Object.getOwnPropertyDescriptor,Yi=(r,e,t,i)=>{for(var o=i>1?void 0:i?QR(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&JR(e,t,o),o};const rl=40;let hn=class extends de{constructor(){super(...arguments),this.loading=!at.state.wallets.listings.length,this.firstFetch=!at.state.wallets.listings.length,this.search="",this.endReached=!1,this.intersectionObserver=void 0,this.searchDebounce=te.debounce(r=>{r.length>=1?(this.firstFetch=!0,this.endReached=!1,this.search=r,at.resetSearch(),this.fetchWallets()):this.search&&(this.search="",this.endReached=this.isLastPage(),at.resetSearch())})}firstUpdated(){this.createPaginationObserver()}disconnectedCallback(){var r;(r=this.intersectionObserver)==null||r.disconnect()}get placeholderEl(){return te.getShadowRootElement(this,".wcm-placeholder-block")}createPaginationObserver(){this.intersectionObserver=new IntersectionObserver(([r])=>{r.isIntersecting&&!(this.search&&this.firstFetch)&&this.fetchWallets()}),this.intersectionObserver.observe(this.placeholderEl)}isLastPage(){const{wallets:r,search:e}=at.state,{listings:t,total:i}=this.search?e:r;return i<=rl||t.length>=i}async fetchWallets(){var r;const{wallets:e,search:t}=at.state,{listings:i,total:o,page:c}=this.search?t:e;if(!this.endReached&&(this.firstFetch||o>rl&&i.length<o))try{this.loading=!0;const l=(r=Ne.state.chains)==null?void 0:r.join(","),{listings:d}=await at.getWallets({page:this.firstFetch?1:c+1,entries:rl,search:this.search,version:2,chains:l}),m=d.map(g=>te.getWalletIcon(g));await Promise.all([...m.map(async g=>te.preloadImage(g)),Y.wait(300)]),this.endReached=this.isLastPage()}catch(l){console.error(l),kr.openToast(te.getErrorMessage(l),"error")}finally{this.loading=!1,this.firstFetch=!1}}onConnect(r){Y.isAndroid()?te.handleMobileLinking(r):te.goToConnectingView(r)}onSearchChange(r){const{value:e}=r.target;this.searchDebounce(e)}render(){const{wallets:r,search:e}=at.state,{listings:t}=this.search?e:r,i=this.loading&&!t.length,o=this.search.length>=3;let c=jr.manualWalletsTemplate(),l=jr.recomendedWalletsTemplate(!0);o&&(c=c.filter(({values:g})=>te.caseSafeIncludes(g[0],this.search)),l=l.filter(({values:g})=>te.caseSafeIncludes(g[0],this.search)));const d=!this.loading&&!t.length&&!l.length,m={"wcm-loading":i,"wcm-end-reached":this.endReached||!this.loading,"wcm-empty":d};return j`<wcm-modal-header><wcm-search-input .onChange="${this.onSearchChange.bind(this)}"></wcm-search-input></wcm-modal-header><wcm-modal-content class="${mr(m)}"><div class="wcm-grid">${i?null:c} ${i?null:l} ${i?null:t.map(g=>j`${g?j`<wcm-wallet-button imageId="${g.image_id}" name="${g.name}" walletId="${g.id}" .onClick="${()=>this.onConnect(g)}"></wcm-wallet-button>`:null}`)}</div><div class="wcm-placeholder-block">${d?j`<wcm-text variant="big-bold" color="secondary">No results found</wcm-text>`:null} ${!d&&this.loading?j`<wcm-spinner></wcm-spinner>`:null}</div></wcm-modal-content>`}};hn.styles=[he.globalCss,ZR],Yi([ut()],hn.prototype,"loading",2),Yi([ut()],hn.prototype,"firstFetch",2),Yi([ut()],hn.prototype,"search",2),Yi([ut()],hn.prototype,"endReached",2),hn=Yi([pe("wcm-wallet-explorer-view")],hn);const XR=ge`wcm-info-footer{flex-direction:column;align-items:center;display:flex;width:100%;padding:5px 0}wcm-text{text-align:center}`;var e9=Object.defineProperty,t9=Object.getOwnPropertyDescriptor,Af=(r,e,t,i)=>{for(var o=i>1?void 0:i?t9(e,t):e,c=r.length-1,l;c>=0;c--)(l=r[c])&&(o=(i?l(e,t,o):l(o))||o);return i&&o&&e9(e,t,o),o};let vo=class extends de{constructor(){super(),this.isError=!1,this.openWebWallet()}onFormatAndRedirect(r){const{desktop:e,name:t}=Y.getWalletRouterData(),i=e?.universal;if(i){const o=Y.formatUniversalUrl(i,r,t);Y.openHref(o,"_blank")}}openWebWallet(){const{walletConnectUri:r}=Ne.state,e=Y.getWalletRouterData();te.setRecentWallet(e),r&&this.onFormatAndRedirect(r)}render(){const{name:r,id:e,image_id:t}=Y.getWalletRouterData(),{isMobile:i,isDesktop:o}=te.getCachedRouterWalletPlatforms(),c=Y.isMobile();return j`<wcm-modal-header title="${r}" .onAction="${te.handleUriCopy}" .actionIcon="${we.COPY_ICON}"></wcm-modal-header><wcm-modal-content><wcm-connector-waiting walletId="${e}" imageId="${Je(t)}" label="${`Continue in ${r}...`}" .isError="${this.isError}"></wcm-connector-waiting></wcm-modal-content><wcm-info-footer><wcm-text color="secondary" variant="small-thin">${`${r} web app has opened in a new tab. Go there, accept the connection, and come back`}</wcm-text><wcm-platform-selection .isMobile="${i}" .isDesktop="${c?!1:o}" .isRetry="${!0}"><wcm-button .onClick="${this.openWebWallet.bind(this)}" .iconRight="${we.RETRY_ICON}">Retry</wcm-button></wcm-platform-selection></wcm-info-footer>`}};vo.styles=[he.globalCss,XR],Af([ut()],vo.prototype,"isError",2),vo=Af([pe("wcm-web-connecting-view")],vo);const r9=Object.freeze(Object.defineProperty({__proto__:null,get WcmModal(){return Gn},get WcmQrCode(){return fr}},Symbol.toStringTag,{value:"Module"}));export{X9 as a,J9 as i,y9 as s};
//# sourceMappingURL=vendor-walletconnect-CoZ724CP.js.map
