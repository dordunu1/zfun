import{c as h}from"./vendor-a-DTa6tF4e.js";import{e as P,a as A}from"./vendor-e-BAzhHmIV.js";var T=I;function I(a){a=a||{};var r=a.max||Number.MAX_SAFE_INTEGER,e=typeof a.start<"u"?a.start:Math.floor(Math.random()*r);return function(){return e=e%r,e++}}var C={},_={},p={};Object.defineProperty(p,"__esModule",{value:!0});p.getUniqueId=void 0;const R=4294967295;let M=Math.floor(Math.random()*R);function O(){return M=(M+1)%R,M}p.getUniqueId=O;Object.defineProperty(_,"__esModule",{value:!0});_.createIdRemapMiddleware=void 0;const $=p;function b(){return(a,r,e,t)=>{const o=a.id,n=$.getUniqueId();a.id=n,r.id=n,e(i=>{a.id=o,r.id=o,i()})}}_.createIdRemapMiddleware=b;var m={};Object.defineProperty(m,"__esModule",{value:!0});m.createAsyncMiddleware=void 0;function S(a){return async(r,e,t,o)=>{let n;const i=new Promise(f=>{n=f});let d=null,s=!1;const l=async()=>{s=!0,t(f=>{d=f,n()}),await i};try{await a(r,e,l),s?(await i,d(null)):o(null)}catch(f){d?d(f):o(f)}}}m.createAsyncMiddleware=S;var y={};Object.defineProperty(y,"__esModule",{value:!0});y.createScaffoldMiddleware=void 0;function H(a){return(r,e,t,o)=>{const n=a[r.method];return n===void 0?t():typeof n=="function"?n(r,e,t,o):(e.result=n,o())}}y.createScaffoldMiddleware=H;var w={},g={};Object.defineProperty(g,"__esModule",{value:!0});const x=P;function j(a,r,e){try{Reflect.apply(a,r,e)}catch(t){setTimeout(()=>{throw t})}}function U(a){const r=a.length,e=new Array(r);for(let t=0;t<r;t+=1)e[t]=a[t];return e}class N extends x.EventEmitter{emit(r,...e){let t=r==="error";const o=this._events;if(o!==void 0)t=t&&o.error===void 0;else if(!t)return!1;if(t){let i;if(e.length>0&&([i]=e),i instanceof Error)throw i;const d=new Error(`Unhandled error.${i?` (${i.message})`:""}`);throw d.context=i,d}const n=o[r];if(n===void 0)return!1;if(typeof n=="function")j(n,this,e);else{const i=n.length,d=U(n);for(let s=0;s<i;s+=1)j(d[s],this,e)}return!0}}g.default=N;var B=h&&h.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(w,"__esModule",{value:!0});w.JsonRpcEngine=void 0;const F=B(g),u=A;class c extends F.default{constructor(){super(),this._middleware=[]}push(r){this._middleware.push(r)}handle(r,e){if(e&&typeof e!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(r)?e?this._handleBatch(r,e):this._handleBatch(r):e?this._handle(r,e):this._promiseHandle(r)}asMiddleware(){return async(r,e,t,o)=>{try{const[n,i,d]=await c._runAllMiddleware(r,e,this._middleware);return i?(await c._runReturnHandlers(d),o(n)):t(async s=>{try{await c._runReturnHandlers(d)}catch(l){return s(l)}return s()})}catch(n){return o(n)}}}async _handleBatch(r,e){try{const t=await Promise.all(r.map(this._promiseHandle.bind(this)));return e?e(null,t):t}catch(t){if(e)return e(t);throw t}}_promiseHandle(r){return new Promise(e=>{this._handle(r,(t,o)=>{e(o)})})}async _handle(r,e){if(!r||Array.isArray(r)||typeof r!="object"){const i=new u.EthereumRpcError(u.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof r}`,{request:r});return e(i,{id:void 0,jsonrpc:"2.0",error:i})}if(typeof r.method!="string"){const i=new u.EthereumRpcError(u.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof r.method}`,{request:r});return e(i,{id:r.id,jsonrpc:"2.0",error:i})}const t=Object.assign({},r),o={id:t.id,jsonrpc:t.jsonrpc};let n=null;try{await this._processRequest(t,o)}catch(i){n=i}return n&&(delete o.result,o.error||(o.error=u.serializeError(n))),e(n,o)}async _processRequest(r,e){const[t,o,n]=await c._runAllMiddleware(r,e,this._middleware);if(c._checkForCompletion(r,e,o),await c._runReturnHandlers(n),t)throw t}static async _runAllMiddleware(r,e,t){const o=[];let n=null,i=!1;for(const d of t)if([n,i]=await c._runMiddleware(r,e,d,o),i)break;return[n,i,o.reverse()]}static _runMiddleware(r,e,t,o){return new Promise(n=>{const i=s=>{const l=s||e.error;l&&(e.error=u.serializeError(l)),n([l,!0])},d=s=>{e.error?i(e.error):(s&&(typeof s!="function"&&i(new u.EthereumRpcError(u.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof s}" for request:
${E(r)}`,{request:r})),o.push(s)),n([null,!1]))};try{t(r,e,d,i)}catch(s){i(s)}})}static async _runReturnHandlers(r){for(const e of r)await new Promise((t,o)=>{e(n=>n?o(n):t())})}static _checkForCompletion(r,e,t){if(!("result"in e)&&!("error"in e))throw new u.EthereumRpcError(u.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${E(r)}`,{request:r});if(!t)throw new u.EthereumRpcError(u.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${E(r)}`,{request:r})}}w.JsonRpcEngine=c;function E(a){return JSON.stringify(a,null,2)}var v={};Object.defineProperty(v,"__esModule",{value:!0});v.mergeMiddleware=void 0;const J=w;function z(a){const r=new J.JsonRpcEngine;return a.forEach(e=>r.push(e)),r.asMiddleware()}v.mergeMiddleware=z;(function(a){var r=h&&h.__createBinding||(Object.create?function(t,o,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return o[n]}})}:function(t,o,n,i){i===void 0&&(i=n),t[i]=o[n]}),e=h&&h.__exportStar||function(t,o){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(o,n)&&r(o,t,n)};Object.defineProperty(a,"__esModule",{value:!0}),e(_,a),e(m,a),e(y,a),e(p,a),e(w,a),e(v,a)})(C);export{C as d,T as j};
//# sourceMappingURL=vendor-j-CAPY2oEB.js.map
